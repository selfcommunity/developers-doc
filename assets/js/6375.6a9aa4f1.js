(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[6375],{41567:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>L,Rx:()=>B,cM:()=>N,A9:()=>s.A9,h_:()=>s.h_,fc:()=>s.fc});var r=n(67294),o=n(14783),a=n(99626),s=n(26580),i=n(64101);const l=(0,o.ZV)({chunked:!0,chunkSize:5242880,retries:0,parallel:1});let c=null;const d=(c=null,(0,o.Ym)()&&"Blob"in window&&(c=Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),!!c);class u extends Error{constructor(e){super(e),this.name="ChunkedSendError"}}const h=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const{chunkSize:r}=t,o=n?e.file.size-n:e.file.size;if(o<=0)throw new u(`start byte ${n} is invalid. File size: ${e.file.size}`);const a=o<=r?1:Math.ceil(o/r);return new Array(a).fill(null).map(((t,o)=>{const a=r*o+(n||0);return{id:`${e.id}_chunk-${o}`,start:a,end:Math.min(a+r,e.file.size),data:null,attempt:0,uploaded:0,index:o}}))};var p=n(11618);const g=(0,o.ZV)({CHUNK_START:"CHUNK_START",CHUNK_FINISH:"CHUNK_FINISH"}),f=(e,t,n,r,a,s)=>(e.updateState((e=>{e.requests[n]={id:n,abort:r.abort}})),r.request.then((r=>{o.kg.debugLog(`chunkedSender: request finished for chunk: ${n} - `,r),e.updateState((e=>{delete e.requests[n]}));const i=e.getState().chunks,l=i.findIndex((e=>e.id===n));if(~l){if(r.state===o.FD.FINISHED){const n=i[l];e.updateState((e=>{e.chunks=e.chunks.slice(0,l).concat(e.chunks.slice(l+1))}));const c=n.end-n.start;s({loaded:c,total:t.file.size},[n]),a(g.CHUNK_FINISH,{chunk:(0,o.ei)(n,["id","start","end","index","attempt"]),item:(0,p.Wg)(t),uploadData:r})}else r.state!==o.FD.ABORTED&&e.updateState((e=>{e.chunks[l].attempt+=1,e.lastChunkErrorData={status:r.status,response:r.response}}));e.updateState((e=>{e.responses.push(r.response)}))}}))),b=e=>{const t=e.getState(),n=[],r=Object.keys(t.requests),o=t.parallel||1;for(let a=0;a<t.chunks.length&&r.length<o&&n.length<o;a++){const e=t.chunks[a];if(!r.includes(e.id)){if(e.attempt&&!(e.attempt<t.retries))throw new u("chunk failure");n.push(e)}}return n},m=(e,t,n)=>t&&`bytes ${e.start}-${e.start+t.size-1}/${n.file.size}`,E=(0,o.D8)({undefinedOverwrites:!0}),S=(e,t,n,r,a)=>{const s=t.getState(),l=(0,p.Wg)(s.sendOptions),c={...l,headers:{...l.headers,"Content-Range":m(e,e.data,n)}},d=(0,o.Yc)(e.data,e.id),u=t=>{r(t,[e])},h=s.chunks.indexOf(e);return(0,o.sc)(a,g.CHUNK_START,{item:(0,p.Wg)(n),chunk:(0,o.ei)(e,["id","start","end","index","attempt"]),chunkItem:{...d},sendOptions:c,url:s.url,chunkIndex:h,remainingCount:s.chunks.length,totalCount:s.chunkCount,onProgress:r}).then((e=>{const t=!1===e;return t&&o.kg.debugLog(`chunkedSender.sendChunk: received false from CHUNK_START handler - skipping chunk ${h}, item ${n.id}`),t?{request:Promise.resolve({state:o.FD.FINISHED,response:"skipping chunk as instructed by CHUNK_START handler",status:200}),abort:()=>!0,senderType:"chunk-skipped-sender"}:(0,i.ZP)([d],e?.url||s.url,E({},c,e?.sendOptions),u)}))},y=(e,t,n,r,a)=>{if(e.data||t.updateState((()=>{e.data=((e,t,n)=>{const r=c?.call(e,t,n,e.type);return r&&(r.name=e.name,r.lastModified=e.lastModified),r})(n.file,e.start,e.end)})),!e.data)throw new u("chunk failure - failed to slice");const s=t.getState().url;o.kg.debugLog(`chunkedSender.sendChunk: about to send chunk ${e.id} [${e.start}-${e.end}] to: ${s||""}`);const i=S(e,t,n,r,a);return{request:i.then((e=>{let{request:t}=e;return t})),abort:()=>(i.then((e=>{let{abort:t}=e;return t()})),!0),senderType:"chunk-passthrough-sender"}},v=(e,t,n)=>{if(n instanceof u){const n=e.getState().lastChunkErrorData;t({state:o.FD.ERROR,response:{reason:"At least one chunk failed",chunkUploadResponse:n}})}else t({state:o.FD.ERROR,response:n.message})},R=(e,t,n,r)=>{e.updateState((e=>{e.finished=!0})),n({state:r,response:{results:e.getState().responses}})},A=(e,t,n,r,a,s)=>new Promise(((i,l)=>{try{const l=y(a,e,t,n,s);f(e,t,a.id,l,s,n).then((()=>{i(),((e,t,n)=>{const r=e.getState(),a=!r.chunks.length;return r.aborted?(o.kg.debugLog(`chunkedSender: chunked upload aborted for item: ${t.id}`),R(e,0,n,o.FD.ABORTED)):a&&!r.error&&(o.kg.debugLog(`chunkedSender: chunked upload finished for item: ${t.id}`,r.responses),R(e,0,n,o.FD.FINISHED)),a||r.error})(e,t,r)||O(e,t,n,r,s)}))}catch(c){l(c)}})),O=(e,t,n,r,o)=>{const a=e.getState();if(!a.finished&&!a.aborted){const i=Object.keys(a.requests).length;if(!i||a.parallel&&a.parallel>i){let a;try{a=b(e)}catch(s){v(e,r,s)}a&&a.forEach((a=>{A(e,t,n,r,a,o).catch((t=>{e.updateState((e=>{e.error=!0})),v(e,r,t)}))}))}}},I=O,k=(e,t,n,r)=>{e.updateState((e=>{e.uploaded[n]=Math.max(r,e.uploaded[n]||0)}));const o=e.getState(),a=Object.keys(o.uploaded).reduce(((e,t)=>e+o.uploaded[t]),o.startByte),s=t.file.size;return{loaded:Math.min(a,s),total:s}},T=(e,t,n,r)=>{const{state:o,update:a}=(0,p.ZP)({finished:!1,aborted:!1,error:!1,uploaded:{},requests:{},responses:[],chunkCount:e.length,startByte:n.startByte||0,lastChunkErrorData:null,chunks:e,url:t,sendOptions:n,...r});return{getState:()=>o,updateState:e=>{a(e)}}},w=(e,t,n,r)=>{const a=(r,o)=>{const a=k(e,t,o[0].id,r.loaded);n(a,[t])};return{sendPromise:new Promise((n=>{I(e,t,a,n,r)})),abort:()=>((e,t)=>{o.kg.debugLog(`chunkedSender: aborting chunked upload for item: ${t.id}`);const n=e.getState();return n.finished||n.aborted||(Object.keys(n.requests).forEach((e=>{o.kg.debugLog(`chunkedSender: aborting chunk: ${e}`),n.requests[e].abort()})),e.updateState((e=>{e.aborted=!0}))),n.aborted})(e,t)}},D=(e,t,n,r,a,s)=>{const i=h(e,t,r.startByte),l=T(i,n,r,t);o.kg.debugLog(`chunkedSender: created ${i.length} chunks for: ${e.file.name}`);const{sendPromise:c,abort:d}=w(l,e,a,s);return{request:c,abort:d,senderType:"rpldy-chunked-sender"}},C=(e,t)=>{const n=(e=>(0,o.TS)({},l,e))(e);return{send:(e,r,a,s)=>{let l;return!n.chunked||e.length>1||e[0].url||!e[0].file.size?(l=(0,i.ZP)(e,r,a,s),o.kg.debugLog("chunkedSender: sending items as normal, un-chunked requests")):(o.kg.debugLog("chunkedSender: sending file as a chunked request"),l=D(e[0],n,r,a,s,t)),l}}},P=e=>(t,n)=>{const r=C(e,n);return o.kg.debugLog("chunkedSenderEnhancer: Created chunked-sender instance with options: ",e),t.update({send:r.send}),t};function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_.apply(this,arguments)}(0,a.KE)(d||!(0,o.Ym)(),"This browser doesn't support chunking. Consider using @rpldy/uploady instead");const F=e=>{const{chunked:t,chunkSize:n,retries:o,parallel:a,...i}=e,l=(0,r.useMemo)((()=>d?((e,t)=>{const n=P(e);return t?(0,s.fZ)(n,t):n})({chunked:t,chunkSize:n,retries:o,parallel:a},e.enhancer):void 0),[e.enhancer,t,n,o,a]);return r.createElement(s.ZP,_({},i,{enhancer:l}))},N=(0,a.q5)(g.CHUNK_START,!1),B=(0,a.q5)(g.CHUNK_FINISH,!1),L=F},64101:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>h});var r=n(14783);const o="rpldy-sender";class a extends Error{constructor(e){super(`${e} didn't receive upload URL`),this.name="MissingUrlError"}}const s=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];"set"in e?e.set(t,...r):("delete"in e&&e.delete(t),e.append(t,...r))},i=(e,t)=>{const n=new FormData;return t.params&&Object.entries(t.params).forEach((e=>{let[r,o]=e;(t.formDataAllowUndefined||void 0!==o)&&s(n,r,o)})),((e,t,n)=>{const o=1===t.length;t.forEach(((t,a)=>{const i=o?n.paramName:(0,r.mf)(n.formatGroupParamName)?n.formatGroupParamName(a,n.paramName):`${n.paramName}[${a}]`;t.file?s(e,i,t.file,t.file.name):t.url&&s(e,i,t.url)}))})(n,e,t),n},l=[200,201,202,203,204],c=(e,t,n,o,a)=>{let s;const l=a?.getRequestData?a.getRequestData(e,n):((e,t)=>{let n;if(t.sendWithFormData)r.kg.debugLog(`uploady.sender: sending ${e.length} item(s) as form data`),n=i(e,t);else{if(e.length>1)throw new Error(`XHR Sender - Request without form data can only contain 1 item. received ${e.length}`);const t=e[0];r.kg.debugLog(`uploady.sender: sending item ${t.id} as request body`),n=t.file||t.url}return n})(e,n),c=function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,c=arguments.length>2?arguments[2]:void 0;const d=(0,r.TS)({...(0,r.ei)(n,["method","headers","withCredentials"]),preSend:t=>{t.upload.onprogress=t=>{t.lengthComputable&&o&&o(t,e.slice())}}},c),u=(0,r.WY)(a,i,d);return s=u.xhr,u},d=a?.preRequestHandler?a.preRequestHandler(c,e,t,n,o,a):c();return{url:t,count:e.length,pXhr:d,getXhr:()=>s,aborted:!1}},d=(e,t,n)=>{let r=e;const o=t?.["content-type"];if(n.forceJsonResponse||o?.includes("json"))try{r=JSON.parse(e)}catch{}return r},u=(e,t)=>e.pXhr.then((e=>(r.kg.debugLog("uploady.sender: received upload response ",e),((e,t)=>{const n=t.isSuccessfulCall?t.isSuccessfulCall(e):l.includes(e.status);return(0,r.tI)(n)?n:Promise.resolve(n)})(e,t).then((n=>{const o=n?r.FD.FINISHED:r.FD.ERROR,a=e.status,s=(0,r.k7)(e);return{status:a,state:o,response:{data:t.formatServerResponse?.(e.response,a,s)??d(e.response,s,t),headers:s}}}))))).catch((t=>{let n,o;return e.aborted?(n=r.FD.ABORTED,o="aborted"):(r.kg.debugLog("uploady.sender: upload failed: ",t),n=r.FD.ERROR,o=t),{error:!0,state:n,response:o,status:0}})),h=(e=>(t,n,s,i)=>{if(!n)throw new a(o);r.kg.debugLog("uploady.sender: sending file: ",{items:t,url:n,options:s});const l=c(t,n,s,i,e);return{request:u(l,s),abort:()=>(e=>{let t=!1;const{aborted:n,getXhr:o}=e,a=o();return!n&&a&&a.readyState&&4!==a.readyState&&(r.kg.debugLog(`uploady.sender: cancelling request with ${e.count} items to: ${e.url}`),a.abort(),e.aborted=!0,t=!0),t})(l),senderType:o}})()},99626:(e,t,n)=>{"use strict";n.d(t,{$V:()=>k,q5:()=>b,KE:()=>A,zD:()=>O,A9:()=>S,h_:()=>E,UT:()=>y,J0:()=>m,fc:()=>v,LN:()=>T,uO:()=>p});var r=n(86945),o=n(67294),a=n(14783);const s=Symbol.for("_rpldy-version_"),i=()=>(0,a.Ym)()?window:globalThis||process,l=()=>i()[s],c="Uploady - Context. File input isn't available",d=(e,t)=>{let n,r,o=!1;t?n=t:a.kg.debugLog("Uploady context - didn't receive input field ref - waiting for external ref");const l=()=>n?.current,d=()=>{const e=l();(0,a.kG)(e,c),e.removeEventListener("change",d);const t=r;r=null,u(e.files,t)},u=(t,n)=>{e.add(t,n)};return i()[s]="1.6.1",{hasUploader:()=>!!e,getInternalFileInput:()=>(n&&(o=!0),n),setExternalFileInput:e=>{o=!0,n=e},getIsUsingExternalInput:()=>o,showFileUpload:e=>{const t=l();(0,a.kG)(t,c),r=e,t.removeEventListener("change",d),t.addEventListener("change",d),t.value="",t.click()},upload:u,processPending:t=>{e.upload(t)},clearPending:()=>{e.clearPending()},setOptions:t=>{e.update(t)},getOptions:()=>e.getOptions(),getExtension:t=>e.getExtension(t),abort:t=>{e.abort(t)},abortBatch:t=>{e.abortBatch(t)},on:(t,n)=>e.on(t,n),once:(t,n)=>e.once(t,n),off:(t,n)=>e.off(t,n)}},u=o.createContext(null),h=e=>((0,a.kG)(!(()=>{const e=l();return!!e&&"1.6.1"!==e})(),"Uploady - Valid UploadyContext not found.\nYou may be using packages of different Uploady versions. <Uploady> and all other packages using the context provider must be of the same version: %s",l()),(0,a.kG)(e&&e.hasUploader(),"Uploady - Valid UploadyContext not found. Make sure you render inside <Uploady>"),e),p=()=>h((0,o.useContext)(u)),g=(e,t)=>{const n=p(),{on:r,off:a}=n;(0,o.useEffect)((()=>(r(e,t),()=>{a(e,t)})),[e,t,r,a])},f=(e,t)=>(n,r)=>{const[s,i]=(0,o.useState)(null);let l=n,c=r;n&&!(0,a.mf)(n)&&(c=n,l=void 0);const d=(0,o.useCallback)((function(e){if(!c||e.id===c){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];i(t(e,...r)),(0,a.mf)(l)&&l(e,...r)}}),[l,c]);return g(e,d),s},b=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(n,r)=>{const a=(0,o.useCallback)((function(e){for(var o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];return!n||t&&r&&e.id!==r?void 0:n(e,...a)}),[n,r]);g(e,a)}},m=(b(r.tY.BATCH_ADD,!1),b(r.tY.BATCH_START),b(r.tY.BATCH_FINISH),b(r.tY.BATCH_CANCEL),b(r.tY.BATCH_ERROR),b(r.tY.BATCH_FINALIZE),b(r.tY.BATCH_ABORT),f(r.tY.BATCH_PROGRESS,(e=>({...e}))),b(r.tY.ITEM_START)),E=b(r.tY.ITEM_FINISH),S=(b(r.tY.ITEM_CANCEL),b(r.tY.ITEM_ERROR)),y=(b(r.tY.ITEM_ABORT),b(r.tY.ITEM_FINALIZE),f(r.tY.ITEM_PROGRESS,(e=>({...e})))),v=b(r.tY.REQUEST_PRE_SEND,!1),R=(b(r.tY.ALL_ABORT,!1),Symbol.for("rpldy_component")),A=(e,t)=>{(0,a.yv)()||e||console.warn(t)},O=e=>{e[R]=!0},I=(e,t)=>{const n=(0,o.useMemo)((()=>(a.kg.debugLog("Uploady creating a new uploader instance",e),(0,r.ZP)(e))),[e.enhancer]);return n.update(e),(0,o.useEffect)((()=>(t&&(a.kg.debugLog("Uploady setting event listeners",t),Object.entries(t).forEach((e=>{let[t,r]=e;n.on(t,r)}))),()=>{t&&(a.kg.debugLog("Uploady removing event listeners",t),Object.entries(t).forEach((e=>{let[t,r]=e;return n.off(t,r)})))})),[t,n]),n},k=e=>{const{listeners:t,debug:n,children:r,inputRef:s,...i}=e;a.kg.setDebug(!!n),a.kg.debugLog("@@@@@@ Uploady Rendering @@@@@@",e);const l=I(i,t),c=(0,o.useMemo)((()=>d(l,s)),[l,s]);return o.createElement(u.Provider,{value:c},r)},T=e=>{const t=p();return e&&t.setOptions(e),t.getOptions()};function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w.apply(this,arguments)}const D=e=>{let{eventType:t,getIsValidEventData:n,getRequestData:r}=e;return e=>a=>{const s=p(),[i,l]=(0,o.useState)({updateRequest:null,requestData:null}),{id:c}=a;return(0,o.useLayoutEffect)((()=>{const e=function(){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return!0===n(c,...a)?new Promise((n=>{l({updateRequest:r=>{s.off(t,e),n(r)},requestData:r(...a)})})):void 0};return c&&s.on(t,e),()=>{c&&s.off(t,e)}}),[s,c]),o.createElement(e,w({},a,i))}};D({eventType:r.tY.REQUEST_PRE_SEND,getIsValidEventData:(e,t)=>{let{items:n}=t;return!!n.find((t=>t.id===e))},getRequestData:e=>{let{items:t,options:n}=e;return{items:t,options:n}}}),D({eventType:r.tY.BATCH_START,getIsValidEventData:(e,t)=>t.id===e,getRequestData:(e,t)=>({batch:e,items:e.items,options:t})})},14783:(e,t,n)=>{"use strict";n.d(t,{FG:()=>l,FD:()=>c,d9:()=>k,Yc:()=>U,ZV:()=>v,$e:()=>H,D8:()=>O,Ym:()=>d,kG:()=>a(),xb:()=>F,mf:()=>m(),PO:()=>R,yv:()=>y(),tI:()=>w,sQ:()=>E,kg:()=>r,TS:()=>I,k7:()=>x,ei:()=>T,WY:()=>j,nK:()=>_,P2:()=>s,tq:()=>f,sc:()=>N});var r={};n.r(r),n.d(r,{debugLog:()=>g,isDebugOn:()=>h,setDebug:()=>p});var o=n(41143),a=n.n(o),s=function(e,t,n){var r=null,o=null,a=n&&n.leading,s=n&&n.trailing;null==a&&(a=!0);null==s&&(s=!a);1==a&&(s=!1);var i=function(){r&&(clearTimeout(r),r=null)},l=function(){var n=a&&!r,i=this,l=arguments;if(o=function(){return e.apply(i,l)},r||(r=setTimeout((function(){if(r=null,s)return o()}),t)),n)return n=!1,o()};return l.cancel=i,l.flush=function(){var e=o;i(),e&&e()},l};const i="__rpldy-logger-debug__",l={PENDING:"pending",ADDED:"added",PROCESSING:"processing",UPLOADING:"uploading",CANCELLED:"cancelled",FINISHED:"finished",ABORTED:"aborted",ERROR:"error"},c={PENDING:"pending",ADDED:"added",UPLOADING:"uploading",CANCELLED:"cancelled",FINISHED:"finished",ERROR:"error",ABORTED:"aborted"},d=()=>"object"==typeof window&&!!window.document;let u=null;const h=()=>("boolean"!=typeof u&&(u=d()&&("location"in window&&!!~window.location.search.indexOf("rpldy_debug=true")||!0===window[i])),!!u),p=e=>{d()&&(window[i]=e),u=!!e||null},g=function(){h()&&console.log(...arguments)},f=function(e,t){const n=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return new Promise(((n,o)=>{const a=e(t,...r);a&&a.length?Promise.all(a).catch(o).then((e=>e&&n(!!~e.findIndex((e=>!1===e))))):n(!1)}))};for(var r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];return t?n(t,...o):n};var b=n(46916),m=n.n(b);const E=(e,t,n)=>{let r=!0;const o=(e=>{const t=[].concat(e);return e=>e.map((e=>t.map((t=>e[t])).join()))})(n);if(e&&t&&e.length===t.length){const n=o(e),a=o(t);r=!!n.find(((e,t)=>e!==a[t]))}return!r};var S=n(92884),y=n.n(S);const v=e=>y()()?e:Object.freeze(e),R=e=>!!e&&"object"==typeof e&&("Object"===Object.getPrototypeOf(e)?.constructor.name||null===Object.getPrototypeOf(e)),A=e=>R(e)||Array.isArray(e),O=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return n&&o.length&&o.forEach((r=>{r&&((e,t)=>{const n=Object.keys(e);return t.withSymbols?n.concat(Object.getOwnPropertySymbols(e)):n})(r,e).forEach((o=>{const a=r[o];e.predicate&&!e.predicate(o,a)||(void 0!==a||e.undefinedOverwrites)&&(A(a)?(void 0!==n[o]&&R(n[o])||(n[o]=Array.isArray(a)?[]:{}),t(n[o],a)):n[o]=a)}))})),n};return t},I=O(),k=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I;return A(e)?t(Array.isArray(e)?[]:{},e):e},T=(e,t)=>e&&Object.keys(e).reduce(((n,r)=>(~t.indexOf(r)&&(n[r]=e[r]),n)),{});const w=function(e){return!!e&&"object"==typeof e&&"function"==typeof e.then},D=d()&&window.requestIdleCallback,C=D?window.requestIdleCallback:setTimeout,P=D?window.cancelIdleCallback:clearTimeout,_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=C(e,D?{timeout:t}:t);return()=>P(n)};const F=function(e){return null==e},N=function(e,t){const n=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return new Promise(((n,o)=>{const a=e(t,...r);a&&a.length?Promise.all(a).catch(o).then((e=>{let t;if(e)for(;F(t)&&e.length;)t=e.pop();n(F(t)?void 0:t)})):n()}))};for(var r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];return t?n(t,...o):n},B=Symbol.for("__rpldy-bi__");let L=0;const H=e=>!("object"!=typeof e||!e.id||!e.batchId||!0!==e[B]),U=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=H(e);L+=r?0:1;let o={id:r&&e.id&&"string"==typeof e.id?e.id:`${t}.item-${L}`,batchId:t,state:n?c.PENDING:c.ADDED,uploadStatus:0,total:0,completed:0,loaded:0,recycled:r,previousBatch:r?e.batchId:null};Object.defineProperty(o,B,{value:!0,writable:!0});const a=r?e.file||e.url:e;if("string"==typeof a)o=((e,t)=>(e.url=t,e))(o,a);else{if(!(e=>e&&(e instanceof File||e instanceof Blob||!("object"!=typeof e||!e.name||!e.type)))(a))throw new Error("Unknown type of file added: "+typeof a);o=((e,t)=>(e.file=t,e))(o,a)}return o};const G=class extends Promise{constructor(e,t){super(e),this.xhr=t}},x=e=>{let t;try{t=e.getAllResponseHeaders().trim().split(/[\r\n]+/).reduce(((e,t)=>{const[n,r]=t.split(": ");return e[n]=r,e}),{})}catch(n){g("uploady.request: failed to read response headers",e)}return t},j=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new XMLHttpRequest;return new G(((o,a)=>{r.onerror=()=>a(r),r.ontimeout=()=>a(r),r.onabort=()=>a(r),r.onload=()=>o(r),r.open(n?.method||"GET",e),((e,t)=>{t&&Object.keys(t).forEach((n=>{void 0!==t[n]&&e.setRequestHeader(n,t[n])}))})(r,n?.headers),r.withCredentials=!!n?.withCredentials,n?.preSend?.(r),r.send(t)}),r)}},46916:e=>{e.exports=function(e){return"function"==typeof e}},92884:e=>{e.exports=function(){return!0}},11618:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>p,$N:()=>i,X3:()=>s,Wg:()=>h});var r=n(14783);const o=Symbol.for("__rpldy-sstt-proxy__"),a=Symbol.for("__rpldy-sstt-state__"),s=e=>!(0,r.yv)()&&!!e&&!!~Object.getOwnPropertySymbols(e).indexOf(o),i=e=>Array.isArray(e)||(0,r.PO)(e)&&!(e=>(0,r.Ym)()&&e instanceof File||e.name&&e.size&&e.uri)(e),l=(0,r.D8)({withSymbols:!0,predicate:e=>e!==o&&e!==a}),c=e=>!!(0,r.yv)()||e[a].isUpdateable,d=(e,t)=>{(0,r.yv)()||(e[a].isUpdateable=t)},u=(e,t)=>{let n;return i(e)&&(s(e)||(e[o]=!0,n=new Proxy(e,t)),Object.keys(e).forEach((n=>{e[n]=u(e[n],t)}))),n||e},h=e=>s(e)?(0,r.d9)(e,l):e,p=e=>{const t={set:(e,r,o)=>(c(n)&&(e[r]=u(o,t)),!0),get:(e,t)=>t===o?h(e):e[t],defineProperty:()=>{throw new Error("Simple State doesnt support defining property")},setPrototypeOf:()=>{throw new Error("Simple State doesnt support setting prototype")},deleteProperty:(e,t)=>(c(n)&&delete e[t],!0)};(0,r.yv)()||s(e)||Object.defineProperty(e,a,{value:{isUpdateable:!1},configurable:!0});const n=(0,r.yv)()?e:u(e,t);return{state:n,update:e=>{if(!(0,r.yv)()&&c(n))throw new Error("Can't call update on State already being updated!");try{d(n,!0),e(n)}finally{d(n,!1)}return n},unwrap:e=>e?h(e):s(n)?h(n):n}}},50635:(e,t,n)=>{"use strict";n.d(t,{xR:()=>s});var r=n(67294),o=n(99626);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}const s=e=>{const t=(t,n)=>{const{showFileUpload:s}=(0,o.uO)(),{id:i,className:l,text:c,children:d,extraProps:u,onClick:h,...p}=t,g=(0,r.useRef)();g.current=p;const f=(0,r.useCallback)((e=>{s(g.current),h?.(e)}),[s,g,h]);return r.createElement(e,a({ref:n,onClick:f,id:i,className:l,children:d||c||"Upload"},u))};return(0,o.zD)(t),(0,r.forwardRef)(t)};function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}s((0,r.forwardRef)(((e,t)=>r.createElement("button",i({ref:t},e)))))},86945:(e,t,n)=>{"use strict";n.d(t,{tY:()=>D,fZ:()=>Ae,ZP:()=>we});var r=n(14783);const o=(0,r.ZV)({allowRegisterNonExistent:!0,canAddEvents:!0,canRemoveEvents:!0,collectStats:!1}),a=Symbol.for("__le__"),s=Symbol.for("__le__pack__"),i=e=>e?e[a]:null,l=e=>{const t=i(e);if(!t)throw new Error("Didnt find LE internal object. Something very bad happened!");return t},c=function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];((e,t)=>{if(!(0,r.mf)(e))throw new Error(`'${t}' is not a valid function`)})(n,"cb");const a=l(e);if(!a.options.allowRegisterNonExistent&&!~a.events.indexOf(t))throw new Error(`Cannot register for event ${t.toString()} that wasn't already defined (allowRegisterNonExistent = false)`);const s=a.registry[t]||[];return s.find((e=>e.cb===n))||(s.push({name:t,cb:n,once:o}),a.registry[t]=s),()=>b.call(e,t,n)},d=(e,t)=>{const n=l(e).registry;return t?n[t]?n[t].slice():[]:Object.values(n).flat()},u={on:function(e,t){return c(this,e,t)},once:function(e,t){return c(this,e,t,!0)},off:b,getEvents:function(){return l(this).events.slice()}},h={trigger:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];const a=d(this,e);let i;if(a.length){let t;1===n.length&&!0===n[0]?.[s]&&(t=n[0].resolve()),i=a.map((r=>{let o;return r.once&&f(this,e,r.cb),o=t?r.cb(...t):n.length?1===n.length?r.cb(n[0]):2===n.length?r.cb(n[0],n[1]):3===n.length?r.cb(n[0],n[1],n[2]):r.cb(...n):r.cb(),o})).filter((e=>!(void 0===e))).map((e=>(0,r.tI)(e)?e:Promise.resolve(e)))}return i&&(i.length?i:void 0)},addEvent:function(e){const t=l(this);if(!t.options.canAddEvents)throw new Error("Cannot add new events (canAddEvents = false)");if(~t.events.indexOf(e))throw new Error(`Event '${e}' already defined`);t.events.push(e)},removeEvent:function(e){const t=l(this);if(!t.options.canRemoveEvents)throw new Error("Cannot remove events (canRemoveEvents = false)");{const n=t.events.indexOf(e);t.events.splice(n,1)}},hasEvent:function(e){return!!~l(this).events.indexOf(e)},hasEventRegistrations:function(e){return!!d(this,e).length},assign:function(e){const t=l(this);return m(e,t.options,t.events,t.registry,t.stats),p(e)}},p=e=>Object.keys(h).reduce(((t,n)=>(t[n]=h[n].bind(e),t)),{target:e,...h}),g=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=l(e).registry;!r[t]||!n&&r[t].length||delete r[t]},f=(e,t,n)=>{const r=l(e).registry;r[t]&&(n?(r[t]=r[t].filter((e=>e.cb!==n)),g(e,t)):g(e,t,!0))};function b(e,t){f(this,e,t)}const m=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};Object.defineProperties(e,{[a]:{value:Object.seal({registry:r,events:n,options:t,stats:o})},...Object.entries(u).reduce(((e,t)=>{let[n,r]=t;return e[n]={value:r},e}),{})})},E=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=e||{},r={...o,...arguments.length>2?arguments[2]:void 0};return i(n)||m(n,r,t),p(n)},S=e=>{const t={resolve:()=>[].concat(e())};return Object.defineProperty(t,s,{value:!0,configurable:!1}),t},y=(e,t,n)=>(r.kg.debugLog(`abort: aborting ${e.state} item  - `,e),n(e.id,{status:0,state:r.FD.ABORTED,response:"aborted"}),!0),v={[r.FD.UPLOADING]:(e,t)=>(r.kg.debugLog("abort: aborting uploading item  - ",e),t[e.id]()),[r.FD.ADDED]:y,[r.FD.PENDING]:y},R=(e,t,n)=>{const r=e?.state,o=!!r&&v[r];return!!o&&o(e,t,n)},A=(e,t,n,r)=>R(t[e],n,r),O=(e,t)=>{let n=!1;return 0!==t&&t&&(n=e>=t),n},I=(e,t,n,o,a)=>{const s=Object.values(n).flat(),i=O(s.length,a.fastAbortThreshold);return r.kg.debugLog(`abort: doing abort-all (${i?"fast":"normal"} abort)`),i?(e=>{Object.values(e).forEach((e=>e()))})(t):s.forEach((n=>A(n,e,t,o))),{isFast:i}},k=(e,t,n,o,a,s)=>{const i=0===t.fastAbortThreshold?0:t.fastAbortThreshold||s.fastAbortThreshold,l=O(o[e.id].length,i);return r.kg.debugLog(`abort: doing abort-batch on: ${e.id} (${l?"fast":"normal"} abort)`),l?((e,t)=>{e.items.forEach((e=>{let{id:n}=e;return t[n]?.()}))})(e,n):e.items.forEach((e=>R(e,n,a))),{isFast:l}},T=()=>e=>(e.update({abortAll:I,abortBatch:k,abortItem:A}),e),w=T,D=(0,r.ZV)({BATCH_ADD:"BATCH-ADD",BATCH_START:"BATCH-START",BATCH_PROGRESS:"BATCH_PROGRESS",BATCH_FINISH:"BATCH-FINISH",BATCH_ABORT:"BATCH-ABORT",BATCH_CANCEL:"BATCH-CANCEL",BATCH_ERROR:"BATCH-ERROR",BATCH_FINALIZE:"BATCH-FINALIZE",ITEM_START:"FILE-START",ITEM_CANCEL:"FILE-CANCEL",ITEM_PROGRESS:"FILE-PROGRESS",ITEM_FINISH:"FILE-FINISH",ITEM_ABORT:"FILE-ABORT",ITEM_ERROR:"FILE-ERROR",ITEM_FINALIZE:"FILE-FINALIZE",REQUEST_PRE_SEND:"REQUEST_PRE_SEND",ALL_ABORT:"ALL_ABORT"}),C=(0,r.ZV)({ITEM_PROGRESS:"ITEM_PROGRESS",BATCH_PROGRESS:"BATCH_PROGRESS"}),P=[r.FD.FINISHED,r.FD.ERROR,r.FD.CANCELLED,r.FD.ABORTED];var _=n(11618);const F=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.updateState((e=>{const{batchId:r}=e.items[t]||{batchId:null};n&&delete e.items[t];const o=r?e.itemQueue[r].indexOf(t):-1;~o&&r&&e.itemQueue[r].splice(o,1);const a=e.activeIds.indexOf(t);~a&&e.activeIds.splice(a,1)}))},N=(e,t)=>!!e.getState().items[t],B=e=>P.includes(e.state),L=(0,r.D8)({undefinedOverwrites:!0}),H=(e,t,n,o,a,s)=>(0,r.sc)(e.trigger,a,t,o).then((e=>(s?.(e),((e,t,n,o)=>{let a=n,s=t;if(o){if(r.kg.debugLog(`uploader.queue: REQUEST_PRE_SEND(${e}) event returned updated items/options`,o),o.items){if(o.items.length!==t.length||!(0,r.sQ)(o.items,t,["id","batchId","recycled"]))throw new Error(`REQUEST_PRE_SEND(${e}) event handlers must return same items with same ids`);s=o.items}o.options&&(a=L({},n,o.options))}return{items:s,options:a,cancelled:!1===o}})(a,n,o,e)))),U=(e,t,n,r,o,a)=>{const s=n(t),i=e.getState().batches[s[0].batchId].batchOptions,l=r?.(t,i)||t;return H(e,l,s,i,a,o).then((t=>(t.cancelled||((e,t)=>{if(t.items[0]&&e.getState().batches[t.items[0].batchId]){e.updateState((e=>{t.items.forEach((t=>{B(e.items[t.id])||(e.items[t.id]=t)})),e.batches[t.items[0].batchId].batchOptions=t.options}));const n=e.getState();t.items=t.items.map((e=>n.items[e.id])),t.options=n.batches[t.items[0].batchId].batchOptions}})(e,t),t)))},G=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(o,a)=>U(o,a,t,n,r,e)},x=G(D.BATCH_START,(e=>e.items),null,(function(){let{batch:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{batch:!1};if(e)throw new Error("BATCH_START event handlers cannot update batch data. Only items & options")})),j=[r.FG.ADDED,r.FG.PROCESSING,r.FG.UPLOADING],$=[r.FG.ABORTED,r.FG.CANCELLED,r.FG.FINISHED,r.FG.ERROR],q=(e,t)=>e.batches[t].batch,M=(e,t)=>{const n=e.getState(),r=n.items[t];return n.batches[r.batchId]},Z=(e,t)=>M(e,t).batch,Y=(e,t)=>{const n=((e,t)=>q(e.getState(),t))(e,t);n.items.forEach((t=>{let{id:n}=t;return F(e,n,!0)}))},Q=(e,t)=>{e.updateState((e=>{delete e.batches[t],delete e.itemQueue[t];const n=e.batchQueue.indexOf(t);~n&&e.batchQueue.splice(n,1);const r=e.batchesStartPending.indexOf(t);~r&&e.batchesStartPending.splice(r,1)}))},z=function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.FG.FINISHED,a=arguments.length>4?arguments[4]:void 0;e.updateState((e=>{const n=q(e,t);n.state=o,a&&(n.additionalInfo=a)})),V(e,t,n),V(e,t,D.BATCH_FINALIZE)},K=(e,t)=>{r.kg.debugLog("uploady.uploader.batchHelpers: cancelling batch: ",t),z(e,t,D.BATCH_CANCEL,r.FG.CANCELLED),Y(e,t),Q(e,t)},V=(e,t,n)=>{const r=e.getState(),{batch:o,batchOptions:a}=r.batches[t],s=r.items,i={...(0,_.Wg)(o),items:o.items.map((e=>{let{id:t}=e;return(0,_.Wg)(s[t])}))};e.trigger(n,i,(0,_.Wg)(a))},W=(e,t)=>{const n=q(e.getState(),t);return j.includes(n.state)},J=e=>$.includes(e.state),X={[r.FD.PENDING]:null,[r.FD.ADDED]:D.ITEM_START,[r.FD.FINISHED]:D.ITEM_FINISH,[r.FD.ERROR]:D.ITEM_ERROR,[r.FD.CANCELLED]:D.ITEM_CANCEL,[r.FD.ABORTED]:D.ITEM_ABORT,[r.FD.UPLOADING]:D.ITEM_PROGRESS},ee=e=>!!~P.indexOf(e.state),te=(e,t,n)=>{t.forEach((t=>{const n=e.getState(),{id:o,info:a}=t;if(r.kg.debugLog("uploader.processor.queue: request finished for item - ",{id:o,info:a}),n.items[o]){e.updateState((e=>{const t=e.items[o];t.state=a.state,t.uploadResponse=a.response,t.uploadStatus=a.status,ee(t)&&delete e.aborts[o]}));const t=e.getState().items[o];if(a.state===r.FD.FINISHED&&t.completed<100){const n=t.file?.size||0;e.handleItemProgress(t,100,n,n)}const{batchOptions:n}=M(e,o);X[t.state]&&e.trigger(X[t.state],t,n),ee(t)&&(((e,t)=>{e.updateState((e=>{e.batches[t].finishedCounter+=1}))})(e,t.batchId),e.trigger(D.ITEM_FINALIZE,t,n))}F(e,o)})),(e=>{(0,r.nK)((()=>{const t=e.getState();Object.keys(t.batches).forEach((n=>{const{batch:o,finishedCounter:a}=t.batches[n],{orgItemCount:s}=o,i=J(o);s===a&&(i||100===o.completed||(e.updateState((e=>{const t=q(e,n);t.completed=100,t.loaded=t.items.reduce(((e,t)=>{let{loaded:n}=t;return e+n}),0)})),V(e,n,D.BATCH_PROGRESS)),e.updateState((e=>{e.currentBatch===n&&(e.currentBatch=null)})),r.kg.debugLog(`uploady.uploader.batchHelpers: cleaning up batch: ${o.id}`),i||z(e,n,D.BATCH_FINISH),Y(e,n),Q(e,n))}))}))})(e),n(e)},ne=G(D.REQUEST_PRE_SEND,(e=>e),((e,t)=>({items:e,options:t}))),re=(e,t,n)=>{const{items:o,options:a}=t,s=e.getState().batches[o[0].batchId]?.batch;if(s){let t;try{t=e.sender.send(o,s,a)}catch(i){r.kg.debugLog("uploader.queue: sender failed with unexpected error",i),t={request:Promise.resolve({status:0,state:r.FD.ERROR,response:i.message}),abort:()=>!1,senderType:"exception-handler"}}const{request:l}=t;((e,t,n)=>{e.updateState((e=>{t.forEach((t=>{e.items[t.id].state=r.FD.UPLOADING,e.aborts[t.id]=n.abort}))}))})(e,o,t),l.then((t=>{const r=o.map((e=>({id:e.id,info:t})));te(e,r,n)}))}},oe=e=>{let{allowedItems:t,cancelledResults:n,queue:o,items:a,ids:s,next:i}=e;const l=t.length?ne(o,t):Promise.resolve();let c=n;return l.catch((e=>{r.kg.debugLog("uploader.queue: encountered error while preparing items for request",e),((e,t,n,o)=>{const a=n.map((t=>{let{id:n}=t;return{id:n,info:{status:0,state:r.FD.ERROR,response:e}}}));te(t,a,o)})(e,o,a,i)})).then((e=>{let t;if(e)if(e.cancelled)c=s.map((()=>!0));else{e.items.some((e=>B(e)))?r.kg.debugLog("uploader.queue: send data contains aborted items - not sending"):re(o,{items:e.items,options:e.options},i)}return((e,t,n,o)=>{const a=n.map(((e,n)=>e?t[n].id:null)).filter(Boolean);if(a.length){const t=a.map((e=>({id:e,info:{status:0,state:r.FD.CANCELLED,response:"cancel"}})));te(e,t,o)}return!!a.length})(o,a,c,i)||(t=i(o)),t}))},ae=(e,t,n)=>{const r=e.getState();let o=Object.values(r.items);return o=o.filter((e=>t.includes(e.id)&&!B(e))),Promise.all(o.map((t=>{const{batchOptions:n}=M(e,t.id);return e.runCancellable(D.ITEM_START,t,n)}))).then((r=>{let a=r.map(((t,n)=>t?null:((e,t)=>{const n=t.getState().items[e];return n&&!B(n)?n:void 0})(o[n].id,e))).filter(Boolean);return{allowedItems:a,cancelledResults:r,queue:e,items:o,ids:t,next:n}})).then(oe)},se=(e,t)=>e.getState().activeIds.flat().includes(t),ie=e=>{const t=e.getState(),n=t.itemQueue,[o,a]=(e=>{const t=e.getState(),n=t.itemQueue,o=t.items;let a=null,s=0,i=0,l=t.batchQueue[s];for(;l&&!a;){if(W(e,l))for(a=n[l][i];a&&(se(e,a)||o[a].state!==r.FD.ADDED);)i+=1,a=n[l][i];a||(s+=1,l=t.batchQueue[s],i=0)}return a?[l,i]:null})(e)||[];let s,i=o&&~a?n[o][a]:null;if(i){const{batchOptions:e}=t.batches[o],n=e.maxGroupSize||0;if(e.grouped&&n>1){s=t.itemQueue[o].slice(a,a+n)}else s=[i]}return s},le=(e,t)=>{let n;return((e,t)=>{const n=Z(e,t);return e.getState().batchesStartPending.includes(n.id)})(e,t[0])?n=Promise.resolve(!0):(((e,t)=>{e.updateState((e=>{e.activeIds=e.activeIds.concat(t)}))})(e,t),n=((e,t)=>{const n=Z(e,t);return e.getState().currentBatch!==n.id})(e,t[0])?((e,t)=>{const n=Z(e,t);return e.updateState((e=>{e.batchesStartPending.push(n.id)})),x(e,n).then((r=>{let{cancelled:o}=r,a=!1;return e.updateState((e=>{const t=e.batchesStartPending.indexOf(n.id);e.batchesStartPending.splice(t,1)})),o||(a=!N(e,t),a||e.updateState((e=>{e.currentBatch=n.id}))),!o&&!a}))})(e,t[0]).then((n=>{let o=!n;return o&&(((e,t)=>{if(N(e,t)){const n=M(e,t),o=n?.batch.id;o?K(e,o):r.kg.debugLog(`uploady.uploader.batchHelpers: cancel batch called for batch already removed (item id = ${t})`)}})(e,t[0]),ce(e)),o})).catch((n=>(r.kg.debugLog("uploader.processor: encountered error while preparing batch for request",n),((e,t,n)=>{const o=Z(e,t),a=o.id;r.kg.debugLog("uploady.uploader.batchHelpers: failing batch: ",{batch:o}),z(e,a,D.BATCH_ERROR,r.FG.ERROR,n.message),Y(e,a),Q(e,a)})(e,t[0],n),ce(e),!0))):Promise.resolve(!1)),n},ce=e=>{let t;const n=ie(e);if(n){const o=e.getCurrentActiveCount(),{concurrent:a=!1,maxConcurrent:s=0}=e.getOptions();(!o||a&&o<s)&&(r.kg.debugLog("uploader.processor: Processing next upload - ",{ids:n,currentCount:o}),t=le(e,n).then((t=>{t||(ae(e,n,ce),a&&ce(e))})))}return t},de=ce,ue=e=>(t,n)=>te(e,[{id:t,info:n}],de),he=(e,t,n,o,a)=>{const{state:s,update:i}=(0,_.ZP)({itemQueue:{},batchQueue:[],currentBatch:null,batchesStartPending:[],batches:{},items:{},activeIds:[],aborts:{}}),l=()=>s,c=e=>{i(e)},d=e=>{if(s.items[e.id]&&!e.recycled)throw new Error(`Uploader queue conflict - item ${e.id} already exists`);e.recycled&&((e,t)=>{const{previousBatch:n}=t;if(t.recycled&&n&&e.getState().batches[n]){const{id:r}=Z(e,t.id);r===n&&e.updateState((e=>{const n=q(e,r),o=n.items.findIndex((e=>{let{id:n}=e;return n===t.id}));~o&&n.items.splice(o,1)}))}})(h,e),c((t=>{t.items[e.id]=e}))},u=(e,n,r,o)=>{s.items[e.id]&&(c((t=>{const a=t.items[e.id];a.loaded=r,a.completed=n,a.total=o})),t(D.ITEM_PROGRESS,l().items[e.id]))};o.on(C.ITEM_PROGRESS,u),o.on(C.BATCH_PROGRESS,(e=>{const t=s.batches[e.id]?.batch.items;if(t){const[n,r]=t.reduce(((e,t)=>{let{id:n}=t;const{loaded:r,file:o}=s.items[n],a=o?.size||r||1;return e[0]+=r,e[1]+=a,e}),[0,0]);c((t=>{const o=t.batches[e.id].batch;o.total=r,o.loaded=n,o.completed=n/r})),V(h,e.id,D.BATCH_PROGRESS)}}));const h={uploaderId:a,getOptions:()=>e,getCurrentActiveCount:()=>s.activeIds.length,getState:l,updateState:c,trigger:t,runCancellable:function(e){if(!(0,r.mf)(n))throw new Error("Uploader queue - cancellable is of wrong type");for(var t=arguments.length,o=new Array(t>1?t-1:0),a=1;a<t;a++)o[a-1]=arguments[a];return n(e,...o)},sender:o,handleItemProgress:u,clearAllUploads:()=>{h.updateState((e=>{e.itemQueue={},e.batchQueue=[],e.currentBatch=null,e.batches={},e.items={},e.activeIds=[]}))},clearBatchUploads:e=>{(0,r.nK)((()=>{r.kg.debugLog(`uploader.queue: started scheduled work to clear batch uploads (${e})`),l().batches[e]&&((e,t)=>{e.updateState((e=>{const{items:n}=q(e,t);delete e.batches[t],delete e.itemQueue[t];const r=e.batchQueue.indexOf(t);~r&&e.batchQueue.splice(r,1),e.currentBatch===t&&(e.currentBatch=null),n.forEach((t=>{let{id:n}=t;delete e.items[n];const r=e.activeIds.indexOf(n);~r&&e.activeIds.splice(r,1)}))}))})(h,e)}))}};return(0,r.Ym)()&&r.kg.isDebugOn()&&(window[`__rpldy_${a}_queue_state`]=h),{updateState:c,getState:h.getState,runCancellable:h.runCancellable,uploadBatch:(e,t)=>{t&&c((n=>{n.batches[e.id].batchOptions=t})),de(h)},addBatch:(e,t)=>(c((n=>{n.batches[e.id]={batch:e,batchOptions:t,finishedCounter:0},n.batchQueue.push(e.id),n.itemQueue[e.id]=e.items.map((e=>{let{id:t}=e;return t}))})),e.items.forEach(d),q(s,e.id)),abortItem:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return((e,t)=>{const n=e.getOptions().abortItem;(0,r.kG)(!!n,"Abort Item method not provided yet abortItem was called");const o=e.getState();return n(t,o.items,o.aborts,ue(e))})(h,...t)},abortBatch:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return((e,t)=>{const n=e.getOptions().abortBatch;(0,r.kG)(!!n,"Abort Batch method not provided yet abortItem was called");const o=e.getState(),a=o.batches[t],s=a?.batch;if(s&&!J(s)){z(e,t,D.BATCH_ABORT,r.FG.ABORTED);const{isFast:i}=n(s,a.batchOptions,o.aborts,o.itemQueue,ue(e),e.getOptions());i&&e.clearBatchUploads(s.id)}})(h,...t)},abortAll:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(e=>{const t=e.getOptions().abortAll;(0,r.kG)(!!t,"Abort All method not provided yet abortAll was called"),e.trigger(D.ALL_ABORT);const n=e.getState(),{isFast:o}=t(n.items,n.aborts,n.itemQueue,ue(e),e.getOptions());o&&e.clearAllUploads()})(h,...t)},clearPendingBatches:()=>{(e=>{const t=e.getState().batches;Object.keys(t).filter((e=>t[e].batch.state===r.FG.PENDING)).forEach((t=>{Y(e,t),Q(e,t)}))})(h)},uploadPendingBatches:e=>{((e,t)=>{e.updateState((e=>{Object.keys(e.batches).forEach((n=>{const o=e.batches[n],{batch:a,batchOptions:s}=o;a.state===r.FG.PENDING&&(a.items.forEach((e=>{e.state=r.FD.ADDED})),a.state=r.FG.ADDED,o.batchOptions=(0,r.TS)({},s,t))}))}))})(h,e),de(h)},cancelBatch:e=>K(h,e.id)}};var pe=n(64101);const ge=()=>!0,fe=(0,r.ZV)({autoUpload:!0,clearPendingOnAdd:!1,inputFieldName:"file",concurrent:!1,maxConcurrent:2,grouped:!1,maxGroupSize:5,method:"POST",params:{},fileFilter:ge,forceJsonResponse:!1,withCredentials:!1,destination:{},send:null,sendWithFormData:!0,formDataAllowUndefined:!1,fastAbortThreshold:100}),be=(e,t,n,o)=>{((e,t,n,o,a)=>{e.forEach((e=>{r.kg.debugLog(`uploady.uploader.processor: file: ${e.id} progress event: loaded(${n}) - completed(${t})`),a(C.ITEM_PROGRESS,e,t,n,o)}))})(e,Math.min(n.loaded/n.total*100,100)/e.length,n.loaded/e.length,n.total,o),o(C.BATCH_PROGRESS,t)},me=()=>{const{trigger:e,target:t}=E({send:(t,n,o)=>{const a=o.destination,s=a?.url,i=(0,r.P2)((r=>be(t,n,r,e)),50,!0);return((0,r.mf)(o.send)?o.send:pe.ZP)(t,s,{method:a?.method||o.method||fe.method,paramName:a?.filesParamName||o.inputFieldName||"file",params:{...o.params,...a?.params},forceJsonResponse:o.forceJsonResponse,withCredentials:o.withCredentials,formatGroupParamName:o.formatGroupParamName,headers:a?.headers,sendWithFormData:o.sendWithFormData,formatServerResponse:o.formatServerResponse,formDataAllowUndefined:o.formDataAllowUndefined,isSuccessfulCall:o.isSuccessfulCall},i)}},Object.values(C));return t},Ee=(0,r.Ym)()&&"FileList"in window,Se=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e;return(0,r.yv)()||(t<3&&(0,_.X3)(e)?n=(0,_.Wg)(e):t<3&&(0,_.$N)(e)&&(n=Array.isArray(e)?e.map((e=>Se(e,t+1))):Object.keys(e).reduce(((n,r)=>(n[r]=Se(e[r],t+1),n)),{}))),n};let ye=0;const ve=(e,t,n)=>{ye+=1;const o=`batch-${ye}`,a=(e=>Ee&&e instanceof FileList||"[object FileList]"===e.toString())(e),s=Array.isArray(e)||a?e:[e],i=!n.autoUpload;return((e,t,n,o)=>{const a=o?Array.prototype.map.call(t,(e=>(0,r.$e)(e)?e.file||e.url:e)):[];return Promise.all(Array.prototype.map.call(t,((e,t)=>{const n=(o||ge)(a[t],t,a);return(0,r.tI)(n)?n.then((t=>!!t&&e)):!!n&&e}))).then((t=>t.filter(Boolean).map((t=>(0,r.Yc)(t,e,n)))))})(o,s,i,n.fileFilter).then((e=>({id:o,uploaderId:t,items:e,state:i?r.FG.PENDING:r.FG.ADDED,completed:0,loaded:0,orgItemCount:e.length,additionalInfo:null})))},Re=(e,t,n,o)=>{const a=me(),s=he(n,e,t,a,o);return{abortBatch:e=>{s.abortBatch(e)},abort:e=>{e?s.abortItem(e):s.abortAll()},addNewBatch:(e,t)=>ve(e,o,t).then((e=>{let n;if(e.items.length){const a=s.addBatch(e,t);n=s.runCancellable(D.BATCH_ADD,a,t).then((e=>(e?s.cancelBatch(a):(r.kg.debugLog(`uploady.uploader [${o}]: new items added - auto upload =\n                       ${String(t.autoUpload)}`,a.items),t.autoUpload&&s.uploadBatch(a)),a)))}else r.kg.debugLog(`uploady.uploader: no items to add. batch ${e.id} is empty. check fileFilter if this isn't intended`);return n||Promise.resolve(null)})),clearPendingBatches:()=>{s.clearPendingBatches()},processPendingBatches:e=>{s.uploadPendingBatches(e)}}},Ae=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.reduce(((e,t)=>t(e,...r)||e),e)}},Oe=Object.values(D);let Ie=0;const ke=(e,t,n,r)=>{const o=t.enhancer?(a=t.enhancer,Ae(w(),a)):w();var a;r(!0);const s=o(e,n);return r(!1),s||e},Te=e=>{Ie+=1;const t=`uploader-${Ie}`;let n=!1;const o={};r.kg.debugLog(`uploady.uploader: creating new instance (${t})`,{options:e,counter:Ie});let a=(e=>{return{...fe,...e,destination:e&&e.destination?(t=e.destination,{params:{},...t}):null};var t})(e);const s=()=>{h.clearPendingBatches()};let{trigger:i,target:l}=E({id:t,update:e=>(a=(0,r.TS)({},a,e),l),add:(e,t)=>{const n=(0,r.TS)({},a,t);return n.clearPendingOnAdd&&s(),h.addNewBatch(e,n).then((()=>{r.kg.debugLog("uploady.uploader: finished adding file data to be processed")}))},upload:e=>{h.processPendingBatches(e)},abort:e=>{h.abort(e)},abortBatch:e=>{h.abortBatch(e)},getOptions:()=>(0,r.d9)(a),clearPending:s,registerExtension:(e,t)=>{(0,r.kG)(n,"Uploady - uploader extensions can only be registered by enhancers"),(0,r.kG)(!o[e],"Uploady - uploader extension by this name [%s] already exists",e),r.kg.debugLog(`uploady.uploader: registering extension: ${e.toString()}`,t),o[e]=t},getExtension:e=>o[e]},Oe,{canAddEvents:!1,canRemoveEvents:!1});const c=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=S((()=>n.map(Se)));return i(e,o)},d=(0,r.tq)(c),u=ke(l,a,c,(e=>{n=e})),h=Re(c,d,a,u.id);return(0,r.ZV)(u)},we=Te},26580:(e,t,n)=>{"use strict";n.d(t,{fZ:()=>u.fZ,ZP:()=>h,A9:()=>s.A9,h_:()=>s.h_,UT:()=>s.UT,J0:()=>s.J0,fc:()=>s.fc});var r=n(67294),o=n(73935),a=n(14783),s=n(99626);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}const l=(e,t,n)=>r.createElement("input",i({},e,{name:t.inputFieldName,type:"file",ref:n})),c=(0,r.memo)((0,r.forwardRef)(((e,t)=>{let{container:n,noPortal:r,...i}=e;const c=(0,s.LN)(),d=n&&1===n.nodeType;return(0,a.kG)(d||!(0,a.Ym)(),"Uploady - Container for file input must be a valid dom element"),r?l(i,c,t):((e,t,n,r,a)=>e&&t?o.createPortal(l(n,r,a),e):null)(n,d,i,c,t)}))),d=e=>{const{multiple:t=!0,capture:n,accept:o,webkitdirectory:l,children:d,inputFieldContainer:u,customInput:h,fileInputId:p,noPortal:g=!1,...f}=e,b=h?null:u||((0,a.Ym)()?document.body:null),m=(0,r.useRef)();return r.createElement(s.$V,i({},f,{inputRef:m}),h?null:r.createElement(c,{container:b,multiple:t,capture:n,accept:o,webkitdirectory:l?.toString(),style:{display:"none"},ref:m,id:p,noPortal:g}),d)};var u=n(86945);const h=d},21459:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(54490).vU)({error:{id:"ui.common.error",defaultMessage:"ui.common.error"},urlError:{id:"ui.common.error.url",defaultMessage:"ui.common.error.url"},messageFileUploadError:{id:"ui.shared.messageChunkUploader.error",defaultMessage:"ui.shared.messageChunkUploader.error"},fileUploadErrorGeneric:{id:"ui.common.fileUpload.error",defaultMessage:"ui.common.fileUpload.error"}})},44465:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(97582),o=n(67294),a=n(90948),s=n(5616),i=n(29628),l=n(94184),c=n.n(l);let d;"undefined"!=typeof window&&n.e(63048).then(n.bind(n,63048)).then((e=>{d=e.default}));const u="SCEmojiPicker",h={root:`${u}-root`},p=(0,a.ZP)(s.Z,{name:u,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({})));const g=function(e){const t=(0,i.Z)({props:e,name:u}),{className:n="",emojiStyle:a="native"}=t,s=(0,r._T)(t,["className","emojiStyle"]);return o.createElement(p,{className:c()(h.root,n)},d&&o.createElement(d,Object.assign({emojiStyle:a},s)))}}}]);