"use strict";(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[35216],{16682:(e,t,n)=>{n.d(t,{A:()=>x});var o=n(85486),a=n(59703),s=n(75659),i=n(54533),r=n(96540),c=n(11848),l=n(25669),u=n(28466),d=n(38413),m=n(31609);function g(e){return(0,m.Ay)("MuiImageListItemBar",e)}(0,d.A)("MuiImageListItemBar",["root","positionBottom","positionTop","positionBelow","titleWrap","titleWrapBottom","titleWrapTop","titleWrapBelow","titleWrapActionPosLeft","titleWrapActionPosRight","title","subtitle","actionIcon","actionIconActionPosLeft","actionIconActionPosRight"]);var h=n(74848);const p=["actionIcon","actionPosition","className","subtitle","title","position"],v=(0,c.Ay)("div",{name:"MuiImageListItemBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${(0,u.A)(n.position)}`]]}})((({theme:e,ownerState:t})=>(0,a.A)({position:"absolute",left:0,right:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",fontFamily:e.typography.fontFamily},"bottom"===t.position&&{bottom:0},"top"===t.position&&{top:0},"below"===t.position&&{position:"relative",background:"transparent",alignItems:"normal"}))),A=(0,c.Ay)("div",{name:"MuiImageListItemBar",slot:"TitleWrap",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.titleWrap,t[`titleWrap${(0,u.A)(n.position)}`],n.actionIcon&&t[`titleWrapActionPos${(0,u.A)(n.actionPosition)}`]]}})((({theme:e,ownerState:t})=>(0,a.A)({flexGrow:1,padding:"12px 16px",color:(e.vars||e).palette.common.white,overflow:"hidden"},"below"===t.position&&{padding:"6px 0 12px",color:"inherit"},t.actionIcon&&"left"===t.actionPosition&&{paddingLeft:0},t.actionIcon&&"right"===t.actionPosition&&{paddingRight:0}))),j=(0,c.Ay)("div",{name:"MuiImageListItemBar",slot:"Title",overridesResolver:(e,t)=>t.title})((({theme:e})=>({fontSize:e.typography.pxToRem(16),lineHeight:"24px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}))),f=(0,c.Ay)("div",{name:"MuiImageListItemBar",slot:"Subtitle",overridesResolver:(e,t)=>t.subtitle})((({theme:e})=>({fontSize:e.typography.pxToRem(12),lineHeight:1,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}))),b=(0,c.Ay)("div",{name:"MuiImageListItemBar",slot:"ActionIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.actionIcon,t[`actionIconActionPos${(0,u.A)(n.actionPosition)}`]]}})((({ownerState:e})=>(0,a.A)({},"left"===e.actionPosition&&{order:-1}))),x=r.forwardRef((function(e,t){const n=(0,l.b)({props:e,name:"MuiImageListItemBar"}),{actionIcon:r,actionPosition:c="right",className:d,subtitle:m,title:x,position:w="bottom"}=n,y=(0,o.A)(n,p),C=(0,a.A)({},n,{position:w,actionPosition:c}),I=(e=>{const{classes:t,position:n,actionIcon:o,actionPosition:a}=e,i={root:["root",`position${(0,u.A)(n)}`],titleWrap:["titleWrap",`titleWrap${(0,u.A)(n)}`,o&&`titleWrapActionPos${(0,u.A)(a)}`],title:["title"],subtitle:["subtitle"],actionIcon:["actionIcon",`actionIconActionPos${(0,u.A)(a)}`]};return(0,s.A)(i,g,t)})(C);return(0,h.jsxs)(v,(0,a.A)({ownerState:C,className:(0,i.A)(I.root,d),ref:t},y,{children:[(0,h.jsxs)(A,{ownerState:C,className:I.titleWrap,children:[(0,h.jsx)(j,{className:I.title,children:x}),m?(0,h.jsx)(f,{className:I.subtitle,children:m}):null]}),r?(0,h.jsx)(b,{ownerState:C,className:I.actionIcon,children:r}):null]}))}))},18407:(e,t,n)=>{n.d(t,{W2:()=>g});function o(e,t){this.scrollLeft=e,this.scrollTop=t}const a=(e,t,n="cannot convert to dictionary.")=>`Failed to execute '${e}' on '${t}': ${n}`,s=(e,t,n)=>{var o;const a=`__SEAMLESS.BACKUP$${t}`;return e[a]||!e[t]||(null===(o=e[t])||void 0===o?void 0:o.__isPolyfill)||(e[a]=e[t]),e[a]||n},i=e=>e.ownerDocument.scrollingElement||e.ownerDocument.documentElement;const r=e=>.5*(1-Math.cos(Math.PI*e));function c(){var e;let t;return t=(null===(e=window.performance)||void 0===e?void 0:e.now)?()=>window.performance.now():()=>window.Date.now(),c=t,t()}const l=e=>{const t=(c()-e.timeStamp)/(e.duration||500);if(t>1)return e.method(e.targetX,e.targetY),void e.callback();const n=(e.timingFunc||r)(t),o=e.startX+(e.targetX-e.startX)*n,a=e.startY+(e.targetY-e.startY)*n;e.method(o,a),e.rafId=window.requestAnimationFrame((()=>{l(e)}))},u=e=>isFinite(e)?Number(e):0,d=(e,t,n)=>{var a,i;if(!(e=>{var t;return null!==(t=e.isConnected)&&void 0!==t?t:!(e.ownerDocument&&1&e.ownerDocument.compareDocumentPosition(e))})(e))return;const r=e.scrollLeft,d=e.scrollTop,m=u(null!==(a=t.left)&&void 0!==a?a:r),g=u(null!==(i=t.top)&&void 0!==i?i:d);if(m===r&&g===d)return;const h=s(HTMLElement.prototype,"scroll",o),p=s(Object.getPrototypeOf(e),"scroll",h).bind(e);if("smooth"!==t.behavior)return void p(m,g);const v=()=>{window.removeEventListener("wheel",j),window.removeEventListener("touchmove",j)},A=Object.assign(Object.assign({},n),{timeStamp:c(),startX:r,startY:d,targetX:m,targetY:g,rafId:0,method:p,callback:()=>{v();const t=9===e.nodeType;e.dispatchEvent(function(e){if("function"==typeof Event)return new Event("scrollend",{bubbles:e,cancelable:!1});const t=document.createEvent("Event");return t.initEvent("scrollend",e,!1),t}(t))}}),j=()=>{window.cancelAnimationFrame(A.rafId),v()};window.addEventListener("wheel",j,{passive:!0,once:!0}),window.addEventListener("touchmove",j,{passive:!0,once:!0}),l(A)},m=e=>(t,n,o)=>{const[s,r]=(c=t).window===c?[i(t.document.documentElement),"Window"]:[t,"Element"];var c;const l=null!=n?n:{};if(!(e=>{const t=typeof e;return null!==e&&("object"===t||"function"===t)})(l))throw new TypeError(a(e,r));if(void 0!==(p=l.behavior)&&"auto"!==p&&"instant"!==p&&"smooth"!==p)throw new TypeError((m=e,g=r,h=l.behavior,a(m,g,`The provided value '${h}' is not a valid enum value of type ScrollBehavior.`)));var m,g,h,p;"scrollBy"===e&&(l.left=u(l.left)+s.scrollLeft,l.top=u(l.top)+s.scrollTop),d(s,l,o)},g=m("scroll")},22351:(e,t,n)=>{n.d(t,{H:()=>o});const o="SCUserProfileHeader"},32623:(e,t,n)=>{n.d(t,{A:()=>v});var o=n(74848),a=n(11848),s=n(71194),i=n(44675),r=n(73785),c=n(47859),l=n(75933),u=n(42942),d=n(4671),m=n(40059),g=n(22351);const h={root:`${g.H}-skeleton-root`,cover:`${g.H}-cover`,avatar:`${g.H}-avatar`,actions:`${g.H}-actions`,section:`${g.H}-section`,username:`${g.H}-username`},p=(0,a.Ay)(s.A,{name:g.H,slot:"SkeletonRoot"})((()=>({})));const v=function(){const e=(0,i.A)();return(0,o.jsxs)(p,Object.assign({className:h.root},{children:[(0,o.jsx)(r.A,{className:h.cover,animation:"wave",variant:"rectangular"}),(0,o.jsx)(s.A,Object.assign({className:h.avatar},{children:(0,o.jsx)(r.A,{animation:"wave",variant:"circular",width:e.selfcommunity.user.avatar.sizeXLarge,height:e.selfcommunity.user.avatar.sizeXLarge})})),(0,o.jsxs)(s.A,Object.assign({className:h.section},{children:[(0,o.jsx)(c.A,Object.assign({variant:"h5",className:h.username},{children:(0,o.jsx)(r.A,{animation:"wave",sx:{height:30,width:100,margin:"0 auto"}})})),(0,o.jsxs)(l.A,Object.assign({direction:"row",className:h.actions},{children:[(0,o.jsx)(u.A,Object.assign({variant:"contained",disabled:!0},{children:(0,o.jsx)(r.A,{animation:"wave",sx:{height:20,width:60}})})),(0,o.jsx)(d.A,Object.assign({disabled:!0},{children:(0,o.jsx)(m.A,{children:"more_vert"})}))]}))]}))]}))}},32910:(e,t,n)=>{n.d(t,{A:()=>ee});var o=n(31635),a=n(74848),s=n(96540),i=n(11848),r=n(42942),c=n(40059),l=n(71194),u=n(80766),d=n(3246),m=n(47859),g=n(85486),h=n(59703),p=n(75659),v=n(54533),A=n(25669),j=n(38413),f=n(31609);function b(e){return(0,f.Ay)("MuiImageList",e)}(0,j.A)("MuiImageList",["root","masonry","quilted","standard","woven"]);const x=s.createContext({}),w=["children","className","cols","component","rowHeight","gap","style","variant"],y=(0,i.Ay)("ul",{name:"MuiImageList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant]]}})((({ownerState:e})=>(0,h.A)({display:"grid",overflowY:"auto",listStyle:"none",padding:0,WebkitOverflowScrolling:"touch"},"masonry"===e.variant&&{display:"block"}))),C=s.forwardRef((function(e,t){const n=(0,A.b)({props:e,name:"MuiImageList"}),{children:o,className:i,cols:r=2,component:c="ul",rowHeight:l="auto",gap:u=4,style:d,variant:m="standard"}=n,j=(0,g.A)(n,w),f=s.useMemo((()=>({rowHeight:l,gap:u,variant:m})),[l,u,m]);s.useEffect((()=>{0}),[]);const C="masonry"===m?(0,h.A)({columnCount:r,columnGap:u},d):(0,h.A)({gridTemplateColumns:`repeat(${r}, 1fr)`,gap:u},d),I=(0,h.A)({},n,{component:c,gap:u,rowHeight:l,variant:m}),O=(e=>{const{classes:t,variant:n}=e,o={root:["root",n]};return(0,p.A)(o,b,t)})(I);return(0,a.jsx)(y,(0,h.A)({as:c,className:(0,v.A)(O.root,O[m],i),ref:t,style:C,ownerState:I},j,{children:(0,a.jsx)(x.Provider,{value:f,children:o})}))})),I=C;n(20002);var O=n(37094);function S(e){return(0,f.Ay)("MuiImageListItem",e)}const P=(0,j.A)("MuiImageListItem",["root","img","standard","woven","masonry","quilted"]),$=["children","className","cols","component","rows","style"],N=(0,i.Ay)("li",{name:"MuiImageListItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${P.img}`]:t.img},t.root,t[n.variant]]}})((({ownerState:e})=>(0,h.A)({display:"block",position:"relative"},"standard"===e.variant&&{display:"flex",flexDirection:"column"},"woven"===e.variant&&{height:"100%",alignSelf:"center","&:nth-of-type(even)":{height:"70%"}},{[`& .${P.img}`]:(0,h.A)({objectFit:"cover",width:"100%",height:"100%",display:"block"},"standard"===e.variant&&{height:"auto",flexGrow:1})}))),M=s.forwardRef((function(e,t){const n=(0,A.b)({props:e,name:"MuiImageListItem"}),{children:o,className:i,cols:r=1,component:c="li",rows:l=1,style:u}=n,d=(0,g.A)(n,$),{rowHeight:m="auto",gap:j,variant:f}=s.useContext(x);let b="auto";"woven"===f?b=void 0:"auto"!==m&&(b=m*l+j*(l-1));const w=(0,h.A)({},n,{cols:r,component:c,gap:j,rowHeight:m,rows:l,variant:f}),y=(e=>{const{classes:t,variant:n}=e,o={root:["root",n],img:["img"]};return(0,p.A)(o,S,t)})(w);return(0,a.jsx)(N,(0,h.A)({as:c,className:(0,v.A)(y.root,y[f],i),ref:t,style:(0,h.A)({height:b,gridColumnEnd:"masonry"!==f?`span ${r}`:void 0,gridRowEnd:"masonry"!==f?`span ${l}`:void 0,marginBottom:"masonry"===f?j:void 0,breakInside:"masonry"===f?"avoid":void 0},u),ownerState:w},d,{children:s.Children.map(o,(e=>s.isValidElement(e)?"img"===e.type||(0,O.A)(e,["Image"])?s.cloneElement(e,{className:(0,v.A)(y.img,e.props.className)}):e:null))}))})),L=M;var H=n(16682),k=n(4671),E=n(72081),R=n(29368),T=n(2877),_=n(45284),B=n(58065),z=n(29251),W=n(21022),F=n(19546),U=n.n(F),D=n(18407),X=n(15906),Y=n(94520);const V="SCChangePictureButton",G={dialogRoot:`${V}-dialog-root`,upload:`${V}-upload`,imagesList:`${V}-images-list`,imageItem:`${V}-image-item`,primary:`${V}-primary`},q=(0,i.Ay)(z.A,{name:V,slot:"DialogRoot"})((()=>({})));function K(e){const{open:t,onChange:n,onClose:i,className:g}=e,h=(0,o.__rest)(e,["open","onChange","onClose","className"]),p=(0,s.useContext)(T.T6),v=(0,s.useContext)(_.GD),[A,j]=(0,s.useState)(p.user.avatar),[f,b]=(0,s.useState)(!1),[x,w]=(0,s.useState)(!1),[y,C]=(0,s.useState)(null),[O,S]=(0,s.useState)([]),[P,$]=(0,s.useState)(null);let N=(0,s.useRef)(null);const[M,z]=(0,s.useState)(!1),[F,V]=(0,s.useState)(!1),[K,J]=(0,s.useState)(!1);const Q=(e=R.A.GetAvatars.url({}))=>(0,o.__awaiter)(this,void 0,void 0,(function*(){const t=yield E.A.getUserAvatars({url:e});return t.next?t.results.concat(yield Q(t.next)):t.results}));function Z(e){e.id!==y&&E.A.setUserPrimaryAvatar(e.id,{headers:{Authorization:`Bearer ${v.settings.session.authToken.accessToken}`}}).then((()=>{p.updateUser({avatar:e.avatar}),C(e.id),n&&n(e)})).catch((e=>{Y.V.error(X.d,e)}))}return(0,s.useEffect)((()=>{Q().then((e=>{const t=function(e){return e.find((e=>!0===e.primary))}(e);e&&e.length&&(S(e),C(t.id),j(t.avatar))})).catch((e=>{Y.V.error(X.d,e)}))}),[]),(0,a.jsxs)(q,Object.assign({className:U()(G.dialogRoot,g),title:(0,a.jsx)(B.A,{defaultMessage:"ui.changePicture.title",id:"ui.changePicture.title"}),onClose:i,open:t},h,{children:[(0,a.jsxs)(l.A,Object.assign({className:G.upload},{children:[x?(0,a.jsx)(u.A,Object.assign({color:"error",onClose:()=>w(!1)},{children:(0,a.jsx)(B.A,{id:"ui.changePicture.button.upload.alert",defaultMessage:"ui.changePicture.button.upload.alert"})})):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"file",onChange:function(e){var t;e&&(null===(t=e.target.files[0])||void 0===t?void 0:t.size)<=3145728?(N=e.target.files[0],j(URL.createObjectURL(N)),function(){J(!0);const e=new FormData;e.append("avatar",N),E.A.addUserAvatar(e,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{S((t=>[...t,e])),Z(e),J(!1),setTimeout((()=>{const e=document.getElementById("avatarsList");e&&(0,D.W2)(e,{top:e.scrollHeight,behavior:"smooth"})}),200),b(!1)})).catch((e=>{b(!0),J(!1),Y.V.error(X.d,e)}))}()):w(!0)},ref:N,hidden:!0,accept:".gif,.png,.jpg,.jpeg"}),(0,a.jsx)(r.A,Object.assign({disabled:K||F,variant:"outlined",onClick:()=>N.current.click(),color:f?"error":"primary",startIcon:K?null:(0,a.jsx)(c.A,{children:"folder_open"})},{children:K?(0,a.jsx)(d.A,{size:15}):(0,a.jsx)(a.Fragment,{children:f?(0,a.jsx)(B.A,{id:"ui.changePicture.button.upload.error",defaultMessage:"ui.changePicture.button.upload.error"}):(0,a.jsx)(B.A,{id:"ui.changePicture.button.upload",defaultMessage:"ui.changePicture.button.upload"})})}))]}),(0,a.jsx)(m.A,Object.assign({component:"span",fontSize:"small",color:"text.secondary",gutterBottom:!0},{children:(0,a.jsx)(B.A,{id:"ui.changePicture.info",defaultMessage:"ui.changePicture.info",values:{li:e=>(0,a.jsx)("li",{children:e}),ul:e=>(0,a.jsx)("ul",{children:e})}})}))]})),(0,a.jsx)(I,Object.assign({cols:3,rowHeight:"auto",id:"avatarsList",classes:{root:G.imagesList}},{children:O.map((e=>(0,a.jsx)(l.A,Object.assign({className:G.imageItem},{children:(0,a.jsxs)(L,Object.assign({className:y===e.id?G.primary:"",onClick:()=>Z(e)},{children:[(0,a.jsx)("img",{src:e.avatar,loading:"lazy",alt:"img"}),(0,a.jsx)(H.A,{position:"top",actionIcon:(0,a.jsx)(k.A,Object.assign({onClick:()=>{return t=e.id,z(!0),void $(t);var t},size:"small"},{children:(0,a.jsx)(c.A,{children:"delete"})}))})]}),e.id)}),e.id)))})),M&&(0,a.jsx)(W.A,{open:M,title:(0,a.jsx)(B.A,{id:"ui.changePicture.dialog.msg",defaultMessage:"ui.changePicture.dialog.msg"}),btnConfirm:(0,a.jsx)(B.A,{id:"ui.changePicture.dialog.confirm",defaultMessage:"ui.changePicture.dialog.confirm"}),onConfirm:function(){V(!0),E.A.removeUserAvatar(P,{headers:{Authorization:`Bearer ${v.settings.session.authToken.accessToken}`}}).then((()=>{const e=O.filter((e=>e.id!==P));S(e),V(!1),z(!1),y===P&&(e.length>0?Z(e[e.length-1]):n&&n(null))})).catch((e=>{z(!1),Y.V.error(X.d,e)}))},isUpdating:F,onClose:()=>z(!1)})]}))}var J=n(79197);const Q={root:`${V}-root`,dialog:`${V}-dialog`},Z=(0,i.Ay)(r.A,{name:V,slot:"Root"})((()=>({})));const ee=function(e){const t=(0,J.A)({props:e,name:V}),{iconButton:n,onChange:i,autoHide:r,className:l}=t,u=(0,o.__rest)(t,["iconButton","onChange","autoHide","className"]),[d,m]=(0,s.useState)(!1);return(0,s.useContext)(T.T6).user?r?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z,Object.assign({className:U()(Q.root,l),size:"small",variant:"contained",onClick:()=>m(!0)},u,{children:n?(0,a.jsx)(c.A,{children:"photo_camera"}):(0,a.jsx)(B.A,{id:"ui.changePicture.button.change",defaultMessage:"ui.changePicture.button.change"})})),d&&(0,a.jsx)(K,{className:Q.dialog,open:d,onChange:e=>i&&i(e),onClose:()=>m(!1)})]}):null}},35216:(e,t,n)=>{n.d(t,{A:()=>O});var o=n(31635),a=n(74848),s=n(96540),i=n(11848),r=n(71194),c=n(57416),l=n(47859),u=n(94443),d=n(32910),m=n(75753),g=n(45284),h=n(2877),p=n(47265),v=n(3338),A=n(3341),j=n(32623),f=n(19546),b=n.n(f),x=n(79197),w=n(22351),y=n(89333);const C={root:`${w.H}-root`,cover:`${w.H}-cover`,avatar:`${w.H}-avatar`,info:`${w.H}-info`,infOpsSection:`${w.H}-infops-section`,username:`${w.H}-username`,realname:`${w.H}-realname`,bio:`${w.H}-bio`,website:`${w.H}-website`,changePicture:`${w.H}-change-picture`,changeCover:`${w.H}-change-cover`},I=(0,i.Ay)(r.A,{name:w.H,slot:"Root"})((()=>({})));const O=function(e){const t=(0,x.A)({props:e,name:w.H}),{id:n=null,className:i=null,userId:f=null,user:O=null,ChangePictureProps:S={},ChangeCoverProps:P={},actions:$}=t,N=(0,o.__rest)(t,["id","className","userId","user","ChangePictureProps","ChangeCoverProps","actions"]),M=(0,m.Sw)(),L=(0,g.J_)(),H=(0,h.X1)(),{scUser:k,setSCUser:E}=(0,p.A)({id:f,user:O}),R=(0,s.useMemo)((()=>H.user&&(null==k?void 0:k.id)===H.user.id),[H.user,k]);if(!k)return(0,a.jsx)(j.A,{});const T=Object.assign({},k.cover?{background:`url('${k.cover}') center / cover`}:{background:`url('${M.preferences[v.bv].value}') center / cover`}),_=R&&H.user.real_name||k.real_name,B=k&&k.community_badge;return(0,a.jsxs)(I,Object.assign({id:n,className:b()(C.root,i)},N,{children:[(0,a.jsxs)(c.A,Object.assign({style:T,classes:{root:C.cover}},{children:[(0,a.jsx)(r.A,Object.assign({className:C.avatar},{children:(0,a.jsx)(y.A,Object.assign({hide:!B},{children:(0,a.jsx)("img",{src:k.avatar?k.avatar:""})}))})),R&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.A,Object.assign({iconButton:!0,onChange:function(e){k.id===H.user.id&&e?E(Object.assign({},k,{avatar:e.avatar})):E(Object.assign({},k,{avatar:`${L.settings.portal}/api/v2/avatar/${k.id}`}))},className:C.changePicture},S)),(0,a.jsx)("div",Object.assign({className:C.changeCover},{children:(0,a.jsx)(u.A,Object.assign({onChange:function(e){k.id===H.user.id&&E(Object.assign({},k,{cover:e}))}},P))}))]})]})),(0,a.jsxs)(r.A,Object.assign({className:C.infOpsSection},{children:[(0,a.jsxs)(r.A,Object.assign({className:C.info},{children:[(0,a.jsxs)(l.A,Object.assign({variant:"h5",className:C.username},{children:["@",R?H.user.username:k.username]})),_&&(0,a.jsx)(l.A,Object.assign({variant:"subtitle1",className:C.realname},{children:_})),k.bio&&(0,a.jsx)(l.A,Object.assign({variant:"subtitle2",className:C.bio},{children:k.bio})),k.website&&(0,a.jsx)(A.A,Object.assign({className:C.website,target:"_blank",to:k.website},{children:(0,a.jsx)(l.A,Object.assign({variant:"body2"},{children:k.website}))}))]})),$&&$]}))]}))}},94443:(e,t,n)=>{n.d(t,{A:()=>T});var o=n(31635),a=n(74848),s=n(96540),i=n(11848),r=n(71194),c=n(44675),l=n(90508),u=n(25911),d=n(3246),m=n(57873),g=n(40059),h=n(42942),p=n(50236),v=n(51372),A=n(67011),j=n(47859),f=n(71543),b=n(80766),x=n(13550),w=n(29368),y=n(2877),C=n(27885),I=n(6442),O=n(58065),S=n(21022),P=n(19546),$=n.n(P),N=n(79197),M=n(15906),L=n(94520);const H="SCChangeCoverButton",k={root:`${H}-root`,helpPopover:`${H}-help-popover`,addMenuItem:`${H}-add-menuItem`,delMenuItem:`${H}-del-menuItem`},E=(0,i.Ay)(r.A,{name:H,slot:"Root"})((()=>({}))),R=(0,C.YK)({imageMaxSize:{id:"ui.changeCover.button.change.alertMaxSize",defaultMessage:"ui.changeCover.button.change.alertMaxSize"},errorLoadImage:{id:"ui.changeCover.button.change.alertErrorImage",defaultMessage:"ui.changeCover.button.change.alertErrorImage"}});const T=function(e){const t=(0,N.A)({props:e,name:H}),{onChange:n,autoHide:i,className:C}=t,P=(0,o.__rest)(t,["onChange","autoHide","className"]),T=(0,s.useContext)(y.T6),_=(0,c.A)(),B=(0,l.A)(_.breakpoints.down("md"));let z=(0,s.useRef)(null);const[W,F]=s.useState(null),U=Boolean(W),[D,X]=s.useState(null),[Y,V]=(0,s.useState)(!1),[G,q]=(0,s.useState)(!1),[K,J]=(0,s.useState)(!1),[Q,Z]=(0,s.useState)(null),ee=(0,I.A)(),te=e=>{F(e.currentTarget)},ne=()=>{F(null)},oe=T.user&&null!==T.user.cover,ae=Boolean(D);if(!T.user)return null;const se=e=>{var t;(null===(t=e.target.files[0])||void 0===t?void 0:t.size)<=5242880?(z=e.target.files[0],ie()):(Z(ee.formatMessage(R.imageMaxSize)),F(null))};function ie(e=!1){J(!0);const t=new FormData;e?t.append("cover",""):t.append("cover",z),x.A.request({url:w.A.UserPatch.url({id:T.user.id}),method:w.A.UserPatch.method,headers:{"Content-Type":"multipart/form-data"},data:t}).then((t=>{T.updateUser({cover:t.data.cover}),n&&n(t.data.cover),F(null),J(!1),e&&(q(!1),V(!1))})).catch((e=>{L.V.error(M.d,e),J(!1),Z(ee.formatMessage(R.errorLoadImage))}))}function re(){return(0,a.jsx)(r.A,{children:K?(0,a.jsx)(u.A,Object.assign({sx:{justifyContent:"center"}},{children:(0,a.jsx)(d.A,{size:15})})):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"file",onChange:se,ref:z,hidden:!0,accept:".gif,.png,.jpg,.jpeg"}),(0,a.jsxs)(u.A,Object.assign({disabled:K,onClick:()=>z.current.click(),className:k.addMenuItem},{children:[(0,a.jsx)(m.A,{children:(0,a.jsx)(g.A,{children:"add_circle_outline"})}),(0,a.jsx)(O.A,{id:"ui.changeCover.button.upload",defaultMessage:"ui.changeCover.button.upload"})]})),oe&&(0,a.jsxs)(u.A,Object.assign({className:k.delMenuItem,onClick:()=>V(!0)},{children:[(0,a.jsx)(m.A,{children:(0,a.jsx)(g.A,{children:"delete"})}),(0,a.jsx)(O.A,{id:"ui.changeCover.button.delete",defaultMessage:"ui.changeCover.button.delete"})]}))]})})}const ce=(0,a.jsxs)(s.Fragment,{children:[(0,a.jsx)(h.A,Object.assign({size:"small",variant:"contained",disabled:K,onClick:te},P,{children:(0,a.jsx)(g.A,{children:"photo_camera"})})),U&&(0,a.jsx)(a.Fragment,{children:B?(0,a.jsx)(p.A,Object.assign({open:!0,onClose:ne,onOpen:te,anchor:"bottom",disableSwipeToOpen:!0},{children:re()})):(0,a.jsx)(v.A,Object.assign({anchorEl:W,open:!0,onClose:ne},{children:re()}))}),!B&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,Object.assign({className:k.helpPopover,variant:"contained",onClick:e=>{X(e.currentTarget)}},{children:(0,a.jsx)(g.A,{children:"help_outline"})})),ae&&(0,a.jsx)(A.Ay,Object.assign({open:ae,anchorEl:D,onClose:()=>{X(null)},anchorOrigin:{vertical:"bottom",horizontal:"right"}},{children:(0,a.jsxs)(r.A,Object.assign({sx:{p:"10px"}},{children:[(0,a.jsx)(j.A,Object.assign({component:"h3"},{children:(0,a.jsx)(O.A,{id:"ui.changeCover.button.uploadA",defaultMessage:"ui.changeCover.button.uploadA"})})),(0,a.jsx)(f.A,{}),(0,a.jsx)(j.A,Object.assign({component:"span"},{children:(0,a.jsx)(O.A,{id:"ui.changeCover.info",defaultMessage:"ui.changeCover.info",values:{li:e=>(0,a.jsx)("li",{children:e}),ul:e=>(0,a.jsx)("ul",{children:e})}})}))]}))}))]}),Y&&(0,a.jsx)(S.A,{open:Y,title:(0,a.jsx)(O.A,{id:"ui.changeCover.dialog.msg",defaultMessage:"ui.changeCover.dialog.msg"}),onConfirm:function(){q(!0),ie(!0)},isUpdating:G,onClose:()=>{V(!1),F(null)}})]});return Q?(0,a.jsx)(b.A,Object.assign({color:"error",onClose:()=>Z(null)},{children:Q})):i?null:(0,a.jsx)(E,Object.assign({},P,{className:$()(k.root,C)},{children:ce}))}}}]);