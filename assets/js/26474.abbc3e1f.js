/*! For license information please see 26474.abbc3e1f.js.LICENSE.txt */
(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[26474],{51107:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var a=n(80102),o=n(83117),r=n(67294),l=(n(76607),n(63961)),i=n(94780),s=n(90948),c=n(71657),u=n(54801),d=n(87952),m=n(1588),p=n(34867);function f(e){return(0,p.Z)("MuiAvatarGroup",e)}const h=(0,m.Z)("MuiAvatarGroup",["root","avatar"]);var g=n(85893);const b=["children","className","component","componentsProps","max","renderSurplus","slotProps","spacing","total","variant"],v={small:-16,medium:null},E=(0,s.ZP)("div",{name:"MuiAvatarGroup",slot:"Root",overridesResolver:(e,t)=>(0,o.Z)({[`& .${h.avatar}`]:t.avatar},t.root)})((({theme:e})=>({[`& .${u.Z.root}`]:{border:`2px solid ${(e.vars||e).palette.background.default}`,boxSizing:"content-box",marginLeft:-8,"&:last-child":{marginLeft:0}},display:"flex",flexDirection:"row-reverse"}))),y=(0,s.ZP)(d.Z,{name:"MuiAvatarGroup",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})((({theme:e})=>({border:`2px solid ${(e.vars||e).palette.background.default}`,boxSizing:"content-box",marginLeft:-8,"&:last-child":{marginLeft:0}}))),O=r.forwardRef((function(e,t){var n;const s=(0,c.Z)({props:e,name:"MuiAvatarGroup"}),{children:u,className:d,component:m="div",componentsProps:p={},max:h=5,renderSurplus:O,slotProps:Z={},spacing:C="medium",total:j,variant:w="circular"}=s,S=(0,a.Z)(s,b);let N=h<2?2:h;const _=(0,o.Z)({},s,{max:h,spacing:C,component:m,variant:w}),k=(e=>{const{classes:t}=e;return(0,i.Z)({root:["root"],avatar:["avatar"]},f,t)})(_),x=r.Children.toArray(u).filter((e=>r.isValidElement(e))),T=j||x.length;T===N&&(N+=1),N=Math.min(T+1,N);const M=Math.min(x.length,N-1),P=Math.max(T-N,T-M,0),A=O?O(P):`+${P}`,D=C&&void 0!==v[C]?v[C]:-C,I=null!=(n=Z.additionalAvatar)?n:p.additionalAvatar;return(0,g.jsxs)(E,(0,o.Z)({as:m,ownerState:_,className:(0,l.Z)(k.root,d),ref:t},S,{children:[P?(0,g.jsx)(y,(0,o.Z)({ownerState:_,variant:w},I,{className:(0,l.Z)(k.avatar,null==I?void 0:I.className),style:(0,o.Z)({marginLeft:D},null==I?void 0:I.style),children:A})):null,x.slice(0,M).reverse().map(((e,t)=>r.cloneElement(e,{className:(0,l.Z)(e.props.className,k.avatar),style:(0,o.Z)({marginLeft:t===M-1?void 0:D},e.props.style),variant:e.props.variant||w})))]}))}))},62023:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var a=n(80102),o=n(83117),r=n(67294),l=n(63961),i=n(94780),s=n(90948),c=n(71657),u=n(1588),d=n(34867);function m(e){return(0,d.Z)("MuiCardActions",e)}(0,u.Z)("MuiCardActions",["root","spacing"]);var p=n(85893);const f=["disableSpacing","className"],h=(0,s.ZP)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})((({ownerState:e})=>(0,o.Z)({display:"flex",alignItems:"center",padding:8},!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}}))),g=r.forwardRef((function(e,t){const n=(0,c.Z)({props:e,name:"MuiCardActions"}),{disableSpacing:r=!1,className:s}=n,u=(0,a.Z)(n,f),d=(0,o.Z)({},n,{disableSpacing:r}),g=(e=>{const{classes:t,disableSpacing:n}=e,a={root:["root",!n&&"spacing"]};return(0,i.Z)(a,m,t)})(d);return(0,p.jsx)(h,(0,o.Z)({className:(0,l.Z)(g.root,s),ownerState:d,ref:t},u))}))},81458:(e,t,n)=>{"use strict";n.d(t,{Z:()=>A});var a=n(80102),o=n(83117),r=n(67294),l=n(63961),i=n(94780),s=n(70917),c=n(41796),u=n(98216),d=n(2734),m=n(90948),p=n(71657),f=n(1588),h=n(34867);function g(e){return(0,h.Z)("MuiLinearProgress",e)}(0,f.Z)("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);var b=n(85893);const v=["className","color","value","valueBuffer","variant"];let E,y,O,Z,C,j,w=e=>e;const S=(0,s.F4)(E||(E=w`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),N=(0,s.F4)(y||(y=w`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),_=(0,s.F4)(O||(O=w`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),k=(e,t)=>"inherit"===t?"currentColor":e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:"light"===e.palette.mode?(0,c.$n)(e.palette[t].main,.62):(0,c._j)(e.palette[t].main,.5),x=(0,m.ZP)("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${(0,u.Z)(n.color)}`],t[n.variant]]}})((({ownerState:e,theme:t})=>(0,o.Z)({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:k(t,e.color)},"inherit"===e.color&&"buffer"!==e.variant&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},"buffer"===e.variant&&{backgroundColor:"transparent"},"query"===e.variant&&{transform:"rotate(180deg)"}))),T=(0,m.ZP)("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.dashed,t[`dashedColor${(0,u.Z)(n.color)}`]]}})((({ownerState:e,theme:t})=>{const n=k(t,e.color);return(0,o.Z)({position:"absolute",marginTop:0,height:"100%",width:"100%"},"inherit"===e.color&&{opacity:.3},{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})}),(0,s.iv)(Z||(Z=w`
    animation: ${0} 3s infinite linear;
  `),_)),M=(0,m.ZP)("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${(0,u.Z)(n.color)}`],("indeterminate"===n.variant||"query"===n.variant)&&t.bar1Indeterminate,"determinate"===n.variant&&t.bar1Determinate,"buffer"===n.variant&&t.bar1Buffer]}})((({ownerState:e,theme:t})=>(0,o.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:"inherit"===e.color?"currentColor":(t.vars||t).palette[e.color].main},"determinate"===e.variant&&{transition:"transform .4s linear"},"buffer"===e.variant&&{zIndex:1,transition:"transform .4s linear"})),(({ownerState:e})=>("indeterminate"===e.variant||"query"===e.variant)&&(0,s.iv)(C||(C=w`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),S))),P=(0,m.ZP)("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${(0,u.Z)(n.color)}`],("indeterminate"===n.variant||"query"===n.variant)&&t.bar2Indeterminate,"buffer"===n.variant&&t.bar2Buffer]}})((({ownerState:e,theme:t})=>(0,o.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},"buffer"!==e.variant&&{backgroundColor:"inherit"===e.color?"currentColor":(t.vars||t).palette[e.color].main},"inherit"===e.color&&{opacity:.3},"buffer"===e.variant&&{backgroundColor:k(t,e.color),transition:"transform .4s linear"})),(({ownerState:e})=>("indeterminate"===e.variant||"query"===e.variant)&&(0,s.iv)(j||(j=w`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),N))),A=r.forwardRef((function(e,t){const n=(0,p.Z)({props:e,name:"MuiLinearProgress"}),{className:r,color:s="primary",value:c,valueBuffer:m,variant:f="indeterminate"}=n,h=(0,a.Z)(n,v),E=(0,o.Z)({},n,{color:s,variant:f}),y=(e=>{const{classes:t,variant:n,color:a}=e,o={root:["root",`color${(0,u.Z)(a)}`,n],dashed:["dashed",`dashedColor${(0,u.Z)(a)}`],bar1:["bar",`barColor${(0,u.Z)(a)}`,("indeterminate"===n||"query"===n)&&"bar1Indeterminate","determinate"===n&&"bar1Determinate","buffer"===n&&"bar1Buffer"],bar2:["bar","buffer"!==n&&`barColor${(0,u.Z)(a)}`,"buffer"===n&&`color${(0,u.Z)(a)}`,("indeterminate"===n||"query"===n)&&"bar2Indeterminate","buffer"===n&&"bar2Buffer"]};return(0,i.Z)(o,g,t)})(E),O=(0,d.Z)(),Z={},C={bar1:{},bar2:{}};if("determinate"===f||"buffer"===f)if(void 0!==c){Z["aria-valuenow"]=Math.round(c),Z["aria-valuemin"]=0,Z["aria-valuemax"]=100;let e=c-100;"rtl"===O.direction&&(e=-e),C.bar1.transform=`translateX(${e}%)`}else 0;if("buffer"===f)if(void 0!==m){let e=(m||0)-100;"rtl"===O.direction&&(e=-e),C.bar2.transform=`translateX(${e}%)`}else 0;return(0,b.jsxs)(x,(0,o.Z)({className:(0,l.Z)(y.root,r),ownerState:E,role:"progressbar"},Z,{ref:t},h,{children:["buffer"===f?(0,b.jsx)(T,{className:y.dashed,ownerState:E}):null,(0,b.jsx)(M,{className:y.bar1,ownerState:E,style:C.bar1}),"determinate"===f?null:(0,b.jsx)(P,{className:y.bar2,ownerState:E,style:C.bar2})]}))}))},98619:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var a=n(80102),o=n(83117),r=n(67294),l=n(63961),i=n(94780),s=n(41796),c=n(90948),u=n(71657),d=n(49990),m=n(58974),p=n(51705),f=n(59773),h=n(68686),g=n(85893);const b=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],v=(0,c.ZP)(d.Z,{shouldForwardProp:e=>(0,c.FO)(e)||"classes"===e,name:"MuiListItemButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((({theme:e,ownerState:t})=>(0,o.Z)({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${h.Z.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,s.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${h.Z.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,s.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${h.Z.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,s.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,s.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${h.Z.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${h.Z.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},"flex-start"===t.alignItems&&{alignItems:"flex-start"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.dense&&{paddingTop:4,paddingBottom:4}))),E=r.forwardRef((function(e,t){const n=(0,u.Z)({props:e,name:"MuiListItemButton"}),{alignItems:s="center",autoFocus:c=!1,component:d="div",children:E,dense:y=!1,disableGutters:O=!1,divider:Z=!1,focusVisibleClassName:C,selected:j=!1,className:w}=n,S=(0,a.Z)(n,b),N=r.useContext(f.Z),_=r.useMemo((()=>({dense:y||N.dense||!1,alignItems:s,disableGutters:O})),[s,N.dense,y,O]),k=r.useRef(null);(0,m.Z)((()=>{c&&k.current&&k.current.focus()}),[c]);const x=(0,o.Z)({},n,{alignItems:s,dense:_.dense,disableGutters:O,divider:Z,selected:j}),T=(e=>{const{alignItems:t,classes:n,dense:a,disabled:r,disableGutters:l,divider:s,selected:c}=e,u={root:["root",a&&"dense",!l&&"gutters",s&&"divider",r&&"disabled","flex-start"===t&&"alignItemsFlexStart",c&&"selected"]},d=(0,i.Z)(u,h.t,n);return(0,o.Z)({},n,d)})(x),M=(0,p.Z)(k,t);return(0,g.jsx)(f.Z.Provider,{value:_,children:(0,g.jsx)(v,(0,o.Z)({ref:M,href:S.href||S.to,component:(S.href||S.to)&&"div"===d?"button":d,focusVisibleClassName:(0,l.Z)(T.focusVisible,C),ownerState:x,className:(0,l.Z)(T.root,w)},S,{classes:T,children:E}))})}))},58952:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var a=n(97582),o=n(67294),r=n(74482),l=n(24085),i=n(65001),s=n(59219),c=n(99960),u=n(69721);const d={categories:[],isLoading:!0},m=e=>{const{cacheStrategy:t=s.n2.CACHE_FIRST}=e||{},n=(0,u.Ny)(),m=t!==s.n2.NETWORK_ONLY?(e=>{if(!e)return null;const t=e.map((e=>{const t=(0,u.u5)(e);return s.ZP.get(t)}));return t.filter((e=>!e)).length>0?null:t})(s.ZP.get(n,null)):null,[p,f]=(0,o.useState)(null!==m?{categories:m,isLoading:!1}:d),h=(e=l.Z.CategoryList.url())=>(0,a.mG)(void 0,void 0,void 0,(function*(){const t=(yield i.Z.request({url:e,method:l.Z.CategoryList.method})).data;return t.next?t.results.concat(yield h(t.next)):t.results}));return(0,o.useEffect)((()=>{t===s.n2.CACHE_FIRST&&m||h().then((e=>{f({categories:e,isLoading:!1}),s.ZP.set(n,e.map((e=>{const t=(0,u.u5)(e.id);return s.ZP.set(t,e),e.id})))})).catch((e=>{console.log(e),c.Y.error(r.h,"Unable to retrieve categories")}))}),[]),p}},94158:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var a=n(97582),o=n(67294),r=n(44012),l=n(45185),i=n(77931),s=n(98456),c=n(69368),u=n(23370),d=n.n(u),m=n(11447),p=n.n(m),f=n(87918),h=n(58952),g=n(90948),b=n(29628);const v="SCCategoryAutocomplete",E={root:`${v}-root`},y=(0,g.ZP)(l.Z,{name:v,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({}))),O=e=>{const t=(0,b.Z)({props:e,name:v}),{onChange:n,multiple:l=!1,defaultValue:u=(l?[]:null),limitCountCategories:m=0,checkboxSelect:g=!1,disabled:O=!1,TextFieldProps:Z={variant:"outlined",label:o.createElement(r.Z,{id:"ui.categoryAutocomplete.label",defaultMessage:"ui.categoryAutocomplete.label"})}}=t,C=(0,a._T)(t,["onChange","multiple","defaultValue","limitCountCategories","checkboxSelect","disabled","TextFieldProps"]),[j,w]=(0,o.useState)(!1),[S,N]=(0,o.useState)("string"==typeof u?null:u),{categories:_,isLoading:k}=(0,h.Z)();(0,o.useEffect)((()=>{null!==S&&n&&n(S)}),[S]),(0,o.useEffect)((()=>{k||"string"!=typeof u||N(l?_.filter((e=>e.id===Number(u))):_.find((e=>e.id===Number(u))))}),[k]);return o.createElement(y,Object.assign({className:E.root,multiple:l,open:j,onOpen:()=>{w(!0)},onClose:()=>{w(!1)},filterSelectedOptions:!g,disableCloseOnSelect:g,options:_||[],getOptionLabel:e=>e.name||"",value:S,selectOnFocus:!0,clearOnBlur:!0,blurOnSelect:!0,handleHomeEndKeys:!0,clearIcon:null,disabled:O||k,noOptionsText:o.createElement(r.Z,{id:"ui.categoryAutocomplete.empty",defaultMessage:"ui.categoryAutocomplete.empty"}),onChange:(e,t)=>{let n=null;if(l&&m>0){const[...e]=t;n=e.slice(-1*m)}else n=t;N(n)},isOptionEqualToValue:(e,t)=>t.id===e.id,renderTags:(e,t)=>e.map(((e,n)=>o.createElement(f.Z,Object.assign({key:e.id,id:e.id,label:e.name,color:e.color},t({index:n}))))),renderOption:(e,t,{selected:n,inputValue:a})=>{const r=p()(t.name,a),l=d()(t.name,r);return o.createElement("li",Object.assign({},e),g&&o.createElement(c.Z,{style:{marginRight:8},checked:n}),o.createElement(f.Z,{label:o.createElement(o.Fragment,null,l.map(((e,t)=>o.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text))))}))},renderInput:e=>o.createElement(i.Z,Object.assign({},e,Z,{margin:"dense",InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"categories",endAdornment:o.createElement(o.Fragment,null,k?o.createElement(s.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))},C))}},9181:(e,t,n)=>{"use strict";n.d(t,{Z:()=>yt});var a=n(97582),o=n(67294),r=n(49794),l=n(72951),i=n(65001),s=n(24085),c=n(59488),u=n(66380),d=n(68689),m=n(65580),p=n(85472),f=n(44012),h=n(67564),g=n(16628),b=n(64666),v=n(54776),E=n(98396),y=n(46901),O=n(92401),Z=n(37645),C=n(93946),j=n(6514),w=n(5616),S=n(31425),N=n(90948),_=n(2734);const k="discussion",x="post",T="poll",M=160;var P=n(57250),A=n(31812),D=n(77931),I=n(23370),R=n.n(I),$=n(11447),B=n.n($),L=n(15861),F=n(69417),U=n(11703),V=n(40044),z=n(45185),H=n(8455),W=n(94184),Y=n.n(W);const X="SCComposer",q="all",G="tag",K={root:`${X}-layer-audience-root`,title:`${X}-layer-title`,content:`${X}-layer-content`,message:`${X}-layer-audience-message`,autocomplete:`${X}-layer-audience-autocomplete`},J=(0,N.ZP)(w.Z,{name:X,slot:"LayerAudienceRoot"})((()=>({}))),Q=o.forwardRef(((e,t)=>{const{className:n,onClose:r,onSave:c,defaultValue:m=[],TextFieldProps:p={variant:"outlined",label:o.createElement(f.Z,{id:"ui.composer.layer.audience.tags.label",defaultMessage:"ui.composer.layer.audience.tags.label"})}}=e,g=(0,a._T)(e,["className","onClose","onSave","defaultValue","TextFieldProps"]),[b,v]=(0,o.useState)(!1),[E,y]=(0,o.useState)(null===m||0===m.length?q:G),[O,w]=(0,o.useState)(m||void 0),{scAddressingTags:S}=function({fetch:e=!1}){const[t,n]=(0,o.useState)([]),[a,r]=(0,o.useState)(!1),c=(0,d.LD)(),m=(0,u.ko)(),p=(0,o.useMemo)((()=>()=>i.Z.request({url:s.Z.ComposerAddressingTagList.url(),method:s.Z.ComposerAddressingTagList.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[]);return(0,o.useEffect)((()=>{!a&&e&&c.user&&m.features.includes(l.$.TAGGING)&&p().then((e=>{r(!0),n(e)}))}),[a,e,c.user,m.features]),{scAddressingTags:t}}({fetch:b}),N=(0,o.useCallback)((()=>c((null==O?void 0:O.length)&&(null==O?void 0:O.length)>0?O:null)),[O,c]),_=(0,o.useCallback)(((e,t)=>w(t)),[]),k=(0,o.useCallback)(((e,t)=>y(t)),[]),x=(0,o.useCallback)((()=>v(!0)),[]),T=(0,o.useCallback)((()=>v(!1)),[]);return o.createElement(J,Object.assign({ref:t,className:Y()(n,K.root)},g),o.createElement(Z.Z,{className:K.title},o.createElement(C.Z,{onClick:r},o.createElement(h.Z,null,"arrow_back")),o.createElement(L.Z,null,o.createElement(f.Z,{id:"ui.composer.layer.audience.title",defaultMessage:"ui.composer.layer.audience.title"})),o.createElement(F.Z,{size:"small",color:"secondary",variant:"contained",onClick:N},o.createElement(f.Z,{id:"ui.composer.layer.save",defaultMessage:"ui.composer.layer.save"}))),o.createElement(j.Z,{className:K.content},o.createElement(U.Z,{value:E,onChange:k,"aria-label":"audience type"},o.createElement(V.Z,{value:q,icon:o.createElement(h.Z,null,"public"),label:o.createElement(f.Z,{id:"ui.composer.layer.audience.all",defaultMessage:"ui.composer.layer.audience.all"})}),o.createElement(V.Z,{value:G,icon:o.createElement(h.Z,null,"label"),label:o.createElement(f.Z,{id:"ui.composer.layer.audience.tag",defaultMessage:"ui.composer.layer.audience.tag"})})),o.createElement(L.Z,{className:K.message},E===q&&o.createElement(f.Z,{id:"ui.composer.layer.audience.all.message",defaultMessage:"ui.composer.audience.layer.all.message"}),E===G&&o.createElement(f.Z,{id:"ui.composer.layer.audience.tag.message",defaultMessage:"ui.composer.audience.layer.tag.message"})),E===G&&o.createElement(z.Z,{className:K.autocomplete,open:b,onOpen:x,onClose:T,multiple:!0,options:S||[],getOptionLabel:e=>e.name||"",value:O,selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,clearIcon:null,noOptionsText:o.createElement(f.Z,{id:"ui.composer.layer.audience.tags.empty",defaultMessage:"ui.composer.layer.audience.tags.empty"}),onChange:_,isOptionEqualToValue:(e,t)=>t.id===e.id,renderTags:(e,t)=>e.map(((e,n)=>o.createElement(H.Z,Object.assign({key:e.id,tag:e},t({index:n}))))),renderOption:(e,t,{selected:n,inputValue:a})=>{const r=B()(t.name,a),l=R()(t.name,r);return o.createElement("li",Object.assign({},e),o.createElement(H.Z,{key:t.id,tag:t,label:o.createElement(o.Fragment,null,l.map(((e,t)=>o.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text))))}))},renderInput:e=>o.createElement(D.Z,Object.assign({},e,p,{InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"addressing",endAdornment:o.createElement(o.Fragment,null,e.InputProps.endAdornment)})}))})))}));var ee=n(77488),te=n(64635),ne=n(53457),ae=n(34386),oe=n(67720),re=n(50480),le=n(69368),ie=n(54490),se=n(86896),ce=n(16941),ue=n(87109),de=n(50720),me=n(92876),pe=n(22206),fe=n(58160),he=n(95826),ge=n(29628),be=n(23855);const ve={en:he.Z,it:fe.Z},Ee={root:`${X}-content-poll-root`,generalError:`${X}-general-error`,title:`${X}-content-poll-title`,choices:`${X}-content-poll-choices`,choiceNew:`${X}-content-poll-choice-new`,metadata:`${X}-content-poll-metadata`},ye=(0,N.ZP)(w.Z,{name:X,slot:"ContentPollRoot"})((({theme:e})=>({}))),Oe=(0,ie.vU)({choicePlaceholder:{id:"ui.composer.content.poll.choice.placeholder",defaultMessage:"ui.composer.content.poll.choice.placeholder"}}),Ze=(0,o.forwardRef)(((e,t)=>{var{children:n}=e,r=(0,a._T)(e,["children"]);return o.createElement(ne.Z,Object.assign({direction:"column",ref:t},r),n)})),Ce={choice:""},je={title:"",multiple_choices:!1,expiration_at:null,choices:[Object.assign({},Ce),Object.assign({},Ce)]},we=e=>{const t=(0,ge.Z)({props:e,name:X}),{className:n=null,value:a={poll:Object.assign({},je)},error:r={},disabled:l,onChange:i}=t,{titleError:s=null,error:c=null}=Object.assign({},r),u=(0,o.useMemo)((()=>a.poll?a.poll:Object.assign({},je)),[a,je]),d=(0,se.Z)(),m=(0,o.useCallback)((e=>{i(Object.assign(Object.assign({},a),{poll:Object.assign(Object.assign({},u),{title:e.target.value})}))}),[a,u]),p=(0,o.useCallback)((e=>{i(Object.assign(Object.assign({},a),{poll:Object.assign(Object.assign({},u),{choices:e})}))}),[a,u]),g=(0,o.useCallback)((e=>t=>{const n=[...u.choices];n[e].choice=t.target.value,i(Object.assign(Object.assign({},a),{poll:Object.assign(Object.assign({},u),{choices:n})}))}),[a,u]),b=(0,o.useCallback)((()=>{i(Object.assign(Object.assign({},a),{poll:Object.assign(Object.assign({},u),{choices:[...u.choices,Object.assign({},Ce)]})}))}),[a,u]),v=(0,o.useCallback)((e=>t=>{const n=[...u.choices];n.splice(e,1),i(Object.assign(Object.assign({},a),{poll:Object.assign(Object.assign({},u),{choices:n})}))}),[a,u]),E=(0,o.useCallback)((e=>{i(Object.assign(Object.assign({},a),{poll:Object.assign(Object.assign({},u),{multiple_choices:e.target.checked})}))}),[a,u]),y=(0,o.useCallback)((e=>{i(Object.assign(Object.assign({},a),{poll:Object.assign(Object.assign({},u),{expiration_at:e})}))}),[a,u]),O=(0,o.useMemo)((()=>{const e=new Date;return e.setDate(e.getDate()+2),e}),[]);return o.createElement(ye,{className:Y()(Ee.root,n)},c&&o.createElement(L.Z,{className:Ee.generalError},o.createElement(f.Z,{id:`ui.composer.content.poll.error.${c}`,defaultMessage:`ui.composer.content.poll.error.${c}`})),o.createElement(w.Z,{className:Ee.title},o.createElement(D.Z,{autoFocus:!0,disabled:l,label:o.createElement(f.Z,{id:"ui.composer.content.poll.title",defaultMessage:"ui.composer.content.poll.title"}),variant:"outlined",value:u.title,onChange:m,fullWidth:!0,error:Boolean(s),helperText:s&&s,InputProps:{endAdornment:o.createElement(L.Z,{variant:"body2"},160-u.title.length)}})),o.createElement(w.Z,{className:Ee.choices},o.createElement(ce.ReactSortable,{list:[...u.choices],setList:p,tag:Ze},u.choices.map(((e,t)=>o.createElement(D.Z,{key:t,placeholder:d.formatMessage(Oe.choicePlaceholder),value:e.choice,onChange:g(t),variant:"outlined",disabled:l,InputProps:{startAdornment:o.createElement(ue.Z,{position:"start"},o.createElement(h.Z,null,"drag")),endAdornment:o.createElement(ue.Z,{position:"end"},o.createElement(ae.Z,{title:u.choices.length<=2?o.createElement(f.Z,{id:"ui.composer.content.poll.choice.delete.disabled",defaultMessage:"ui.composer.content.poll.choice.delete.disabled"}):o.createElement(f.Z,{id:"ui.composer.content.poll.choice.delete",defaultMessage:"ui.composer.content.poll.choice.delete"})},o.createElement("span",null,o.createElement(C.Z,{onClick:v(t),disabled:u.choices.length<=2,edge:"end"},o.createElement(h.Z,null,"delete")))))}}))))),o.createElement(w.Z,{className:Ee.choiceNew},o.createElement(F.Z,{color:"inherit",variant:"text",onClick:b},o.createElement(h.Z,null,"add"),o.createElement(f.Z,{id:"ui.composer.content.poll.choice.add",defaultMessage:"ui.composer.choice.add"}))),o.createElement(oe.Z,null),o.createElement(ne.Z,{className:Ee.metadata},o.createElement(re.Z,{control:o.createElement(le.Z,{checked:u.multiple_choices,onChange:E}),label:o.createElement(f.Z,{id:"ui.composer.content.poll.multiple",defaultMessage:"ui.composer.content.poll.multiple"})}),o.createElement(de._,{dateAdapter:pe.H,adapterLocale:ve[d.locale]},o.createElement(me.M,{disabled:l,label:o.createElement(f.Z,{id:"ui.composer.content.poll.expiration",defaultMessage:"ui.composer.content.poll.expiration"}),value:"string"==typeof u.expiration_at?(0,be.Z)(u.expiration_at):u.expiration_at,onChange:y,slotProps:{textField:{variant:"outlined"}},minDate:O}))))};var Se=n(20377),Ne=n(94631),_e=n(33454),ke=n(96420);const xe={root:`${X}-typeswitch-root`},Te=(0,N.ZP)(_e.Z,{name:X,slot:"TypeSwitchButtonGroupRoot"})((()=>({})));const Me=function(e){const{preferences:t}=(0,u.ko)(),n=(0,d.LD)(),r=(0,o.useMemo)((()=>t[p.ej].value||m.B2(n.user)),[t,n.user]),l=(0,o.useMemo)((()=>t[p.Ln].value),[t]),i=(0,o.useMemo)((()=>t[p.Ow].value),[t]),{className:s,onChange:c,value:h}=e,g=(0,a._T)(e,["className","onChange","value"]);(0,o.useEffect)((()=>{null===h&&c&&c(l?x:k)}),[h]);const b=(0,o.useCallback)(((e,t)=>{c&&c(t)}),[c]);return o.createElement(Te,Object.assign({className:Y()(xe.root,s),onChange:b,exclusive:!0,value:h},g),l&&o.createElement(ke.Z,{value:x},o.createElement(f.Z,{id:"ui.composer.typeSwitch.post",defaultMessage:"ui.composer.typeSwitch.post"})),i&&o.createElement(ke.Z,{value:k},o.createElement(f.Z,{id:"ui.composer.typeSwitch.discussion",defaultMessage:"ui.composer.typeSwitch.discussion"})),r&&o.createElement(ke.Z,{value:T},o.createElement(f.Z,{id:"ui.composer.typeSwitch.poll",defaultMessage:"ui.composer.typeSwitch.poll"})))};var Pe=n(27103);const Ae={root:`${X}-content-post-root`,generalError:`${X}-general-error`,medias:`${X}-content-post-medias`,editor:`${X}-content-post-editor`},De=(0,N.ZP)(w.Z,{name:X,slot:"ContentPostRoot"})((({theme:e})=>({}))),Ie={categories:[],medias:[],html:"",addressing:[]},Re=e=>{const{className:t=null,value:n=Object.assign({},Ie),error:a={},disabled:r=!1,onChange:l,EditorProps:i={}}=e,{error:s=null}=Object.assign({},a),c=(0,o.useRef)();(0,o.useEffect)((()=>{c&&c.current&&c.current.focus()}),[c]);const u=(0,o.useCallback)((e=>{l(Object.assign(Object.assign({},n),{html:e}))}),[n]);return o.createElement(De,{className:Y()(Ae.root,t)},s&&o.createElement(L.Z,{className:Ae.generalError},o.createElement(f.Z,{id:`ui.composer.error.${s}`,defaultMessage:`ui.composer.error.${s}`})),o.createElement(Pe.Z,Object.assign({ref:c},i,{editable:!r,className:Ae.editor,onChange:u,defaultValue:n.html})))};var $e=n(94158);const Be={root:`${X}-layer-category-root`,title:`${X}-layer-title`,content:`${X}-layer-content`},Le=(0,N.ZP)(w.Z,{name:X,slot:"LayerCategoryRoot"})((()=>({}))),Fe=o.forwardRef(((e,t)=>{const{className:n,onClose:r,onSave:l,defaultValue:i=[]}=e,s=(0,a._T)(e,["className","onClose","onSave","defaultValue"]),[c,u]=(0,o.useState)(i),d=(0,o.useCallback)((()=>l(c)),[c,l]),m=(0,o.useCallback)((e=>u(e)),[]);return o.createElement(Le,Object.assign({ref:t,className:Y()(n,Be.root)},s),o.createElement(Z.Z,{className:Be.title},o.createElement(C.Z,{onClick:r},o.createElement(h.Z,null,"arrow_back")),o.createElement(L.Z,null,o.createElement(f.Z,{id:"ui.composer.layer.category.title",defaultMessage:"ui.composer.layer.category.title"})),o.createElement(F.Z,{size:"small",color:"secondary",variant:"contained",onClick:d},o.createElement(f.Z,{id:"ui.composer.layer.save",defaultMessage:"ui.composer.layer.save"}))),o.createElement(j.Z,{className:Be.content},o.createElement($e.Z,{multiple:!0,onChange:m,defaultValue:i})))}));var Ue=n(88304);const Ve={root:`${X}-layer-location-root`,title:`${X}-layer-title`,content:`${X}-layer-content`},ze=(0,N.ZP)(w.Z,{name:X,slot:"LayerLocationRoot"})((()=>({}))),He=o.forwardRef(((e,t)=>{const{className:n,onClose:r,onSave:l,defaultValue:i=null}=e,s=(0,a._T)(e,["className","onClose","onSave","defaultValue"]),[c,u]=(0,o.useState)(i),d=(0,o.useCallback)((()=>l(c)),[c,l]),m=(0,o.useCallback)((e=>u(e)),[]);return o.createElement(ze,Object.assign({ref:t,className:Y()(n,Ve.root)},s),o.createElement(Z.Z,{className:Ve.title},o.createElement(C.Z,{onClick:r},o.createElement(h.Z,null,"arrow_back")),o.createElement(L.Z,null,o.createElement(f.Z,{id:"ui.composer.layer.location.title",defaultMessage:"ui.composer.layer.location.title"})),o.createElement(F.Z,{size:"small",color:"secondary",variant:"contained",onClick:d},o.createElement(f.Z,{id:"ui.composer.layer.save",defaultMessage:"ui.composer.layer.save"}))),o.createElement(j.Z,{className:Ve.content},o.createElement(Ue.Z,{onChange:m,defaultValue:c||""})))})),We={root:`${X}-content-discussion-root`,generalError:`${X}-general-error`,title:`${X}-content-discussion-title`,medias:`${X}-content-discussion-medias`,editor:`${X}-content-discussion-editor`},Ye=(0,N.ZP)(w.Z,{name:X,slot:"ContentDiscussionRoot"})((({theme:e})=>({}))),Xe={title:"",categories:[],medias:[],html:"",addressing:[]},qe=e=>{const{className:t=null,value:n=Object.assign({},Xe),error:a={},disabled:r=!1,onChange:l,EditorProps:i={}}=e,{titleError:s=null,error:c=null}=Object.assign({},a),u=(0,se.Z)(),d=(0,o.useCallback)((e=>{l(Object.assign(Object.assign({},n),{title:e.target.value}))}),[n]),m=(0,o.useCallback)((e=>{l(Object.assign(Object.assign({},n),{html:e}))}),[n]);return o.createElement(Ye,{className:Y()(We.root,t)},c&&o.createElement(L.Z,{className:We.generalError},o.createElement(f.Z,{id:`ui.composer.error.${c}`,defaultMessage:`ui.composer.error.${c}`})),o.createElement(D.Z,{className:We.title,placeholder:u.formatMessage({id:"ui.composer.content.discussion.title.label",defaultMessage:"ui.composer.content.discussion.title.label"}),autoFocus:!0,fullWidth:!0,variant:"outlined",value:n.title,multiline:!0,onChange:d,InputProps:{endAdornment:o.createElement(L.Z,{variant:"body2"},M-n.title.length)},error:Boolean(s),helperText:s,disabled:r}),o.createElement(Pe.Z,Object.assign({},i,{editable:!r,className:We.editor,onChange:m,defaultValue:n.html})))};var Ge=n(22461),Ke=n(70815),Je=n(26474),Qe=n(87918);const et={root:`${X}-attributes-root`},tt=(0,N.ZP)(w.Z,{name:X,slot:"AttributesRoot"})((()=>({}))),nt=e=>{var t,n;const{className:a=null,value:r=null,onChange:l=null,onClick:i=null}=e,s=(0,o.useCallback)((e=>()=>{l&&l(Object.assign(Object.assign({},r),{categories:r.categories.filter((t=>t.id!==e))}))}),[r,l]),c=(0,o.useCallback)((()=>{i&&i("categories")}),[i]),u=(0,o.useCallback)((e=>()=>{l&&l(Object.assign(Object.assign({},r),{addressing:r.addressing.filter((t=>t.id!==e))}))}),[r,l]),d=(0,o.useCallback)((()=>{i&&i("addressing")}),[i]),m=(0,o.useCallback)((()=>{l&&l(Object.assign(Object.assign({},r),{location:null}))}),[r,l]),p=(0,o.useCallback)((()=>{i&&i("location")}),[i]);return o.createElement(tt,{className:Y()(et.root,a)},(null===(t=null==r?void 0:r.categories)||void 0===t?void 0:t.length)>0&&(null==r?void 0:r.categories.map((e=>o.createElement(Qe.Z,{key:e.id,label:e.name,onDelete:s(e.id),icon:o.createElement(h.Z,null,"category"),onClick:c})))),(null===(n=null==r?void 0:r.addressing)||void 0===n?void 0:n.length)>0&&(null==r?void 0:r.addressing.map((e=>o.createElement(H.Z,{key:e.id,tag:e,onDelete:u(e.id),icon:o.createElement(h.Z,null,"label"),onClick:d})))),(null==r?void 0:r.location)&&o.createElement(Qe.Z,{icon:o.createElement(h.Z,null,"add_location_alt"),label:null==r?void 0:r.location.location,onDelete:m,onClick:p}))};var at=n(88078);const ot={root:`${X}-skeleton-root`,title:`${X}-title`,avatar:`${X}-avatar`,content:`${X}-content`,actions:`${X}-actions`},rt=(0,N.ZP)(w.Z,{name:X,slot:"SkeletonRoot"})((()=>({})));function lt(){return o.createElement(rt,{className:ot.root},o.createElement(at.Z,{sx:{height:190},animation:"wave",variant:"rectangular"}))}var it=n(78462),st=n(97212),ct=n(98619),ut=n(59334);const dt={root:`${X}-layer-close-root`,title:`${X}-layer-title`,content:`${X}-layer-content`},mt=(0,N.ZP)(w.Z,{name:X,slot:"LayerCloseRoot"})((()=>({}))),pt=o.forwardRef(((e,t)=>{const{className:n,onClose:r,onSave:l,defaultValue:i=[]}=e,s=(0,a._T)(e,["className","onClose","onSave","defaultValue"]);return o.createElement(mt,Object.assign({ref:t,className:Y()(n,dt.root)},s),o.createElement(Z.Z,{className:dt.title},o.createElement(C.Z,{onClick:r},o.createElement(h.Z,null,"arrow_back")),o.createElement(L.Z,null,o.createElement(f.Z,{id:"ui.composer.layer.close.title",defaultMessage:"ui.composer.layer.close.title"}))),o.createElement(j.Z,{className:dt.content},o.createElement(L.Z,null,o.createElement(f.Z,{id:"ui.composer.layer.close.text",defaultMessage:"ui.composer.layer.close.text"})),o.createElement(it.Z,null,o.createElement(st.ZP,null,o.createElement(ct.Z,{onClick:r},o.createElement(ut.Z,{primary:o.createElement(f.Z,{id:"ui.composer.layer.close.no",defaultMessage:"ui.composer.layer.close.no"})}))),o.createElement(st.ZP,null,o.createElement(ct.Z,{onClick:l},o.createElement(ut.Z,{primary:o.createElement(f.Z,{id:"ui.composer.layer.close.yes",defaultMessage:"ui.composer.layer.close.yes"})}))))))})),ft=(0,o.forwardRef)((function(e,t){return o.createElement(g.Z,Object.assign({ref:t},e))})),ht={root:`${X}-root`,ios:`${X}-ios`,title:`${X}-title`,types:`${X}-types`,content:`${X}-content`,attributes:`${X}-attributes`,medias:`${X}-medias`,actions:`${X}-actions`,layerTransitionRoot:`${X}-layer-transition-root`},gt=(0,N.ZP)(b.Z,{name:X,slot:"Root"})((()=>({}))),bt=(0,N.ZP)(v.Z,{name:X,slot:"LayerTransitionRoot"})((({theme:e})=>({}))),vt={id:null,type:null,title:"",titleError:null,html:"",htmlError:null,categories:[],categoriesError:null,addressing:null,addressingError:null,medias:[],poll:null,location:null,error:null},Et=(e,t)=>{switch(t.type){case"reset":return Object.assign(Object.assign({},vt),{key:(0,ee.MX)()});case"multiple":return Object.assign(Object.assign({},e),t.value);default:return Object.assign(Object.assign({},e),{[t.type]:t.value})}};const yt=function(e){const t=(0,ge.Z)({props:e,name:X}),{feedObjectId:n=null,feedObjectType:g=null,feedObject:b=null,defaultValue:v={},mediaObjectTypes:N=[Ge.Z,Ke.Z,Je.Z],EditorProps:k={},onClose:x=null,onSuccess:D=null,maxWidth:I}=t,R=(0,a._T)(t,["feedObjectId","feedObjectType","feedObject","defaultValue","mediaObjectTypes","EditorProps","onClose","onSuccess","maxWidth"]),{preferences:$,features:B}=(0,u.ko)(),L=(0,d.LD)(),{enqueueSnackbar:F}=(0,Se.Ds)(),U=(0,_.Z)(),V=(0,E.Z)(U.breakpoints.down("md"),{noSsr:"undefined"!=typeof window}),[z,H]=(0,o.useState)(!1),[W,q]=(0,o.useState)(),[G,K]=(0,o.useReducer)(Et,Object.assign(Object.assign(Object.assign({},vt),v),{key:(0,ee.MX)()})),{key:J,id:ne,type:ae,title:oe,titleError:re,html:le,categories:ie,addressing:se,audience:ce,medias:ue,poll:de,pollError:me,location:pe,error:fe}=G,he=e=>{e.type===r.q.POST||(e.type,r.q.DISCUSSION),b.author.id===L.user.id?(K({type:"multiple",value:{id:e.id,type:e.poll?T:b.type,title:e.title,html:e.html,categories:e.categories,addressing:e.addressing,medias:e.medias,poll:e.poll,location:e.location}}),Ee(!1)):Oe(!0)},be=(0,o.useMemo)((()=>Boolean(n&&g||b)),[n,g,b]),[ve,Ee]=(0,o.useState)(be),[ye,Oe]=(0,o.useState)(!1),Ze=(0,o.useRef)(),Ce=(0,o.useRef)(!1),je=(0,o.useRef)({medias:ue});je.current={medias:ue};const _e=(0,o.useMemo)((()=>de&&de.title.length>0&&de.title.length<M&&de.choices.length>=2),[de]),ke=(0,o.useMemo)((()=>!ve&&(ae===r.q.DISCUSSION&&oe.length>0&&oe.length<M||ae===r.q.POST&&((0,ee.Vt)(le).length>0||ue.length>0||_e)||ae===T&&_e)),[ve,ae,oe,le,ue,_e]),xe=(0,o.useMemo)((()=>(0,te.g)()),[]);(0,o.useEffect)((()=>{be&&(null===b?(Ee(!0),i.Z.request({url:s.Z.FeedObject.url({type:g,id:n}),method:s.Z.FeedObject.method}).then((e=>{he(e.data)})).catch((()=>{Oe(!0)})).then((()=>Ee(!1)))):he(b))}),[be]),(0,o.useEffect)((()=>{if(!Ce.current&&ke){Ce.current=!0;const e=e=>(e.preventDefault(),"");window.onbeforeunload=e}else Ce.current&&!ke&&(Ce.current=!1,window.onbeforeunload=null)}),[G,ke]),(0,o.useEffect)((()=>{if(!Ze.current||!xe)return;const e=()=>{Ze.current.focus()};return Ze.current.addEventListener("touchstart",e),()=>{var t;return null===(t=Ze.current)||void 0===t?void 0:t.removeEventListener("touchstart",e)}}),[Ze.current,xe]);const Te=(0,o.useCallback)((e=>q(e)),[]),Pe=(0,o.useCallback)((()=>q(null)),[]),Ae=(0,o.useCallback)((e=>{K({type:"type",value:e})}),[]),De=(0,o.useCallback)((e=>{K({type:"multiple",value:Object.assign(Object.assign({},e),{pollError:e.poll.title.length>M?{titleError:o.createElement(f.Z,{id:"ui.composer.title.error.maxlength",defaultMessage:"ui.composer.title.error.maxlength"})}:null})})}),[]),Ie=(0,o.useCallback)((e=>{K({type:"multiple",value:Object.assign(Object.assign({},e),{titleError:e.title.length>M?o.createElement(f.Z,{id:"ui.composer.title.error.maxlength",defaultMessage:"ui.composer.title.error.maxlength"}):null})})}),[]),$e=(0,o.useCallback)((e=>{K({type:"multiple",value:Object.assign({},e)})}),[]),Be=(0,o.useCallback)((e=>{K({type:"categories",value:e}),q(null)}),[]),Le=(0,o.useCallback)((()=>Te({name:"category",Component:Fe,ComponentProps:{onClose:Pe,onSave:Be,defaultValue:ie}})),[Te,Pe,Be,ie]),Ue=(0,o.useCallback)((e=>{K({type:"addressing",value:e}),q(null)}),[]),Ve=(0,o.useCallback)((()=>Te({name:"audience",Component:Q,ComponentProps:{onClose:Pe,onSave:Ue,defaultValue:se}})),[Te,Pe,Ue,se]),ze=(0,o.useCallback)((e=>{K({type:"location",value:e}),q(null)}),[]),We=(0,o.useCallback)((()=>Te({name:"location",Component:He,ComponentProps:{onClose:Pe,onSave:ze,defaultValue:pe}})),[Te,Pe,ze,pe]),Ye=(0,o.useCallback)((e=>{const t=[...e];K({type:"medias",value:[...e]}),je.current.medias=t,q(null)}),[]),Xe=(0,o.useCallback)((e=>{const t=[...je.current.medias,e];K({type:"medias",value:t}),je.current.medias=t}),[]),Qe=(0,o.useCallback)((e=>t=>{e.layerComponent&&Te({name:e.name,Component:e.layerComponent,ComponentProps:{onClose:Pe,onSave:Ye,defaultValue:ue}})}),[Te,Pe,Ye,ue]),et=(0,o.useCallback)((e=>{K({type:"multiple",value:Object.assign({},e)})}),[]),tt=(0,o.useCallback)((e=>{switch(e){case"categories":Le();break;case"addressing":Ve();break;case"location":We()}}),[Le,Ve,We]),at=(0,o.useCallback)((e=>{if(e.preventDefault(),e.stopPropagation(),m.IT(L.user))return void F(o.createElement(f.Z,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3});const t=[...ie.map((e=>e.id)),...(0,Ne.E)(le)],n={title:oe,text:le,medias:ue.map((e=>e.id)),categories:t.filter(((e,n)=>t.indexOf(e)===n))};($[p.ej].value||m.B2(L.user))&&_e&&(n.poll=de),$[p.ey].value&&pe&&(n.location=pe),B.includes(l.$.TAGGING)&&null!==se&&(n.addressing=se.map((e=>e.id))),H(!0);const a=ae===T?r.q.POST:ae;let u=s.Z.Composer.url({type:a}),d=s.Z.Composer.method;be&&(u=s.Z.ComposerEdit.url({type:g||a,id:ne}),d=s.Z.ComposerEdit.method),i.Z.request({url:u,method:d,data:n}).then((e=>{D(e.data),Ce.current&&(window.onbeforeunload=null),K({type:"reset"})})).catch((e=>{K({type:"multiple",value:(0,c.yt)(e)})})).then((()=>H(!1)))}),[L.user,g,ne,ae,oe,le,ie,se,ce,ue,de,pe,_e]),ot=(0,o.useCallback)(((e,t)=>{Ce.current&&(window.onbeforeunload=null),t&&ke?Te({name:"close",Component:pt,ComponentProps:{onClose:Pe,onSave:()=>{x&&x(e),q(null),K({type:"reset"})}}}):(x&&x(e),q(null),K({type:"reset"}))}),[x,ke,Pe]),rt=(0,o.useCallback)((e=>{ke?Te({name:"close",Component:pt,ComponentProps:{onClose:Pe,onSave:ot}}):ot(e)}),[ke,Te,Pe,ot]),it=(0,o.useMemo)((()=>-1!==ue.findIndex((e=>e.type===P.TC))),[ue]),st=(0,o.useMemo)((()=>{if(be&&ve)return o.createElement(lt,null);if(be&&ye)return o.createElement(y.Z,{severity:"error",onClose:ot},o.createElement(O.Z,null,o.createElement(f.Z,{id:"ui.composer.edit.error.title",defaultMessage:"ui.composer.edit.error.title"})),o.createElement(f.Z,{id:"ui.composer.edit.error.content",defaultMessage:"ui.composer.edit.error.content"}));switch(ae){case T:return o.createElement(we,{key:J,onChange:De,value:{html:le,categories:ie,addressing:se,medias:ue,poll:de,location:pe},error:me,disabled:z});case r.q.DISCUSSION:return o.createElement(qe,{key:J,value:{title:oe,html:le,categories:ie,addressing:se,medias:ue,poll:de,location:pe},error:{titleError:re,error:fe},onChange:Ie,disabled:z,EditorProps:Object.assign({toolbar:!0,uploadImage:!0},k)});default:return o.createElement(Re,{key:J,value:{html:le,categories:ie,addressing:se,medias:ue,poll:de,location:pe},error:{error:fe},onChange:$e,disabled:z,EditorProps:Object.assign({toolbar:!1,uploadImage:!1},k)})}}),[J,ae,oe,le,ie,se,ue,de,me,pe,fe,De,$e,z]);return L.user||L.loading&&open?o.createElement(gt,Object.assign({ref:Ze,TransitionComponent:ft,keepMounted:!0,onClose:ot},R,{className:Y()(ht.root,{[ht.ios]:xe}),scroll:"body",fullScreen:V,tabIndex:-1}),o.createElement("form",{onSubmit:at,method:"post"},o.createElement(Z.Z,{className:ht.title},o.createElement(C.Z,{onClick:rt},o.createElement(h.Z,null,"close")),o.createElement(A.Z,{size:"small",type:"submit",color:"secondary",variant:"contained",disabled:!ke,loading:z},o.createElement(f.Z,{id:"ui.composer.submit",defaultMessage:"ui.composer.submit"}))),o.createElement(j.Z,{className:ht.content},o.createElement(nt,{value:{categories:ie,addressing:se,location:pe},className:ht.attributes,onChange:et,onClick:tt}),st,ue&&ue.length>0&&o.createElement(w.Z,{className:ht.medias},N.map((e=>e.previewComponent?o.createElement(e.previewComponent,{key:e.name,value:ue,onChange:Ye}):e.displayComponent?o.createElement(e.displayComponent,{key:e.name,medias:ue}):void 0)))),!ke&&!be&&o.createElement(Me,{className:ht.types,onChange:Ae,size:"small",value:ae}),o.createElement(S.Z,{className:ht.actions},N.filter((e=>null!==e.triggerButton)).map((e=>{const t=e.layerComponent?{onClick:Qe(e)}:{onAdd:Xe};return o.createElement(e.triggerButton,Object.assign({key:e.name,disabled:z||it,color:ue.filter(e.filter).length>0?"primary":"default"},t))})),o.createElement(C.Z,{disabled:z,onClick:Le},o.createElement(h.Z,null,"category")),o.createElement(C.Z,{disabled:z||!B.includes(l.$.TAGGING),onClick:Ve},null===se||0===se.length?o.createElement(h.Z,null,"public"):o.createElement(h.Z,null,"label")),$[p.ey].value&&o.createElement(C.Z,{disabled:z,onClick:We,color:null!==pe?"primary":"default"},o.createElement(h.Z,null,"add_location_alt")))),W&&o.createElement(bt,{className:ht.layerTransitionRoot,in:!0,container:Ze.current,direction:"left"},o.createElement(W.Component,Object.assign({},W.ComponentProps)))):null}},12805:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var a=n(97582),o=n(67294),r=n(63902),l=n(90948),i=n(88078),s=n(37024),c=n(2734),u=n(78445),d=n(44267),m=n(94184),p=n.n(m),f=n(37540);const h={root:`${f.B}-skeleton-root`,media:`${f.B}-media`},g=(0,l.ZP)(r.Z,{name:f.B,slot:"SkeletonRoot"})((()=>({})));function b(e){const{template:t=s.r.SNIPPET}=e,n=(0,a._T)(e,["template"]),r=(0,c.Z)();let l;return l=t===s.r.PREVIEW||t===s.r.DETAIL||t===s.r.SEARCH?o.createElement(o.Fragment,null,o.createElement(u.Z,{avatar:o.createElement(i.Z,{animation:"wave",variant:"circular",width:r.selfcommunity.user.avatar.sizeMedium,height:r.selfcommunity.user.avatar.sizeMedium}),title:o.createElement(i.Z,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),subheader:o.createElement(i.Z,{animation:"wave",height:10,width:"40%"})}),o.createElement(i.Z,{animation:"wave",variant:"rectangular",className:h.media}),o.createElement(d.Z,null,o.createElement(o.Fragment,null,o.createElement(i.Z,{animation:"wave",height:10,style:{marginBottom:6}}),o.createElement(i.Z,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),o.createElement(i.Z,{animation:"wave",height:10,width:"60%"})))):o.createElement(o.Fragment,null,o.createElement(u.Z,{avatar:o.createElement(i.Z,{animation:"wave",variant:"circular",width:r.selfcommunity.user.avatar.sizeMedium,height:r.selfcommunity.user.avatar.sizeMedium}),title:o.createElement(i.Z,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),subheader:o.createElement(i.Z,{animation:"wave",height:10,width:"40%"})}),o.createElement(d.Z,null,o.createElement(o.Fragment,null,o.createElement(i.Z,{animation:"wave",height:10,style:{marginBottom:6}}),o.createElement(i.Z,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),o.createElement(i.Z,{animation:"wave",height:10,width:"60%",style:{marginBottom:6}})))),o.createElement(g,Object.assign({className:p()(h.root,`${f.B}-${t}`)},n),l)}},37540:(e,t,n)=>{"use strict";n.d(t,{B:()=>a});const a="SCFeedObject"},38509:(e,t,n)=>{"use strict";n.d(t,{Z:()=>tn});var a=n(97582),o=n(67294),r=n(90948),l=n(44267),i=n(15861),s=n(69417),c=n(5616),u=n(78445),d=n(87952),m=n(34386),p=n(31536),f=n(62023),h=n(57922),g=n(12805),b=n(91568),v=n(51575),E=n(86558),y=n(86886),O=n(67720),Z=n(94184),C=n.n(Z),j=n(85050),w=n(85966),S=n(37540);const N={root:`${S.B}-action-vote-root`,divider:`${S.B}-action-vote-divider`,button:`${S.B}-action-vote-button`,inline:`${S.B}-action-vote-inline`,viewAudienceButton:`${S.B}-action-vote-view-audience-button`},_=(0,r.ZP)(c.Z,{name:S.B,slot:"ActionVoteRoot"})((()=>({})));const k=function(e){const{className:t=null,feedObjectId:n=null,feedObject:r=null,feedObjectType:l=null,withAudience:i=!0,withAction:s=!0,inlineAction:c=!1,onVoteAction:u=(()=>null)}=e,d=(0,a._T)(e,["className","feedObjectId","feedObject","feedObjectType","withAudience","withAction","inlineAction","onVoteAction"]);return o.createElement(_,Object.assign({className:C()(N.root,t,{[N.inline]:c})},d),i&&o.createElement(w.Z,{className:N.viewAudienceButton,contributionId:n,contributionType:l,contribution:r,variant:"text",size:"small"}),s&&o.createElement(o.Fragment,null,!c&&i&&o.createElement(O.Z,{className:N.divider}),o.createElement(j.Z,{className:N.button,contributionId:n,contributionType:l,contribution:r,onVote:u})))};var x=n(54490),T=n(86896),M=n(67564),P=n(31498),A=n(41538),D=n(97265),I=n(49794),R=n(37024),$=n(70050),B=n(88078);const L=(0,x.vU)({comments:{id:"ui.feedObject.comment.comments",defaultMessage:"ui.feedObject.comment.comments"},comment:{id:"ui.feedObject.comment.comment",defaultMessage:"ui.feedObject.comment.comment"}}),F={root:`${S.B}-action-comment-root`,divider:`${S.B}-action-comment-divider`,inline:`${S.B}-action-comment-inline`,button:`${S.B}-action-comment-button`,viewAudienceButton:`${S.B}-action-comment-view-audience-button`},U=(0,r.ZP)(c.Z,{name:S.B,slot:"ActionCommentRoot"})((()=>({})));const V=function(e){const{className:t,feedObjectId:n,feedObject:r,feedObjectType:l=I.q.POST,feedObjectTemplate:c=R.r,withAction:u=!0,withAudience:d=!0,inlineAction:p=!1,onViewCommentsAction:f,onCommentAction:h}=e,g=(0,a._T)(e,["className","feedObjectId","feedObject","feedObjectType","feedObjectTemplate","withAction","withAudience","inlineAction","onViewCommentsAction","onCommentAction"]),{obj:b,setObj:v}=(0,P.Z)({id:n,feedObject:r,feedObjectType:l}),E=(0,A.sy)(),y=(0,T.Z)();return o.createElement(U,Object.assign({className:C()(F.root,t,{[F.inline]:p})},g),function(){let e;return d&&(e=b?o.createElement(o.Fragment,null,f?o.createElement(s.Z,{variant:"text",size:"small",onClick:f,color:"inherit"},`${y.formatMessage(L.comments,{total:b.comment_count})}`):o.createElement(o.Fragment,null,c===R.r.DETAIL?o.createElement(i.Z,{variant:"body2"},`${y.formatMessage(L.comments,{total:b.comment_count})}`):o.createElement(s.Z,{variant:"text",size:"small",component:D.Z,to:E.url((0,$.Ig)(b),(0,$.p3)(b)),classes:{root:F.viewAudienceButton}},`${y.formatMessage(L.comments,{total:b.comment_count})}`))):o.createElement(s.Z,{variant:"text",size:"small",disabled:!0,color:"inherit"},o.createElement(B.Z,{animation:"wave",height:18,width:50}))),e}(),function(){let e={};return h||(e={component:D.Z,to:E.url((0,$.Ig)(b),(0,$.p3)(b))}),o.createElement(o.Fragment,null,u&&o.createElement(o.Fragment,null,!p&&d&&o.createElement(O.Z,{className:F.divider}),o.createElement(m.Z,{title:`${y.formatMessage(L.comment)}`},o.createElement(s.Z,Object.assign({onClick:h,className:F.button},e),o.createElement(M.Z,null,"chat_bubble_outline")))))}())};var z=n(44012),H=n(31812),W=n(78462),Y=n(97212),X=n(79558),q=n(24085),G=n(65001),K=n(99960),J=n(75459),Q=n(39154),ee=n(52271),te=n(37089);const ne=function(e){const{id:t=null,feedObject:n=null,feedObjectType:r=(n?n.type:I.q.POST),open:l=!1,onClose:s=null}=e,c=(0,a._T)(e,["id","feedObject","feedObjectType","open","onClose"]),{obj:u,setObj:d}=(0,P.Z)({id:t,feedObject:n,feedObjectType:r}),[m,p]=(0,o.useState)(Boolean(t&&r||n)),[f,h]=(0,o.useState)([]),[g,b]=(0,o.useState)(t&&r?`${q.Z.ShareUsersList.url({type:r,id:t})}`:n&&r?`${q.Z.ShareUsersList.url({type:r,id:n.id})}`:null);function v(){p(!0),G.Z.request({url:g,method:q.Z.ShareUsersList.method}).then((e=>{const t=e.data;h([...f,...t.results]),p(!1),b(null!==t.next?t.next:null)})).catch((e=>{K.Y.error(J.J,e)}))}return(0,o.useEffect)((()=>{u&&g&&v()}),[`${u}`]),o.createElement(Q.Z,Object.assign({title:o.createElement(z.Z,{defaultMessage:"ui.feedObject.sharesDialog.title",id:"ui.feedObject.sharesDialog.title"}),onClose:s,open:l},c),m?o.createElement(ee.Z,{size:50}):o.createElement(X.Z,{dataLength:f.length,next:v,hasMoreNext:null!==g,loaderNext:o.createElement(ee.Z,{size:30}),height:400,endMessage:o.createElement(i.Z,{variant:"body2",align:"center",fontWeight:"bold"},o.createElement(z.Z,{id:"ui.feedObject.sharesDialog.noOtherLikes",defaultMessage:"ui.feedObject.sharesDialog.noOtherLikes"}))},o.createElement(W.Z,null,f.slice(0,4).map(((e,t)=>o.createElement(Y.ZP,{key:e.id},o.createElement(te.Z,{elevation:0,user:e,key:t})))))))};var ae=n(2734),oe=n(98396),re=n(59334),le=n(25464),ie=n(39005),se=n(18972),ce=n(48885),ue=n(57250),de=n(20377),me=n(77488),pe=n(53704),fe=n(66380),he=n(85472),ge=n(68689),be=n(65580),ve=n(37991),Ee=n(9181);const ye=(0,x.vU)({shares:{id:"ui.feedObject.share.shares",defaultMessage:"ui.feedObject.share.shares"},share:{id:"ui.feedObject.share.share",defaultMessage:"ui.feedObject.share.share"}}),Oe={root:`${S.B}-action-share-root`,divider:`${S.B}-action-share-divider`,inline:`${S.B}-action-share-inline`,button:`${S.B}-action-share-button`,viewAudienceButton:`${S.B}-action-share-view-audience-button`},Ze=(0,r.ZP)(c.Z,{name:S.B,slot:"ActionShareRoot"})((()=>({})));const Ce=function(e){const{className:t=null,feedObjectId:n=null,feedObject:r=null,feedObjectType:l=I.q.POST,withAction:i=!0,withAudience:u=!0,inlineAction:d=!1}=e,p=(0,a._T)(e,["className","feedObjectId","feedObject","feedObjectType","withAction","withAudience","inlineAction"]),f=(0,ae.Z)(),h=(0,oe.Z)(f.breakpoints.down("md")),{obj:g,setObj:b}=(0,P.Z)({id:n,feedObject:r,feedObjectType:l}),[v,E]=(0,o.useState)(!1),[y,Z]=(0,o.useState)(!1),[j,w]=(0,o.useState)(null),[S,N]=(0,o.useState)(!1),[_,k]=o.useState(null),x=(0,pe.RM)(),D=(0,A.sy)(),R=(0,o.useContext)(fe.Tt),L=he.MX in R.preferences&&R.preferences[he.MX].value,F=he.Yy in R.preferences&&R.preferences[he.Yy].value,U=he.KD in R.preferences&&R.preferences[he.KD].value,V=(0,ge.LD)(),{enqueueSnackbar:W}=(0,de.Ds)(),Y=("undefined"!=typeof location&&location.origin?location.origin:"")+D.url((0,$.Ig)(g),(0,$.p3)(g)),X=(0,T.Z)(),Q=e=>{k(e.currentTarget)},ee=()=>{k(null)};function te(){N(!S)}function Ce(){E(!1),Z(!1)}function je(){b(Object.assign({},g,{share_count:g.share_count+1})),Ce()}const we=(0,o.useMemo)((()=>()=>{let e=g.id;const t=g.medias.filter((e=>e.type===ue.TC));return t.length&&(e=t[0].embed.metadata.id),G.Z.request({url:q.Z.ComposerMediaCreate.url(),method:q.Z.ComposerMediaCreate.method,data:{type:ue.TC,shared_object:e}}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))}),[g]);function Se(){return o.createElement(c.Z,null,o.createElement(se.Z,{onClick:()=>{return e=!1,void(V.user?be.IT(V.user)?W(o.createElement(z.Z,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3}):(E(!0),we().then((t=>{w(Object.assign({medias:[t]},e?{categories:g.categories}:{})),Z(!0)})).catch((e=>{K.Y.error(J.J,e),E(!1)}))):x.settings.handleAnonymousAction());var e}},o.createElement(ce.Z,null,o.createElement(M.Z,{fontSize:"small"},"redo")),o.createElement(re.Z,{primary:o.createElement(z.Z,{id:"ui.feedObject.share.shareNow",defaultMessage:"ui.feedObject.share.shareNow"})})),L&&o.createElement(se.Z,{onClick:()=>window.open(ve.jm+Y,"facebook-share-dialog","width=626,height=436")},o.createElement(ce.Z,null,o.createElement(M.Z,{fontSize:"small"},"facebook")),o.createElement(re.Z,{primary:o.createElement(z.Z,{id:"ui.feedObject.share.facebook",defaultMessage:"ui.feedObject.share.facebook"})})),F&&o.createElement(se.Z,{onClick:()=>window.open(ve.np+Y,"twitter-share-dialog","width=626,height=436")},o.createElement(ce.Z,null,o.createElement(M.Z,{fontSize:"small"},"twitter")),o.createElement(re.Z,{primary:o.createElement(z.Z,{id:"ui.feedObject.share.twitter",defaultMessage:"ui.feedObject.share.twitter"})})),U&&o.createElement(se.Z,{onClick:()=>window.open(ve.nm+Y,"linkedin-share-dialog","width=626,height=436")},o.createElement(ce.Z,null,o.createElement(M.Z,{fontSize:"small"},"linkedin")),o.createElement(re.Z,{primary:o.createElement(z.Z,{id:"ui.feedObject.share.linkedin",defaultMessage:"ui.feedObject.share.linkedin"})})),o.createElement(se.Z,null,o.createElement(ce.Z,null,o.createElement(M.Z,{fontSize:"small"},"link")),o.createElement(re.Z,{primary:o.createElement(z.Z,{id:"ui.feedObject.share.permanentLink",defaultMessage:"ui.feedObject.share.permanentLink"}),onClick:()=>{(0,me.TE)(Y).then((()=>{W(o.createElement(z.Z,{id:"ui.common.permanentLinkCopied",defaultMessage:"ui.common.permanentLinkCopied"}),{variant:"success",autoHideDuration:3e3})}))}})))}return o.createElement(Ze,Object.assign({className:C()(Oe.root,t,{[Oe.inline]:d})},p),function(){const e=g.share_count;let t;return u&&(t=g?o.createElement(o.Fragment,null,o.createElement(s.Z,{variant:"text",size:"small",onClick:te,disabled:e<1,classes:{root:Oe.viewAudienceButton}},`${X.formatMessage(ye.shares,{total:e})}`),S&&e>0&&o.createElement(ne,{feedObject:g,feedObjectType:g.type,open:S,onClose:te})):o.createElement(s.Z,{variant:"text",size:"small",disabled:!0,color:"inherit"},o.createElement(B.Z,{animation:"wave",height:18,width:50}))),t}(),o.createElement(o.Fragment,null,i&&o.createElement(o.Fragment,null,!d&&u&&o.createElement(O.Z,{className:Oe.divider}),o.createElement(m.Z,{title:`${X.formatMessage(ye.share)}`},o.createElement(H.Z,{loading:v,onClick:Q,className:Oe.button},o.createElement(M.Z,null,"share"))),o.createElement(o.Fragment,null,h?o.createElement(ie.Z,{open:Boolean(_),onClick:ee,onClose:ee,onOpen:Q,anchor:"bottom",disableSwipeToOpen:!0},Se()):o.createElement(le.Z,{anchorEl:_,open:Boolean(_),onClose:ee,onClick:ee,slotProps:{paper:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"}},Se())),y&&o.createElement(Ee.Z,{open:y,defaultValue:j,onClose:Ce,onSuccess:je,maxWidth:"sm",fullWidth:!0}))))},je={root:`${S.B}-actions-root`,action:`${S.B}-actions-action`},we=(0,r.ZP)(y.ZP,{name:S.B,slot:"ActionsRoot"})((()=>({})));const Se=function(e){const{className:t,feedObject:n,feedObjectId:a=(null==n?void 0:n.id),feedObjectType:r=(null==n?void 0:n.type),feedObjectTemplate:l=R.r.PREVIEW,hideVoteAction:i=!1,hideShareAction:s=!1,hideCommentAction:c=!1,handleExpandActivities:u,VoteActionProps:d={},CommentActionProps:m={},ShareActionProps:p={}}=e,{obj:f}=(0,P.Z)({id:a,feedObject:n,feedObjectType:r});if(!f)return null;const h=function(){let e=4;return s&&c?e=12:(c||c)&&(e=6),e}();return o.createElement(we,{container:!0,className:C()(je.root,t)},!i&&o.createElement(y.ZP,{item:!0,xs:h,className:je.action},o.createElement(k,Object.assign({feedObjectId:a||f.id,feedObject:f,feedObjectType:r||f.type},d))),!c&&o.createElement(y.ZP,{item:!0,xs:h,className:je.action},o.createElement(V,Object.assign({feedObject:f,feedObjectType:r,feedObjectTemplate:l,onCommentAction:u},m))),!s&&o.createElement(y.ZP,{item:!0,xs:h,className:je.action},o.createElement(Ce,Object.assign({feedObject:f,feedObjectType:r,id:a},p))))};var Ne=n(66242),_e=n(81458);const ke={root:`${S.B}-poll-object-choices-root`,label:`${S.B}-poll-object-choices-label`,vote:`${S.B}-poll-object-choices-vote`,progress:`${S.B}-poll-object-choices-progress`},xe=(0,r.ZP)(Ne.Z,{name:S.B,slot:"PollObjectChoicesRoot"})((()=>({})));function Te(e){var{className:t}=e,n=(0,a._T)(e,["className"]);return o.createElement(c.Z,{className:t},o.createElement(_e.Z,Object.assign({variant:"determinate"},n)),o.createElement(i.Z,{variant:"body2",color:"text.secondary"},`${Math.round(n.value)}%`))}const Me=function(e){const{className:t=null,choiceObj:n=null,feedObject:r=null,vote:l=null,votes:s=null,isVoting:c=null,votable:u=null}=e,d=(0,a._T)(e,["className","choiceObj","feedObject","vote","votes","isVoting","votable"]),m=!r,p=(0,pe.RM)(),f=(0,ge.LD)();return o.createElement(xe,Object.assign({className:C()(ke.root,t)},d),o.createElement(i.Z,{className:ke.label},n.choice),o.createElement(Te,{className:ke.progress,value:(h=n.vote_count,g=s,0===g?0:100*h/g)}),o.createElement(H.Z,{loading:c===n.id,variant:n.voted?"contained":"outlined",size:"small",disabled:m||null!==c||u,className:ke.vote,onClick:()=>{f.user?l(n):p.settings.handleAnonymousAction()}},n.voted?o.createElement(M.Z,null,"check"):o.createElement(z.Z,{id:"ui.feedObject.poll.choice.vote",defaultMessage:"ui.feedObject.poll.choice.vote"})));var h,g},Pe=(0,x.vU)({showPoll:{id:"ui.feedObject.poll.showPoll",defaultMessage:"ui.feedObject.poll.showPoll"},hidePoll:{id:"ui.feedObject.poll.hidePoll",defaultMessage:"ui.feedObject.poll.hidePoll"},expDate:{id:"ui.feedObject.poll.expDate",defaultMessage:"ui.feedObject.poll.expDate"},voters:{id:"ui.feedObject.poll.voters",defaultMessage:"ui.feedObject.poll.voters"},votes:{id:"ui.feedObject.poll.votes",defaultMessage:"ui.feedObject.poll.votes"}}),Ae={root:`${S.B}-poll-object-root`,voters:`${S.B}-poll-object-voters`,votes:`${S.B}-poll-object-votes`,toggleButton:`${S.B}-poll-object-toggle-button`,title:`${S.B}-poll-object-title`,expiration:`${S.B}-poll-object-expiration`,closed:`${S.B}-poll-object-closed`,expandIcon:`${S.B}-poll-object-expand-icon`,collapsedIcon:`${S.B}-poll-object-collapsed-icon`},De=(0,r.ZP)(Ne.Z,{name:S.B,slot:"PollObjectRoot"})((()=>({})));const Ie=function(e){const{className:t,feedObject:n,pollObject:r,disabled:c,visible:d=!0,onChange:m,onToggleVisibility:p}=e,f=(0,a._T)(e,["className","feedObject","pollObject","disabled","visible","onChange","onToggleVisibility"]),g=(0,T.Z)(),[b,v]=(0,o.useState)(r),[E,y]=(0,o.useState)(function(){const e=r.choices;let t=0;for(let n=0;n<e.length;n++)t+=e[n].vote_count;return t||0}()),[O,Z]=(0,o.useState)(r.choices),[j,w]=(0,o.useState)(null),[S,N]=(0,o.useState)(!d),_=r.multiple_choices,k=r.closed;function x(e){w(e.id),G.Z.request({url:q.Z.PollVote.url({id:n.id,type:n.type}),method:q.Z.PollVote.method,data:{choice:e.id}}).then((t=>{var n;e.voted?(n=e.id,Z((e=>e.map((e=>Object.assign({},e,{voted:e.id!==n&&e.voted,vote_count:e.id===n&&e.vote_count>0?e.vote_count-1:e.vote_count}))))),y((e=>e-1))):(e=>{_?(Z((t=>t.map((t=>Object.assign({},t,{voted:t.id===e||t.voted,vote_count:t.id===e?t.vote_count+1:t.vote_count}))))),y((e=>e+1))):Z((t=>{const n=t.map((t=>Object.assign(Object.assign({},t),{voted:t.id===e,vote_count:t.id===e?t.vote_count+1:t.vote_count>0&&t.voted?t.vote_count-1:t.vote_count}))),a=n.reduce(((e,t)=>e+t.vote_count),0);return y(a),n}))})(e.id),w(null)})).catch((e=>{K.Y.error(J.J,e)}))}const P=(0,o.useMemo)((()=>()=>{p&&p(S),N((e=>!e))}),[N,p]);let A=o.createElement(o.Fragment,null);return r&&(A=o.createElement(o.Fragment,null,o.createElement(u.Z,{title:o.createElement(o.Fragment,null,o.createElement(s.Z,{className:Ae.toggleButton,onClick:P,"aria-expanded":S,endIcon:o.createElement(M.Z,{className:C()(Ae.expandIcon,{[Ae.collapsedIcon]:S})},"arrow_upward")},S?g.formatMessage(Pe.showPoll):g.formatMessage(Pe.hidePoll)))}),o.createElement(h.Z,{in:!S,timeout:"auto",unmountOnExit:!0},o.createElement(l.Z,null,o.createElement(i.Z,{variant:"body1",className:Ae.title},b.title),b.expiration_at&&Date.parse(b.expiration_at)>=(new Date).getTime()&&o.createElement(i.Z,{variant:"body2",className:Ae.expiration},`${g.formatMessage(Pe.expDate)}`,`${g.formatDate(Date.parse(b.expiration_at),{year:"numeric",month:"numeric",day:"numeric"})}`),b.closed&&o.createElement(i.Z,{variant:"body2",className:Ae.closed},o.createElement(z.Z,{id:"ui.feedObject.poll.closed",defaultMessage:"ui.feedObject.poll.closed"})),o.createElement(W.Z,null,O.map(((e,t)=>o.createElement(Y.ZP,{key:t},o.createElement(Me,{elevation:0,choiceObj:e,feedObject:c?null:n,votes:E,vote:x,isVoting:j,votable:k}))))),_?o.createElement("div",{className:Ae.votes},o.createElement(M.Z,null,"list"),o.createElement(i.Z,null,`${g.formatMessage(Pe.votes,{total:E})}`)):o.createElement("div",{className:Ae.voters},o.createElement(M.Z,null,"people_alt"),o.createElement(i.Z,null,`${g.formatMessage(Pe.voters,{total:E})}`)))))),(0,o.useEffect)((()=>{Z(r.choices)}),[r.choices]),o.createElement(De,Object.assign({className:C()(Ae.root,t)},f),A)};var Re=n(59219),$e=n(74482),Be=n(69721),Le=n(22319);const Fe={LOADING_NEXT:"_loading_next",LOADING_PREVIOUS:"_loading_previous",DATA_NEXT_LOADED:"_data_next_loaded",DATA_PREVIOUS_LOADED:"_data_previous_loaded",DATA_RELOAD:"_data_reload",DATA_RELOADED:"_data_reloaded"};function Ue(e,t){switch(t.type){case Fe.LOADING_NEXT:return Object.assign(Object.assign({},e),{isLoadingNext:!0,isLoadingPrevious:!1});case Fe.LOADING_PREVIOUS:return Object.assign(Object.assign({},e),{isLoadingNext:!1,isLoadingPrevious:!0});case Fe.DATA_NEXT_LOADED:return Object.assign(Object.assign(Object.assign(Object.assign({},e),{page:t.payload.currentPage,contributors:t.payload.contributors,isLoadingNext:!1,componentLoaded:!0,next:t.payload.next}),t.payload.previous?{previous:t.payload.previous}:{}),t.payload.total?{total:t.payload.total}:{});case Fe.DATA_PREVIOUS_LOADED:return Object.assign(Object.assign({},e),{page:t.payload.currentPage,contributors:t.payload.contributors,isLoadingPrevious:!1,previous:t.payload.previous});case Fe.DATA_RELOAD:return Object.assign(Object.assign({},e),{next:t.payload.next,contributors:[],total:0,previous:null,reload:!0});case Fe.DATA_RELOADED:return Object.assign(Object.assign({},e),{componentLoaded:!1,reload:!1});default:throw new Error(`Unhandled type: ${t.type}`)}}function Ve(e){const{id:t,feedObject:n,feedObjectType:a,offset:r=0,pageSize:l=5,onChangePage:i,cacheStrategy:s=Re.n2.CACHE_FIRST}=e,c=(0,Le.Z)(),{obj:u,setObj:d}=(0,P.Z)({id:t,feedObject:n,feedObjectType:a}),m=u?u.id:null,p=()=>{const e=r?`&offset=${r}`:"",n=u?u.id:t,o=u?u.type:a;return`${q.Z.FeedObjectContributorsList.url({type:o,id:n})}?limit=${l}${e}`},[f,h]=(0,o.useReducer)(Ue,{},(()=>function(e){const t=e.obj?(0,Be.t9)(e.obj.id,e.obj.type,e.next):null;let n={componentLoaded:!1,contributors:[],total:0,next:e.next,previous:null,isLoadingNext:!1,isLoadingPrevious:!1,page:e.offset/e.pageSize+1,reload:!1};if(t&&Re.ZP.hasKey(t)&&e.cacheStrategy!==Re.n2.NETWORK_ONLY){const e=Re.ZP.get(t);return Object.assign(Object.assign({},n),{total:e.count,next:e.next,previous:e.previous,contributors:e.results})}return n}({obj:u,offset:r,pageSize:l,next:p(),cacheStrategy:s}))),g=e=>{const t=new URLSearchParams(e),n=Object.fromEntries(t.entries());return(n.offset?parseInt(n.offset):0)/l+1},b=(e,t)=>v(e,!1).then((e=>{let n,a=g(f.next);if(t){n=f.contributors.slice(0,f.contributors.length-e.results.length).concat(e.results)}else{let t=f.contributors.slice(e.results.length,f.contributors.length);n=e.results.concat(t)}c.current&&h({type:t?Fe.DATA_NEXT_LOADED:Fe.DATA_PREVIOUS_LOADED,payload:Object.assign(Object.assign({page:a,contributors:n},t?{next:e.next}:{previous:e.previous}),{total:e.count})})})),v=(e,t=!0)=>{const n=(0,Be.t9)(u.id,u.type,e);return t&&Re.ZP.hasKey(n)&&s!==Re.n2.NETWORK_ONLY?Promise.resolve(Re.ZP.get(n)):G.Z.request({url:e,method:q.Z.Comments.method}).then((e=>e.status>=300?Promise.reject(e):(Re.ZP.set(n,e.data),Promise.resolve(e.data))))};function E(){u&&f.next&&!f.isLoadingNext&&(h({type:Fe.LOADING_NEXT}),v(f.next).then((e=>{if(c.current){let t=g(f.next);h({type:Fe.DATA_NEXT_LOADED,payload:Object.assign({page:t,contributors:[...f.contributors,...e.results],next:e.next,total:e.count,componentLoaded:!0},r&&0===f.contributors.length?{previous:e.previous}:{})}),i&&i(t)}})).catch((e=>{K.Y.error($e.h,e)})).then((()=>{c.current&&s===Re.n2.STALE_WHILE_REVALIDATE&&b(f.next,!0)})))}return(0,o.useEffect)((()=>{c.current&&f.componentLoaded&&Boolean(u)&&!f.reload&&h({type:Fe.DATA_RELOAD,payload:{next:p()}})}),[m,l,r,c]),(0,o.useEffect)((()=>{c.current&&f.componentLoaded&&f.reload&&!f.isLoadingNext&&!f.isLoadingPrevious&&(h({type:Fe.DATA_RELOADED}),E())}),[f.reload,c]),Object.assign(Object.assign({feedObject:u,setFeedObject:d},f),{pageSize:l,getNextPage:E,getPreviousPage:function(){u&&f.previous&&!f.isLoadingPrevious&&(h({type:Fe.LOADING_PREVIOUS}),v(f.previous).then((e=>{if(c.current){let t=g(f.previous);h({type:Fe.DATA_PREVIOUS_LOADED,payload:{page:t,contributors:[...e.results,...f.contributors],previous:e.previous}}),i&&i(t)}})).catch((e=>{K.Y.error($e.h,e)})).then((()=>{s===Re.n2.STALE_WHILE_REVALIDATE&&b(f.next,!1)})))}})}var ze=n(51107),He=n(59107);const We={root:`${S.B}-contributors-skeleton-root`,btnParticipants:`${S.B}-btn-participants`},Ye=(0,r.ZP)(c.Z,{name:S.B,slot:"ContributorsSkeletonRoot"})((()=>({})));function Xe(e){const{className:t=null,AvatarGroupSkeletonProps:n={}}=e,r=(0,a._T)(e,["className","AvatarGroupSkeletonProps"]);return o.createElement(Ye,Object.assign({className:C()(We.root,t)},r),o.createElement(s.Z,{variant:"text",disabled:!0,classes:{root:We.btnParticipants}},o.createElement(z.Z,{id:"ui.feedObject.contributors.participants",defaultMessage:"ui.feedObject.contributors.participants"}),":",o.createElement(He.Z,Object.assign({},e.AvatarGroupSkeletonProps))))}const qe={root:`${S.B}-contributors-root`,avatarGroup:`${S.B}-contributors-avatarGroup`,btnParticipants:`${S.B}-contributors-btn-participants`},Ge=(0,r.ZP)(c.Z,{name:S.B,slot:"ContributorsRoot"})((()=>({})));const Ke=function(e){const{className:t=null,feedObjectId:n=null,feedObject:r=null,feedObjectType:l=null,ContributorsSkeletonProps:u={},cacheStrategy:m=Re.n2.CACHE_FIRST}=e,p=(0,a._T)(e,["className","feedObjectId","feedObject","feedObjectType","ContributorsSkeletonProps","cacheStrategy"]),f=Ve({id:n,feedObject:r,feedObjectType:l,pageSize:10,cacheStrategy:m}),[h,g]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{f.feedObject&&f.getNextPage()}),[f.feedObject]),f.feedObject?o.createElement(Ge,Object.assign({className:C()(qe.root,t)},p),o.createElement(c.Z,null,f.isLoadingNext&&!h?o.createElement(Xe,Object.assign({},u)):o.createElement(o.Fragment,null,f.contributors.length>0?o.createElement(o.Fragment,null,o.createElement(s.Z,{variant:"text",onClick:()=>g(!0),classes:{root:qe.btnParticipants},color:"inherit"},o.createElement(z.Z,{id:"ui.feedObject.contributors.participants",defaultMessage:"ui.feedObject.contributors.participants"}),":",o.createElement(ze.Z,Object.assign({},p),f.contributors.map(((e,t)=>o.createElement(d.Z,{alt:e.username,src:e.avatar,key:t}))),[...Array(Math.max(f.total-f.contributors.length,0))].map(((e,t)=>o.createElement(d.Z,{key:t}))))),h&&o.createElement(Q.Z,{title:o.createElement(z.Z,{defaultMessage:"ui.feedObject.contributors.title",id:"ui.feedObject.contributors.title",values:{total:f.total}}),onClose:()=>g(!1),open:h},f.isLoadingNext?o.createElement(ee.Z,{size:50}):o.createElement(X.Z,{dataLength:f.contributors.length,next:f.getNextPage(),hasMoreNext:Boolean(f.next),loaderNext:o.createElement(ee.Z,{size:30}),height:400,endMessage:o.createElement(i.Z,{variant:"body2",align:"center",fontWeight:"bold"},o.createElement(z.Z,{id:"ui.feedObject.contributors.noOtherContributors",defaultMessage:"ui.feedObject.contributors.noOtherContributors"}))},o.createElement(W.Z,null,f.contributors.map(((e,t)=>o.createElement(Y.ZP,{key:t},o.createElement(te.Z,{elevation:0,user:e,key:e.id,sx:{m:0}})))))))):null))):null};var Je=n(63219),Qe=n(52180),et=n(56581);const tt={root:`${S.B}-action-follow-root`,button:`${S.B}-action-follow-button`,iconized:`${S.B}-action-follow-iconized`,followed:`${S.B}-action-follow-followed`},nt=(0,r.ZP)(c.Z,{name:S.B,slot:"ActionFollowRoot"})((()=>({})));const at=function(e){const{className:t=null,feedObjectId:n=null,feedObject:r=null,feedObjectType:l=I.q.POST,handleFollow:i,iconized:s=!0}=e,c=(0,a._T)(e,["className","feedObjectId","feedObject","feedObjectType","handleFollow","iconized"]),{obj:u,setObj:d}=(0,P.Z)({id:n,feedObject:r,feedObjectType:l}),[p,f]=(0,o.useState)(!1),h=(0,pe.RM)(),g=(0,ge.LD)(),{enqueueSnackbar:b}=(0,de.Ds)(),v=(0,o.useMemo)((()=>()=>G.Z.request({url:q.Z.FollowContribution.url({type:u.type,id:u.id}),method:q.Z.FollowContribution.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[u]);function E(){g.user?(f(!0),v().then((e=>{const t=!u.followed;d(Object.assign({},u,{followed:t})),f(!1),i&&i(t)})).catch((e=>{K.Y.error(J.J,e),(0,et.w)(e,g.managers.blockedUsers.isBlocked(u.author),b)||b(o.createElement(z.Z,{id:"ui.common.error.action",defaultMessage:"ui.common.error.action"}),{variant:"error",autoHideDuration:3e3}),f(!1)}))):h.settings.handleAnonymousAction()}return o.createElement(nt,Object.assign({className:C()(tt.root,t)},c),function(){let e=o.createElement(z.Z,{id:"ui.feedObject.follow",defaultMessage:"ui.feedObject.follow"});return u.followed&&(e=o.createElement(z.Z,{id:"ui.feedObject.unfollow",defaultMessage:"ui.feedObject.unfollow"})),o.createElement(o.Fragment,null,g.user&&u.author.id!==g.user.id&&!u.deleted&&o.createElement(m.Z,{title:e},o.createElement(H.Z,{className:C()(tt.button,{[tt.iconized]:s,[tt.followed]:u.followed}),loading:p,variant:s?"text":"contained",disabled:p,onClick:E},s?o.createElement(M.Z,null,u.followed?"bookmark_added":"bookmark_border"):e)))}())};var ot=n(63902),rt=n(29628),lt=n(115),it=n(20166),st=n(80317),ct=n(98619);const ut=(0,x.vU)({relevantActivities:{id:"ui.feedObject.activitiesMenu.relevantActivities",defaultMessage:"ui.feedObject.activitiesMenu.relevantActivities"},recentComments:{id:"ui.feedObject.activitiesMenu.recentComments",defaultMessage:"ui.feedObject.activitiesMenu.recentComments"},firstComments:{id:"ui.feedObject.activitiesMenu.firstComments",defaultMessage:"ui.feedObject.activitiesMenu.firstComments"},followedComments:{id:"ui.feedObject.activitiesMenu.followedComments",defaultMessage:"ui.feedObject.activitiesMenu.followedComments"},connectionsComments:{id:"ui.feedObject.activitiesMenu.connectionsComments",defaultMessage:"ui.feedObject.activitiesMenu.connectionsComments"}}),dt={root:`${S.B}-activities-menu-root`,selector:`${S.B}-activities-menu-selector`},mt=(0,r.ZP)(c.Z,{name:S.B,slot:"ActivitiesMenuRoot"})((()=>({})));const pt=function(e){const{className:t=null,selectedActivities:n=null,hideRelevantActivitiesItem:r=!1,onChange:l=null}=e,i=(0,a._T)(e,["className","selectedActivities","hideRelevantActivitiesItem","onChange"]),u=(0,o.useContext)(fe.Tt),d=(0,ge.LD)(),p=(0,ae.Z)(),f=(0,oe.Z)(p.breakpoints.down("md")),h=u.preferences[he.$0].value,[g,b]=o.useState(null),v=Boolean(g),E=(0,T.Z)(),y=e=>{b(e.currentTarget)},O=()=>{b(null)},Z=e=>()=>{l&&l(e)};function j(){return o.createElement(c.Z,null,!r&&o.createElement(ct.Z,{selected:n===R.F.RELEVANCE_ACTIVITIES,onClick:Z(R.F.RELEVANCE_ACTIVITIES)},o.createElement(re.Z,{primary:o.createElement("b",null,E.formatMessage(ut.relevantActivities)),secondary:o.createElement(z.Z,{id:"ui.feedObject.activitiesMenu.relevantActivitiesDesc",defaultMessage:"ui.feedObject.activitiesMenu.relevantActivitiesDesc"})})),o.createElement(ct.Z,{selected:n===R.F.RECENT_COMMENTS,onClick:Z(R.F.RECENT_COMMENTS)},o.createElement(re.Z,{primary:o.createElement("b",null,E.formatMessage(ut.recentComments)),secondary:o.createElement(z.Z,{id:"ui.feedObject.activitiesMenu.recentCommentsDesc",defaultMessage:"ui.feedObject.activitiesMenu.recentCommentsDesc"})})),o.createElement(ct.Z,{selected:n===R.F.FIRST_COMMENTS,onClick:Z(R.F.FIRST_COMMENTS)},o.createElement(re.Z,{primary:o.createElement("b",null,E.formatMessage(ut.firstComments)),secondary:o.createElement(z.Z,{id:"ui.feedObject.activitiesMenu.firstCommentsDesc",defaultMessage:"ui.feedObject.activitiesMenu.firstCommentsDesc"})})),d.user&&o.createElement(ct.Z,{selected:n===R.F.CONNECTIONS_COMMENTS,onClick:Z(R.F.CONNECTIONS_COMMENTS)},o.createElement(re.Z,{primary:o.createElement("b",null,h?E.formatMessage(ut.followedComments):E.formatMessage(ut.connectionsComments)),secondary:h?o.createElement(z.Z,{id:"ui.feedObject.activitiesMenu.followedCommentsDesc",defaultMessage:"ui.feedObject.activitiesMenu.followedCommentsDesc"}):o.createElement(z.Z,{id:"ui.feedObject.activitiesMenu.connectionsCommentsDesc",defaultMessage:"ui.feedObject.activitiesMenu.connectionsCommentsDesc"})})))}return o.createElement(mt,Object.assign({className:C()(dt.root,t)},i),o.createElement(c.Z,{className:dt.selector},o.createElement(m.Z,{title:o.createElement(z.Z,{id:"ui.feedObject.activitiesMenu.tooltipTitle",defaultMessage:"ui.feedObject.activitiesMenu.tooltipTitle"})},o.createElement(s.Z,{variant:"text",size:"small",onClick:y},n===R.F.CONNECTIONS_COMMENTS&&h?E.formatMessage(ut.followedComments):E.formatMessage(ut[`${(0,me.eV)(n)}`]),"\xa0 ",o.createElement(M.Z,null,"expand_more")))),f?o.createElement(ie.Z,{open:v,onClose:O,onOpen:y,anchor:"bottom",disableSwipeToOpen:!0},j()):o.createElement(le.Z,{anchorEl:g,open:v,onClose:O,onClick:O,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"}},j()))};var ft,ht;!function(e){e.HOME="home",e.EXPLORE="explore"}(ft||(ft={})),function(e){e.COMMENT="comment",e.VOTE="vote",e.POLLVOTE="pollvote",e.FOLLOW="follow"}(ht||(ht={}));var gt=n(12132),bt=n(68585);const vt=(0,x.vU)({comment:{id:"ui.feedObject.relevantActivities.comment",defaultMessage:"ui.feedObject.relevantActivities.comment"}}),Et={root:`${S.B}-activity-comment-root`,avatar:`${S.B}-activity-comment-avatar`,username:`${S.B}-activity-comment-username`,showMoreContent:`${S.B}-activity-comment-show-more-content`},yt=(0,r.ZP)(lt.Z,{name:S.B,slot:"ActivityCommentRoot"})((()=>({})));const Ot=function(e){const{className:t=null,activityObject:n=null}=e,r=(0,a._T)(e,["className","activityObject"]),l=(0,A.sy)(),[i,s]=(0,o.useState)(!1),c=(0,T.Z)();return o.createElement(o.Fragment,null,o.createElement(yt,Object.assign({},r,{className:C()(Et.root,t),image:o.createElement(D.Z,Object.assign({},!n.author.deleted&&{to:l.url(gt.USER_PROFILE_ROUTE_NAME,n.author)},{onClick:n.author.deleted?()=>s(!0):null}),o.createElement(d.Z,{alt:n.author.username,variant:"circular",src:n.author.avatar,className:Et.avatar})),primary:o.createElement(o.Fragment,null,c.formatMessage(vt.comment,{username:o.createElement(D.Z,Object.assign({},!n.author.deleted&&{to:l.url(gt.USER_PROFILE_ROUTE_NAME,n.author)},{onClick:n.author.deleted?()=>s(!0):null,className:Et.username}),n.author.username),link:(...e)=>o.createElement(D.Z,{to:l.url(gt.COMMENT_ROUTE_NAME,(0,$.p3)(n.comment))},e)})),secondary:o.createElement(b.Z,{date:n.active_at})})),i&&o.createElement(bt.Z,{open:i,handleClose:()=>s(!1)}))},Zt=(0,x.vU)({vote:{id:"ui.feedObject.relevantActivities.vote",defaultMessage:"ui.feedObject.relevantActivities.vote"}}),Ct={root:`${S.B}-activity-vote-up-root`,avatar:`${S.B}-activity-vote-up-avatar`,username:`${S.B}-activity-vote-up-username`},jt=(0,r.ZP)(lt.Z,{name:S.B,slot:"ActivityVoteUpRoot"})((()=>({})));const wt=function(e){const{className:t=null,activityObject:n=null}=e,r=(0,a._T)(e,["className","activityObject"]),l=(0,A.sy)(),[i,s]=(0,o.useState)(!1),c=(0,T.Z)();return o.createElement(o.Fragment,null,o.createElement(jt,Object.assign({},r,{className:C()(Ct.root,t),image:o.createElement(D.Z,Object.assign({},!n.author.deleted&&{to:l.url(gt.USER_PROFILE_ROUTE_NAME,n.author)},{onClick:n.author.deleted?()=>s(!0):null}),o.createElement(d.Z,{alt:n.author.username,variant:"circular",src:n.author.avatar,className:Ct.avatar})),primary:o.createElement(o.Fragment,null,c.formatMessage(Zt.vote,{username:o.createElement(D.Z,Object.assign({},!n.author.deleted&&{to:l.url(gt.USER_PROFILE_ROUTE_NAME,n.author)},{className:Ct.username,onClick:n.author.deleted?()=>s(!0):null}),n.author.username)})),secondary:o.createElement(b.Z,{date:n.active_at})})),i&&o.createElement(bt.Z,{open:i,handleClose:()=>s(!1)}))},St=(0,x.vU)({follow:{id:"ui.feedObject.relevantActivities.follow",defaultMessage:"ui.feedObject.relevantActivities.follow"}}),Nt={root:`${S.B}-activity-follow-root`,avatar:`${S.B}-activity-follow-avatar`,username:`${S.B}-activity-follow-username`},_t=(0,r.ZP)(lt.Z,{name:S.B,slot:"ActivityFollowRoot"})((()=>({})));const kt=function(e){const t=(0,rt.Z)({props:e,name:S.B}),{className:n=null,activityObject:r=null}=t,l=(0,a._T)(t,["className","activityObject"]),i=(0,A.sy)(),[s,c]=(0,o.useState)(!1),u=(0,T.Z)();return o.createElement(o.Fragment,null,o.createElement(_t,Object.assign({},l,{className:C()(Nt.root,n),image:o.createElement(D.Z,Object.assign({},!r.author.deleted&&{to:i.url(gt.USER_PROFILE_ROUTE_NAME,r.author)},{onClick:r.author.deleted?()=>c(!0):null}),o.createElement(d.Z,{alt:r.author.username,variant:"circular",src:r.author.avatar,className:Nt.avatar})),primary:o.createElement(o.Fragment,null,u.formatMessage(St.follow,{username:o.createElement(D.Z,Object.assign({},!r.author.deleted&&{to:i.url(gt.USER_PROFILE_ROUTE_NAME,r.author)},{onClick:r.author.deleted?()=>c(!0):null,className:Nt.username}),r.author.username)})),secondary:o.createElement(b.Z,{date:r.active_at})})),s&&o.createElement(bt.Z,{open:s,handleClose:()=>c(!1)}))},xt=(0,x.vU)({pollVote:{id:"ui.feedObject.relevantActivities.pollVote",defaultMessage:"ui.feedObject.relevantActivities.pollVote"}}),Tt={root:`${S.B}-activity-poll-vote-root`,avatar:`${S.B}-activity-poll-vote-avatar`,username:`${S.B}-activity-poll-vote-username`},Mt=(0,r.ZP)(lt.Z,{name:S.B,slot:"ActivityPollVoteRoot"})((()=>({})));const Pt=function(e){const{className:t=null,activityObject:n=null}=e,r=(0,a._T)(e,["className","activityObject"]),l=(0,A.sy)(),[i,s]=(0,o.useState)(!1),c=(0,T.Z)();return o.createElement(o.Fragment,null,o.createElement(Mt,Object.assign({},r,{className:C()(Tt.root,t),image:o.createElement(D.Z,Object.assign({},!n.author.deleted&&{to:l.url(gt.USER_PROFILE_ROUTE_NAME,n.author)},{onClick:n.author.deleted?()=>s(!0):null}),o.createElement(d.Z,{alt:n.author.username,variant:"circular",src:n.author.avatar,className:Tt.avatar})),primary:o.createElement(o.Fragment,null,c.formatMessage(xt.pollVote,{username:o.createElement(D.Z,Object.assign({},!n.author.deleted&&{to:l.url(gt.USER_PROFILE_ROUTE_NAME,n.author)},{onClick:n.author.deleted?()=>s(!0):null,className:Tt.username}),n.author.username)})),secondary:o.createElement(b.Z,{date:n.active_at})})),i&&o.createElement(bt.Z,{open:i,handleClose:()=>s(!1)}))},At={root:`${S.B}-relevant-activities-root`,activity:`${S.B}-relevant-activities-activity`},Dt=(0,r.ZP)(c.Z,{name:S.B,slot:"RelevantActivitiesRoot"})((()=>({})));const It=function(e){const{className:t=null,activities:n=[],showMaxRelevantActivities:r=5}=e,l=(0,a._T)(e,["className","activities","showMaxRelevantActivities"]),[s,c]=(0,o.useState)(!1);function u(e,t){return e.type===ht.COMMENT?o.createElement(Ot,{activityObject:e,key:t,elevation:0}):e.type===ht.FOLLOW?o.createElement(kt,{activityObject:e,key:t,elevation:0}):e.type===ht.VOTE?o.createElement(wt,{activityObject:e,key:t,elevation:0}):e.type===ht.POLLVOTE?o.createElement(Pt,{activityObject:e,key:t,elevation:0}):null}return o.createElement(Dt,Object.assign({className:C()(At.root,t)},l),n.length<=0?o.createElement(i.Z,{variant:"body2"},o.createElement(z.Z,{id:"ui.feedObject.relevantActivities.noResults",defaultMessage:"ui.feedObject.relevantActivities.noResults"})):o.createElement(W.Z,null,n.slice(0,r).map(((e,t)=>o.createElement(Y.ZP,{className:At.activity,key:t},u(e,t)))),!s&&n.length>r&&o.createElement(ct.Z,{onClick:()=>c((e=>!e))},o.createElement(re.Z,{primary:o.createElement(z.Z,{id:"ui.feedObject.relevantActivities.showOthers",defaultMessage:"ui.feedObject.relevantActivities.showOthers"})}),s?o.createElement(M.Z,null,"expand_less"):o.createElement(M.Z,null,"expand_more")),o.createElement(h.Z,{in:s,timeout:"auto",unmountOnExit:!0},n.slice(r).map(((e,t)=>o.createElement(Y.ZP,{className:At.activity,key:t},u(e,t)))))))};var Rt=n(47189),$t=n(97650);const Bt={root:`${S.B}-activities-root`,activities:`${S.B}-activities`},Lt=(0,r.ZP)(c.Z,{name:S.B,slot:"ActivitiesRoot"})((()=>({})));const Ft=function(e){const{id:t=`feed_object_activities_${e.feedObjectId?e.feedObjectId:e.feedObject?e.feedObject.id:""}`,className:n,feedObjectId:r,feedObject:l,feedObjectType:i=I.q.POST,cacheStrategy:s=Re.n2.CACHE_FIRST,CommentsObjectProps:u={},CommentComponentProps:d={variant:"outlined"},feedObjectActivities:m=[],comments:p=[],onSetSelectedActivities:f,activitiesType:h=R.F.RECENT_COMMENTS}=e,g=(0,a._T)(e,["id","className","feedObjectId","feedObject","feedObjectType","cacheStrategy","CommentsObjectProps","CommentComponentProps","feedObjectActivities","comments","onSetSelectedActivities","activitiesType"]),{ref:b,inView:v}=(0,$t.YD)({triggerOnce:!0}),[E,y]=(0,o.useState)(h),O=(0,Rt.Z)({id:r,feedObject:l,feedObjectType:i,cacheStrategy:s,pageSize:2,orderBy:E===R.F.CONNECTIONS_COMMENTS?it.p.CONNECTION_DESC:E===R.F.FIRST_COMMENTS?it.p.ADDED_AT_ASC:it.p.ADDED_AT_DESC}),Z=O.feedObject?O.feedObject.id:null,j=Math.min(3,O.feedObject?O.feedObject.comment_count:2),w=m&&m.length>0;function S(){O.getNextPage()}return(0,o.useEffect)((()=>{y(h)}),[h]),(0,o.useEffect)((()=>{Z&&!O.comments.length&&v&&O.getNextPage()}),[Z,v]),o.createElement(Lt,Object.assign({id:t,className:C()(Bt.root,n)},g,{ref:b}),O.feedObject&&(Boolean(O.feedObject.comment_count)||m&&m.length>0||p.length>0||l&&l.comment_count>0)?o.createElement(c.Z,Object.assign({className:Bt.activities},w?{}:{style:{minHeight:80*Math.min(j,l.comment_count)+"px"}}),o.createElement(pt,{selectedActivities:E,hideRelevantActivitiesItem:!w,onChange:function(e){f(e),y(e)}}),E===R.F.RELEVANCE_ACTIVITIES?o.createElement(It,{activities:m}):o.createElement(o.Fragment,null,(O.feedObject.comment_count>0||p.length>0)&&o.createElement(st.Z,Object.assign({feedObject:O.feedObject,comments:O.comments,startComments:p,next:O.next,isLoadingNext:O.isLoadingNext,handleNext:S,totalLoadedComments:O.comments.length+p.length,totalComments:O.feedObject.comment_count,hideAdvertising:!0},u,{cacheStrategy:s,CommentsObjectSkeletonProps:{count:j},CommentComponentProps:Object.assign(Object.assign(Object.assign(Object.assign({},u.CommentComponentProps?u.CommentComponentProps:{}),{truncateContent:!0}),d),{cacheStrategy:s}),inPlaceLoadMoreContents:!1})))):null)};var Ut=n(80366),Vt=n(68456),zt=n(55218);var Ht=n(22461),Wt=n(70815),Yt=n(26474);const Xt="SCFeedObjectMediaPreview",qt={root:`${Xt}-root`},Gt=(0,r.ZP)(c.Z,{name:Xt,slot:"Root"})((()=>({}))),Kt=e=>{const t=(0,rt.Z)({props:e,name:Xt}),{className:n,medias:r,mediaObjectTypes:l=[Ht.Z,Wt.Z,Yt.Z]}=t,i=(0,a._T)(t,["className","medias","mediaObjectTypes"]),{handleMediaClick:s}={handleMediaClick:e=>{G.Z.request({url:q.Z.MediaClickTracker.url({id:e.id}),method:q.Z.MediaClickTracker.method}).catch((e=>{K.Y.error($e.h,e)}))}};return r.length?o.createElement(Gt,Object.assign({className:C()(n,qt.root)},i),l.map((e=>{const{displayProps:t={}}=e;return o.createElement("div",{key:e.name},o.createElement(e.displayComponent,Object.assign({medias:r},t,{onMediaClick:s})))}))):null},Jt=(0,x.vU)({visibleToAll:{id:"ui.feedObject.visibleToAll",defaultMessage:"ui.feedObject.visibleToAll"}}),Qt={root:`${S.B}-root`,deleted:`${S.B}-deleted`,header:`${S.B}-header`,category:`${S.B}-category`,avatar:`${S.B}-avatar`,username:`${S.B}-username`,activityAt:`${S.B}-activity-at`,tag:`${S.B}-tag`,location:`${S.B}-location`,content:`${S.B}-content`,showMore:`${S.B}-show-more`,error:`${S.B}-error`,titleSection:`${S.B}-title-section`,title:`${S.B}-title`,textSection:`${S.B}-text-section`,text:`${S.B}-text`,snippet:`${S.B}-snippet`,snippetContent:`${S.B}-snippet-content`,mediasSection:`${S.B}-medias-section`,pollsSection:`${S.B}-polls-section`,infoSection:`${S.B}-info-section`,actionsSection:`${S.B}-actions-section`,replyContent:`${S.B}-reply-content`,activitiesSection:`${S.B}-activities-section`,activitiesContent:`${S.B}-activities-content`,followButton:`${S.B}-follow-button`},en=(0,r.ZP)(ot.Z,{name:S.B,slot:"Root"})((()=>({})));const tn=function(e){var t;const n=(0,rt.Z)({props:e,name:S.B}),{id:r=`feed_object_${n.feedObjectId?n.feedObjectId:n.feedObject?n.feedObject.id:""}`,className:y=null,feedObjectId:O=null,feedObject:Z=null,feedObjectType:j=null,feedObjectActivities:w=null,cacheStrategy:N=Re.n2.CACHE_FIRST,markRead:_=!1,template:k=R.r.PREVIEW,hideFollowAction:x=!1,summaryExpanded:B=!1,activitiesExpanded:L=!0,activitiesExpandedType:F,hideParticipantsPreview:U=!1,pollVisible:V=!1,FollowButtonProps:H={},FeedObjectSkeletonProps:W={elevation:0},ActionsProps:Y={},CommentObjectReplyComponent:X=Ut.Z,CommentObjectReplyComponentProps:Q={WidgetProps:{variant:"outlined"}},CommentComponentProps:ee={variant:"outlined"},CommentObjectSkeletonProps:te={elevation:0,WidgetProps:{variant:"outlined"}},ContributionActionsMenuProps:ne={},FeedObjectMediaPreviewProps:ae={},ActivitiesProps:oe={cacheStrategy:N},PollObjectProps:re={elevation:0},ContributorsFeedObjectProps:le={},onReply:ie,onHeightChange:se,onStateChange:ce}=n,ue=(0,a._T)(n,["id","className","feedObjectId","feedObject","feedObjectType","feedObjectActivities","cacheStrategy","markRead","template","hideFollowAction","summaryExpanded","activitiesExpanded","activitiesExpandedType","hideParticipantsPreview","pollVisible","FollowButtonProps","FeedObjectSkeletonProps","ActionsProps","CommentObjectReplyComponent","CommentObjectReplyComponentProps","CommentComponentProps","CommentObjectSkeletonProps","ContributionActionsMenuProps","FeedObjectMediaPreviewProps","ActivitiesProps","PollObjectProps","ContributorsFeedObjectProps","onReply","onHeightChange","onStateChange"]),me=(0,pe.RM)(),fe=(0,A.sy)(),he=(0,ge.LD)(),{enqueueSnackbar:ve}=(0,de.Ds)(),{obj:ye,setObj:Oe,error:Ze}=(0,P.Z)({id:O,feedObject:Z,feedObjectType:j,cacheStrategy:N}),Ce=ye?ye.id:null,[je,we]=(0,o.useState)(!1),Ne=()=>ye&&L&&(ye.comment_count>0||w&&w.length>0),[_e,ke]=(0,o.useState)(!1),[xe,Te]=(0,o.useState)(Ne()),[Me,Pe]=(0,o.useState)([]),[Ae,De]=(0,o.useState)(!1),[$e,Le]=(0,o.useState)(function(){if(F)return F;if(w&&w.length>0)return R.F.RELEVANCE_ACTIVITIES;return R.F.RECENT_COMMENTS}()),[Fe,Ue]=(0,o.useState)(B),Ve=(0,T.Z)(),ze=(0,o.useMemo)((()=>e=>{ce&&e&&ce(e),se&&se()}),[ce,se]),He=e=>{Oe(e),ze()};(0,o.useEffect)((()=>{const e=Ne();Te(e),ze({activitiesExpanded:e,activitiesExpandedType:$e,cacheStrategy:Re.n2.CACHE_FIRST})}),[Ce,$e]);const We=(0,o.useCallback)((e=>{He(Object.assign({},ye,{poll:e}))}),[ye]),Ye=(0,o.useCallback)((e=>{ze({pollVisible:e})}),[V,ze]),Xe=(0,o.useCallback)((()=>{Ue(!Fe),ze({summaryExpanded:!Fe})}),[Fe,ze]),qe=(0,o.useCallback)(((e,t,n)=>{ve(n?o.createElement(z.Z,{id:"ui.feedObject.flagSent",defaultMessage:"ui.feedObject.flagSent"}):o.createElement(z.Z,{id:"ui.feedObject.flagRemoved",defaultMessage:"ui.feedObject.flagRemoved"}),{autoHideDuration:3e3})}),[]),Ge=(0,o.useCallback)((()=>{He(Object.assign({},ye,{deleted:!1}))}),[ye]),tt=(0,o.useCallback)((()=>{He(Object.assign({},ye,{collapsed:!ye.collapsed}))}),[ye]),nt=(0,o.useCallback)((()=>{He(Object.assign({},ye,{deleted:!ye.deleted}))}),[ye]),ot=(0,o.useCallback)((()=>{He(Object.assign({},ye,{suspended:!ye.suspended})),ve(ye.suspended?o.createElement(z.Z,{id:"ui.feedObject.notificationsEnabled",defaultMessage:"ui.feedObject.notificationsEnabled"}):o.createElement(z.Z,{id:"ui.feedObject.notificationsDisabled",defaultMessage:"ui.feedObject.notificationsDisabled"}),{autoHideDuration:3e3})}),[ye]),it=(0,o.useCallback)((()=>{ke((e=>!e))}),[_e]),st=(0,o.useCallback)((e=>{He(e),ke(!1)}),[ye,_e]),ct=(0,o.useCallback)((e=>{He(Object.assign({},ye,{voted:e.voted,vote_count:e.vote_count,reactions_count:e.reactions_count,reaction:e.reaction}))}),[ye]),ut=(0,o.useCallback)((()=>{if(he.user){const e=!xe;Te(e),ze({activitiesExpanded:e})}else me.settings.handleAnonymousAction()}),[xe,he.user,ze,$e]),dt=(0,o.useCallback)((e=>{He(Object.assign(Object.assign({},ye),{followed:e}))}),[ye]),mt=(0,o.useCallback)((()=>{He(Object.assign(Object.assign({},ye),{comment_count:Math.max(ye.comment_count-1,0)}))}),[ye]),pt=(0,o.useCallback)((e=>{Le(e),Pe([]),ze({activitiesExpandedType:e})}),[ye,xe]),ft=(0,o.useMemo)((()=>e=>G.Z.request({url:q.Z.NewComment.url({}),method:q.Z.NewComment.method,data:{[`${ye.type}`]:ye.id,text:e}}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[Ce]),ht=e=>{he.user?be.IT(he.user)?ve(o.createElement(z.Z,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3}):(De(!0),ft(e).then((e=>{const t=e;t.summary_truncated=!1,$e!==R.F.RECENT_COMMENTS?(Pe([]),Le(R.F.RECENT_COMMENTS)):Pe([t,...Me]),De(!1);const n=Object.assign({},ye,{comment_count:ye.comment_count+1});He(n),Re.ZP.deleteKeysWithPrefix(Be.NX(ye.id,ye.type)),ie&&ie(e),ze({activitiesExpanded:xe,activitiesExpandedType:R.F.RECENT_COMMENTS})})).catch((e=>{K.Y.error(J.J,e),(0,et.w)(e,he.managers.blockedUsers.isBlocked(ye.author),ve)||ve(o.createElement(z.Z,{id:"ui.common.error.action",defaultMessage:"ui.common.error.action"}),{variant:"error",autoHideDuration:3e3})}))):me.settings.handleAnonymousAction()},vt=(0,o.useCallback)(((e,t)=>{const n="summary_html"in e?e.summary_html:e.summary,a="summary_truncated"in e?e.summary_truncated:e.html.length>=zt.zo,r=Fe||t===R.r.DETAIL?(0,$.P3)(e.html,fe.url):(0,$.P3)(n,fe.url);return t===R.r.SHARE?o.createElement(o.Fragment,null,o.createElement(D.Z,{to:fe.url((0,$.Ig)(e),(0,$.p3)(e)),className:Qt.text},o.createElement(i.Z,{component:"div",className:Qt.text,variant:"body2",gutterBottom:!0,dangerouslySetInnerHTML:{__html:r}})),!Fe&&a&&o.createElement(s.Z,{size:"small",variant:"text",color:"inherit",className:Qt.showMore,onClick:Xe},o.createElement(z.Z,{id:"ui.feedObject.content.showMore",defaultMessage:"ui.feedObject.content.showMore"}))):t===R.r.DETAIL?o.createElement(i.Z,{component:"div",gutterBottom:!0,className:Qt.text,dangerouslySetInnerHTML:{__html:r}}):o.createElement(i.Z,{component:"div",gutterBottom:!0,className:Qt.text},o.createElement(i.Z,{component:"span",dangerouslySetInnerHTML:{__html:r}}),!Fe&&a&&o.createElement(s.Z,{size:"small",variant:"text",color:"inherit",className:Qt.showMore,onClick:Xe},o.createElement(z.Z,{id:"ui.feedObject.content.showMore",defaultMessage:"ui.feedObject.content.showMore"})))}),[ye,k,Fe]);let Et;return Et=!ye&&Ze||(null==ye?void 0:ye.deleted)&&!he.user&&!be.GJ(he.user)&&!be.vJ(he.user)?o.createElement(l.Z,{className:C()(Qt.error,Qt.content)},o.createElement(z.Z,{id:"ui.feedObject.error",defaultMessage:"ui.feedObject.error"})):k===R.r.PREVIEW||k===R.r.DETAIL||k===R.r.SEARCH?o.createElement(o.Fragment,null,ye?o.createElement(c.Z,{className:C()({[Qt.deleted]:ye&&ye.deleted})},ye.categories.length>0&&o.createElement("div",{className:Qt.category},ye.categories.map((e=>o.createElement(D.Z,{to:fe.url(gt.CATEGORY_ROUTE_NAME,e),key:e.id},o.createElement(i.Z,{variant:"overline"},e.name))))),o.createElement(u.Z,{className:Qt.header,avatar:o.createElement(D.Z,Object.assign({},!ye.author.deleted&&{to:fe.url(gt.USER_PROFILE_ROUTE_NAME,ye.author)},{onClick:ye.author.deleted?()=>we(!0):null}),o.createElement(Vt.Z,{hide:!ye.author.community_badge},o.createElement(d.Z,{"aria-label":"recipe",src:ye.author.avatar,className:Qt.avatar},ye.author.username))),title:o.createElement(D.Z,Object.assign({},!ye.author.deleted&&{to:fe.url(gt.USER_PROFILE_ROUTE_NAME,ye.author)},{onClick:ye.author.deleted?()=>we(!0):null,className:Qt.username}),ye.author.username),subheader:o.createElement(o.Fragment,null,o.createElement(D.Z,{to:fe.url((0,$.Ig)(ye),(0,$.p3)(ye)),className:Qt.activityAt},o.createElement(b.Z,{component:"span",date:ye.added_at})),ye.location&&o.createElement(o.Fragment,null,o.createElement(v.Z,null),o.createElement(c.Z,{className:Qt.location},o.createElement(M.Z,null,"add_location_alt"),null===(t=ye.location)||void 0===t?void 0:t.location)),o.createElement(v.Z,null),o.createElement(c.Z,{className:Qt.tag},ye.addressing.length>0?o.createElement(E.Z,{tags:ye.addressing,TagChipProps:{disposable:!1,clickable:!1}}):o.createElement(m.Z,{title:`${Ve.formatMessage(Jt.visibleToAll)}`},o.createElement(M.Z,{color:"disabled",fontSize:"small"},"public")))),action:o.createElement(Qe.Z,Object.assign({feedObject:ye,feedObjectType:j,onEditContribution:it,onHideContribution:tt,onDeleteContribution:nt,onRestoreContribution:Ge,onSuspendNotificationContribution:ot,onFlagContribution:qe},ne))}),o.createElement(l.Z,{classes:{root:Qt.content}},o.createElement(c.Z,{className:Qt.titleSection},"title"in ye&&o.createElement(o.Fragment,null,k===R.r.DETAIL?o.createElement(i.Z,{variant:"body1",gutterBottom:!0,className:Qt.title},ye.title):o.createElement(D.Z,{to:fe.url((0,$.Ig)(ye),(0,$.p3)(ye))},o.createElement(i.Z,{variant:"body1",gutterBottom:!0,className:Qt.title},ye.title)))),o.createElement(c.Z,{className:Qt.textSection},vt(ye,k)),o.createElement(c.Z,{className:Qt.mediasSection},o.createElement(Kt,Object.assign({medias:ye.medias},ae))),o.createElement(c.Z,{className:Qt.pollsSection},ye.poll&&o.createElement(Ie,Object.assign({visible:V||k===R.r.DETAIL||Boolean(ye.type!==I.q.DISCUSSION&&!ye.html&&!ye.medias.length),feedObject:ye,pollObject:ye.poll,onChange:We,onToggleVisibility:Ye},re))),o.createElement(c.Z,{className:Qt.infoSection},o.createElement(p.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2},!U&&o.createElement(Ke,Object.assign({feedObject:ye,feedObjectType:ye.type},le,{cacheStrategy:N})),!x&&o.createElement(at,Object.assign({feedObject:ye,feedObjectType:ye.type,handleFollow:dt},H))))),o.createElement(f.Z,{className:Qt.actionsSection},o.createElement(Se,Object.assign({feedObjectId:O,feedObjectType:j,feedObject:ye,hideCommentAction:k===R.r.DETAIL,handleExpandActivities:k===R.r.PREVIEW?ut:null,VoteActionProps:{onVoteAction:ct}},Y)),(k===R.r.DETAIL||xe)&&o.createElement(c.Z,{className:Qt.replyContent},o.createElement(X,Object.assign({id:`reply-feedObject-${ye.id}`,onReply:ht,editable:!Ae||Boolean(ye),key:Number(Ae)},Q)))),k===R.r.PREVIEW&&(ye.comment_count>0||w&&w.length>0)&&o.createElement(h.Z,{in:xe,timeout:"auto",classes:{root:Qt.activitiesSection}},o.createElement(l.Z,{className:Qt.activitiesContent},o.createElement(Ft,Object.assign({feedObject:ye,key:$e,feedObjectActivities:w,activitiesType:$e,onSetSelectedActivities:pt,comments:Me,CommentsObjectProps:{CommentComponentProps:Object.assign({onDelete:mt,truncateContent:!0,CommentsObjectComponentProps:{inPlaceLoadMoreContents:!1}},ee),CommentObjectSkeletonProps:te},cacheStrategy:N},oe)))),_e&&o.createElement(Ee.Z,{open:_e,feedObject:ye,onClose:it,onSuccess:st,maxWidth:"sm",fullWidth:!0})):o.createElement(g.Z,Object.assign({template:k},W))):k===R.r.SHARE?o.createElement(o.Fragment,null,ye?o.createElement(o.Fragment,null,ye.categories.length>0&&o.createElement("div",{className:Qt.category},ye.categories.map((e=>o.createElement(D.Z,{to:fe.url(gt.CATEGORY_ROUTE_NAME,e),key:e.id},o.createElement(i.Z,{variant:"overline"},e.name))))),o.createElement(u.Z,{classes:{root:Qt.header},avatar:o.createElement(D.Z,Object.assign({},!ye.author.deleted&&{to:fe.url(gt.USER_PROFILE_ROUTE_NAME,ye.author)},{onClick:ye.author.deleted?()=>we(!0):null,className:Qt.username}),o.createElement(Vt.Z,{hide:!ye.author.community_badge},o.createElement(d.Z,{"aria-label":"recipe",src:ye.author.avatar,className:Qt.avatar},ye.author.username))),title:o.createElement(D.Z,Object.assign({},!ye.author.deleted&&{to:fe.url(gt.USER_PROFILE_ROUTE_NAME,ye.author)},{onClick:ye.author.deleted?()=>we(!0):null,className:Qt.username}),ye.author.username),subheader:o.createElement(D.Z,{to:fe.url((0,$.Ig)(ye),(0,$.p3)(ye)),className:Qt.activityAt},o.createElement(b.Z,{date:ye.added_at}))}),o.createElement(l.Z,{classes:{root:Qt.content}},o.createElement(c.Z,{className:Qt.titleSection},"title"in ye&&o.createElement(D.Z,{to:fe.url((0,$.Ig)(ye),(0,$.p3)(ye))},o.createElement(i.Z,{variant:"body1",gutterBottom:!0,className:Qt.title},ye.title))),o.createElement(c.Z,{className:Qt.textSection},vt(ye,k)),o.createElement(c.Z,{className:Qt.mediasSection},o.createElement(Kt,Object.assign({medias:ye.medias},ae))),o.createElement(c.Z,{className:Qt.pollsSection},ye.poll&&o.createElement(Ie,Object.assign({feedObject:ye,pollObject:ye.poll,onChange:We,visible:Boolean(ye.type!==I.q.DISCUSSION&&!ye.html&&!ye.medias.length)},re))))):o.createElement(g.Z,Object.assign({template:k},W))):o.createElement(o.Fragment,null,ye?o.createElement(lt.Z,{elevation:0,className:Qt.snippet,image:o.createElement(D.Z,Object.assign({},!ye.author.deleted&&{to:fe.url(gt.USER_PROFILE_ROUTE_NAME,ye.author)},{onClick:ye.author.deleted?()=>we(!0):null}),o.createElement(Vt.Z,{hide:!ye.author.community_badge},o.createElement(d.Z,{alt:ye.author.username,variant:"circular",src:ye.author.avatar,className:Qt.avatar}))),primary:o.createElement(c.Z,null,o.createElement(D.Z,Object.assign({},!ye.author.deleted&&{to:fe.url(gt.USER_PROFILE_ROUTE_NAME,ye.author)},{onClick:ye.author.deleted?()=>we(!0):null,className:Qt.username}),ye.author.username),o.createElement(i.Z,{variant:"body2",className:Qt.snippetContent},o.createElement(D.Z,{to:fe.url((0,$.Ig)(ye),(0,$.p3)(ye))},(0,$.cO)(ye)))),disableTypography:!0,secondary:o.createElement(p.Z,{direction:"row",justifyContent:"space-between",spacing:2,alignItems:"center"},o.createElement(D.Z,{to:fe.url((0,$.Ig)(ye),(0,$.p3)(ye)),className:Qt.activityAt},o.createElement(b.Z,{component:"span",date:ye.added_at})),o.createElement(s.Z,{component:D.Z,to:fe.url((0,$.Ig)(ye),(0,$.p3)(ye)),variant:"text",color:"secondary",size:"small"},o.createElement(z.Z,{id:"ui.feedObject.comment",defaultMessage:"ui.feedObject.comment"})))}):o.createElement(g.Z,Object.assign({},W))),o.createElement(o.Fragment,null,o.createElement(en,Object.assign({id:r,className:C()(Qt.root,y,`${S.B}-${k}`)},ue),ye&&_&&o.createElement(Je.Z,{endpoint:q.Z.FeedObjectMarkRead,data:{object:[ye.id]}}),Et),je&&o.createElement(bt.Z,{open:je,handleClose:()=>we(!1)}))}},88304:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var a=n(97582),o=n(67294),r=n(44012),l=n(77931),i=n(98456),s=n(45185),c=n(65001),u=n(24085),d=n(90948),m=n(23370),p=n.n(m),f=n(11447),h=n.n(f),g=n(29628);const b="SCLocationAutocomplete",v={root:`${b}-root`},E=(0,d.ZP)(s.Z,{name:b,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({minWidth:120})));const y=function(e){const t=(0,g.Z)({props:e,name:b}),{defaultValue:n=null,disabled:s=!1,onChange:d,TextFieldProps:m={variant:"outlined",label:o.createElement(r.Z,{id:"ui.locationAutocomplete.label",defaultMessage:"ui.composer.locations.label"})}}=t,f=(0,a._T)(t,["defaultValue","disabled","onChange","TextFieldProps"]),[y,O]=(0,o.useState)(!1),[Z,C]=(0,o.useState)([]),[j,w]=(0,o.useState)(n),[S,N]=(0,o.useState)("");(0,o.useEffect)((()=>{!y&&S.trim().length>0&&((e=0,t=20)=>{c.Z.request({url:u.Z.ComposerLocalitySearch.url(),method:u.Z.ComposerLocalitySearch.method,params:{offset:e,limit:t,search:S.trim()}}).then((e=>{C(e.data.results)})).then((()=>O(!1)))})()}),[S]),(0,o.useEffect)((()=>{j&&d&&d(j)}),[j]);const _=(0,o.useMemo)((()=>!j||"string"==typeof j||Z.find((e=>j.lat===e.lat&&j.lng===e.lng))?Z:[...Z,{lat:j.lat,lng:j.lng,full_address:j.location}]),[j,Z]);return o.createElement(E,Object.assign({className:v.root,options:_||[],getOptionLabel:e=>(null==e?void 0:e.full_address)||(null==e?void 0:e.location)||"",filterOptions:e=>e,autoComplete:!0,includeInputInList:!0,value:j||null,selectOnFocus:!0,handleHomeEndKeys:!0,disabled:s,noOptionsText:o.createElement(r.Z,{id:"ui.locationAutocomplete.empty",defaultMessage:"ui.locationAutocomplete.empty"}),onChange:(e,t)=>{w(t?{location:t.full_address,lat:t.lat,lng:t.lng}:null),d&&d(t)},onInputChange:(e,t)=>{N(t)},isOptionEqualToValue:(e,t)=>t.lat===e.lat&&t.lng===e.lng,renderInput:e=>o.createElement(l.Z,Object.assign({},e,m,{margin:"dense",InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"location",endAdornment:o.createElement(o.Fragment,null,y?o.createElement(i.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})})),renderOption:(e,t,{inputValue:n})=>{const a=h()(t.full_address,n),r=p()(t.full_address,a);return o.createElement("li",Object.assign({key:`${t.lat}_${t.lng}`},e,{style:{whiteSpace:"break-spaces"}}),r.map(((e,t)=>e.highlight?o.createElement("span",{key:t,style:{fontWeight:700}},e.text):e.text)))}},f))}},59107:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var a=n(97582),o=n(67294),r=n(90948),l=n(51107),i=n(2734),s=n(87952),c=n(88078);const u="SCAvatarGroupSkeleton",d={root:`${u}-root`},m=(0,r.ZP)(l.Z,{name:u,slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({})));function p(e){const{count:t=2}=e,n=(0,a._T)(e,["count"]),r=(0,i.Z)();return o.createElement(m,Object.assign({className:d.root},n),[...Array(t+1)].map(((e,t)=>o.createElement(s.Z,{key:t},o.createElement(c.Z,{variant:"circular",width:r.selfcommunity.user.avatar.sizeSmall,height:r.selfcommunity.user.avatar.sizeSmall})))))}},55218:(e,t,n)=>{"use strict";n.d(t,{EH:()=>a,qZ:()=>o,zo:()=>r});const a="widget_",o=10,r=150},75256:(e,t,n)=>{"use strict";n.d(t,{Fs:()=>a,Qo:()=>o});const a=[600,600],o=[200,200]},57250:(e,t,n)=>{"use strict";n.d(t,{LP:()=>s,MR:()=>a,Rj:()=>l,TC:()=>i,iC:()=>o,oP:()=>r});const a="image",o="video",r="doc",l="url",i="share",s="sc_link"},37991:(e,t,n)=>{"use strict";n.d(t,{jm:()=>a,nm:()=>r,np:()=>o});const a="https://www.facebook.com/sharer.php?u=",o="https://twitter.com/intent/tweet?url=",r="https://www.linkedin.com/sharing/share-offsite/?url="},63219:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var a=n(67294),o=n(65001),r=n(1216),l=n(75256);const i=e=>{const{endpoint:t,params:n={},callback:r,data:l=null}=e,i=()=>{o.Z.request({url:t.url(n),method:t.method,data:l}).then((e=>{r&&r(e)})).catch((()=>null))};return(0,a.useEffect)((()=>{let e;if(t)return e=setTimeout(i),()=>{e&&clearTimeout(e)}}),[]),null},s=e=>a.createElement(r.ZP,{once:!0,offset:l.Qo},a.createElement(i,Object.assign({},e)))},22461:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ee});var a=n(67294),o=n(90948),r=n(97582),l=n(60773);const i="SCMediaFile";var s=n(57250),c=n(93946),u=n(97265),d=n(67564);const m={root:`${i}-lightbox-root`},p=(0,o.ZP)(l.Z,{name:i,slot:"LightboxRoot"})((()=>({})));function f(e){const{medias:t=[],index:n=0,onClose:o,onIndexChange:l}=e,i=(0,r._T)(e,["medias","index","onClose","onIndexChange"]),f=(0,a.useCallback)(((e,t)=>({src:e.image,width:e.image_width,height:e.image_height,key:t})),[]),h=(0,a.useCallback)((e=>t[e.index].type===s.oP?a.createElement(c.Z,{component:u.Z,to:t[e.index].url,target:"_blank",color:"inherit"},a.createElement(d.Z,null,"download")):a.createElement(a.Fragment,null)),[t]);return a.createElement(p,Object.assign({},i,{className:m.root,images:t.map(f),visible:-1!==n,onClose:o,index:n,onIndexChange:l,toolbarRender:h}))}var h=n(5616),g=n(15861),b=n(86886),v=n(94184),E=n.n(v),y=n(97650);const O=e=>e.type===s.MR||e.type===s.oP,Z={displayRoot:`${i}-display-root`,background:`${i}-background`,backgroundPortrait:`${i}-background-portrait`,heightOne:`${i}-height-one`,heightHalfOne:`${i}-height-half-one`,heightTwo:`${i}-height-two`,heightThree:`${i}-height-three`,cover:`${i}-cover`,coverText:`${i}-cover-text`,slide:`${i}-slide`,border:`${i}-border`,gallery:`${i}-gallery`,title:`${i}-title`,iconFile:`${i}-icon-file`},C=(0,o.ZP)(h.Z,{name:i,slot:"DisplayRoot"})((({theme:e})=>({})));var j=n(39005),w=n(25464),S=n(98619),N=n(18972),_=n(2734),k=n(98396),x=n(97212),T=n(98456),M=n(78462),P=n(53704),A=n(44012),D=n(63862),I=n(41567),R=n(24085),$=n(99626);const B=(e,t)=>{const n=(n,o)=>{const{showFileUpload:l,getInternalFileInput:i}=(0,$.uO)(),{id:s,className:c,text:u,children:d,extraProps:m,onClick:p}=n,f=(0,r._T)(n,["id","className","text","children","extraProps","onClick"]),h=(0,a.useRef)();h.current=f;const g=(0,a.useCallback)((e=>{const n=i();n.current.accept=t.accept,t.capture?n.current.capture=t.capture:n.current.removeAttribute("capture"),l(h.current),null==p||p(e)}),[i,l,h,p]);return a.createElement(e,Object.assign({ref:o,onClick:g,id:s,className:c,children:d||u||"Upload"},m))};return(0,$.zD)(n),(0,a.forwardRef)(n)};var L=n(20377);const F={triggerRoot:`${i}-trigger-root`,triggerDrawerRoot:`${i}-trigger-drawer-root`,triggerMenuRoot:`${i}-trigger-menu-root`,paper:`${i}-paper`,item:`${i}-item`},U=(0,o.ZP)(c.Z,{name:i,slot:"TriggerRoot"})((()=>({}))),V=(0,o.ZP)(j.Z,{name:i,slot:"TriggerDrawerRoot"})((()=>({}))),z=(0,o.ZP)(w.Z,{name:i,slot:"TriggerMenuRoot"})((()=>({}))),H=B((0,a.forwardRef)(((e,t)=>a.createElement(S.Z,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:"image/*",capture:"camera"}),W=B((0,a.forwardRef)(((e,t)=>a.createElement(S.Z,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:"image/*"}),Y=B((0,a.forwardRef)(((e,t)=>a.createElement(S.Z,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:"application/pdf"}),X=B((0,a.forwardRef)(((e,t)=>a.createElement(N.Z,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:"image/*"}),q=B((0,a.forwardRef)(((e,t)=>a.createElement(N.Z,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:"application/pdf"});var G=n(16941);const K={previewRoot:`${i}-preview-root`,media:`${i}-media`,delete:`${i}-delete`,title:`${i}-title`},J=(0,o.ZP)(h.Z,{name:i,slot:"PreviewRoot"})((()=>({}))),Q="file_sort",ee={name:"file",displayComponent:e=>{const{className:t="",medias:n=[],maxVisible:o=5,gallery:r=!0,onMediaClick:l=null}=e,[i,s]=(0,a.useState)(-1),{ref:c,inView:u}=(0,y.YD)({triggerOnce:!1}),m=(0,a.useMemo)((()=>n.filter(O)),[n]),p=(e,t=!1)=>{if("object"==typeof e){const n=e.image_thumbnail?e.image_thumbnail.url:e.image?e.image:"/static/frontend_v2/images/image.svg";return t&&e.image?e.image:n}return e},h=(0,a.useCallback)((e=>{!1!==r&&(s(e),l(m[e]))}),[m]),v=e=>{if(!e)return null;let t=null;if(e.type)if("doc"===e.type)t=a.createElement(d.Z,{className:Z.iconFile},"picture_as_pdf");else t=a.createElement(d.Z,{className:Z.iconFile},"insert_drive_file");return a.createElement(a.Fragment,null,e.title&&a.createElement("div",{className:Z.title},a.createElement(g.Z,{variant:"subtitle2"},t," ",e.title)))},j=e=>r?[a.createElement("div",{key:`cover-${e}`,className:E()(Z.cover,Z.slide)}),a.createElement("div",{key:`cover-text-${e}`,className:E()(Z.coverText,Z.slide,"animate-text"),style:{fontSize:"100%"}},a.createElement(d.Z,null,"zoom_out_map"))]:null,w=e=>{const t=m.length-(o&&o>5?5:o);return[e&&a.createElement("div",{key:"count",className:Z.cover}),e&&a.createElement("div",{key:"count-sub",className:Z.coverText,style:{fontSize:"200%"}},a.createElement("p",null,"+",t))]},S=[...m];return o&&m.length>o&&(S.length=o),0===m.length?null:a.createElement(C,{className:E()(Z.displayRoot,t)},[1,3,4].includes(S.length)&&(()=>{const e=m.length>o&&1==o?w(!0):j(0),t=!!m[0].image_mimetype&&m[0].image_mimetype.includes("image/gif"),n=m[0].image_height<m[0].image_width;return a.createElement(b.ZP,{container:!0,style:Object.assign({},m[0].image_thumbnail&&m[0].image_thumbnail.color?{backgroundColor:m[0].image_thumbnail.color}:{})},a.createElement(b.ZP,{item:!0,ref:c,xs:12,classes:{root:E()(Z.border,Z.heightOne,Object.assign(Object.assign({},t||n?{[Z.background]:!0}:{[Z.backgroundPortrait]:!0}),{[Z.gallery]:r,[Z.heightHalfOne]:m.length>1}))},onClick:()=>h(0),style:Object.assign({background:`url(${p(m[0],u&&t)})`},n?{paddingTop:100*m[0].image_height/m[0].image_width+"%"}:{})},e,v(m[0])))})(),S.length>=2&&4!=S.length&&(()=>{const e=m.length>o&&[2,3].includes(+o)?w(!0):j(1),t=[3,4].includes(m.length)||m.length>+o&&[3,4].includes(+o);return a.createElement(b.ZP,{container:!0},a.createElement(b.ZP,{item:!0,xs:6,classes:{root:E()(Z.border,Z.heightTwo,Z.background,{[Z.gallery]:r})},onClick:()=>h(t?1:0),style:{background:`url(${p(t?m[1]:m[0])})`}},j(t?1:0),v(m[0])),a.createElement(b.ZP,{item:!0,xs:6,classes:{root:E()(Z.border,Z.heightTwo,Z.background,{[Z.gallery]:r})},onClick:()=>h(t?2:1),style:{background:`url(${p(t?m[2]:m[1])})`}},e,v(m[1])))})(),S.length>=4&&(()=>{const e=4==m.length||m.length>+o&&4==+o,t=!o||o>5||m.length>o&&[4,5].includes(+o)?w(!0):j(e?3:4);return a.createElement(b.ZP,{container:!0},a.createElement(b.ZP,{item:!0,xs:4,md:4,classes:{root:E()(Z.border,Z.heightThree,Z.background,{[Z.gallery]:r})},onClick:()=>h(e?1:2),style:{background:`url(${p(e?m[1]:m[2])})`}},j(e?1:2),v(m[1])),a.createElement(b.ZP,{item:!0,xs:4,md:4,classes:{root:E()(Z.border,Z.heightThree,Z.background,{[Z.gallery]:r})},onClick:()=>h(e?2:3),style:{background:`url(${p(e?m[2]:m[3])})`}},j(e?2:3),v(m[2])),a.createElement(b.ZP,{item:!0,xs:4,md:4,classes:{root:E()(Z.border,Z.heightThree,Z.background,{[Z.gallery]:r})},onClick:()=>h(e?3:4),style:{background:`url(${p(e?m[3]:m[4])})`}},t,v(m[3])))})(),-1!==i&&a.createElement(f,{onClose:()=>{s(-1)},index:i,medias:m}))},triggerButton:e=>{var{className:t,onAdd:n=null}=e,o=(0,r._T)(e,["className","onAdd"]);const[l,i]=(0,a.useState)(null),[s,c]=(0,a.useState)(!1),u=(0,P.RM)(),m=(0,_.Z)(),p=(0,k.Z)(m.breakpoints.down("md")),{enqueueSnackbar:f,closeSnackbar:h}=(0,L.Ds)(),g=(0,a.useCallback)((e=>{i(e.currentTarget)}),[]),b=(0,a.useCallback)((()=>{i(null)}),[]),v=(0,a.useCallback)((e=>e.type.startsWith("image/")||"application/pdf"===e.type),[]),y=(0,a.useCallback)((e=>{n&&n(e)}),[n]),O=(0,a.useCallback)((e=>{console.log(e),c(Object.keys(e).length>0)}),[]),Z=(0,a.useCallback)(((e,t)=>{const n=f(`${e.name}: ${t}`,{variant:"error",anchorOrigin:{horizontal:"center",vertical:"top"},autoHideDuration:2e3,SnackbarProps:{onClick:()=>{h(n)}}})}),[f]),C=(0,a.useMemo)((()=>p?[a.createElement(x.ZP,{className:F.item,key:"photo"},a.createElement(H,{inputFieldName:"image"},a.createElement(A.Z,{id:"ui.composer.media.file.photo",defaultMessage:"ui.composer.media.file.photo"}))),a.createElement(x.ZP,{className:F.item,key:"gallery"},a.createElement(W,{inputFieldName:"image"},a.createElement(A.Z,{id:"ui.composer.media.file.gallery",defaultMessage:"ui.composer.media.file.gallery"}))),a.createElement(x.ZP,{className:F.item,key:"document"},a.createElement(Y,{inputFieldName:"document"},a.createElement(A.Z,{id:"ui.composer.media.file.document",defaultMessage:"ui.composer.media.file.document"})))]:[a.createElement(X,{extraProps:{className:F.item},inputFieldName:"image",key:"gallery"},a.createElement(A.Z,{id:"ui.composer.media.file.gallery",defaultMessage:"ui.composer.media.file.gallery"})),a.createElement(q,{extraProps:{className:F.item},key:"document",inputFieldName:"document"},a.createElement(A.Z,{id:"ui.composer.media.file.document",defaultMessage:"ui.composer.media.file.document"}))]),[p,v,y,O,Z]);return a.createElement(I.ZP,{destination:{url:`${u.settings.portal}${R.Z.ComposerChunkUploadMedia.url()}`,method:R.Z.ComposerChunkUploadMedia.method},fileFilter:v,chunkSize:204800,multiple:!0},a.createElement(D.Z,{onSuccess:y,onProgress:O,onError:Z}),a.createElement(U,Object.assign({className:E()(t,F.triggerRoot)},o,{"aria-label":"add media",disabled:s,onClick:g}),s?a.createElement(T.Z,{size:20}):a.createElement(d.Z,null,"photo_file")),p?a.createElement(V,{onClick:()=>i(null),className:F.triggerDrawerRoot,anchor:"bottom",open:Boolean(l),onClose:b,onOpen:g,PaperProps:{className:F.paper},disableSwipeToOpen:!0},a.createElement(M.Z,null,C)):a.createElement(z,{onClick:()=>i(null),className:F.triggerMenuRoot,anchorEl:l,open:Boolean(l),onClose:b,PaperProps:{className:F.paper}},C))},layerComponent:null,previewComponent:a.forwardRef(((e,t)=>{const{className:n,onChange:o,value:l=[]}=e,i=(0,r._T)(e,["className","onChange","value"]),u=(0,a.useMemo)((()=>l.filter(O)),[l]);(0,a.useEffect)((()=>{if(void 0===typeof document)return null;const e=document.getElementById(Q);e&&(e.scrollLeft=e.scrollWidth)}),[u]);const m=(0,a.useCallback)((e=>{o&&o([...l.filter((t=>-1===e.findIndex((e=>e.id===t.id)))),...e])}),[o,l]),p=(0,a.useCallback)((e=>()=>o&&o(l.filter((t=>t.id!==e)))),[o,l]);return a.createElement(J,Object.assign({ref:t,className:E()(n,K.previewRoot)},i),u.length>0&&a.createElement(G.ReactSortable,{id:Q,list:u,setList:m},u.map((e=>a.createElement(h.Z,{key:e.id,className:K.media,sx:{backgroundImage:`url(${(null==e?void 0:e.image_thumbnail)?e.image_thumbnail.url:e.image})`}},a.createElement(c.Z,{className:K.delete,onClick:p(e.id),size:"small"},a.createElement(d.Z,null,"delete")),e.title&&a.createElement(g.Z,{className:K.title},e.type===s.oP&&a.createElement(d.Z,null,"picture_as_pdf"),e.title))))))})),filter:O}},70815:(e,t,n)=>{"use strict";n.d(t,{Z:()=>H});var a=n(97582),o=n(67294),r=n(90948),l=n(1216),i=n(57250),s=n(67742),c=n(5616),u=n(75256),d=n(88078),m=n(94184),p=n.n(m);const f="SCMediaLink",h=e=>e.type===i.Rj&&e.embed&&e.embed.embed_type===i.LP,g={displayRoot:`${f}-display-root`,displayLink:`${f}-link`,displayVideo:`${f}-video`,thumbnail:`${f}-thumbnail`,thumbnailFullWidth:`${f}-thumbnail`,image:`${f}-image`,snippet:`${f}-snippet`,snippetTitle:`${f}-snippet-title`,snippetDescription:`${f}-snippet-description`},b=(0,r.ZP)(c.Z,{name:f,slot:"DisplayRoot"})((({theme:e})=>({}))),v=e=>{const{className:t="",medias:n,fullWidth:r=!1,onMediaClick:m=null}=e,f=(0,a._T)(e,["className","medias","fullWidth","onMediaClick"]),v=e=>{m&&m(e)},E=(0,o.useMemo)((()=>n.filter(h)),[n]);return 0===E.length?null:o.createElement(b,Object.assign({className:p()(t,g.displayRoot)},f),E.map(((e,t)=>e.embed.metadata&&e.embed.metadata.type===i.iC?o.createElement(l.ZP,{className:g.displayVideo,placeholder:o.createElement(d.Z,{variant:"rectangular",height:360,width:"100%"}),key:t,once:!0,offset:u.Fs},o.createElement(s.Z,{url:e.url,width:"100%",key:t,onVideoWatch:()=>v(e)})):o.createElement(o.Fragment,{key:t},((e,t)=>{const n=new URL(e.embed.metadata.url).hostname.replace("www.","");return o.createElement(c.Z,{className:g.displayLink,key:t},e.embed.metadata.images&&e.embed.metadata.images.length>0&&o.createElement(o.Fragment,null,r?o.createElement(c.Z,{className:p()(g.thumbnailFullWidth,g.image),style:{background:`url(${e.image})`,paddingBottom:100/e.image_width/e.image_height+"%"}}):o.createElement(c.Z,{className:p()(g.thumbnail,g.image),style:{background:`url(${e.image})`}})),o.createElement(c.Z,{className:g.snippet},o.createElement("b",{className:g.snippetTitle},e.embed.metadata.title),o.createElement("br",null),o.createElement("p",{className:g.snippetDescription},e.embed.metadata.description),o.createElement("a",{href:e.embed.metadata.url,target:"_blank",onClick:()=>v(e)},n)),o.createElement("div",{style:{clear:"both"}}))})(e,t)))))};var E=n(93946),y=n(67564);const O={triggerRoot:`${f}-trigger-root`},Z=(0,r.ZP)(E.Z,{name:f,slot:"TriggerRoot"})((()=>({})));var C=n(44012),j=n(37645),w=n(15861),S=n(69417),N=n(6514),_=n(16941);const k={previewRoot:`${f}-preview-root`,media:`${f}-media`,video:`${f}-media-video`,delete:`${f}-delete`},x=(0,r.ZP)(c.Z,{name:f,slot:"PreviewRoot"})((()=>({}))),T=o.forwardRef(((e,t)=>{const{className:n,onChange:r,value:l=[]}=e,s=(0,a._T)(e,["className","onChange","value"]),u=(0,o.useMemo)((()=>l.filter(h)),[l]),d=(0,o.useCallback)((e=>{r&&r([...l.filter((t=>-1===e.findIndex((e=>e.id===t.id)))),...e])}),[r,l]),m=(0,o.useCallback)((e=>()=>r&&r(l.filter((t=>t.id!==e)))),[r,l]);return o.createElement(x,Object.assign({ref:t,className:p()(n,k.previewRoot)},s),u.length>0&&o.createElement(_.ReactSortable,{list:u,setList:d},u.map((e=>o.createElement(c.Z,{key:e.id,className:p()(k.media,{[k.video]:e.embed.metadata&&e.embed.metadata.type===i.iC})},o.createElement(v,{medias:[e]}),o.createElement(E.Z,{className:k.delete,onClick:m(e.id),size:"small"},o.createElement(y.Z,null,"delete")))))))}));var M=n(87109),P=n(77931),A=n(65001),D=n(24085),I=n(59488),R=n(79991),$=n(16628),B=n(98456);const L={url:"",urlError:null},F=e=>{const[t,n]=(0,o.useState)(!1),[r,l]=(0,o.useState)(Object.assign({},L)),{url:s,urlError:c}=r,u=o.useRef(s);u.current=s;const d=o.useRef(null),{helperText:m,error:p,onSuccess:f}=e,h=(0,a._T)(e,["helperText","error","onSuccess"]);(0,o.useEffect)((()=>()=>clearTimeout(d.current)),[]);const g=e=>{e&&(e.preventDefault(),e.stopPropagation()),d.current&&clearTimeout(d.current),n(!0),A.Z.request({url:D.Z.ComposerMediaCreate.url(),method:D.Z.ComposerMediaCreate.method,data:{type:i.Rj,url:u.current}}).then((e=>{l(Object.assign({},L)),f&&f(e.data)})).catch((e=>{const t=(0,I.yt)(e);l({urlError:t.urlError?`urlError.${t.urlError.error}`:t.error,url:u.current})})).then((()=>n(!1)))};return o.createElement("form",{method:"post",onSubmit:g},o.createElement(P.Z,Object.assign({value:s,type:"url",onChange:e=>{const t=e.target,n=t.value.startsWith("h")?t.value:`https://${t.value}`;l({url:n,urlError:(0,R.jv)(n)?null:"validationError"})},onPaste:e=>{d.current&&clearTimeout(d.current),d.current=setTimeout((()=>{(0,R.jv)(u.current)&&g(e)}),500)},error:p||Boolean(c),helperText:m||c&&o.createElement(C.Z,{id:`ui.composer.media.link.add.error.${c}`,defaultMessage:`ui.composer.media.link.add.error.${c}`})||o.createElement(C.Z,{id:"ui.composer.media.link.add.help",defaultMessage:"ui.composer.media.link.add.help"}),disabled:t},h,{InputProps:{endAdornment:o.createElement(M.Z,{position:"end"},o.createElement($.Z,{in:null===c&&""!==s},o.createElement(E.Z,{size:"small",disabled:t,type:"submit"},t?o.createElement(B.Z,{color:"primary",size:20}):o.createElement(C.Z,{id:"ui.composer.media.link.add.submit",defaultMessage:"ui.composer.media.link.add.submit"}))))}})))},U={layerRoot:`${f}-layer-root`,title:`${f}-layer-title`,content:`${f}-layer-content`,media:`${f}-media`,delete:`${f}-delete`},V=(0,r.ZP)(c.Z,{name:f,slot:"LayerRoot"})((()=>({}))),z=o.forwardRef(((e,t)=>{const{className:n,onClose:r,onSave:l,defaultValue:i=[]}=e,s=(0,a._T)(e,["className","onClose","onSave","defaultValue"]),[c,u]=(0,o.useState)(i),d=(0,o.useCallback)((()=>l(c)),[c]),m=(0,o.useCallback)((e=>u([...c,e])),[c]),f=(0,o.useCallback)((e=>u(e)),[]);return o.createElement(V,Object.assign({ref:t,className:p()(n,U.layerRoot)},s),o.createElement(j.Z,{className:U.title},o.createElement(E.Z,{onClick:r},o.createElement(y.Z,null,"arrow_back")),o.createElement(w.Z,null,o.createElement(C.Z,{id:"ui.composer.media.link.layer.title",defaultMessage:"ui.composer.media.link.layer.title"})),o.createElement(S.Z,{size:"small",color:"secondary",variant:"contained",onClick:d},o.createElement(C.Z,{id:"ui.composer.layer.save",defaultMessage:"ui.composer.layer.save"}))),o.createElement(N.Z,{className:U.content},o.createElement(F,{id:"page",name:"page",label:o.createElement(C.Z,{id:"ui.composer.media.link.add.label",defaultMessage:"ui.composer.media.link.add.label"}),fullWidth:!0,variant:"outlined",placeholder:"https://",onSuccess:m}),o.createElement(T,{onChange:f,value:c})))})),H={name:"link",displayComponent:v,triggerButton:e=>{var{className:t}=e,n=(0,a._T)(e,["className"]);return o.createElement(Z,Object.assign({className:p()(t,O.triggerRoot)},n,{"aria-label":"add link"}),o.createElement(y.Z,null,"link"))},layerComponent:z,previewComponent:T,filter:h}},26474:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var a=n(97582),o=n(67294),r=n(90948),l=n(5616),i=n(38509),s=n(37024),c=n(59219),u=n(94184),d=n.n(u),m=n(57250);const p=e=>e.type===m.TC,f="SCMediaShare",h={displayRoot:`${f}-display-root`,sharePreview:`${f}-share-preview`,sharePlaceholder:`${f}-share-placeholder`},g=(0,r.ZP)(l.Z,{name:f,slot:"DisplayRoot"})((({theme:e})=>({}))),b={name:"share",displayComponent:e=>{var{className:t,medias:n=[],onMediaClick:r=null}=e,u=(0,a._T)(e,["className","medias","onMediaClick"]);const m=(0,o.useMemo)((()=>n.filter(p)),[n]);return 0===m.length?null:o.createElement(g,Object.assign({className:d()(t,h.displayRoot)},u),m.map(((e,t)=>o.createElement(l.Z,{className:h.sharePreview,key:t,onClick:r},o.createElement(i.Z,{feedObjectId:e.embed.metadata.id,feedObjectType:e.embed.metadata.type,variant:"outlined",template:s.r.SHARE,cacheStrategy:c.n2.CACHE_FIRST})))))},triggerButton:null,layerComponent:null,previewComponent:null,filter:p}},8455:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var a=n(97582),o=n(67294),r=n(87918),l=n(94184),i=n.n(l),s=n(90948);const c="SCTagChip",u={ellipsis:`${c}-ellipsis`},d=(0,s.ZP)(r.Z,{name:c,slot:"Root",overridesResolver:(e,t)=>[t.root]})((({theme:e})=>({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",height:25,[`&.${u.ellipsis}`]:{maxWidth:120}})));function m(e){const{tag:t,clickable:n=!0,disposable:r=!0,label:l=null,ellipsis:s=!1,onClick:c=null,onDelete:m=null,className:p=null}=e,f=(0,a._T)(e,["tag","clickable","disposable","label","ellipsis","onClick","onDelete","className"]);return o.createElement(d,Object.assign({className:i()(p,{[u.ellipsis]:s}),sx:{backgroundColor:`${t.color}`,color:e=>e.palette.getContrastText(t.color)}},n&&{onClick:()=>{c&&c(t.id)}},r&&{onDelete:()=>{m&&m(t.id)}},{label:l||t.name},f))}},86558:(e,t,n)=>{"use strict";n.d(t,{Z:()=>j,x:()=>C});var a=n(97582),o=n(67294),r=n(90948),l=n(23926),i=n(5616),s=n(31536),c=n(15861),u=n(67720),d=n(96514),m=n(90629),p=n(48831),f=n(67564),h=n(8455);const g="SCTags",b=(0,r.ZP)(i.Z,{name:`${g}`,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({cursor:"pointer"}))),v={paper:`${g}-paper`},E=(0,r.ZP)(p.Z,{name:`${g}Popper`,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({zIndex:2,[`& .${v.paper}`]:{padding:"10px 5px"}}))),y=(0,r.ZP)(s.Z,{name:`${g}List`,slot:"Root",overridesResolver:(e,t)=>t.root})({}),O=(0,r.ZP)(s.Z,{name:`${g}Stack`,slot:"Root",overridesResolver:(e,t)=>t.root})({flexWrap:"wrap",justifyContent:"flex-start",alignItems:"flex-start","& > div:not(style)+:not(style)":{margin:0}}),Z=(0,r.ZP)(i.Z,{name:`${g}ItemList`,slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({padding:e.spacing(.2),textAlign:"center",color:e.palette.text.secondary})));var C;function j(e){const{tags:t=[],title:n=null,type:r=C.POPPER,onOpen:i=null,onClose:s=null,onClickTag:p=null,TagChipProps:g={}}=e,j=(0,a._T)(e,["tags","title","type","onOpen","onClose","onClickTag","TagChipProps"]),[w,S]=(0,o.useState)(!1);let N=(0,o.useRef)(null);function _(){N.current&&N.current.contains(event.target)||(S(!1),j.onClose&&j.onClose())}function k(){return o.createElement(o.Fragment,null,n&&o.createElement(o.Fragment,null,o.createElement(c.Z,{sx:{padding:1,fontWeight:600}},n),o.createElement(u.Z,null)))}const x=(0,o.useRef)(w);return o.useEffect((()=>{!0===x.current&&!1===w&&N.current.focus(),x.current=w}),[w]),o.createElement(o.Fragment,null,t.length&&o.createElement(o.Fragment,null,r===C.POPPER?o.createElement(b,Object.assign({},j),o.createElement(f.Z,{ref:N,fontSize:"small",onClick:function(){S((e=>!e)),j.onOpen&&j.onOpen(!w)},"aria-haspopup":"true"},"label"),o.createElement(E,{open:w,anchorEl:N.current,transition:!0,placement:"bottom-start",modifiers:[{name:"preventOverflow",enabled:!0}]},(e=>{var{TransitionProps:n,placement:r}=e,i=(0,a._T)(e,["TransitionProps","placement"]);return o.createElement(d.Z,Object.assign({},n,{style:{transformOrigin:"bottom"===r?"center top":"center bottom"}}),o.createElement(m.Z,{variant:"outlined",className:v.paper},o.createElement(l.d,{onClickAway:_},o.createElement(o.Fragment,null,k(),o.createElement(O,Object.assign({spacing:2},i),t.map((e=>o.createElement(Z,{key:e.id},o.createElement(h.Z,Object.assign({tag:e,onClick:p},g))))))))))}))):o.createElement(y,null,k(),o.createElement(O,{spacing:1,direction:j.direction?j.direction:"column"},t.map((e=>o.createElement(Z,{key:e.id},o.createElement(h.Z,Object.assign({tag:e,onClick:p},g)))))))))}!function(e){e.LIST="list",e.POPPER="popper"}(C||(C={}))},37024:(e,t,n)=>{"use strict";var a,o;n.d(t,{F:()=>o,r:()=>a}),function(e){e.SNIPPET="snippet",e.PREVIEW="preview",e.DETAIL="detail",e.SEARCH="search",e.SHARE="share"}(a||(a={})),function(e){e.RELEVANCE_ACTIVITIES="relevant_activities",e.RECENT_COMMENTS="recent_comments",e.FIRST_COMMENTS="first_comments",e.CONNECTIONS_COMMENTS="connections_comments"}(o||(o={}))},11447:function(e){var t,n;e.exports=(t={772:(e,t,n)=>{const a=n(826).remove,o=/[.*+?^${}()|[\]\\]/g,r=/[a-z0-9_]/i,l=/\s+/;e.exports=function(e,t,n){var i,s;s={insideWords:!1,findAllOccurrences:!1,requireMatchAll:!1},i=(i=n)||{},Object.keys(i).forEach((e=>{s[e]=!!i[e]})),n=s;const c=Array.from(e).map((e=>a(e)));let u=c.join("");return(t=a(t)).trim().split(l).filter((e=>e.length>0)).reduce(((e,t)=>{const a=t.length,l=!n.insideWords&&r.test(t[0])?"\\b":"",i=new RegExp(l+t.replace(o,"\\$&"),"i");let s,d;if(s=i.exec(u),n.requireMatchAll&&null===s)return u="",[];for(;s;){d=s.index;const t=a-c.slice(d,d+a).join("").length,o=d-c.slice(0,d).join("").length,r=[d+o,d+a+o+t];if(r[0]!==r[1]&&e.push(r),u=u.slice(0,d)+new Array(a+1).join(" ")+u.slice(d+a),!n.findAllOccurrences)break;s=i.exec(u)}return e}),[]).sort(((e,t)=>e[0]-t[0]))}},826:e=>{var t={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\u1ea4":"A","\u1eae":"A","\u1eb2":"A","\u1eb4":"A","\u1eb6":"A","\xc6":"AE","\u1ea6":"A","\u1eb0":"A","\u0202":"A","\xc7":"C","\u1e08":"C","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\u1ebe":"E","\u1e16":"E","\u1ec0":"E","\u1e14":"E","\u1e1c":"E","\u0206":"E","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\u1e2e":"I","\u020a":"I","\xd0":"D","\xd1":"N","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\u1ed0":"O","\u1e4c":"O","\u1e52":"O","\u020e":"O","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xdd":"Y","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\u1ea5":"a","\u1eaf":"a","\u1eb3":"a","\u1eb5":"a","\u1eb7":"a","\xe6":"ae","\u1ea7":"a","\u1eb1":"a","\u0203":"a","\xe7":"c","\u1e09":"c","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\u1ebf":"e","\u1e17":"e","\u1ec1":"e","\u1e15":"e","\u1e1d":"e","\u0207":"e","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\u1e2f":"i","\u020b":"i","\xf0":"d","\xf1":"n","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\u1ed1":"o","\u1e4d":"o","\u1e53":"o","\u020f":"o","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xfd":"y","\xff":"y","\u0100":"A","\u0101":"a","\u0102":"A","\u0103":"a","\u0104":"A","\u0105":"a","\u0106":"C","\u0107":"c","\u0108":"C","\u0109":"c","\u010a":"C","\u010b":"c","\u010c":"C","\u010d":"c","C\u0306":"C","c\u0306":"c","\u010e":"D","\u010f":"d","\u0110":"D","\u0111":"d","\u0112":"E","\u0113":"e","\u0114":"E","\u0115":"e","\u0116":"E","\u0117":"e","\u0118":"E","\u0119":"e","\u011a":"E","\u011b":"e","\u011c":"G","\u01f4":"G","\u011d":"g","\u01f5":"g","\u011e":"G","\u011f":"g","\u0120":"G","\u0121":"g","\u0122":"G","\u0123":"g","\u0124":"H","\u0125":"h","\u0126":"H","\u0127":"h","\u1e2a":"H","\u1e2b":"h","\u0128":"I","\u0129":"i","\u012a":"I","\u012b":"i","\u012c":"I","\u012d":"i","\u012e":"I","\u012f":"i","\u0130":"I","\u0131":"i","\u0132":"IJ","\u0133":"ij","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u1e30":"K","\u1e31":"k","K\u0306":"K","k\u0306":"k","\u0139":"L","\u013a":"l","\u013b":"L","\u013c":"l","\u013d":"L","\u013e":"l","\u013f":"L","\u0140":"l","\u0141":"l","\u0142":"l","\u1e3e":"M","\u1e3f":"m","M\u0306":"M","m\u0306":"m","\u0143":"N","\u0144":"n","\u0145":"N","\u0146":"n","\u0147":"N","\u0148":"n","\u0149":"n","N\u0306":"N","n\u0306":"n","\u014c":"O","\u014d":"o","\u014e":"O","\u014f":"o","\u0150":"O","\u0151":"o","\u0152":"OE","\u0153":"oe","P\u0306":"P","p\u0306":"p","\u0154":"R","\u0155":"r","\u0156":"R","\u0157":"r","\u0158":"R","\u0159":"r","R\u0306":"R","r\u0306":"r","\u0212":"R","\u0213":"r","\u015a":"S","\u015b":"s","\u015c":"S","\u015d":"s","\u015e":"S","\u0218":"S","\u0219":"s","\u015f":"s","\u0160":"S","\u0161":"s","\u0162":"T","\u0163":"t","\u021b":"t","\u021a":"T","\u0164":"T","\u0165":"t","\u0166":"T","\u0167":"t","T\u0306":"T","t\u0306":"t","\u0168":"U","\u0169":"u","\u016a":"U","\u016b":"u","\u016c":"U","\u016d":"u","\u016e":"U","\u016f":"u","\u0170":"U","\u0171":"u","\u0172":"U","\u0173":"u","\u0216":"U","\u0217":"u","V\u0306":"V","v\u0306":"v","\u0174":"W","\u0175":"w","\u1e82":"W","\u1e83":"w","X\u0306":"X","x\u0306":"x","\u0176":"Y","\u0177":"y","\u0178":"Y","Y\u0306":"Y","y\u0306":"y","\u0179":"Z","\u017a":"z","\u017b":"Z","\u017c":"z","\u017d":"Z","\u017e":"z","\u017f":"s","\u0192":"f","\u01a0":"O","\u01a1":"o","\u01af":"U","\u01b0":"u","\u01cd":"A","\u01ce":"a","\u01cf":"I","\u01d0":"i","\u01d1":"O","\u01d2":"o","\u01d3":"U","\u01d4":"u","\u01d5":"U","\u01d6":"u","\u01d7":"U","\u01d8":"u","\u01d9":"U","\u01da":"u","\u01db":"U","\u01dc":"u","\u1ee8":"U","\u1ee9":"u","\u1e78":"U","\u1e79":"u","\u01fa":"A","\u01fb":"a","\u01fc":"AE","\u01fd":"ae","\u01fe":"O","\u01ff":"o","\xde":"TH","\xfe":"th","\u1e54":"P","\u1e55":"p","\u1e64":"S","\u1e65":"s","X\u0301":"X","x\u0301":"x","\u0403":"\u0413","\u0453":"\u0433","\u040c":"\u041a","\u045c":"\u043a","A\u030b":"A","a\u030b":"a","E\u030b":"E","e\u030b":"e","I\u030b":"I","i\u030b":"i","\u01f8":"N","\u01f9":"n","\u1ed2":"O","\u1ed3":"o","\u1e50":"O","\u1e51":"o","\u1eea":"U","\u1eeb":"u","\u1e80":"W","\u1e81":"w","\u1ef2":"Y","\u1ef3":"y","\u0200":"A","\u0201":"a","\u0204":"E","\u0205":"e","\u0208":"I","\u0209":"i","\u020c":"O","\u020d":"o","\u0210":"R","\u0211":"r","\u0214":"U","\u0215":"u","B\u030c":"B","b\u030c":"b","\u010c\u0323":"C","\u010d\u0323":"c","\xca\u030c":"E","\xea\u030c":"e","F\u030c":"F","f\u030c":"f","\u01e6":"G","\u01e7":"g","\u021e":"H","\u021f":"h","J\u030c":"J","\u01f0":"j","\u01e8":"K","\u01e9":"k","M\u030c":"M","m\u030c":"m","P\u030c":"P","p\u030c":"p","Q\u030c":"Q","q\u030c":"q","\u0158\u0329":"R","\u0159\u0329":"r","\u1e66":"S","\u1e67":"s","V\u030c":"V","v\u030c":"v","W\u030c":"W","w\u030c":"w","X\u030c":"X","x\u030c":"x","Y\u030c":"Y","y\u030c":"y","A\u0327":"A","a\u0327":"a","B\u0327":"B","b\u0327":"b","\u1e10":"D","\u1e11":"d","\u0228":"E","\u0229":"e","\u0190\u0327":"E","\u025b\u0327":"e","\u1e28":"H","\u1e29":"h","I\u0327":"I","i\u0327":"i","\u0197\u0327":"I","\u0268\u0327":"i","M\u0327":"M","m\u0327":"m","O\u0327":"O","o\u0327":"o","Q\u0327":"Q","q\u0327":"q","U\u0327":"U","u\u0327":"u","X\u0327":"X","x\u0327":"x","Z\u0327":"Z","z\u0327":"z"},n=Object.keys(t).join("|"),a=new RegExp(n,"g"),o=new RegExp(n,""),r=function(e){return e.replace(a,(function(e){return t[e]}))};e.exports=r,e.exports.has=function(e){return!!e.match(o)},e.exports.remove=r}},n={},function e(a){var o=n[a];if(void 0!==o)return o.exports;var r=n[a]={exports:{}};return t[a](r,r.exports,e),r.exports}(772))},23370:function(e){var t,n;e.exports=(t={705:e=>{e.exports=function(e,t){const n=[];return 0===t.length?n.push({text:e,highlight:!1}):t[0][0]>0&&n.push({text:e.slice(0,t[0][0]),highlight:!1}),t.forEach(((a,o)=>{const r=a[0],l=a[1];n.push({text:e.slice(r,l),highlight:!0}),o===t.length-1?l<e.length&&n.push({text:e.slice(l,e.length),highlight:!1}):l<t[o+1][0]&&n.push({text:e.slice(l,t[o+1][0]),highlight:!1})})),n}}},n={},function e(a){var o=n[a];if(void 0!==o)return o.exports;var r=n[a]={exports:{}};return t[a](r,r.exports,e),r.exports}(705))},1216:(e,t,n)=>{"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(67294),r=d(o),l=d(n(45697)),i=n(54081),s=d(n(38315)),c=d(n(38282)),u=d(n(40821));function d(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=0,g=0,b=0,v=0,E="data-lazyload-listened",y=[],O=[],Z=!1;try{var C=Object.defineProperty({},"passive",{get:function(){Z=!0}});window.addEventListener("test",null,C)}catch(T){}var j=!!Z&&{capture:!1,passive:!0},w=function(e){var t=e.ref;if(t instanceof HTMLElement){var n=(0,s.default)(t),a=e.props.overflow&&n!==t.ownerDocument&&n!==document&&n!==document.documentElement?function(e,t){var n=e.ref,a=void 0,o=void 0,r=void 0,l=void 0;try{var i=t.getBoundingClientRect();a=i.top,o=i.left,r=i.height,l=i.width}catch(T){a=h,o=g,r=v,l=b}var s=window.innerHeight||document.documentElement.clientHeight,c=window.innerWidth||document.documentElement.clientWidth,u=Math.max(a,0),d=Math.max(o,0),m=Math.min(s,a+r)-u,p=Math.min(c,o+l)-d,f=void 0,E=void 0,y=void 0,O=void 0;try{var Z=n.getBoundingClientRect();f=Z.top,E=Z.left,y=Z.height,O=Z.width}catch(T){f=h,E=g,y=v,O=b}var C=f-u,j=E-d,w=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return C-w[0]<=m&&C+y+w[1]>=0&&j-w[0]<=p&&j+O+w[1]>=0}(e,n):function(e){var t=e.ref;if(!(t.offsetWidth||t.offsetHeight||t.getClientRects().length))return!1;var n=void 0,a=void 0;try{var o=t.getBoundingClientRect();n=o.top,a=o.height}catch(T){n=h,a=v}var r=window.innerHeight||document.documentElement.clientHeight,l=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return n-l[0]<=r&&n+a+l[1]>=0}(e);a?e.visible||(e.props.once&&O.push(e),e.visible=!0,e.forceUpdate()):e.props.once&&e.visible||(e.visible=!1,e.props.unmountIfInvisible&&e.forceUpdate())}},S=function(){O.forEach((function(e){var t=y.indexOf(e);-1!==t&&y.splice(t,1)})),O=[]},N=function(){for(var e=0;e<y.length;++e){var t=y[e];w(t)}S()},_=void 0,k=null,x=function(e){function t(e){m(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.visible=!1,n.setRef=n.setRef.bind(n),n}return f(t,e),a(t,[{key:"componentDidMount",value:function(){var e=window,t=this.props.scrollContainer;t&&"string"==typeof t&&(e=e.document.querySelector(t));var n=void 0!==this.props.debounce&&"throttle"===_||"debounce"===_&&void 0===this.props.debounce;if(n&&((0,i.off)(e,"scroll",k,j),(0,i.off)(window,"resize",k,j),k=null),k||(void 0!==this.props.debounce?(k=(0,c.default)(N,"number"==typeof this.props.debounce?this.props.debounce:300),_="debounce"):void 0!==this.props.throttle?(k=(0,u.default)(N,"number"==typeof this.props.throttle?this.props.throttle:300),_="throttle"):k=N),this.props.overflow){var a=(0,s.default)(this.ref);if(a&&"function"==typeof a.getAttribute){var o=+a.getAttribute(E)+1;1===o&&a.addEventListener("scroll",k,j),a.setAttribute(E,o)}}else if(0===y.length||n){var r=this.props,l=r.scroll,d=r.resize;l&&(0,i.on)(e,"scroll",k,j),d&&(0,i.on)(window,"resize",k,j)}y.push(this),w(this)}},{key:"shouldComponentUpdate",value:function(){return this.visible}},{key:"componentWillUnmount",value:function(){if(this.props.overflow){var e=(0,s.default)(this.ref);if(e&&"function"==typeof e.getAttribute){var t=+e.getAttribute(E)-1;0===t?(e.removeEventListener("scroll",k,j),e.removeAttribute(E)):e.setAttribute(E,t)}}var n=y.indexOf(this);-1!==n&&y.splice(n,1),0===y.length&&"undefined"!=typeof window&&((0,i.off)(window,"resize",k,j),(0,i.off)(window,"scroll",k,j))}},{key:"setRef",value:function(e){e&&(this.ref=e)}},{key:"render",value:function(){var e=this.props,t=e.height,n=e.children,a=e.placeholder,o=e.className,l=e.classNamePrefix,i=e.style;return r.default.createElement("div",{className:l+"-wrapper "+o,ref:this.setRef,style:i},this.visible?n:a||r.default.createElement("div",{style:{height:t},className:l+"-placeholder"}))}}]),t}(o.Component);x.propTypes={className:l.default.string,classNamePrefix:l.default.string,once:l.default.bool,height:l.default.oneOfType([l.default.number,l.default.string]),offset:l.default.oneOfType([l.default.number,l.default.arrayOf(l.default.number)]),overflow:l.default.bool,resize:l.default.bool,scroll:l.default.bool,children:l.default.node,throttle:l.default.oneOfType([l.default.number,l.default.bool]),debounce:l.default.oneOfType([l.default.number,l.default.bool]),placeholder:l.default.node,scrollContainer:l.default.oneOfType([l.default.string,l.default.object]),unmountIfInvisible:l.default.bool,style:l.default.object},x.defaultProps={className:"",classNamePrefix:"lazyload",once:!1,offset:0,overflow:!1,resize:!1,scroll:!0,unmountIfInvisible:!1};t.ZP=x},38282:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var a=void 0,o=void 0,r=void 0,l=void 0,i=void 0,s=function s(){var c=+new Date-l;c<t&&c>=0?a=setTimeout(s,t-c):(a=null,n||(i=e.apply(r,o),a||(r=null,o=null)))};return function(){r=this,o=arguments,l=+new Date;var c=n&&!a;return a||(a=setTimeout(s,t)),c&&(i=e.apply(r,o),r=null,o=null),i}}},54081:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.on=function(e,t,n,a){a=a||!1,e.addEventListener?e.addEventListener(t,n,a):e.attachEvent&&e.attachEvent("on"+t,(function(t){n.call(e,t||window.event)}))},t.off=function(e,t,n,a){a=a||!1,e.removeEventListener?e.removeEventListener(t,n,a):e.detachEvent&&e.detachEvent("on"+t,n)}},38315:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!(e instanceof HTMLElement))return document.documentElement;for(var t="absolute"===e.style.position,n=/(scroll|auto)/,a=e;a;){if(!a.parentNode)return e.ownerDocument||document.documentElement;var o=window.getComputedStyle(a),r=o.position,l=o.overflow,i=o["overflow-x"],s=o["overflow-y"];if("static"===r&&t)a=a.parentNode;else{if(n.test(l)&&n.test(i)&&n.test(s))return a;a=a.parentNode}}return e.ownerDocument||e.documentElement||document.documentElement}},40821:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var a,o;return t||(t=250),function(){var r=n||this,l=+new Date,i=arguments;a&&l<a+t?(clearTimeout(o),o=setTimeout((function(){a=l,e.apply(r,i)}),t)):(a=l,e.apply(r,i))}}},16941:(e,t,n)=>{var a=n(51474),o=n(64045),r=n(67294),l=n(36038);function i(e){return e&&e.__esModule?e.default:e}function s(e,t,n,a){Object.defineProperty(e,t,{get:n,set:a,enumerable:!0,configurable:!0})}function c(e){null!==e.parentElement&&e.parentElement.removeChild(e)}function u(e){e.forEach((e=>c(e.element)))}function d(e){e.forEach((e=>{!function(e,t,n){const a=e.children[n]||null;e.insertBefore(t,a)}(e.parentElement,e.element,e.oldIndex)}))}function m(e,t){const n=g(e),a={parentElement:e.from};let o=[];switch(n){case"normal":o=[{element:e.item,newIndex:e.newIndex,oldIndex:e.oldIndex,parentElement:e.from}];break;case"swap":o=[{element:e.item,oldIndex:e.oldIndex,newIndex:e.newIndex,...a},{element:e.swapItem,oldIndex:e.newIndex,newIndex:e.oldIndex,...a}];break;case"multidrag":o=e.oldIndicies.map(((t,n)=>({element:t.multiDragElement,oldIndex:t.index,newIndex:e.newIndicies[n].index,...a})))}const r=function(e,t){const n=e.map((e=>({...e,item:t[e.oldIndex]}))).sort(((e,t)=>e.oldIndex-t.oldIndex));return n}(o,t);return r}function p(e,t){return h(e,f(e,t))}function f(e,t){const n=[...t];return e.concat().reverse().forEach((e=>n.splice(e.oldIndex,1))),n}function h(e,t,n,a){const o=[...t];return e.forEach((e=>{const t=a&&n&&a(e.item,n);o.splice(e.newIndex,0,t||e.item)})),o}function g(e){return e.oldIndicies&&e.oldIndicies.length>0?"multidrag":e.swapItem?"swap":"normal"}function b(e){const{list:t,setList:n,children:a,tag:o,style:r,className:l,clone:i,onAdd:s,onChange:c,onChoose:u,onClone:d,onEnd:m,onFilter:p,onRemove:f,onSort:h,onStart:g,onUnchoose:b,onUpdate:v,onMove:E,onSpill:y,onSelect:O,onDeselect:Z,...C}=e;return C}s(e.exports,"Sortable",(()=>$882b6d93070905b3$re_export$Sortable)),s(e.exports,"Direction",(()=>$882b6d93070905b3$re_export$Direction)),s(e.exports,"DOMRect",(()=>$882b6d93070905b3$re_export$DOMRect)),s(e.exports,"GroupOptions",(()=>$882b6d93070905b3$re_export$GroupOptions)),s(e.exports,"MoveEvent",(()=>$882b6d93070905b3$re_export$MoveEvent)),s(e.exports,"Options",(()=>$882b6d93070905b3$re_export$Options)),s(e.exports,"PullResult",(()=>$882b6d93070905b3$re_export$PullResult)),s(e.exports,"PutResult",(()=>$882b6d93070905b3$re_export$PutResult)),s(e.exports,"SortableEvent",(()=>$882b6d93070905b3$re_export$SortableEvent)),s(e.exports,"SortableOptions",(()=>$882b6d93070905b3$re_export$SortableOptions)),s(e.exports,"Utils",(()=>$882b6d93070905b3$re_export$Utils)),s(e.exports,"ReactSortable",(()=>E));const v={dragging:null};class E extends r.Component{static defaultProps={clone:e=>e};constructor(e){super(e),this.ref=(0,r.createRef)();const t=[...e.list].map((e=>Object.assign(e,{chosen:!1,selected:!1})));e.setList(t,this.sortable,v),i(l)(!e.plugins,'\nPlugins prop is no longer supported.\nInstead, mount it with "Sortable.mount(new MultiDrag())"\nPlease read the updated README.md at https://github.com/SortableJS/react-sortablejs.\n      ')}componentDidMount(){if(null===this.ref.current)return;const e=this.makeOptions();i(a).create(this.ref.current,e)}componentDidUpdate(e){e.disabled!==this.props.disabled&&this.sortable&&this.sortable.option("disabled",this.props.disabled)}render(){const{tag:e,style:t,className:n,id:a}=this.props,o={style:t,className:n,id:a},l=e&&null!==e?e:"div";return(0,r.createElement)(l,{ref:this.ref,...o},this.getChildren())}getChildren(){const{children:e,dataIdAttr:t,selectedClass:n="sortable-selected",chosenClass:a="sortable-chosen",dragClass:l="sortable-drag",fallbackClass:s="sortable-falback",ghostClass:c="sortable-ghost",swapClass:u="sortable-swap-highlight",filter:d="sortable-filter",list:m}=this.props;if(!e||null==e)return null;const p=t||"data-id";return r.Children.map(e,((e,t)=>{if(void 0===e)return;const l=m[t]||{},{className:s}=e.props,c="string"==typeof d&&{[d.replace(".","")]:!!l.filtered},u=i(o)(s,{[n]:l.selected,[a]:l.chosen,...c});return(0,r.cloneElement)(e,{[p]:e.key,className:u})}))}get sortable(){const e=this.ref.current;if(null===e)return null;const t=Object.keys(e).find((e=>e.includes("Sortable")));return t?e[t]:null}makeOptions(){const e=b(this.props);["onAdd","onChoose","onDeselect","onEnd","onRemove","onSelect","onSpill","onStart","onUnchoose","onUpdate"].forEach((t=>e[t]=this.prepareOnHandlerPropAndDOM(t))),["onChange","onClone","onFilter","onSort"].forEach((t=>e[t]=this.prepareOnHandlerProp(t)));return{...e,onMove:(e,t)=>{const{onMove:n}=this.props,a=e.willInsertAfter||-1;if(!n)return a;const o=n(e,t,this.sortable,v);return void 0!==o&&o}}}prepareOnHandlerPropAndDOM(e){return t=>{this.callOnHandlerProp(t,e),this[e](t)}}prepareOnHandlerProp(e){return t=>{this.callOnHandlerProp(t,e)}}callOnHandlerProp(e,t){const n=this.props[t];n&&n(e,this.sortable,v)}onAdd(e){const{list:t,setList:n,clone:a}=this.props,o=m(e,[...v.dragging.props.list]);u(o);n(h(o,t,e,a).map((e=>Object.assign(e,{selected:!1}))),this.sortable,v)}onRemove(e){const{list:t,setList:n}=this.props,a=g(e),o=m(e,t);d(o);let r=[...t];if("clone"!==e.pullMode)r=f(o,r);else{let t=o;switch(a){case"multidrag":t=o.map(((t,n)=>({...t,element:e.clones[n]})));break;case"normal":t=o.map((t=>({...t,element:e.clone})));break;default:i(l)(!0,`mode "${a}" cannot clone. Please remove "props.clone" from <ReactSortable/> when using the "${a}" plugin`)}u(t),o.forEach((t=>{const n=t.oldIndex,a=this.props.clone(t.item,e);r.splice(n,1,a)}))}r=r.map((e=>Object.assign(e,{selected:!1}))),n(r,this.sortable,v)}onUpdate(e){const{list:t,setList:n}=this.props,a=m(e,t);u(a),d(a);return n(p(a,t),this.sortable,v)}onStart(){v.dragging=this}onEnd(){v.dragging=null}onChoose(e){const{list:t,setList:n}=this.props;n(t.map(((t,n)=>{let a=t;return n===e.oldIndex&&(a=Object.assign(t,{chosen:!0})),a})),this.sortable,v)}onUnchoose(e){const{list:t,setList:n}=this.props;n(t.map(((t,n)=>{let a=t;return n===e.oldIndex&&(a=Object.assign(a,{chosen:!1})),a})),this.sortable,v)}onSpill(e){const{removeOnSpill:t,revertOnSpill:n}=this.props;t&&!n&&c(e.item)}onSelect(e){const{list:t,setList:n}=this.props,a=t.map((e=>Object.assign(e,{selected:!1})));e.newIndicies.forEach((t=>{const n=t.index;if(-1===n)return console.log(`"${e.type}" had indice of "${t.index}", which is probably -1 and doesn't usually happen here.`),void console.log(e);a[n].selected=!0})),n(a,this.sortable,v)}onDeselect(e){const{list:t,setList:n}=this.props,a=t.map((e=>Object.assign(e,{selected:!1})));e.newIndicies.forEach((e=>{const t=e.index;-1!==t&&(a[t].selected=!0)})),n(a,this.sortable,v)}}var y,O;y=e.exports,O={},Object.keys(O).forEach((function(e){"default"===e||"__esModule"===e||y.hasOwnProperty(e)||Object.defineProperty(y,e,{enumerable:!0,get:function(){return O[e]}})}))},64045:(e,t)=>{var n;!function(){"use strict";var a={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n)){if(n.length){var l=o.apply(null,n);l&&e.push(l)}}else if("object"===r)if(n.toString===Object.prototype.toString)for(var i in n)a.call(n,i)&&n[i]&&e.push(i);else e.push(n.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},36038:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var a=!0,o="Invariant failed";function r(e,t){if(!e){if(a)throw new Error(o);var n="function"==typeof t?t():t;throw new Error(n?o+": "+n:o)}}},51474:(e,t,n)=>{"use strict";function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i.apply(this,arguments)}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function c(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}n.r(t),n.d(t,{MultiDrag:()=>Zt,Sortable:()=>Ve,Swap:()=>dt,default:()=>wt});function d(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var m=d(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),p=d(/Edge/i),f=d(/firefox/i),h=d(/safari/i)&&!d(/chrome/i)&&!d(/android/i),g=d(/iP(ad|od|hone)/i),b=d(/chrome/i)&&d(/android/i),v={capture:!1,passive:!1};function E(e,t,n){e.addEventListener(t,n,!m&&v)}function y(e,t,n){e.removeEventListener(t,n,!m&&v)}function O(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(n){return!1}return!1}}function Z(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function C(e,t,n,a){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&O(e,t):O(e,t))||a&&e===n)return e;if(e===n)break}while(e=Z(e))}return null}var j,w=/\s+/g;function S(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var a=(" "+e.className+" ").replace(w," ").replace(" "+t+" "," ");e.className=(a+(n?" "+t:"")).replace(w," ")}}function N(e,t,n){var a=e&&e.style;if(a){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in a||-1!==t.indexOf("webkit")||(t="-webkit-"+t),a[t]=n+("string"==typeof n?"":"px")}}function _(e,t){var n="";if("string"==typeof e)n=e;else do{var a=N(e,"transform");a&&"none"!==a&&(n=a+" "+n)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function k(e,t,n){if(e){var a=e.getElementsByTagName(t),o=0,r=a.length;if(n)for(;o<r;o++)n(a[o],o);return a}return[]}function x(){var e=document.scrollingElement;return e||document.documentElement}function T(e,t,n,a,o){if(e.getBoundingClientRect||e===window){var r,l,i,s,c,u,d;if(e!==window&&e.parentNode&&e!==x()?(l=(r=e.getBoundingClientRect()).top,i=r.left,s=r.bottom,c=r.right,u=r.height,d=r.width):(l=0,i=0,s=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(o=o||e.parentNode,!m))do{if(o&&o.getBoundingClientRect&&("none"!==N(o,"transform")||n&&"static"!==N(o,"position"))){var p=o.getBoundingClientRect();l-=p.top+parseInt(N(o,"border-top-width")),i-=p.left+parseInt(N(o,"border-left-width")),s=l+r.height,c=i+r.width;break}}while(o=o.parentNode);if(a&&e!==window){var f=_(o||e),h=f&&f.a,g=f&&f.d;f&&(s=(l/=g)+(u/=g),c=(i/=h)+(d/=h))}return{top:l,left:i,bottom:s,right:c,width:d,height:u}}}function M(e,t,n){for(var a=R(e,!0),o=T(e)[t];a;){var r=T(a)[n];if(!("top"===n||"left"===n?o>=r:o<=r))return a;if(a===x())break;a=R(a,!1)}return!1}function P(e,t,n,a){for(var o=0,r=0,l=e.children;r<l.length;){if("none"!==l[r].style.display&&l[r]!==Ve.ghost&&(a||l[r]!==Ve.dragged)&&C(l[r],n.draggable,e,!1)){if(o===t)return l[r];o++}r++}return null}function A(e,t){for(var n=e.lastElementChild;n&&(n===Ve.ghost||"none"===N(n,"display")||t&&!O(n,t));)n=n.previousElementSibling;return n||null}function D(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Ve.clone||t&&!O(e,t)||n++;return n}function I(e){var t=0,n=0,a=x();if(e)do{var o=_(e),r=o.a,l=o.d;t+=e.scrollLeft*r,n+=e.scrollTop*l}while(e!==a&&(e=e.parentNode));return[t,n]}function R(e,t){if(!e||!e.getBoundingClientRect)return x();var n=e,a=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=N(n);if(n.clientWidth<n.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!n.getBoundingClientRect||n===document.body)return x();if(a||t)return n;a=!0}}}while(n=n.parentNode);return x()}function $(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function B(e,t){return function(){if(!j){var n=arguments;1===n.length?e.call(this,n[0]):e.apply(this,n),j=setTimeout((function(){j=void 0}),t)}}}function L(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function F(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function U(e,t){N(e,"position","absolute"),N(e,"top",t.top),N(e,"left",t.left),N(e,"width",t.width),N(e,"height",t.height)}function V(e){N(e,"position",""),N(e,"top",""),N(e,"left",""),N(e,"width",""),N(e,"height","")}var z="Sortable"+(new Date).getTime();function H(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==N(e,"display")&&e!==Ve.ghost){t.push({target:e,rect:T(e)});var n=o({},t[t.length-1].rect);if(e.thisAnimationDuration){var a=_(e,!0);a&&(n.top-=a.f,n.left-=a.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var a in t)if(t.hasOwnProperty(a)&&t[a]===e[n][a])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var a=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof n&&n());var o=!1,r=0;t.forEach((function(e){var t=0,n=e.target,l=n.fromRect,i=T(n),s=n.prevFromRect,c=n.prevToRect,u=e.rect,d=_(n,!0);d&&(i.top-=d.f,i.left-=d.e),n.toRect=i,n.thisAnimationDuration&&$(s,i)&&!$(l,i)&&(u.top-i.top)/(u.left-i.left)==(l.top-i.top)/(l.left-i.left)&&(t=function(e,t,n,a){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*a.animation}(u,s,c,a.options)),$(i,l)||(n.prevFromRect=l,n.prevToRect=i,t||(t=a.options.animation),a.animate(n,u,i,t)),t&&(o=!0,r=Math.max(r,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),o?e=setTimeout((function(){"function"==typeof n&&n()}),r):"function"==typeof n&&n(),t=[]},animate:function(e,t,n,a){if(a){N(e,"transition",""),N(e,"transform","");var o=_(this.el),r=o&&o.a,l=o&&o.d,i=(t.left-n.left)/(r||1),s=(t.top-n.top)/(l||1);e.animatingX=!!i,e.animatingY=!!s,N(e,"transform","translate3d("+i+"px,"+s+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),N(e,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),N(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){N(e,"transition",""),N(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),a)}}}}var W=[],Y={initializeByDefault:!0},X={mount:function(e){for(var t in Y)Y.hasOwnProperty(t)&&!(t in e)&&(e[t]=Y[t]);W.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),W.push(e)},pluginEvent:function(e,t,n){var a=this;this.eventCanceled=!1,n.cancel=function(){a.eventCanceled=!0};var r=e+"Global";W.forEach((function(a){t[a.pluginName]&&(t[a.pluginName][r]&&t[a.pluginName][r](o({sortable:t},n)),t.options[a.pluginName]&&t[a.pluginName][e]&&t[a.pluginName][e](o({sortable:t},n)))}))},initializePlugins:function(e,t,n,a){for(var o in W.forEach((function(a){var o=a.pluginName;if(e.options[o]||a.initializeByDefault){var r=new a(e,t,e.options);r.sortable=e,r.options=e.options,e[o]=r,i(n,r.defaults)}})),e.options)if(e.options.hasOwnProperty(o)){var r=this.modifyOption(e,o,e.options[o]);void 0!==r&&(e.options[o]=r)}},getEventProperties:function(e,t){var n={};return W.forEach((function(a){"function"==typeof a.eventProperties&&i(n,a.eventProperties.call(t[a.pluginName],e))})),n},modifyOption:function(e,t,n){var a;return W.forEach((function(o){e[o.pluginName]&&o.optionListeners&&"function"==typeof o.optionListeners[t]&&(a=o.optionListeners[t].call(e[o.pluginName],n))})),a}};function q(e){var t=e.sortable,n=e.rootEl,a=e.name,r=e.targetEl,l=e.cloneEl,i=e.toEl,s=e.fromEl,c=e.oldIndex,u=e.newIndex,d=e.oldDraggableIndex,f=e.newDraggableIndex,h=e.originalEvent,g=e.putSortable,b=e.extraEventProperties;if(t=t||n&&n[z]){var v,E=t.options,y="on"+a.charAt(0).toUpperCase()+a.substr(1);!window.CustomEvent||m||p?(v=document.createEvent("Event")).initEvent(a,!0,!0):v=new CustomEvent(a,{bubbles:!0,cancelable:!0}),v.to=i||n,v.from=s||n,v.item=r||n,v.clone=l,v.oldIndex=c,v.newIndex=u,v.oldDraggableIndex=d,v.newDraggableIndex=f,v.originalEvent=h,v.pullMode=g?g.lastPutMode:void 0;var O=o(o({},b),X.getEventProperties(a,t));for(var Z in O)v[Z]=O[Z];n&&n.dispatchEvent(v),E[y]&&E[y].call(t,v)}}var G=["evt"],K=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.evt,r=s(n,G);X.pluginEvent.bind(Ve)(e,t,o({dragEl:Q,parentEl:ee,ghostEl:te,rootEl:ne,nextEl:ae,lastDownEl:oe,cloneEl:re,cloneHidden:le,dragStarted:Ee,putSortable:me,activeSortable:Ve.active,originalEvent:a,oldIndex:ie,oldDraggableIndex:ce,newIndex:se,newDraggableIndex:ue,hideGhostForTarget:Be,unhideGhostForTarget:Le,cloneNowHidden:function(){le=!0},cloneNowShown:function(){le=!1},dispatchSortableEvent:function(e){J({sortable:t,name:e,originalEvent:a})}},r))};function J(e){q(o({putSortable:me,cloneEl:re,targetEl:Q,rootEl:ne,oldIndex:ie,oldDraggableIndex:ce,newIndex:se,newDraggableIndex:ue},e))}var Q,ee,te,ne,ae,oe,re,le,ie,se,ce,ue,de,me,pe,fe,he,ge,be,ve,Ee,ye,Oe,Ze,Ce,je=!1,we=!1,Se=[],Ne=!1,_e=!1,ke=[],xe=!1,Te=[],Me="undefined"!=typeof document,Pe=g,Ae=p||m?"cssFloat":"float",De=Me&&!b&&!g&&"draggable"in document.createElement("div"),Ie=function(){if(Me){if(m)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Re=function(e,t){var n=N(e),a=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=P(e,0,t),r=P(e,1,t),l=o&&N(o),i=r&&N(r),s=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+T(o).width,c=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+T(r).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&l.float&&"none"!==l.float){var u="left"===l.float?"left":"right";return!r||"both"!==i.clear&&i.clear!==u?"horizontal":"vertical"}return o&&("block"===l.display||"flex"===l.display||"table"===l.display||"grid"===l.display||s>=a&&"none"===n[Ae]||r&&"none"===n[Ae]&&s+c>a)?"vertical":"horizontal"},$e=function(e){function t(e,n){return function(a,o,r,l){var i=a.options.group.name&&o.options.group.name&&a.options.group.name===o.options.group.name;if(null==e&&(n||i))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(a,o,r,l),n)(a,o,r,l);var s=(n?a:o).options.group.name;return!0===e||"string"==typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var n={},a=e.group;a&&"object"==r(a)||(a={name:a}),n.name=a.name,n.checkPull=t(a.pull,!0),n.checkPut=t(a.put),n.revertClone=a.revertClone,e.group=n},Be=function(){!Ie&&te&&N(te,"display","none")},Le=function(){!Ie&&te&&N(te,"display","")};Me&&!b&&document.addEventListener("click",(function(e){if(we)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),we=!1,!1}),!0);var Fe=function(e){if(Q){e=e.touches?e.touches[0]:e;var t=(o=e.clientX,r=e.clientY,Se.some((function(e){var t=e[z].options.emptyInsertThreshold;if(t&&!A(e)){var n=T(e),a=o>=n.left-t&&o<=n.right+t,i=r>=n.top-t&&r<=n.bottom+t;return a&&i?l=e:void 0}})),l);if(t){var n={};for(var a in e)e.hasOwnProperty(a)&&(n[a]=e[a]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[z]._onDragOver(n)}}var o,r,l},Ue=function(e){Q&&Q.parentNode[z]._isOutsideThisEl(e.target)};function Ve(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=i({},t),e[z]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Re(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Ve.supportPointer&&"PointerEvent"in window&&!h,emptyInsertThreshold:5};for(var a in X.initializePlugins(this,e,n),n)!(a in t)&&(t[a]=n[a]);for(var o in $e(t),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&De,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?E(e,"pointerdown",this._onTapStart):(E(e,"mousedown",this._onTapStart),E(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(E(e,"dragover",this),E(e,"dragenter",this)),Se.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),i(this,H())}function ze(e,t,n,a,o,r,l,i){var s,c,u=e[z],d=u.options.onMove;return!window.CustomEvent||m||p?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=t,s.from=e,s.dragged=n,s.draggedRect=a,s.related=o||t,s.relatedRect=r||T(t),s.willInsertAfter=i,s.originalEvent=l,e.dispatchEvent(s),d&&(c=d.call(u,s,l)),c}function He(e){e.draggable=!1}function We(){xe=!1}function Ye(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,a=0;n--;)a+=t.charCodeAt(n);return a.toString(36)}function Xe(e){return setTimeout(e,0)}function qe(e){return clearTimeout(e)}Ve.prototype={constructor:Ve,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(ye=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,Q):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,a=this.options,o=a.preventOnFilter,r=e.type,l=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,i=(l||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||i,c=a.filter;if(function(e){Te.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var a=t[n];a.checked&&Te.push(a)}}(n),!Q&&!(/mousedown|pointerdown/.test(r)&&0!==e.button||a.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!h||!i||"SELECT"!==i.tagName.toUpperCase())&&!((i=C(i,a.draggable,n,!1))&&i.animated||oe===i)){if(ie=D(i),ce=D(i,a.draggable),"function"==typeof c){if(c.call(this,e,i,this))return J({sortable:t,rootEl:s,name:"filter",targetEl:i,toEl:n,fromEl:n}),K("filter",t,{evt:e}),void(o&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(a){if(a=C(s,a.trim(),n,!1))return J({sortable:t,rootEl:a,name:"filter",targetEl:i,fromEl:n,toEl:n}),K("filter",t,{evt:e}),!0}))))return void(o&&e.cancelable&&e.preventDefault());a.handle&&!C(s,a.handle,n,!1)||this._prepareDragStart(e,l,i)}}},_prepareDragStart:function(e,t,n){var a,o=this,r=o.el,l=o.options,i=r.ownerDocument;if(n&&!Q&&n.parentNode===r){var s=T(n);if(ne=r,ee=(Q=n).parentNode,ae=Q.nextSibling,oe=n,de=l.group,Ve.dragged=Q,pe={target:Q,clientX:(t||e).clientX,clientY:(t||e).clientY},be=pe.clientX-s.left,ve=pe.clientY-s.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,Q.style["will-change"]="all",a=function(){K("delayEnded",o,{evt:e}),Ve.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!f&&o.nativeDraggable&&(Q.draggable=!0),o._triggerDragStart(e,t),J({sortable:o,name:"choose",originalEvent:e}),S(Q,l.chosenClass,!0))},l.ignore.split(",").forEach((function(e){k(Q,e.trim(),He)})),E(i,"dragover",Fe),E(i,"mousemove",Fe),E(i,"touchmove",Fe),E(i,"mouseup",o._onDrop),E(i,"touchend",o._onDrop),E(i,"touchcancel",o._onDrop),f&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Q.draggable=!0),K("delayStart",this,{evt:e}),!l.delay||l.delayOnTouchOnly&&!t||this.nativeDraggable&&(p||m))a();else{if(Ve.eventCanceled)return void this._onDrop();E(i,"mouseup",o._disableDelayedDrag),E(i,"touchend",o._disableDelayedDrag),E(i,"touchcancel",o._disableDelayedDrag),E(i,"mousemove",o._delayedDragTouchMoveHandler),E(i,"touchmove",o._delayedDragTouchMoveHandler),l.supportPointer&&E(i,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(a,l.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Q&&He(Q),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;y(e,"mouseup",this._disableDelayedDrag),y(e,"touchend",this._disableDelayedDrag),y(e,"touchcancel",this._disableDelayedDrag),y(e,"mousemove",this._delayedDragTouchMoveHandler),y(e,"touchmove",this._delayedDragTouchMoveHandler),y(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?E(document,"pointermove",this._onTouchMove):E(document,t?"touchmove":"mousemove",this._onTouchMove):(E(Q,"dragend",this),E(ne,"dragstart",this._onDragStart));try{document.selection?Xe((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(e,t){if(je=!1,ne&&Q){K("dragStarted",this,{evt:t}),this.nativeDraggable&&E(document,"dragover",Ue);var n=this.options;!e&&S(Q,n.dragClass,!1),S(Q,n.ghostClass,!0),Ve.active=this,e&&this._appendGhost(),J({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(fe){this._lastX=fe.clientX,this._lastY=fe.clientY,Be();for(var e=document.elementFromPoint(fe.clientX,fe.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(fe.clientX,fe.clientY))!==t;)t=e;if(Q.parentNode[z]._isOutsideThisEl(e),t)do{if(t[z]){if(t[z]._onDragOver({clientX:fe.clientX,clientY:fe.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Le()}},_onTouchMove:function(e){if(pe){var t=this.options,n=t.fallbackTolerance,a=t.fallbackOffset,o=e.touches?e.touches[0]:e,r=te&&_(te,!0),l=te&&r&&r.a,i=te&&r&&r.d,s=Pe&&Ce&&I(Ce),c=(o.clientX-pe.clientX+a.x)/(l||1)+(s?s[0]-ke[0]:0)/(l||1),u=(o.clientY-pe.clientY+a.y)/(i||1)+(s?s[1]-ke[1]:0)/(i||1);if(!Ve.active&&!je){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(te){r?(r.e+=c-(he||0),r.f+=u-(ge||0)):r={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");N(te,"webkitTransform",d),N(te,"mozTransform",d),N(te,"msTransform",d),N(te,"transform",d),he=c,ge=u,fe=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!te){var e=this.options.fallbackOnBody?document.body:ne,t=T(Q,!0,Pe,!0,e),n=this.options;if(Pe){for(Ce=e;"static"===N(Ce,"position")&&"none"===N(Ce,"transform")&&Ce!==document;)Ce=Ce.parentNode;Ce!==document.body&&Ce!==document.documentElement?(Ce===document&&(Ce=x()),t.top+=Ce.scrollTop,t.left+=Ce.scrollLeft):Ce=x(),ke=I(Ce)}S(te=Q.cloneNode(!0),n.ghostClass,!1),S(te,n.fallbackClass,!0),S(te,n.dragClass,!0),N(te,"transition",""),N(te,"transform",""),N(te,"box-sizing","border-box"),N(te,"margin",0),N(te,"top",t.top),N(te,"left",t.left),N(te,"width",t.width),N(te,"height",t.height),N(te,"opacity","0.8"),N(te,"position",Pe?"absolute":"fixed"),N(te,"zIndex","100000"),N(te,"pointerEvents","none"),Ve.ghost=te,e.appendChild(te),N(te,"transform-origin",be/parseInt(te.style.width)*100+"% "+ve/parseInt(te.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,a=e.dataTransfer,o=n.options;K("dragStart",this,{evt:e}),Ve.eventCanceled?this._onDrop():(K("setupClone",this),Ve.eventCanceled||((re=F(Q)).removeAttribute("id"),re.draggable=!1,re.style["will-change"]="",this._hideClone(),S(re,this.options.chosenClass,!1),Ve.clone=re),n.cloneId=Xe((function(){K("clone",n),Ve.eventCanceled||(n.options.removeCloneOnHide||ne.insertBefore(re,Q),n._hideClone(),J({sortable:n,name:"clone"}))})),!t&&S(Q,o.dragClass,!0),t?(we=!0,n._loopId=setInterval(n._emulateDragOver,50)):(y(document,"mouseup",n._onDrop),y(document,"touchend",n._onDrop),y(document,"touchcancel",n._onDrop),a&&(a.effectAllowed="move",o.setData&&o.setData.call(n,a,Q)),E(document,"drop",n),N(Q,"transform","translateZ(0)")),je=!0,n._dragStartId=Xe(n._dragStarted.bind(n,t,e)),E(document,"selectstart",n),Ee=!0,h&&N(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,a,r,l=this.el,i=e.target,s=this.options,c=s.group,u=Ve.active,d=de===c,m=s.sort,p=me||u,f=this,h=!1;if(!xe){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),i=C(i,s.draggable,l,!0),$("dragOver"),Ve.eventCanceled)return h;if(Q.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||f._ignoreWhileAnimating===i)return F(!1);if(we=!1,u&&!s.disabled&&(d?m||(a=ee!==ne):me===this||(this.lastPutMode=de.checkPull(this,u,Q,e))&&c.checkPut(this,u,Q,e))){if(r="vertical"===this._getDirection(e,i),t=T(Q),$("dragOverValid"),Ve.eventCanceled)return h;if(a)return ee=ne,B(),this._hideClone(),$("revert"),Ve.eventCanceled||(ae?ne.insertBefore(Q,ae):ne.appendChild(Q)),F(!0);var g=A(l,s.draggable);if(!g||function(e,t,n){var a=T(A(n.el,n.options.draggable)),o=10;return t?e.clientX>a.right+o||e.clientX<=a.right&&e.clientY>a.bottom&&e.clientX>=a.left:e.clientX>a.right&&e.clientY>a.top||e.clientX<=a.right&&e.clientY>a.bottom+o}(e,r,this)&&!g.animated){if(g===Q)return F(!1);if(g&&l===e.target&&(i=g),i&&(n=T(i)),!1!==ze(ne,l,Q,t,i,n,e,!!i))return B(),g&&g.nextSibling?l.insertBefore(Q,g.nextSibling):l.appendChild(Q),ee=l,U(),F(!0)}else if(g&&function(e,t,n){var a=T(P(n.el,0,n.options,!0)),o=10;return t?e.clientX<a.left-o||e.clientY<a.top&&e.clientX<a.right:e.clientY<a.top-o||e.clientY<a.bottom&&e.clientX<a.left}(e,r,this)){var b=P(l,0,s,!0);if(b===Q)return F(!1);if(n=T(i=b),!1!==ze(ne,l,Q,t,i,n,e,!1))return B(),l.insertBefore(Q,b),ee=l,U(),F(!0)}else if(i.parentNode===l){n=T(i);var v,E,y,O=Q.parentNode!==l,Z=!function(e,t,n){var a=n?e.left:e.top,o=n?e.right:e.bottom,r=n?e.width:e.height,l=n?t.left:t.top,i=n?t.right:t.bottom,s=n?t.width:t.height;return a===l||o===i||a+r/2===l+s/2}(Q.animated&&Q.toRect||t,i.animated&&i.toRect||n,r),j=r?"top":"left",w=M(i,"top","top")||M(Q,"top","top"),_=w?w.scrollTop:void 0;if(ye!==i&&(E=n[j],Ne=!1,_e=!Z&&s.invertSwap||O),v=function(e,t,n,a,o,r,l,i){var s=a?e.clientY:e.clientX,c=a?n.height:n.width,u=a?n.top:n.left,d=a?n.bottom:n.right,m=!1;if(!l)if(i&&Ze<c*o){if(!Ne&&(1===Oe?s>u+c*r/2:s<d-c*r/2)&&(Ne=!0),Ne)m=!0;else if(1===Oe?s<u+Ze:s>d-Ze)return-Oe}else if(s>u+c*(1-o)/2&&s<d-c*(1-o)/2)return function(e){return D(Q)<D(e)?1:-1}(t);if((m=m||l)&&(s<u+c*r/2||s>d-c*r/2))return s>u+c/2?1:-1;return 0}(e,i,n,r,Z?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,_e,ye===i),0!==v){var k=D(Q);do{k-=v,y=ee.children[k]}while(y&&("none"===N(y,"display")||y===te))}if(0===v||y===i)return F(!1);ye=i,Oe=v;var x=i.nextElementSibling,I=!1,R=ze(ne,l,Q,t,i,n,e,I=1===v);if(!1!==R)return 1!==R&&-1!==R||(I=1===R),xe=!0,setTimeout(We,30),B(),I&&!x?l.appendChild(Q):i.parentNode.insertBefore(Q,I?x:i),w&&L(w,0,_-w.scrollTop),ee=Q.parentNode,void 0===E||_e||(Ze=Math.abs(E-T(i)[j])),U(),F(!0)}if(l.contains(Q))return F(!1)}return!1}function $(s,c){K(s,f,o({evt:e,isOwner:d,axis:r?"vertical":"horizontal",revert:a,dragRect:t,targetRect:n,canSort:m,fromSortable:p,target:i,completed:F,onMove:function(n,a){return ze(ne,l,Q,t,n,T(n),e,a)},changed:U},c))}function B(){$("dragOverAnimationCapture"),f.captureAnimationState(),f!==p&&p.captureAnimationState()}function F(t){return $("dragOverCompleted",{insertion:t}),t&&(d?u._hideClone():u._showClone(f),f!==p&&(S(Q,me?me.options.ghostClass:u.options.ghostClass,!1),S(Q,s.ghostClass,!0)),me!==f&&f!==Ve.active?me=f:f===Ve.active&&me&&(me=null),p===f&&(f._ignoreWhileAnimating=i),f.animateAll((function(){$("dragOverAnimationComplete"),f._ignoreWhileAnimating=null})),f!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(i===Q&&!Q.animated||i===l&&!i.animated)&&(ye=null),s.dragoverBubble||e.rootEl||i===document||(Q.parentNode[z]._isOutsideThisEl(e.target),!t&&Fe(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),h=!0}function U(){se=D(Q),ue=D(Q,s.draggable),J({sortable:f,name:"change",toEl:l,newIndex:se,newDraggableIndex:ue,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){y(document,"mousemove",this._onTouchMove),y(document,"touchmove",this._onTouchMove),y(document,"pointermove",this._onTouchMove),y(document,"dragover",Fe),y(document,"mousemove",Fe),y(document,"touchmove",Fe)},_offUpEvents:function(){var e=this.el.ownerDocument;y(e,"mouseup",this._onDrop),y(e,"touchend",this._onDrop),y(e,"pointerup",this._onDrop),y(e,"touchcancel",this._onDrop),y(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;se=D(Q),ue=D(Q,n.draggable),K("drop",this,{evt:e}),ee=Q&&Q.parentNode,se=D(Q),ue=D(Q,n.draggable),Ve.eventCanceled||(je=!1,_e=!1,Ne=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),qe(this.cloneId),qe(this._dragStartId),this.nativeDraggable&&(y(document,"drop",this),y(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),h&&N(document.body,"user-select",""),N(Q,"transform",""),e&&(Ee&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),te&&te.parentNode&&te.parentNode.removeChild(te),(ne===ee||me&&"clone"!==me.lastPutMode)&&re&&re.parentNode&&re.parentNode.removeChild(re),Q&&(this.nativeDraggable&&y(Q,"dragend",this),He(Q),Q.style["will-change"]="",Ee&&!je&&S(Q,me?me.options.ghostClass:this.options.ghostClass,!1),S(Q,this.options.chosenClass,!1),J({sortable:this,name:"unchoose",toEl:ee,newIndex:null,newDraggableIndex:null,originalEvent:e}),ne!==ee?(se>=0&&(J({rootEl:ee,name:"add",toEl:ee,fromEl:ne,originalEvent:e}),J({sortable:this,name:"remove",toEl:ee,originalEvent:e}),J({rootEl:ee,name:"sort",toEl:ee,fromEl:ne,originalEvent:e}),J({sortable:this,name:"sort",toEl:ee,originalEvent:e})),me&&me.save()):se!==ie&&se>=0&&(J({sortable:this,name:"update",toEl:ee,originalEvent:e}),J({sortable:this,name:"sort",toEl:ee,originalEvent:e})),Ve.active&&(null!=se&&-1!==se||(se=ie,ue=ce),J({sortable:this,name:"end",toEl:ee,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){K("nulling",this),ne=Q=ee=te=ae=re=oe=le=pe=fe=Ee=se=ue=ie=ce=ye=Oe=me=de=Ve.dragged=Ve.ghost=Ve.clone=Ve.active=null,Te.forEach((function(e){e.checked=!0})),Te.length=he=ge=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Q&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,a=0,o=n.length,r=this.options;a<o;a++)C(e=n[a],r.draggable,this.el,!1)&&t.push(e.getAttribute(r.dataIdAttr)||Ye(e));return t},sort:function(e,t){var n={},a=this.el;this.toArray().forEach((function(e,t){var o=a.children[t];C(o,this.options.draggable,a,!1)&&(n[e]=o)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(a.removeChild(n[e]),a.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return C(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var a=X.modifyOption(this,e,t);n[e]=void 0!==a?a:t,"group"===e&&$e(n)},destroy:function(){K("destroy",this);var e=this.el;e[z]=null,y(e,"mousedown",this._onTapStart),y(e,"touchstart",this._onTapStart),y(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(y(e,"dragover",this),y(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Se.splice(Se.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!le){if(K("hideClone",this),Ve.eventCanceled)return;N(re,"display","none"),this.options.removeCloneOnHide&&re.parentNode&&re.parentNode.removeChild(re),le=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(le){if(K("showClone",this),Ve.eventCanceled)return;Q.parentNode!=ne||this.options.group.revertClone?ae?ne.insertBefore(re,ae):ne.appendChild(re):ne.insertBefore(re,Q),this.options.group.revertClone&&this.animate(Q,re),N(re,"display",""),le=!1}}else this._hideClone()}},Me&&E(document,"touchmove",(function(e){(Ve.active||je)&&e.cancelable&&e.preventDefault()})),Ve.utils={on:E,off:y,css:N,find:k,is:function(e,t){return!!C(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:B,closest:C,toggleClass:S,clone:F,index:D,nextTick:Xe,cancelNextTick:qe,detectDirection:Re,getChild:P},Ve.get=function(e){return e[z]},Ve.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Ve.utils=o(o({},Ve.utils),e.utils)),X.mount(e)}))},Ve.create=function(e,t){return new Ve(e,t)},Ve.version="1.15.0";var Ge,Ke,Je,Qe,et,tt,nt=[],at=!1;function ot(){nt.forEach((function(e){clearInterval(e.pid)})),nt=[]}function rt(){clearInterval(tt)}var lt,it=B((function(e,t,n,a){if(t.scroll){var o,r=(e.touches?e.touches[0]:e).clientX,l=(e.touches?e.touches[0]:e).clientY,i=t.scrollSensitivity,s=t.scrollSpeed,c=x(),u=!1;Ke!==n&&(Ke=n,ot(),Ge=t.scroll,o=t.scrollFn,!0===Ge&&(Ge=R(n,!0)));var d=0,m=Ge;do{var p=m,f=T(p),h=f.top,g=f.bottom,b=f.left,v=f.right,E=f.width,y=f.height,O=void 0,Z=void 0,C=p.scrollWidth,j=p.scrollHeight,w=N(p),S=p.scrollLeft,_=p.scrollTop;p===c?(O=E<C&&("auto"===w.overflowX||"scroll"===w.overflowX||"visible"===w.overflowX),Z=y<j&&("auto"===w.overflowY||"scroll"===w.overflowY||"visible"===w.overflowY)):(O=E<C&&("auto"===w.overflowX||"scroll"===w.overflowX),Z=y<j&&("auto"===w.overflowY||"scroll"===w.overflowY));var k=O&&(Math.abs(v-r)<=i&&S+E<C)-(Math.abs(b-r)<=i&&!!S),M=Z&&(Math.abs(g-l)<=i&&_+y<j)-(Math.abs(h-l)<=i&&!!_);if(!nt[d])for(var P=0;P<=d;P++)nt[P]||(nt[P]={});nt[d].vx==k&&nt[d].vy==M&&nt[d].el===p||(nt[d].el=p,nt[d].vx=k,nt[d].vy=M,clearInterval(nt[d].pid),0==k&&0==M||(u=!0,nt[d].pid=setInterval(function(){a&&0===this.layer&&Ve.active._onTouchMove(et);var t=nt[this.layer].vy?nt[this.layer].vy*s:0,n=nt[this.layer].vx?nt[this.layer].vx*s:0;"function"==typeof o&&"continue"!==o.call(Ve.dragged.parentNode[z],n,t,e,et,nt[this.layer].el)||L(nt[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&m!==c&&(m=R(m,!1)));at=u}}),30),st=function(e){var t=e.originalEvent,n=e.putSortable,a=e.dragEl,o=e.activeSortable,r=e.dispatchSortableEvent,l=e.hideGhostForTarget,i=e.unhideGhostForTarget;if(t){var s=n||o;l();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(c.clientX,c.clientY);i(),s&&!s.el.contains(u)&&(r("spill"),this.onSpill({dragEl:a,putSortable:n}))}};function ct(){}function ut(){}function dt(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(e){var t=e.dragEl;lt=t},dragOverValid:function(e){var t=e.completed,n=e.target,a=e.onMove,o=e.activeSortable,r=e.changed,l=e.cancel;if(o.options.swap){var i=this.sortable.el,s=this.options;if(n&&n!==i){var c=lt;!1!==a(n)?(S(n,s.swapClass,!0),lt=n):lt=null,c&&c!==lt&&S(c,s.swapClass,!1)}r(),t(!0),l()}},drop:function(e){var t=e.activeSortable,n=e.putSortable,a=e.dragEl,o=n||this.sortable,r=this.options;lt&&S(lt,r.swapClass,!1),lt&&(r.swap||n&&n.options.swap)&&a!==lt&&(o.captureAnimationState(),o!==t&&t.captureAnimationState(),function(e,t){var n,a,o=e.parentNode,r=t.parentNode;if(!o||!r||o.isEqualNode(t)||r.isEqualNode(e))return;n=D(e),a=D(t),o.isEqualNode(r)&&n<a&&a++;o.insertBefore(t,o.children[n]),r.insertBefore(e,r.children[a])}(a,lt),o.animateAll(),o!==t&&t.animateAll())},nulling:function(){lt=null}},i(e,{pluginName:"swap",eventProperties:function(){return{swapItem:lt}}})}ct.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var a=P(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(t,a):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:st},i(ct,{pluginName:"revertOnSpill"}),ut.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:st},i(ut,{pluginName:"removeOnSpill"});var mt,pt,ft,ht,gt,bt=[],vt=[],Et=!1,yt=!1,Ot=!1;function Zt(){function e(e){for(var t in this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this));e.options.avoidImplicitDeselect||(e.options.supportPointer?E(document,"pointerup",this._deselectMultiDrag):(E(document,"mouseup",this._deselectMultiDrag),E(document,"touchend",this._deselectMultiDrag))),E(document,"keydown",this._checkKeyDown),E(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:!1,setData:function(t,n){var a="";bt.length&&pt===e?bt.forEach((function(e,t){a+=(t?", ":"")+e.textContent})):a=n.textContent,t.setData("Text",a)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){var t=e.dragEl;ft=t},delayEnded:function(){this.isMultiDrag=~bt.indexOf(ft)},setupClone:function(e){var t=e.sortable,n=e.cancel;if(this.isMultiDrag){for(var a=0;a<bt.length;a++)vt.push(F(bt[a])),vt[a].sortableIndex=bt[a].sortableIndex,vt[a].draggable=!1,vt[a].style["will-change"]="",S(vt[a],this.options.selectedClass,!1),bt[a]===ft&&S(vt[a],this.options.chosenClass,!1);t._hideClone(),n()}},clone:function(e){var t=e.sortable,n=e.rootEl,a=e.dispatchSortableEvent,o=e.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||bt.length&&pt===t&&(Ct(!0,n),a("clone"),o()))},showClone:function(e){var t=e.cloneNowShown,n=e.rootEl,a=e.cancel;this.isMultiDrag&&(Ct(!1,n),vt.forEach((function(e){N(e,"display","")})),t(),gt=!1,a())},hideClone:function(e){var t=this,n=(e.sortable,e.cloneNowHidden),a=e.cancel;this.isMultiDrag&&(vt.forEach((function(e){N(e,"display","none"),t.options.removeCloneOnHide&&e.parentNode&&e.parentNode.removeChild(e)})),n(),gt=!0,a())},dragStartGlobal:function(e){e.sortable;!this.isMultiDrag&&pt&&pt.multiDrag._deselectMultiDrag(),bt.forEach((function(e){e.sortableIndex=D(e)})),bt=bt.sort((function(e,t){return e.sortableIndex-t.sortableIndex})),Ot=!0},dragStarted:function(e){var t=this,n=e.sortable;if(this.isMultiDrag){if(this.options.sort&&(n.captureAnimationState(),this.options.animation)){bt.forEach((function(e){e!==ft&&N(e,"position","absolute")}));var a=T(ft,!1,!0,!0);bt.forEach((function(e){e!==ft&&U(e,a)})),yt=!0,Et=!0}n.animateAll((function(){yt=!1,Et=!1,t.options.animation&&bt.forEach((function(e){V(e)})),t.options.sort&&jt()}))}},dragOver:function(e){var t=e.target,n=e.completed,a=e.cancel;yt&&~bt.indexOf(t)&&(n(!1),a())},revert:function(e){var t=e.fromSortable,n=e.rootEl,a=e.sortable,o=e.dragRect;bt.length>1&&(bt.forEach((function(e){a.addAnimationState({target:e,rect:yt?T(e):o}),V(e),e.fromRect=o,t.removeAnimationState(e)})),yt=!1,function(e,t){bt.forEach((function(n,a){var o=t.children[n.sortableIndex+(e?Number(a):0)];o?t.insertBefore(n,o):t.appendChild(n)}))}(!this.options.removeCloneOnHide,n))},dragOverCompleted:function(e){var t=e.sortable,n=e.isOwner,a=e.insertion,o=e.activeSortable,r=e.parentEl,l=e.putSortable,i=this.options;if(a){if(n&&o._hideClone(),Et=!1,i.animation&&bt.length>1&&(yt||!n&&!o.options.sort&&!l)){var s=T(ft,!1,!0,!0);bt.forEach((function(e){e!==ft&&(U(e,s),r.appendChild(e))})),yt=!0}if(!n)if(yt||jt(),bt.length>1){var c=gt;o._showClone(t),o.options.animation&&!gt&&c&&vt.forEach((function(e){o.addAnimationState({target:e,rect:ht}),e.fromRect=ht,e.thisAnimationDuration=null}))}else o._showClone(t)}},dragOverAnimationCapture:function(e){var t=e.dragRect,n=e.isOwner,a=e.activeSortable;if(bt.forEach((function(e){e.thisAnimationDuration=null})),a.options.animation&&!n&&a.multiDrag.isMultiDrag){ht=i({},t);var o=_(ft,!0);ht.top-=o.f,ht.left-=o.e}},dragOverAnimationComplete:function(){yt&&(yt=!1,jt())},drop:function(e){var t=e.originalEvent,n=e.rootEl,a=e.parentEl,o=e.sortable,r=e.dispatchSortableEvent,l=e.oldIndex,i=e.putSortable,s=i||this.sortable;if(t){var c=this.options,u=a.children;if(!Ot)if(c.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),S(ft,c.selectedClass,!~bt.indexOf(ft)),~bt.indexOf(ft))bt.splice(bt.indexOf(ft),1),mt=null,q({sortable:o,rootEl:n,name:"deselect",targetEl:ft,originalEvent:t});else{if(bt.push(ft),q({sortable:o,rootEl:n,name:"select",targetEl:ft,originalEvent:t}),t.shiftKey&&mt&&o.el.contains(mt)){var d,m,p=D(mt),f=D(ft);if(~p&&~f&&p!==f)for(f>p?(m=p,d=f):(m=f,d=p+1);m<d;m++)~bt.indexOf(u[m])||(S(u[m],c.selectedClass,!0),bt.push(u[m]),q({sortable:o,rootEl:n,name:"select",targetEl:u[m],originalEvent:t}))}else mt=ft;pt=s}if(Ot&&this.isMultiDrag){if(yt=!1,(a[z].options.sort||a!==n)&&bt.length>1){var h=T(ft),g=D(ft,":not(."+this.options.selectedClass+")");if(!Et&&c.animation&&(ft.thisAnimationDuration=null),s.captureAnimationState(),!Et&&(c.animation&&(ft.fromRect=h,bt.forEach((function(e){if(e.thisAnimationDuration=null,e!==ft){var t=yt?T(e):h;e.fromRect=t,s.addAnimationState({target:e,rect:t})}}))),jt(),bt.forEach((function(e){u[g]?a.insertBefore(e,u[g]):a.appendChild(e),g++})),l===D(ft))){var b=!1;bt.forEach((function(e){e.sortableIndex===D(e)||(b=!0)})),b&&r("update")}bt.forEach((function(e){V(e)})),s.animateAll()}pt=s}(n===a||i&&"clone"!==i.lastPutMode)&&vt.forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))}},nullingGlobal:function(){this.isMultiDrag=Ot=!1,vt.length=0},destroyGlobal:function(){this._deselectMultiDrag(),y(document,"pointerup",this._deselectMultiDrag),y(document,"mouseup",this._deselectMultiDrag),y(document,"touchend",this._deselectMultiDrag),y(document,"keydown",this._checkKeyDown),y(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if(!(void 0!==Ot&&Ot||pt!==this.sortable||e&&C(e.target,this.options.draggable,this.sortable.el,!1)||e&&0!==e.button))for(;bt.length;){var t=bt[0];S(t,this.options.selectedClass,!1),bt.shift(),q({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:t,originalEvent:e})}},_checkKeyDown:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},i(e,{pluginName:"multiDrag",utils:{select:function(e){var t=e.parentNode[z];t&&t.options.multiDrag&&!~bt.indexOf(e)&&(pt&&pt!==t&&(pt.multiDrag._deselectMultiDrag(),pt=t),S(e,t.options.selectedClass,!0),bt.push(e))},deselect:function(e){var t=e.parentNode[z],n=bt.indexOf(e);t&&t.options.multiDrag&&~n&&(S(e,t.options.selectedClass,!1),bt.splice(n,1))}},eventProperties:function(){var e=this,t=[],n=[];return bt.forEach((function(a){var o;t.push({multiDragElement:a,index:a.sortableIndex}),o=yt&&a!==ft?-1:yt?D(a,":not(."+e.options.selectedClass+")"):D(a),n.push({multiDragElement:a,index:o})})),{items:c(bt),clones:[].concat(vt),oldIndicies:t,newIndicies:n}},optionListeners:{multiDragKey:function(e){return"ctrl"===(e=e.toLowerCase())?e="Control":e.length>1&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e}}})}function Ct(e,t){vt.forEach((function(n,a){var o=t.children[n.sortableIndex+(e?Number(a):0)];o?t.insertBefore(n,o):t.appendChild(n)}))}function jt(){bt.forEach((function(e){e!==ft&&e.parentNode&&e.parentNode.removeChild(e)}))}Ve.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?E(document,"dragover",this._handleAutoScroll):this.options.supportPointer?E(document,"pointermove",this._handleFallbackAutoScroll):t.touches?E(document,"touchmove",this._handleFallbackAutoScroll):E(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?y(document,"dragover",this._handleAutoScroll):(y(document,"pointermove",this._handleFallbackAutoScroll),y(document,"touchmove",this._handleFallbackAutoScroll),y(document,"mousemove",this._handleFallbackAutoScroll)),rt(),ot(),clearTimeout(j),j=void 0},nulling:function(){et=Ke=Ge=at=tt=Je=Qe=null,nt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,a=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,r=document.elementFromPoint(a,o);if(et=e,t||this.options.forceAutoScrollFallback||p||m||h){it(e,this.options,r,t);var l=R(r,!0);!at||tt&&a===Je&&o===Qe||(tt&&rt(),tt=setInterval((function(){var r=R(document.elementFromPoint(a,o),!0);r!==l&&(l=r,ot()),it(e,n.options,r,t)}),10),Je=a,Qe=o)}else{if(!this.options.bubbleScroll||R(r,!0)===x())return void ot();it(e,this.options,R(r,!1),!1)}}},i(e,{pluginName:"scroll",initializeByDefault:!0})}),Ve.mount(ut,ct);const wt=Ve}}]);