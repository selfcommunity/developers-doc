"use strict";(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[43286],{2783:(e,t,s)=>{s.d(t,{A:()=>c});var n=s(74848),a=s(96540),o=s(13550),r=s(98669);const i=[200,200],l=e=>{const{endpoint:t,params:s={},callback:n,data:r=null}=e,i=()=>{o.A.request({url:t.url(s),method:t.method,data:r}).then((e=>{n&&n(e)})).catch((()=>null))};return(0,a.useEffect)((()=>{let e;if(t)return e=setTimeout(i),()=>{e&&clearTimeout(e)}}),[]),null},c=e=>(0,n.jsx)(r.Ay,Object.assign({once:!0,offset:i},{children:(0,n.jsx)(l,Object.assign({},e))}))},34069:(e,t,s)=>{s.d(t,{A:()=>x});var n=s(85486),a=s(59703),o=s(96540),r=s(54533),i=s(75659),l=s(47859),c=s(25669),d=s(11848),u=s(38413),p=s(31609);function f(e){return(0,p.Ay)("MuiCardHeader",e)}const m=(0,u.A)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var h=s(74848);const v=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],g=(0,d.Ay)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>(0,a.A)({[`& .${m.title}`]:t.title,[`& .${m.subheader}`]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),y=(0,d.Ay)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),b=(0,d.Ay)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),A=(0,d.Ay)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"}),x=o.forwardRef((function(e,t){const s=(0,c.b)({props:e,name:"MuiCardHeader"}),{action:o,avatar:d,className:u,component:p="div",disableTypography:m=!1,subheader:x,subheaderTypographyProps:j,title:w,titleTypographyProps:M}=s,N=(0,n.A)(s,v),T=(0,a.A)({},s,{component:p,disableTypography:m}),O=(e=>{const{classes:t}=e;return(0,i.A)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},f,t)})(T);let _=w;null==_||_.type===l.A||m||(_=(0,h.jsx)(l.A,(0,a.A)({variant:d?"body2":"h5",className:O.title,component:"span",display:"block"},M,{children:_})));let S=x;return null==S||S.type===l.A||m||(S=(0,h.jsx)(l.A,(0,a.A)({variant:d?"body2":"body1",className:O.subheader,color:"text.secondary",component:"span",display:"block"},j,{children:S}))),(0,h.jsxs)(g,(0,a.A)({className:(0,r.A)(O.root,u),as:p,ref:t,ownerState:T},N,{children:[d&&(0,h.jsx)(y,{className:O.avatar,ownerState:T,children:d}),(0,h.jsxs)(A,{className:O.content,ownerState:T,children:[_,S]}),o&&(0,h.jsx)(b,{className:O.action,ownerState:T,children:o})]}))}))},43286:(e,t,s)=>{s.d(t,{A:()=>le});var n=s(31635),a=s(74848),o=s(96540),r=s(11848),i=s(71194),l=s(25292),c=s(42942),d=s(27365),u=s(23224),p=s.n(u),f=s(79197),m=s(67227),h=s(28692),v=s(3338),g=s(2877),y=s(75753),b=s(29368),A=s(13550),x=s(94520),j=s(86354),w=s(42269);const M=`${b.A.BroadcastMessagesList.url()}?limit=3`,N=(0,j.gN)(),T={results:[],next:M,previous:null,count:0},O=e=>{const{cacheStrategy:t=h.So.CACHE_FIRST}=e||{},s=t!==h.So.NETWORK_ONLY?h.Ay.get(N,null):null,[a,r]=(0,o.useState)(null!==s?s:T),[i,l]=(0,o.useState)(!s&&null),c=e=>(0,n.__awaiter)(void 0,void 0,void 0,(function*(){const t=(yield A.A.request({url:e,method:b.A.BroadcastMessagesList.method})).data;if(t.next&&!t.results[t.results.length-1].viewed_at){const e=yield c(t.next);return{results:t.results.concat(e.results),next:e.next,previous:null,count:e.count}}return t}));return{data:a,loading:i,fetchMessages:(e=!1)=>(0,n.__awaiter)(void 0,void 0,void 0,(function*(){return l(!0),c(e?M:a.next).then((t=>{const s=e?t:{results:[...a.results,...t.results],next:t.next,count:t.count,previous:t.previous};return r(s),l(!1),h.Ay.set(N,s),Promise.resolve(t)})).catch((e=>(x.V.error(w.K,e),Promise.reject())))})),setMessages:e=>{let t={results:[...e],next:a.next,count:Math.max(a.count-(a.results.length-e.length),0),previous:a.previous};return r(t),h.Ay.set(N,t),t}}};var _,S=s(47859),E=s(121),I=s(20973),C=s(34069),R=s(4671),L=s(3246),k=s(40059),P=s(44744),$=s(36870),H=s(59223),B=s(82241),D=s(58065),z=s(15906),F=s(2783),W=s(86857);!function(e){e.SNIPPET="snippet",e.DETAIL="detail",e.TOAST="toast"}(_||(_={}));var U=s(19546),q=s.n(U),K=s(20411),V=s(3341),Y=s(88352);const X="SCBroadcastMessages",G={root:`${X}-message-root`,header:`${X}-header`,title:`${X}-title`,media:`${X}-media`,content:`${X}-content`,listItemSnippet:`${X}-list-item-snippet`,listItemSnippetNew:`${X}-list-item-snippet-new`,messageIconWrap:`${X}-flag-icon-wrap`,messageIconSnippet:`${X}-flag-icon-snippet`},J=(0,r.Ay)(W.A,{name:X,slot:"MessageRoot"})((()=>({}))),Q=[v.Ej,v.pL];function Z(e){const{id:t=`message_${e.message.id}`,className:s,message:r,disableMarkRead:c=!1,onClose:u=null,onRead:p=null,template:f=_.DETAIL}=e,m=(0,n.__rest)(e,["id","className","message","disableMarkRead","onClose","onRead","template"]),[h,g]=(0,o.useState)(null===r.disposed_at),[j,w]=(0,o.useState)(!1),M=(0,o.useContext)(y.ql),N=(0,K.I$)(),T=(0,o.useMemo)((()=>{const e={};return Q.map((t=>e[t]=t in M.preferences?M.preferences[t].value:null)),e}),[M.preferences]),O=()=>{w(!0),A.A.request({url:b.A.BroadcastMessagesDispose.url(),method:b.A.BroadcastMessagesDispose.method,data:{banner_ids:[r.id]}}).then((()=>{g(!1),w(!1),u&&u(r)})).catch((e=>{x.V.error(z.d,e)}))},W=e=>{e.status<300&&p&&p(r)};(0,o.useEffect)((()=>{g(null===r.disposed_at)}),[r]);const U=e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.A,Object.assign({className:G.title},{children:(0,a.jsx)(S.A,Object.assign({variant:"h6"},{children:e.title}))})),e.image&&(0,a.jsx)(E.A,{className:G.media,component:"img",image:e.image,alt:e.title}),(e.body_text||e.link_text)&&(0,a.jsxs)(l.A,Object.assign({className:G.content},{children:[e.body_text&&(0,a.jsx)(S.A,Object.assign({variant:"body1",color:"text.secondary"},{children:e.body_text})),e.link_text&&(0,a.jsx)(S.A,Object.assign({variant:"body1",color:"text.secondary"},{children:(0,a.jsx)("a",Object.assign({href:e.link,target:e.open_in_new_tab?"_blank":"_self"},{children:e.link_text}))}))]}))]}),{banner:X}=r;return f===_.DETAIL||_.TOAST?(0,a.jsx)(J,Object.assign({id:t,className:q()(G.root,s)},m,{children:(0,a.jsx)(I.A,Object.assign({in:h,unmountOnExit:!0},{children:(0,a.jsxs)(i.A,{children:[null===r.viewed_at&&!c&&(0,a.jsx)(F.A,{endpoint:b.A.BroadcastMessagesMarkRead,data:{banner_ids:[r.id]},callback:W}),(0,a.jsx)(C.A,{className:G.header,avatar:(0,a.jsx)(d.A,{alt:T[v.pL],src:T[v.Ej]}),action:f===_.DETAIL&&(0,a.jsx)(R.A,Object.assign({"aria-label":"close",onClick:O,disabled:j},{children:j?(0,a.jsx)(L.A,{size:20}):(0,a.jsx)(k.A,{children:"close"})})),title:(0,a.jsx)(P.A,{color:"secondary",size:"small",label:(0,a.jsx)(D.A,{id:"ui.broadcastMessages.message.chip",defaultMessage:"ui.broadcastMessages.message.chip"})})}),U(X)]})}))})):(0,a.jsx)(J,Object.assign({id:t,className:s},m,{children:(0,a.jsxs)($.Ay,Object.assign({alignItems:"center",component:"div",classes:{root:q()(G.listItemSnippet,G.listItemSnippetNew)}},{children:[(0,a.jsx)(H.A,Object.assign({classes:{root:G.messageIconWrap}},{children:(0,a.jsx)(d.A,Object.assign({variant:"circular",classes:{root:G.messageIconSnippet}},{children:(0,a.jsx)(k.A,{children:"info"})}))})),(0,a.jsx)(B.A,{disableTypography:!0,primary:(0,a.jsx)(V.A,Object.assign({to:N.url(Y.USER_NOTIFICATIONS_ROUTE_NAME,{})},{children:(0,a.jsx)(S.A,Object.assign({component:"span",color:"inherit"},{children:X.title}))}))})]}))}))}var ee=s(44675),te=s(73785);const se={root:`${X}-message-skeleton-root`,header:`${X}-header`,title:`${X}-title`,media:`${X}-media`,content:`${X}-content`},ne=(0,r.Ay)(W.A,{name:X,slot:"MessageSkeletonRoot"})((()=>({})));function ae(e){const t=(0,ee.A)();return(0,a.jsxs)(ne,Object.assign({className:se.root},{children:[(0,a.jsx)(C.A,{className:se.header,avatar:(0,a.jsx)(te.A,{animation:"wave",variant:"circular",width:t.selfcommunity.user.avatar.sizeMedium,height:t.selfcommunity.user.avatar.sizeMedium}),title:(0,a.jsx)(te.A,{animation:"wave",variant:"rectangular",width:60,height:20})}),(0,a.jsx)(l.A,Object.assign({className:se.title},{children:(0,a.jsx)(o.Fragment,{children:(0,a.jsx)(te.A,{animation:"wave",height:10,width:"80%"})})})),(0,a.jsx)(i.A,Object.assign({className:se.media},{children:(0,a.jsx)(te.A,{height:190,animation:"wave",variant:"rectangular"})})),(0,a.jsx)(l.A,Object.assign({className:se.content},{children:(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)(te.A,{animation:"wave",height:10,width:"80%"}),(0,a.jsx)(te.A,{animation:"wave",height:10,width:60})]})}))]}))}(0,r.Ay)(i.A,{name:X,slot:"SkeletonRoot"})((()=>({})));const oe={root:`${X}-root`,boxLoadMore:`${X}-box-load-more`,avatarLoadMore:`${X}-avatar-load-more`,buttonLoadMore:`${X}-button-load-more`},re=(0,r.Ay)(i.A,{name:X,slot:"Root"})((()=>({}))),ie=[v.Ej,v.pL];const le=function(e){const t=(0,f.A)({props:e,name:X}),{id:s="broadcast_messages",className:r=null,MessageProps:u={},subscriptionChannel:b=`${m.f.INTERACTION}.${m.x.NOTIFICATION_BANNER}`,disableLoader:A=!1,viewAllMessages:x=!1,cacheStrategy:j=h.So.NETWORK_ONLY,onStateChange:w,onHeightChange:M}=t,N=(0,n.__rest)(t,["id","className","MessageProps","subscriptionChannel","disableLoader","viewAllMessages","cacheStrategy","onStateChange","onHeightChange"]),T=(0,g.X1)(),_=(0,y.Sw)(),S=(0,o.useMemo)((()=>{const e={};return ie.map((t=>e[t]=t in _.preferences?_.preferences[t].value:null)),e}),[_.preferences]),E=(0,o.useRef)(null),[I,C]=(0,o.useState)(x),{data:R,loading:L,fetchMessages:k,setMessages:P}=O({cacheStrategy:j}),$=T.user?T.user.id:null,H=R.results.filter((e=>!e.viewed_at)),B=R.count-H.length+1,z=e=>{P(R.results.filter((t=>t.id!=e.id))).results.length<=1&&k(!0)},F=e=>{const t=[...R.results];R.results.map(((s,n)=>{s.id===e.id&&(t[n]=Object.assign(Object.assign({},s),{viewed_at:new Date}))})),T.setUnseenNotificationBannersCounter(T.user.unseen_notification_banners_counter-1),P(t)},U=(0,o.useMemo)((()=>()=>{C(!0),(R.next&&I||R.next&&!I&&B<=2)&&k()}),[C,I,B,R.next,k]);(0,o.useEffect)((()=>{let e;if(null!==$&&j!==h.So.CACHE_FIRST)return e=setTimeout(k),()=>{e&&clearTimeout(e)}}),[$]);const K=(e,t)=>{k(!0),C(!1)};(0,o.useEffect)((()=>(E.current=p().subscribe(b,K),()=>{p().unsubscribe(E.current)})),[]),(0,o.useEffect)((()=>{w&&w({viewAllMessages:I,cacheStrategy:h.So.CACHE_FIRST,disableLoader:!0}),M&&M()}),[R.results.length,L,I,j]);const V=[...H,...R.results.slice(H.length,I?B:1)];return(0,a.jsxs)(re,Object.assign({id:s,className:q()(oe.root,r)},N,{children:[V.map(((e,t)=>(0,a.jsx)(i.A,{children:(0,a.jsx)(Z,Object.assign({message:e},u,{onClose:z,onRead:F}))},t))),L&&!A&&(0,a.jsx)(ae,{}),null!==L&&!L&&(R.next||R.count>1&&B>0&&!I)&&(0,a.jsx)(W.A,Object.assign({className:oe.boxLoadMore},{children:(0,a.jsx)(l.A,{children:(0,a.jsxs)(c.A,Object.assign({variant:"text",onClick:U,disabled:L,color:"inherit",classes:{root:oe.buttonLoadMore}},{children:[(0,a.jsx)(d.A,{component:"span",className:oe.avatarLoadMore,alt:S[v.pL],src:S[v.Ej]}),(0,a.jsx)(D.A,{id:"ui.broadcastMessages.loadMore",defaultMessage:"ui.broadcastMessages.loadMore"})]}))})}))]}))}},59223:(e,t,s)=>{s.d(t,{A:()=>g});var n=s(85486),a=s(59703),o=s(96540),r=s(54533),i=s(75659),l=s(32850),c=s(11848),d=s(25669),u=s(38413),p=s(31609);function f(e){return(0,p.Ay)("MuiListItemAvatar",e)}(0,u.A)("MuiListItemAvatar",["root","alignItemsFlexStart"]);var m=s(74848);const h=["className"],v=(0,c.Ay)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,"flex-start"===s.alignItems&&t.alignItemsFlexStart]}})((({ownerState:e})=>(0,a.A)({minWidth:56,flexShrink:0},"flex-start"===e.alignItems&&{marginTop:8}))),g=o.forwardRef((function(e,t){const s=(0,d.b)({props:e,name:"MuiListItemAvatar"}),{className:c}=s,u=(0,n.A)(s,h),p=o.useContext(l.A),g=(0,a.A)({},s,{alignItems:p.alignItems}),y=(e=>{const{alignItems:t,classes:s}=e,n={root:["root","flex-start"===t&&"alignItemsFlexStart"]};return(0,i.A)(n,f,s)})(g);return(0,m.jsx)(v,(0,a.A)({className:(0,r.A)(y.root,c),ownerState:g,ref:t},u))}))},68081:(e,t,s)=>{s.d(t,{A:()=>r,b:()=>o});var n=s(38413),a=s(31609);function o(e){return(0,a.Ay)("MuiListItemText",e)}const r=(0,n.A)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"])},77334:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!(e instanceof HTMLElement))return document.documentElement;for(var t="absolute"===e.style.position,s=/(scroll|auto)/,n=e;n;){if(!n.parentNode)return e.ownerDocument||document.documentElement;var a=window.getComputedStyle(n),o=a.position,r=a.overflow,i=a["overflow-x"],l=a["overflow-y"];if("static"===o&&t)n=n.parentNode;else{if(s.test(r)&&s.test(i)&&s.test(l))return n;n=n.parentNode}}return e.ownerDocument||e.documentElement||document.documentElement}},82241:(e,t,s)=>{s.d(t,{A:()=>v});var n=s(85486),a=s(59703),o=s(96540),r=s(54533),i=s(75659),l=s(47859),c=s(32850),d=s(25669),u=s(11848),p=s(68081),f=s(74848);const m=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],h=(0,u.Ay)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[{[`& .${p.A.primary}`]:t.primary},{[`& .${p.A.secondary}`]:t.secondary},t.root,s.inset&&t.inset,s.primary&&s.secondary&&t.multiline,s.dense&&t.dense]}})((({ownerState:e})=>(0,a.A)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},e.primary&&e.secondary&&{marginTop:6,marginBottom:6},e.inset&&{paddingLeft:56}))),v=o.forwardRef((function(e,t){const s=(0,d.b)({props:e,name:"MuiListItemText"}),{children:u,className:v,disableTypography:g=!1,inset:y=!1,primary:b,primaryTypographyProps:A,secondary:x,secondaryTypographyProps:j}=s,w=(0,n.A)(s,m),{dense:M}=o.useContext(c.A);let N=null!=b?b:u,T=x;const O=(0,a.A)({},s,{disableTypography:g,inset:y,primary:!!N,secondary:!!T,dense:M}),_=(e=>{const{classes:t,inset:s,primary:n,secondary:a,dense:o}=e,r={root:["root",s&&"inset",o&&"dense",n&&a&&"multiline"],primary:["primary"],secondary:["secondary"]};return(0,i.A)(r,p.b,t)})(O);return null==N||N.type===l.A||g||(N=(0,f.jsx)(l.A,(0,a.A)({variant:M?"body2":"body1",className:_.primary,component:null!=A&&A.variant?void 0:"span",display:"block"},A,{children:N}))),null==T||T.type===l.A||g||(T=(0,f.jsx)(l.A,(0,a.A)({variant:"body2",className:_.secondary,color:"text.secondary",display:"block"},j,{children:T}))),(0,f.jsxs)(h,(0,a.A)({className:(0,r.A)(_.root,v),ownerState:O,ref:t},w,{children:[N,T]}))}))},84567:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){var n,a;return t||(t=250),function(){var o=s||this,r=+new Date,i=arguments;n&&r<n+t?(clearTimeout(a),a=setTimeout((function(){n=r,e.apply(o,i)}),t)):(n=r,e.apply(o,i))}}},88579:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.on=function(e,t,s,n){n=n||!1,e.addEventListener?e.addEventListener(t,s,n):e.attachEvent&&e.attachEvent("on"+t,(function(t){s.call(e,t||window.event)}))},t.off=function(e,t,s,n){n=n||!1,e.removeEventListener?e.removeEventListener(t,s,n):e.detachEvent&&e.detachEvent("on"+t,s)}},93428:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){var n=void 0,a=void 0,o=void 0,r=void 0,i=void 0,l=function l(){var c=+new Date-r;c<t&&c>=0?n=setTimeout(l,t-c):(n=null,s||(i=e.apply(o,a),n||(o=null,a=null)))};return function(){o=this,a=arguments,r=+new Date;var c=s&&!n;return n||(n=setTimeout(l,t)),c&&(i=e.apply(o,a),o=null,a=null),i}}},98669:(e,t,s)=>{var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}(),a=s(96540),o=u(a),r=u(s(5556)),i=s(88579),l=u(s(77334)),c=u(s(93428)),d=u(s(84567));function u(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=0,v=0,g=0,y=0,b="data-lazyload-listened",A=[],x=[],j=!1;try{var w=Object.defineProperty({},"passive",{get:function(){j=!0}});window.addEventListener("test",null,w)}catch(I){}var M=!!j&&{capture:!1,passive:!0},N=function(e){var t=e.ref;if(t instanceof HTMLElement){var s=(0,l.default)(t),n=e.props.overflow&&s!==t.ownerDocument&&s!==document&&s!==document.documentElement?function(e,t){var s=e.ref,n=void 0,a=void 0,o=void 0,r=void 0;try{var i=t.getBoundingClientRect();n=i.top,a=i.left,o=i.height,r=i.width}catch(I){n=h,a=v,o=y,r=g}var l=window.innerHeight||document.documentElement.clientHeight,c=window.innerWidth||document.documentElement.clientWidth,d=Math.max(n,0),u=Math.max(a,0),p=Math.min(l,n+o)-d,f=Math.min(c,a+r)-u,m=void 0,b=void 0,A=void 0,x=void 0;try{var j=s.getBoundingClientRect();m=j.top,b=j.left,A=j.height,x=j.width}catch(I){m=h,b=v,A=y,x=g}var w=m-d,M=b-u,N=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return w-N[0]<=p&&w+A+N[1]>=0&&M-N[0]<=f&&M+x+N[1]>=0}(e,s):function(e){var t=e.ref;if(!(t.offsetWidth||t.offsetHeight||t.getClientRects().length))return!1;var s=void 0,n=void 0;try{var a=t.getBoundingClientRect();s=a.top,n=a.height}catch(I){s=h,n=y}var o=window.innerHeight||document.documentElement.clientHeight,r=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return s-r[0]<=o&&s+n+r[1]>=0}(e);n?e.visible||(e.props.once&&x.push(e),e.visible=!0,e.forceUpdate()):e.props.once&&e.visible||(e.visible=!1,e.props.unmountIfInvisible&&e.forceUpdate())}},T=function(){x.forEach((function(e){var t=A.indexOf(e);-1!==t&&A.splice(t,1)})),x=[]},O=function(){for(var e=0;e<A.length;++e){var t=A[e];N(t)}T()},_=void 0,S=null,E=function(e){function t(e){p(this,t);var s=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.visible=!1,s.setRef=s.setRef.bind(s),s}return m(t,e),n(t,[{key:"componentDidMount",value:function(){var e=window,t=this.props.scrollContainer;t&&"string"==typeof t&&(e=e.document.querySelector(t));var s=void 0!==this.props.debounce&&"throttle"===_||"debounce"===_&&void 0===this.props.debounce;if(s&&((0,i.off)(e,"scroll",S,M),(0,i.off)(window,"resize",S,M),S=null),S||(void 0!==this.props.debounce?(S=(0,c.default)(O,"number"==typeof this.props.debounce?this.props.debounce:300),_="debounce"):void 0!==this.props.throttle?(S=(0,d.default)(O,"number"==typeof this.props.throttle?this.props.throttle:300),_="throttle"):S=O),this.props.overflow){var n=(0,l.default)(this.ref);if(n&&"function"==typeof n.getAttribute){var a=+n.getAttribute(b)+1;1===a&&n.addEventListener("scroll",S,M),n.setAttribute(b,a)}}else if(0===A.length||s){var o=this.props,r=o.scroll,u=o.resize;r&&(0,i.on)(e,"scroll",S,M),u&&(0,i.on)(window,"resize",S,M)}A.push(this),N(this)}},{key:"shouldComponentUpdate",value:function(){return this.visible}},{key:"componentWillUnmount",value:function(){if(this.props.overflow){var e=(0,l.default)(this.ref);if(e&&"function"==typeof e.getAttribute){var t=+e.getAttribute(b)-1;0===t?(e.removeEventListener("scroll",S,M),e.removeAttribute(b)):e.setAttribute(b,t)}}var s=A.indexOf(this);-1!==s&&A.splice(s,1),0===A.length&&"undefined"!=typeof window&&((0,i.off)(window,"resize",S,M),(0,i.off)(window,"scroll",S,M))}},{key:"setRef",value:function(e){e&&(this.ref=e)}},{key:"render",value:function(){var e=this.props,t=e.height,s=e.children,n=e.placeholder,a=e.className,r=e.classNamePrefix,i=e.style;return o.default.createElement("div",{className:r+"-wrapper "+a,ref:this.setRef,style:i},this.visible?s:n||o.default.createElement("div",{style:{height:t},className:r+"-placeholder"}))}}]),t}(a.Component);E.propTypes={className:r.default.string,classNamePrefix:r.default.string,once:r.default.bool,height:r.default.oneOfType([r.default.number,r.default.string]),offset:r.default.oneOfType([r.default.number,r.default.arrayOf(r.default.number)]),overflow:r.default.bool,resize:r.default.bool,scroll:r.default.bool,children:r.default.node,throttle:r.default.oneOfType([r.default.number,r.default.bool]),debounce:r.default.oneOfType([r.default.number,r.default.bool]),placeholder:r.default.node,scrollContainer:r.default.oneOfType([r.default.string,r.default.object]),unmountIfInvisible:r.default.bool,style:r.default.object},E.defaultProps={className:"",classNamePrefix:"lazyload",once:!1,offset:0,overflow:!1,resize:!1,scroll:!0,unmountIfInvisible:!1};t.Ay=E}}]);