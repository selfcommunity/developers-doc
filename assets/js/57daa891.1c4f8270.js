/*! For license information please see 57daa891.1c4f8270.js.LICENSE.txt */
(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[97103],{92991:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(67294),o=n(27331),s=n(5730);function i(e,t){void 0===e&&(e=""),void 0===t&&(t={});const n=Object.keys(t).map((e=>encodeURIComponent(e)+"="+encodeURIComponent(t[e]))).join("&");return fetch(e,{method:"POST",headers:{accept:"application/json","content-type":"application/x-www-form-urlencoded"},body:n})}function c(){if((0,s.Z)()){const e={refresh_token:JSON.parse(window.localStorage.getItem("token")).refresh_token,client_id:o.r.user.client_id,grant_type:"refresh_token"};return i(`${o.r.portal}/oauth/token/`,e).then((e=>e.json())).then((e=>({accessToken:e.access_token,refreshToken:e.refresh_token,tokenType:e.token_type,expiresIn:e.expires_in}))).catch((e=>Promise.reject(e)))}}function u(){const e=(0,s.Z)(),[t,n]=(0,r.useState)(e?JSON.parse(window.localStorage.getItem("token")):"");return(0,r.useEffect)((()=>{e&&(!t||1e3*t.expiresIn<Date.now()?i(`${o.r.portal}/oauth/token/`,o.r.user).then((e=>e.json())).then((e=>({accessToken:e.access_token,refreshToken:e.refresh_token,tokenType:e.token_type,expiresIn:e.expires_in}))).catch((e=>e)).then((e=>{n(e)})):e&&n(JSON.parse(window.localStorage.getItem("token"))))}),[e]),(0,r.useEffect)((()=>{e&&window.localStorage.setItem("token",JSON.stringify(t))}),[e,t]),t}var a=n(76171),d=n(89521),l=n(19666),m=n(85893);function h(e){let{children:t}=e;const n=u(),r={portal:o.r.portal,locale:{default:"en"},session:{type:"OAuth",clientId:o.r.user.client_id,authToken:n,handleRefreshToken:c},theme:d.Z,handleAnonymousAction:()=>{alert("Anonymous action")}};return(0,m.jsx)(l.Z,{children:()=>(0,m.jsx)(a.ZP,{conf:r,children:t})})}},27331:(e,t,n)=>{"use strict";n.d(t,{r:()=>r});const r={user:{username:"beatrice",password:"Password!!Beatrice2021",client_id:"XJjPE54IBBjhibs0Rf0wZ969cZNPq6WjC02FrkaM",grant_type:"password"},portal:"https://api.fashionista.community"}},24742:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>u,default:()=>h,frontMatter:()=>c,metadata:()=>a,toc:()=>l});var r=n(85893),o=n(11151),s=n(92991),i=n(44854);const c={sidebar_label:"Custom Adv",sidebar_position:1,title:"Custom Adv"},u=void 0,a={id:"sdk/community-js/react-ui/Components/CustomAdv",title:"Custom Adv",description:"The Custom Adv component renders custom adv banners.",source:"@site/docs/sdk/community-js/react-ui/Components/CustomAdv.mdx",sourceDirName:"sdk/community-js/react-ui/Components",slug:"/sdk/community-js/react-ui/Components/CustomAdv",permalink:"/docs/sdk/community-js/react-ui/Components/CustomAdv",draft:!1,unlisted:!1,editUrl:"https://github.com/selfcommunity/developers-doc/tree/main/docs/sdk/community-js/react-ui/Components/CustomAdv.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_label:"Custom Adv",sidebar_position:1,title:"Custom Adv"},sidebar:"sdkSidebar",previous:{title:"Comments Feed Object",permalink:"/docs/sdk/community-js/react-ui/Components/CommentsFeedObject"},next:{title:"Editor",permalink:"/docs/sdk/community-js/react-ui/Components/Editor"}},d={},l=[{value:"Usage",id:"usage",level:4}];function m(e){const t={blockquote:"blockquote",code:"code",h4:"h4",p:"p",pre:"pre",...(0,o.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsx)(t.p,{children:"The Custom Adv component renders custom adv banners."}),"\n"]}),"\n","\n","\n",(0,r.jsx)(s.Z,{children:(0,r.jsx)(i.Z,{})}),"\n",(0,r.jsx)(t.h4,{id:"usage",children:"Usage"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-jsx",children:" import React from 'react';\n import {SCContextProvider} from '@selfcommunity/react-core';\n import {CustomAdv} from '@selfcommunity/react-ui';\n\n function App() {\n   const conf = {\n     portal: '<community-path>',\n     session: {\n       type: 'OAuth',\n       token: '<community-token>',\n       refreshToken: '<community-refresh-token>',\n       refreshTokenEndpoint: '<community-refresh-endpoint>',\n     },\n   };\n   return (\n     <SCContextProvider conf={conf}><CustomAdv /></SCContextProvider>\n   );\n }\n"})})]})}function h(e={}){const{wrapper:t}={...(0,o.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}},94253:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var r=n(83117),o=n(80102),s=n(67294),i=n(63961),c=n(74854),u=n(18784),a=n(87893),d=n(71713),l=n(85893);const m=["className","component"];var h=n(37078),p=n(75389),f=n(10606);const v=(0,n(1588).Z)("MuiBox",["root"]),_=(0,p.Z)(),g=function(e={}){const{themeId:t,defaultTheme:n,defaultClassName:h="MuiBox-root",generateClassName:p}=e,f=(0,c.default)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(u.Z);return s.forwardRef((function(e,s){const c=(0,d.Z)(n),u=(0,a.Z)(e),{className:v,component:_="div"}=u,g=(0,o.Z)(u,m);return(0,l.jsx)(f,(0,r.Z)({as:_,ref:s,className:(0,i.Z)(v,p?p(h):h),theme:t&&c[t]||c},g))}))}({themeId:f.Z,defaultTheme:_,defaultClassName:v.root,generateClassName:h.Z.generate}),C=g},71713:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(67348),o=n(2952);const s=(0,r.Z)();const i=function(e=s){return(0,o.Z)(e)}},69721:(e,t,n)=>{"use strict";n.d(t,{AL:()=>i,DC:()=>y,Em:()=>l,G8:()=>k,Gp:()=>$,I$:()=>Z,L4:()=>m,M7:()=>_,NX:()=>c,Nj:()=>j,Nm:()=>M,Ny:()=>u,R4:()=>E,Rg:()=>f,Tb:()=>T,X5:()=>S,Z4:()=>g,ZV:()=>w,_Z:()=>C,_j:()=>r,b0:()=>d,eg:()=>b,ht:()=>o,hu:()=>H,k5:()=>v,mK:()=>x,oE:()=>I,ol:()=>R,t9:()=>p,u5:()=>a,wp:()=>P,wv:()=>A,xh:()=>W,zL:()=>O,zj:()=>N});const r=(e,t)=>`_fo_${t}_${e}`,o=e=>`_co_${e}`,s="_cos_",i=(e,t,n)=>`${s}${t}_${e}_${n}`,c=(e,t)=>`${s}${t}_${e}`,u=()=>"_cas_",a=e=>`_ca_${e}`,d=e=>`_grp_${e}`,l=()=>"_grps_",m=e=>`_inc_${e}`,h="_contr_",p=(e,t,n)=>`${h}${t}_${e}_${n}`,f=()=>"_bcms_",v=(e,t)=>`_feed_${e}_${t}`,_=e=>`_feed_st_${e}`,g=e=>`_virtualized_scroll_st_${e}`,C=e=>`_feed_spos_${e}`,b=e=>`_adv_${e}`,x=()=>"_pmss_",k=e=>`_pms_${e}`,S="_cFolWidget_",y="_cSugWidget_",w="_cPopWidget_",Z="_uFolWidget_",j="_uFoldWidget_",A="_uConWidget_",E="_uConReqWidget_",$="_uConReqSentWidget_",R="_fTrendWidget_",T="_rFeedWidget_",N="_pTrendWidget_",I="_pSugWidget_",P="_iListWidget_",W="_iSugWidget_",M="_pSugWidget_",O="_gSubWidget_",H=(e,t=void 0)=>`${e}${void 0!==t?t:""}`},44854:(e,t,n)=>{"use strict";n.d(t,{Z:()=>k});var r=n(67294),o=n(90948),s=n(94253),i=n(22319),c=n(74482),u=n(24243),a=n(24085),d=n(59219),l=n(99960),m=n(69721);var h=n(94184),p=n.n(h),f=n(29360),v=n(54545),_=n(87620),g=n(86388);const C="SCCustomAdv",b={root:`${C}-root`,wrap:`${C}-wrap`,image:`${C}-image`,embedCode:`${C}-embed-code`,prefixedHeight:`${C}-prefixed-height`},x=(0,o.ZP)(s.Z,{name:C,slot:"Root"})((()=>({})));const k=function(e){const t=(0,f.Z)({props:e,name:C}),{id:n="custom_adv",className:o,advId:h=null,position:k,categoriesId:S,prefixedHeight:y,onStateChange:w,onHeightChange:Z}=t,j=(0,i.Z)(),A=(0,r.useRef)(0),{scCustomAdv:E}=function({id:e=null,position:t=null,categoriesId:n=null,cacheStrategy:o=d.n2.CACHE_FIRST}){const[s,h]=(0,r.useState)(null!==e&&o===d.n2.CACHE_FIRST&&d.ZP.get((0,m.eg)(e))?d.ZP.get((0,m.eg)(e)):null),[p,f]=(0,r.useState)(null),v=(0,i.Z)(),_=(0,r.useMemo)((()=>e=>{e.map((e=>{d.ZP.set((0,m.eg)(e.id),e)}))}),[]),g=(0,r.useMemo)((()=>()=>null!==e?u.Z.request({url:a.Z.CustomAdv.url({id:e}),method:a.Z.CustomAdv.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve([e.data]))):u.Z.request({url:a.Z.CustomAdvSearch.url({}),method:a.Z.CustomAdvSearch.method,params:Object.assign(Object.assign({},t&&{position:t}),{categories:n?`[${n.toString()}]`:"[]"})}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data.results)))),[e,t,`${n}`]);return(0,r.useEffect)((()=>{s&&o===d.n2.CACHE_FIRST||g().then((e=>{v.current&&h(e[Math.floor(Math.random()*e.length)]),_(e)})).catch((e=>{v.current&&f(`Custom ADV with position ${t} not found`),l.Y.error(c.h,`Custom ADV with position ${t} not found`),l.Y.error(c.h,e.message)}))}),[e,t,`${n}`,s]),{scCustomAdv:s,setSCCustomAdv:h,error:p}}({id:h,position:k,categoriesId:S});(0,_.F_)((()=>{E&&w&&w({advId:E.id,prefixedHeight:A.current}),Z&&Z()}),[E]);const{ref:$}=(0,g.Z)({round:e=>e,onResize:({width:e,height:t})=>{j.current&&(A.current=t,w&&w({advId:E.id,prefixedHeight:t}))}}),R=(0,r.useRef)(null);if((0,r.useEffect)((()=>{const e=null==E?void 0:E.embed_code,t=R.current;if(t&&e){const n=document.createElement("div");n.innerHTML=e;const r=n.getElementsByTagName("script"),o=[];for(let e of r){if(e.src){const t=document.createElement("script");t.src=e.src,document.body.appendChild(t)}else o.push(e.innerHTML);e.parentNode.removeChild(e)}t.innerHTML=n.innerHTML,o.forEach((e=>{try{const t=document.createElement("script");t.appendChild(document.createTextNode(e)),document.body.appendChild(t)}catch(t){console.error("Error executing script",t)}}))}}),[E]),!E)return r.createElement(v.Z,null);const T=r.createElement(s.Z,{className:b.wrap},E.image&&r.createElement("img",{src:E.image,alt:E.title,className:p()(b.image,{[b.prefixedHeight]:Boolean(y)})}),E.embed_code&&r.createElement(s.Z,{ref:R,className:p()(b.embedCode,{[b.prefixedHeight]:Boolean(y)}),dangerouslySetInnerHTML:{__html:E.embed_code}}));return r.createElement(x,{id:n,className:p()(b.root,o),ref:$,style:Object.assign({},y?{paddingBottom:y}:{width:"100%"})},E.link?r.createElement("a",{href:E.link,title:E.title},T):T)}},54545:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(67294);const o=(0,n(90948).ZP)("div",{name:"SCHiddenPlaceholder",slot:"Root",overridesResolver:(e,t)=>[t.root]})((()=>({height:1,width:"100%",display:"none"})));function s(e){return r.createElement(o,Object.assign({},e))}},59219:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>o,n2:()=>r});var r;!function(e){e.CACHE_FIRST="Cache-first",e.NETWORK_ONLY="Network-only",e.STALE_WHILE_REVALIDATE="Stale-While-Revalidate"}(r||(r={}));const o=new class{constructor(e=1e4){this.values=new Map,this.maxEntries=e,this.ssr="undefined"==typeof window,this.ssr||(window.__viewSCCache=this.values)}get(e,t,n={noSsr:!0}){let r;return this.values.has(e)?(r=this.values.get(e),this.values.delete(e),this.values.set(e,r)):t&&(r=t,(!this.ssr||!n.noSsr)&&this.values.set(e,r)),r}set(e,t,n={noSsr:!0}){if(!this.ssr||!n.noSsr){if(this.values.size>=this.maxEntries){const e=this.values.keys().next().value;this.values.delete(e)}this.values.set(e,t)}}hasKey(e){return this.values.has(e)}delete(e){this.values.has(e)&&this.values.delete(e)}deleteKeys(e){e.forEach((e=>{this.values.has(e)&&this.values.delete(e)}))}deleteKeysWithPrefix(e){this.values.forEach(((t,n)=>{n.startsWith(e)&&this.values.delete(n)}))}clean(){this.values=new Map}evaluate(){console.log(this.values)}}},94184:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var s=typeof n;if("string"===s||"number"===s)e.push(n);else if(Array.isArray(n)){if(n.length){var i=o.apply(null,n);i&&e.push(i)}}else if("object"===s){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var c in n)r.call(n,c)&&n[c]&&e.push(c)}}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},86388:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(67294);function o(e,t,n){return e[t]?e[t][0]?e[t][0][n]:e[t][n]:"contentBoxSize"===t?e.contentRect["inlineSize"===n?"width":"height"]:void 0}function s(e){void 0===e&&(e={});var t=e.onResize,n=(0,r.useRef)(void 0);n.current=t;var s=e.round||Math.round,i=(0,r.useRef)(),c=(0,r.useState)({width:void 0,height:void 0}),u=c[0],a=c[1],d=(0,r.useRef)(!1);(0,r.useEffect)((function(){return d.current=!1,function(){d.current=!0}}),[]);var l=(0,r.useRef)({width:void 0,height:void 0}),m=function(e,t){var n=(0,r.useRef)(null),o=(0,r.useRef)(null);o.current=t;var s=(0,r.useRef)(null);(0,r.useEffect)((function(){i()}));var i=(0,r.useCallback)((function(){var t=s.current,r=o.current,i=t||(r?r instanceof Element?r:r.current:null);n.current&&n.current.element===i&&n.current.subscriber===e||(n.current&&n.current.cleanup&&n.current.cleanup(),n.current={element:i,subscriber:e,cleanup:i?e(i):void 0})}),[e]);return(0,r.useEffect)((function(){return function(){n.current&&n.current.cleanup&&(n.current.cleanup(),n.current=null)}}),[]),(0,r.useCallback)((function(e){s.current=e,i()}),[i])}((0,r.useCallback)((function(t){return i.current&&i.current.box===e.box&&i.current.round===s||(i.current={box:e.box,round:s,instance:new ResizeObserver((function(t){var r=t[0],i="border-box"===e.box?"borderBoxSize":"device-pixel-content-box"===e.box?"devicePixelContentBoxSize":"contentBoxSize",c=o(r,i,"inlineSize"),u=o(r,i,"blockSize"),m=c?s(c):void 0,h=u?s(u):void 0;if(l.current.width!==m||l.current.height!==h){var p={width:m,height:h};l.current.width=m,l.current.height=h,n.current?n.current(p):d.current||a(p)}}))}),i.current.instance.observe(t,{box:e.box}),function(){i.current&&i.current.instance.unobserve(t)}}),[e.box,s]),e.ref);return(0,r.useMemo)((function(){return{ref:m,width:u.width,height:u.height}}),[m,u.width,u.height])}}}]);