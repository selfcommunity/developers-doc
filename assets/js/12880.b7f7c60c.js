/*! For license information please see 12880.b7f7c60c.js.LICENSE.txt */
(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[12880],{23430:(t,e)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,_={};function m(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||g}function y(){}function x(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||g}m.prototype.isReactComponent={},m.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},m.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},y.prototype=m.prototype;var v=x.prototype=new y;v.constructor=x,p(v,m.prototype),v.isPureReactComponent=!0;var b=Array.isArray,C=Object.prototype.hasOwnProperty,S={current:null},w={key:!0,ref:!0,__self:!0,__source:!0};function k(t,e,r){var o,i={},s=null,l=null;if(null!=e)for(o in void 0!==e.ref&&(l=e.ref),void 0!==e.key&&(s=""+e.key),e)C.call(e,o)&&!w.hasOwnProperty(o)&&(i[o]=e[o]);var a=arguments.length-2;if(1===a)i.children=r;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(o in a=t.defaultProps)void 0===i[o]&&(i[o]=a[o]);return{$$typeof:n,type:t,key:s,ref:l,props:i,_owner:S.current}}function T(t){return"object"==typeof t&&null!==t&&t.$$typeof===n}var N=/\/+/g;function E(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function O(t,e,o,i,s){var l=typeof t;"undefined"!==l&&"boolean"!==l||(t=null);var a=!1;if(null===t)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case n:case r:a=!0}}if(a)return s=s(a=t),t=""===i?"."+E(a,0):i,b(s)?(o="",null!=t&&(o=t.replace(N,"$&/")+"/"),O(s,e,o,"",(function(t){return t}))):null!=s&&(T(s)&&(s=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(s,o+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(N,"$&/")+"/")+t)),e.push(s)),1;if(a=0,i=""===i?".":i+":",b(t))for(var c=0;c<t.length;c++){var u=i+E(l=t[c],c);a+=O(l,e,o,u,s)}else if(u=function(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=h&&t[h]||t["@@iterator"])?t:null}(t),"function"==typeof u)for(t=u.call(t),c=0;!(l=t.next()).done;)a+=O(l=l.value,e,o,u=i+E(l,c++),s);else if("object"===l)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function P(t,e,n){if(null==t)return t;var r=[],o=0;return O(t,r,"","",(function(t){return e.call(n,t,o++)})),r}function L(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var A={current:null},D={transition:null},M={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:D,ReactCurrentOwner:S};function F(){throw Error("act(...) is not supported in production builds of React.")}e.Component=m,e.createContext=function(t){return(t={$$typeof:a,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:l,_context:t},t.Consumer=t},e.createElement=k,e.isValidElement=T,e.useCallback=function(t,e){return A.current.useCallback(t,e)},e.useContext=function(t){return A.current.useContext(t)},e.useEffect=function(t,e){return A.current.useEffect(t,e)},e.useLayoutEffect=function(t,e){return A.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return A.current.useMemo(t,e)},e.useRef=function(t){return A.current.useRef(t)},e.useState=function(t){return A.current.useState(t)}},3746:(t,e,n)=>{"use strict";t.exports=n(23430)},87109:(t,e,n)=>{"use strict";n.d(e,{Z:()=>C});var r=n(80102),o=n(83117),i=n(67294),s=n(63961),l=n(94780),a=n(98216),c=n(15861),u=n(47167),d=n(74423),f=n(90948),h=n(1588),g=n(34867);function p(t){return(0,g.ZP)("MuiInputAdornment",t)}const _=(0,h.Z)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var m,y=n(28628),x=n(85893);const v=["children","className","component","disablePointerEvents","disableTypography","position","variant"],b=(0,f.ZP)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${(0,a.Z)(n.position)}`],!0===n.disablePointerEvents&&e.disablePointerEvents,e[n.variant]]}})((({theme:t,ownerState:e})=>(0,o.Z)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},"filled"===e.variant&&{[`&.${_.positionStart}&:not(.${_.hiddenLabel})`]:{marginTop:16}},"start"===e.position&&{marginRight:8},"end"===e.position&&{marginLeft:8},!0===e.disablePointerEvents&&{pointerEvents:"none"}))),C=i.forwardRef((function(t,e){const n=(0,y.i)({props:t,name:"MuiInputAdornment"}),{children:f,className:h,component:g="div",disablePointerEvents:_=!1,disableTypography:C=!1,position:S,variant:w}=n,k=(0,r.Z)(n,v),T=(0,d.Z)()||{};let N=w;w&&T.variant,T&&!N&&(N=T.variant);const E=(0,o.Z)({},n,{hiddenLabel:T.hiddenLabel,size:T.size,disablePointerEvents:_,position:S,variant:N}),O=(t=>{const{classes:e,disablePointerEvents:n,hiddenLabel:r,position:o,size:i,variant:s}=t,c={root:["root",n&&"disablePointerEvents",o&&`position${(0,a.Z)(o)}`,s,r&&"hiddenLabel",i&&`size${(0,a.Z)(i)}`]};return(0,l.Z)(c,p,e)})(E);return(0,x.jsx)(u.Z.Provider,{value:null,children:(0,x.jsx)(b,(0,o.Z)({as:g,ownerState:E,className:(0,s.Z)(O.root,h),ref:e},k,{children:"string"!=typeof f||C?(0,x.jsxs)(i.Fragment,{children:["start"===S?m||(m=(0,x.jsx)("span",{className:"notranslate",children:"\u200b"})):null,f]}):(0,x.jsx)(c.Z,{color:"text.secondary",children:f})}))})}))},47120:(t,e,n)=>{"use strict";n.d(e,{Z:()=>C});var r=n(80102),o=n(83117),i=n(67294),s=n(63961),l=n(35971),a=n(94780),c=n(94581),u=n(49990),d=n(98216),f=n(28628),h=n(90948),g=n(73138),p=n(32163),_=n(30362);function m(t,e){return void 0!==e&&void 0!==t&&(Array.isArray(e)?e.indexOf(t)>=0:t===e)}var y=n(85893);const x=["value"],v=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],b=(0,h.ZP)(u.Z,{name:"MuiToggleButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`size${(0,d.Z)(n.size)}`]]}})((({theme:t,ownerState:e})=>{let n,r="standard"===e.color?t.palette.text.primary:t.palette[e.color].main;return t.vars&&(r="standard"===e.color?t.vars.palette.text.primary:t.vars.palette[e.color].main,n="standard"===e.color?t.vars.palette.text.primaryChannel:t.vars.palette[e.color].mainChannel),(0,o.Z)({},t.typography.button,{borderRadius:(t.vars||t).shape.borderRadius,padding:11,border:`1px solid ${(t.vars||t).palette.divider}`,color:(t.vars||t).palette.action.active},e.fullWidth&&{width:"100%"},{[`&.${g.Z.disabled}`]:{color:(t.vars||t).palette.action.disabled,border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,c.Fq)(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${g.Z.selected}`]:{color:r,backgroundColor:t.vars?`rgba(${n} / ${t.vars.palette.action.selectedOpacity})`:(0,c.Fq)(r,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${n} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,c.Fq)(r,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${n} / ${t.vars.palette.action.selectedOpacity})`:(0,c.Fq)(r,t.palette.action.selectedOpacity)}}}},"small"===e.size&&{padding:7,fontSize:t.typography.pxToRem(13)},"large"===e.size&&{padding:15,fontSize:t.typography.pxToRem(15)})})),C=i.forwardRef((function(t,e){const n=i.useContext(p.Z),{value:c}=n,u=(0,r.Z)(n,x),h=i.useContext(_.Z),C=(0,l.Z)((0,o.Z)({},u,{selected:m(t.value,c)}),t),S=(0,f.i)({props:C,name:"MuiToggleButton"}),{children:w,className:k,color:T="standard",disabled:N=!1,disableFocusRipple:E=!1,fullWidth:O=!1,onChange:P,onClick:L,selected:A,size:D="medium",value:M}=S,F=(0,r.Z)(S,v),R=(0,o.Z)({},S,{color:T,disabled:N,disableFocusRipple:E,fullWidth:O,size:D}),B=(t=>{const{classes:e,fullWidth:n,selected:r,disabled:o,size:i,color:s}=t,l={root:["root",r&&"selected",o&&"disabled",n&&"fullWidth",`size${(0,d.Z)(i)}`,s]};return(0,a.Z)(l,g.a,e)})(R),I=h||"";return(0,y.jsx)(b,(0,o.Z)({className:(0,s.Z)(u.className,B.root,k,I),disabled:N,focusRipple:!E,ref:e,onClick:t=>{L&&(L(t,M),t.defaultPrevented)||P&&P(t,M)},onChange:P,value:M,ownerState:R,"aria-pressed":A},F,{children:w}))}))},73138:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s,a:()=>i});var r=n(1588),o=n(34867);function i(t){return(0,o.ZP)("MuiToggleButton",t)}const s=(0,r.Z)("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"])},591:(t,e,n)=>{"use strict";n.d(e,{Z:()=>b});var r=n(80102),o=n(83117),i=n(67294),s=(n(76607),n(63961)),l=n(94780);var a=n(90948),c=n(28628),u=n(98216),d=n(1588),f=n(34867);function h(t){return(0,f.ZP)("MuiToggleButtonGroup",t)}const g=(0,d.Z)("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]);var p=n(32163),_=n(30362),m=n(73138),y=n(85893);const x=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],v=(0,a.ZP)("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${g.grouped}`]:e.grouped},{[`& .${g.grouped}`]:e[`grouped${(0,u.Z)(n.orientation)}`]},{[`& .${g.firstButton}`]:e.firstButton},{[`& .${g.lastButton}`]:e.lastButton},{[`& .${g.middleButton}`]:e.middleButton},e.root,"vertical"===n.orientation&&e.vertical,n.fullWidth&&e.fullWidth]}})((({ownerState:t,theme:e})=>(0,o.Z)({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius},"vertical"===t.orientation&&{flexDirection:"column"},t.fullWidth&&{width:"100%"},{[`& .${g.grouped}`]:(0,o.Z)({},"horizontal"===t.orientation?{[`&.${g.selected} + .${g.grouped}.${g.selected}`]:{borderLeft:0,marginLeft:0}}:{[`&.${g.selected} + .${g.grouped}.${g.selected}`]:{borderTop:0,marginTop:0}})},"horizontal"===t.orientation?{[`& .${g.firstButton},& .${g.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${g.lastButton},& .${g.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}}:{[`& .${g.firstButton},& .${g.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${g.lastButton},& .${g.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0}},"horizontal"===t.orientation?{[`& .${g.lastButton}.${m.Z.disabled},& .${g.middleButton}.${m.Z.disabled}`]:{borderLeft:"1px solid transparent"}}:{[`& .${g.lastButton}.${m.Z.disabled},& .${g.middleButton}.${m.Z.disabled}`]:{borderTop:"1px solid transparent"}}))),b=i.forwardRef((function(t,e){const n=(0,c.i)({props:t,name:"MuiToggleButtonGroup"}),{children:a,className:d,color:f="standard",disabled:g=!1,exclusive:m=!1,fullWidth:b=!1,onChange:C,orientation:S="horizontal",size:w="medium",value:k}=n,T=(0,r.Z)(n,x),N=(0,o.Z)({},n,{disabled:g,fullWidth:b,orientation:S,size:w}),E=(t=>{const{classes:e,orientation:n,fullWidth:r,disabled:o}=t,i={root:["root","vertical"===n&&"vertical",r&&"fullWidth"],grouped:["grouped",`grouped${(0,u.Z)(n)}`,o&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return(0,l.Z)(i,h,e)})(N),O=i.useCallback(((t,e)=>{if(!C)return;const n=k&&k.indexOf(e);let r;k&&n>=0?(r=k.slice(),r.splice(n,1)):r=k?k.concat(e):[e],C(t,r)}),[C,k]),P=i.useCallback(((t,e)=>{C&&C(t,k===e?null:e)}),[C,k]),L=i.useMemo((()=>({className:E.grouped,onChange:m?P:O,value:k,size:w,fullWidth:b,color:f,disabled:g})),[E.grouped,m,P,O,k,w,b,f,g]),A=function(t){return i.Children.toArray(t).filter((t=>i.isValidElement(t)))}(a),D=A.length,M=t=>{const e=0===t,n=t===D-1;return e&&n?"":e?E.firstButton:n?E.lastButton:E.middleButton};return(0,y.jsx)(v,(0,o.Z)({role:"group",className:(0,s.Z)(E.root,d),ref:e,ownerState:N},T,{children:(0,y.jsx)(p.Z.Provider,{value:L,children:A.map(((t,e)=>(0,y.jsx)(_.Z.Provider,{value:M(e),children:t},e)))})}))}))},30362:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=n(67294).createContext(void 0)},32163:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=n(67294).createContext({})},12880:(t,e,n)=>{"use strict";n.d(e,{Z:()=>ao});var r=n(85893),o=n(67294),i=n(90948),s=n(44012),l=n(94253),a=n(48542),c=n(94184),u=n.n(c),d=n(29360),f=n(61084);var h=function(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}((function(t){const e=new URLSearchParams;e.append("code",t);for(let n=1;n<arguments.length;n++)e.append("v",arguments[n]);throw Error(`Minified Lexical error #${t}; visit https://lexical.dev/docs/error?${e} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}));const g="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,p=g&&"documentMode"in document?document.documentMode:null,_=(g&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),g&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),!(!g||!("InputEvent"in window)||p)&&new window.InputEvent("input"),g&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),g&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&window.MSStream,g&&/Android/.test(navigator.userAgent),g&&/^(?=.*Chrome).*/i.test(navigator.userAgent));g&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent);function m(...t){const e=[];for(const n of t)if(n&&"string"==typeof n)for(const[t]of n.matchAll(/\S+/g))e.push(t);return e}function y(...t){return()=>{t.forEach((t=>t()))}}function x(t,...e){const n=m(...e);n.length>0&&t.classList.add(...n)}function v(t,...e){const n=m(...e);n.length>0&&t.classList.remove(...n)}function b(t,e){let n=t;for(;null!=n;){if(n instanceof e)return n;n=n.getParent()}return null}function C(t){const e=S(t,(t=>(0,f.F7)(t)&&!t.isInline()));return(0,f.F7)(e)||h(4,t.__key),e}const S=(t,e)=>{let n=t;for(;n!==(0,f.Gv)()&&null!=n;){if(e(n))return n;n=n.getParent()}return null};function w(t){const e=(0,f.dL)()||(0,f.DN)();if((0,f.OP)(e)){const{focus:n}=e,r=n.getNode(),o=n.offset;if((0,f._v)(r)){const e=r.getChildAtIndex(o);null==e?r.append(t):e.insertBefore(t),t.selectNext()}else{let e,n;(0,f.Gg)(r)?(e=r.getParentOrThrow(),n=r.getIndexWithinParent(),o>0&&(n+=1,r.splitText(o))):(e=r,n=o);const[,i]=(0,f.z9)(e,n);i.insertBefore(t),i.selectStart()}}else{if(null!=e){const n=e.getNodes();n[n.length-1].getTopLevelElementOrThrow().insertAfter(t)}else(0,f.Gv)().append(t);const n=(0,f.BE)();t.insertAfter(n),n.select()}return t.getLatest()}function k(t,e){return null!==t&&Object.getPrototypeOf(t).constructor.name===e.name}const T=new Set(["http:","https:","mailto:","sms:","tel:"]);class N extends f.HX{static getType(){return"link"}static clone(t){return new N(t.__url,{rel:t.__rel,target:t.__target,title:t.__title},t.__key)}constructor(t,e={},n){super(n);const{target:r=null,rel:o=null,title:i=null}=e;this.__url=t,this.__target=r,this.__rel=o,this.__title=i}createDOM(t){const e=document.createElement("a");return e.href=this.sanitizeUrl(this.__url),null!==this.__target&&(e.target=this.__target),null!==this.__rel&&(e.rel=this.__rel),null!==this.__title&&(e.title=this.__title),x(e,t.theme.link),e}updateDOM(t,e,n){const r=this.__url,o=this.__target,i=this.__rel,s=this.__title;return r!==t.__url&&(e.href=r),o!==t.__target&&(o?e.target=o:e.removeAttribute("target")),i!==t.__rel&&(i?e.rel=i:e.removeAttribute("rel")),s!==t.__title&&(s?e.title=s:e.removeAttribute("title")),!1}static importDOM(){return{a:t=>({conversion:E,priority:1})}}static importJSON(t){const e=O(t.url,{rel:t.rel,target:t.target,title:t.title});return e.setFormat(t.format),e.setIndent(t.indent),e.setDirection(t.direction),e}sanitizeUrl(t){try{const e=new URL(t);if(!T.has(e.protocol))return"about:blank"}catch(e){return t}return t}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),type:"link",url:this.getURL(),version:1}}getURL(){return this.getLatest().__url}setURL(t){this.getWritable().__url=t}getTarget(){return this.getLatest().__target}setTarget(t){this.getWritable().__target=t}getRel(){return this.getLatest().__rel}setRel(t){this.getWritable().__rel=t}getTitle(){return this.getLatest().__title}setTitle(t){this.getWritable().__title=t}insertNewAfter(t,e=!0){const n=O(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(n,e),n}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(t,e,n){if(!(0,f.OP)(e))return!1;const r=e.anchor.getNode(),o=e.focus.getNode();return this.isParentOf(r)&&this.isParentOf(o)&&e.getTextContent().length>0}}function E(t){let e=null;if((0,f.bg)(t)){const n=t.textContent;(null!==n&&""!==n||t.children.length>0)&&(e=O(t.getAttribute("href")||"",{rel:t.getAttribute("rel"),target:t.getAttribute("target"),title:t.getAttribute("title")}))}return{node:e}}function O(t,e){return(0,f.U2)(new N(t,e))}function P(t){return t instanceof N}class L extends N{static getType(){return"autolink"}static clone(t){return new L(t.__url,{rel:t.__rel,target:t.__target,title:t.__title},t.__key)}static importJSON(t){const e=A(t.url,{rel:t.rel,target:t.target,title:t.title});return e.setFormat(t.format),e.setIndent(t.indent),e.setDirection(t.direction),e}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),type:"autolink",version:1}}insertNewAfter(t,e=!0){const n=this.getParentOrThrow().insertNewAfter(t,e);if((0,f.F7)(n)){const t=A(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return n.append(t),t}return null}}function A(t,e){return(0,f.U2)(new L(t,e))}function D(t){return t instanceof L}const M=(0,f.fA)("TOGGLE_LINK_COMMAND");function F(t,e={}){const{target:n,title:r}=e,o=void 0===e.rel?"noreferrer":e.rel,i=(0,f.dL)();if(!(0,f.OP)(i))return;const s=i.extract();if(null===t)s.forEach((t=>{const e=t.getParent();if(P(e)){const t=e.getChildren();for(let n=0;n<t.length;n++)e.insertBefore(t[n]);e.remove()}}));else{if(1===s.length){const e=function(t,e){let n=t;for(;null!==n&&null!==n.getParent()&&!e(n);)n=n.getParentOrThrow();return e(n)?n:null}(s[0],P);if(null!==e)return e.setURL(t),void 0!==n&&e.setTarget(n),null!==o&&e.setRel(o),void(void 0!==r&&e.setTitle(r))}let e=null,i=null;s.forEach((s=>{const l=s.getParent();if(l!==i&&null!==l&&(!(0,f.F7)(s)||s.isInline())){if(P(l))return i=l,l.setURL(t),void 0!==n&&l.setTarget(n),null!==o&&i.setRel(o),void(void 0!==r&&i.setTitle(r));if(l.is(e)||(e=l,i=O(t,{rel:o,target:n,title:r}),P(l)?null===s.getPreviousSibling()?l.insertBefore(i):l.insertAfter(i):s.insertBefore(i)),P(s)){if(s.is(i))return;if(null!==i){const t=s.getChildren();for(let e=0;e<t.length;e++)i.append(t[e])}s.remove()}else null!==i&&i.append(s)}}))}}var R=function(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}((function(t){const e=new URLSearchParams;e.append("code",t);for(let n=1;n<arguments.length;n++)e.append("v",arguments[n]);throw Error(`Minified Lexical error #${t}; visit https://lexical.dev/docs/error?${e} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}));function B(t){let e=t.getParent();lt(e)||R(40);let n=e;for(;null!==n;)n=n.getParent(),lt(n)&&(e=n);return e}function I(t){let e=[];const n=t.getChildren().filter(tt);for(let r=0;r<n.length;r++){const t=n[r],o=t.getFirstChild();lt(o)?e=e.concat(I(o)):e.push(t)}return e}function j(t){return tt(t)&&lt(t.getFirstChild())}function z(t){return Q().append(t)}function $(t,e){return tt(t)&&(0===e.length||1===e.length&&t.is(e[0])&&0===t.getChildrenSize())}function W(t,e){t.update((()=>{const t=(0,f.dL)();if(null!==t){const n=t.getNodes();if((0,f.OP)(t)){const r=t.getStartEndPoints();null===r&&R(143);const[o]=r,i=o.getNode(),s=i.getParent();if($(i,n)){const t=st(e);if((0,f._v)(s)){i.replace(t);const e=Q();(0,f.F7)(i)&&(e.setFormat(i.getFormatType()),e.setIndent(i.getIndent())),t.append(e)}else if(tt(i)){const e=i.getParentOrThrow();Z(t,e.getChildren()),e.replace(t)}return}}const r=new Set;for(let t=0;t<n.length;t++){const o=n[t];if(!(0,f.F7)(o)||!o.isEmpty()||tt(o)||r.has(o.getKey())){if((0,f.H2)(o)){let t=o.getParent();for(;null!=t;){const n=t.getKey();if(lt(t)){if(!r.has(n)){const o=st(e);Z(o,t.getChildren()),t.replace(o),r.add(n)}break}{const o=t.getParent();if((0,f._v)(o)&&!r.has(n)){r.add(n),K(t,e);break}t=o}}}}else K(o,e)}}}))}function Z(t,e){t.splice(t.getChildrenSize(),0,e)}function K(t,e){if(lt(t))return t;const n=t.getPreviousSibling(),r=t.getNextSibling(),o=Q();if(o.setFormat(t.getFormatType()),o.setIndent(t.getIndent()),Z(o,t.getChildren()),lt(n)&&e===n.getListType())return n.append(o),t.remove(),lt(r)&&e===r.getListType()&&(Z(n,r.getChildren()),r.remove()),n;if(lt(r)&&e===r.getListType())return r.getFirstChildOrThrow().insertBefore(o),t.remove(),r;{const n=st(e);return n.append(o),t.replace(n),n}}function U(t,e){const n=t.getLastChild(),r=e.getFirstChild();n&&r&&j(n)&&j(r)&&(U(n.getFirstChild(),r.getFirstChild()),r.remove());const o=e.getChildren();o.length>0&&t.append(...o),e.remove()}function V(t){const e=new Set;if(j(t)||e.has(t.getKey()))return;const n=t.getParent(),r=t.getNextSibling(),o=t.getPreviousSibling();if(j(r)&&j(o)){const n=o.getFirstChild();if(lt(n)){n.append(t);const o=r.getFirstChild();lt(o)&&(Z(n,o.getChildren()),r.remove(),e.add(r.getKey()))}}else if(j(r)){const e=r.getFirstChild();if(lt(e)){const n=e.getFirstChild();null!==n&&n.insertBefore(t)}}else if(j(o)){const e=o.getFirstChild();lt(e)&&e.append(t)}else if(lt(n)){const e=Q(),i=st(n.getListType());e.append(i),i.append(t),o?o.insertAfter(e):r?r.insertBefore(e):n.append(e)}}function J(t){if(j(t))return;const e=t.getParent(),n=e?e.getParent():void 0;if(lt(n?n.getParent():void 0)&&tt(n)&&lt(e)){const r=e?e.getFirstChild():void 0,o=e?e.getLastChild():void 0;if(t.is(r))n.insertBefore(t),e.isEmpty()&&n.remove();else if(t.is(o))n.insertAfter(t),e.isEmpty()&&n.remove();else{const r=e.getListType(),o=Q(),i=st(r);o.append(i),t.getPreviousSiblings().forEach((t=>i.append(t)));const s=Q(),l=st(r);s.append(l),Z(l,t.getNextSiblings()),n.insertBefore(o),n.insertAfter(s),n.replace(t)}}}function H(...t){const e=[];for(const n of t)if(n&&"string"==typeof n)for(const[t]of n.matchAll(/\S+/g))e.push(t);return e}class G extends f.HX{static getType(){return"listitem"}static clone(t){return new G(t.__value,t.__checked,t.__key)}constructor(t,e,n){super(n),this.__value=void 0===t?1:t,this.__checked=e}createDOM(t){const e=document.createElement("li"),n=this.getParent();return lt(n)&&"check"===n.getListType()&&X(e,this,null),e.value=this.__value,q(e,t.theme,this),e}updateDOM(t,e,n){const r=this.getParent();return lt(r)&&"check"===r.getListType()&&X(e,this,t),e.value=this.__value,q(e,n.theme,this),!1}static transform(){return t=>{if(tt(t)||R(144),null==t.__checked)return;const e=t.getParent();lt(e)&&"check"!==e.getListType()&&null!=t.getChecked()&&t.setChecked(void 0)}}static importDOM(){return{li:t=>({conversion:Y,priority:0})}}static importJSON(t){const e=Q();return e.setChecked(t.checked),e.setValue(t.value),e.setFormat(t.format),e.setDirection(t.direction),e}exportDOM(t){const e=this.createDOM(t._config);return e.style.textAlign=this.getFormatType(),{element:e}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),type:"listitem",value:this.getValue(),version:1}}append(...t){for(let e=0;e<t.length;e++){const n=t[e];if((0,f.F7)(n)&&this.canMergeWith(n)){const t=n.getChildren();this.append(...t),n.remove()}else super.append(n)}return this}replace(t,e){if(tt(t))return super.replace(t);this.setIndent(0);const n=this.getParentOrThrow();if(!lt(n))return t;if(n.__first===this.getKey())n.insertBefore(t);else if(n.__last===this.getKey())n.insertAfter(t);else{const e=st(n.getListType());let r=this.getNextSibling();for(;r;){const t=r;r=r.getNextSibling(),e.append(t)}n.insertAfter(t),t.insertAfter(e)}return e&&((0,f.F7)(t)||R(139),this.getChildren().forEach((e=>{t.append(e)}))),this.remove(),0===n.getChildrenSize()&&n.remove(),t}insertAfter(t,e=!0){const n=this.getParentOrThrow();if(lt(n)||R(39),tt(t))return super.insertAfter(t,e);const r=this.getNextSiblings();if(n.insertAfter(t,e),0!==r.length){const o=st(n.getListType());r.forEach((t=>o.append(t))),t.insertAfter(o,e)}return t}remove(t){const e=this.getPreviousSibling(),n=this.getNextSibling();super.remove(t),e&&n&&j(e)&&j(n)&&(U(e.getFirstChild(),n.getFirstChild()),n.remove())}insertNewAfter(t,e=!0){const n=Q(null==this.__checked&&void 0);return this.insertAfter(n,e),n}collapseAtStart(t){const e=(0,f.BE)();this.getChildren().forEach((t=>e.append(t)));const n=this.getParentOrThrow(),r=n.getParentOrThrow(),o=tt(r);if(1===n.getChildrenSize())if(o)n.remove(),r.select();else{n.insertBefore(e),n.remove();const r=t.anchor,o=t.focus,i=e.getKey();"element"===r.type&&r.getNode().is(this)&&r.set(i,r.offset,"element"),"element"===o.type&&o.getNode().is(this)&&o.set(i,o.offset,"element")}else n.insertBefore(e),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(t){this.getWritable().__value=t}getChecked(){return this.getLatest().__checked}setChecked(t){this.getWritable().__checked=t}toggleChecked(){this.setChecked(!this.__checked)}getIndent(){const t=this.getParent();if(null===t)return this.getLatest().__indent;let e=t.getParentOrThrow(),n=0;for(;tt(e);)e=e.getParentOrThrow().getParentOrThrow(),n++;return n}setIndent(t){"number"==typeof t&&t>-1||R(117);let e=this.getIndent();for(;e!==t;)e<t?(V(this),e++):(J(this),e--);return this}canInsertAfter(t){return tt(t)}canReplaceWith(t){return tt(t)}canMergeWith(t){return(0,f.Rl)(t)||tt(t)}extractWithChild(t,e){if(!(0,f.OP)(e))return!1;const n=e.anchor.getNode(),r=e.focus.getNode();return this.isParentOf(n)&&this.isParentOf(r)&&this.getTextContent().length===e.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return st("bullet")}}function q(t,e,n){const r=[],o=[],i=e.list,s=i?i.listitem:void 0;let l;if(i&&i.nested&&(l=i.nested.listitem),void 0!==s&&r.push(...H(s)),i){const t=n.getParent(),e=lt(t)&&"check"===t.getListType(),s=n.getChecked();e&&!s||o.push(i.listitemUnchecked),e&&s||o.push(i.listitemChecked),e&&r.push(s?i.listitemChecked:i.listitemUnchecked)}if(void 0!==l){const t=H(l);n.getChildren().some((t=>lt(t)))?r.push(...t):o.push(...t)}o.length>0&&v(t,...o),r.length>0&&x(t,...r)}function X(t,e,n,r){lt(e.getFirstChild())?(t.removeAttribute("role"),t.removeAttribute("tabIndex"),t.removeAttribute("aria-checked")):(t.setAttribute("role","checkbox"),t.setAttribute("tabIndex","-1"),n&&e.__checked===n.__checked||t.setAttribute("aria-checked",e.getChecked()?"true":"false"))}function Y(t){return{node:Q((0,f.Re)(t)&&"true"===t.getAttribute("aria-checked"))}}function Q(t){return(0,f.U2)(new G(void 0,t))}function tt(t){return t instanceof G}class et extends f.HX{static getType(){return"list"}static clone(t){const e=t.__listType||it[t.__tag];return new et(e,t.__start,t.__key)}constructor(t,e,n){super(n);const r=it[t]||t;this.__listType=r,this.__tag="number"===r?"ol":"ul",this.__start=e}getTag(){return this.__tag}setListType(t){const e=this.getWritable();e.__listType=t,e.__tag="number"===t?"ol":"ul"}getListType(){return this.__listType}getStart(){return this.__start}createDOM(t,e){const n=this.__tag,r=document.createElement(n);return 1!==this.__start&&r.setAttribute("start",String(this.__start)),r.__lexicalListType=this.__listType,nt(r,t.theme,this),r}updateDOM(t,e,n){return t.__tag!==this.__tag||(nt(e,n.theme,this),!1)}static transform(){return t=>{lt(t)||R(163),function(t){const e=t.getNextSibling();lt(e)&&t.getListType()===e.getListType()&&U(t,e)}(t),function(t){const e="check"!==t.getListType();let n=t.getStart();for(const r of t.getChildren())tt(r)&&(r.getValue()!==n&&r.setValue(n),e&&null!=r.getChecked()&&r.setChecked(void 0),lt(r.getFirstChild())||n++)}(t)}}static importDOM(){return{ol:t=>({conversion:ot,priority:0}),ul:t=>({conversion:ot,priority:0})}}static importJSON(t){const e=st(t.listType,t.start);return e.setFormat(t.format),e.setIndent(t.indent),e.setDirection(t.direction),e}exportDOM(t){const{element:e}=super.exportDOM(t);return e&&(0,f.Re)(e)&&(1!==this.__start&&e.setAttribute("start",String(this.__start)),"check"===this.__listType&&e.setAttribute("__lexicalListType","check")),{element:e}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag(),type:"list",version:1}}canBeEmpty(){return!1}canIndent(){return!1}append(...t){for(let e=0;e<t.length;e++){const n=t[e];if(tt(n))super.append(n);else{const t=Q();if(lt(n))t.append(n);else if((0,f.F7)(n)){const e=(0,f.MX)(n.getTextContent());t.append(e)}else t.append(n);super.append(t)}}return this}extractWithChild(t){return tt(t)}}function nt(t,e,n){const r=[],o=[],i=e.list;if(void 0!==i){const t=i[`${n.__tag}Depth`]||[],e=function(t){let e=1,n=t.getParent();for(;null!=n;){if(tt(n)){const t=n.getParent();if(lt(t)){e++,n=t.getParent();continue}R(40)}return e}return e}(n)-1,s=e%t.length,l=t[s],a=i[n.__tag];let c;const u=i.nested,d=i.checklist;if(void 0!==u&&u.list&&(c=u.list),void 0!==a&&r.push(a),void 0!==d&&"check"===n.__listType&&r.push(d),void 0!==l){r.push(...H(l));for(let e=0;e<t.length;e++)e!==s&&o.push(n.__tag+e)}if(void 0!==c){const t=H(c);e>1?r.push(...t):o.push(...t)}}o.length>0&&v(t,...o),r.length>0&&x(t,...r)}function rt(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];if(tt(r)){e.push(r);const t=r.getChildren();t.length>1&&t.forEach((t=>{lt(t)&&e.push(z(t))}))}else e.push(z(r))}return e}function ot(t){const e=t.nodeName.toLowerCase();let n=null;return"ol"===e?n=st("number",t.start):"ul"===e&&(n=(0,f.Re)(t)&&"check"===t.getAttribute("__lexicallisttype")?st("check"):st("bullet")),{after:rt,node:n}}const it={ol:"number",ul:"bullet"};function st(t,e=1){return(0,f.U2)(new et(t,e))}function lt(t){return t instanceof et}const at=(0,f.fA)("INSERT_UNORDERED_LIST_COMMAND"),ct=(0,f.fA)("INSERT_ORDERED_LIST_COMMAND"),ut=((0,f.fA)("INSERT_CHECK_LIST_COMMAND"),(0,f.fA)("REMOVE_LIST_COMMAND"));var dt=n(10261);function ft(t,e){const n=e.body?e.body.childNodes:[];let r=[];const o=[];for(let i=0;i<n.length;i++){const e=n[i];if(!pt.has(e.nodeName)){const n=_t(e,t,o,!1);null!==n&&(r=r.concat(n))}}return function(t){for(const e of t)e.getNextSibling()instanceof f.RG&&e.insertAfter((0,f.T)());for(const e of t){const t=e.getChildren();for(const n of t)e.insertBefore(n);e.remove()}}(o),r}function ht(t,e){if("undefined"==typeof document||"undefined"==typeof window&&void 0===global.window)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const n=document.createElement("div"),r=(0,f.Gv)().getChildren();for(let o=0;o<r.length;o++)gt(t,r[o],n,e);return n.innerHTML}function gt(t,e,n,r=null){let o=null===r||e.isSelected(r);const i=(0,f.F7)(e)&&e.excludeFromCopy("html");let s=e;if(null!==r){let t=(0,dt.B3)(e);t=(0,f.Gg)(t)&&null!==r?(0,dt.bA)(r,t):t,s=t}const l=(0,f.F7)(s)?s.getChildren():[],a=t._nodes.get(s.getType());let c;c=a&&void 0!==a.exportDOM?a.exportDOM(t,s):s.exportDOM(t);const{element:u,after:d}=c;if(!u)return!1;const h=document.createDocumentFragment();for(let g=0;g<l.length;g++){const n=l[g],i=gt(t,n,h,r);!o&&(0,f.F7)(e)&&i&&e.extractWithChild(n,r,"html")&&(o=!0)}if(o&&!i){if((0,f.Re)(u)&&u.append(h),n.append(u),d){const t=d.call(s,u);t&&u.replaceWith(t)}}else n.append(h);return o}const pt=new Set(["STYLE","SCRIPT"]);function _t(t,e,n,r,o=new Map,i){let s=[];if(pt.has(t.nodeName))return s;let l=null;const a=function(t,e){const{nodeName:n}=t,r=e._htmlConversions.get(n.toLowerCase());let o=null;if(void 0!==r)for(const i of r){const e=i(t);null!==e&&(null===o||(o.priority||0)<(e.priority||0))&&(o=e)}return null!==o?o.conversion:null}(t,e),c=a?a(t):null;let u=null;if(null!==c){u=c.after;const e=c.node;if(l=Array.isArray(e)?e[e.length-1]:e,null!==l){for(const[,t]of o)if(l=t(l,i),!l)break;l&&s.push(...Array.isArray(e)?e:[l])}null!=c.forChild&&o.set(t.nodeName,c.forChild)}const d=t.childNodes;let h=[];const g=(null==l||!(0,f._v)(l))&&(null!=l&&(0,f.ek)(l)||r);for(let f=0;f<d.length;f++)h.push(..._t(d[f],e,n,g,new Map(o),l));return null!=u&&(h=u(h)),(0,f.lv)(t)&&(h=function(t,e,n){const r=t.style.textAlign,o=[];let i=[];for(let s=0;s<e.length;s++){const t=e[s];if((0,f.ek)(t))t.setFormat(r),o.push(t);else if(i.push(t),s===e.length-1||s<e.length-1&&(0,f.ek)(e[s+1])){const t=n();t.setFormat(r),t.append(...i),o.push(t),i=[]}}return o}(t,h,g?()=>{const t=new f.RG;return n.push(t),t}:f.BE)),null==l?s=s.concat(h):(0,f.F7)(l)&&l.append(...h),s}var mt=function(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}((function(t){const e=new URLSearchParams;e.append("code",t);for(let n=1;n<arguments.length;n++)e.append("v",arguments[n]);throw Error(`Minified Lexical error #${t}; visit https://lexical.dev/docs/error?${e} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}));const yt="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,xt=t=>yt?(t||window).getSelection():null;function vt(t){const e=(0,f.dL)();return null==e&&mt(166),(0,f.OP)(e)&&e.isCollapsed()||0===e.getNodes().length?null:JSON.stringify(function(t,e){const n=[],r=(0,f.Gv)().getChildren();for(let o=0;o<r.length;o++)St(t,e,r[o],n);return{namespace:t._config.namespace,nodes:n}}(t,e))}function bt(t,e,n){const r=t.getData("application/x-lexical-editor");if(r)try{const t=JSON.parse(r);if(t.namespace===n._config.namespace&&Array.isArray(t.nodes))return Ct(n,function(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n],o=(0,f.oC)(r);(0,f.Gg)(o)&&(0,dt.vV)(o),e.push(o)}return e}(t.nodes),e)}catch(t){}const o=t.getData("text/html");if(o)try{return Ct(n,ft(n,(new DOMParser).parseFromString(o,"text/html")),e)}catch(t){}const i=t.getData("text/plain")||t.getData("text/uri-list");if(null!=i)if((0,f.OP)(e)){const t=i.split(/(\r?\n|\t)/);""===t[t.length-1]&&t.pop();for(let e=0;e<t.length;e++){const n=(0,f.dL)();if((0,f.OP)(n)){const r=t[e];"\n"===r||"\r\n"===r?n.insertParagraph():"\t"===r?n.insertNodes([(0,f.S3)()]):n.insertText(r)}}}else e.insertRawText(i)}function Ct(t,e,n){t.dispatchCommand(f.zr,{nodes:e,selection:n})||n.insertNodes(e)}function St(t,e,n,r=[]){let o=null===e||n.isSelected(e);const i=(0,f.F7)(n)&&n.excludeFromCopy("html");let s=n;if(null!==e){let t=(0,dt.B3)(n);t=(0,f.Gg)(t)&&null!==e?(0,dt.bA)(e,t):t,s=t}const l=(0,f.F7)(s)?s.getChildren():[],a=function(t){const e=t.exportJSON(),n=t.constructor;if(e.type!==n.getType()&&mt(58,n.name),(0,f.F7)(t)){const t=e.children;Array.isArray(t)||mt(59,n.name)}return e}(s);if((0,f.Gg)(s)){const t=s.__text;t.length>0?a.text=t:o=!1}for(let c=0;c<l.length;c++){const r=l[c],i=St(t,e,r,a.children);!o&&(0,f.F7)(n)&&i&&n.extractWithChild(r,e,"clone")&&(o=!0)}if(o&&!i)r.push(a);else if(Array.isArray(a.children))for(let c=0;c<a.children.length;c++){const t=a.children[c];r.push(t)}return o}let wt=null;async function kt(t,e){if(null!==wt)return!1;if(null!==e)return new Promise(((n,r)=>{t.update((()=>{n(Tt(t,e))}))}));const n=t.getRootElement(),r=null==t._window?window.document:t._window.document,o=xt(t._window);if(null===n||null===o)return!1;const i=r.createElement("span");i.style.cssText="position: fixed; top: -1000px;",i.append(r.createTextNode("#")),n.append(i);const s=new Range;return s.setStart(i,0),s.setEnd(i,1),o.removeAllRanges(),o.addRange(s),new Promise(((e,n)=>{const o=t.registerCommand(f.LV,(n=>(k(n,ClipboardEvent)&&(o(),null!==wt&&(window.clearTimeout(wt),wt=null),e(Tt(t,n))),!0)),f.jw);wt=window.setTimeout((()=>{o(),wt=null,e(!1)}),50),r.execCommand("copy"),i.remove()}))}function Tt(t,e){const n=xt(t._window);if(!n)return!1;const r=n.anchorNode,o=n.focusNode;if(null!==r&&null!==o&&!(0,f.af)(t,r,o))return!1;e.preventDefault();const i=e.clipboardData,s=(0,f.dL)();if(null===i||null===s)return!1;const l=function(t){const e=(0,f.dL)();return null==e&&mt(166),(0,f.OP)(e)&&e.isCollapsed()||0===e.getNodes().length?"":ht(t,e)}(t),a=vt(t);let c="";return null!==s&&(c=s.getTextContent()),null!==l&&i.setData("text/html",l),null!==a&&i.setData("application/x-lexical-editor",a),i.setData("text/plain",c),!0}function Nt(t,e){if(void 0!==document.caretRangeFromPoint){const n=document.caretRangeFromPoint(t,e);return null===n?null:{node:n.startContainer,offset:n.startOffset}}if("undefined"!==document.caretPositionFromPoint){const n=document.caretPositionFromPoint(t,e);return null===n?null:{node:n.offsetNode,offset:n.offset}}return null}const Et="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,Ot=Et&&"documentMode"in document?document.documentMode:null,Pt=!(!Et||!("InputEvent"in window)||Ot)&&"getTargetRanges"in new window.InputEvent("input"),Lt=Et&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),At=Et&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Dt=Et&&/^(?=.*Chrome).*/i.test(navigator.userAgent),Mt=Et&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!Dt,Ft=(0,f.fA)("DRAG_DROP_PASTE_FILE");class Rt extends f.HX{static getType(){return"quote"}static clone(t){return new Rt(t.__key)}constructor(t){super(t)}createDOM(t){const e=document.createElement("blockquote");return x(e,t.theme.quote),e}updateDOM(t,e){return!1}static importDOM(){return{blockquote:t=>({conversion:$t,priority:0})}}exportDOM(t){const{element:e}=super.exportDOM(t);if(e&&(0,f.Re)(e)){this.isEmpty()&&e.append(document.createElement("br"));const t=this.getFormatType();e.style.textAlign=t;const n=this.getDirection();n&&(e.dir=n)}return{element:e}}static importJSON(t){const e=Bt();return e.setFormat(t.format),e.setIndent(t.indent),e.setDirection(t.direction),e}exportJSON(){return{...super.exportJSON(),type:"quote"}}insertNewAfter(t,e){const n=(0,f.BE)(),r=this.getDirection();return n.setDirection(r),this.insertAfter(n,e),n}collapseAtStart(){const t=(0,f.BE)();return this.getChildren().forEach((e=>t.append(e))),this.replace(t),!0}}function Bt(){return(0,f.U2)(new Rt)}class It extends f.HX{static getType(){return"heading"}static clone(t){return new It(t.__tag,t.__key)}constructor(t,e){super(e),this.__tag=t}getTag(){return this.__tag}createDOM(t){const e=this.__tag,n=document.createElement(e),r=t.theme.heading;if(void 0!==r){x(n,r[e])}return n}updateDOM(t,e){return!1}static importDOM(){return{h1:t=>({conversion:zt,priority:0}),h2:t=>({conversion:zt,priority:0}),h3:t=>({conversion:zt,priority:0}),h4:t=>({conversion:zt,priority:0}),h5:t=>({conversion:zt,priority:0}),h6:t=>({conversion:zt,priority:0}),p:t=>{const e=t.firstChild;return null!==e&&jt(e)?{conversion:()=>({node:null}),priority:3}:null},span:t=>jt(t)?{conversion:t=>({node:Wt("h1")}),priority:3}:null}}exportDOM(t){const{element:e}=super.exportDOM(t);if(e&&(0,f.Re)(e)){this.isEmpty()&&e.append(document.createElement("br"));const t=this.getFormatType();e.style.textAlign=t;const n=this.getDirection();n&&(e.dir=n)}return{element:e}}static importJSON(t){const e=Wt(t.tag);return e.setFormat(t.format),e.setIndent(t.indent),e.setDirection(t.direction),e}exportJSON(){return{...super.exportJSON(),tag:this.getTag(),type:"heading",version:1}}insertNewAfter(t,e=!0){const n=t?t.anchor.offset:0,r=n!==this.getTextContentSize()&&t?Wt(this.getTag()):(0,f.BE)(),o=this.getDirection();if(r.setDirection(o),this.insertAfter(r,e),0===n&&!this.isEmpty()&&t){const t=(0,f.BE)();t.select(),this.replace(t,!0)}return r}collapseAtStart(){const t=this.isEmpty()?(0,f.BE)():Wt(this.getTag());return this.getChildren().forEach((e=>t.append(e))),this.replace(t),!0}extractWithChild(){return!0}}function jt(t){return"span"===t.nodeName.toLowerCase()&&"26pt"===t.style.fontSize}function zt(t){const e=t.nodeName.toLowerCase();let n=null;return"h1"!==e&&"h2"!==e&&"h3"!==e&&"h4"!==e&&"h5"!==e&&"h6"!==e||(n=Wt(e),null!==t.style&&n.setFormat(t.style.textAlign)),{node:n}}function $t(t){const e=Bt();return null!==t.style&&e.setFormat(t.style.textAlign),{node:e}}function Wt(t){return(0,f.U2)(new It(t))}function Zt(t){return t instanceof It}function Kt(t){let e=null;if(k(t,DragEvent)?e=t.dataTransfer:k(t,ClipboardEvent)&&(e=t.clipboardData),null===e)return[!1,[],!1];const n=e.types,r=n.includes("Files"),o=n.includes("text/html")||n.includes("text/plain");return[r,Array.from(e.files),o]}function Ut(t){const e=(0,f.dL)();if(!(0,f.OP)(e))return!1;const n=new Set,r=e.getNodes();for(let o=0;o<r.length;o++){const e=r[o],i=e.getKey();if(n.has(i))continue;const s=S(e,(t=>(0,f.F7)(t)&&!t.isInline()));if(null===s)continue;const l=s.getKey();s.canIndent()&&!n.has(l)&&(n.add(l),t(s))}return n.size>0}function Vt(t){const e=(0,f.Xo)(t);return(0,f.k$)(e)}var Jt=n(3746);var Ht=function(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}((function(t){const e=new URLSearchParams;e.append("code",t);for(let n=1;n<arguments.length;n++)e.append("v",arguments[n]);throw Error(`Minified Lexical error #${t}; visit https://lexical.dev/docs/error?${e} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}));const Gt=(0,Jt.createContext)(null);function qt(){const t=(0,Jt.useContext)(Gt);return null==t&&Ht(8),t}function Xt(t,e){return t.getEditorState().read((()=>{const t=(0,f.gI)(e);return null!==t&&t.isSelected()}))}function Yt(t){const[e]=qt(),[n,r]=(0,Jt.useState)((()=>Xt(e,t)));return(0,Jt.useEffect)((()=>{let n=!0;const o=e.registerUpdateListener((()=>{n&&r(Xt(e,t))}));return()=>{n=!1,o()}}),[e,t]),[n,(0,Jt.useCallback)((n=>{e.update((()=>{let e=(0,f.dL)();(0,f.iO)(e)||(e=(0,f.h5)(),(0,f.oq)(e)),(0,f.iO)(e)&&(n?e.add(t):e.delete(t))}))}),[e,t]),(0,Jt.useCallback)((()=>{e.update((()=>{const t=(0,f.dL)();(0,f.iO)(t)&&t.clear()}))}),[e])]}const Qt=new Set;function te({altText:t,className:e,imageRef:n,src:o,width:i,height:s,maxWidth:l}){return function(t){if(!Qt.has(t))throw new Promise((e=>{const n=new Image;n.src=t,n.onload=()=>{Qt.add(t),e()}}))}(o),(0,r.jsx)("img",{className:e,src:o,alt:t,ref:n,style:{height:`${s}${"inherit"===s?"":"px"}`,maxWidth:l,width:`${i}${"inherit"===i?"":"px"}`}})}function ee({src:t,altText:e,nodeKey:n,maxWidth:i}){const s=(0,o.useRef)(null),l=(0,o.useRef)(null),[a,c,u]=Yt(n),[d]=qt(),h=(0,o.useRef)(null),g=(0,o.useCallback)((t=>{if(a&&(0,f.iO)((0,f.dL)())){t.preventDefault();const e=(0,f.gI)(n);(function(t){return"image"===t.getType()})(e)&&e.remove(),c(!1)}return!1}),[a,n,c]),p=(0,o.useCallback)((t=>{const e=(0,f.dL)(),n=l.current;return!(!a||!(0,f.iO)(e)||1!==e.getNodes().length||null===n||n===document.activeElement)&&(t.preventDefault(),n.focus(),!0)}),[a]),_=(0,o.useCallback)((t=>l.current===t.target&&((0,f.oq)(null),d.update((()=>{c(!0);const t=d.getRootElement();null!==t&&t.focus()})),!0)),[d,c]);return(0,o.useEffect)((()=>{const t=y(d.registerCommand(f.oj,((t,e)=>(h.current=e,!1)),f.KB),d.registerCommand(f.Kr,(t=>{const e=t;return e.target===s.current&&(e.shiftKey?c(!a):(u(),c(!0)),!0)}),f.KB),d.registerCommand(f.MK,g,f.KB),d.registerCommand(f.aR,g,f.KB),d.registerCommand(f.XN,p,f.KB),d.registerCommand(f.Zq,_,f.KB));return()=>{t()}}),[u,d,a,n,g,p,_,c]),(0,r.jsx)(o.Suspense,Object.assign({fallback:null},{children:(0,r.jsx)(te,{className:a?"selected":null,src:t,altText:e,imageRef:s,maxWidth:i})}))}function ne(t){if(t instanceof HTMLImageElement){const{alt:e,src:n}=t;return{node:oe({altText:e,src:n,maxWidth:"100%"})}}return null}class re extends f.Ij{constructor(t,e,n,r){super(r),this.__src=t,this.__altText=e,this.__maxWidth=n}static getType(){return"image"}static clone(t){return new re(t.__src,t.__altText,t.__maxWidth,t.__key)}setWidthAndHeight(t,e){const n=this.getWritable();n.__width=t,n.__height=e}createDOM(t){const e=document.createElement("div"),n=t.theme.image;return void 0!==n&&(e.className=n),e}updateDOM(){return!1}static importDOM(){const t=f.R2.importDOM();return Object.assign({img:t=>({conversion:ne,priority:0})},t)}exportDOM(){const t=document.createElement("img");return t.setAttribute("src",this.__src),t.setAttribute("alt",this.__altText),t.setAttribute("style",`max-width: ${this.__maxWidth}px;`),{element:t}}decorate(){return(0,r.jsx)(ee,{src:this.__src,altText:this.__altText,maxWidth:this.__maxWidth,nodeKey:this.getKey()})}static importJSON(t){const{altText:e,maxWidth:n,src:r}=t;return oe({altText:e,src:r,maxWidth:n})}exportJSON(){return{altText:this.getAltText(),maxWidth:this.__maxWidth,src:this.getSrc(),type:"image",version:1}}}function oe({src:t,altText:e,maxWidth:n}){return new re(t,e,n)}function ie(t){return{node:le({avatar:"",bio:"",date_joined:void 0,description:"",gender:"",location:"",real_name:"",reputation:0,role:"",status:"",tags:void 0,website:"",id:t.getAttribute("id"),ext_id:t.getAttribute("ext_id"),username:t.innerText.replace("@","")})}}class se extends f.R2{constructor(t,e,n){super(null!=e?e:`@${t.username}`,n),this.__user=t}static getType(){return"mention"}static clone(t){return new se(t.__user,t.__text,t.__key)}createDOM(t){const e=document.createElement("mention");return e.setAttribute("id",`${this.__user.id}`),e.setAttribute("ext-id",`${this.__user.ext_id}`),e.innerText=this.__text,e}updateDOM(t,e,n){const r=e.firstChild;return null===r||(super.updateDOM(t,r,n),!1)}static importDOM(){const t=f.R2.importDOM();return Object.assign({mention:t=>({conversion:ie,priority:0})},t)}exportDOM(){const t=document.createElement("mention");return t.setAttribute("id",`${this.__user.id}`),t.setAttribute("ext-id",`${this.__user.ext_id}`),t.textContent=`@${this.__user.username}`,{element:t}}isTextEntity(){return!0}static importJSON(t){const{user:e}=t;return le(e)}exportJSON(){return Object.assign(Object.assign({},super.exportJSON()),{user:this.__user,type:"mention",version:1})}}function le(t){const e=new se(t);return e.setMode("segmented").toggleDirectionless(),e}const ae=(0,f.fA)("INSERT_HORIZONTAL_RULE_COMMAND");function ce({nodeKey:t}){const[e]=qt(),[n,r,o]=Yt(t),i=(0,Jt.useCallback)((e=>{if(n&&(0,f.iO)((0,f.dL)())){e.preventDefault();const n=(0,f.gI)(t);if(function(t){return t instanceof ue}(n))return n.remove(),!0}return!1}),[n,t]);return(0,Jt.useEffect)((()=>y(e.registerCommand(f.Kr,(i=>{const s=e.getElementByKey(t);return i.target===s&&(i.shiftKey||o(),r(!n),!0)}),f.KB),e.registerCommand(f.MK,i,f.KB),e.registerCommand(f.aR,i,f.KB))),[o,e,n,t,i,r]),(0,Jt.useEffect)((()=>{const r=e.getElementByKey(t);null!==r&&(r.className=n?"selected":"")}),[e,n,t]),null}class ue extends f.Ij{static getType(){return"horizontalrule"}static clone(t){return new ue(t.__key)}static importJSON(t){return fe()}static importDOM(){return{hr:()=>({conversion:de,priority:0})}}exportJSON(){return{type:"horizontalrule",version:1}}exportDOM(){return{element:document.createElement("hr")}}createDOM(){return document.createElement("hr")}getTextContent(){return"\n"}isInline(){return!1}updateDOM(){return!1}decorate(){return Jt.createElement(ce,{nodeKey:this.__key})}}function de(){return{node:fe()}}function fe(){return(0,f.U2)(new ue)}const he=[ue,It,et,G,Rt,f.R2,L,N,re,se],ge="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,pe=ge?Jt.useLayoutEffect:Jt.useEffect,_e={tag:"history-merge"};function me({initialConfig:t,children:e}){const n=(0,Jt.useMemo)((()=>{const{theme:e,namespace:n,editor__DEPRECATED:r,nodes:o,onError:i,editorState:s,html:l}=t,a=function(t,e){let n=null;return null!=t&&(n=t[1]),{getTheme:function(){return null!=e?e:null!=n?n.getTheme():null}}}(null,e);let c=r||null;if(null===c){const r=(0,f.Jh)({editable:t.editable,html:l,namespace:n,nodes:o,onError:t=>i(t,r),theme:e});!function(t,e){if(null!==e)if(void 0===e)t.update((()=>{const e=(0,f.Gv)();if(e.isEmpty()){const n=(0,f.BE)();e.append(n);const r=ge?document.activeElement:null;(null!==(0,f.dL)()||null!==r&&r===t.getRootElement())&&n.select()}}),_e);else if(null!==e)switch(typeof e){case"string":{const n=t.parseEditorState(e);t.setEditorState(n,_e);break}case"object":t.setEditorState(e,_e);break;case"function":t.update((()=>{(0,f.Gv)().isEmpty()&&e(t)}),_e)}}(r,s),c=r}return[c,a]}),[]);return pe((()=>{const e=t.editable,[r]=n;r.setEditable(void 0===e||e)}),[]),Jt.createElement(Gt.Provider,{value:n},e)}function ye(){return ye=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ye.apply(this,arguments)}const xe="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?Jt.useLayoutEffect:Jt.useEffect;function ve({ariaActiveDescendant:t,ariaAutoComplete:e,ariaControls:n,ariaDescribedBy:r,ariaExpanded:o,ariaLabel:i,ariaLabelledBy:s,ariaMultiline:l,ariaOwns:a,ariaRequired:c,autoCapitalize:u,className:d,id:f,role:h="textbox",spellCheck:g=!0,style:p,tabIndex:_,"data-testid":m,...y}){const[x]=qt(),[v,b]=(0,Jt.useState)(!1),C=(0,Jt.useCallback)((t=>{t&&t.ownerDocument&&t.ownerDocument.defaultView&&x.setRootElement(t)}),[x]);return xe((()=>(b(x.isEditable()),x.registerEditableListener((t=>{b(t)})))),[x]),Jt.createElement("div",ye({},y,{"aria-activedescendant":v?t:void 0,"aria-autocomplete":v?e:"none","aria-controls":v?n:void 0,"aria-describedby":r,"aria-expanded":v&&"combobox"===h?!!o:void 0,"aria-label":i,"aria-labelledby":s,"aria-multiline":l,"aria-owns":v?a:void 0,"aria-readonly":!v||void 0,"aria-required":c,autoCapitalize:u,className:d,contentEditable:v,"data-testid":m,id:f,ref:C,role:h,spellCheck:g,style:p,tabIndex:_}))}const be=0,Ce=1,Se=2,we=0,ke=1,Te=2,Ne=3,Ee=4;function Oe(t,e){let n=Date.now(),r=we;return(o,i,s,l,a,c)=>{const u=Date.now();if(c.has("historic"))return r=we,n=u,Se;const d=function(t,e,n,r,o){if(null===t||0===n.size&&0===r.size&&!o)return we;const i=e._selection,s=t._selection;if(o)return ke;if(!((0,f.OP)(i)&&(0,f.OP)(s)&&s.isCollapsed()&&i.isCollapsed()))return we;const l=function(t,e,n){const r=t._nodeMap,o=[];for(const i of e){const t=r.get(i);void 0!==t&&o.push(t)}for(const[i,s]of n){if(!s)continue;const t=r.get(i);void 0===t||(0,f.wd)(t)||o.push(t)}return o}(e,n,r);if(0===l.length)return we;if(l.length>1){const n=e._nodeMap,r=n.get(i.anchor.key),o=n.get(s.anchor.key);return r&&o&&!t._nodeMap.has(r.__key)&&(0,f.Gg)(r)&&1===r.__text.length&&1===i.anchor.offset?Te:we}const a=l[0],c=t._nodeMap.get(a.__key);if(!(0,f.Gg)(c)||!(0,f.Gg)(a)||c.__mode!==a.__mode)return we;const u=c.__text,d=a.__text;if(u===d)return we;const h=i.anchor,g=s.anchor;if(h.key!==g.key||"text"!==h.type)return we;const p=h.offset,_=g.offset,m=d.length-u.length;return 1===m&&_===p-1?Te:-1===m&&_===p+1?Ne:-1===m&&_===p?Ee:we}(o,i,l,a,t.isComposing()),h=(()=>{const h=null===s||s.editor===t,g=c.has("history-push");if(!g&&h&&c.has("history-merge"))return be;if(null===o)return Ce;const p=i._selection;return l.size>0||a.size>0?!1===g&&d!==we&&d===r&&u<n+e&&h||1===l.size&&function(t,e,n){const r=e._nodeMap.get(t),o=n._nodeMap.get(t),i=e._selection,s=n._selection;let l=!1;return(0,f.OP)(i)&&(0,f.OP)(s)&&(l="element"===i.anchor.type&&"element"===i.focus.type&&"text"===s.anchor.type&&"text"===s.focus.type),!(l||!(0,f.Gg)(r)||!(0,f.Gg)(o))&&r.__type===o.__type&&r.__text===o.__text&&r.__mode===o.__mode&&r.__detail===o.__detail&&r.__style===o.__style&&r.__format===o.__format&&r.__parent===o.__parent}(Array.from(l)[0],o,i)?be:Ce:null!==p?be:Se})();return n=u,r=d,h}}function Pe(t){t.undoStack=[],t.redoStack=[],t.current=null}function Le({externalHistoryState:t}){const[e]=qt();return function(t,e,n=1e3){const r=(0,Jt.useMemo)((()=>e||{current:null,redoStack:[],undoStack:[]}),[e]);(0,Jt.useEffect)((()=>function(t,e,n){const r=Oe(t,n),o=y(t.registerCommand(f.$l,(()=>(function(t,e){const n=e.redoStack,r=e.undoStack;if(0!==r.length){const o=e.current,i=r.pop();null!==o&&(n.push(o),t.dispatchCommand(f.r0,!0)),0===r.length&&t.dispatchCommand(f.yn,!1),e.current=i||null,i&&i.editor.setEditorState(i.editorState,{tag:"historic"})}}(t,e),!0)),f.VN),t.registerCommand(f.zq,(()=>(function(t,e){const n=e.redoStack,r=e.undoStack;if(0!==n.length){const o=e.current;null!==o&&(r.push(o),t.dispatchCommand(f.yn,!0));const i=n.pop();0===n.length&&t.dispatchCommand(f.r0,!1),e.current=i||null,i&&i.editor.setEditorState(i.editorState,{tag:"historic"})}}(t,e),!0)),f.VN),t.registerCommand(f.BM,(()=>(Pe(e),!1)),f.VN),t.registerCommand(f.Nr,(()=>(Pe(e),t.dispatchCommand(f.r0,!1),t.dispatchCommand(f.yn,!1),!0)),f.VN),t.registerUpdateListener((({editorState:n,prevEditorState:o,dirtyLeaves:i,dirtyElements:s,tags:l})=>{const a=e.current,c=e.redoStack,u=e.undoStack,d=null===a?null:a.editorState;if(null!==a&&n===d)return;const h=r(o,n,a,i,s,l);if(h===Ce)0!==c.length&&(e.redoStack=[],t.dispatchCommand(f.r0,!1)),null!==a&&(u.push({...a}),t.dispatchCommand(f.yn,!0));else if(h===Se)return;e.current={editor:t,editorState:n}})));return o}(t,r,n)),[n,t,r])}(e,t),null}const Ae="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?Jt.useLayoutEffect:Jt.useEffect;function De(t){return{initialValueFn:()=>t.isEditable(),subscribe:e=>t.registerEditableListener(e)}}var Me=n(73935);const Fe=(0,n(86879).rx)()?o.useLayoutEffect:o.useEffect;const Re=()=>{const[t]=qt(),[e,n]=(0,o.useState)(!1);return(0,o.useEffect)((()=>t.registerCommand(f.Gq,(()=>(n(!1),!1)),f.KB)),[]),(0,o.useEffect)((()=>t.registerCommand(f.m$,(()=>(n(!0),!1)),f.KB)),[]),e};function Be(t,e=!0){if(t)return!1;let n=(0,f.Gv)().getTextContent();return e&&(n=n.trim()),""===n}function Ie(t){return()=>function(t){if(!Be(t,!1))return!1;const e=(0,f.Gv)().getChildren(),n=e.length;if(n>1)return!1;for(let r=0;r<n;r++){const t=e[r];if((0,f.k$)(t))return!1;if((0,f.F7)(t)){if(!(0,f.Rl)(t))return!1;if(0!==t.__indent)return!1;const e=t.getChildren(),n=e.length;for(let t=0;t<n;t++){const t=e[r];if(!(0,f.Gg)(t))return!1}}}return!0}(t)}!function(t){t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")&&t.default}((function(t){const e=new URLSearchParams;e.append("code",t);for(let n=1;n<arguments.length;n++)e.append("v",arguments[n]);throw Error(`Minified Lexical error #${t}; visit https://lexical.dev/docs/error?${e} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}));function je(t){return t.getEditorState().read(Ie(t.isComposing()))}function ze(t){Fe((()=>y(function(t){return y(t.registerCommand(f.Kr,(t=>{const e=(0,f.dL)();return!!(0,f.iO)(e)&&(e.clear(),!0)}),0),t.registerCommand(f.Mt,(t=>{const e=(0,f.dL)();return!!(0,f.OP)(e)&&(e.deleteCharacter(t),!0)}),f.VN),t.registerCommand(f.cj,(t=>{const e=(0,f.dL)();return!!(0,f.OP)(e)&&(e.deleteWord(t),!0)}),f.VN),t.registerCommand(f.n2,(t=>{const e=(0,f.dL)();return!!(0,f.OP)(e)&&(e.deleteLine(t),!0)}),f.VN),t.registerCommand(f.yF,(e=>{const n=(0,f.dL)();if("string"==typeof e)null!==n&&n.insertText(e);else{if(null===n)return!1;const r=e.dataTransfer;if(null!=r)bt(r,n,t);else if((0,f.OP)(n)){const t=e.data;return t&&n.insertText(t),!0}}return!0}),f.VN),t.registerCommand(f.RJ,(()=>{const t=(0,f.dL)();return!!(0,f.OP)(t)&&(t.removeText(),!0)}),f.VN),t.registerCommand(f.Ew,(t=>{const e=(0,f.dL)();return!!(0,f.OP)(e)&&(e.formatText(t),!0)}),f.VN),t.registerCommand(f.RO,(t=>{const e=(0,f.dL)();if(!(0,f.OP)(e)&&!(0,f.iO)(e))return!1;const n=e.getNodes();for(const r of n){const e=S(r,(t=>(0,f.F7)(t)&&!t.isInline()));null!==e&&e.setFormat(t)}return!0}),f.VN),t.registerCommand(f.WH,(t=>{const e=(0,f.dL)();return!!(0,f.OP)(e)&&(e.insertLineBreak(t),!0)}),f.VN),t.registerCommand(f.K0,(()=>{const t=(0,f.dL)();return!!(0,f.OP)(t)&&(t.insertParagraph(),!0)}),f.VN),t.registerCommand(f.cA,(()=>((0,f.od)([(0,f.S3)()]),!0)),f.VN),t.registerCommand(f.PU,(()=>Ut((t=>{const e=t.getIndent();t.setIndent(e+1)}))),f.VN),t.registerCommand(f.cz,(()=>Ut((t=>{const e=t.getIndent();e>0&&t.setIndent(e-1)}))),f.VN),t.registerCommand(f._0,(t=>{const e=(0,f.dL)();if((0,f.iO)(e)&&!Vt(t.target)){const t=e.getNodes();if(t.length>0)return t[0].selectPrevious(),!0}else if((0,f.OP)(e)){const n=(0,f.fL)(e.focus,!0);if(!t.shiftKey&&(0,f.k$)(n)&&!n.isIsolated()&&!n.isInline())return n.selectPrevious(),t.preventDefault(),!0}return!1}),f.VN),t.registerCommand(f.Zb,(t=>{const e=(0,f.dL)();if((0,f.iO)(e)){const t=e.getNodes();if(t.length>0)return t[0].selectNext(0,0),!0}else if((0,f.OP)(e)){if(function(t){const e=t.focus;return"root"===e.key&&e.offset===(0,f.Gv)().getChildrenSize()}(e))return t.preventDefault(),!0;const n=(0,f.fL)(e.focus,!1);if(!t.shiftKey&&(0,f.k$)(n)&&!n.isIsolated()&&!n.isInline())return n.selectNext(),t.preventDefault(),!0}return!1}),f.VN),t.registerCommand(f.u$,(t=>{const e=(0,f.dL)();if((0,f.iO)(e)){const n=e.getNodes();if(n.length>0)return t.preventDefault(),n[0].selectPrevious(),!0}if(!(0,f.OP)(e))return!1;if((0,dt.pi)(e,!0)){const n=t.shiftKey;return t.preventDefault(),(0,dt.i0)(e,n,!0),!0}return!1}),f.VN),t.registerCommand(f.Nm,(t=>{const e=(0,f.dL)();if((0,f.iO)(e)&&!Vt(t.target)){const n=e.getNodes();if(n.length>0)return t.preventDefault(),n[0].selectNext(0,0),!0}if(!(0,f.OP)(e))return!1;const n=t.shiftKey;return!!(0,dt.pi)(e,!1)&&(t.preventDefault(),(0,dt.i0)(e,n,!1),!0)}),f.VN),t.registerCommand(f.aR,(e=>{if(Vt(e.target))return!1;const n=(0,f.dL)();if(!(0,f.OP)(n))return!1;e.preventDefault();const{anchor:r}=n,o=r.getNode();return n.isCollapsed()&&0===r.offset&&!(0,f.wd)(o)&&C(o).getIndent()>0?t.dispatchCommand(f.cz,void 0):t.dispatchCommand(f.Mt,!0)}),f.VN),t.registerCommand(f.MK,(e=>{if(Vt(e.target))return!1;const n=(0,f.dL)();return!!(0,f.OP)(n)&&(e.preventDefault(),t.dispatchCommand(f.Mt,!1))}),f.VN),t.registerCommand(f.XN,(e=>{const n=(0,f.dL)();if(!(0,f.OP)(n))return!1;if(null!==e){if((At||Lt||Mt)&&Pt)return!1;if(e.preventDefault(),e.shiftKey)return t.dispatchCommand(f.WH,!1)}return t.dispatchCommand(f.K0,void 0)}),f.VN),t.registerCommand(f.Zq,(()=>{const e=(0,f.dL)();return!!(0,f.OP)(e)&&(t.blur(),!0)}),f.VN),t.registerCommand(f.zD,(e=>{const[,n]=Kt(e);if(n.length>0){const r=Nt(e.clientX,e.clientY);if(null!==r){const{offset:e,node:o}=r,i=(0,f.Xo)(o);if(null!==i){const t=(0,f.vN)();if((0,f.Gg)(i))t.anchor.set(i.getKey(),e,"text"),t.focus.set(i.getKey(),e,"text");else{const e=i.getParentOrThrow().getKey(),n=i.getIndexWithinParent()+1;t.anchor.set(e,n,"element"),t.focus.set(e,n,"element")}const n=(0,f.S9)(t);(0,f.oq)(n)}t.dispatchCommand(Ft,n)}return e.preventDefault(),!0}const r=(0,f.dL)();return!!(0,f.OP)(r)}),f.VN),t.registerCommand(f.XI,(t=>{const[e]=Kt(t),n=(0,f.dL)();return!(e&&!(0,f.OP)(n))}),f.VN),t.registerCommand(f.kE,(t=>{const[e]=Kt(t),n=(0,f.dL)();if(e&&!(0,f.OP)(n))return!1;const r=Nt(t.clientX,t.clientY);if(null!==r){const e=(0,f.Xo)(r.node);(0,f.k$)(e)&&t.preventDefault()}return!0}),f.VN),t.registerCommand(f.Hr,(()=>((0,f.UL)(),!0)),f.VN),t.registerCommand(f.LV,(e=>(kt(t,k(e,ClipboardEvent)?e:null),!0)),f.VN),t.registerCommand(f.dR,(e=>(async function(t,e){await kt(e,k(t,ClipboardEvent)?t:null),e.update((()=>{const t=(0,f.dL)();(0,f.OP)(t)?t.removeText():(0,f.iO)(t)&&t.getNodes().forEach((t=>t.remove()))}))}(e,t),!0)),f.VN),t.registerCommand(f.A1,(e=>{const[,n,r]=Kt(e);return n.length>0&&!r?(t.dispatchCommand(Ft,n),!0):!(0,f.GA)(e.target)&&null!==(0,f.dL)()&&(function(t,e){t.preventDefault(),e.update((()=>{const n=(0,f.dL)(),r=k(t,InputEvent)||k(t,KeyboardEvent)?null:t.clipboardData;null!=r&&null!==n&&bt(r,n,e)}),{tag:"paste"})}(e,t),!0)}),f.VN))}(t),function(t){const e=window.location.origin,n=n=>{if(n.origin!==e)return;const r=t.getRootElement();if(document.activeElement!==r)return;const o=n.data;if("string"==typeof o){let e;try{e=JSON.parse(o)}catch(i){return}if(e&&"nuanria_messaging"===e.protocol&&"request"===e.type){const r=e.payload;if(r&&"makeChanges"===r.functionId){const e=r.args;if(e){const[r,o,i,s,l,a]=e;t.update((()=>{const t=(0,f.dL)();if((0,f.OP)(t)){const e=t.anchor;let a=e.getNode(),c=0,u=0;if((0,f.Gg)(a)&&r>=0&&o>=0&&(c=r,u=r+o,t.setTextNodeRange(a,c,a,u)),c===u&&""===i||(t.insertRawText(i),a=e.getNode()),(0,f.Gg)(a)){c=s,u=s+l;const e=a.getTextContentSize();c=c>e?e:c,u=u>e?e:u,t.setTextNodeRange(a,c,a,u)}n.stopImmediatePropagation()}}))}}}}};return window.addEventListener("message",n,!0),()=>{window.removeEventListener("message",n,!0)}}(t))),[t])}function $e({contentEditable:t,placeholder:e,ErrorBoundary:n}){const[i]=qt(),s=function(t,e){const[n,i]=(0,o.useState)((()=>t.getDecorators()));return Fe((()=>t.registerDecoratorListener((t=>{(0,Me.flushSync)((()=>{i(t)}))}))),[t]),(0,o.useEffect)((()=>{i(t.getDecorators())}),[t]),(0,o.useMemo)((()=>{const i=[],s=Object.keys(n);for(let l=0;l<s.length;l++){const a=s[l],c=(0,r.jsx)(e,Object.assign({onError:e=>t._onError(e)},{children:(0,r.jsx)(o.Suspense,Object.assign({fallback:null},{children:n[a]}))})),u=t.getElementByKey(a);null!==u&&i.push((0,Me.createPortal)(c,u,a))}return i}),[e,n,t])}(i,n);return ze(i),(0,r.jsxs)(r.Fragment,{children:[t,(0,r.jsx)(We,{content:e}),s]})}function We({content:t}){const[e]=qt(),n=function(t){const[e,n]=(0,o.useState)((()=>je(t)));return Fe((()=>{function e(){const e=je(t);n(e)}return e(),y(t.registerUpdateListener((()=>{e()})),t.registerEditableListener((()=>{e()})))}),[t]),e}(e),r=function(t){const[e]=qt(),n=(0,Jt.useMemo)((()=>t(e)),[e,t]),r=(0,Jt.useRef)(n.initialValueFn()),[o,i]=(0,Jt.useState)(r.current);return Ae((()=>{const{initialValueFn:t,subscribe:e}=n,o=t();return r.current!==o&&(r.current=o,i(o)),e((t=>{r.current=t,i(t)}))}),[n,t]),o}(De),i=Re();return!n||i?null:"function"==typeof t?t(r):t}function Ze(t,e){return Ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ze(t,e)}var Ke={error:null},Ue=function(t){var e,n;function r(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).state=Ke,e.resetErrorBoundary=function(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];null==e.props.onReset||(t=e.props).onReset.apply(t,r),e.reset()},e}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,Ze(e,n),r.getDerivedStateFromError=function(t){return{error:t}};var o=r.prototype;return o.reset=function(){this.setState(Ke)},o.componentDidCatch=function(t,e){var n,r;null==(n=(r=this.props).onError)||n.call(r,t,e)},o.componentDidUpdate=function(t,e){var n,r,o,i,s=this.state.error,l=this.props.resetKeys;null!==s&&null!==e.error&&(void 0===(o=t.resetKeys)&&(o=[]),void 0===(i=l)&&(i=[]),o.length!==i.length||o.some((function(t,e){return!Object.is(t,i[e])})))&&(null==(n=(r=this.props).onResetKeysChange)||n.call(r,t.resetKeys,l),this.reset())},o.render=function(){var t=this.state.error,e=this.props,n=e.fallbackRender,r=e.FallbackComponent,o=e.fallback;if(null!==t){var i={error:t,resetErrorBoundary:this.resetErrorBoundary};if(Jt.isValidElement(o))return o;if("function"==typeof n)return n(i);if(r)return Jt.createElement(r,i);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},r}(Jt.Component);function Ve({children:t,onError:e}){return Jt.createElement(Ue,{fallback:Jt.createElement("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"}},"An error was thrown."),onError:e},t)}function Je(){const[t]=qt();return(0,Jt.useEffect)((()=>t.registerCommand(ae,(t=>{const e=(0,f.dL)();if(!(0,f.OP)(e))return!1;if(null!==e.focus.getNode()){w(fe())}return!0}),f.VN)),[t]),null}var He=n(97582),Ge=n(93946),qe=n(98456),Xe=n(67564),Ye=n(41567),Qe=n(24085),tn=n(62254),en=n(51206),nn=n(63862),rn=n(50635),on=n(20377);const sn="SCEditor",ln=(0,f.fA)(),an=(0,rn.xR)((0,o.forwardRef)(((t,e)=>{var{progress:n=null}=t,o=(0,He._T)(t,["progress"]);return(0,r.jsx)(Ge.Z,Object.assign({},o,{"aria-label":"upload image",ref:e},{children:n?(0,r.jsx)(qe.Z,{variant:"determinate",value:n,size:"1rem"}):(0,r.jsx)(Xe.Z,Object.assign({color:"inherit"},{children:"image"}))}))})));const cn={root:`${sn}-image-plugin-root`},un=(0,i.ZP)((function({editor:t,className:e=""}){const n=(0,tn.RM)(),i=(0,en.LD)(),[s,l]=(0,o.useState)({}),{enqueueSnackbar:a}=(0,on.Ds)();return i.user?(0,r.jsxs)(Ye.ZP,Object.assign({destination:{url:`${n.settings.portal}${Qe.Z.ComposerChunkUploadMedia.url()}`,headers:Object.assign({},n.settings.session&&n.settings.session.authToken&&{Authorization:`Bearer ${n.settings.session.authToken.accessToken}`}),method:Qe.Z.ComposerChunkUploadMedia.method},chunkSize:204800,multiple:!0,accept:"image/*",fileFilter:(t,e,n)=>t.type.startsWith("image/")},{children:[(0,r.jsx)(nn.Z,{type:"eimage",onSuccess:e=>{const n={altText:e.title,src:e.image,width:e.image_width,height:e.image_height};t.focus(),t.dispatchCommand(ln,n)},onProgress:t=>{l(Object.assign({},t))},onError:(t,e)=>{a(e,{variant:"error",autoHideDuration:3e3})}}),(0,r.jsx)(an,{className:e,extraProps:{disabled:0!==Object.keys(s).length,progress:0!==Object.keys(s).length?Object.values(s)[0].completed:null}})]})):null}),{name:sn,slot:"ImagePluginRoot"})((()=>({})));function dn(){const[t]=qt();return(0,o.useEffect)((()=>{if(t.hasNodes([re]))return t.registerCommand(ln,(t=>(w(oe({src:t.src,altText:t.altText,maxWidth:"100%",width:t.width,height:t.height})),!0)),f.VN)}),[t]),t.hasNodes([re])?(0,r.jsx)(un,{editor:t,className:cn.root}):null}var fn=n(2734),hn=n(37292),gn=n(14564),pn=n(16628),_n=n(44465);const mn={root:`${sn}-emoji-plugin-root`},yn=(0,i.ZP)((function({editor:t,className:e=""}){const n=(0,fn.Z)(),i=(0,hn.Z)(n.breakpoints.down("md")),[s,l]=(0,o.useState)(!1);return i?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Ge.Z,Object.assign({className:e,onClick:t=>{l(t.currentTarget)}},{children:(0,r.jsx)(Xe.Z,{children:"sentiment_satisfied_alt"})})),(0,r.jsx)(gn.ZP,Object.assign({open:Boolean(s),anchorEl:s,onClose:()=>l(null),TransitionComponent:pn.Z,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"left"},sx:t=>({zIndex:t.zIndex.tooltip})},{children:(0,r.jsx)(_n.Z,{onEmojiClick:(e,n)=>{t.focus(),t.dispatchCommand(f.yF,e.emoji)}})}))]})}),{name:sn,slot:"EmojiPluginRoot"})((()=>({})));function xn(){const[t]=qt();return(0,r.jsx)(yn,{editor:t,className:mn.root})}const vn=function({defaultValue:t}){const[e]=qt();return(0,o.useEffect)((()=>{t&&e.update((()=>{const n=(new DOMParser).parseFromString(t,"text/html"),r=ft(e,n),o=(0,f.Gv)();if(r.length<=1){const t=(0,f.BE)();r.forEach((e=>t.append(e))),o.getFirstChild().replace(t).selectEnd()}else o.getFirstChild().remove(),r.forEach((t=>{((0,f.F7)(t)||(0,f.k$)(t))&&o.append(t)})),o.selectEnd()}))}),[]),null},bn="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?Jt.useLayoutEffect:Jt.useEffect;function Cn({ignoreHistoryMergeTagChange:t=!0,ignoreSelectionChange:e=!1,onChange:n}){const[r]=qt();return bn((()=>{if(n)return r.registerUpdateListener((({editorState:o,dirtyElements:i,dirtyLeaves:s,prevEditorState:l,tags:a})=>{e&&0===i.size&&0===s.size||t&&a.has("history-merge")||l.isEmpty()||n(o,r,a)}))}),[r,t,e,n]),null}const Sn=t=>{const{onChange:e}=t;return(0,r.jsx)(Cn,{onChange:(t,n)=>{t.read((()=>{const t=ht(n);e(t)}))}})};var wn=function(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}((function(t){const e=new URLSearchParams;e.append("code",t);for(let n=1;n<arguments.length;n++)e.append("v",arguments[n]);throw Error(`Minified Lexical error #${t}; visit https://lexical.dev/docs/error?${e} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}));function kn(t,e){for(let n=0;n<e.length;n++){const r=e[n](t);if(r)return r}return null}const Tn=/[.,;\s]/;function Nn(t){return Tn.test(t)}function En(t){return Nn(t[t.length-1])}function On(t){return Nn(t[0])}function Pn(t){let e=t.getPreviousSibling();return(0,f.F7)(e)&&(e=e.getLastDescendant()),null===e||(0,f.A3)(e)||(0,f.Gg)(e)&&En(e.getTextContent())}function Ln(t){let e=t.getNextSibling();return(0,f.F7)(e)&&(e=e.getFirstDescendant()),null===e||(0,f.A3)(e)||(0,f.Gg)(e)&&On(e.getTextContent())}function An(t,e,n,r){return!!(t>0?Nn(n[t-1]):Pn(r[0]))&&(e<n.length?Nn(n[e]):Ln(r[r.length-1]))}function Dn(t,e,n){const r=[],o=[],i=[];let s=0,l=0;const a=[...t];for(;a.length>0;){const t=a[0],c=t.getTextContent().length,u=l;l+c<=e?(r.push(t),s+=c):u>=n?i.push(t):o.push(t),l+=c,a.shift()}return[s,r,o,i]}function Mn(t,e,n,r){const o=A(r.url,r.attributes);if(1===t.length){let i,s=t[0];0===e?[i,s]=s.splitText(n):[,i,s]=s.splitText(e,n);const l=(0,f.MX)(r.text);return l.setFormat(i.getFormat()),l.setDetail(i.getDetail()),l.setStyle(i.getStyle()),o.append(l),i.replace(o),s}if(t.length>1){const r=t[0];let i,s=r.getTextContent().length;0===e?i=r:[,i]=r.splitText(e);const l=[];let a;for(let e=1;e<t.length;e++){const r=t[e],o=r.getTextContent().length,i=s;if(i<n)if(s+o<=n)l.push(r);else{const[t,e]=r.splitText(n-i);l.push(t),a=e}s+=o}const c=(0,f.dL)(),u=c?c.getNodes().find(f.Gg):void 0,d=(0,f.MX)(i.getTextContent());return d.setFormat(i.getFormat()),d.setDetail(i.getDetail()),d.setStyle(i.getStyle()),o.append(d,...l),u&&u===i&&((0,f.OP)(c)?d.select(c.anchor.offset,c.focus.offset):(0,f.iO)(c)&&d.select(0,d.getTextContent().length)),i.replace(o),a}}function Fn(t,e,n){const r=t.getChildren(),o=r.length;for(let a=0;a<o;a++){const e=r[a];if(!(0,f.Gg)(e)||!e.isSimpleText())return Rn(t),void n(null,t.getURL())}const i=t.getTextContent(),s=kn(i,e);if(null===s||s.text!==i)return Rn(t),void n(null,t.getURL());if(!Pn(t)||!Ln(t))return Rn(t),void n(null,t.getURL());const l=t.getURL();if(l!==s.url&&(t.setURL(s.url),n(s.url,l)),s.attributes){const e=t.getRel();e!==s.attributes.rel&&(t.setRel(s.attributes.rel||null),n(s.attributes.rel||null,e));const r=t.getTarget();r!==s.attributes.target&&(t.setTarget(s.attributes.target||null),n(s.attributes.target||null,r))}}function Rn(t){const e=t.getChildren();for(let n=e.length-1;n>=0;n--)t.insertAfter(e[n]);return t.remove(),e.map((t=>t.getLatest()))}function Bn({matchers:t,onChange:e}){const[n]=qt();return function(t,e,n){(0,Jt.useEffect)((()=>{t.hasNodes([L])||wn(77);const r=(t,e)=>{n&&n(t,e)};return y(t.registerNodeTransform(f.R2,(t=>{const n=t.getParentOrThrow(),o=t.getPreviousSibling();if(D(n))Fn(n,e,r);else if(!P(n)){if(t.isSimpleText()&&(On(t.getTextContent())||!D(o))){const n=function(t){const e=[t];let n=t.getNextSibling();for(;null!==n&&(0,f.Gg)(n)&&n.isSimpleText()&&(e.push(n),!/[\s]/.test(n.getTextContent()));)n=n.getNextSibling();return e}(t);!function(t,e,n){let r=[...t];const o=r.map((t=>t.getTextContent())).join("");let i,s=o,l=0;for(;(i=kn(s,e))&&null!==i;){const t=i.index,e=t+i.length;if(An(l+t,l+e,o,r)){const[o,,s,a]=Dn(r,l+t,l+e),c=Mn(s,l+t-o,l+e-o,i);r=c?[c,...a]:a,n(i.url,null),l=0}else l+=e;s=s.substring(e)}}(n,e,r)}!function(t,e,n){const r=t.getPreviousSibling(),o=t.getNextSibling(),i=t.getTextContent();D(r)&&!On(i)&&(r.append(t),Fn(r,e,n),n(null,r.getURL())),D(o)&&!En(i)&&(Rn(o),Fn(o,e,n),n(null,o.getURL()))}(t,e,r)}})))}),[t,e,n])}(n,t,e),null}const In=/((https?:\/\/(www\.)?)|(www\.))[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,jn=/(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/,zn=[t=>{const e=In.exec(t);return e&&{index:e.index,length:e[0].length,text:e[0],url:e[0]}},t=>{const e=jn.exec(t);return e&&{index:e.index,length:e[0].length,text:e[0],url:`mailto:${e[0]}`}}];function $n(){return(0,r.jsx)(Bn,{matchers:zn})}var Wn=n(24243),Zn=n(87952),Kn=n(40424),Un=n(7982);const Vn="\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'\"~=<>_:;",Jn=Vn,Hn=new RegExp("(^|[^#])((?:"+("\\b[A-Z][^\\s"+Vn+"]")+"{1,})$)"),Gn=Jn,qn=["@","\\uff20"].join(""),Xn="[^"+qn+Gn+"\\s]",Yn=new RegExp("(^|\\s|\\()(["+qn+"]((?:"+Xn+("(?:\\.[ |$]| |["+Gn+"]|)")+"){0,75}))$"),Qn=new RegExp("(^|\\s|\\()(["+qn+"]((?:"+Xn+"){0,50}))$");function tr(t,e){const n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return n.top>r.top&&n.top<r.bottom}function er(t,e,n,r){const[i]=qt();(0,o.useEffect)((()=>{if(null!=e&&null!=t){const t=i.getRootElement(),o=null!=t?function(t,e){let n=getComputedStyle(t);const r="absolute"===n.position,o=e?/(auto|scroll|hidden)/:/(auto|scroll)/;if("fixed"===n.position)return document.body;for(let i=t;i=i.parentElement;)if(n=getComputedStyle(i),(!r||"static"!==n.position)&&o.test(n.overflow+n.overflowY+n.overflowX))return i;return document.body}(t,!1):document.body;let s=!1,l=tr(e,o);const a=function(){s||(window.requestAnimationFrame((function(){n(),s=!1})),s=!0);const t=tr(e,o);t!==l&&(l=t,null!=r&&r(t))},c=new ResizeObserver(n);return window.addEventListener("resize",n),document.addEventListener("scroll",a,{capture:!0,passive:!0}),c.observe(e),()=>{c.unobserve(e),window.removeEventListener("resize",n),document.removeEventListener("scroll",a,!0)}}}),[e,i,r,n,t])}const nr=new Map;function rr({index:t,isHovered:e,isSelected:n,onClick:i,onMouseEnter:s,onMouseLeave:l,result:a}){const c=(0,o.useRef)(null);return(0,r.jsxs)("li",Object.assign({tabIndex:-1,className:u()("item",{selected:n,hovered:e}),ref:c,role:"option","aria-selected":n,id:"typeahead-item-"+t,onMouseEnter:s,onMouseLeave:l,onClick:i},{children:[(0,r.jsx)(Zn.Z,{alt:a.username,src:a.avatar})," ",a.username]}),a.id)}function or(t){const e=function(t,e){let n=Yn.exec(t);if(null===n&&(n=Qn.exec(t)),null!==n){const t=n[1],r=n[3];if(r.length>=e)return{leadOffset:n.index+t.length,matchingString:r,replaceableString:n[2]}}return null}(t,1);return null===e?function(t,e){const n=Hn.exec(t);if(null!==n){const t=n[1],r=n[2];if(null!=r&&r.length>=e)return{leadOffset:n.index+t.length,matchingString:r,replaceableString:r}}return null}(t,3):e}const ir={root:`${sn}-mention-plugin-root`},sr=(0,i.ZP)((function({close:t,editor:e,resolution:n,className:i=""}){const s=(0,o.useRef)(null),l=n.match,a=function(t){const[e,n]=(0,o.useState)(null);return(0,o.useEffect)((()=>{const e=nr.get(t);null!==e&&(void 0===e?(nr.set(t,null),Wn.Z.request({url:Qe.Z.UserSearch.url(),method:Qe.Z.UserSearch.method,params:{user:t,limit:5}}).then((e=>{nr.set(t,e.data.results),n(e.data.results)}))):n(e))}),[t]),e}(l.matchingString),[c,u]=(0,o.useState)(null),[d,h]=(0,o.useState)(null),g=(0,o.useCallback)((n=>{if(n=n||c,null===a||null===n)return;const r=a[n];t(),function(t,e,n){t.update((()=>{const t=(0,f.dL)();if(!(0,f.OP)(t)||!t.isCollapsed())return;const r=t.anchor;if("text"!==r.type)return;const o=r.getNode();if(!o.isSimpleText())return;const i=r.offset,s=o.getTextContent().slice(0,i),l=n.replaceableString.length,a=i-function(t,e,n){let r=n;for(let o=r;o<=e.length;o++)t.substr(-o)===e.substr(0,o)&&(r=o);return r}(s,e.username,l);if(a<0)return;let c;0===a?[c]=o.splitText(i):[,c]=o.splitText(a,i);const u=le(e);c.replace(u),u.select()}))}(e,r,l)}),[t,l,e,a,c]),p=(0,o.useCallback)((t=>{const n=e.getRootElement();null!==n&&(n.setAttribute("aria-activedescendant","typeahead-item-"+t),u(t))}),[e]);return(0,o.useEffect)((()=>()=>{const t=e.getRootElement();null!==t&&t.removeAttribute("aria-activedescendant")}),[e]),Fe((()=>{null===a?u(null):null===c&&p(0)}),[a,c,p]),(0,o.useEffect)((()=>y(e.registerCommand(f.Zb,(t=>{const e=t;return null!==a&&null!==c&&c<4&&c!==a.length-1&&(p(c+1),e.preventDefault(),e.stopImmediatePropagation()),!0}),f.KB),e.registerCommand(f._0,(t=>{const e=t;return null!==a&&null!==c&&0!==c&&(p(c-1),e.preventDefault(),e.stopImmediatePropagation()),!0}),f.KB),e.registerCommand(f.Zq,(e=>{const n=e;return null!==a&&null!==c&&(n.preventDefault(),n.stopImmediatePropagation(),t(),!0)}),f.KB),e.registerCommand(f.dB,(t=>{const e=t;return null!==a&&null!==c&&(e.preventDefault(),e.stopImmediatePropagation(),g(),!0)}),f.KB),e.registerCommand(f.XN,(t=>null!==a&&null!==c&&(null!==t&&(t.preventDefault(),t.stopImmediatePropagation()),g(),!0)),f.KB))),[g,t,e,a,c,p]),null===a?null:(0,r.jsx)("div",Object.assign({className:i,"aria-label":"Suggested mentions",ref:s,role:"listbox"},{children:(0,r.jsx)("ul",{children:a.slice(0,5).map(((t,e)=>(0,r.jsx)(rr,{index:e,isHovered:e===d,isSelected:e===c,onClick:()=>{g(e)},onMouseEnter:()=>{h(e)},onMouseLeave:()=>{h(null)},result:t},t.id)))})}))}),{name:sn,slot:"MentionPluginRoot"})((()=>({})));function lr(t,e=null){const[n,i]=(0,o.useState)(null),s=function(t,e,n){const[r,i]=(0,o.useState)(null),[s]=qt(),l=(0,o.useCallback)((()=>{const e=s.getRootElement(),o=r,l=o.firstChild;if(null!==e&&null!==t){const{left:r,top:s,width:a,height:c}=t.range.getBoundingClientRect();if(o.style.top=`${s+window.scrollY}px`,o.style.left=`${r+window.scrollX}px`,o.style.height=`${c}px`,o.style.width=`${a}px`,null!==l){const t=l.getBoundingClientRect(),n=t.height,i=t.width,a=e.getBoundingClientRect();r+i>a.right&&(o.style.left=`${a.right-i+window.scrollX}px`);const u=10;(s+n>window.innerHeight||s+n>a.bottom)&&s-a.top>n&&(o.style.top=s-n+window.scrollY-(c+u)+"px")}o.isConnected||(null!=n&&(o.className=n),o.setAttribute("aria-label","Typeahead menu"),o.setAttribute("id","typeahead-menu"),o.setAttribute("role","listbox"),o.style.display="block",o.style.position="absolute",document.body.append(o)),i(o),e.setAttribute("aria-controls","typeahead-menu")}}),[r,s,t,n]);(0,o.useEffect)((()=>{t&&!r&&i(document.createElement("div"))}),[t]),(0,o.useEffect)((()=>{const e=s.getRootElement();if(null!==t&&r)return l(),()=>{null!==e&&e.removeAttribute("aria-controls");const t=r;null!==t&&t.isConnected&&t.remove()}}),[r,s,l,t]);const a=(0,o.useCallback)((n=>{null!==t&&(n||e(null))}),[t,e]);return er(t,r,l,a),r}(n,i,e);(0,o.useEffect)((()=>{if(!t.hasNodes([se]))throw new Error("MentionsPlugin: MentionNode not registered on editor")}),[t]),(0,o.useEffect)((()=>{let e=document.createRange(),n=null;const r=t.registerUpdateListener((({prevEditorState:r})=>{if(r.isEmpty())return;const o=e,s=function(t){let e=null;return t.getEditorState().read((()=>{const t=(0,f.dL)();(0,f.OP)(t)&&(e=function(t){const e=t.anchor;if("text"!==e.type)return null;const n=e.getNode();if(!n.isSimpleText())return null;const r=e.offset;return n.getTextContent().slice(0,r)}(t))})),e}(t);if(s===n||null===o)return;if(n=s,null===s)return;const l=or(s);if(null!==l&&!function(t,e){return 0===e&&t.getEditorState().read((()=>{const t=(0,f.dL)();if((0,f.OP)(t)){const e=t.anchor.getNode().getPreviousSibling();return(0,f.Gg)(e)&&e.isTextEntity()}return!1}))}(t,l.leadOffset)){const t=function(t,e){const n=window.getSelection();if(null===n||!n.isCollapsed)return!1;const r=n.anchorNode,o=t.leadOffset,i=n.anchorOffset;if(null==r||null==i)return!1;try{e.setStart(r,o),e.setEnd(r,i)}catch(s){return!1}return!0}(l,o);if(null!==t)return void i({match:l,range:o})}i(null)}));return()=>{e=null,r()}}),[t]);const l=(0,o.useCallback)((()=>{i(null)}),[n]);return null===n||null===t?null:s?(0,r.jsx)(Un.d,Object.assign({onClickAway:l},{children:(0,r.jsx)(Kn.Z,Object.assign({container:s},{children:(0,r.jsx)(sr,{close:l,resolution:n,editor:t,className:ir.root})}))})):null}function ar(){const[t]=qt();return lr(t)}function cr({validateUrl:t}){const[e]=qt();return(0,Jt.useEffect)((()=>{if(!e.hasNodes([N]))throw new Error("LinkPlugin: LinkNode not registered on editor");return y(e.registerCommand(M,(e=>{if(null===e)return F(e),!0;if("string"==typeof e)return!(void 0!==t&&!t(e)||(F(e),0));{const{url:t,target:n,rel:r,title:o}=e;return F(t,{rel:r,target:n,title:o}),!0}}),f.KB),void 0!==t?e.registerCommand(f.A1,(n=>{const r=(0,f.dL)();if(!(0,f.OP)(r)||r.isCollapsed()||!k(n,ClipboardEvent))return!1;const o=n;if(null===o.clipboardData)return!1;const i=o.clipboardData.getData("text");return!!t(i)&&!r.getNodes().some((t=>(0,f.F7)(t)))&&(e.dispatchCommand(M,i),n.preventDefault(),!0)}),f.KB):()=>{})}),[e,t]),null}const ur=(0,o.forwardRef)(((t,e)=>{const[n]=qt();return(0,o.useImperativeHandle)(e,(()=>({focus:()=>{n.focus()}}))),null}));class dr extends f.Ij{constructor(t,e){super(e),this.__format=t||""}exportJSON(){return{format:this.__format||"",type:"decorator-block",version:1}}canIndent(){return!1}createDOM(){return document.createElement("div")}updateDOM(){return!1}setFormat(t){this.getWritable().__format=t}isInline(){return!1}}const fr=/^(\d+(?:\.\d+)?)px$/,hr=0,gr=1;class pr extends f.HX{static getType(){return"tablecell"}static clone(t){const e=new pr(t.__headerState,t.__colSpan,t.__width,t.__key);return e.__rowSpan=t.__rowSpan,e.__backgroundColor=t.__backgroundColor,e}static importDOM(){return{td:t=>({conversion:_r,priority:0}),th:t=>({conversion:_r,priority:0})}}static importJSON(t){const e=t.colSpan||1,n=t.rowSpan||1,r=mr(t.headerState,e,t.width||void 0);return r.__rowSpan=n,r.__backgroundColor=t.backgroundColor||null,r}constructor(t=hr,e=1,n,r){super(r),this.__colSpan=e,this.__rowSpan=1,this.__headerState=t,this.__width=n,this.__backgroundColor=null}createDOM(t){const e=document.createElement(this.getTag());return this.__width&&(e.style.width=`${this.__width}px`),this.__colSpan>1&&(e.colSpan=this.__colSpan),this.__rowSpan>1&&(e.rowSpan=this.__rowSpan),null!==this.__backgroundColor&&(e.style.backgroundColor=this.__backgroundColor),x(e,t.theme.tableCell,this.hasHeader()&&t.theme.tableCellHeader),e}exportDOM(t){const{element:e}=super.exportDOM(t);if(e){const t=e,n=700,r=this.getParentOrThrow().getChildrenSize();t.style.border="1px solid black",this.__colSpan>1&&(t.colSpan=this.__colSpan),this.__rowSpan>1&&(t.rowSpan=this.__rowSpan),t.style.width=`${this.getWidth()||Math.max(90,n/r)}px`,t.style.verticalAlign="top",t.style.textAlign="start";const o=this.getBackgroundColor();null!==o?t.style.backgroundColor=o:this.hasHeader()&&(t.style.backgroundColor="#f2f3f5")}return{element:e}}exportJSON(){return{...super.exportJSON(),backgroundColor:this.getBackgroundColor(),colSpan:this.__colSpan,headerState:this.__headerState,rowSpan:this.__rowSpan,type:"tablecell",width:this.getWidth()}}getColSpan(){return this.__colSpan}setColSpan(t){return this.getWritable().__colSpan=t,this}getRowSpan(){return this.__rowSpan}setRowSpan(t){return this.getWritable().__rowSpan=t,this}getTag(){return this.hasHeader()?"th":"td"}setHeaderStyles(t){return this.getWritable().__headerState=t,this.__headerState}getHeaderStyles(){return this.getLatest().__headerState}setWidth(t){return this.getWritable().__width=t,this.__width}getWidth(){return this.getLatest().__width}getBackgroundColor(){return this.getLatest().__backgroundColor}setBackgroundColor(t){this.getWritable().__backgroundColor=t}toggleHeaderStyle(t){const e=this.getWritable();return(e.__headerState&t)===t?e.__headerState-=t:e.__headerState+=t,e}hasHeaderState(t){return(this.getHeaderStyles()&t)===t}hasHeader(){return this.getLatest().__headerState!==hr}updateDOM(t){return t.__headerState!==this.__headerState||t.__width!==this.__width||t.__colSpan!==this.__colSpan||t.__rowSpan!==this.__rowSpan||t.__backgroundColor!==this.__backgroundColor}isShadowRoot(){return!0}collapseAtStart(){return!0}canBeEmpty(){return!1}canIndent(){return!1}}function _r(t){const e=t,n=t.nodeName.toLowerCase();let r;fr.test(e.style.width)&&(r=parseFloat(e.style.width));const o=mr("th"===n?gr:hr,e.colSpan,r);o.__rowSpan=e.rowSpan;const i=e.style.backgroundColor;""!==i&&(o.__backgroundColor=i);const s=e.style,l=s.textDecoration.split(" "),a="700"===s.fontWeight||"bold"===s.fontWeight,c=l.includes("line-through"),u="italic"===s.fontStyle,d=l.includes("underline");return{after:t=>(0===t.length&&t.push((0,f.BE)()),t),forChild:(t,e)=>{if(yr(e)&&!(0,f.F7)(t)){const e=(0,f.BE)();return(0,f.A3)(t)&&"\n"===t.getTextContent()?null:((0,f.Gg)(t)&&(a&&t.toggleFormat("bold"),c&&t.toggleFormat("strikethrough"),u&&t.toggleFormat("italic"),d&&t.toggleFormat("underline")),e.append(t),e)}return t},node:o}}function mr(t,e=1,n){return(0,f.U2)(new pr(t,e,n))}function yr(t){return t instanceof pr}(0,f.fA)("INSERT_TABLE_COMMAND");class xr extends f.HX{static getType(){return"tablerow"}static clone(t){return new xr(t.__height,t.__key)}static importDOM(){return{tr:t=>({conversion:vr,priority:0})}}static importJSON(t){return br(t.height)}constructor(t,e){super(e),this.__height=t}exportJSON(){return{...super.exportJSON(),...this.getHeight()&&{height:this.getHeight()},type:"tablerow",version:1}}createDOM(t){const e=document.createElement("tr");return this.__height&&(e.style.height=`${this.__height}px`),x(e,t.theme.tableRow),e}isShadowRoot(){return!0}setHeight(t){return this.getWritable().__height=t,this.__height}getHeight(){return this.getLatest().__height}updateDOM(t){return t.__height!==this.__height}canBeEmpty(){return!1}canIndent(){return!1}}function vr(t){const e=t;let n;return fr.test(e.style.height)&&(n=parseFloat(e.style.height)),{node:br(n)}}function br(t){return(0,f.U2)(new xr(t))}function Cr(t){return t instanceof xr}var Sr=function(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}((function(t){const e=new URLSearchParams;e.append("code",t);for(let n=1;n<arguments.length;n++)e.append("v",arguments[n]);throw Error(`Minified Lexical error #${t}; visit https://lexical.dev/docs/error?${e} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}));"undefined"!=typeof window&&void 0!==window.document&&window.document.createElement;function wr(t,e,n){const[r,o,i]=function(t,e,n){const r=[];let o=null,i=null;function s(t,s,l){const a={cell:l,startColumn:s,startRow:t},c=l.__rowSpan,u=l.__colSpan;for(let e=0;e<c;e++){void 0===r[t+e]&&(r[t+e]=[]);for(let n=0;n<u;n++)r[t+e][s+n]=a}null!==e&&e.is(l)&&(o=a),null!==n&&n.is(l)&&(i=a)}function l(t,e){return void 0===r[t]||void 0===r[t][e]}const a=t.getChildren();for(let c=0;c<a.length;c++){const t=a[c];Cr(t)||Sr(146);const e=t.getChildren();let n=0;for(const r of e){for(yr(r)||Sr(147);!l(c,n);)n++;s(c,n,r),n+=r.__colSpan}}return[r,o,i]}(t,e,n);return null===o&&Sr(110),null===i&&Sr(111),[r,o,i]}function kr(t){let e;if(t instanceof pr)e=t;else if("__type"in t){const n=S(t,yr);yr(n)||Sr(148),e=n}else{const n=S(t.getNode(),yr);yr(n)||Sr(148),e=n}const n=e.getParent();Cr(n)||Sr(149);const r=n.getParent();return Dr(r)||Sr(150),[e,n,r]}function Tr(t){const[e,,n]=kr(t),r=n.getChildren(),o=r.length,i=r[0].getChildren().length,s=new Array(o);for(let l=0;l<o;l++)s[l]=new Array(i);for(let l=0;l<o;l++){const t=r[l].getChildren();let n=0;for(let r=0;r<t.length;r++){for(;s[l][n];)n++;const o=t[r],i=o.__rowSpan||1,a=o.__colSpan||1;for(let t=0;t<i;t++)for(let e=0;e<a;e++)s[l+t][n+e]=o;if(e===o)return{colSpan:a,columnIndex:n,rowIndex:l,rowSpan:i};n+=a}}return null}class Nr{constructor(t,e,n){this.anchor=e,this.focus=n,e._selection=this,n._selection=this,this._cachedNodes=null,this.dirty=!1,this.tableKey=t}getStartEndPoints(){return[this.anchor,this.focus]}isBackward(){return this.focus.isBefore(this.anchor)}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){return!!Er(t)&&this.tableKey===t.tableKey&&this.anchor.is(t.anchor)&&this.focus.is(t.focus)}set(t,e,n){this.dirty=!0,this.tableKey=t,this.anchor.key=e,this.focus.key=n,this._cachedNodes=null}clone(){return new Nr(this.tableKey,this.anchor,this.focus)}isCollapsed(){return!1}extract(){return this.getNodes()}insertRawText(t){}insertText(){}insertNodes(t){const e=this.focus.getNode();(0,f.F7)(e)||Sr(151),(0,f.S9)(e.select(0,e.getChildrenSize())).insertNodes(t)}getShape(){const t=(0,f.gI)(this.anchor.key);yr(t)||Sr(152);const e=Tr(t);null===e&&Sr(153);const n=(0,f.gI)(this.focus.key);yr(n)||Sr(154);const r=Tr(n);null===r&&Sr(155);const o=Math.min(e.columnIndex,r.columnIndex),i=Math.max(e.columnIndex,r.columnIndex),s=Math.min(e.rowIndex,r.rowIndex),l=Math.max(e.rowIndex,r.rowIndex);return{fromX:Math.min(o,i),fromY:Math.min(s,l),toX:Math.max(o,i),toY:Math.max(s,l)}}getNodes(){const t=this._cachedNodes;if(null!==t)return t;const e=this.anchor.getNode(),n=this.focus.getNode(),r=S(e,yr),o=S(n,yr);yr(r)||Sr(152),yr(o)||Sr(154);const i=r.getParent();Cr(i)||Sr(156);const s=i.getParent();Dr(s)||Sr(157);const l=o.getParents()[1];if(l!==s){if(s.isParentOf(o)){const t=l.getParent();null==t&&Sr(159),this.set(this.tableKey,o.getKey(),t.getKey())}else{const t=s.getParent();null==t&&Sr(158),this.set(this.tableKey,t.getKey(),o.getKey())}return this.getNodes()}const[a,c,u]=wr(s,r,o);let d=Math.min(c.startColumn,u.startColumn),h=Math.min(c.startRow,u.startRow),g=Math.max(c.startColumn+c.cell.__colSpan-1,u.startColumn+u.cell.__colSpan-1),p=Math.max(c.startRow+c.cell.__rowSpan-1,u.startRow+u.cell.__rowSpan-1),_=d,m=h,y=d,x=h;function v(t){const{cell:e,startColumn:n,startRow:r}=t;d=Math.min(d,n),h=Math.min(h,r),g=Math.max(g,n+e.__colSpan-1),p=Math.max(p,r+e.__rowSpan-1)}for(;d<_||h<m||g>y||p>x;){if(d<_){const t=x-m,e=_-1;for(let n=0;n<=t;n++)v(a[m+n][e]);_=e}if(h<m){const t=y-_,e=m-1;for(let n=0;n<=t;n++)v(a[e][_+n]);m=e}if(g>y){const t=x-m,e=y+1;for(let n=0;n<=t;n++)v(a[m+n][e]);y=e}if(p>x){const t=y-_,e=x+1;for(let n=0;n<=t;n++)v(a[e][_+n]);x=e}}const b=[s];let C=null;for(let f=h;f<=p;f++)for(let t=d;t<=g;t++){const{cell:e}=a[f][t],n=e.getParent();Cr(n)||Sr(160),n!==C&&b.push(n),b.push(e,...Or(e)),C=n}return(0,f._$)()||(this._cachedNodes=b),b}getTextContent(){const t=this.getNodes();let e="";for(let n=0;n<t.length;n++)e+=t[n].getTextContent();return e}}function Er(t){return t instanceof Nr}function Or(t){const e=[],n=[t];for(;n.length>0;){const r=n.pop();void 0===r&&Sr(112),(0,f.F7)(r)&&n.unshift(...r.getChildren()),r!==t&&e.push(r)}return e}class Pr extends f.HX{static getType(){return"table"}static clone(t){return new Pr(t.__key)}static importDOM(){return{table:t=>({conversion:Lr,priority:1})}}static importJSON(t){return Ar()}constructor(t){super(t)}exportJSON(){return{...super.exportJSON(),type:"table",version:1}}createDOM(t,e){const n=document.createElement("table");return x(n,t.theme.table),n}updateDOM(){return!1}exportDOM(t){return{...super.exportDOM(t),after:t=>{if(t){const e=t.cloneNode(),n=document.createElement("colgroup"),r=document.createElement("tbody");(0,f.Re)(t)&&r.append(...t.children);const o=this.getFirstChildOrThrow();if(!Cr(o))throw new Error("Expected to find row node.");const i=o.getChildrenSize();for(let t=0;t<i;t++){const t=document.createElement("col");n.append(t)}return e.replaceChildren(n,r),e}}}}canBeEmpty(){return!1}isShadowRoot(){return!0}getCordsFromCellNode(t,e){const{rows:n,domRows:r}=e;for(let o=0;o<n;o++){const e=r[o];if(null==e)continue;const n=e.findIndex((e=>{if(!e)return;const{elem:n}=e;return(0,f.Xo)(n)===t}));if(-1!==n)return{x:n,y:o}}throw new Error("Cell not found in table.")}getDOMCellFromCords(t,e,n){const{domRows:r}=n,o=r[e];if(null==o)return null;const i=o[t];return null==i?null:i}getDOMCellFromCordsOrThrow(t,e,n){const r=this.getDOMCellFromCords(t,e,n);if(!r)throw new Error("Cell not found at cords.");return r}getCellNodeFromCords(t,e,n){const r=this.getDOMCellFromCords(t,e,n);if(null==r)return null;const o=(0,f.Xo)(r.elem);return yr(o)?o:null}getCellNodeFromCordsOrThrow(t,e,n){const r=this.getCellNodeFromCords(t,e,n);if(!r)throw new Error("Node at cords not TableCellNode.");return r}canSelectBefore(){return!0}canIndent(){return!1}}function Lr(t){return{node:Ar()}}function Ar(){return(0,f.U2)(new Pr)}function Dr(t){return t instanceof Pr}var Mr=n(94631),Fr=n(34386),Rr=n(25464),Br=n(18972),Ir=n(591),jr=n(47120);const zr={h1:"format_heading_1",h2:"format_heading_2",h3:"format_heading_3",bullet:"format_list_bulleted",number:"format_list_numbered",quote:"format_quote",paragraph:"format_paragraph"},$r=["bold","underline","italic","strikethrough","subscript","superscript"],Wr=["left","right","center","justify"];function Zr({className:t="",editor:e,blockType:n,disabled:i=!1}){const[l,a]=o.useState(null),c=t=>r=>{switch(t){case"bullet":"bullet"!==n?e.dispatchCommand(at,void 0):e.dispatchCommand(ut,void 0);break;case"number":"number"!==n?e.dispatchCommand(ct,void 0):e.dispatchCommand(ut,void 0);break;case"paragraph":e.update((()=>{const t=(0,f.dL)();((0,f.OP)(t)||Er(t))&&(0,dt.Hz)(t,(()=>(0,f.BE)()))}));break;case"quote":"quote"!==n&&e.update((()=>{const t=(0,f.dL)();((0,f.OP)(t)||Er(t))&&(0,dt.Hz)(t,(()=>Bt()))}));break;default:n!==(o=t)&&e.update((()=>{const t=(0,f.dL)();((0,f.OP)(t)||Er(t))&&(0,dt.Hz)(t,(()=>Wt(o)))}))}var o;a(null)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Ge.Z,Object.assign({className:t,disabled:i,onClick:t=>{a(t.currentTarget)}},{children:(0,r.jsx)(Fr.Z,Object.assign({title:(0,r.jsx)(s.Z,{id:"ui.editor.toolbarPlugin.blockType",defaultMessage:"ui.editor.toolbarPlugin.blockType"})},{children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Xe.Z,{children:zr[n]}),(0,r.jsx)(Xe.Z,{children:l?"expand_less":"expand_more"})]})}))})),(0,r.jsx)(Rr.Z,Object.assign({anchorEl:l,open:Boolean(l),onClose:()=>{a(null)}},{children:Object.keys(zr).map((t=>(0,r.jsx)(Br.Z,Object.assign({onClick:c(t)},{children:(0,r.jsx)(Xe.Z,{children:zr[t]})}),t)))}))]})}const Kr={root:`${sn}-toolbar-plugin-root`,blockFormat:`${sn}-block-format`},Ur=(0,i.ZP)(l.Z,{name:sn,slot:"ToolbarPluginRoot"})((()=>({})));function Vr(t){const e=(0,d.Z)({props:t,name:sn}),{uploadImage:n=!1}=e,[i]=qt(),[l,a]=(0,o.useState)(i),[c,u]=(0,o.useState)("paragraph"),[h,g]=(0,o.useState)("root"),[p,_]=(0,o.useState)(null),[m,x]=(0,o.useState)(!1),[v,w]=(0,o.useState)((()=>i.isEditable())),[k,T]=(0,o.useState)([]),[N,E]=(0,o.useState)(Wr[0]),O=(0,o.useCallback)((()=>{const t=(0,f.dL)();if((0,f.OP)(t)){const e=t.anchor.getNode();let n="root"===e.getKey()?e:S(e,(t=>{const e=t.getParent();return null!==e&&(0,f._v)(e)}));null===n&&(n=e.getTopLevelElementOrThrow());const r=n.getKey(),o=l.getElementByKey(r);T($r.filter((e=>t.hasFormat(e)))),E(Wr.find((t=>n.getFormatType()===t))||Wr[0]);const i=(0,Mr.P)(t);P(i.getParent())||P(i)?x(!0):x(!1);if(Dr(S(i,Dr))?g("table"):g("root"),null!==o)if(_(r),lt(n)){const t=b(e,et),r=t?t.getListType():n.getListType();u(r)}else{const t=Zt(n)?n.getTag():n.getType();t in zr&&u(t)}}}),[l]);(0,o.useEffect)((()=>i.registerCommand(f.oj,((t,e)=>(O(),a(e),!1)),f.jw)),[i,O]),(0,o.useEffect)((()=>y(i.registerEditableListener((t=>{w(t)})),l.registerUpdateListener((({editorState:t})=>{t.read((()=>{O()}))})))),[O,l,i]);const L=(0,o.useCallback)((()=>{l.update((()=>{const t=(0,f.dL)();if((0,f.OP)(t)){const e=t.anchor,n=t.focus,r=t.getNodes();if(e.key===n.key&&e.offset===n.offset)return;r.forEach(((t,o)=>{(0,f.Gg)(t)?(0===o&&0!==e.offset&&(t=t.splitText(e.offset)[1]||t),o===r.length-1&&(t=t.splitText(n.offset)[0]||t),""!==t.__style&&t.setStyle(""),0!==t.__format&&(t.setFormat(0),C(t).setFormat(""))):Zt(t)||function(t){return t instanceof Rt}(t)?t.replace((0,f.BE)(),!0):function(t){return t instanceof dr}(t)&&t.setFormat("")}))}}))}),[l]),A=(0,o.useCallback)((()=>{m?i.dispatchCommand(M,null):i.dispatchCommand(M,"https://")}),[i,m]);return(0,r.jsxs)(Ur,Object.assign({className:Kr.root},{children:[c in zr&&l===i&&(0,r.jsx)(Zr,{className:Kr.blockFormat,disabled:!v,blockType:c,editor:i}),(0,r.jsx)(Ge.Z,Object.assign({disabled:!v,onClick:()=>{l.dispatchCommand(f.RO,Wr[(Wr.findIndex((t=>N===t))+1)%Wr.length])}},{children:(0,r.jsx)(Fr.Z,Object.assign({title:(0,r.jsx)(s.Z,{id:`ui.editor.toolbarPlugin.${N}`,defaultMessage:`ui.editor.toolbarPlugin.${N}`})},{children:(0,r.jsx)(Xe.Z,{children:`format_align_${N}`})}))})),(0,r.jsx)(Ir.Z,Object.assign({value:k},{children:$r.map((t=>(0,r.jsx)(jr.Z,Object.assign({value:t,disabled:!v,onClick:()=>{l.dispatchCommand(f.Ew,t)}},{children:(0,r.jsx)(Fr.Z,Object.assign({title:(0,r.jsx)(s.Z,{id:`ui.editor.toolbarPlugin.${t}`,defaultMessage:`ui.editor.toolbarPlugin.${t}`})},{children:(0,r.jsx)(Xe.Z,{children:`format_${t}`})}))}),t)))})),(0,r.jsx)(Ge.Z,Object.assign({disabled:!v,onClick:L},{children:(0,r.jsx)(Fr.Z,Object.assign({title:(0,r.jsx)(s.Z,{id:"ui.editor.toolbarPlugin.clear",defaultMessage:"ui.editor.toolbarPlugin.clear"})},{children:(0,r.jsx)(Xe.Z,{children:"format_clear"})}))})),(0,r.jsx)(Ge.Z,Object.assign({disabled:!v,onClick:()=>{l.dispatchCommand(ae,void 0)}},{children:(0,r.jsx)(Fr.Z,Object.assign({title:(0,r.jsx)(s.Z,{id:"ui.editor.toolbarPlugin.horizontalRule",defaultMessage:"ui.editor.toolbarPlugin.horizontalRule"})},{children:(0,r.jsx)(Xe.Z,{children:"format_horizontal_rule"})}))})),n&&(0,r.jsx)(dn,{}),(0,r.jsx)(Ge.Z,Object.assign({disabled:!v,onClick:A},{children:(0,r.jsx)(Fr.Z,Object.assign({title:(0,r.jsx)(s.Z,{id:"ui.editor.toolbarPlugin.link",defaultMessage:"ui.editor.toolbarPlugin.link"})},{children:(0,r.jsx)(Xe.Z,{children:"format_link"})}))})),(0,r.jsx)(xn,{})]}))}function Jr(){const[t]=qt();return(0,Jt.useEffect)((()=>{if(!t.hasNodes([et,G]))throw new Error("ListPlugin: ListNode and/or ListItemNode not registered on editor")}),[t]),function(t){(0,Jt.useEffect)((()=>y(t.registerCommand(ct,(()=>(W(t,"number"),!0)),f.KB),t.registerCommand(at,(()=>(W(t,"bullet"),!0)),f.KB),t.registerCommand(ut,(()=>(function(t){t.update((()=>{const t=(0,f.dL)();if((0,f.OP)(t)){const e=new Set,n=t.getNodes(),r=t.anchor.getNode();if($(r,n))e.add(B(r));else for(let t=0;t<n.length;t++){const r=n[t];if((0,f.H2)(r)){const t=b(r,G);null!=t&&e.add(B(t))}}for(const o of e){let e=o;const n=I(o);for(const r of n){const n=(0,f.BE)();Z(n,r.getChildren()),e.insertAfter(n),e=n,r.__key===t.anchor.key&&t.anchor.set(n.getKey(),0,"element"),r.__key===t.focus.key&&t.focus.set(n.getKey(),0,"element"),r.remove()}o.remove()}}}))}(t),!0)),f.KB),t.registerCommand(f.K0,(()=>!!function(){const t=(0,f.dL)();if(!(0,f.OP)(t)||!t.isCollapsed())return!1;const e=t.anchor.getNode();if(!tt(e)||0!==e.getChildrenSize())return!1;const n=B(e),r=e.getParent();lt(r)||R(40);const o=r.getParent();let i;if((0,f._v)(o))i=(0,f.BE)(),n.insertAfter(i);else{if(!tt(o))return!1;i=Q(),o.insertAfter(i)}i.select();const s=e.getNextSiblings();if(s.length>0){const t=st(r.getListType());if((0,f.Rl)(i))i.insertAfter(t);else{const e=Q();e.append(t),i.insertAfter(e)}s.forEach((e=>{e.remove(),t.append(e)}))}return function(t){let e=t;for(;null==e.getNextSibling()&&null==e.getPreviousSibling();){const t=e.getParent();if(null==t||!tt(e)&&!lt(e))break;e=t}e.remove()}(e),!0}()),f.KB))),[t])}(t),null}var Hr=n(79991),Gr=n(11535),qr=n(90629),Xr=n(77931),Yr=n(87109);const Qr={root:`${sn}-floating-link-plugin-root`},to=(0,i.ZP)(Gr.Z,{name:sn,slot:"FloatingLinkPluginRoot"})((()=>({})));function eo({editor:t,isLink:e,setIsLink:n}){const[i,s]=(0,o.useState)(null),[l,a]=(0,o.useState)(""),[c,u]=(0,o.useState)(null),[d,h]=(0,o.useState)(null),g=(0,o.useCallback)((()=>{var e;const n=(0,f.dL)();if((0,f.OP)(n)){const t=(0,Mr.P)(n),e=t.getParent();P(e)?a(e.getURL()):P(t)?a(t.getURL()):a("")}const r=window.getSelection(),o=document.activeElement,i=t.getRootElement();return null!==n&&null!==r&&null!==i&&i.contains(r.anchorNode)&&t.isEditable()?(s(null===(e=r.focusNode)||void 0===e?void 0:e.parentElement),h(n)):o||(s(null),h(null),a("")),!0}),[t]);(0,o.useEffect)((()=>{l!=c&&u(null)}),[l]),(0,o.useEffect)((()=>y(t.registerUpdateListener((({editorState:t})=>{t.read((()=>{g()}))})),t.registerCommand(f.oj,(()=>(g(),!0)),f.KB),t.registerCommand(f.Zq,(()=>!!e&&(n(!1),!0)),f.Eo))),[t,g,n,e]),(0,o.useEffect)((()=>{t.getEditorState().read((()=>{g()}))}),[t,g]);return e&&l!==c?(0,r.jsx)(to,Object.assign({className:Qr.root,open:Boolean(i),anchorEl:i,placement:"right"},{children:(0,r.jsx)(qr.Z,{children:(0,r.jsx)(Xr.Z,{size:"small",value:l,variant:"outlined",onChange:t=>{a(t.target.value)},InputProps:{endAdornment:(0,r.jsxs)(Yr.Z,Object.assign({position:"end"},{children:[(0,r.jsx)(Ge.Z,Object.assign({size:"small",tabIndex:0,onClick:()=>{n(!1)}},{children:(0,r.jsx)(Xe.Z,{children:"close"})})),(0,r.jsx)(Ge.Z,Object.assign({size:"small",tabIndex:1,onClick:()=>{null!==d&&""!==l&&(u(l),t.dispatchCommand(M,(0,Hr.jv)(l)?l:"https://"))}},{children:(0,r.jsx)(Xe.Z,{children:"check"})}))]}))}})})})):null}const no=()=>{const[t]=qt();return function(t){const[e,n]=(0,o.useState)(t),[i,s]=(0,o.useState)(!1),l=(0,o.useCallback)((()=>{const t=(0,f.dL)();if((0,f.OP)(t)){const e=(0,Mr.P)(t),n=S(e,P),r=S(e,D);s(null!=n&&null==r)}}),[]);return(0,o.useEffect)((()=>y(t.registerUpdateListener((({editorState:t})=>{t.read((()=>{l()}))})),t.registerCommand(f.oj,((t,e)=>(l(),n(e),!1)),f.jw))),[t,l]),(0,r.jsx)(eo,{editor:e,isLink:i,setIsLink:s})}(t)},ro=({onBlur:t})=>{const[e]=qt();return(0,o.useEffect)((()=>e.registerCommand(f.Gq,(e=>(t&&t(e),!0)),f.VN)),[]),null},oo=({onFocus:t})=>{const[e]=qt();return(0,o.useEffect)((()=>e.registerCommand(f.m$,(e=>(t&&t(e),!0)),f.VN)),[]),null},io={root:`${sn}-root`,focused:`${sn}-focused`,toolbar:`${sn}-toolbar`,content:`${sn}-content`,placeholder:`${sn}-placeholder`,actions:`${sn}-actions`},so=(0,i.ZP)(l.Z,{name:sn,slot:"Root",overridesResolver:(t,e)=>[e.root,t.className.includes(io.toolbar)&&e.toolbar]})((({theme:t})=>({}))),lo={heading:{h1:`${sn}-h1`,h2:`${sn}-h2`,h3:`${sn}-h3`,h4:`${sn}-h4`,h5:`${sn}-h5`,h6:`${sn}-h6`},link:`${sn}-link`,list:{listitem:`${sn}-listItem`,nested:{listitem:`${sn}-nestedListItem`},olDepth:[`${sn}-ol1`,`${sn}-ol2`,`${sn}-ol3`,`${sn}-ol4`,`${sn}-ol5`],ul:`${sn}-ul`},ltr:`${sn}-ltr`,paragraph:`${sn}-paragraph`,image:`${sn}-image`,quote:`${sn}-quote`,rtl:`${sn}-rtl`,text:{bold:`${sn}-textBold`,italic:`${sn}-textItalic`,strikethrough:`${sn}-textStrikethrough`,subscript:`${sn}-textSubscript`,superscript:`${sn}-textSuperscript`,underline:`${sn}-textUnderline`,underlineStrikethrough:`${sn}-textUnderlineStrikethrough`}},ao=(0,o.forwardRef)(((t,e)=>{const n=(0,d.Z)({props:t,name:sn}),{id:i="editor",className:c=null,defaultValue:f="",toolbar:h=!1,uploadImage:g=!1,editable:p=!0,onChange:_=null,onFocus:m=null,onBlur:y=null}=n,x=(0,o.useRef)(),[v,b]=(0,o.useState)(!1),C=(t,e)=>{console.log(t)},S=(0,o.useCallback)((t=>{b(!0),m&&m(t)}),[m]),w=(0,o.useCallback)((t=>{b(!1),y&&y(t)}),[y]);(0,o.useImperativeHandle)(e,(()=>({focus:()=>{x.current.focus()}})));const k=(0,o.useMemo)((()=>({namespace:"LexicalEditor",editable:p,onError:C,nodes:[...he],theme:lo})),[p]);return(0,r.jsx)(so,Object.assign({id:i,className:u()(io.root,c,{[io.toolbar]:h,[io.focused]:v})},{children:(0,r.jsxs)(me,Object.assign({initialConfig:k},{children:[h?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Vr,{uploadImage:g}),(0,r.jsx)(Jr,{}),(0,r.jsx)(Je,{})]}):(0,r.jsxs)(a.Z,Object.assign({className:io.actions,direction:"row"},{children:[g&&(0,r.jsx)(dn,{}),(0,r.jsx)(xn,{})]})),(0,r.jsx)($e,{contentEditable:(0,r.jsx)(ve,{className:io.content}),placeholder:(0,r.jsx)(l.Z,Object.assign({className:io.placeholder,onClick:()=>{x.current.focus()}},{children:(0,r.jsx)(s.Z,{id:"ui.editor.placeholder",defaultMessage:"ui.editor.placeholder"})})),ErrorBoundary:Ve}),(0,r.jsx)(vn,{defaultValue:f}),(0,r.jsx)(Le,{}),(0,r.jsx)(Sn,{onChange:t=>{_&&_(t)}}),(0,r.jsx)(ro,{onBlur:w}),(0,r.jsx)(oo,{onFocus:S}),(0,r.jsx)($n,{}),(0,r.jsx)(ar,{}),(0,r.jsx)(cr,{}),(0,r.jsx)(no,{}),(0,r.jsx)(ur,{ref:x})]}))}))}))},63862:(t,e,n)=>{"use strict";n.d(e,{Z:()=>y});var r=n(97582),o=n(41567),i=n(24243),s=n(24085),l=n(62254),a=n(51206),c=n(26580),u=n(8322),d=n.n(u);var f=n(67294),h=n(86896),g=n(21459);const p=t=>new Promise(((e,n)=>{const r=new FileReader;r.onload=t=>{let n=new Image;n.onload=function(t){let r=document.createElement("canvas"),o=1920,i=n.width,s=n.height;i>s?i>o&&(s*=o/i,i=o):s>o&&(i*=o/s,s=o),r.width=i,r.height=s,r.getContext("2d").drawImage(n,0,0,i,s),e((t=>{let e;e=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):unescape(t.split(",")[1]);let n=t.split(",")[0].split(":")[1].split(";")[0],r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return new Blob([r],{type:n})})(r.toDataURL("image/jpeg")))},n.src=t.target.result},r.onerror=n,r.readAsDataURL(t)}));var _=n(99960),m=n(75459);const y=t=>{const{type:e=null,onSuccess:n=null,onProgress:u=null,onError:y=null}=t,x=(0,f.useRef)(!0),v=f.useRef({chunks:{},setChunk:null,setChunks:null}),[b,C]=(0,f.useState)({});v.current={chunks:b,setChunk:t=>{const e=Object.assign(Object.assign({},v.current.chunks),{[t.id]:Object.assign(Object.assign({},v.current.chunks[t.id]),t)});C(e),v.current.chunks=e},setChunks:t=>{C(t),v.current.chunks=t}};const S=(0,l.RM)(),{refreshSession:w}=(0,a.LD)(),k=(0,h.Z)();return(0,f.useEffect)((()=>{x.current?x.current=!1:u&&u(b)}),[b]),(0,c.J0)((t=>{if(t.file.type.startsWith("image/")){const e=new FileReader;e.onload=e=>{v.current.setChunk({id:t.id,image:e.target.result})},e.readAsDataURL(t.file)}v.current.setChunk({id:t.id,upload_id:null,completed:0,name:t.file.name})})),(0,c.UT)((t=>{v.current.setChunk({id:t.id,completed:t.completed})})),(0,o.h_)((t=>{((t,e,n)=>{e=e||2097152;let r=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,o=Math.ceil(t.size/e),i=0,s=new(d().ArrayBuffer),l=new FileReader;function a(){let n=i*e,o=n+e>=t.size?t.size:n+e;l.readAsArrayBuffer(r.call(t,n,o))}l.onload=function(t){s.append(t.target.result),i++,i<o?a():n(s.end())},l.onerror=function(){console.warn("oops, something went wrong.")},a()})(t.file,2142880,(e=>{const r=new FormData;r.append("upload_id",v.current.chunks[t.id].upload_id),r.append("type",v.current.chunks[t.id].type),r.append("md5",e),i.Z.request({url:s.Z.ComposerChunkUploadMediaComplete.url(),method:s.Z.ComposerChunkUploadMediaComplete.method,data:r,headers:{"Content-Type":"multipart/form-data"}}).then((e=>{setTimeout((()=>{const r=Object.assign({},v.current.chunks);delete r[t.id],v.current.setChunks(r),n(e.data)}),0)})).catch((e=>{console.log(e),y(Object.assign({},v.current.chunks[t.id]),k.formatMessage(g.Z.fileUploadErrorGeneric));const n=Object.assign({},v.current.chunks);delete n[t.id],v.current.setChunks(n)}))}))})),(0,o.A9)((t=>{y(Object.assign({},v.current.chunks[t.id]),k.formatMessage(g.Z.fileUploadErrorGeneric));const e=Object.assign({},v.current.chunks);delete e[t.id],v.current.setChunks(e)})),(0,o.cM)((t=>{const n={url:`${S.settings.portal}${s.Z.ComposerChunkUploadMedia.url()}`,sendOptions:{paramName:"image",method:s.Z.ComposerChunkUploadMedia.method,formatServerResponse:(t,e,n)=>(0,r.mG)(void 0,void 0,void 0,(function*(){return 401===e&&(yield w()),Promise.resolve(JSON.parse(t))}))}};return v.current.chunks[t.item.id].upload_id?n.sendOptions.params={upload_id:v.current.chunks[t.item.id].upload_id}:v.current.setChunk({id:t.item.id,type:e||t.sendOptions.paramName}),n})),(0,o.Rx)((t=>(0,r.mG)(void 0,void 0,void 0,(function*(){const e=yield t.uploadData.response.data;v.current.setChunk({id:t.item.id,upload_id:e.upload_id})})))),(0,o.fc)((({items:t,options:e})=>(0,r.mG)(void 0,void 0,void 0,(function*(){const n=["JWT","OAuth"].includes(S.settings.session.type)?{headers:{Authorization:`Bearer ${S.settings.session.authToken.accessToken}`}}:{};return 0==t.length?Promise.resolve({options:e,destination:n}):new Promise((o=>{Promise.all(t.map((t=>(0,r.mG)(void 0,void 0,void 0,(function*(){return Object.assign(Object.assign({},t),{file:t.file.type.startsWith("image/")&&"image/gif"!==t.file.type?yield p(t.file):t.file})}))))).then((t=>{o({items:t,options:{inputFieldName:e.inputFieldName,destination:n}})})).catch((t=>{_.Y.error(t,m.J),o({options:{inputFieldName:e.inputFieldName,destination:n}})}))}))})))),null}},94631:(t,e,n)=>{"use strict";n.d(e,{E:()=>i,P:()=>o});var r=n(10261);function o(t){const e=t.anchor,n=t.focus,o=t.anchor.getNode(),i=t.focus.getNode();if(o===i)return o;return t.isBackward()?(0,r.P4)(n)?o:i:(0,r.P4)(e)?o:i}function i(t){return Array.from(t.matchAll(/<hashtag id="(?<id>[0-9]+)">#(?<name>[^<>]+)<\/hashtag>/g)).map((t=>t.groups.id))}},8322:t=>{t.exports=function(t){"use strict";var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(t,e){var n=t[0],r=t[1],o=t[2],i=t[3];r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+e[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&o)+e[1]-389564586|0)<<12|i>>>20)+n|0)&n|~i&r)+e[2]+606105819|0)<<17|o>>>15)+i|0)&i|~o&n)+e[3]-1044525330|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+e[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&o)+e[5]+1200080426|0)<<12|i>>>20)+n|0)&n|~i&r)+e[6]-1473231341|0)<<17|o>>>15)+i|0)&i|~o&n)+e[7]-45705983|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+e[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&o)+e[9]-1958414417|0)<<12|i>>>20)+n|0)&n|~i&r)+e[10]-42063|0)<<17|o>>>15)+i|0)&i|~o&n)+e[11]-1990404162|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+e[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&o)+e[13]-40341101|0)<<12|i>>>20)+n|0)&n|~i&r)+e[14]-1502002290|0)<<17|o>>>15)+i|0)&i|~o&n)+e[15]+1236535329|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+e[1]-165796510|0)<<5|n>>>27)+r|0)&o|r&~o)+e[6]-1069501632|0)<<9|i>>>23)+n|0)&r|n&~r)+e[11]+643717713|0)<<14|o>>>18)+i|0)&n|i&~n)+e[0]-373897302|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+e[5]-701558691|0)<<5|n>>>27)+r|0)&o|r&~o)+e[10]+38016083|0)<<9|i>>>23)+n|0)&r|n&~r)+e[15]-660478335|0)<<14|o>>>18)+i|0)&n|i&~n)+e[4]-405537848|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+e[9]+568446438|0)<<5|n>>>27)+r|0)&o|r&~o)+e[14]-1019803690|0)<<9|i>>>23)+n|0)&r|n&~r)+e[3]-187363961|0)<<14|o>>>18)+i|0)&n|i&~n)+e[8]+1163531501|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+e[13]-1444681467|0)<<5|n>>>27)+r|0)&o|r&~o)+e[2]-51403784|0)<<9|i>>>23)+n|0)&r|n&~r)+e[7]+1735328473|0)<<14|o>>>18)+i|0)&n|i&~n)+e[12]-1926607734|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+e[5]-378558|0)<<4|n>>>28)+r|0)^r^o)+e[8]-2022574463|0)<<11|i>>>21)+n|0)^n^r)+e[11]+1839030562|0)<<16|o>>>16)+i|0)^i^n)+e[14]-35309556|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+e[1]-1530992060|0)<<4|n>>>28)+r|0)^r^o)+e[4]+1272893353|0)<<11|i>>>21)+n|0)^n^r)+e[7]-155497632|0)<<16|o>>>16)+i|0)^i^n)+e[10]-1094730640|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+e[13]+681279174|0)<<4|n>>>28)+r|0)^r^o)+e[0]-358537222|0)<<11|i>>>21)+n|0)^n^r)+e[3]-722521979|0)<<16|o>>>16)+i|0)^i^n)+e[6]+76029189|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+e[9]-640364487|0)<<4|n>>>28)+r|0)^r^o)+e[12]-421815835|0)<<11|i>>>21)+n|0)^n^r)+e[15]+530742520|0)<<16|o>>>16)+i|0)^i^n)+e[2]-995338651|0)<<23|r>>>9)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+e[0]-198630844|0)<<6|n>>>26)+r|0)|~o))+e[7]+1126891415|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+e[14]-1416354905|0)<<15|o>>>17)+i|0)|~n))+e[5]-57434055|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+e[12]+1700485571|0)<<6|n>>>26)+r|0)|~o))+e[3]-1894986606|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+e[10]-1051523|0)<<15|o>>>17)+i|0)|~n))+e[1]-2054922799|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+e[8]+1873313359|0)<<6|n>>>26)+r|0)|~o))+e[15]-30611744|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+e[6]-1560198380|0)<<15|o>>>17)+i|0)|~n))+e[13]+1309151649|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+e[4]-145523070|0)<<6|n>>>26)+r|0)|~o))+e[11]-1120210379|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+e[2]+718787259|0)<<15|o>>>17)+i|0)|~n))+e[9]-343485551|0)<<21|r>>>11)+o|0,t[0]=n+t[0]|0,t[1]=r+t[1]|0,t[2]=o+t[2]|0,t[3]=i+t[3]|0}function r(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}function o(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24);return n}function i(t){var e,o,i,s,l,a,c=t.length,u=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=c;e+=64)n(u,r(t.substring(e-64,e)));for(o=(t=t.substring(e-64)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<o;e+=1)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(n(u,i),e=0;e<16;e+=1)i[e]=0;return s=(s=8*c).toString(16).match(/(.*?)(.{0,8})$/),l=parseInt(s[2],16),a=parseInt(s[1],16)||0,i[14]=l,i[15]=a,n(u,i),u}function s(t){var e,r,i,s,l,a,c=t.length,u=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=c;e+=64)n(u,o(t.subarray(e-64,e)));for(r=(t=e-64<c?t.subarray(e-64):new Uint8Array(0)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<r;e+=1)i[e>>2]|=t[e]<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(n(u,i),e=0;e<16;e+=1)i[e]=0;return s=(s=8*c).toString(16).match(/(.*?)(.{0,8})$/),l=parseInt(s[2],16),a=parseInt(s[1],16)||0,i[14]=l,i[15]=a,n(u,i),u}function l(t){var n,r="";for(n=0;n<4;n+=1)r+=e[t>>8*n+4&15]+e[t>>8*n&15];return r}function a(t){var e;for(e=0;e<t.length;e+=1)t[e]=l(t[e]);return t.join("")}function c(t){return/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t))),t}function u(t,e){var n,r=t.length,o=new ArrayBuffer(r),i=new Uint8Array(o);for(n=0;n<r;n+=1)i[n]=t.charCodeAt(n);return e?i:o}function d(t){return String.fromCharCode.apply(null,new Uint8Array(t))}function f(t,e,n){var r=new Uint8Array(t.byteLength+e.byteLength);return r.set(new Uint8Array(t)),r.set(new Uint8Array(e),t.byteLength),n?r:r.buffer}function h(t){var e,n=[],r=t.length;for(e=0;e<r-1;e+=2)n.push(parseInt(t.substr(e,2),16));return String.fromCharCode.apply(String,n)}function g(){this.reset()}return a(i("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function e(t,e){return(t=0|t||0)<0?Math.max(t+e,0):Math.min(t,e)}ArrayBuffer.prototype.slice=function(n,r){var o,i,s,l,a=this.byteLength,c=e(n,a),u=a;return r!==t&&(u=e(r,a)),c>u?new ArrayBuffer(0):(o=u-c,i=new ArrayBuffer(o),s=new Uint8Array(i),l=new Uint8Array(this,c,o),s.set(l),i)}}(),g.prototype.append=function(t){return this.appendBinary(c(t)),this},g.prototype.appendBinary=function(t){this._buff+=t,this._length+=t.length;var e,o=this._buff.length;for(e=64;e<=o;e+=64)n(this._hash,r(this._buff.substring(e-64,e)));return this._buff=this._buff.substring(e-64),this},g.prototype.end=function(t){var e,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<o;e+=1)i[e>>2]|=r.charCodeAt(e)<<(e%4<<3);return this._finish(i,o),n=a(this._hash),t&&(n=h(n)),this.reset(),n},g.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},g.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},g.prototype.setState=function(t){return this._buff=t.buff,this._length=t.length,this._hash=t.hash,this},g.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},g.prototype._finish=function(t,e){var r,o,i,s=e;if(t[s>>2]|=128<<(s%4<<3),s>55)for(n(this._hash,t),s=0;s<16;s+=1)t[s]=0;r=(r=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(r[2],16),i=parseInt(r[1],16)||0,t[14]=o,t[15]=i,n(this._hash,t)},g.hash=function(t,e){return g.hashBinary(c(t),e)},g.hashBinary=function(t,e){var n=a(i(t));return e?h(n):n},g.ArrayBuffer=function(){this.reset()},g.ArrayBuffer.prototype.append=function(t){var e,r=f(this._buff.buffer,t,!0),i=r.length;for(this._length+=t.byteLength,e=64;e<=i;e+=64)n(this._hash,o(r.subarray(e-64,e)));return this._buff=e-64<i?new Uint8Array(r.buffer.slice(e-64)):new Uint8Array(0),this},g.ArrayBuffer.prototype.end=function(t){var e,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<o;e+=1)i[e>>2]|=r[e]<<(e%4<<3);return this._finish(i,o),n=a(this._hash),t&&(n=h(n)),this.reset(),n},g.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},g.ArrayBuffer.prototype.getState=function(){var t=g.prototype.getState.call(this);return t.buff=d(t.buff),t},g.ArrayBuffer.prototype.setState=function(t){return t.buff=u(t.buff,!0),g.prototype.setState.call(this,t)},g.ArrayBuffer.prototype.destroy=g.prototype.destroy,g.ArrayBuffer.prototype._finish=g.prototype._finish,g.ArrayBuffer.hash=function(t,e){var n=a(s(new Uint8Array(t)));return e?h(n):n},g}()},10261:(t,e,n)=>{"use strict";n.d(e,{B3:()=>l,Hz:()=>d,P4:()=>c,bA:()=>a,i0:()=>h,pi:()=>f,vV:()=>u});var r=n(61084);var o=function(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}((function(t){const e=new URLSearchParams;e.append("code",t);for(let n=1;n<arguments.length;n++)e.append("v",arguments[n]);throw Error(`Minified Lexical error #${t}; visit https://lexical.dev/docs/error?${e} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}));const i=new Map;function s(t){const e={},n=t.split(";");for(const r of n)if(""!==r){const[t,n]=r.split(/:([^]+)/);t&&n&&(e[t.trim()]=n.trim())}return e}function l(t){const e=t.constructor.clone(t);return e.__parent=t.__parent,e.__next=t.__next,e.__prev=t.__prev,(0,r.F7)(t)&&(0,r.F7)(e)?(o=t,(n=e).__first=o.__first,n.__last=o.__last,n.__size=o.__size,n.__format=o.__format,n.__indent=o.__indent,n.__dir=o.__dir,n):(0,r.Gg)(t)&&(0,r.Gg)(e)?function(t,e){return t.__format=e.__format,t.__style=e.__style,t.__mode=e.__mode,t.__detail=e.__detail,t}(e,t):(0,r.Rl)(t)&&(0,r.Rl)(e)?function(t,e){return t.__textFormat=e.__textFormat,t}(e,t):e;var n,o}function a(t,e){const n=t.getStartEndPoints();if(e.isSelected(t)&&!e.isSegmented()&&!e.isToken()&&null!==n){const[o,i]=n,s=t.isBackward(),l=o.getNode(),a=i.getNode(),c=e.is(l),u=e.is(a);if(c||u){const[n,o]=(0,r.cs)(t),i=l.is(a),c=e.is(s?a:l),u=e.is(s?l:a);let d,f=0;return i?(f=n>o?o:n,d=n>o?n:o):c?(f=s?o:n,d=void 0):u&&(f=0,d=s?n:o),e.__text=e.__text.slice(f,d),e}}return e}function c(t){if("text"===t.type)return t.offset===t.getNode().getTextContentSize();const e=t.getNode();return(0,r.F7)(e)||o(177),t.offset===e.getChildrenSize()}function u(t){const e=t.getStyle(),n=s(e);i.set(e,n)}function d(t,e){if(null===t)return;const n=t.getStartEndPoints(),i=n?n[0]:null;if(null!==i&&"root"===i.key){const t=e(),n=(0,r.Gv)(),o=n.getFirstChild();return void(o?o.replace(t,!0):n.append(t))}const s=t.getNodes(),l=null!==i&&function(t,e){let n=t;for(;null!==n&&null!==n.getParent()&&!e(n);)n=n.getParentOrThrow();return e(n)?n:null}(i.getNode(),g);l&&-1===s.indexOf(l)&&s.push(l);for(let a=0;a<s.length;a++){const t=s[a];if(!g(t))continue;(0,r.F7)(t)||o(178);const n=e();n.setFormat(t.getFormatType()),n.setIndent(t.getIndent()),t.replace(n,!0)}}function f(t,e){const n=(0,r.fL)(t.focus,e);return(0,r.k$)(n)&&!n.isIsolated()||(0,r.F7)(n)&&!n.isInline()&&!n.canBeEmpty()}function h(t,e,n){const o=function(t){const e=t.anchor.getNode();return"rtl"===((0,r.wd)(e)?e:e.getParentOrThrow()).getDirection()}(t);!function(t,e,n,r){t.modify(e?"extend":"move",n,r)}(t,e,n?!o:o,"character")}function g(t){if((0,r.k$)(t))return!1;if(!(0,r.F7)(t)||(0,r._v)(t))return!1;const e=t.getFirstChild(),n=null===e||(0,r.A3)(e)||(0,r.Gg)(e)||e.isInline();return!t.isInline()&&!1!==t.canBeEmpty()&&n}},61084:(t,e,n)=>{"use strict";function r(t){return{}}n.d(e,{$l:()=>_,A1:()=>d,A3:()=>hr,BE:()=>Vo,BM:()=>W,DN:()=>no,Eo:()=>qo,Ew:()=>p,F7:()=>Ro,GA:()=>Yt,Gg:()=>Lr,Gq:()=>J,Gv:()=>_e,H2:()=>ie,HX:()=>Fo,Hr:()=>$,Ij:()=>Do,Jh:()=>Qo,K0:()=>c,KB:()=>Go,Kr:()=>s,LV:()=>j,MK:()=>O,MX:()=>Pr,Mt:()=>l,Nm:()=>x,Nr:()=>Z,OP:()=>zr,PU:()=>A,R2:()=>br,RG:()=>Zo,RJ:()=>f,RO:()=>F,Re:()=>tn,Rl:()=>Jo,S3:()=>Dr,S9:()=>Ht,T:()=>fr,U2:()=>Je,UL:()=>Me,VN:()=>Ho,WH:()=>a,XI:()=>R,XN:()=>k,Xo:()=>he,Zb:()=>w,Zq:()=>E,_$:()=>mo,_0:()=>S,_v:()=>Ve,aR:()=>N,af:()=>Qt,bg:()=>Qe,cA:()=>L,cj:()=>h,cs:()=>Kr,cz:()=>D,dB:()=>P,dL:()=>eo,dR:()=>z,ek:()=>qr,fA:()=>r,fL:()=>Ie,gI:()=>de,h5:()=>Qr,iO:()=>Wr,jw:()=>Xo,k$:()=>Mo,kE:()=>B,lv:()=>nn,m$:()=>V,n2:()=>g,oC:()=>wo,od:()=>lo,oj:()=>o,oq:()=>ye,r0:()=>K,u$:()=>b,vN:()=>Yr,wd:()=>jo,yF:()=>u,yn:()=>U,z9:()=>Ye,zD:()=>M,zq:()=>m,zr:()=>i});const o={},i={},s={},l={},a={},c={},u={},d={},f={},h={},g={},p={},_={},m={},y={},x={},v={},b={},C={},S={},w={},k={},T={},N={},E={},O={},P={},L={},A={},D={},M={},F={},R={},B={},I={},j={},z={},$={},W={},Z={},K={},U={},V={},J={},H={};var G=function(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}((function(t){const e=new URLSearchParams;e.append("code",t);for(let n=1;n<arguments.length;n++)e.append("v",arguments[n]);throw Error(`Minified Lexical error #${t}; visit https://lexical.dev/docs/error?${e} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}));const q="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,X=q&&"documentMode"in document?document.documentMode:null,Y=q&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),Q=q&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),tt=!(!q||!("InputEvent"in window)||X)&&"getTargetRanges"in new window.InputEvent("input"),et=q&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),nt=q&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,rt=q&&/Android/.test(navigator.userAgent),ot=q&&/^(?=.*Chrome).*/i.test(navigator.userAgent),it=q&&rt&&ot,st=q&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!ot,lt=1,at=3,ct=0,ut=1,dt=2,ft=4,ht=8,gt=3|ft|ht|240,pt=1,_t=2,mt=3,yt=4,xt=5,vt=6,bt=et||nt||st?"\xa0":"\u200b",Ct="\n\n",St=Q?"\xa0":bt,wt="\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc",kt="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff",Tt=new RegExp("^[^"+kt+"]*["+wt+"]"),Nt=new RegExp("^[^"+wt+"]*["+kt+"]"),Et={bold:1,code:16,highlight:128,italic:2,strikethrough:ft,subscript:32,superscript:64,underline:ht},Ot={directionless:1,unmergeable:2},Pt={center:_t,end:vt,justify:yt,left:pt,right:mt,start:xt},Lt={[_t]:"center",[vt]:"end",[yt]:"justify",[pt]:"left",[mt]:"right",[xt]:"start"},At={normal:0,segmented:2,token:1},Dt={0:"normal",2:"segmented",1:"token"};function Mt(...t){const e=[];for(const n of t)if(n&&"string"==typeof n)for(const[t]of n.matchAll(/\S+/g))e.push(t);return e}const Ft=100;let Rt=!1,Bt=0;function It(t){Bt=t.timeStamp}function jt(t,e,n){return e.__lexicalLineBreak===t||void 0!==t[`__lexicalKey_${n._key}`]}function zt(t,e,n){const r=Xe(n._window);let o=null,i=null;null!==r&&r.anchorNode===t&&(o=r.anchorOffset,i=r.focusOffset);const s=t.nodeValue;null!==s&&Te(e,s,o,i,!1)}function $t(t,e,n){if(zr(t)){const e=t.anchor.getNode();if(e.is(n)&&t.format!==e.getFormat())return!1}return e.nodeType===at&&n.isAttached()}function Wt(t,e,n){Rt=!0;const r=performance.now()-Bt>Ft;try{Ao(t,(()=>{const o=eo()||function(t){return t.getEditorState().read((()=>{const t=eo();return null!==t?t.clone():null}))}(t),i=new Map,s=t.getRootElement(),l=t._editorState,a=t._blockCursorElement;let c=!1,u="";for(let n=0;n<e.length;n++){const d=e[n],f=d.type,h=d.target;let g=he(h,l);if(!(null===g&&h!==s||Mo(g)))if("characterData"===f)r&&Lr(g)&&$t(o,h,g)&&zt(h,g,t);else if("childList"===f){c=!0;const e=d.addedNodes;for(let o=0;o<e.length;o++){const n=e[o],r=fe(n),i=n.parentNode;if(null!=i&&n!==a&&null===r&&("BR"!==n.nodeName||!jt(n,i,t))){if(Q){const t=n.innerText||n.nodeValue;t&&(u+=t)}i.removeChild(n)}}const n=d.removedNodes,r=n.length;if(r>0){let e=0;for(let o=0;o<r;o++){const r=n[o];("BR"===r.nodeName&&jt(r,h,t)||a===r)&&(h.appendChild(r),e++)}r!==e&&(h===s&&(g=me(l)),i.set(h,g))}}}if(i.size>0)for(const[e,n]of i)if(Ro(n)){const r=n.getChildrenKeys();let o=e.firstChild;for(let n=0;n<r.length;n++){const i=r[n],s=t.getElementByKey(i);null!==s&&(null==o?(e.appendChild(s),o=s):o!==s&&e.replaceChild(s,o),o=o.nextSibling)}}else Lr(n)&&n.markDirty();const d=n.takeRecords();if(d.length>0){for(let e=0;e<d.length;e++){const n=d[e],r=n.addedNodes,o=n.target;for(let e=0;e<r.length;e++){const n=r[e],i=n.parentNode;null==i||"BR"!==n.nodeName||jt(n,o,t)||i.removeChild(n)}}n.takeRecords()}null!==o&&(c&&(o.dirty=!0,ye(o)),Q&&je(t)&&o.insertRawText(u))}))}finally{Rt=!1}}function Zt(t){const e=t._observer;null!==e&&Wt(t,e.takeRecords(),e)}function Kt(t){!function(t){0===Bt&&Ue(t).addEventListener("textInput",It,!0)}(t),t._observer=new MutationObserver(((e,n)=>{Wt(t,e,n)}))}function Ut(t,e){const n=t.__mode,r=t.__format,o=t.__style,i=e.__mode,s=e.__format,l=e.__style;return!(null!==n&&n!==i||null!==r&&r!==s||null!==o&&o!==l)}function Vt(t,e){const n=t.mergeWithSibling(e),r=bo()._normalizedNodes;return r.add(t.__key),r.add(e.__key),n}function Jt(t){let e,n,r=t;if(""!==r.__text||!r.isSimpleText()||r.isUnmergeable()){for(;null!==(e=r.getPreviousSibling())&&Lr(e)&&e.isSimpleText()&&!e.isUnmergeable();){if(""!==e.__text){if(Ut(e,r)){r=Vt(e,r);break}break}e.remove()}for(;null!==(n=r.getNextSibling())&&Lr(n)&&n.isSimpleText()&&!n.isUnmergeable();){if(""!==n.__text){if(Ut(r,n)){r=Vt(r,n);break}break}n.remove()}}else r.remove()}function Ht(t){return Gt(t.anchor),Gt(t.focus),t}function Gt(t){for(;"element"===t.type;){const e=t.getNode(),n=t.offset;let r,o;if(n===e.getChildrenSize()?(r=e.getChildAtIndex(n-1),o=!0):(r=e.getChildAtIndex(n),o=!1),Lr(r)){t.set(r.__key,o?r.getTextContentSize():0,"text");break}if(!Ro(r))break;t.set(r.__key,o?r.getChildrenSize():0,"element")}}let qt=1;const Xt="function"==typeof queueMicrotask?queueMicrotask:t=>{Promise.resolve().then(t)};function Yt(t){const e=document.activeElement;if(null===e)return!1;const n=e.nodeName;return Mo(he(t))&&("INPUT"===n||"TEXTAREA"===n||"true"===e.contentEditable&&null==e.__lexicalEditor)}function Qt(t,e,n){const r=t.getRootElement();try{return null!==r&&r.contains(e)&&r.contains(n)&&null!==e&&!Yt(e)&&te(e)===t}catch(t){return!1}}function te(t){let e=t;for(;null!=e;){const t=e.__lexicalEditor;if(null!=t)return t;e=Ze(e)}return null}function ee(t){return t.isToken()||t.isSegmented()}function ne(t){return t.nodeType===at}function re(t){let e=t;for(;null!=e;){if(ne(e))return e;e=e.firstChild}return null}function oe(t,e,n){const r=Et[e];if(null!==n&&(t&r)==(n&r))return t;let o=t^r;return"subscript"===e?o&=~Et.superscript:"superscript"===e&&(o&=~Et.subscript),o}function ie(t){return Lr(t)||hr(t)||Mo(t)}function se(t,e){if(null!=e)return void(t.__key=e);yo(),xo();const n=bo(),r=vo(),o=""+qt++;r._nodeMap.set(o,t),Ro(t)?n._dirtyElements.set(o,!0):n._dirtyLeaves.add(o),n._cloneNotNeeded.add(o),n._dirtyType=ut,t.__key=o}function le(t){const e=t.getParent();if(null!==e){const n=t.getWritable(),r=e.getWritable(),o=t.getPreviousSibling(),i=t.getNextSibling();if(null===o)if(null!==i){const t=i.getWritable();r.__first=i.__key,t.__prev=null}else r.__first=null;else{const t=o.getWritable();if(null!==i){const e=i.getWritable();e.__prev=t.__key,t.__next=e.__key}else t.__next=null;n.__prev=null}if(null===i)if(null!==o){const t=o.getWritable();r.__last=o.__key,t.__next=null}else r.__last=null;else{const t=i.getWritable();if(null!==o){const e=o.getWritable();e.__next=t.__key,t.__prev=e.__key}else t.__prev=null;n.__next=null}r.__size--,n.__parent=null}}function ae(t){xo();const e=t.getLatest(),n=e.__parent,r=vo(),o=bo(),i=r._nodeMap,s=o._dirtyElements;null!==n&&function(t,e,n){let r=t;for(;null!==r;){if(n.has(r))return;const t=e.get(r);if(void 0===t)break;n.set(r,!1),r=t.__parent}}(n,i,s);const l=e.__key;o._dirtyType=ut,Ro(t)?s.set(l,!0):o._dirtyLeaves.add(l)}function ce(t){yo();const e=bo(),n=e._compositionKey;if(t!==n){if(e._compositionKey=t,null!==n){const t=de(n);null!==t&&t.getWritable()}if(null!==t){const e=de(t);null!==e&&e.getWritable()}}}function ue(){return mo()?null:bo()._compositionKey}function de(t,e){const n=(e||vo())._nodeMap.get(t);return void 0===n?null:n}function fe(t,e){const n=t[`__lexicalKey_${bo()._key}`];return void 0!==n?de(n,e):null}function he(t,e){let n=t;for(;null!=n;){const t=fe(n,e);if(null!==t)return t;n=Ze(n)}return null}function ge(t){const e=t._decorators,n=Object.assign({},e);return t._pendingDecorators=n,n}function pe(t){return t.read((()=>_e().getTextContent()))}function _e(){return me(vo())}function me(t){return t._nodeMap.get("root")}function ye(t){yo();const e=vo();null!==t&&(t.dirty=!0,t.setCachedNodes(null)),e._selection=t}function xe(t){const e=bo(),n=function(t,e){let n=t;for(;null!=n;){const t=n[`__lexicalKey_${e._key}`];if(void 0!==t)return t;n=Ze(n)}return null}(t,e);return null===n?t===e.getRootElement()?de("root"):null:de(n)}function ve(t,e){return e?t.getTextContentSize():0}function be(t){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(t)}function Ce(t){const e=[];let n=t;for(;null!==n;)e.push(n),n=n._parentEditor;return e}function Se(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)}function we(t){return t.nodeType===at?t.nodeValue:null}function ke(t,e,n){const r=Xe(e._window);if(null===r)return;const o=r.anchorNode;let{anchorOffset:i,focusOffset:s}=r;if(null!==o){let e=we(o);const r=he(o);if(null!==e&&Lr(r)){if(e===bt&&n){const t=n.length;e=n,i=t,s=t}null!==e&&Te(r,e,i,s,t)}}}function Te(t,e,n,r,o){let i=t;if(i.isAttached()&&(o||!i.isDirty())){const s=i.isComposing();let l=e;(s||o)&&e[e.length-1]===bt&&(l=e.slice(0,-1));const a=i.getTextContent();if(o||l!==a){if(""===l){if(ce(null),et||nt||st)i.remove();else{const t=bo();setTimeout((()=>{t.update((()=>{i.isAttached()&&i.remove()}))}),20)}return}const e=i.getParent(),o=no(),a=i.getTextContentSize(),c=ue(),u=i.getKey();if(i.isToken()||null!==c&&u===c&&!s||zr(o)&&(null!==e&&!e.canInsertTextBefore()&&0===o.anchor.offset||o.anchor.key===t.__key&&0===o.anchor.offset&&!i.canInsertTextBefore()&&!s||o.focus.key===t.__key&&o.focus.offset===a&&!i.canInsertTextAfter()&&!s))return void i.markDirty();const d=eo();if(!zr(d)||null===n||null===r)return void i.setTextContent(l);if(d.setTextNodeRange(i,n,i,r),i.isSegmented()){const t=Pr(i.getTextContent());i.replace(t),i=t}i.setTextContent(l)}}}function Ne(t){return"ArrowLeft"===t}function Ee(t){return"ArrowRight"===t}function Oe(t,e){return Y?t:e}function Pe(t){return"Enter"===t}function Le(t){return"Backspace"===t}function Ae(t){return"Delete"===t}function De(t,e,n){return"KeyA"===t&&Oe(e,n)}function Me(){const t=_e();ye(Ht(t.select(0,t.getChildrenSize())))}function Fe(t,e){void 0===t.__lexicalClassNameCache&&(t.__lexicalClassNameCache={});const n=t.__lexicalClassNameCache,r=n[e];if(void 0!==r)return r;const o=t[e];if("string"==typeof o){const t=Mt(o);return n[e]=t,t}return o}function Re(t,e,n,r,o){if(0===n.size)return;const i=r.__type,s=r.__key,l=e.get(i);void 0===l&&G(33,i);const a=l.klass;let c=t.get(a);void 0===c&&(c=new Map,t.set(a,c));const u=c.get(s),d="destroyed"===u&&"created"===o;(void 0===u||d)&&c.set(s,d?"updated":o)}function Be(t,e,n){const r=t.getParent();let o=n,i=t;return null!==r&&(e&&0===n?(o=i.getIndexWithinParent(),i=r):e||n!==i.getChildrenSize()||(o=i.getIndexWithinParent()+1,i=r)),i.getChildAtIndex(e?o-1:o)}function Ie(t,e){const n=t.offset;if("element"===t.type)return Be(t.getNode(),e,n);{const r=t.getNode();if(e&&0===n||!e&&n===r.getTextContentSize()){const t=e?r.getPreviousSibling():r.getNextSibling();return null===t?Be(r.getParentOrThrow(),e,r.getIndexWithinParent()+(e?0:1)):t}}return null}function je(t){const e=Ue(t).event,n=e&&e.inputType;return"insertFromPaste"===n||"insertFromPasteAsQuotation"===n}function ze(t,e,n){return Oo(t,e,n)}function $e(t){return!jo(t)&&!t.isLastChild()&&!t.isInline()}function We(t,e){const n=t._keyToDOMMap.get(e);return void 0===n&&G(75,e),n}function Ze(t){const e=t.assignedSlot||t.parentElement;return null!==e&&11===e.nodeType?e.host:e}function Ke(t,e){let n=t.getParent();for(;null!==n;){if(n.is(e))return!0;n=n.getParent()}return!1}function Ue(t){const e=t._window;return null===e&&G(78),e}function Ve(t){return jo(t)||Ro(t)&&t.isShadowRoot()}function Je(t){const e=bo(),n=t.constructor.getType(),r=e._nodes.get(n);void 0===r&&G(97);const o=r.replace;if(null!==o){const e=o(t);return e instanceof t.constructor||G(98),e}return t}function He(t,e){!jo(t.getParent())||Ro(e)||Mo(e)||G(99)}function Ge(t){return(Mo(t)||Ro(t)&&!t.canBeEmpty())&&!t.isInline()}function qe(t,e,n){n.style.removeProperty("caret-color"),e._blockCursorElement=null;const r=t.parentElement;null!==r&&r.removeChild(t)}function Xe(t){return q?(t||window).getSelection():null}function Ye(t,e){let n=t.getChildAtIndex(e);null==n&&(n=t),Ve(t)&&G(102);const r=t=>{const e=t.getParentOrThrow(),o=Ve(e),i=t!==n||o?function(t){const e=t.constructor.clone(t);return se(e,null),e}(t):t;if(o)return Ro(t)&&Ro(i)||G(133),t.insertAfter(i),[t,i,i];{const[n,o,s]=r(e),l=t.getNextSiblings();return s.append(i,...l),[n,o,i]}},[o,i]=r(n);return[o,i]}function Qe(t){return tn(t)&&"A"===t.tagName}function tn(t){return 1===t.nodeType}function en(t){const e=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return null!==t.nodeName.match(e)}function nn(t){const e=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return null!==t.nodeName.match(e)}function rn(t){if(jo(t)||Mo(t)&&!t.isInline())return!0;if(!Ro(t)||Ve(t))return!1;const e=t.getFirstChild(),n=null===e||hr(e)||Lr(e)||e.isInline();return!t.isInline()&&!1!==t.canBeEmpty()&&n}function on(t,e){let n=t;for(;null!==n&&null!==n.getParent()&&!e(n);)n=n.getParentOrThrow();return e(n)?n:null}function sn(t,e,n,r,o,i){let s=t.getFirstChild();for(;null!==s;){const t=s.__key;s.__parent===e&&(Ro(s)&&sn(s,t,n,r,o,i),n.has(t)||i.delete(t),o.push(t)),s=s.getNextSibling()}}let ln,an,cn,un,dn,fn,hn,gn,pn,_n,mn="",yn="",xn=null,vn="",bn=!1,Cn=!1,Sn=null;function wn(t,e){const n=hn.get(t);if(null!==e){const n=jn(t);n.parentNode===e&&e.removeChild(n)}if(gn.has(t)||an._keyToDOMMap.delete(t),Ro(n)){const t=Fn(n,hn);kn(t,0,t.length-1,null)}void 0!==n&&Re(_n,cn,un,n,"destroyed")}function kn(t,e,n,r){let o=e;for(;o<=n;++o){const e=t[o];void 0!==e&&wn(e,r)}}function Tn(t,e){t.setProperty("text-align",e)}const Nn="40px";function En(t,e){const n=ln.theme.indent;if("string"==typeof n){const r=t.classList.contains(n);e>0&&!r?t.classList.add(n):e<1&&r&&t.classList.remove(n)}const r=getComputedStyle(t).getPropertyValue("--lexical-indent-base-value")||Nn;t.style.setProperty("padding-inline-start",0===e?"":`calc(${e} * ${r})`)}function On(t,e){const n=t.style;0===e?Tn(n,""):e===pt?Tn(n,"left"):e===_t?Tn(n,"center"):e===mt?Tn(n,"right"):e===yt?Tn(n,"justify"):e===xt?Tn(n,"start"):e===vt&&Tn(n,"end")}function Pn(t,e,n){const r=gn.get(t);void 0===r&&G(60);const o=r.createDOM(ln,an);if(function(t,e,n){const r=n._keyToDOMMap;e["__lexicalKey_"+n._key]=t,r.set(t,e)}(t,o,an),Lr(r)?o.setAttribute("data-lexical-text","true"):Mo(r)&&o.setAttribute("data-lexical-decorator","true"),Ro(r)){const t=r.__indent,e=r.__size;if(0!==t&&En(o,t),0!==e){const t=e-1;!function(t,e,n,r){const o=yn;yn="",Ln(t,n,0,e,r,null),Mn(n,r),yn=o}(Fn(r,gn),t,r,o)}const n=r.__format;0!==n&&On(o,n),r.isInline()||Dn(null,r,o),$e(r)&&(mn+=Ct,vn+=Ct)}else{const e=r.getTextContent();if(Mo(r)){const e=r.decorate(an,ln);null!==e&&Bn(t,e),o.contentEditable="false"}else Lr(r)&&(r.isDirectionless()||(yn+=e));mn+=e,vn+=e}if(null!==e)if(null!=n)e.insertBefore(o,n);else{const t=e.__lexicalLineBreak;null!=t?e.insertBefore(o,t):e.appendChild(o)}return Re(_n,cn,un,r,"created"),o}function Ln(t,e,n,r,o,i){const s=mn;mn="";let l=n;for(;l<=r;++l){Pn(t[l],o,i);const e=gn.get(t[l]);null!==e&&null===xn&&Lr(e)&&(xn=e.getFormat())}$e(e)&&(mn+=Ct),o.__lexicalTextContent=mn,mn=s+mn}function An(t,e){const n=e.get(t);return hr(n)||Mo(n)&&n.isInline()}function Dn(t,e,n){const r=null!==t&&(0===t.__size||An(t.__last,hn)),o=0===e.__size||An(e.__last,gn);if(r){if(!o){const t=n.__lexicalLineBreak;null!=t&&n.removeChild(t),n.__lexicalLineBreak=null}}else if(o){const t=document.createElement("br");n.__lexicalLineBreak=t,n.appendChild(t)}}function Mn(t,e){const n=e.__lexicalDirTextContent,r=e.__lexicalDir;if(n!==yn||r!==Sn){const n=""===yn,i=n?Sn:(o=yn,Tt.test(o)?"rtl":Nt.test(o)?"ltr":null);if(i!==r){const o=e.classList,s=ln.theme;let l=null!==r?s[r]:void 0,a=null!==i?s[i]:void 0;if(void 0!==l){if("string"==typeof l){const t=Mt(l);l=s[r]=t}o.remove(...l)}if(null===i||n&&"ltr"===i)e.removeAttribute("dir");else{if(void 0!==a){if("string"==typeof a){const t=Mt(a);a=s[i]=t}void 0!==a&&o.add(...a)}e.dir=i}Cn||(t.getWritable().__dir=i)}Sn=i,e.__lexicalDirTextContent=yn,e.__lexicalDir=i}var o}function Fn(t,e){const n=[];let r=t.__first;for(;null!==r;){const t=e.get(r);void 0===t&&G(101),n.push(r),r=t.__next}return n}function Rn(t,e){const n=hn.get(t);let r=gn.get(t);void 0!==n&&void 0!==r||G(61);const o=bn||fn.has(t)||dn.has(t),i=We(an,t);if(n===r&&!o){if(Ro(n)){const t=i.__lexicalTextContent;void 0!==t&&(mn+=t,vn+=t);const e=i.__lexicalDirTextContent;void 0!==e&&(yn+=e)}else{const t=n.getTextContent();Lr(n)&&!n.isDirectionless()&&(yn+=t),vn+=t,mn+=t}return i}if(n!==r&&o&&Re(_n,cn,un,r,"updated"),r.updateDOM(n,i,ln)){const n=Pn(t,null,null);return null===e&&G(62),e.replaceChild(n,i),wn(t,null),n}if(Ro(n)&&Ro(r)){const t=r.__indent;t!==n.__indent&&En(i,t);const e=r.__format;e!==n.__format&&On(i,e),o&&(function(t,e,n){const r=yn;var o;yn="",xn=null,function(t,e,n){const r=mn,o=t.__size,i=e.__size;if(mn="",1===o&&1===i){const r=t.__first,o=e.__first;if(r===o)Rn(r,n);else{const t=jn(r),e=Pn(o,null,null);n.replaceChild(e,t),wn(r,null)}const i=gn.get(o);null===xn&&Lr(i)&&(xn=i.getFormat())}else{const r=Fn(t,hn),s=Fn(e,gn);if(0===o)0!==i&&Ln(s,e,0,i-1,n,null);else if(0===i){if(0!==o){const t=null==n.__lexicalLineBreak;kn(r,0,o-1,t?null:n),t&&(n.textContent="")}}else!function(t,e,n,r,o,i){const s=r-1,l=o-1;let a,c,u=i.firstChild,d=0,f=0;for(;d<=s&&f<=l;){const t=e[d],r=n[f];if(t===r)u=In(Rn(r,i)),d++,f++;else{void 0===a&&(a=new Set(e)),void 0===c&&(c=new Set(n));const o=c.has(t),s=a.has(r);if(o)if(s){const t=We(an,r);t===u?u=In(Rn(r,i)):(null!=u?i.insertBefore(t,u):i.appendChild(t),Rn(r,i)),d++,f++}else Pn(r,i,u),f++;else u=In(jn(t)),wn(t,i),d++}const o=gn.get(r);null!==o&&null===xn&&Lr(o)&&(xn=o.getFormat())}const h=d>s,g=f>l;if(h&&!g){const e=n[l+1];Ln(n,t,f,l,i,void 0===e?null:an.getElementByKey(e))}else g&&!h&&kn(e,d,s,i)}(e,r,s,o,i,n)}$e(e)&&(mn+=Ct),n.__lexicalTextContent=mn,mn=r+mn}(t,e,n),Mn(e,n),Jo(o=e)&&null!=xn&&xn!==o.__textFormat&&o.setTextFormat(xn),yn=r,xn=null}(n,r,i),jo(r)||r.isInline()||Dn(n,r,i)),$e(r)&&(mn+=Ct,vn+=Ct)}else{const e=r.getTextContent();if(Mo(r)){const e=r.decorate(an,ln);null!==e&&Bn(t,e)}else Lr(r)&&!r.isDirectionless()&&(yn+=e);mn+=e,vn+=e}if(!Cn&&jo(r)&&r.__cachedText!==vn){const t=r.getWritable();t.__cachedText=vn,r=t}return i}function Bn(t,e){let n=an._pendingDecorators;const r=an._decorators;if(null===n){if(r[t]===e)return;n=ge(an)}n[t]=e}function In(t){let e=t.nextSibling;return null!==e&&e===an._blockCursorElement&&(e=e.nextSibling),e}function jn(t){const e=pn.get(t);return void 0===e&&G(75,t),e}const zn=Object.freeze({}),$n=[["keydown",function(t,e){if(Wn=t.timeStamp,Zn=t.code,e.isComposing())return;const{code:n,shiftKey:r,ctrlKey:o,metaKey:i,altKey:s}=t;ze(e,y,t)||(!function(t,e,n,r){return Ee(t)&&!e&&!r&&!n}(n,o,s,i)?!function(t,e,n,r,o){return Ee(t)&&!r&&!n&&(e||o)}(n,o,r,s,i)?!function(t,e,n,r){return Ne(t)&&!e&&!r&&!n}(n,o,s,i)?!function(t,e,n,r,o){return Ne(t)&&!r&&!n&&(e||o)}(n,o,r,s,i)?!function(t,e,n){return function(t){return"ArrowUp"===t}(t)&&!e&&!n}(n,o,i)?!function(t,e,n){return function(t){return"ArrowDown"===t}(t)&&!e&&!n}(n,o,i)?!function(t,e){return Pe(t)&&e}(n,r)?!function(t){return"Space"===t}(n)?!function(t,e){return Y&&e&&"KeyO"===t}(n,o)?!function(t,e){return Pe(t)&&!e}(n,r)?!function(t,e,n,r){return Y?!e&&!n&&(Le(t)||"KeyH"===t&&r):!(r||e||n)&&Le(t)}(n,s,i,o)?!function(t){return"Escape"===t}(n)?!function(t,e,n,r,o){return Y?!(n||r||o)&&(Ae(t)||"KeyD"===t&&e):!(e||r||o)&&Ae(t)}(n,o,r,s,i)?!function(t,e,n){return Le(t)&&(Y?e:n)}(n,s,o)?!function(t,e,n){return Ae(t)&&(Y?e:n)}(n,s,o)?!function(t,e){return Y&&e&&Le(t)}(n,i)?!function(t,e){return Y&&e&&Ae(t)}(n,i)?!function(t,e,n,r){return"KeyB"===t&&!e&&Oe(n,r)}(n,s,i,o)?!function(t,e,n,r){return"KeyU"===t&&!e&&Oe(n,r)}(n,s,i,o)?!function(t,e,n,r){return"KeyI"===t&&!e&&Oe(n,r)}(n,s,i,o)?!function(t,e,n,r){return"Tab"===t&&!e&&!n&&!r}(n,s,o,i)?!function(t,e,n,r){return"KeyZ"===t&&!e&&Oe(n,r)}(n,r,i,o)?!function(t,e,n,r){return Y?"KeyZ"===t&&n&&e:"KeyY"===t&&r||"KeyZ"===t&&r&&e}(n,r,i,o)?Wr(e._editorState._selection)?function(t,e,n,r){return!e&&"KeyC"===t&&(Y?n:r)}(n,r,i,o)?(t.preventDefault(),ze(e,j,t)):function(t,e,n,r){return!e&&"KeyX"===t&&(Y?n:r)}(n,r,i,o)?(t.preventDefault(),ze(e,z,t)):De(n,i,o)&&(t.preventDefault(),ze(e,$,t)):!Q&&De(n,i,o)&&(t.preventDefault(),ze(e,$,t)):(t.preventDefault(),ze(e,m,void 0)):(t.preventDefault(),ze(e,_,void 0)):ze(e,P,t):(t.preventDefault(),ze(e,p,"italic")):(t.preventDefault(),ze(e,p,"underline")):(t.preventDefault(),ze(e,p,"bold")):(t.preventDefault(),ze(e,g,!1)):(t.preventDefault(),ze(e,g,!0)):(t.preventDefault(),ze(e,h,!1)):(t.preventDefault(),ze(e,h,!0)):Ae(n)?ze(e,O,t):(t.preventDefault(),ze(e,l,!1)):ze(e,E,t):Le(n)?ze(e,N,t):(t.preventDefault(),ze(e,l,!0)):(Gn=!1,ze(e,k,t)):(t.preventDefault(),Gn=!0,ze(e,a,!0)):ze(e,T,t):(Gn=!0,ze(e,k,t)):ze(e,w,t):ze(e,S,t):ze(e,C,t):ze(e,b,t):ze(e,v,t):ze(e,x,t),function(t,e,n,r){return t||e||n||r}(o,r,s,i)&&ze(e,H,t))}],["pointerdown",function(t,e){const n=t.target,r=t.pointerType;n instanceof Node&&"touch"!==r&&Ao(e,(()=>{Mo(he(n))||(Hn=!0)}))}],["compositionstart",function(t,e){Ao(e,(()=>{const n=eo();if(zr(n)&&!e.isComposing()){const r=n.anchor,o=n.anchor.getNode();ce(r.key),(t.timeStamp<Wn+30||"element"===r.type||!n.isCollapsed()||o.getFormat()!==n.format||Lr(o)&&o.getStyle()!==n.style)&&ze(e,u,St)}}))}],["compositionend",function(t,e){Q?qn=!0:Ao(e,(()=>{nr(e,t.data)}))}],["input",function(t,e){t.stopPropagation(),Ao(e,(()=>{const n=eo(),r=t.data,o=er(t);if(null!=r&&zr(n)&&Yn(n,o,r,t.timeStamp,!1)){qn&&(nr(e,r),qn=!1);const o=n.anchor.getNode(),i=Xe(e._window);if(null===i)return;const s=n.isBackward(),l=s?n.anchor.offset:n.focus.offset,a=s?n.focus.offset:n.anchor.offset;tt&&!n.isCollapsed()&&Lr(o)&&null!==i.anchorNode&&o.getTextContent().slice(0,l)+r+o.getTextContent().slice(l+a)===we(i.anchorNode)||ze(e,u,r);const c=r.length;Q&&c>1&&"insertCompositionText"===t.inputType&&!e.isComposing()&&(n.anchor.offset-=c),et||nt||st||!e.isComposing()||(Wn=0,ce(null))}else ke(!1,e,null!==r?r:void 0),qn&&(nr(e,r||void 0),qn=!1);yo(),Zt(bo())})),Un=null}],["click",function(t,e){Ao(e,(()=>{const n=eo(),r=Xe(e._window),o=no();if(r)if(zr(n)){const e=n.anchor,i=e.getNode();"element"===e.type&&0===e.offset&&n.isCollapsed()&&!jo(i)&&1===_e().getChildrenSize()&&i.getTopLevelElementOrThrow().isEmpty()&&null!==o&&n.is(o)?(r.removeAllRanges(),n.dirty=!0):3!==t.detail||n.isCollapsed()||i!==n.focus.getNode()&&(Ro(i)?i.select(0):i.getParentOrThrow().select(0))}else if("touch"===t.pointerType){const n=r.anchorNode;if(null!==n){const i=n.nodeType;i!==lt&&i!==at||ye(to(o,r,e,t))}}ze(e,s,t)}))}],["cut",zn],["copy",zn],["dragstart",zn],["dragover",zn],["dragend",zn],["paste",zn],["focus",zn],["blur",zn],["drop",zn]];tt&&$n.push(["beforeinput",(t,e)=>function(t,e){const n=t.inputType,r=er(t);"deleteCompositionText"===n||Q&&je(e)||"insertCompositionText"!==n&&Ao(e,(()=>{const o=eo();if("deleteContentBackward"===n){if(null===o){const t=no();if(!zr(t))return;ye(t.clone())}if(zr(o)){const n=o.anchor.key===o.focus.key;if(i=t.timeStamp,"Delete"===Zn&&i<Wn+30&&e.isComposing()&&n){if(ce(null),Wn=0,setTimeout((()=>{Ao(e,(()=>{ce(null)}))}),30),zr(o)){const t=o.anchor.getNode();t.markDirty(),o.format=t.getFormat(),Lr(t)||G(142),o.style=t.getStyle()}}else{ce(null),t.preventDefault();const r=o.anchor.getNode().getTextContent(),i=0===o.anchor.offset&&o.focus.offset===r.length;it&&n&&!i||ze(e,l,!0)}return}}var i;if(!zr(o))return;const s=t.data;null!==Un&&ke(!1,e,Un),o.dirty&&null===Un||!o.isCollapsed()||jo(o.anchor.getNode())||null===r||o.applyDOMRange(r),Un=null;const y=o.anchor,x=o.focus,v=y.getNode(),b=x.getNode();if("insertText"!==n&&"insertTranspose"!==n)switch(t.preventDefault(),n){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":ze(e,u,t);break;case"insertFromComposition":ce(null),ze(e,u,t);break;case"insertLineBreak":ce(null),ze(e,a,!1);break;case"insertParagraph":ce(null),Gn&&!nt?(Gn=!1,ze(e,a,!1)):ze(e,c,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":ze(e,d,t);break;case"deleteByComposition":(function(t,e){return t!==e||Ro(t)||Ro(e)||!t.isToken()||!e.isToken()})(v,b)&&ze(e,f,t);break;case"deleteByDrag":case"deleteByCut":ze(e,f,t);break;case"deleteContent":ze(e,l,!1);break;case"deleteWordBackward":ze(e,h,!0);break;case"deleteWordForward":ze(e,h,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":ze(e,g,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":ze(e,g,!1);break;case"formatStrikeThrough":ze(e,p,"strikethrough");break;case"formatBold":ze(e,p,"bold");break;case"formatItalic":ze(e,p,"italic");break;case"formatUnderline":ze(e,p,"underline");break;case"historyUndo":ze(e,_,void 0);break;case"historyRedo":ze(e,m,void 0)}else{if("\n"===s)t.preventDefault(),ze(e,a,!1);else if(s===Ct)t.preventDefault(),ze(e,c,void 0);else if(null==s&&t.dataTransfer){const e=t.dataTransfer.getData("text/plain");t.preventDefault(),o.insertRawText(e)}else null!=s&&Yn(o,r,s,t.timeStamp,!0)?(t.preventDefault(),ze(e,u,s)):Un=s;Kn=t.timeStamp}}))}(t,e)]);let Wn=0,Zn=null,Kn=0,Un=null;const Vn=new WeakMap;let Jn=!1,Hn=!1,Gn=!1,qn=!1,Xn=[0,"",0,"root",0];function Yn(t,e,n,r,o){const i=t.anchor,s=t.focus,l=i.getNode(),a=bo(),c=Xe(a._window),u=null!==c?c.anchorNode:null,d=i.key,f=a.getElementByKey(d),h=n.length;return d!==s.key||!Lr(l)||(!o&&(!tt||Kn<r+50)||l.isDirty()&&h<2||be(n))&&i.offset!==s.offset&&!l.isComposing()||ee(l)||l.isDirty()&&h>1||(o||!tt)&&null!==f&&!l.isComposing()&&u!==re(f)||null!==c&&null!==e&&(!e.collapsed||e.startContainer!==c.anchorNode||e.startOffset!==c.anchorOffset)||l.getFormat()!==t.format||l.getStyle()!==t.style||function(t,e){if(e.isSegmented())return!0;if(!t.isCollapsed())return!1;const n=t.anchor.offset,r=e.getParentOrThrow(),o=e.isToken();return 0===n?!e.canInsertTextBefore()||!r.canInsertTextBefore()&&!e.isComposing()||o||function(t){const e=t.getPreviousSibling();return(Lr(e)||Ro(e)&&e.isInline())&&!e.canInsertTextAfter()}(e):n===e.getTextContentSize()&&(!e.canInsertTextAfter()||!r.canInsertTextAfter()&&!e.isComposing()||o)}(t,l)}function Qn(t,e){return null!==t&&null!==t.nodeValue&&t.nodeType===at&&0!==e&&e!==t.nodeValue.length}function tr(t,e,n){const{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:l}=t;Jn&&(Jn=!1,Qn(r,i)&&Qn(s,l))||Ao(e,(()=>{if(!n)return void ye(null);if(!Qt(e,r,s))return;const a=eo();if(zr(a)){const n=a.anchor,r=n.getNode();if(a.isCollapsed()){"Range"===t.type&&t.anchorNode===t.focusNode&&(a.dirty=!0);const o=Ue(e).event,i=o?o.timeStamp:performance.now(),[s,l,c,u,d]=Xn,f=_e(),h=!1===e.isComposing()&&""===f.getTextContent();if(i<d+200&&n.offset===c&&n.key===u)a.format=s,a.style=l;else if("text"===n.type)Lr(r)||G(141),a.format=r.getFormat(),a.style=r.getStyle();else if("element"===n.type&&!h){const t=n.getNode();t instanceof Ko&&0===t.getChildrenSize()?a.format=t.getTextFormat():a.format=0,a.style=""}}else{const t=n.key,e=a.focus.key,r=a.getNodes(),o=r.length,s=a.isBackward(),c=s?l:i,u=s?i:l,d=s?e:t,f=s?t:e;let h=gt,g=!1;for(let n=0;n<o;n++){const t=r[n],e=t.getTextContentSize();if(Lr(t)&&0!==e&&!(0===n&&t.__key===d&&c===e||n===o-1&&t.__key===f&&0===u)&&(g=!0,h&=t.getFormat(),0===h))break}a.format=g?h:0}}ze(e,o,void 0)}))}function er(t){if(!t.getTargetRanges)return null;const e=t.getTargetRanges();return 0===e.length?null:e[0]}function nr(t,e){const n=t._compositionKey;if(ce(null),null!==n&&null!=e){if(""===e){const e=de(n),r=re(t.getElementByKey(n));return void(null!==r&&null!==r.nodeValue&&Lr(e)&&Te(e,r.nodeValue,null,null,!0))}if("\n"===e[e.length-1]){const e=eo();if(zr(e)){const n=e.focus;return e.anchor.set(n.key,n.offset,n.type),void ze(t,k,null)}}}ke(!0,t,e)}function rr(t){let e=t.__lexicalEventHandles;return void 0===e&&(e=[],t.__lexicalEventHandles=e),e}const or=new Map;function ir(t){const e=t.target,n=Xe(null==e?null:9===e.nodeType?e.defaultView:e.ownerDocument.defaultView);if(null===n)return;const r=te(n.anchorNode);if(null===r)return;Hn&&(Hn=!1,Ao(r,(()=>{const e=no(),o=n.anchorNode;if(null===o)return;const i=o.nodeType;i!==lt&&i!==at||ye(to(e,n,r,t))})));const o=Ce(r),i=o[o.length-1],s=i._key,l=or.get(s),a=l||i;a!==r&&tr(n,a,!1),tr(n,r,!0),r!==i?or.set(s,r):l&&or.delete(s)}function sr(t){t._lexicalHandled=!0}function lr(t){return!0===t._lexicalHandled}function ar(t,e,n){yo();const r=t.__key,o=t.getParent();if(null===o)return;const i=function(t){const e=eo();if(!zr(e)||!Ro(t))return e;const{anchor:n,focus:r}=e,o=n.getNode(),i=r.getNode();return Ke(o,t)&&n.set(t.__key,0,"element"),Ke(i,t)&&r.set(t.__key,0,"element"),e}(t);let s=!1;if(zr(i)&&e){const e=i.anchor,n=i.focus;e.key===r&&(io(e,t,o,t.getPreviousSibling(),t.getNextSibling()),s=!0),n.key===r&&(io(n,t,o,t.getPreviousSibling(),t.getNextSibling()),s=!0)}else Wr(i)&&e&&t.isSelected()&&t.selectPrevious();if(zr(i)&&e&&!s){const e=t.getIndexWithinParent();le(t),ro(i,o,e,-1)}else le(t);n||Ve(o)||o.canBeEmpty()||!o.isEmpty()||ar(o,e),e&&jo(o)&&o.isEmpty()&&o.selectEnd()}class cr{static getType(){G(64,this.name)}static clone(t){G(65,this.name)}constructor(t){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,se(this,t)}getType(){return this.__type}isInline(){G(137,this.constructor.name)}isAttached(){let t=this.__key;for(;null!==t;){if("root"===t)return!0;const e=de(t);if(null===e)break;t=e.__parent}return!1}isSelected(t){const e=t||eo();if(null==e)return!1;const n=e.getNodes().some((t=>t.__key===this.__key));return(Lr(this)||!zr(e)||"element"!==e.anchor.type||"element"!==e.focus.type||e.anchor.key!==e.focus.key||e.anchor.offset!==e.focus.offset)&&n}getKey(){return this.__key}getIndexWithinParent(){const t=this.getParent();if(null===t)return-1;let e=t.getFirstChild(),n=0;for(;null!==e;){if(this.is(e))return n;n++,e=e.getNextSibling()}return-1}getParent(){const t=this.getLatest().__parent;return null===t?null:de(t)}getParentOrThrow(){const t=this.getParent();return null===t&&G(66,this.__key),t}getTopLevelElement(){let t=this;for(;null!==t;){const e=t.getParent();if(Ve(e))return Ro(t)||G(138),t;t=e}return null}getTopLevelElementOrThrow(){const t=this.getTopLevelElement();return null===t&&G(67,this.__key),t}getParents(){const t=[];let e=this.getParent();for(;null!==e;)t.push(e),e=e.getParent();return t}getParentKeys(){const t=[];let e=this.getParent();for(;null!==e;)t.push(e.__key),e=e.getParent();return t}getPreviousSibling(){const t=this.getLatest().__prev;return null===t?null:de(t)}getPreviousSiblings(){const t=[],e=this.getParent();if(null===e)return t;let n=e.getFirstChild();for(;null!==n&&!n.is(this);)t.push(n),n=n.getNextSibling();return t}getNextSibling(){const t=this.getLatest().__next;return null===t?null:de(t)}getNextSiblings(){const t=[];let e=this.getNextSibling();for(;null!==e;)t.push(e),e=e.getNextSibling();return t}getCommonAncestor(t){const e=this.getParents(),n=t.getParents();Ro(this)&&e.unshift(this),Ro(t)&&n.unshift(t);const r=e.length,o=n.length;if(0===r||0===o||e[r-1]!==n[o-1])return null;const i=new Set(n);for(let s=0;s<r;s++){const t=e[s];if(i.has(t))return t}return null}is(t){return null!=t&&this.__key===t.__key}isBefore(t){if(this===t)return!1;if(t.isParentOf(this))return!0;if(this.isParentOf(t))return!1;const e=this.getCommonAncestor(t);let n=0,r=0,o=this;for(;;){const t=o.getParentOrThrow();if(t===e){n=o.getIndexWithinParent();break}o=t}for(o=t;;){const t=o.getParentOrThrow();if(t===e){r=o.getIndexWithinParent();break}o=t}return n<r}isParentOf(t){const e=this.__key;if(e===t.__key)return!1;let n=t;for(;null!==n;){if(n.__key===e)return!0;n=n.getParent()}return!1}getNodesBetween(t){const e=this.isBefore(t),n=[],r=new Set;let o=this;for(;null!==o;){const i=o.__key;if(r.has(i)||(r.add(i),n.push(o)),o===t)break;const s=Ro(o)?e?o.getFirstChild():o.getLastChild():null;if(null!==s){o=s;continue}const l=e?o.getNextSibling():o.getPreviousSibling();if(null!==l){o=l;continue}const a=o.getParentOrThrow();if(r.has(a.__key)||n.push(a),a===t)break;let c=null,u=a;do{if(null===u&&G(68),c=e?u.getNextSibling():u.getPreviousSibling(),u=u.getParent(),null===u)break;null!==c||r.has(u.__key)||n.push(u)}while(null===c);o=c}return e||n.reverse(),n}isDirty(){const t=bo()._dirtyLeaves;return null!==t&&t.has(this.__key)}getLatest(){const t=de(this.__key);return null===t&&G(113),t}getWritable(){yo();const t=vo(),e=bo(),n=t._nodeMap,r=this.__key,o=this.getLatest(),i=o.__parent,s=e._cloneNotNeeded,l=eo();if(null!==l&&l.setCachedNodes(null),s.has(r))return ae(o),o;const a=o.constructor.clone(o);return a.__parent=i,a.__next=o.__next,a.__prev=o.__prev,Ro(o)&&Ro(a)?(Jo(o)&&Jo(a)&&(a.__textFormat=o.__textFormat),a.__first=o.__first,a.__last=o.__last,a.__size=o.__size,a.__indent=o.__indent,a.__format=o.__format,a.__dir=o.__dir):Lr(o)&&Lr(a)&&(a.__format=o.__format,a.__style=o.__style,a.__mode=o.__mode,a.__detail=o.__detail),s.add(r),a.__key=r,ae(a),n.set(r,a),a}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(t,e){G(70)}updateDOM(t,e,n){G(71)}exportDOM(t){return{element:this.createDOM(t._config,t)}}exportJSON(){G(72)}static importJSON(t){G(18,this.name)}static transform(){return null}remove(t){ar(this,!0,t)}replace(t,e){yo();let n=eo();null!==n&&(n=n.clone()),He(this,t);const r=this.getLatest(),o=this.__key,i=t.__key,s=t.getWritable(),l=this.getParentOrThrow().getWritable(),a=l.__size;le(s);const c=r.getPreviousSibling(),u=r.getNextSibling(),d=r.__prev,f=r.__next,h=r.__parent;if(ar(r,!1,!0),null===c?l.__first=i:c.getWritable().__next=i,s.__prev=d,null===u?l.__last=i:u.getWritable().__prev=i,s.__next=f,s.__parent=h,l.__size=a,e&&(Ro(this)&&Ro(s)||G(139),this.getChildren().forEach((t=>{s.append(t)}))),zr(n)){ye(n);const t=n.anchor,e=n.focus;t.key===o&&Br(t,s),e.key===o&&Br(e,s)}return ue()===o&&ce(i),s}insertAfter(t,e=!0){yo(),He(this,t);const n=this.getWritable(),r=t.getWritable(),o=r.getParent(),i=eo();let s=!1,l=!1;if(null!==o){const e=t.getIndexWithinParent();if(le(r),zr(i)){const t=o.__key,n=i.anchor,r=i.focus;s="element"===n.type&&n.key===t&&n.offset===e+1,l="element"===r.type&&r.key===t&&r.offset===e+1}}const a=this.getNextSibling(),c=this.getParentOrThrow().getWritable(),u=r.__key,d=n.__next;if(null===a?c.__last=u:a.getWritable().__prev=u,c.__size++,n.__next=u,r.__next=d,r.__prev=n.__key,r.__parent=n.__parent,e&&zr(i)){const t=this.getIndexWithinParent();ro(i,c,t+1);const e=c.__key;s&&i.anchor.set(e,t+2,"element"),l&&i.focus.set(e,t+2,"element")}return t}insertBefore(t,e=!0){yo(),He(this,t);const n=this.getWritable(),r=t.getWritable(),o=r.__key;le(r);const i=this.getPreviousSibling(),s=this.getParentOrThrow().getWritable(),l=n.__prev,a=this.getIndexWithinParent();null===i?s.__first=o:i.getWritable().__next=o,s.__size++,n.__prev=o,r.__prev=l,r.__next=n.__key,r.__parent=n.__parent;const c=eo();return e&&zr(c)&&ro(c,this.getParentOrThrow(),a),t}isParentRequired(){return!1}createParentElementNode(){return Vo()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(t,e){yo();const n=this.getPreviousSibling(),r=this.getParentOrThrow();if(null===n)return r.select(0,0);if(Ro(n))return n.select();if(!Lr(n)){const t=n.getIndexWithinParent()+1;return r.select(t,t)}return n.select(t,e)}selectNext(t,e){yo();const n=this.getNextSibling(),r=this.getParentOrThrow();if(null===n)return r.select();if(Ro(n))return n.select(0,0);if(!Lr(n)){const t=n.getIndexWithinParent();return r.select(t,t)}return n.select(t,e)}markDirty(){this.getWritable()}}class ur extends cr{static getType(){return"linebreak"}static clone(t){return new ur(t.__key)}constructor(t){super(t)}getTextContent(){return"\n"}createDOM(){return document.createElement("br")}updateDOM(){return!1}static importDOM(){return{br:t=>function(t){const e=t.parentElement;if(null!==e){const n=e.firstChild;if(n===t||n.nextSibling===t&&gr(n)){const n=e.lastChild;if(n===t||n.previousSibling===t&&gr(n))return!0}}return!1}(t)?null:{conversion:dr,priority:0}}}static importJSON(t){return fr()}exportJSON(){return{type:"linebreak",version:1}}}function dr(t){return{node:fr()}}function fr(){return Je(new ur)}function hr(t){return t instanceof ur}function gr(t){return t.nodeType===at&&/^( |\t|\r?\n)+$/.test(t.textContent||"")}function pr(t,e){return 16&e?"code":128&e?"mark":32&e?"sub":64&e?"sup":null}function _r(t,e){return 1&e?"strong":2&e?"em":"span"}function mr(t,e,n,r,o){const i=r.classList;let s=Fe(o,"base");void 0!==s&&i.add(...s),s=Fe(o,"underlineStrikethrough");let l=!1;const a=e&ht&&e&ft;void 0!==s&&(n&ht&&n&ft?(l=!0,a||i.add(...s)):a&&i.remove(...s));for(const c in Et){const t=Et[c];if(s=Fe(o,c),void 0!==s)if(n&t){if(l&&("underline"===c||"strikethrough"===c)){e&t&&i.remove(...s);continue}e&t&&(!a||"underline"!==c)&&"strikethrough"!==c||i.add(...s)}else e&t&&i.remove(...s)}}function yr(t,e,n){const r=e.firstChild,o=n.isComposing(),i=t+(o?bt:"");if(null==r)e.textContent=i;else{const t=r.nodeValue;if(t!==i)if(o||Q){const[e,n,o]=function(t,e){const n=t.length,r=e.length;let o=0,i=0;for(;o<n&&o<r&&t[o]===e[o];)o++;for(;i+o<n&&i+o<r&&t[n-i-1]===e[r-i-1];)i++;return[o,n-o-i,e.slice(o,r-i)]}(t,i);0!==n&&r.deleteData(e,n),r.insertData(e,o)}else r.nodeValue=i}}function xr(t,e,n,r,o,i){yr(o,t,e);const s=i.theme.text;void 0!==s&&mr(0,0,r,t,s)}function vr(t,e){const n=document.createElement(e);return n.appendChild(t),n}class br extends cr{static getType(){return"text"}static clone(t){return new br(t.__text,t.__key)}constructor(t,e){super(e),this.__text=t,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const t=this.getLatest();return Dt[t.__mode]}getStyle(){return this.getLatest().__style}isToken(){return 1===this.getLatest().__mode}isComposing(){return this.__key===ue()}isSegmented(){return 2===this.getLatest().__mode}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(t){const e=Et[t];return!!(this.getFormat()&e)}isSimpleText(){return"text"===this.__type&&0===this.__mode}getTextContent(){return this.getLatest().__text}getFormatFlags(t,e){return oe(this.getLatest().__format,t,e)}canHaveFormat(){return!0}createDOM(t,e){const n=this.__format,r=pr(0,n),o=_r(0,n),i=null===r?o:r,s=document.createElement(i);let l=s;this.hasFormat("code")&&s.setAttribute("spellcheck","false"),null!==r&&(l=document.createElement(o),s.appendChild(l)),xr(l,this,0,n,this.__text,t);const a=this.__style;return""!==a&&(s.style.cssText=a),s}updateDOM(t,e,n){const r=this.__text,o=t.__format,i=this.__format,s=pr(0,o),l=pr(0,i),a=_r(0,o),c=_r(0,i);if((null===s?a:s)!==(null===l?c:l))return!0;if(s===l&&a!==c){const t=e.firstChild;null==t&&G(48);const o=document.createElement(c);return xr(o,this,0,i,r,n),e.replaceChild(o,t),!1}let u=e;null!==l&&null!==s&&(u=e.firstChild,null==u&&G(49)),yr(r,u,this);const d=n.theme.text;void 0!==d&&o!==i&&mr(0,o,i,u,d);const f=t.__style,h=this.__style;return f!==h&&(e.style.cssText=h),!1}static importDOM(){return{"#text":()=>({conversion:Tr,priority:0}),b:()=>({conversion:Sr,priority:0}),code:()=>({conversion:Or,priority:0}),em:()=>({conversion:Or,priority:0}),i:()=>({conversion:Or,priority:0}),s:()=>({conversion:Or,priority:0}),span:()=>({conversion:Cr,priority:0}),strong:()=>({conversion:Or,priority:0}),sub:()=>({conversion:Or,priority:0}),sup:()=>({conversion:Or,priority:0}),u:()=>({conversion:Or,priority:0})}}static importJSON(t){const e=Pr(t.text);return e.setFormat(t.format),e.setDetail(t.detail),e.setMode(t.mode),e.setStyle(t.style),e}exportDOM(t){let{element:e}=super.exportDOM(t);return null!==e&&tn(e)||G(132),e.style.whiteSpace="pre-wrap",this.hasFormat("bold")&&(e=vr(e,"b")),this.hasFormat("italic")&&(e=vr(e,"i")),this.hasFormat("strikethrough")&&(e=vr(e,"s")),this.hasFormat("underline")&&(e=vr(e,"u")),{element:e}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),type:"text",version:1}}selectionTransform(t,e){}setFormat(t){const e=this.getWritable();return e.__format="string"==typeof t?Et[t]:t,e}setDetail(t){const e=this.getWritable();return e.__detail="string"==typeof t?Ot[t]:t,e}setStyle(t){const e=this.getWritable();return e.__style=t,e}toggleFormat(t){const e=oe(this.getFormat(),t,null);return this.setFormat(e)}toggleDirectionless(){const t=this.getWritable();return t.__detail^=1,t}toggleUnmergeable(){const t=this.getWritable();return t.__detail^=2,t}setMode(t){const e=At[t];if(this.__mode===e)return this;const n=this.getWritable();return n.__mode=e,n}setTextContent(t){if(this.__text===t)return this;const e=this.getWritable();return e.__text=t,e}select(t,e){yo();let n=t,r=e;const o=eo(),i=this.getTextContent(),s=this.__key;if("string"==typeof i){const t=i.length;void 0===n&&(n=t),void 0===r&&(r=t)}else n=0,r=0;if(!zr(o))return Xr(s,n,s,r,"text","text");{const t=ue();t!==o.anchor.key&&t!==o.focus.key||ce(s),o.setTextNodeRange(this,n,this,r)}return o}selectStart(){return this.select(0,0)}selectEnd(){const t=this.getTextContentSize();return this.select(t,t)}spliceText(t,e,n,r){const o=this.getWritable(),i=o.__text,s=n.length;let l=t;l<0&&(l=s+l,l<0&&(l=0));const a=eo();if(r&&zr(a)){const e=t+s;a.setTextNodeRange(o,e,o,e)}const c=i.slice(0,l)+n+i.slice(l+e);return o.__text=c,o}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...t){yo();const e=this.getLatest(),n=e.getTextContent(),r=e.__key,o=ue(),i=new Set(t),s=[],l=n.length;let a="";for(let C=0;C<l;C++)""!==a&&i.has(C)&&(s.push(a),a=""),a+=n[C];""!==a&&s.push(a);const c=s.length;if(0===c)return[];if(s[0]===n)return[e];const u=s[0],d=e.getParentOrThrow();let f;const h=e.getFormat(),g=e.getStyle(),p=e.__detail;let _=!1;e.isSegmented()?(f=Pr(u),f.__format=h,f.__style=g,f.__detail=p,_=!0):(f=e.getWritable(),f.__text=u);const m=eo(),y=[f];let x=u.length;for(let C=1;C<c;C++){const t=s[C],e=t.length,n=Pr(t).getWritable();n.__format=h,n.__style=g,n.__detail=p;const i=n.__key,l=x+e;if(zr(m)){const t=m.anchor,e=m.focus;t.key===r&&"text"===t.type&&t.offset>x&&t.offset<=l&&(t.key=i,t.offset-=x,m.dirty=!0),e.key===r&&"text"===e.type&&e.offset>x&&e.offset<=l&&(e.key=i,e.offset-=x,m.dirty=!0)}o===r&&ce(i),x=l,y.push(n)}!function(t){const e=t.getPreviousSibling(),n=t.getNextSibling();null!==e&&ae(e),null!==n&&ae(n)}(this);const v=d.getWritable(),b=this.getIndexWithinParent();return _?(v.splice(b,0,y),this.remove()):v.splice(b,1,y),zr(m)&&ro(m,d,b,c-1),y}mergeWithSibling(t){const e=t===this.getPreviousSibling();e||t===this.getNextSibling()||G(50);const n=this.__key,r=t.__key,o=this.__text,i=o.length;ue()===r&&ce(n);const s=eo();if(zr(s)){const o=s.anchor,l=s.focus;null!==o&&o.key===r&&(so(o,e,n,t,i),s.dirty=!0),null!==l&&l.key===r&&(so(l,e,n,t,i),s.dirty=!0)}const l=t.__text,a=e?l+o:o+l;this.setTextContent(a);const c=this.getWritable();return t.remove(),c}isTextEntity(){return!1}}function Cr(t){const e=t.style,n=e.fontWeight,r=e.textDecoration.split(" "),o="700"===n||"bold"===n,i=r.includes("line-through"),s="italic"===e.fontStyle,l=r.includes("underline"),a=e.verticalAlign;return{forChild:t=>Lr(t)?(o&&t.toggleFormat("bold"),i&&t.toggleFormat("strikethrough"),s&&t.toggleFormat("italic"),l&&t.toggleFormat("underline"),"sub"===a&&t.toggleFormat("subscript"),"super"===a&&t.toggleFormat("superscript"),t):t,node:null}}function Sr(t){const e="normal"===t.style.fontWeight;return{forChild:t=>(Lr(t)&&!e&&t.toggleFormat("bold"),t),node:null}}const wr=new WeakMap;function kr(t){return"PRE"===t.nodeName||t.nodeType===lt&&void 0!==t.style&&void 0!==t.style.whiteSpace&&t.style.whiteSpace.startsWith("pre")}function Tr(t){const e=t;null===t.parentElement&&G(129);let n=e.textContent||"";if(null!==function(t){let e,n=t.parentNode;const r=[t];for(;null!==n&&void 0===(e=wr.get(n))&&!kr(n);)r.push(n),n=n.parentNode;const o=void 0===e?n:e;for(let i=0;i<r.length;i++)wr.set(r[i],o);return o}(e)){const t=n.split(/(\r?\n|\t)/),e=[],r=t.length;for(let n=0;n<r;n++){const r=t[n];"\n"===r||"\r\n"===r?e.push(fr()):"\t"===r?e.push(Dr()):""!==r&&e.push(Pr(r))}return{node:e}}if(n=n.replace(/\r/g,"").replace(/[ \t\n]+/g," "),""===n)return{node:null};if(" "===n[0]){let t=e,r=!0;for(;null!==t&&null!==(t=Nr(t,!1));){const e=t.textContent||"";if(e.length>0){/[ \t\n]$/.test(e)&&(n=n.slice(1)),r=!1;break}}r&&(n=n.slice(1))}if(" "===n[n.length-1]){let t=e,r=!0;for(;null!==t&&null!==(t=Nr(t,!0));)if((t.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){r=!1;break}r&&(n=n.slice(0,n.length-1))}return""===n?{node:null}:{node:Pr(n)}}function Nr(t,e){let n=t;for(;;){let t;for(;null===(t=e?n.nextSibling:n.previousSibling);){const t=n.parentElement;if(null===t)return null;n=t}if(n=t,n.nodeType===lt){const t=n.style.display;if(""===t&&!en(n)||""!==t&&!t.startsWith("inline"))return null}let r=n;for(;null!==(r=e?n.firstChild:n.lastChild);)n=r;if(n.nodeType===at)return n;if("BR"===n.nodeName)return null}}const Er={code:"code",em:"italic",i:"italic",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function Or(t){const e=Er[t.nodeName.toLowerCase()];return void 0===e?{node:null}:{forChild:t=>(Lr(t)&&!t.hasFormat(e)&&t.toggleFormat(e),t),node:null}}function Pr(t=""){return Je(new br(t))}function Lr(t){return t instanceof br}class Ar extends br{static getType(){return"tab"}static clone(t){const e=new Ar(t.__key);return e.__text=t.__text,e.__format=t.__format,e.__style=t.__style,e}constructor(t){super("\t",t),this.__detail=2}static importDOM(){return null}static importJSON(t){const e=Dr();return e.setFormat(t.format),e.setStyle(t.style),e}exportJSON(){return{...super.exportJSON(),type:"tab",version:1}}setTextContent(t){G(126)}setDetail(t){G(127)}setMode(t){G(128)}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function Dr(){return Je(new Ar)}class Mr{constructor(t,e,n){this._selection=null,this.key=t,this.offset=e,this.type=n}is(t){return this.key===t.key&&this.offset===t.offset&&this.type===t.type}isBefore(t){let e=this.getNode(),n=t.getNode();const r=this.offset,o=t.offset;if(Ro(e)){const t=e.getDescendantByIndex(r);e=null!=t?t:e}if(Ro(n)){const t=n.getDescendantByIndex(o);n=null!=t?t:n}return e===n?r<o:e.isBefore(n)}getNode(){const t=de(this.key);return null===t&&G(20),t}set(t,e,n){const r=this._selection,o=this.key;this.key=t,this.offset=e,this.type=n,mo()||(ue()===o&&ce(t),null!==r&&(r.setCachedNodes(null),r.dirty=!0))}}function Fr(t,e,n){return new Mr(t,e,n)}function Rr(t,e){let n=e.__key,r=t.offset,o="element";if(Lr(e)){o="text";const t=e.getTextContentSize();r>t&&(r=t)}else if(!Ro(e)){const t=e.getNextSibling();if(Lr(t))n=t.__key,r=0,o="text";else{const t=e.getParent();t&&(n=t.__key,r=e.getIndexWithinParent()+1)}}t.set(n,r,o)}function Br(t,e){if(Ro(e)){const n=e.getLastDescendant();Ro(n)||Lr(n)?Rr(t,n):Rr(t,e)}else Rr(t,e)}function Ir(t,e,n,r){t.key=e,t.offset=n,t.type=r}class jr{constructor(t){this._cachedNodes=null,this._nodes=t,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){if(!Wr(t))return!1;const e=this._nodes,n=t._nodes;return e.size===n.size&&Array.from(e).every((t=>n.has(t)))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(t){this.dirty=!0,this._nodes.add(t),this._cachedNodes=null}delete(t){this.dirty=!0,this._nodes.delete(t),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(t){return this._nodes.has(t)}clone(){return new jr(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(t){}insertText(){}insertNodes(t){const e=this.getNodes(),n=e.length,r=e[n-1];let o;if(Lr(r))o=r.select();else{const t=r.getIndexWithinParent()+1;o=r.getParentOrThrow().select(t,t)}o.insertNodes(t);for(let i=0;i<n;i++)e[i].remove()}getNodes(){const t=this._cachedNodes;if(null!==t)return t;const e=this._nodes,n=[];for(const r of e){const t=de(r);null!==t&&n.push(t)}return mo()||(this._cachedNodes=n),n}getTextContent(){const t=this.getNodes();let e="";for(let n=0;n<t.length;n++)e+=t[n].getTextContent();return e}}function zr(t){return t instanceof $r}class $r{constructor(t,e,n,r){this.anchor=t,this.focus=e,t._selection=this,e._selection=this,this._cachedNodes=null,this.format=n,this.style=r,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){return!!zr(t)&&this.anchor.is(t.anchor)&&this.focus.is(t.focus)&&this.format===t.format&&this.style===t.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const t=this._cachedNodes;if(null!==t)return t;const e=this.anchor,n=this.focus,r=e.isBefore(n),o=r?e:n,i=r?n:e;let s=o.getNode(),l=i.getNode();const a=o.offset,c=i.offset;if(Ro(s)){const t=s.getDescendantByIndex(a);s=null!=t?t:s}if(Ro(l)){let t=l.getDescendantByIndex(c);null!==t&&t!==s&&l.getChildAtIndex(c)===t&&(t=t.getPreviousSibling()),l=null!=t?t:l}let u;return u=s.is(l)?Ro(s)&&s.getChildrenSize()>0?[]:[s]:s.getNodesBetween(l),mo()||(this._cachedNodes=u),u}setTextNodeRange(t,e,n,r){Ir(this.anchor,t.__key,e,"text"),Ir(this.focus,n.__key,r,"text"),this._cachedNodes=null,this.dirty=!0}getTextContent(){const t=this.getNodes();if(0===t.length)return"";const e=t[0],n=t[t.length-1],r=this.anchor,o=this.focus,i=r.isBefore(o),[s,l]=Kr(this);let a="",c=!0;for(let u=0;u<t.length;u++){const d=t[u];if(Ro(d)&&!d.isInline())c||(a+="\n"),c=!d.isEmpty();else if(c=!1,Lr(d)){let t=d.getTextContent();d===e?d===n?"element"===r.type&&"element"===o.type&&o.offset!==r.offset||(t=s<l?t.slice(s,l):t.slice(l,s)):t=i?t.slice(s):t.slice(l):d===n&&(t=i?t.slice(0,l):t.slice(0,s)),a+=t}else!Mo(d)&&!hr(d)||d===n&&this.isCollapsed()||(a+=d.getTextContent())}return a}applyDOMRange(t){const e=bo(),n=e.getEditorState()._selection,r=Gr(t.startContainer,t.startOffset,t.endContainer,t.endOffset,e,n);if(null===r)return;const[o,i]=r;Ir(this.anchor,o.key,o.offset,o.type),Ir(this.focus,i.key,i.offset,i.type),this._cachedNodes=null}clone(){const t=this.anchor,e=this.focus;return new $r(Fr(t.key,t.offset,t.type),Fr(e.key,e.offset,e.type),this.format,this.style)}toggleFormat(t){this.format=oe(this.format,t,null),this.dirty=!0}setStyle(t){this.style=t,this.dirty=!0}hasFormat(t){const e=Et[t];return!!(this.format&e)}insertRawText(t){const e=t.split(/(\r?\n|\t)/),n=[],r=e.length;for(let o=0;o<r;o++){const t=e[o];"\n"===t||"\r\n"===t?n.push(fr()):"\t"===t?n.push(Dr()):n.push(Pr(t))}this.insertNodes(n)}insertText(t){const e=this.anchor,n=this.focus,r=this.format,o=this.style;let i=e,s=n;!this.isCollapsed()&&n.isBefore(e)&&(i=n,s=e),"element"===i.type&&function(t,e,n,r){const o=t.getNode(),i=o.getChildAtIndex(t.offset),s=Pr(),l=jo(o)?Vo().append(s):s;s.setFormat(n),s.setStyle(r),null===i?o.append(l):i.insertBefore(l),t.is(e)&&e.set(s.__key,0,"text"),t.set(s.__key,0,"text")}(i,s,r,o);const l=i.offset;let a=s.offset;const c=this.getNodes(),u=c.length;let d=c[0];Lr(d)||G(26);const f=d.getTextContent().length,h=d.getParentOrThrow();let g=c[u-1];if(1===u&&"element"===s.type&&(a=f,s.set(i.key,a,"text")),this.isCollapsed()&&l===f&&(d.isSegmented()||d.isToken()||!d.canInsertTextAfter()||!h.canInsertTextAfter()&&null===d.getNextSibling())){let e=d.getNextSibling();if(Lr(e)&&e.canInsertTextBefore()&&!ee(e)||(e=Pr(),e.setFormat(r),h.canInsertTextAfter()?d.insertAfter(e):h.insertAfter(e)),e.select(0,0),d=e,""!==t)return void this.insertText(t)}else if(this.isCollapsed()&&0===l&&(d.isSegmented()||d.isToken()||!d.canInsertTextBefore()||!h.canInsertTextBefore()&&null===d.getPreviousSibling())){let e=d.getPreviousSibling();if(Lr(e)&&!ee(e)||(e=Pr(),e.setFormat(r),h.canInsertTextBefore()?d.insertBefore(e):h.insertBefore(e)),e.select(),d=e,""!==t)return void this.insertText(t)}else if(d.isSegmented()&&l!==f){const t=Pr(d.getTextContent());t.setFormat(r),d.replace(t),d=t}else if(!this.isCollapsed()&&""!==t){const e=g.getParent();if(!h.canInsertTextBefore()||!h.canInsertTextAfter()||Ro(e)&&(!e.canInsertTextBefore()||!e.canInsertTextAfter()))return this.insertText(""),Hr(this.anchor,this.focus,null),void this.insertText(t)}if(1===u){if(d.isToken()){const e=Pr(t);return e.select(),void d.replace(e)}const e=d.getFormat(),n=d.getStyle();if(l!==a||e===r&&n===o){if(function(t){return t instanceof Ar}(d)){const e=Pr(t);return e.setFormat(r),e.setStyle(o),e.select(),void d.replace(e)}}else{if(""!==d.getTextContent()){const e=Pr(t);if(e.setFormat(r),e.setStyle(o),e.select(),0===l)d.insertBefore(e,!1);else{const[t]=d.splitText(l);t.insertAfter(e,!1)}return void(e.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=t.length))}d.setFormat(r),d.setStyle(o)}const i=a-l;d=d.spliceText(l,i,t,!0),""===d.getTextContent()?d.remove():"text"===this.anchor.type&&(d.isComposing()?this.anchor.offset-=t.length:(this.format=e,this.style=n))}else{const e=new Set([...d.getParentKeys(),...g.getParentKeys()]),n=Ro(d)?d:d.getParentOrThrow();let r=Ro(g)?g:g.getParentOrThrow(),o=g;if(!n.is(r)&&r.isInline())do{o=r,r=r.getParentOrThrow()}while(r.isInline());if("text"===s.type&&(0!==a||""===g.getTextContent())||"element"===s.type&&g.getIndexWithinParent()<a)if(Lr(g)&&!g.isToken()&&a!==g.getTextContentSize()){if(g.isSegmented()){const t=Pr(g.getTextContent());g.replace(t),g=t}jo(s.getNode())||"text"!==s.type||(g=g.spliceText(0,a,"")),e.add(g.__key)}else{const t=g.getParentOrThrow();t.canBeEmpty()||1!==t.getChildrenSize()?g.remove():t.remove()}else e.add(g.__key);const i=r.getChildren(),h=new Set(c),p=n.is(r),_=n.isInline()&&null===d.getNextSibling()?n:d;for(let t=i.length-1;t>=0;t--){const e=i[t];if(e.is(d)||Ro(e)&&e.isParentOf(d))break;e.isAttached()&&(!h.has(e)||e.is(o)?p||_.insertAfter(e,!1):e.remove())}if(!p){let t=r,n=null;for(;null!==t;){const r=t.getChildren(),o=r.length;(0===o||r[o-1].is(n))&&(e.delete(t.__key),n=t),t=t.getParent()}}if(d.isToken())if(l===f)d.select();else{const e=Pr(t);e.select(),d.replace(e)}else d=d.spliceText(l,f-l,t,!0),""===d.getTextContent()?d.remove():d.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=t.length);for(let t=1;t<u;t++){const n=c[t],r=n.__key;e.has(r)||n.remove()}}}removeText(){this.insertText("")}formatText(t){if(this.isCollapsed())return this.toggleFormat(t),void ce(null);const e=this.getNodes(),n=[];for(const m of e)Lr(m)&&n.push(m);const r=n.length;if(0===r)return this.toggleFormat(t),void ce(null);const o=this.anchor,i=this.focus,s=this.isBackward(),l=s?i:o,a=s?o:i;let c=0,u=n[0],d="element"===l.type?0:l.offset;if("text"===l.type&&d===u.getTextContentSize()&&(c=1,u=n[1],d=0),null==u)return;const f=u.getFormatFlags(t,null),h=r-1;let g=n[h];const p="text"===a.type?a.offset:g.getTextContentSize();if(u.is(g)){if(d===p)return;if(0===d&&p===u.getTextContentSize())u.setFormat(f);else{const t=u.splitText(d,p),e=0===d?t[0]:t[1];e.setFormat(f),"text"===l.type&&l.set(e.__key,0,"text"),"text"===a.type&&a.set(e.__key,p-d,"text")}return void(this.format=f)}0!==d&&([,u]=u.splitText(d),d=0),u.setFormat(f);const _=g.getFormatFlags(t,f);p>0&&(p!==g.getTextContentSize()&&([g]=g.splitText(p)),g.setFormat(_));for(let m=c+1;m<h;m++){const e=n[m];if(!e.isToken()){const n=e.getFormatFlags(t,_);e.setFormat(n)}}"text"===l.type&&l.set(u.__key,d,"text"),"text"===a.type&&a.set(g.__key,p,"text"),this.format=f|_}insertNodes(t){if(0===t.length)return;if("root"===this.anchor.key){this.insertParagraph();const e=eo();return zr(e)||G(134),e.insertNodes(t)}const e=on((this.isBackward()?this.focus:this.anchor).getNode(),rn),n=t[t.length-1];if("__language"in e&&Ro(e)){if("__language"in t[0])this.insertText(t[0].getTextContent());else{const r=ao(this);e.splice(r,0,t),n.selectEnd()}return}if(!t.some((t=>(Ro(t)||Mo(t))&&!t.isInline()))){Ro(e)||G(135);const r=ao(this);return e.splice(r,0,t),void n.selectEnd()}const r=function(t){const e=Vo();let n=null;for(let r=0;r<t.length;r++){const o=t[r],i=hr(o);if(i||Mo(o)&&o.isInline()||Ro(o)&&o.isInline()||Lr(o)||o.isParentRequired()){if(null===n&&(n=o.createParentElementNode(),e.append(n),i))continue;null!==n&&n.append(o)}else e.append(o),n=null}return e}(t),o=r.getLastDescendant(),i=r.getChildren(),s=t=>"__value"in t&&"__checked"in t,l=Ro(e)&&e.isEmpty()?null:this.insertParagraph(),a=i[i.length-1];let c=i[0];var u;Ro(u=c)&&rn(u)&&!u.isEmpty()&&Ro(e)&&(!e.isEmpty()||s(e))&&(Ro(e)||G(135),e.append(...c.getChildren()),c=i[1]),c&&function(t,e,n){const r=e.getParentOrThrow().getLastChild();let o=e;const i=[e];for(;o!==r;)o.getNextSibling()||G(140),o=o.getNextSibling(),i.push(o);let s=t;for(const l of i)s=s.insertAfter(l)}(e,c);const d=on(o,rn);l&&Ro(d)&&(s(l)||rn(a))&&(d.append(...l.getChildren()),l.remove()),Ro(e)&&e.isEmpty()&&e.remove(),o.selectEnd();const f=Ro(e)?e.getLastChild():null;hr(f)&&d!==e&&f.remove()}insertParagraph(){if("root"===this.anchor.key){const t=Vo();return _e().splice(this.anchor.offset,0,[t]),t.select(),t}const t=ao(this),e=on(this.anchor.getNode(),rn);Ro(e)||G(136);const n=e.getChildAtIndex(t),r=n?[n,...n.getNextSiblings()]:[],o=e.insertNewAfter(this,!1);return o?(o.append(...r),o.selectStart(),o):null}insertLineBreak(t){const e=fr();if(this.insertNodes([e]),t){const t=e.getParentOrThrow(),n=e.getIndexWithinParent();t.select(n,n)}}extract(){const t=this.getNodes(),e=t.length,n=e-1,r=this.anchor,o=this.focus;let i=t[0],s=t[n];const[l,a]=Kr(this);if(0===e)return[];if(1===e){if(Lr(i)&&!this.isCollapsed()){const t=l>a?a:l,e=l>a?l:a,n=i.splitText(t,e),r=0===t?n[0]:n[1];return null!=r?[r]:[]}return[i]}const c=r.isBefore(o);if(Lr(i)){const e=c?l:a;e===i.getTextContentSize()?t.shift():0!==e&&([,i]=i.splitText(e),t[0]=i)}if(Lr(s)){const e=s.getTextContent().length,r=c?a:l;0===r?t.pop():r!==e&&([s]=s.splitText(r),t[n]=s)}return t}modify(t,e,n){const r=this.focus,o=this.anchor,i="move"===t,s=Ie(r,e);if(Mo(s)&&!s.isIsolated()){if(i&&s.isKeyboardSelectable()){const t=Qr();return t.add(s.__key),void ye(t)}const t=e?s.getPreviousSibling():s.getNextSibling();if(Lr(t)){const n=t.__key,s=e?t.getTextContent().length:0;return r.set(n,s,"text"),void(i&&o.set(n,s,"text"))}{const n=s.getParentOrThrow();let l,a;return Ro(t)?(a=t.__key,l=e?t.getChildrenSize():0):(l=s.getIndexWithinParent(),a=n.__key,e||l++),r.set(a,l,"element"),void(i&&o.set(a,l,"element"))}}const l=bo(),a=Xe(l._window);if(!a)return;const c=l._blockCursorElement,u=l._rootElement;if(null===u||null===c||!Ro(s)||s.isInline()||s.canBeEmpty()||qe(c,l,u),function(t,e,n,r){t.modify(e,n,r)}(a,t,e?"backward":"forward",n),a.rangeCount>0){const t=a.getRangeAt(0),n=this.anchor.getNode(),r=jo(n)?n:function(t){let e=t.getParentOrThrow();for(;null!==e;){if(Ve(e))return e;e=e.getParentOrThrow()}return e}(n);if(this.applyDOMRange(t),this.dirty=!0,!i){const n=this.getNodes(),o=[];let i=!1;for(let t=0;t<n.length;t++){const e=n[t];Ke(e,r)?o.push(e):i=!0}if(i&&o.length>0)if(e){const t=o[0];Ro(t)?t.selectStart():t.getParentOrThrow().selectStart()}else{const t=o[o.length-1];Ro(t)?t.selectEnd():t.getParentOrThrow().selectEnd()}a.anchorNode===t.startContainer&&a.anchorOffset===t.startOffset||function(t){const e=t.focus,n=t.anchor,r=n.key,o=n.offset,i=n.type;Ir(n,e.key,e.offset,e.type),Ir(e,r,o,i),t._cachedNodes=null}(this)}}}forwardDeletion(t,e,n){if(!n&&("element"===t.type&&Ro(e)&&t.offset===e.getChildrenSize()||"text"===t.type&&t.offset===e.getTextContentSize())){const t=e.getParent(),n=e.getNextSibling()||(null===t?null:t.getNextSibling());if(Ro(n)&&n.isShadowRoot())return!0}return!1}deleteCharacter(t){const e=this.isCollapsed();if(this.isCollapsed()){const e=this.anchor;let n=e.getNode();if(this.forwardDeletion(e,n,t))return;const r=this.focus,i=Ie(r,t);if(Mo(i)&&!i.isIsolated()){if(i.isKeyboardSelectable()&&Ro(n)&&0===n.getChildrenSize()){n.remove();const t=Qr();t.add(i.__key),ye(t)}else i.remove(),bo().dispatchCommand(o,void 0);return}if(!t&&Ro(i)&&Ro(n)&&n.isEmpty())return n.remove(),void i.selectStart();if(this.modify("extend",t,"character"),this.isCollapsed()){if(t&&0===e.offset&&("element"===e.type?e.getNode():e.getNode().getParentOrThrow()).collapseAtStart(this))return}else{const o="text"===r.type?r.getNode():null;if(n="text"===e.type?e.getNode():null,null!==o&&o.isSegmented()){const e=r.offset,i=o.getTextContentSize();if(o.is(n)||t&&e!==i||!t&&0!==e)return void Ur(o,t,e)}else if(null!==n&&n.isSegmented()){const r=e.offset,i=n.getTextContentSize();if(n.is(o)||t&&0!==r||!t&&r!==i)return void Ur(n,t,r)}!function(t,e){const n=t.anchor,r=t.focus,o=n.getNode();if(o===r.getNode()&&"text"===n.type&&"text"===r.type){const t=n.offset,i=r.offset,s=t<i,l=s?t:i,a=s?i:t,c=a-1;l!==c&&(be(o.getTextContent().slice(l,a))||(e?r.offset=c:n.offset=c))}}(this,t)}}if(this.removeText(),t&&!e&&this.isCollapsed()&&"element"===this.anchor.type&&0===this.anchor.offset){const t=this.anchor.getNode();t.isEmpty()&&jo(t.getParent())&&0===t.getIndexWithinParent()&&t.collapseAtStart(this)}}deleteLine(t){this.isCollapsed()&&("text"===this.anchor.type&&this.modify("extend",t,"lineboundary"),0===(t?this.focus:this.anchor).offset&&this.modify("extend",t,"character")),this.removeText()}deleteWord(t){if(this.isCollapsed()){const e=this.anchor,n=e.getNode();if(this.forwardDeletion(e,n,t))return;this.modify("extend",t,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function Wr(t){return t instanceof jr}function Zr(t){const e=t.offset;if("text"===t.type)return e;const n=t.getNode();return e===n.getChildrenSize()?n.getTextContent().length:0}function Kr(t){const e=t.getStartEndPoints();if(null===e)return[0,0];const[n,r]=e;return"element"===n.type&&"element"===r.type&&n.key===r.key&&n.offset===r.offset?[0,0]:[Zr(n),Zr(r)]}function Ur(t,e,n){const r=t,o=r.getTextContent().split(/(?=\s)/g),i=o.length;let s=0,l=0;for(let c=0;c<i;c++){const t=c===i-1;if(l=s,s+=o[c].length,e&&s===n||s>n||t){o.splice(c,1),t&&(l=void 0);break}}const a=o.join("").trim();""===a?r.remove():(r.setTextContent(a),r.select(l,l))}function Vr(t,e,n,r){let o,i=e;if(t.nodeType===lt){let s=!1;const l=t.childNodes,a=l.length,c=r._blockCursorElement;i===a&&(s=!0,i=a-1);let u=l[i],d=!1;if(u===c)u=l[i+1],d=!0;else if(null!==c){const n=c.parentNode;t===n&&e>Array.prototype.indexOf.call(n.children,c)&&i--}if(o=xe(u),Lr(o))i=ve(o,s);else{let r=xe(t);if(null===r)return null;if(Ro(r)){i=Math.min(r.getChildrenSize(),i);let t=r.getChildAtIndex(i);if(Ro(t)&&function(t,e,n){const r=t.getParent();return null===n||null===r||!r.canBeEmpty()||r!==n.getNode()}(t,0,n)){const e=s?t.getLastDescendant():t.getFirstDescendant();null===e?r=t:(t=e,r=Ro(t)?t:t.getParentOrThrow()),i=0}Lr(t)?(o=t,r=null,i=ve(t,s)):t!==r&&s&&!d&&i++}else{const n=r.getIndexWithinParent();i=0===e&&Mo(r)&&xe(t)===r?n:n+1,r=r.getParentOrThrow()}if(Ro(r))return Fr(r.__key,i,"element")}}else o=xe(t);return Lr(o)?Fr(o.__key,i,"text"):null}function Jr(t,e,n){const r=t.offset,o=t.getNode();if(0===r){const r=o.getPreviousSibling(),i=o.getParent();if(e){if((n||!e)&&null===r&&Ro(i)&&i.isInline()){const e=i.getPreviousSibling();Lr(e)&&(t.key=e.__key,t.offset=e.getTextContent().length)}}else Ro(r)&&!n&&r.isInline()?(t.key=r.__key,t.offset=r.getChildrenSize(),t.type="element"):Lr(r)&&(t.key=r.__key,t.offset=r.getTextContent().length)}else if(r===o.getTextContent().length){const r=o.getNextSibling(),i=o.getParent();if(e&&Ro(r)&&r.isInline())t.key=r.__key,t.offset=0,t.type="element";else if((n||e)&&null===r&&Ro(i)&&i.isInline()&&!i.canInsertTextAfter()){const e=i.getNextSibling();Lr(e)&&(t.key=e.__key,t.offset=0)}}}function Hr(t,e,n){if("text"===t.type&&"text"===e.type){const r=t.isBefore(e),o=t.is(e);Jr(t,r,o),Jr(e,!r,o),o&&(e.key=t.key,e.offset=t.offset,e.type=t.type);const i=bo();if(i.isComposing()&&i._compositionKey!==t.key&&zr(n)){const r=n.anchor,o=n.focus;Ir(t,r.key,r.offset,r.type),Ir(e,o.key,o.offset,o.type)}}}function Gr(t,e,n,r,o,i){if(null===t||null===n||!Qt(o,t,n))return null;const s=Vr(t,e,zr(i)?i.anchor:null,o);if(null===s)return null;const l=Vr(n,r,zr(i)?i.focus:null,o);if(null===l)return null;if("element"===s.type&&"element"===l.type){const e=xe(t),r=xe(n);if(Mo(e)&&Mo(r))return null}return Hr(s,l,i),[s,l]}function qr(t){return Ro(t)&&!t.isInline()}function Xr(t,e,n,r,o,i){const s=vo(),l=new $r(Fr(t,e,o),Fr(n,r,i),0,"");return l.dirty=!0,s._selection=l,l}function Yr(){const t=Fr("root",0,"element"),e=Fr("root",0,"element");return new $r(t,e,0,"")}function Qr(){return new jr(new Set)}function to(t,e,n,r){const o=n._window;if(null===o)return null;const i=r||o.event,s=i?i.type:void 0,l="selectionchange"===s,a=!Rt&&(l||"beforeinput"===s||"compositionstart"===s||"compositionend"===s||"click"===s&&i&&3===i.detail||"drop"===s||void 0===s);let c,u,d,f;if(zr(t)&&!a)return t.clone();if(null===e)return null;if(c=e.anchorNode,u=e.focusNode,d=e.anchorOffset,f=e.focusOffset,l&&zr(t)&&!Qt(n,c,u))return t.clone();const h=Gr(c,d,u,f,n,t);if(null===h)return null;const[g,p]=h;return new $r(g,p,zr(t)?t.format:0,zr(t)?t.style:"")}function eo(){return vo()._selection}function no(){return bo()._editorState._selection}function ro(t,e,n,r=1){const o=t.anchor,i=t.focus,s=o.getNode(),l=i.getNode();if(!e.is(s)&&!e.is(l))return;const a=e.__key;if(t.isCollapsed()){const e=o.offset;if(n<=e&&r>0||n<e&&r<0){const n=Math.max(0,e+r);o.set(a,n,"element"),i.set(a,n,"element"),oo(t)}}else{const s=t.isBackward(),l=s?i:o,c=l.getNode(),u=s?o:i,d=u.getNode();if(e.is(c)){const t=l.offset;(n<=t&&r>0||n<t&&r<0)&&l.set(a,Math.max(0,t+r),"element")}if(e.is(d)){const t=u.offset;(n<=t&&r>0||n<t&&r<0)&&u.set(a,Math.max(0,t+r),"element")}}oo(t)}function oo(t){const e=t.anchor,n=e.offset,r=t.focus,o=r.offset,i=e.getNode(),s=r.getNode();if(t.isCollapsed()){if(!Ro(i))return;const t=i.getChildrenSize(),o=n>=t,s=o?i.getChildAtIndex(t-1):i.getChildAtIndex(n);if(Lr(s)){let t=0;o&&(t=s.getTextContentSize()),e.set(s.__key,t,"text"),r.set(s.__key,t,"text")}}else{if(Ro(i)){const t=i.getChildrenSize(),r=n>=t,o=r?i.getChildAtIndex(t-1):i.getChildAtIndex(n);if(Lr(o)){let t=0;r&&(t=o.getTextContentSize()),e.set(o.__key,t,"text")}}if(Ro(s)){const t=s.getChildrenSize(),e=o>=t,n=e?s.getChildAtIndex(t-1):s.getChildAtIndex(o);if(Lr(n)){let t=0;e&&(t=n.getTextContentSize()),r.set(n.__key,t,"text")}}}}function io(t,e,n,r,o){let i=null,s=0,l=null;null!==r?(i=r.__key,Lr(r)?(s=r.getTextContentSize(),l="text"):Ro(r)&&(s=r.getChildrenSize(),l="element")):null!==o&&(i=o.__key,Lr(o)?l="text":Ro(o)&&(l="element")),null!==i&&null!==l?t.set(i,s,l):(s=e.getIndexWithinParent(),-1===s&&(s=n.getChildrenSize()),t.set(n.__key,s,"element"))}function so(t,e,n,r,o){"text"===t.type?(t.key=n,e||(t.offset+=o)):t.offset>r.getIndexWithinParent()&&(t.offset-=1)}function lo(t){let e=eo()||no();null===e&&(e=_e().selectEnd()),e.insertNodes(t)}function ao(t){let e=t;t.isCollapsed()||e.removeText();const n=eo();zr(n)&&(e=n),zr(e)||G(161);const r=e.anchor;let o=r.getNode(),i=r.offset;for(;!rn(o);)[o,i]=co(o,i);return i}function co(t,e){const n=t.getParent();if(!n){const t=Vo();return _e().append(t),t.select(),[_e(),0]}if(Lr(t)){const r=t.splitText(e);if(0===r.length)return[n,t.getIndexWithinParent()];const o=0===e?0:1;return[n,r[0].getIndexWithinParent()+o]}if(!Ro(t)||0===e)return[n,t.getIndexWithinParent()];const r=t.getChildAtIndex(e);if(r){const n=new $r(Fr(t.__key,e,"element"),Fr(t.__key,e,"element"),0,""),o=t.insertNewAfter(n);o&&o.append(r,...r.getNextSiblings())}return[n,t.getIndexWithinParent()+1]}let uo=null,fo=null,ho=!1,go=!1,po=0;const _o={characterData:!0,childList:!0,subtree:!0};function mo(){return ho||null!==uo&&uo._readOnly}function yo(){ho&&G(13)}function xo(){po>99&&G(14)}function vo(){return null===uo&&G(15),uo}function bo(){return null===fo&&G(16),fo}function Co(t,e,n){const r=e.__type,o=function(t,e){const n=t._nodes.get(e);return void 0===n&&G(30,e),n}(t,r);let i=n.get(r);void 0===i&&(i=Array.from(o.transforms),n.set(r,i));const s=i.length;for(let l=0;l<s&&(i[l](e),e.isAttached());l++);}function So(t,e){return void 0!==t&&t.__key!==e&&t.isAttached()}function wo(t){return ko(t,bo()._nodes)}function ko(t,e){const n=t.type,r=e.get(n);void 0===r&&G(17,n);const o=r.klass;t.type!==o.getType()&&G(18,o.name);const i=o.importJSON(t),s=t.children;if(Ro(i)&&Array.isArray(s))for(let l=0;l<s.length;l++){const t=ko(s[l],e);i.append(t)}return i}function To(t,e){const n=uo,r=ho,o=fo;uo=t,ho=!0,fo=null;try{return e()}finally{uo=n,ho=r,fo=o}}function No(t,e){const n=t._pendingEditorState,r=t._rootElement,i=t._headless||null===r;if(null===n)return;const s=t._editorState,l=s._selection,a=n._selection,c=t._dirtyType!==ct,u=uo,d=ho,f=fo,h=t._updating,g=t._observer;let p=null;if(t._pendingEditorState=null,t._editorState=n,!i&&c&&null!==g){fo=t,uo=n,ho=!1,t._updating=!0;try{const e=t._dirtyType,r=t._dirtyElements,o=t._dirtyLeaves;g.disconnect(),p=function(t,e,n,r,o,i){mn="",vn="",yn="",bn=r===dt,Sn=null,an=n,ln=n._config,cn=n._nodes,un=an._listeners.mutation,dn=o,fn=i,hn=t._nodeMap,gn=e._nodeMap,Cn=e._readOnly,pn=new Map(n._keyToDOMMap);const s=new Map;return _n=s,Rn("root",null),an=void 0,cn=void 0,dn=void 0,fn=void 0,hn=void 0,gn=void 0,ln=void 0,pn=void 0,_n=void 0,s}(s,n,t,e,r,o)}catch(o){if(o instanceof Error&&t._onError(o),go)throw o;return Yo(t,null,r,n),Kt(t),t._dirtyType=dt,go=!0,No(t,s),void(go=!1)}finally{g.observe(r,_o),t._updating=h,uo=u,ho=d,fo=f}}n._readOnly||(n._readOnly=!0);const _=t._dirtyLeaves,m=t._dirtyElements,y=t._normalizedNodes,x=t._updateTags,v=t._deferred;c&&(t._dirtyType=ct,t._cloneNotNeeded.clear(),t._dirtyLeaves=new Set,t._dirtyElements=new Map,t._normalizedNodes=new Set,t._updateTags=new Set),function(t,e){const n=t._decorators;let r=t._pendingDecorators||n;const o=e._nodeMap;let i;for(i in r)o.has(i)||(r===n&&(r=ge(t)),delete r[i])}(t,n);const b=i?null:Xe(t._window);if(t._editable&&null!==b&&(c||null===a||a.dirty)){fo=t,uo=n;try{if(null!==g&&g.disconnect(),c||null===a||a.dirty){const e=t._blockCursorElement;null!==e&&qe(e,t,r),function(t,e,n,r,o,i,s){const l=r.anchorNode,a=r.focusNode,c=r.anchorOffset,u=r.focusOffset,d=document.activeElement;if(o.has("collaboration")&&d!==i||null!==d&&Yt(d))return;if(!zr(e))return void(null!==t&&Qt(n,l,a)&&r.removeAllRanges());const f=e.anchor,h=e.focus,g=f.key,p=h.key,_=We(n,g),m=We(n,p),y=f.offset,x=h.offset,v=e.format,b=e.style,C=e.isCollapsed();let S=_,w=m,k=!1;if("text"===f.type){S=re(_);const t=f.getNode();k=t.getFormat()!==v||t.getStyle()!==b}else zr(t)&&"text"===t.anchor.type&&(k=!0);var T,N,E,O,P;if("text"===h.type&&(w=re(m)),null!==S&&null!==w&&(C&&(null===t||k||zr(t)&&(t.format!==v||t.style!==b))&&(T=v,N=b,E=y,O=g,P=performance.now(),Xn=[T,N,E,O,P]),c!==y||u!==x||l!==S||a!==w||"Range"===r.type&&C||(null!==d&&i.contains(d)||i.focus({preventScroll:!0}),"element"===f.type))){try{r.setBaseAndExtent(S,y,w,x)}catch(t){}if(!o.has("skip-scroll-into-view")&&e.isCollapsed()&&null!==i&&i===document.activeElement){const t=e instanceof $r&&"element"===e.anchor.type?S.childNodes[y]||null:r.rangeCount>0?r.getRangeAt(0):null;if(null!==t){let e;if(t instanceof Text){const n=document.createRange();n.selectNode(t),e=n.getBoundingClientRect()}else e=t.getBoundingClientRect();!function(t,e,n){const r=n.ownerDocument,o=r.defaultView;if(null===o)return;let{top:i,bottom:s}=e,l=0,a=0,c=n;for(;null!==c;){const e=c===r.body;if(e)l=0,a=Ue(t).innerHeight;else{const t=c.getBoundingClientRect();l=t.top,a=t.bottom}let n=0;if(i<l?n=-(l-i):s>a&&(n=s-a),0!==n)if(e)o.scrollBy(0,n);else{const t=c.scrollTop;c.scrollTop+=n;const e=c.scrollTop-t;i-=e,s-=e}if(e)break;c=Ze(c)}}(n,e,i)}}Jn=!0}}(l,a,t,b,x,r)}(function(t,e,n){let r=t._blockCursorElement;if(zr(n)&&n.isCollapsed()&&"element"===n.anchor.type&&e.contains(document.activeElement)){const o=n.anchor,i=o.getNode(),s=o.offset;let l=!1,a=null;if(s===i.getChildrenSize())Ge(i.getChildAtIndex(s-1))&&(l=!0);else{const e=i.getChildAtIndex(s);if(Ge(e)){const n=e.getPreviousSibling();(null===n||Ge(n))&&(l=!0,a=t.getElementByKey(e.__key))}}if(l){const n=t.getElementByKey(i.__key);return null===r&&(t._blockCursorElement=r=function(t){const e=t.theme,n=document.createElement("div");n.contentEditable="false",n.setAttribute("data-lexical-cursor","true");let r=e.blockCursor;if(void 0!==r){if("string"==typeof r){const t=Mt(r);r=e.blockCursor=t}void 0!==r&&n.classList.add(...r)}return n}(t._config)),e.style.caretColor="transparent",void(null===a?n.appendChild(r):n.insertBefore(r,a))}}null!==r&&qe(r,t,e)})(t,r,a),null!==g&&g.observe(r,_o)}finally{fo=f,uo=u}}null!==p&&function(t,e,n,r,o){const i=Array.from(t._listeners.mutation),s=i.length;for(let l=0;l<s;l++){const[t,s]=i[l],a=e.get(s);void 0!==a&&t(a,{dirtyLeaves:r,prevEditorState:o,updateTags:n})}}(t,p,x,_,s),zr(a)||null===a||null!==l&&l.is(a)||t.dispatchCommand(o,void 0);const C=t._pendingDecorators;null!==C&&(t._decorators=C,t._pendingDecorators=null,Eo("decorator",t,!0,C)),function(t,e,n){const r=pe(e),o=pe(n);r!==o&&Eo("textcontent",t,!0,o)}(t,e||s,n),Eo("update",t,!0,{dirtyElements:m,dirtyLeaves:_,editorState:n,normalizedNodes:y,prevEditorState:e||s,tags:x}),function(t,e){if(t._deferred=[],0!==e.length){const n=t._updating;t._updating=!0;try{for(let t=0;t<e.length;t++)e[t]()}finally{t._updating=n}}}(t,v),function(t){const e=t._updates;if(0!==e.length){const n=e.shift();if(n){const[e,r]=n;Lo(t,e,r)}}}(t)}function Eo(t,e,n,...r){const o=e._updating;e._updating=n;try{const n=Array.from(e._listeners[t]);for(let t=0;t<n.length;t++)n[t].apply(null,r)}finally{e._updating=o}}function Oo(t,e,n){if(!1===t._updating||fo!==t){let r=!1;return t.update((()=>{r=Oo(t,e,n)})),r}const r=Ce(t);for(let o=4;o>=0;o--)for(let i=0;i<r.length;i++){const s=r[i]._commands.get(e);if(void 0!==s){const e=s[o];if(void 0!==e){const r=Array.from(e),o=r.length;for(let e=0;e<o;e++)if(!0===r[e](n,t))return!0}}}return!1}function Po(t,e){const n=t._updates;let r=e||!1;for(;0!==n.length;){const e=n.shift();if(e){const[n,o]=e;let i,s;void 0!==o&&(i=o.onUpdate,s=o.tag,o.skipTransforms&&(r=!0),i&&t._deferred.push(i),s&&t._updateTags.add(s)),n()}}return r}function Lo(t,e,n){const r=t._updateTags;let o,i,s=!1,l=!1;void 0!==n&&(o=n.onUpdate,i=n.tag,null!=i&&r.add(i),s=n.skipTransforms||!1,l=n.discrete||!1),o&&t._deferred.push(o);const a=t._editorState;let c=t._pendingEditorState,u=!1;(null===c||c._readOnly)&&(c=t._pendingEditorState=new Wo(new Map((c||a)._nodeMap)),u=!0),c._flushSync=l;const d=uo,f=ho,h=fo,g=t._updating;uo=c,ho=!1,t._updating=!0,fo=t;try{u&&(t._headless?null!==a._selection&&(c._selection=a._selection.clone()):c._selection=function(t){const e=t.getEditorState()._selection,n=Xe(t._window);return zr(e)||null==e?to(e,n,t,null):e.clone()}(t));const n=t._compositionKey;e(),s=Po(t,s),function(t,e){const n=e.getEditorState()._selection,r=t._selection;if(zr(r)){const t=r.anchor,e=r.focus;let o;if("text"===t.type&&(o=t.getNode(),o.selectionTransform(n,r)),"text"===e.type){const t=e.getNode();o!==t&&t.selectionTransform(n,r)}}}(c,t),t._dirtyType!==ct&&(s?function(t,e){const n=e._dirtyLeaves,r=t._nodeMap;for(const o of n){const t=r.get(o);Lr(t)&&t.isAttached()&&t.isSimpleText()&&!t.isUnmergeable()&&Jt(t)}}(c,t):function(t,e){const n=e._dirtyLeaves,r=e._dirtyElements,o=t._nodeMap,i=ue(),s=new Map;let l=n,a=l.size,c=r,u=c.size;for(;a>0||u>0;){if(a>0){e._dirtyLeaves=new Set;for(const t of l){const r=o.get(t);Lr(r)&&r.isAttached()&&r.isSimpleText()&&!r.isUnmergeable()&&Jt(r),void 0!==r&&So(r,i)&&Co(e,r,s),n.add(t)}if(l=e._dirtyLeaves,a=l.size,a>0){po++;continue}}e._dirtyLeaves=new Set,e._dirtyElements=new Map;for(const t of c){const n=t[0],l=t[1];if("root"!==n&&!l)continue;const a=o.get(n);void 0!==a&&So(a,i)&&Co(e,a,s),r.set(n,l)}l=e._dirtyLeaves,a=l.size,c=e._dirtyElements,u=c.size,po++}e._dirtyLeaves=n,e._dirtyElements=r}(c,t),Po(t),function(t,e,n,r){const o=t._nodeMap,i=e._nodeMap,s=[];for(const[l]of r){const t=i.get(l);void 0!==t&&(t.isAttached()||(Ro(t)&&sn(t,l,o,i,s,r),o.has(l)||r.delete(l),s.push(l)))}for(const l of s)i.delete(l);for(const l of n){const t=i.get(l);void 0===t||t.isAttached()||(o.has(l)||n.delete(l),i.delete(l))}}(a,c,t._dirtyLeaves,t._dirtyElements)),n!==t._compositionKey&&(c._flushSync=!0);const r=c._selection;if(zr(r)){const t=c._nodeMap,e=r.anchor.key,n=r.focus.key;void 0!==t.get(e)&&void 0!==t.get(n)||G(19)}else Wr(r)&&0===r._nodes.size&&(c._selection=null)}catch(e){return e instanceof Error&&t._onError(e),t._pendingEditorState=a,t._dirtyType=dt,t._cloneNotNeeded.clear(),t._dirtyLeaves=new Set,t._dirtyElements.clear(),void No(t)}finally{uo=d,ho=f,fo=h,t._updating=g,po=0}const p=t._dirtyType!==ct||function(t,e){const n=e.getEditorState()._selection,r=t._selection;if(null!==r){if(r.dirty||!r.is(n))return!0}else if(null!==n)return!0;return!1}(c,t);p?c._flushSync?(c._flushSync=!1,No(t)):u&&Xt((()=>{No(t)})):(c._flushSync=!1,u&&(r.clear(),t._deferred=[],t._pendingEditorState=null))}function Ao(t,e,n){t._updating?t._updates.push([e,n]):Lo(t,e,n)}class Do extends cr{constructor(t){super(t)}decorate(t,e){G(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function Mo(t){return t instanceof Do}class Fo extends cr{constructor(t){super(t),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__indent=0,this.__dir=null}getFormat(){return this.getLatest().__format}getFormatType(){const t=this.getFormat();return Lt[t]||""}getIndent(){return this.getLatest().__indent}getChildren(){const t=[];let e=this.getFirstChild();for(;null!==e;)t.push(e),e=e.getNextSibling();return t}getChildrenKeys(){const t=[];let e=this.getFirstChild();for(;null!==e;)t.push(e.__key),e=e.getNextSibling();return t}getChildrenSize(){return this.getLatest().__size}isEmpty(){return 0===this.getChildrenSize()}isDirty(){const t=bo()._dirtyElements;return null!==t&&t.has(this.__key)}isLastChild(){const t=this.getLatest(),e=this.getParentOrThrow().getLastChild();return null!==e&&e.is(t)}getAllTextNodes(){const t=[];let e=this.getFirstChild();for(;null!==e;){if(Lr(e)&&t.push(e),Ro(e)){const n=e.getAllTextNodes();t.push(...n)}e=e.getNextSibling()}return t}getFirstDescendant(){let t=this.getFirstChild();for(;Ro(t);){const e=t.getFirstChild();if(null===e)break;t=e}return t}getLastDescendant(){let t=this.getLastChild();for(;Ro(t);){const e=t.getLastChild();if(null===e)break;t=e}return t}getDescendantByIndex(t){const e=this.getChildren(),n=e.length;if(t>=n){const t=e[n-1];return Ro(t)&&t.getLastDescendant()||t||null}const r=e[t];return Ro(r)&&r.getFirstDescendant()||r||null}getFirstChild(){const t=this.getLatest().__first;return null===t?null:de(t)}getFirstChildOrThrow(){const t=this.getFirstChild();return null===t&&G(45,this.__key),t}getLastChild(){const t=this.getLatest().__last;return null===t?null:de(t)}getLastChildOrThrow(){const t=this.getLastChild();return null===t&&G(96,this.__key),t}getChildAtIndex(t){const e=this.getChildrenSize();let n,r;if(t<e/2){for(n=this.getFirstChild(),r=0;null!==n&&r<=t;){if(r===t)return n;n=n.getNextSibling(),r++}return null}for(n=this.getLastChild(),r=e-1;null!==n&&r>=t;){if(r===t)return n;n=n.getPreviousSibling(),r--}return null}getTextContent(){let t="";const e=this.getChildren(),n=e.length;for(let r=0;r<n;r++){const o=e[r];t+=o.getTextContent(),Ro(o)&&r!==n-1&&!o.isInline()&&(t+=Ct)}return t}getTextContentSize(){let t=0;const e=this.getChildren(),n=e.length;for(let r=0;r<n;r++){const o=e[r];t+=o.getTextContentSize(),Ro(o)&&r!==n-1&&!o.isInline()&&(t+=Ct.length)}return t}getDirection(){return this.getLatest().__dir}hasFormat(t){if(""!==t){const e=Pt[t];return!!(this.getFormat()&e)}return!1}select(t,e){yo();const n=eo();let r=t,o=e;const i=this.getChildrenSize();if(!this.canBeEmpty())if(0===t&&0===e){const t=this.getFirstChild();if(Lr(t)||Ro(t))return t.select(0,0)}else if(!(void 0!==t&&t!==i||void 0!==e&&e!==i)){const t=this.getLastChild();if(Lr(t)||Ro(t))return t.select()}void 0===r&&(r=i),void 0===o&&(o=i);const s=this.__key;return zr(n)?(n.anchor.set(s,r,"element"),n.focus.set(s,o,"element"),n.dirty=!0,n):Xr(s,r,s,o,"element","element")}selectStart(){const t=this.getFirstDescendant();return t?t.selectStart():this.select()}selectEnd(){const t=this.getLastDescendant();return t?t.selectEnd():this.select()}clear(){const t=this.getWritable();return this.getChildren().forEach((t=>t.remove())),t}append(...t){return this.splice(this.getChildrenSize(),0,t)}setDirection(t){const e=this.getWritable();return e.__dir=t,e}setFormat(t){return this.getWritable().__format=""!==t?Pt[t]:0,this}setIndent(t){return this.getWritable().__indent=t,this}splice(t,e,n){const r=n.length,o=this.getChildrenSize(),i=this.getWritable(),s=i.__key,l=[],a=[],c=this.getChildAtIndex(t+e);let u=null,d=o-e+r;if(0!==t)if(t===o)u=this.getLastChild();else{const e=this.getChildAtIndex(t);null!==e&&(u=e.getPreviousSibling())}if(e>0){let t=null===u?this.getFirstChild():u.getNextSibling();for(let n=0;n<e;n++){null===t&&G(100);const e=t.getNextSibling(),n=t.__key;le(t.getWritable()),a.push(n),t=e}}let f=u;for(let h=0;h<r;h++){const t=n[h];null!==f&&t.is(f)&&(u=f=f.getPreviousSibling());const e=t.getWritable();e.__parent===s&&d--,le(e);const r=t.__key;if(null===f)i.__first=r,e.__prev=null;else{const t=f.getWritable();t.__next=r,e.__prev=t.__key}t.__key===s&&G(76),e.__parent=s,l.push(r),f=t}if(t+e===o)null!==f&&(f.getWritable().__next=null,i.__last=f.__key);else if(null!==c){const t=c.getWritable();if(null!==f){const e=f.getWritable();t.__prev=f.__key,e.__next=c.__key}else t.__prev=null}if(i.__size=d,a.length){const t=eo();if(zr(t)){const e=new Set(a),n=new Set(l),{anchor:r,focus:o}=t;Bo(r,e,n)&&io(r,r.getNode(),this,u,c),Bo(o,e,n)&&io(o,o.getNode(),this,u,c),0!==d||this.canBeEmpty()||Ve(this)||this.remove()}}return i}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"element",version:1}}insertNewAfter(t,e){return null}canIndent(){return!0}collapseAtStart(t){return!1}excludeFromCopy(t){return!1}canReplaceWith(t){return!0}canInsertAfter(t){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(t){return!1}extractWithChild(t,e,n){return!1}}function Ro(t){return t instanceof Fo}function Bo(t,e,n){let r=t.getNode();for(;r;){const t=r.__key;if(e.has(t)&&!n.has(t))return!0;r=r.getParent()}return!1}class Io extends Fo{static getType(){return"root"}static clone(){return new Io}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){G(51)}getTextContent(){const t=this.__cachedText;return!mo()&&bo()._dirtyType!==ct||null===t?super.getTextContent():t}remove(){G(52)}replace(t){G(53)}insertBefore(t){G(54)}insertAfter(t){G(55)}updateDOM(t,e){return!1}append(...t){for(let e=0;e<t.length;e++){const n=t[e];Ro(n)||Mo(n)||G(56)}return super.append(...t)}static importJSON(t){const e=_e();return e.setFormat(t.format),e.setIndent(t.indent),e.setDirection(t.direction),e}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"root",version:1}}collapseAtStart(){return!0}}function jo(t){return t instanceof Io}function zo(){return new Wo(new Map([["root",new Io]]))}function $o(t){const e=t.exportJSON(),n=t.constructor;if(e.type!==n.getType()&&G(130,n.name),Ro(t)){const r=e.children;Array.isArray(r)||G(59,n.name);const o=t.getChildren();for(let t=0;t<o.length;t++){const e=$o(o[t]);r.push(e)}}return e}class Wo{constructor(t,e){this._nodeMap=t,this._selection=e||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return 1===this._nodeMap.size&&null===this._selection}read(t){return To(this,t)}clone(t){const e=new Wo(this._nodeMap,void 0===t?this._selection:t);return e._readOnly=!0,e}toJSON(){return To(this,(()=>({root:$o(_e())})))}}class Zo extends Fo{static getType(){return"artificial"}createDOM(t){return document.createElement("div")}}class Ko extends Fo{constructor(t){super(t),this.__textFormat=0}static getType(){return"paragraph"}getTextFormat(){return this.getLatest().__textFormat}setTextFormat(t){const e=this.getWritable();return e.__textFormat=t,e}hasTextFormat(t){const e=Et[t];return!!(this.getTextFormat()&e)}static clone(t){return new Ko(t.__key)}createDOM(t){const e=document.createElement("p"),n=Fe(t.theme,"paragraph");return void 0!==n&&e.classList.add(...n),e}updateDOM(t,e,n){return!1}static importDOM(){return{p:t=>({conversion:Uo,priority:0})}}exportDOM(t){const{element:e}=super.exportDOM(t);if(e&&tn(e)){this.isEmpty()&&e.append(document.createElement("br"));const t=this.getFormatType();e.style.textAlign=t;const n=this.getDirection();n&&(e.dir=n);const r=this.getIndent();r>0&&(e.style.textIndent=20*r+"px")}return{element:e}}static importJSON(t){const e=Vo();return e.setFormat(t.format),e.setIndent(t.indent),e.setDirection(t.direction),e.setTextFormat(t.textFormat),e}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),type:"paragraph",version:1}}insertNewAfter(t,e){const n=Vo();n.setTextFormat(t.format);const r=this.getDirection();return n.setDirection(r),n.setFormat(this.getFormatType()),this.insertAfter(n,e),n}collapseAtStart(){const t=this.getChildren();if(0===t.length||Lr(t[0])&&""===t[0].getTextContent().trim()){if(null!==this.getNextSibling())return this.selectNext(),this.remove(),!0;if(null!==this.getPreviousSibling())return this.selectPrevious(),this.remove(),!0}return!1}}function Uo(t){const e=Vo();if(t.style){e.setFormat(t.style.textAlign);const n=parseInt(t.style.textIndent,10)/20;n>0&&e.setIndent(n)}return{node:e}}function Vo(){return Je(new Ko)}function Jo(t){return t instanceof Ko}const Ho=0,Go=1,qo=3,Xo=4;function Yo(t,e,n,r){const o=t._keyToDOMMap;o.clear(),t._editorState=zo(),t._pendingEditorState=r,t._compositionKey=null,t._dirtyType=ct,t._cloneNotNeeded.clear(),t._dirtyLeaves=new Set,t._dirtyElements.clear(),t._normalizedNodes=new Set,t._updateTags=new Set,t._updates=[],t._blockCursorElement=null;const i=t._observer;null!==i&&(i.disconnect(),t._observer=null),null!==e&&(e.textContent=""),null!==n&&(n.textContent="",o.set("root",n))}function Qo(t){const e=t||{},n=fo,r=e.theme||{},o=void 0===t?n:e.parentEditor||null,i=e.disableEvents||!1,s=zo(),l=e.namespace||(null!==o?o._config.namespace:Se()),a=e.editorState,c=[Io,br,ur,Ar,Ko,Zo,...e.nodes||[]],{onError:u,html:d}=e,f=void 0===e.editable||e.editable;let h;if(void 0===t&&null!==n)h=n._nodes;else{h=new Map;for(let t=0;t<c.length;t++){let e=c[t],n=null,r=null;if("function"!=typeof e){const t=e;e=t.replace,n=t.with,r=t.withKlass||null}const o=e.getType(),i=e.transform(),s=new Set;null!==i&&s.add(i),h.set(o,{exportDOM:d&&d.export?d.export.get(e):void 0,klass:e,replace:n,replaceWithKlass:r,transforms:s})}}const g=new ti(s,o,h,{disableEvents:i,namespace:l,theme:r},u||console.error,function(t,e){const n=new Map,r=new Set,o=t=>{Object.keys(t).forEach((e=>{let r=n.get(e);void 0===r&&(r=[],n.set(e,r)),r.push(t[e])}))};return t.forEach((t=>{const e=t.klass.importDOM;if(null==e||r.has(e))return;r.add(e);const n=e.call(t.klass);null!==n&&o(n)})),e&&o(e),n}(h,d?d.import:void 0),f);return void 0!==a&&(g._pendingEditorState=a,g._dirtyType=dt),g}class ti{constructor(t,e,n,r,o,i,s){this._parentEditor=e,this._rootElement=null,this._editorState=t,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=r,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=ct,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=Se(),this._onError=o,this._htmlConversions=i,this._editable=s,this._headless=null!==e&&e._headless,this._window=null,this._blockCursorElement=null}isComposing(){return null!=this._compositionKey}registerUpdateListener(t){const e=this._listeners.update;return e.add(t),()=>{e.delete(t)}}registerEditableListener(t){const e=this._listeners.editable;return e.add(t),()=>{e.delete(t)}}registerDecoratorListener(t){const e=this._listeners.decorator;return e.add(t),()=>{e.delete(t)}}registerTextContentListener(t){const e=this._listeners.textcontent;return e.add(t),()=>{e.delete(t)}}registerRootListener(t){const e=this._listeners.root;return t(this._rootElement,null),e.add(t),()=>{t(null,this._rootElement),e.delete(t)}}registerCommand(t,e,n){void 0===n&&G(35);const r=this._commands;r.has(t)||r.set(t,[new Set,new Set,new Set,new Set,new Set]);const o=r.get(t);void 0===o&&G(36,String(t));const i=o[n];return i.add(e),()=>{i.delete(e),o.every((t=>0===t.size))&&r.delete(t)}}registerMutationListener(t,e){void 0===this._nodes.get(t.getType())&&G(37,t.name);const n=this._listeners.mutation;return n.set(e,t),()=>{n.delete(e)}}registerNodeTransformToKlass(t,e){const n=t.getType(),r=this._nodes.get(n);return void 0===r&&G(37,t.name),r.transforms.add(e),r}registerNodeTransform(t,e){const n=this.registerNodeTransformToKlass(t,e),r=[n],o=n.replaceWithKlass;if(null!=o){const t=this.registerNodeTransformToKlass(o,e);r.push(t)}var i;return this,i=t.getType(),Ao(this,(()=>{const t=vo();if(t.isEmpty())return;if("root"===i)return void _e().markDirty();const e=t._nodeMap;for(const[,n]of e)n.markDirty()}),null===this._pendingEditorState?{tag:"history-merge"}:void 0),()=>{r.forEach((t=>t.transforms.delete(e)))}}hasNode(t){return this._nodes.has(t.getType())}hasNodes(t){return t.every(this.hasNode.bind(this))}dispatchCommand(t,e){return ze(this,t,e)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(t){const e=this._rootElement;if(t!==e){const n=Fe(this._config.theme,"root"),r=this._pendingEditorState||this._editorState;if(this._rootElement=t,Yo(this,e,t,r),null!==e&&(this._config.disableEvents||function(t){const e=t.ownerDocument,n=Vn.get(e);void 0===n&&G(162);const r=n-1;r>=0||G(164),Vn.set(e,r),0===r&&e.removeEventListener("selectionchange",ir);const o=t.__lexicalEditor;null!=o&&(function(t){if(null!==t._parentEditor){const e=Ce(t),n=e[e.length-1]._key;or.get(n)===t&&or.delete(n)}else or.delete(t._key)}(o),t.__lexicalEditor=null);const i=rr(t);for(let s=0;s<i.length;s++)i[s]();t.__lexicalEventHandles=[]}(e),null!=n&&e.classList.remove(...n)),null!==t){const e=function(t){const e=t.ownerDocument;return e&&e.defaultView||null}(t),r=t.style;r.userSelect="text",r.whiteSpace="pre-wrap",r.wordBreak="break-word",t.setAttribute("data-lexical-editor","true"),this._window=e,this._dirtyType=dt,Kt(this),this._updateTags.add("history-merge"),No(this),this._config.disableEvents||function(t,e){const n=t.ownerDocument,r=Vn.get(n);(void 0===r||r<1)&&n.addEventListener("selectionchange",ir),Vn.set(n,(r||0)+1),t.__lexicalEditor=e;const o=rr(t);for(let i=0;i<$n.length;i++){const[n,r]=$n[i],s="function"==typeof r?t=>{lr(t)||(sr(t),(e.isEditable()||"click"===n)&&r(t,e))}:t=>{if(!lr(t)&&(sr(t),e.isEditable()))switch(n){case"cut":return ze(e,z,t);case"copy":return ze(e,j,t);case"paste":return ze(e,d,t);case"dragstart":return ze(e,R,t);case"dragover":return ze(e,B,t);case"dragend":return ze(e,I,t);case"focus":return ze(e,V,t);case"blur":return ze(e,J,t);case"drop":return ze(e,M,t)}};t.addEventListener(n,s),o.push((()=>{t.removeEventListener(n,s)}))}}(t,this),null!=n&&t.classList.add(...n)}else this._editorState=r,this._pendingEditorState=null,this._window=null;Eo("root",this,!1,t,e)}}getElementByKey(t){return this._keyToDOMMap.get(t)||null}getEditorState(){return this._editorState}setEditorState(t,e){t.isEmpty()&&G(38),Zt(this);const n=this._pendingEditorState,r=this._updateTags,o=void 0!==e?e.tag:null;null===n||n.isEmpty()||(null!=o&&r.add(o),No(this)),this._pendingEditorState=t,this._dirtyType=dt,this._dirtyElements.set("root",!1),this._compositionKey=null,null!=o&&r.add(o),No(this)}parseEditorState(t,e){return function(t,e,n){const r=zo(),o=uo,i=ho,s=fo,l=e._dirtyElements,a=e._dirtyLeaves,c=e._cloneNotNeeded,u=e._dirtyType;e._dirtyElements=new Map,e._dirtyLeaves=new Set,e._cloneNotNeeded=new Set,e._dirtyType=0,uo=r,ho=!1,fo=e;try{const o=e._nodes;ko(t.root,o),n&&n(),r._readOnly=!0}catch(t){t instanceof Error&&e._onError(t)}finally{e._dirtyElements=l,e._dirtyLeaves=a,e._cloneNotNeeded=c,e._dirtyType=u,uo=o,ho=i,fo=s}return r}("string"==typeof t?JSON.parse(t):t,this,e)}update(t,e){Ao(this,t,e)}focus(t,e={}){const n=this._rootElement;null!==n&&(n.setAttribute("autocapitalize","off"),Ao(this,(()=>{const t=eo(),n=_e();null!==t?t.dirty=!0:0!==n.getChildrenSize()&&("rootStart"===e.defaultSelection?n.selectStart():n.selectEnd())}),{onUpdate:()=>{n.removeAttribute("autocapitalize"),t&&t()},tag:"focus"}),null===this._pendingEditorState&&n.removeAttribute("autocapitalize"))}blur(){const t=this._rootElement;null!==t&&t.blur();const e=Xe(this._window);null!==e&&e.removeAllRanges()}isEditable(){return this._editable}setEditable(t){this._editable!==t&&(this._editable=t,Eo("editable",this,!0,t))}toJSON(){return{editorState:this._editorState.toJSON()}}}}}]);