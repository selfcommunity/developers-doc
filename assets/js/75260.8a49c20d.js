(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[75260],{206:(t,e,n)=>{"use strict";n.d(e,{A:()=>b});var r=n(85486),o=n(59703),i=n(96540),s=n(54533),l=n(75659),a=n(28466),c=n(47859),u=n(33800),d=n(79716),f=n(11848),h=n(38413),g=n(31609);function p(t){return(0,g.Ay)("MuiInputAdornment",t)}const m=(0,h.A)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var _,y=n(25669),x=n(74848);const v=["children","className","component","disablePointerEvents","disableTypography","position","variant"],C=(0,f.Ay)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${(0,a.A)(n.position)}`],!0===n.disablePointerEvents&&e.disablePointerEvents,e[n.variant]]}})((({theme:t,ownerState:e})=>(0,o.A)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},"filled"===e.variant&&{[`&.${m.positionStart}&:not(.${m.hiddenLabel})`]:{marginTop:16}},"start"===e.position&&{marginRight:8},"end"===e.position&&{marginLeft:8},!0===e.disablePointerEvents&&{pointerEvents:"none"}))),b=i.forwardRef((function(t,e){const n=(0,y.b)({props:t,name:"MuiInputAdornment"}),{children:f,className:h,component:g="div",disablePointerEvents:m=!1,disableTypography:b=!1,position:S,variant:w}=n,k=(0,r.A)(n,v),T=(0,d.A)()||{};let N=w;w&&T.variant,T&&!N&&(N=T.variant);const A=(0,o.A)({},n,{hiddenLabel:T.hiddenLabel,size:T.size,disablePointerEvents:m,position:S,variant:N}),E=(t=>{const{classes:e,disablePointerEvents:n,hiddenLabel:r,position:o,size:i,variant:s}=t,c={root:["root",n&&"disablePointerEvents",o&&`position${(0,a.A)(o)}`,s,r&&"hiddenLabel",i&&`size${(0,a.A)(i)}`]};return(0,l.A)(c,p,e)})(A);return(0,x.jsx)(u.A.Provider,{value:null,children:(0,x.jsx)(C,(0,o.A)({as:g,ownerState:A,className:(0,s.A)(E.root,h),ref:e},k,{children:"string"!=typeof f||b?(0,x.jsxs)(i.Fragment,{children:["start"===S?_||(_=(0,x.jsx)("span",{className:"notranslate",children:"\u200b"})):null,f]}):(0,x.jsx)(c.A,{color:"text.secondary",children:f})}))})}))},7751:(t,e,n)=>{"use strict";n.d(e,{A:()=>C});var r=n(85486),o=n(59703),i=n(96540),s=(n(20002),n(54533)),l=n(75659);var a=n(11848),c=n(25669),u=n(28466),d=n(38413),f=n(31609);function h(t){return(0,f.Ay)("MuiToggleButtonGroup",t)}const g=(0,d.A)("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]);var p=n(46232),m=n(40156),_=n(75949),y=n(74848);const x=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],v=(0,a.Ay)("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${g.grouped}`]:e.grouped},{[`& .${g.grouped}`]:e[`grouped${(0,u.A)(n.orientation)}`]},{[`& .${g.firstButton}`]:e.firstButton},{[`& .${g.lastButton}`]:e.lastButton},{[`& .${g.middleButton}`]:e.middleButton},e.root,"vertical"===n.orientation&&e.vertical,n.fullWidth&&e.fullWidth]}})((({ownerState:t,theme:e})=>(0,o.A)({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius},"vertical"===t.orientation&&{flexDirection:"column"},t.fullWidth&&{width:"100%"},{[`& .${g.grouped}`]:(0,o.A)({},"horizontal"===t.orientation?{[`&.${g.selected} + .${g.grouped}.${g.selected}`]:{borderLeft:0,marginLeft:0}}:{[`&.${g.selected} + .${g.grouped}.${g.selected}`]:{borderTop:0,marginTop:0}})},"horizontal"===t.orientation?{[`& .${g.firstButton},& .${g.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${g.lastButton},& .${g.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}}:{[`& .${g.firstButton},& .${g.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${g.lastButton},& .${g.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0}},"horizontal"===t.orientation?{[`& .${g.lastButton}.${_.A.disabled},& .${g.middleButton}.${_.A.disabled}`]:{borderLeft:"1px solid transparent"}}:{[`& .${g.lastButton}.${_.A.disabled},& .${g.middleButton}.${_.A.disabled}`]:{borderTop:"1px solid transparent"}}))),C=i.forwardRef((function(t,e){const n=(0,c.b)({props:t,name:"MuiToggleButtonGroup"}),{children:a,className:d,color:f="standard",disabled:g=!1,exclusive:_=!1,fullWidth:C=!1,onChange:b,orientation:S="horizontal",size:w="medium",value:k}=n,T=(0,r.A)(n,x),N=(0,o.A)({},n,{disabled:g,fullWidth:C,orientation:S,size:w}),A=(t=>{const{classes:e,orientation:n,fullWidth:r,disabled:o}=t,i={root:["root","vertical"===n&&"vertical",r&&"fullWidth"],grouped:["grouped",`grouped${(0,u.A)(n)}`,o&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return(0,l.A)(i,h,e)})(N),E=i.useCallback(((t,e)=>{if(!b)return;const n=k&&k.indexOf(e);let r;k&&n>=0?(r=k.slice(),r.splice(n,1)):r=k?k.concat(e):[e],b(t,r)}),[b,k]),O=i.useCallback(((t,e)=>{b&&b(t,k===e?null:e)}),[b,k]),P=i.useMemo((()=>({className:A.grouped,onChange:_?O:E,value:k,size:w,fullWidth:C,color:f,disabled:g})),[A.grouped,_,O,E,k,w,C,f,g]),M=function(t){return i.Children.toArray(t).filter((t=>i.isValidElement(t)))}(a),F=M.length,L=t=>{const e=0===t,n=t===F-1;return e&&n?"":e?A.firstButton:n?A.lastButton:A.middleButton};return(0,y.jsx)(v,(0,o.A)({role:"group",className:(0,s.A)(A.root,d),ref:e,ownerState:N},T,{children:(0,y.jsx)(p.A.Provider,{value:P,children:M.map(((t,e)=>(0,y.jsx)(m.A.Provider,{value:L(e),children:t},e)))})}))}))},27639:(t,e,n)=>{"use strict";n.d(e,{Cb:()=>h,Nx:()=>c,Rk:()=>g,SD:()=>a,Wh:()=>l,Xg:()=>u,zI:()=>f});var r=n(48832);function o(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const o of e)r.append("v",o);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const i=new Map;function s(t){const e={};if(!t)return e;const n=t.split(";");for(const r of n)if(""!==r){const[t,n]=r.split(/:([^]+)/);t&&n&&(e[t.trim()]=n.trim())}return e}function l(t){let e=i.get(t);return void 0===e&&(e=s(t),i.set(t,e)),e}function a(t,e){const n=t.getStartEndPoints();if(e.isSelected(t)&&!e.isSegmented()&&!e.isToken()&&null!==n){const[o,i]=n,s=t.isBackward(),l=o.getNode(),a=i.getNode(),c=e.is(l),u=e.is(a);if(c||u){const[n,o]=(0,r.Cku)(t),i=l.is(a),c=e.is(s?a:l),u=e.is(s?l:a);let d,f=0;return i?(f=n>o?o:n,d=n>o?n:o):c?(f=s?o:n,d=void 0):u&&(f=0,d=s?n:o),e.__text=e.__text.slice(f,d),e}}return e}function c(t){if("text"===t.type)return t.offset===t.getNode().getTextContentSize();const e=t.getNode();return(0,r.ff4)(e)||o(177),t.offset===e.getChildrenSize()}function u(t){const e=t.getStyle(),n=s(e);i.set(e,n)}function d(t,e){const n=t.getFormatType(),r=t.getIndent();n!==e.getFormatType()&&e.setFormat(n),r!==e.getIndent()&&e.setIndent(r)}function f(t,e,n=d){if(null===t)return;const o=t.getStartEndPoints(),i=new Map;let s=null;if(o){const[t,e]=o;s=(0,r.uTE)(),s.anchor.set(t.key,t.offset,t.type),s.focus.set(e.key,e.offset,e.type);const n=p(t.getNode(),r.w3H),l=p(e.getNode(),r.w3H);(0,r.ff4)(n)&&i.set(n.getKey(),n),(0,r.ff4)(l)&&i.set(l.getKey(),l)}for(const l of t.getNodes())(0,r.ff4)(l)&&(0,r.w3H)(l)&&i.set(l.getKey(),l);for(const[r,l]of i){const t=e();n(l,t),l.replace(t,!0),s&&(r===s.anchor.key&&s.anchor.set(t.getKey(),s.anchor.offset,s.anchor.type),r===s.focus.key&&s.focus.set(t.getKey(),s.focus.offset,s.focus.type))}s&&t.is((0,r.vJq)())&&(0,r.n1P)(s)}function h(t,e){const n=(0,r.Ave)(t.focus,e?"previous":"next");if((0,r.pGK)(n))return!1;for(const o of(0,r.mWO)(n)){if((0,r.cmH)(o))return!o.origin.isInline();if(!(0,r.ff4)(o.origin)){if((0,r.Cyw)(o.origin))return!0;break}}return!1}function g(t,e,n){const o=function(t){const e=t.anchor.getNode();return"rtl"===((0,r.hVZ)(e)?e:e.getParentOrThrow()).getDirection()}(t);!function(t,e,n,r){t.modify(e?"extend":"move",n,r)}(t,e,n?!o:o,"character")}function p(t,e){let n=t;for(;null!==n&&null!==n.getParent()&&!e(n);)n=n.getParentOrThrow();return e(n)?n:null}},33676:(t,e,n)=>{"use strict";n.d(e,{A:()=>b});var r=n(85486),o=n(59703),i=n(96540),s=n(54533),l=n(47379),a=n(75659),c=n(15554),u=n(49433),d=n(28466),f=n(25669),h=n(11848),g=n(75949),p=n(46232),m=n(40156);function _(t,e){return void 0!==e&&void 0!==t&&(Array.isArray(e)?e.indexOf(t)>=0:t===e)}var y=n(74848);const x=["value"],v=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],C=(0,h.Ay)(u.A,{name:"MuiToggleButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`size${(0,d.A)(n.size)}`]]}})((({theme:t,ownerState:e})=>{let n,r="standard"===e.color?t.palette.text.primary:t.palette[e.color].main;return t.vars&&(r="standard"===e.color?t.vars.palette.text.primary:t.vars.palette[e.color].main,n="standard"===e.color?t.vars.palette.text.primaryChannel:t.vars.palette[e.color].mainChannel),(0,o.A)({},t.typography.button,{borderRadius:(t.vars||t).shape.borderRadius,padding:11,border:`1px solid ${(t.vars||t).palette.divider}`,color:(t.vars||t).palette.action.active},e.fullWidth&&{width:"100%"},{[`&.${g.A.disabled}`]:{color:(t.vars||t).palette.action.disabled,border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,c.X4)(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${g.A.selected}`]:{color:r,backgroundColor:t.vars?`rgba(${n} / ${t.vars.palette.action.selectedOpacity})`:(0,c.X4)(r,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${n} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,c.X4)(r,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${n} / ${t.vars.palette.action.selectedOpacity})`:(0,c.X4)(r,t.palette.action.selectedOpacity)}}}},"small"===e.size&&{padding:7,fontSize:t.typography.pxToRem(13)},"large"===e.size&&{padding:15,fontSize:t.typography.pxToRem(15)})})),b=i.forwardRef((function(t,e){const n=i.useContext(p.A),{value:c}=n,u=(0,r.A)(n,x),h=i.useContext(m.A),b=(0,l.A)((0,o.A)({},u,{selected:_(t.value,c)}),t),S=(0,f.b)({props:b,name:"MuiToggleButton"}),{children:w,className:k,color:T="standard",disabled:N=!1,disableFocusRipple:A=!1,fullWidth:E=!1,onChange:O,onClick:P,selected:M,size:F="medium",value:L}=S,I=(0,r.A)(S,v),D=(0,o.A)({},S,{color:T,disabled:N,disableFocusRipple:A,fullWidth:E,size:F}),R=(t=>{const{classes:e,fullWidth:n,selected:r,disabled:o,size:i,color:s}=t,l={root:["root",r&&"selected",o&&"disabled",n&&"fullWidth",`size${(0,d.A)(i)}`,s]};return(0,a.A)(l,g.J,e)})(D),j=h||"";return(0,y.jsx)(C,(0,o.A)({className:(0,s.A)(u.className,R.root,k,j),disabled:N,focusRipple:!A,ref:e,onClick:t=>{P&&(P(t,L),t.defaultPrevented)||O&&O(t,L)},onChange:O,value:L,ownerState:D,"aria-pressed":M},I,{children:w}))}))},37116:(t,e,n)=>{"use strict";n.d(e,{F:()=>i,O:()=>o});var r=n(27639);function o(t){const e=t.anchor,n=t.focus,o=t.anchor.getNode(),i=t.focus.getNode();if(o===i)return o;return t.isBackward()?(0,r.Nx)(n)?o:i:(0,r.Nx)(e)?o:i}function i(t){return Array.from(t.matchAll(/<hashtag id="(?<id>[0-9]+)">#(?<name>[^<>]+)<\/hashtag>/g)).map((t=>t.groups.id))}},40156:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=n(96540).createContext(void 0)},46232:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=n(96540).createContext({})},48832:(t,e,n)=>{"use strict";function r(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const o of e)r.append("v",o);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}n.d(e,{$7r:()=>Ie,$ey:()=>ee,A7V:()=>no,AX0:()=>ue,AcJ:()=>ao,Ave:()=>_s,B$P:()=>si,BEs:()=>Di,Bts:()=>ds,CaD:()=>ct,Cku:()=>Vn,Csq:()=>As,Cyw:()=>Vr,Ey8:()=>Tn,FEN:()=>Xt,GMe:()=>Lr,GcU:()=>kr,Gew:()=>mi,H2A:()=>pr,HYn:()=>Oe,Huu:()=>pe,I2H:()=>De,I2P:()=>Un,IlV:()=>ts,IqF:()=>_i,JM3:()=>ae,K8K:()=>Ni,KfJ:()=>Le,Kp7:()=>Zr,LYZ:()=>yo,LZn:()=>B,MvL:()=>Ht,NiT:()=>jo,OXk:()=>xe,OpE:()=>Vi,PiT:()=>Ce,Q$N:()=>_e,RTZ:()=>Hn,RTo:()=>ge,S1w:()=>cr,SKc:()=>Pe,Sr4:()=>Se,TgX:()=>ke,UDz:()=>fe,V30:()=>se,VSO:()=>Ee,WKo:()=>_n,WWb:()=>Fe,WgU:()=>co,WuB:()=>Gt,XKQ:()=>Yt,YW5:()=>ve,Z$U:()=>_o,ZKf:()=>ie,_On:()=>Ai,a9V:()=>Ei,bM3:()=>Qt,bSg:()=>so,bbF:()=>he,cmH:()=>Gi,d8p:()=>Vt,da8:()=>uo,dxY:()=>Ri,e1k:()=>ni,erb:()=>is,ev7:()=>Bn,fGB:()=>Ur,fUS:()=>we,ff4:()=>qr,gCZ:()=>me,guI:()=>qt,hVZ:()=>Xr,hi0:()=>ne,i0_:()=>Mi,ieJ:()=>ho,jG6:()=>To,jZM:()=>lo,k1Q:()=>Ms,kFe:()=>Dn,lJ7:()=>io,lSZ:()=>Ts,mB:()=>oe,mWO:()=>as,n1P:()=>zo,nYP:()=>wi,nsf:()=>Mo,oqR:()=>Zt,pGK:()=>Ns,pTq:()=>xi,pd8:()=>ji,peL:()=>Si,rN:()=>Zi,rUs:()=>sr,riq:()=>Te,sTu:()=>In,sWS:()=>cs,sby:()=>ki,sik:()=>be,t5V:()=>Me,u5G:()=>Ae,uTE:()=>ir,uwZ:()=>os,vAA:()=>Ti,vJq:()=>ar,viC:()=>re,w$Z:()=>ye,w3H:()=>Oi,wH$:()=>yn,waI:()=>te,wp6:()=>ys,xL4:()=>Io,xQ8:()=>xs,y68:()=>rr,z8s:()=>Wn});const o="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,i=o&&"documentMode"in document?document.documentMode:null,s=o&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),l=o&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),a=!(!o||!("InputEvent"in window)||i)&&"getTargetRanges"in new window.InputEvent("input"),c=o&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),u=o&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,d=o&&/Android/.test(navigator.userAgent),f=o&&/^(?=.*Chrome).*/i.test(navigator.userAgent),h=o&&d&&f,g=o&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!f;function p(...t){const e=[];for(const n of t)if(n&&"string"==typeof n)for(const[t]of n.matchAll(/\S+/g))e.push(t);return e}const m=1,_=3,y=9,x=11,v=0,C=1,b=2,S=4,w=8,k=2032|(3|S|w),T=1,N=2,A=3,E=4,O=5,P=6,M=c||u||g?"\xa0":"\u200b",F="\n\n",L=l?"\xa0":M,I="\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc",D="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff",R=new RegExp("^[^"+D+"]*["+I+"]"),j=new RegExp("^[^"+I+"]*["+D+"]"),B={bold:1,capitalize:1024,code:16,highlight:128,italic:2,lowercase:256,strikethrough:S,subscript:32,superscript:64,underline:w,uppercase:512},z={directionless:1,unmergeable:2},W={center:N,end:P,justify:E,left:T,right:A,start:O},J={[N]:"center",[P]:"end",[E]:"justify",[T]:"left",[A]:"right",[O]:"start"},$={normal:0,segmented:2,token:1},K={0:"normal",2:"segmented",1:"token"};function U(t,e,n,r,o,i){let s=t.getFirstChild();for(;null!==s;){const t=s.__key;s.__parent===e&&(qr(s)&&U(s,t,n,r,o,i),n.has(t)||i.delete(t),o.push(t)),s=s.getNextSibling()}}const q=100;let H=!1,Z=0;function V(t){Z=t.timeStamp}function G(t,e,n){const r="BR"===t.nodeName,o=e.__lexicalLineBreak;return o&&(t===o||r&&t.previousSibling===o)||r&&void 0!==Lo(t,n)}function X(t,e,n){const r=Si(pi(n));let o=null,i=null;null!==r&&r.anchorNode===t&&(o=r.anchorOffset,i=r.focusOffset);const s=t.nodeValue;null!==s&&Zo(e,s,o,i,!1)}function Y(t,e,n){if(Un(t)){const e=t.anchor.getNode();if(e.is(n)&&t.format!==e.getFormat())return!1}return So(e)&&n.isAttached()}function Q(t,e,n,r){for(let o=t;o&&!Bi(o);o=di(o)){const t=Lo(o,e);if(void 0!==t){const e=Mo(t,n);if(e)return Vr(e)||!ki(o)?void 0:[o,e]}else if(o===r)return[r,Bo(n)]}}function tt(t,e,n){H=!0;const r=performance.now()-Z>q;try{Jr(t,(()=>{const o=ar()||function(t){return t.getEditorState().read((()=>{const t=ar();return null!==t?t.clone():null}))}(t),i=new Map,s=t.getRootElement(),a=t._editorState,c=t._blockCursorElement;let u=!1,d="";for(let n=0;n<e.length;n++){const f=e[n],h=f.type,g=f.target,p=Q(g,t,a,s);if(!p)continue;const[m,_]=p;if("characterData"===h)r&&Dn(_)&&So(g)&&Y(o,g,_)&&X(g,_,t);else if("childList"===h){u=!0;const e=f.addedNodes;for(let o=0;o<e.length;o++){const n=e[o],r=Fo(n),i=n.parentNode;if(null!=i&&n!==c&&null===r&&!G(n,i,t)){if(l){const t=(ki(n)?n.innerText:null)||n.nodeValue;t&&(d+=t)}i.removeChild(n)}}const n=f.removedNodes,r=n.length;if(r>0){let e=0;for(let o=0;o<r;o++){const r=n[o];(G(r,g,t)||c===r)&&(g.appendChild(r),e++)}r!==e&&i.set(m,_)}}}if(i.size>0)for(const[e,n]of i)n.reconcileObservedMutation(e,t);const f=n.takeRecords();if(f.length>0){for(let e=0;e<f.length;e++){const n=f[e],r=n.addedNodes,o=n.target;for(let e=0;e<r.length;e++){const n=r[e],i=n.parentNode;null==i||"BR"!==n.nodeName||G(n,o,t)||i.removeChild(n)}}n.takeRecords()}null!==o&&(u&&zo(o),l&&li(t)&&o.insertRawText(d))}))}finally{H=!1}}function et(t){const e=t._observer;null!==e&&tt(t,e.takeRecords(),e)}function nt(t){!function(t){0===Z&&pi(t).addEventListener("textInput",V,!0)}(t),t._observer=new MutationObserver(((e,n)=>{tt(t,e,n)}))}class rt{constructor(t,e=new Map,n=void 0,r=new Map,o=void 0){this.node=t,this.sharedConfigMap=e,this.unknownState=n,this.knownState=r;const i=void 0!==o?o:function(t,e,n){let r=n.size;if(e)for(const o in e){const e=t.get(o);e&&n.has(e)||r++}return r}(e,n,r);this.size=i}getValue(t){const e=this.knownState.get(t);if(void 0!==e)return e;this.sharedConfigMap.set(t.key,t);let n=t.defaultValue;if(this.unknownState&&t.key in this.unknownState){const e=this.unknownState[t.key];void 0!==e&&(n=t.parse(e)),this.updateFromKnown(t,n)}return n}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){const t={...this.unknownState};for(const[e,n]of this.knownState)e.isEqual(n,e.defaultValue)?delete t[e.key]:t[e.key]=e.unparse(n);return ot(t)?{$:t}:{}}getWritable(t){if(this.node===t)return this;const e=new Map(this.knownState),n=ot(r=this.unknownState)&&{...r};var r;if(n)for(const o of e.keys())delete n[o.key];return new rt(t,this.sharedConfigMap,ot(n),e,this.size)}updateFromKnown(t,e){const n=t.key;this.sharedConfigMap.set(n,t);const{knownState:r,unknownState:o}=this;r.has(t)||o&&n in o||this.size++,r.set(t,e)}updateFromUnknown(t,e){const n=this.sharedConfigMap.get(t);n?this.updateFromKnown(n,n.parse(e)):(this.unknownState=this.unknownState||{},t in this.unknownState||this.size++,this.unknownState[t]=e)}updateFromJSON(t){const{knownState:e}=this;for(const n of e.keys())e.set(n,n.defaultValue);if(this.size=e.size,this.unknownState={},t)for(const[n,r]of Object.entries(t))this.updateFromUnknown(n,r);this.unknownState=ot(this.unknownState)}}function ot(t){if(t)for(const e in t)return t}function it(t){const e=t.getWritable(),n=e.__state?e.__state.getWritable(e):new rt(e);return e.__state=n,n}function st(t,e){const n=t.__mode,r=t.__format,o=t.__style,i=e.__mode,s=e.__format,l=e.__style,a=t.__state,c=e.__state;return(null===n||n===i)&&(null===r||r===s)&&(null===o||o===l)&&(null===t.__state||a===c||function(t,e){if(t===e)return!0;if(t&&e&&t.size!==e.size)return!1;const n=new Set,r=(t,e)=>{for(const[r,o]of t.knownState){if(n.has(r.key))continue;n.add(r.key);const t=e?e.getValue(r):r.defaultValue;if(t!==o&&!r.isEqual(t,o))return!0}return!1},o=(t,e)=>{const{unknownState:r}=t,o=e?e.unknownState:void 0;if(r)for(const[i,s]of Object.entries(r))if(!n.has(i)&&(n.add(i),s!==(o?o[i]:void 0)))return!0;return!1};return!(t&&r(t,e)||e&&r(e,t)||t&&o(t,e)||e&&o(e,t))}(a,c))}function lt(t,e){const n=t.mergeWithSibling(e),r=Er()._normalizedNodes;return r.add(t.__key),r.add(e.__key),n}function at(t){let e,n,r=t;if(""!==r.__text||!r.isSimpleText()||r.isUnmergeable()){for(;null!==(e=r.getPreviousSibling())&&Dn(e)&&e.isSimpleText()&&!e.isUnmergeable();){if(""!==e.__text){if(st(e,r)){r=lt(e,r);break}break}e.remove()}for(;null!==(n=r.getNextSibling())&&Dn(n)&&n.isSimpleText()&&!n.isUnmergeable();){if(""!==n.__text){if(st(r,n)){r=lt(r,n);break}break}n.remove()}}else r.remove()}function ct(t){return ut(t.anchor),ut(t.focus),t}function ut(t){for(;"element"===t.type;){const e=t.getNode(),n=t.offset;let r,o;if(n===e.getChildrenSize()?(r=e.getChildAtIndex(n-1),o=!0):(r=e.getChildAtIndex(n),o=!1),Dn(r)){t.set(r.__key,o?r.getTextContentSize():0,"text",!0);break}if(!qr(r))break;t.set(r.__key,o?r.getChildrenSize():0,"element",!0)}}let dt,ft,ht,gt,pt,mt,_t,yt,xt,vt,Ct="",bt="",St=null,wt="",kt="",Tt=!1,Nt=!1,At=null;function Et(t,e){const n=_t.get(t);if(null!==e){const n=Ut(t);n.parentNode===e&&e.removeChild(n)}if(yt.has(t)||ft._keyToDOMMap.delete(t),qr(n)){const t=Wt(n,_t);Ot(t,0,t.length-1,null)}void 0!==n&&oi(vt,ht,gt,n,"destroyed")}function Ot(t,e,n,r){let o=e;for(;o<=n;++o){const e=t[o];void 0!==e&&Et(e,r)}}function Pt(t,e){t.setProperty("text-align",e)}const Mt="40px";function Ft(t,e){const n=dt.theme.indent;if("string"==typeof n){const r=t.classList.contains(n);e>0&&!r?t.classList.add(n):e<1&&r&&t.classList.remove(n)}const r=getComputedStyle(t).getPropertyValue("--lexical-indent-base-value")||Mt;t.style.setProperty("padding-inline-start",0===e?"":`calc(${e} * ${r})`)}function Lt(t,e){const n=t.style;0===e?Pt(n,""):e===T?Pt(n,"left"):e===N?Pt(n,"center"):e===A?Pt(n,"right"):e===E?Pt(n,"justify"):e===O?Pt(n,"start"):e===P&&Pt(n,"end")}function It(t,e){const n=yt.get(t);void 0===n&&r(60);const o=n.createDOM(dt,ft);if(function(t,e,n){const r=n._keyToDOMMap;(function(t,e,n){t[`__lexicalKey_${e._key}`]=n})(e,n,t),r.set(t,e)}(t,o,ft),Dn(n)?o.setAttribute("data-lexical-text","true"):Vr(n)&&o.setAttribute("data-lexical-decorator","true"),qr(n)){const t=n.__indent,e=n.__size;if(0!==t&&Ft(o,t),0!==e){const t=e-1;!function(t,e,n,r){const o=bt;bt="",Dt(t,n,0,e,n.getDOMSlot(r)),Bt(n,r),bt=o}(Wt(n,yt),t,n,o)}const r=n.__format;0!==r&&Lt(o,r),n.isInline()||jt(null,n,o),ci(n)&&(Ct+=F,kt+=F)}else{const e=n.getTextContent();if(Vr(n)){const e=n.decorate(ft,dt);null!==e&&$t(t,e),o.contentEditable="false"}else Dn(n)&&(n.isDirectionless()||(bt+=e));Ct+=e,kt+=e}return null!==e&&e.insertChild(o),oi(vt,ht,gt,n,"created"),o}function Dt(t,e,n,r,o){const i=Ct;Ct="";let s=n;for(;s<=r;++s){It(t[s],o);const e=yt.get(t[s]);null!==e&&Dn(e)&&(null===St&&(St=e.getFormat()),""===wt&&(wt=e.getStyle()))}ci(e)&&(Ct+=F),o.element.__lexicalTextContent=Ct,Ct=i+Ct}function Rt(t,e){if(t){const n=t.__last;if(n){const t=e.get(n);if(t)return yn(t)?"line-break":Vr(t)&&t.isInline()?"decorator":null}return"empty"}return null}function jt(t,e,n){const r=Rt(t,_t),o=Rt(e,yt);r!==o&&e.getDOMSlot(n).setManagedLineBreak(o)}function Bt(t,e){const n=e.__lexicalDirTextContent||"",r=e.__lexicalDir||"";if(n!==bt||r!==At){const n=""===bt,o=n?At:function(t){return R.test(t)?"rtl":j.test(t)?"ltr":null}(bt);if(o!==r){const i=e.classList,s=dt.theme;let l=null!==r?s[r]:void 0,a=null!==o?s[o]:void 0;if(void 0!==l){if("string"==typeof l){const t=p(l);l=s[r]=t}i.remove(...l)}if(null===o||n&&"ltr"===o)e.removeAttribute("dir");else{if(void 0!==a){if("string"==typeof a){const t=p(a);a=s[o]=t}void 0!==a&&i.add(...a)}e.dir=o}Nt||(t.getWritable().__dir=o)}At=o,e.__lexicalDirTextContent=bt,e.__lexicalDir=o}}function zt(t,e,n){const o=bt;var i;bt="",St=null,wt="",function(t,e,n){const o=Ct,i=t.__size,s=e.__size;Ct="";const l=n.element;if(1===i&&1===s){const n=t.__first,r=e.__first;if(n===r)Jt(n,l);else{const t=Ut(n),e=It(r,null);try{l.replaceChild(e,t)}catch(o){if("object"==typeof o&&null!=o){const i=`${o.toString()} Parent: ${l.tagName}, new child: {tag: ${e.tagName} key: ${r}}, old child: {tag: ${t.tagName}, key: ${n}}.`;throw new Error(i)}throw o}Et(n,null)}const i=yt.get(r);Dn(i)&&(null===St&&(St=i.getFormat()),""===wt&&(wt=i.getStyle()))}else{const o=Wt(t,_t),a=Wt(e,yt);if(o.length!==i&&r(227),a.length!==s&&r(228),0===i)0!==s&&Dt(a,e,0,s-1,n);else if(0===s){if(0!==i){const t=null==n.after&&null==n.before&&null==n.element.__lexicalLineBreak;Ot(o,0,i-1,t?null:l),t&&(l.textContent="")}}else!function(t,e,n,r,o,i){const s=r-1,l=o-1;let a,c,u=i.getFirstChild(),d=0,f=0;for(;d<=s&&f<=l;){const t=e[d],r=n[f];if(t===r)u=Kt(Jt(r,i.element)),d++,f++;else{void 0===a&&(a=new Set(e)),void 0===c&&(c=new Set(n));const o=c.has(t),s=a.has(r);if(o)if(s){const t=ui(ft,r);t===u?u=Kt(Jt(r,i.element)):(i.withBefore(u).insertChild(t),Jt(r,i.element)),d++,f++}else It(r,i.withBefore(u)),f++;else u=Kt(Ut(t)),Et(t,i.element),d++}const o=yt.get(r);null!==o&&Dn(o)&&(null===St&&(St=o.getFormat()),""===wt&&(wt=o.getStyle()))}const h=d>s,g=f>l;if(h&&!g){const e=n[l+1],r=void 0===e?null:ft.getElementByKey(e);Dt(n,t,f,l,i.withBefore(r))}else g&&!h&&Ot(e,d,s,i.element)}(e,o,a,i,s,n)}ci(e)&&(Ct+=F),l.__lexicalTextContent=Ct,Ct=o+Ct}(t,e,e.getDOMSlot(n)),Bt(e,n),i=e,null==St||St===i.__textFormat||Nt||i.setTextFormat(St),function(t){""===wt||wt===t.__textStyle||Nt||t.setTextStyle(wt)}(e),bt=o}function Wt(t,e){const n=[];let o=t.__first;for(;null!==o;){const t=e.get(o);void 0===t&&r(101),n.push(o),o=t.__next}return n}function Jt(t,e){const n=_t.get(t);let o=yt.get(t);void 0!==n&&void 0!==o||r(61);const i=Tt||mt.has(t)||pt.has(t),s=ui(ft,t);if(n===o&&!i){if(qr(n)){const t=s.__lexicalTextContent;void 0!==t&&(Ct+=t,kt+=t);const e=s.__lexicalDirTextContent;void 0!==e&&(bt+=e)}else{const t=n.getTextContent();Dn(n)&&!n.isDirectionless()&&(bt+=t),kt+=t,Ct+=t}return s}if(n!==o&&i&&oi(vt,ht,gt,o,"updated"),o.updateDOM(n,s,dt)){const n=It(t,null);return null===e&&r(62),e.replaceChild(n,s),Et(t,null),n}if(qr(n)&&qr(o)){const t=o.__indent;t!==n.__indent&&Ft(s,t);const e=o.__format;e!==n.__format&&Lt(s,e),i&&(zt(n,o,s),Xr(o)||o.isInline()||jt(n,o,s)),ci(o)&&(Ct+=F,kt+=F)}else{const e=o.getTextContent();if(Vr(o)){const e=o.decorate(ft,dt);null!==e&&$t(t,e)}else Dn(o)&&!o.isDirectionless()&&(bt+=e);Ct+=e,kt+=e}if(!Nt&&Xr(o)&&o.__cachedText!==kt){const t=o.getWritable();t.__cachedText=kt,o=t}return s}function $t(t,e){let n=ft._pendingDecorators;const r=ft._decorators;if(null===n){if(r[t]===e)return;n=Do(ft)}n[t]=e}function Kt(t){let e=t.nextSibling;return null!==e&&e===ft._blockCursorElement&&(e=e.nextSibling),e}function Ut(t){const e=xt.get(t);return void 0===e&&r(75,t),e}function qt(t){return{}}const Ht={},Zt={},Vt={},Gt={},Xt={},Yt={},Qt={},te={},ee={},ne={},re={},oe={},ie={},se={},le={},ae={},ce={},ue={},de={},fe={},he={},ge={},pe={},me={},_e={},ye={},xe={},ve={},Ce={},be={},Se={},we={},ke={},Te={},Ne={},Ae={},Ee={},Oe={},Pe={},Me={},Fe={},Le={},Ie={},De={},Re={},je=Object.freeze({}),Be=[["keydown",function(t,e){if(ze=t.timeStamp,We=t.key,e.isComposing())return;const{key:n,shiftKey:r,ctrlKey:o,metaKey:i,altKey:a}=t;if(!ai(e,le,t)&&null!=n){if(Ve&&Qo(We))return Jr(e,(()=>{sn(e,Ge)})),Ve=!1,void(Ge="");if(function(t,e,n,r){return Go(t)&&!e&&!r&&!n}(n,o,a,i))ai(e,ae,t);else if(function(t,e,n,r,o){return Go(t)&&!r&&!n&&(e||o)}(n,o,r,a,i))ai(e,ce,t);else if(function(t,e,n,r){return Vo(t)&&!e&&!r&&!n}(n,o,a,i))ai(e,ue,t);else if(function(t,e,n,r,o){return Vo(t)&&!r&&!n&&(e||o)}(n,o,r,a,i))ai(e,de,t);else if(function(t,e,n){return function(t){return"ArrowUp"===t}(t)&&!e&&!n}(n,o,i))ai(e,fe,t);else if(function(t,e,n){return function(t){return"ArrowDown"===t}(t)&&!e&&!n}(n,o,i))ai(e,he,t);else if(function(t,e){return Yo(t)&&e}(n,r))He=!0,ai(e,ge,t);else if(function(t){return" "===t}(n))ai(e,pe,t);else if(function(t,e){return s&&e&&"o"===t.toLowerCase()}(n,o))t.preventDefault(),He=!0,ai(e,Xt,!0);else if(function(t,e){return Yo(t)&&!e}(n,r))He=!1,ai(e,ge,t);else if(function(t,e,n,r){return s?!e&&!n&&(Qo(t)||"h"===t.toLowerCase()&&r):!(r||e||n)&&Qo(t)}(n,a,i,o))Qo(n)?ai(e,me,t):(t.preventDefault(),ai(e,Gt,!0));else if(function(t){return"Escape"===t}(n))ai(e,_e,t);else if(function(t,e,n,r,o){return s?!(n||r||o)&&(ti(t)||"d"===t.toLowerCase()&&e):!(e||r||o)&&ti(t)}(n,o,r,a,i))ti(n)?ai(e,ye,t):(t.preventDefault(),ai(e,Gt,!1));else if(function(t,e,n){return Qo(t)&&(s?e:n)}(n,a,o))t.preventDefault(),ai(e,ne,!0);else if(function(t,e,n){return ti(t)&&(s?e:n)}(n,a,o))t.preventDefault(),ai(e,ne,!1);else if(function(t,e){return s&&e&&Qo(t)}(n,i))t.preventDefault(),ai(e,re,!0);else if(function(t,e){return s&&e&&ti(t)}(n,i))t.preventDefault(),ai(e,re,!1);else if(function(t,e,n,r){return"b"===t.toLowerCase()&&!e&&Xo(n,r)}(n,a,i,o))t.preventDefault(),ai(e,oe,"bold");else if(function(t,e,n,r){return"u"===t.toLowerCase()&&!e&&Xo(n,r)}(n,a,i,o))t.preventDefault(),ai(e,oe,"underline");else if(function(t,e,n,r){return"i"===t.toLowerCase()&&!e&&Xo(n,r)}(n,a,i,o))t.preventDefault(),ai(e,oe,"italic");else if(function(t,e,n,r){return"Tab"===t&&!e&&!n&&!r}(n,a,o,i))ai(e,xe,t);else if(function(t,e,n,r){return"z"===t.toLowerCase()&&!e&&Xo(n,r)}(n,r,i,o))t.preventDefault(),ai(e,ie,void 0);else if(function(t,e,n,r){return s?"z"===t.toLowerCase()&&n&&e:"y"===t.toLowerCase()&&r||"z"===t.toLowerCase()&&r&&e}(n,r,i,o))t.preventDefault(),ai(e,se,void 0);else{const a=e._editorState._selection;null===a||Un(a)?!l&&ei(n,i,o)&&(t.preventDefault(),ai(e,Oe,t)):function(t,e,n,r){return!e&&("c"===t.toLowerCase()&&(s?n:r))}(n,r,i,o)?(t.preventDefault(),ai(e,Ae,t)):function(t,e,n,r){return!e&&("x"===t.toLowerCase()&&(s?n:r))}(n,r,i,o)?(t.preventDefault(),ai(e,Ee,t)):ei(n,i,o)&&(t.preventDefault(),ai(e,Oe,t))}(function(t,e,n,r){return t||e||n||r})(o,r,a,i)&&ai(e,Re,t)}}],["pointerdown",function(t,e){const n=t.target,r=t.pointerType;Ti(n)&&"touch"!==r&&0===t.button&&Jr(e,(()=>{Vr(Io(n))||(qe=!0)}))}],["compositionstart",function(t,e){Jr(e,(()=>{const n=ar();if(Un(n)&&!e.isComposing()){const r=n.anchor,o=n.anchor.getNode();Oo(r.key),(t.timeStamp<ze+30||"element"===r.type||!n.isCollapsed()||o.getFormat()!==n.format||Dn(o)&&o.getStyle()!==n.style)&&ai(e,Qt,L)}}))}],["compositionend",function(t,e){l?Ze=!0:u||!c&&!g?Jr(e,(()=>{sn(e,t.data)})):(Ve=!0,Ge=t.data)}],["input",function(t,e){t.stopPropagation(),Jr(e,(()=>{const n=ar(),r=t.data,o=on(t);if(null!=r&&Un(n)&&Qe(n,o,r,t.timeStamp,!1)){Ze&&(sn(e,r),Ze=!1);const o=n.anchor.getNode(),i=Si(pi(e));if(null===i)return;const s=n.isBackward(),d=s?n.anchor.offset:n.focus.offset,f=s?n.focus.offset:n.anchor.offset;a&&!n.isCollapsed()&&Dn(o)&&null!==i.anchorNode&&o.getTextContent().slice(0,d)+r+o.getTextContent().slice(d+f)===qo(i.anchorNode)||ai(e,Qt,r);const h=r.length;l&&h>1&&"insertCompositionText"===t.inputType&&!e.isComposing()&&(n.anchor.offset-=h),c||u||g||!e.isComposing()||(ze=0,Oo(null))}else Ho(!1,e,null!==r?r:void 0),Ze&&(sn(e,r||void 0),Ze=!1);!function(){Tr();et(Er())}()}),{event:t}),$e=null}],["click",function(t,e){Jr(e,(()=>{const n=ar(),r=Si(pi(e)),o=cr();if(r)if(Un(n)){const e=n.anchor,i=e.getNode();if("element"===e.type&&0===e.offset&&n.isCollapsed()&&!Xr(i)&&1===jo().getChildrenSize()&&i.getTopLevelElementOrThrow().isEmpty()&&null!==o&&n.is(o))r.removeAllRanges(),n.dirty=!0;else if(3===t.detail&&!n.isCollapsed()&&i!==n.focus.getNode()){const t=function(t,e){let n=t;for(;n!==jo()&&null!=n;){if(e(n))return n;n=n.getParent()}return null}(i,(t=>qr(t)&&!t.isInline()));qr(t)&&t.select(0)}}else if("touch"===t.pointerType){const n=r.anchorNode;(ki(n)||So(n))&&zo(lr(o,r,e,t))}ai(e,Vt,t)}))}],["cut",je],["copy",je],["dragstart",je],["dragover",je],["dragend",je],["paste",je],["focus",je],["blur",je],["drop",je]];a&&Be.push(["beforeinput",(t,e)=>function(t,e){const n=t.inputType,o=on(t);"deleteCompositionText"===n||l&&li(e)||"insertCompositionText"!==n&&Jr(e,(()=>{const i=ar();if("deleteContentBackward"===n){if(null===i){const t=cr();if(!Un(t))return;zo(t.clone())}if(Un(i)){const n=i.anchor.key===i.focus.key;if(s=t.timeStamp,"MediaLast"===We&&s<ze+30&&e.isComposing()&&n){if(Oo(null),ze=0,setTimeout((()=>{Jr(e,(()=>{Oo(null)}))}),30),Un(i)){const t=i.anchor.getNode();t.markDirty(),Dn(t)||r(142),rn(i,t)}}else{Oo(null),t.preventDefault();const r=i.anchor.getNode(),o=r.getTextContent(),s=r.canInsertTextAfter(),l=0===i.anchor.offset&&i.focus.offset===o.length;let a=h&&n&&!l&&s;if(a&&i.isCollapsed()&&(a=!Vr(si(i.anchor,!0))),!a){ai(e,Gt,!0);const t=ar();h&&Un(t)&&t.isCollapsed()&&(Xe=t,setTimeout((()=>Xe=null)))}}return}}var s;if(!Un(i))return;const l=t.data;null!==$e&&Ho(!1,e,$e),i.dirty&&null===$e||!i.isCollapsed()||Xr(i.anchor.getNode())||null===o||i.applyDOMRange(o),$e=null;const a=i.anchor,c=i.focus,d=a.getNode(),f=c.getNode();if("insertText"!==n&&"insertTranspose"!==n)switch(t.preventDefault(),n){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":ai(e,Qt,t);break;case"insertFromComposition":Oo(null),ai(e,Qt,t);break;case"insertLineBreak":Oo(null),ai(e,Xt,!1);break;case"insertParagraph":Oo(null),He&&!u?(He=!1,ai(e,Xt,!1)):ai(e,Yt,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":ai(e,te,t);break;case"deleteByComposition":(function(t,e){return t!==e||qr(t)||qr(e)||!t.isToken()||!e.isToken()})(d,f)&&ai(e,ee,t);break;case"deleteByDrag":case"deleteByCut":ai(e,ee,t);break;case"deleteContent":ai(e,Gt,!1);break;case"deleteWordBackward":ai(e,ne,!0);break;case"deleteWordForward":ai(e,ne,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":ai(e,re,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":ai(e,re,!1);break;case"formatStrikeThrough":ai(e,oe,"strikethrough");break;case"formatBold":ai(e,oe,"bold");break;case"formatItalic":ai(e,oe,"italic");break;case"formatUnderline":ai(e,oe,"underline");break;case"historyUndo":ai(e,ie,void 0);break;case"historyRedo":ai(e,se,void 0)}else{if("\n"===l)t.preventDefault(),ai(e,Xt,!1);else if(l===F)t.preventDefault(),ai(e,Yt,void 0);else if(null==l&&t.dataTransfer){const e=t.dataTransfer.getData("text/plain");t.preventDefault(),i.insertRawText(e)}else null!=l&&Qe(i,o,l,t.timeStamp,!0)?(t.preventDefault(),ai(e,Qt,l)):$e=l;Je=t.timeStamp}}))}(t,e)]);let ze=0,We=null,Je=0,$e=null;const Ke=new WeakMap;let Ue=!1,qe=!1,He=!1,Ze=!1,Ve=!1,Ge="",Xe=null,Ye=[0,"",0,"root",0];function Qe(t,e,n,r,o){const i=t.anchor,s=t.focus,l=i.getNode(),c=Er(),u=Si(pi(c)),d=null!==u?u.anchorNode:null,f=i.key,h=c.getElementByKey(f),g=n.length;return f!==s.key||!Dn(l)||(!o&&(!a||Je<r+50)||l.isDirty()&&g<2||$o(n))&&i.offset!==s.offset&&!l.isComposing()||bo(l)||l.isDirty()&&g>1||(o||!a)&&null!==h&&!l.isComposing()&&d!==wo(h)||null!==u&&null!==e&&(!e.collapsed||e.startContainer!==u.anchorNode||e.startOffset!==u.anchorOffset)||l.getFormat()!==t.format||l.getStyle()!==t.style||function(t,e){if(e.isSegmented())return!0;if(!t.isCollapsed())return!1;const n=t.anchor.offset,r=e.getParentOrThrow(),o=e.isToken();return 0===n?!e.canInsertTextBefore()||!r.canInsertTextBefore()&&!e.isComposing()||o||function(t){const e=t.getPreviousSibling();return(Dn(e)||qr(e)&&e.isInline())&&!e.canInsertTextAfter()}(e):n===e.getTextContentSize()&&(!e.canInsertTextAfter()||!r.canInsertTextAfter()&&!e.isComposing()||o)}(t,l)}function tn(t,e){return So(t)&&null!==t.nodeValue&&0!==e&&e!==t.nodeValue.length}function en(t,e,n){const{anchorNode:o,anchorOffset:i,focusNode:s,focusOffset:l}=t;Ue&&(Ue=!1,tn(o,i)&&tn(s,l)&&!Xe)||Jr(e,(()=>{if(!n)return void zo(null);if(!yo(e,o,s))return;let a=ar();if(Xe&&Un(a)&&a.isCollapsed()){const t=a.anchor,e=Xe.anchor;(t.key===e.key&&t.offset===e.offset+1||1===t.offset&&e.getNode().is(t.getNode().getPreviousSibling()))&&(a=Xe.clone(),zo(a))}if(Xe=null,Un(a)){const n=a.anchor,o=n.getNode();if(a.isCollapsed()){"Range"===t.type&&t.anchorNode===t.focusNode&&(a.dirty=!0);const i=pi(e).event,s=i?i.timeStamp:performance.now(),[l,c,u,d,f]=Ye,h=jo(),g=!1===e.isComposing()&&""===h.getTextContent();if(s<f+200&&n.offset===u&&n.key===d)nn(a,l,c);else if("text"===n.type)Dn(o)||r(141),rn(a,o);else if("element"===n.type&&!g){qr(o)||r(259);const t=n.getNode();t.isEmpty()?function(t,e){nn(t,e.getTextFormat(),e.getTextStyle())}(a,t):nn(a,0,"")}}else{const t=n.key,e=a.focus.key,r=a.getNodes(),o=r.length,s=a.isBackward(),c=s?l:i,u=s?i:l,d=s?e:t,f=s?t:e;let h=k,g=!1;for(let n=0;n<o;n++){const t=r[n],e=t.getTextContentSize();if(Dn(t)&&0!==e&&!(0===n&&t.__key===d&&c===e||n===o-1&&t.__key===f&&0===u)&&(g=!0,h&=t.getFormat(),0===h))break}a.format=g?h:0}}ai(e,Ht,void 0)}))}function nn(t,e,n){t.format===e&&t.style===n||(t.format=e,t.style=n,t.dirty=!0)}function rn(t,e){nn(t,e.getFormat(),e.getStyle())}function on(t){if(!t.getTargetRanges)return null;const e=t.getTargetRanges();return 0===e.length?null:e[0]}function sn(t,e){const n=t._compositionKey;if(Oo(null),null!==n&&null!=e){if(""===e){const e=Mo(n),r=wo(t.getElementByKey(n));return void(null!==r&&null!==r.nodeValue&&Dn(e)&&Zo(e,r.nodeValue,null,null,!0))}if("\n"===e[e.length-1]){const e=ar();if(Un(e)){const n=e.focus;return e.anchor.set(n.key,n.offset,n.type),void ai(t,ge,null)}}}Ho(!0,t,e)}function ln(t){let e=t.__lexicalEventHandles;return void 0===e&&(e=[],t.__lexicalEventHandles=e),e}const an=new Map;function cn(t){const e=function(t){const e=gi(t);return e?e.getSelection():null}(t.target);if(null===e)return;const n=vo(e.anchorNode);if(null===n)return;qe&&(qe=!1,Jr(n,(()=>{const r=cr(),o=e.anchorNode;(ki(o)||So(o))&&zo(lr(r,e,n,t))})));const r=Ko(n),o=r[r.length-1],i=o._key,s=an.get(i),l=s||o;l!==n&&en(e,l,!1),en(e,n,!0),n!==o?an.set(i,n):s&&an.delete(i)}function un(t){t._lexicalHandled=!0}function dn(t){return!0===t._lexicalHandled}function fn(t){const e=t.ownerDocument,n=Ke.get(e);void 0===n&&r(162);const o=n-1;o>=0||r(164),Ke.set(e,o),0===o&&e.removeEventListener("selectionchange",cn);const i=Co(t);xo(i)?(function(t){if(null!==t._parentEditor){const e=Ko(t),n=e[e.length-1]._key;an.get(n)===t&&an.delete(n)}else an.delete(t._key)}(i),t.__lexicalEditor=null):i&&r(198);const s=ln(t);for(let r=0;r<s.length;r++)s[r]();t.__lexicalEventHandles=[]}function hn(t,e,n){Tr();const r=t.__key,o=t.getParent();if(null===o)return;const i=function(t){const e=ar();if(!Un(e)||!qr(t))return e;const{anchor:n,focus:r}=e,o=n.getNode(),i=r.getNode();return hi(o,t)&&n.set(t.__key,0,"element"),hi(i,t)&&r.set(t.__key,0,"element"),e}(t);let s=!1;if(Un(i)&&e){const e=i.anchor,n=i.focus;e.key===r&&(fr(e,t,o,t.getPreviousSibling(),t.getNextSibling()),s=!0),n.key===r&&(fr(n,t,o,t.getPreviousSibling(),t.getNextSibling()),s=!0)}else Hn(i)&&e&&t.isSelected()&&t.selectPrevious();if(Un(i)&&e&&!s){const e=t.getIndexWithinParent();Ao(t),ur(i,o,e,-1)}else Ao(t);n||_i(o)||o.canBeEmpty()||!o.isEmpty()||hn(o,e),e&&Xr(o)&&o.isEmpty()&&o.selectEnd()}class gn{static getType(){r(64,this.name)}static clone(t){r(65,this.name)}afterCloneFrom(t){this.__parent=t.__parent,this.__next=t.__next,this.__prev=t.__prev,this.__state=t.__state}constructor(t){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),No(this,t)}getType(){return this.__type}isInline(){r(137,this.constructor.name)}isAttached(){let t=this.__key;for(;null!==t;){if("root"===t)return!0;const e=Mo(t);if(null===e)break;t=e.__parent}return!1}isSelected(t){const e=t||ar();if(null==e)return!1;const n=e.getNodes().some((t=>t.__key===this.__key));if(Dn(this))return n;if(Un(e)&&"element"===e.anchor.type&&"element"===e.focus.type){if(e.isCollapsed())return!1;const t=this.getParent();if(Vr(this)&&this.isInline()&&t){const n=e.isBackward()?e.focus:e.anchor;if(t.is(n.getNode())&&n.offset===t.getChildrenSize()&&this.is(t.getLastChild()))return!1}}return n}getKey(){return this.__key}getIndexWithinParent(){const t=this.getParent();if(null===t)return-1;let e=t.getFirstChild(),n=0;for(;null!==e;){if(this.is(e))return n;n++,e=e.getNextSibling()}return-1}getParent(){const t=this.getLatest().__parent;return null===t?null:Mo(t)}getParentOrThrow(){const t=this.getParent();return null===t&&r(66,this.__key),t}getTopLevelElement(){let t=this;for(;null!==t;){const e=t.getParent();if(_i(e))return qr(t)||t===this&&Vr(t)||r(194),t;t=e}return null}getTopLevelElementOrThrow(){const t=this.getTopLevelElement();return null===t&&r(67,this.__key),t}getParents(){const t=[];let e=this.getParent();for(;null!==e;)t.push(e),e=e.getParent();return t}getParentKeys(){const t=[];let e=this.getParent();for(;null!==e;)t.push(e.__key),e=e.getParent();return t}getPreviousSibling(){const t=this.getLatest().__prev;return null===t?null:Mo(t)}getPreviousSiblings(){const t=[],e=this.getParent();if(null===e)return t;let n=e.getFirstChild();for(;null!==n&&!n.is(this);)t.push(n),n=n.getNextSibling();return t}getNextSibling(){const t=this.getLatest().__next;return null===t?null:Mo(t)}getNextSiblings(){const t=[];let e=this.getNextSibling();for(;null!==e;)t.push(e),e=e.getNextSibling();return t}getCommonAncestor(t){const e=qr(this)?this:this.getParent(),n=qr(t)?t:t.getParent(),r=e&&n?ms(e,n):null;return r?r.commonAncestor:null}is(t){return null!=t&&this.__key===t.__key}isBefore(t){const e=ms(this,t);return null!==e&&("descendant"===e.type||("branch"===e.type?-1===hs(e):("same"!==e.type&&"ancestor"!==e.type&&r(279),!1)))}isParentOf(t){const e=ms(this,t);return null!==e&&"ancestor"===e.type}getNodesBetween(t){const e=this.isBefore(t),n=[],o=new Set;let i=this;for(;null!==i;){const s=i.__key;if(o.has(s)||(o.add(s),n.push(i)),i===t)break;const l=qr(i)?e?i.getFirstChild():i.getLastChild():null;if(null!==l){i=l;continue}const a=e?i.getNextSibling():i.getPreviousSibling();if(null!==a){i=a;continue}const c=i.getParentOrThrow();if(o.has(c.__key)||n.push(c),c===t)break;let u=null,d=c;do{if(null===d&&r(68),u=e?d.getNextSibling():d.getPreviousSibling(),d=d.getParent(),null===d)break;null!==u||o.has(d.__key)||n.push(d)}while(null===u);i=u}return e||n.reverse(),n}isDirty(){const t=Er()._dirtyLeaves;return null!==t&&t.has(this.__key)}getLatest(){const t=Mo(this.__key);return null===t&&r(113),t}getWritable(){Tr();const t=Ar(),e=Er(),n=t._nodeMap,r=this.__key,o=this.getLatest(),i=e._cloneNotNeeded,s=ar();if(null!==s&&s.setCachedNodes(null),i.has(r))return Eo(o),o;const l=Di(o);return i.add(r),Eo(l),n.set(r,l),l}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(t,e){r(70)}updateDOM(t,e,n){r(71)}exportDOM(t){return{element:this.createDOM(t._config,t)}}exportJSON(){const t=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...t}}static importJSON(t){r(18,this.name)}updateFromJSON(t){return function(t,e){const n=t.getWritable();return(e||n.__state)&&it(t).updateFromJSON(e),n}(this,t.$)}static transform(){return null}remove(t){hn(this,!0,t)}replace(t,e){Tr();let n=ar();null!==n&&(n=n.clone()),vi(this,t);const o=this.getLatest(),i=this.__key,s=t.__key,l=t.getWritable(),a=this.getParentOrThrow().getWritable(),c=a.__size;Ao(l);const u=o.getPreviousSibling(),d=o.getNextSibling(),f=o.__prev,h=o.__next,g=o.__parent;if(hn(o,!1,!0),null===u?a.__first=s:u.getWritable().__next=s,l.__prev=f,null===d?a.__last=s:d.getWritable().__prev=s,l.__next=h,l.__parent=g,a.__size=c,e&&(qr(this)&&qr(l)||r(139),this.getChildren().forEach((t=>{l.append(t)}))),Un(n)){zo(n);const t=n.anchor,e=n.focus;t.key===i&&$n(t,l),e.key===i&&$n(e,l)}return Po()===i&&Oo(s),l}insertAfter(t,e=!0){Tr(),vi(this,t);const n=this.getWritable(),r=t.getWritable(),o=r.getParent(),i=ar();let s=!1,l=!1;if(null!==o){const e=t.getIndexWithinParent();if(Ao(r),Un(i)){const t=o.__key,n=i.anchor,r=i.focus;s="element"===n.type&&n.key===t&&n.offset===e+1,l="element"===r.type&&r.key===t&&r.offset===e+1}}const a=this.getNextSibling(),c=this.getParentOrThrow().getWritable(),u=r.__key,d=n.__next;if(null===a?c.__last=u:a.getWritable().__prev=u,c.__size++,n.__next=u,r.__next=d,r.__prev=n.__key,r.__parent=n.__parent,e&&Un(i)){const t=this.getIndexWithinParent();ur(i,c,t+1);const e=c.__key;s&&i.anchor.set(e,t+2,"element"),l&&i.focus.set(e,t+2,"element")}return t}insertBefore(t,e=!0){Tr(),vi(this,t);const n=this.getWritable(),r=t.getWritable(),o=r.__key;Ao(r);const i=this.getPreviousSibling(),s=this.getParentOrThrow().getWritable(),l=n.__prev,a=this.getIndexWithinParent();null===i?s.__first=o:i.getWritable().__next=o,s.__size++,n.__prev=o,r.__prev=l,r.__next=n.__key,r.__parent=n.__parent;const c=ar();return e&&Un(c)&&ur(c,this.getParentOrThrow(),a),t}isParentRequired(){return!1}createParentElementNode(){return io()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(t,e){Tr();const n=this.getPreviousSibling(),r=this.getParentOrThrow();if(null===n)return r.select(0,0);if(qr(n))return n.select();if(!Dn(n)){const t=n.getIndexWithinParent()+1;return r.select(t,t)}return n.select(t,e)}selectNext(t,e){Tr();const n=this.getNextSibling(),r=this.getParentOrThrow();if(null===n)return r.select();if(qr(n))return n.select(0,0);if(!Dn(n)){const t=n.getIndexWithinParent();return r.select(t,t)}return n.select(t,e)}markDirty(){this.getWritable()}reconcileObservedMutation(t,e){this.markDirty()}}class pn extends gn{static getType(){return"linebreak"}static clone(t){return new pn(t.__key)}constructor(t){super(t)}getTextContent(){return"\n"}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:t=>function(t){const e=t.parentElement;if(null!==e&&Ei(e)){const n=e.firstChild;if(n===t||n.nextSibling===t&&xn(n)){const n=e.lastChild;if(n===t||n.previousSibling===t&&xn(n))return!0}}return!1}(t)||function(t){const e=t.parentElement;if(null!==e&&Ei(e)){const n=e.firstChild;if(n===t||n.nextSibling===t&&xn(n))return!1;const r=e.lastChild;if(r===t||r.previousSibling===t&&xn(r))return!0}return!1}(t)?null:{conversion:mn,priority:0}}}static importJSON(t){return _n().updateFromJSON(t)}}function mn(t){return{node:_n()}}function _n(){return xi(new pn)}function yn(t){return t instanceof pn}function xn(t){return So(t)&&/^( |\t|\r?\n)+$/.test(t.textContent||"")}function vn(t,e){return 16&e?"code":128&e?"mark":32&e?"sub":64&e?"sup":null}function Cn(t,e){return 1&e?"strong":2&e?"em":"span"}function bn(t,e,n,r,o){const i=r.classList;let s=ri(o,"base");void 0!==s&&i.add(...s),s=ri(o,"underlineStrikethrough");let l=!1;const a=e&w&&e&S;void 0!==s&&(n&w&&n&S?(l=!0,a||i.add(...s)):a&&i.remove(...s));for(const c in B){const t=B[c];if(s=ri(o,c),void 0!==s)if(n&t){if(l&&("underline"===c||"strikethrough"===c)){e&t&&i.remove(...s);continue}e&t&&(!a||"underline"!==c)&&"strikethrough"!==c||i.add(...s)}else e&t&&i.remove(...s)}}function Sn(t,e,n){const r=e.firstChild,o=n.isComposing(),i=t+(o?M:"");if(null==r)e.textContent=i;else{const t=r.nodeValue;if(t!==i)if(o||l){const[e,n,o]=function(t,e){const n=t.length,r=e.length;let o=0,i=0;for(;o<n&&o<r&&t[o]===e[o];)o++;for(;i+o<n&&i+o<r&&t[n-i-1]===e[r-i-1];)i++;return[o,n-o-i,e.slice(o,r-i)]}(t,i);0!==n&&r.deleteData(e,n),r.insertData(e,o)}else r.nodeValue=i}}function wn(t,e,n,r,o,i){Sn(o,t,e);const s=i.theme.text;void 0!==s&&bn(0,0,r,t,s)}function kn(t,e){const n=document.createElement(e);return n.appendChild(t),n}class Tn extends gn{static getType(){return"text"}static clone(t){return new Tn(t.__text,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__text=t.__text,this.__format=t.__format,this.__style=t.__style,this.__mode=t.__mode,this.__detail=t.__detail}constructor(t="",e){super(e),this.__text=t,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const t=this.getLatest();return K[t.__mode]}getStyle(){return this.getLatest().__style}isToken(){return 1===this.getLatest().__mode}isComposing(){return this.__key===Po()}isSegmented(){return 2===this.getLatest().__mode}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(t){const e=B[t];return!!(this.getFormat()&e)}isSimpleText(){return"text"===this.__type&&0===this.__mode}getTextContent(){return this.getLatest().__text}getFormatFlags(t,e){return ko(this.getLatest().__format,t,e)}canHaveFormat(){return!0}isInline(){return!0}createDOM(t,e){const n=this.__format,r=vn(0,n),o=Cn(0,n),i=null===r?o:r,s=document.createElement(i);let l=s;this.hasFormat("code")&&s.setAttribute("spellcheck","false"),null!==r&&(l=document.createElement(o),s.appendChild(l)),wn(l,this,0,n,this.__text,t);const a=this.__style;return""!==a&&(s.style.cssText=a),s}updateDOM(t,e,n){const o=this.__text,i=t.__format,s=this.__format,l=vn(0,i),a=vn(0,s),c=Cn(0,i),u=Cn(0,s);if((null===l?c:l)!==(null===a?u:a))return!0;if(l===a&&c!==u){const t=e.firstChild;null==t&&r(48);const i=document.createElement(u);return wn(i,this,0,s,o,n),e.replaceChild(i,t),!1}let d=e;null!==a&&null!==l&&(d=e.firstChild,null==d&&r(49)),Sn(o,d,this);const f=n.theme.text;void 0!==f&&i!==s&&bn(0,i,s,d,f);const h=t.__style,g=this.__style;return h!==g&&(e.style.cssText=g),!1}static importDOM(){return{"#text":()=>({conversion:Pn,priority:0}),b:()=>({conversion:An,priority:0}),code:()=>({conversion:Ln,priority:0}),em:()=>({conversion:Ln,priority:0}),i:()=>({conversion:Ln,priority:0}),mark:()=>({conversion:Ln,priority:0}),s:()=>({conversion:Ln,priority:0}),span:()=>({conversion:Nn,priority:0}),strong:()=>({conversion:Ln,priority:0}),sub:()=>({conversion:Ln,priority:0}),sup:()=>({conversion:Ln,priority:0}),u:()=>({conversion:Ln,priority:0})}}static importJSON(t){return In().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTextContent(t.text).setFormat(t.format).setDetail(t.detail).setMode(t.mode).setStyle(t.style)}exportDOM(t){let{element:e}=super.exportDOM(t);return ki(e)||r(132),e.style.whiteSpace="pre-wrap",this.hasFormat("bold")&&(e=kn(e,"b")),this.hasFormat("italic")&&(e=kn(e,"i")),this.hasFormat("strikethrough")&&(e=kn(e,"s")),this.hasFormat("underline")&&(e=kn(e,"u")),{element:e}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(t,e){}setFormat(t){const e=this.getWritable();return e.__format="string"==typeof t?B[t]:t,e}setDetail(t){const e=this.getWritable();return e.__detail="string"==typeof t?z[t]:t,e}setStyle(t){const e=this.getWritable();return e.__style=t,e}toggleFormat(t){const e=ko(this.getFormat(),t,null);return this.setFormat(e)}toggleDirectionless(){const t=this.getWritable();return t.__detail^=1,t}toggleUnmergeable(){const t=this.getWritable();return t.__detail^=2,t}setMode(t){const e=$[t];if(this.__mode===e)return this;const n=this.getWritable();return n.__mode=e,n}setTextContent(t){if(this.__text===t)return this;const e=this.getWritable();return e.__text=t,e}select(t,e){Tr();let n=t,r=e;const o=ar(),i=this.getTextContent(),s=this.__key;if("string"==typeof i){const t=i.length;void 0===n&&(n=t),void 0===r&&(r=t)}else n=0,r=0;if(!Un(o))return or(s,n,s,r,"text","text");{const t=Po();t!==o.anchor.key&&t!==o.focus.key||Oo(s),o.setTextNodeRange(this,n,this,r)}return o}selectStart(){return this.select(0,0)}selectEnd(){const t=this.getTextContentSize();return this.select(t,t)}spliceText(t,e,n,r){const o=this.getWritable(),i=o.__text,s=n.length;let l=t;l<0&&(l=s+l,l<0&&(l=0));const a=ar();if(r&&Un(a)){const e=t+s;a.setTextNodeRange(o,e,o,e)}const c=i.slice(0,l)+n+i.slice(l+e);return o.__text=c,o}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...t){Tr();const e=this.getLatest(),n=e.getTextContent();if(""===n)return[];const r=e.__key,o=Po(),i=n.length;t.sort(((t,e)=>t-e)),t.push(i);const s=[],l=t.length;for(let S=0,w=0;S<i&&w<=l;w++){const e=t[w];e>S&&(s.push(n.slice(S,e)),S=e)}const a=s.length;if(1===a)return[e];const c=s[0],u=e.getParent();let d;const f=e.getFormat(),h=e.getStyle(),g=e.__detail;let p=!1,m=null,_=null;const y=ar();if(Un(y)){const[t,e]=y.isBackward()?[y.focus,y.anchor]:[y.anchor,y.focus];"text"===t.type&&t.key===r&&(m=t),"text"===e.type&&e.key===r&&(_=e)}e.isSegmented()?(d=In(c),d.__format=f,d.__style=h,d.__detail=g,p=!0):(d=e.getWritable(),d.__text=c);const x=[d];for(let S=1;S<a;S++){const t=In(s[S]);t.__format=f,t.__style=h,t.__detail=g;const e=t.__key;o===r&&Oo(e),x.push(t)}const v=m?m.offset:null,C=_?_.offset:null;let b=0;for(const S of x){if(!m&&!_)break;const t=b+S.getTextContentSize();if(null!==m&&null!==v&&v<=t&&v>=b&&(m.set(S.getKey(),v-b,"text"),v<t&&(m=null)),null!==_&&null!==C&&C<=t&&C>=b){_.set(S.getKey(),C-b,"text");break}b=t}if(null!==u){!function(t){const e=t.getPreviousSibling(),n=t.getNextSibling();null!==e&&Eo(e),null!==n&&Eo(n)}(this);const t=u.getWritable(),e=this.getIndexWithinParent();p?(t.splice(e,0,x),this.remove()):t.splice(e,1,x),Un(y)&&ur(y,u,e,a-1)}return x}mergeWithSibling(t){const e=t===this.getPreviousSibling();e||t===this.getNextSibling()||r(50);const n=this.__key,o=t.__key,i=this.__text,s=i.length;Po()===o&&Oo(n);const l=ar();if(Un(l)){const r=l.anchor,i=l.focus;null!==r&&r.key===o&&hr(r,e,n,t,s),null!==i&&i.key===o&&hr(i,e,n,t,s)}const a=t.__text,c=e?a+i:i+a;this.setTextContent(c);const u=this.getWritable();return t.remove(),u}isTextEntity(){return!1}}function Nn(t){return{forChild:Rn(t.style),node:null}}function An(t){const e=t,n="normal"===e.style.fontWeight;return{forChild:Rn(e.style,n?void 0:"bold"),node:null}}const En=new WeakMap;function On(t){if(!ki(t))return!1;if("PRE"===t.nodeName)return!0;const e=t.style.whiteSpace;return"string"==typeof e&&e.startsWith("pre")}function Pn(t){const e=t;null===t.parentElement&&r(129);let n=e.textContent||"";if(null!==function(t){let e,n=t.parentNode;const r=[t];for(;null!==n&&void 0===(e=En.get(n))&&!On(n);)r.push(n),n=n.parentNode;const o=void 0===e?n:e;for(let i=0;i<r.length;i++)En.set(r[i],o);return o}(e)){const t=n.split(/(\r?\n|\t)/),e=[],r=t.length;for(let n=0;n<r;n++){const r=t[n];"\n"===r||"\r\n"===r?e.push(_n()):"\t"===r?e.push(Bn()):""!==r&&e.push(In(r))}return{node:e}}if(n=n.replace(/\r/g,"").replace(/[ \t\n]+/g," "),""===n)return{node:null};if(" "===n[0]){let t=e,r=!0;for(;null!==t&&null!==(t=Mn(t,!1));){const e=t.textContent||"";if(e.length>0){/[ \t\n]$/.test(e)&&(n=n.slice(1)),r=!1;break}}r&&(n=n.slice(1))}if(" "===n[n.length-1]){let t=e,r=!0;for(;null!==t&&null!==(t=Mn(t,!0));)if((t.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){r=!1;break}r&&(n=n.slice(0,n.length-1))}return""===n?{node:null}:{node:In(n)}}function Mn(t,e){let n=t;for(;;){let t;for(;null===(t=e?n.nextSibling:n.previousSibling);){const t=n.parentElement;if(null===t)return null;n=t}if(n=t,ki(n)){const t=n.style.display;if(""===t&&!Ai(n)||""!==t&&!t.startsWith("inline"))return null}let r=n;for(;null!==(r=e?n.firstChild:n.lastChild);)n=r;if(So(n))return n;if("BR"===n.nodeName)return null}}const Fn={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function Ln(t){const e=Fn[t.nodeName.toLowerCase()];return void 0===e?{node:null}:{forChild:Rn(t.style,e),node:null}}function In(t=""){return xi(new Tn(t))}function Dn(t){return t instanceof Tn}function Rn(t,e){const n=t.fontWeight,r=t.textDecoration.split(" "),o="700"===n||"bold"===n,i=r.includes("line-through"),s="italic"===t.fontStyle,l=r.includes("underline"),a=t.verticalAlign;return t=>Dn(t)?(o&&!t.hasFormat("bold")&&t.toggleFormat("bold"),i&&!t.hasFormat("strikethrough")&&t.toggleFormat("strikethrough"),s&&!t.hasFormat("italic")&&t.toggleFormat("italic"),l&&!t.hasFormat("underline")&&t.toggleFormat("underline"),"sub"!==a||t.hasFormat("subscript")||t.toggleFormat("subscript"),"super"!==a||t.hasFormat("superscript")||t.toggleFormat("superscript"),e&&!t.hasFormat(e)&&t.toggleFormat(e),t):t}class jn extends Tn{static getType(){return"tab"}static clone(t){return new jn(t.__key)}constructor(t){super("\t",t),this.__detail=2}static importDOM(){return null}createDOM(t){const e=super.createDOM(t),n=ri(t.theme,"tab");return void 0!==n&&e.classList.add(...n),e}static importJSON(t){return Bn().updateFromJSON(t)}setTextContent(t){return"\t"!==t&&""!==t&&r(126),super.setTextContent(t)}setDetail(t){return 2!==t&&r(127),this}setMode(t){return"normal"!==t&&r(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function Bn(){return xi(new jn)}class zn{constructor(t,e,n){this._selection=null,this.key=t,this.offset=e,this.type=n}is(t){return this.key===t.key&&this.offset===t.offset&&this.type===t.type}isBefore(t){return this.key===t.key?this.offset<t.offset:fs(Ts(_s(this,"next")),Ts(_s(t,"next")))<0}getNode(){const t=Mo(this.key);return null===t&&r(20),t}set(t,e,n,r){const o=this._selection,i=this.key;r&&this.key===t&&this.offset===e&&this.type===n||(this.key=t,this.offset=e,this.type=n,kr()||(Po()===i&&Oo(t),null!==o&&(o.setCachedNodes(null),o.dirty=!0)))}}function Wn(t,e,n){return new zn(t,e,n)}function Jn(t,e){let n=e.__key,r=t.offset,o="element";if(Dn(e)){o="text";const t=e.getTextContentSize();r>t&&(r=t)}else if(!qr(e)){const t=e.getNextSibling();if(Dn(t))n=t.__key,r=0,o="text";else{const t=e.getParent();t&&(n=t.__key,r=e.getIndexWithinParent()+1)}}t.set(n,r,o)}function $n(t,e){if(qr(e)){const n=e.getLastDescendant();qr(n)||Dn(n)?Jn(t,n):Jn(t,e)}else Jn(t,e)}class Kn{constructor(t){this._cachedNodes=null,this._nodes=t,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){if(!Hn(t))return!1;const e=this._nodes,n=t._nodes;return e.size===n.size&&Array.from(e).every((t=>n.has(t)))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(t){this.dirty=!0,this._nodes.add(t),this._cachedNodes=null}delete(t){this.dirty=!0,this._nodes.delete(t),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(t){return this._nodes.has(t)}clone(){return new Kn(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(t){}insertText(){}insertNodes(t){const e=this.getNodes(),n=e.length,r=e[n-1];let o;if(Dn(r))o=r.select();else{const t=r.getIndexWithinParent()+1;o=r.getParentOrThrow().select(t,t)}o.insertNodes(t);for(let i=0;i<n;i++)e[i].remove()}getNodes(){const t=this._cachedNodes;if(null!==t)return t;const e=this._nodes,n=[];for(const r of e){const t=Mo(r);null!==t&&n.push(t)}return kr()||(this._cachedNodes=n),n}getTextContent(){const t=this.getNodes();let e="";for(let n=0;n<t.length;n++)e+=t[n].getTextContent();return e}deleteNodes(){const t=this.getNodes();if((ar()||cr())===this&&t[0]){const e=ts(t[0],"next");xs(us(e,e))}for(const e of t)e.remove()}}function Un(t){return t instanceof qn}class qn{constructor(t,e,n,r){this.anchor=t,this.focus=e,t._selection=this,e._selection=this,this._cachedNodes=null,this.format=n,this.style=r,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){return!!Un(t)&&this.anchor.is(t.anchor)&&this.focus.is(t.focus)&&this.format===t.format&&this.style===t.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const t=this._cachedNodes;if(null!==t)return t;const e=function(t){const e=[],[n,r]=t.getTextSlices();n&&e.push(n.caret.origin);const o=new Set,i=new Set;for(const s of t)if(Gi(s)){const{origin:t}=s;0===e.length?o.add(t):(i.add(t),e.push(t))}else{const{origin:t}=s;qr(t)&&i.has(t)||e.push(t)}if(r&&e.push(r.caret.origin),Vi(t.focus)&&qr(t.focus.origin)&&null===t.focus.getNodeAtCaret())for(let s=os(t.focus.origin,"previous");Gi(s)&&o.has(s.origin)&&!s.origin.isEmpty()&&s.origin.is(e[e.length-1]);s=is(s))o.delete(s.origin),e.pop();for(;e.length>1;){const t=e[e.length-1];if(!qr(t)||i.has(t)||t.isEmpty()||o.has(t))break;e.pop()}if(0===e.length&&t.isCollapsed()){const n=Ts(t.anchor),r=Ts(t.anchor.getFlipped()),o=t=>Zi(t)?t.origin:t.getNodeAtCaret(),i=o(n)||o(r)||(t.anchor.getNodeAtCaret()?n.origin:r.origin);e.push(i)}return e}(Es(Cs(this),"next"));return kr()||(this._cachedNodes=e),e}setTextNodeRange(t,e,n,r){this.anchor.set(t.__key,e,"text"),this.focus.set(n.__key,r,"text")}getTextContent(){const t=this.getNodes();if(0===t.length)return"";const e=t[0],n=t[t.length-1],r=this.anchor,o=this.focus,i=r.isBefore(o),[s,l]=Vn(this);let a="",c=!0;for(let u=0;u<t.length;u++){const d=t[u];if(qr(d)&&!d.isInline())c||(a+="\n"),c=!d.isEmpty();else if(c=!1,Dn(d)){let t=d.getTextContent();d===e?d===n?"element"===r.type&&"element"===o.type&&o.offset!==r.offset||(t=s<l?t.slice(s,l):t.slice(l,s)):t=i?t.slice(s):t.slice(l):d===n&&(t=i?t.slice(0,l):t.slice(0,s)),a+=t}else!Vr(d)&&!yn(d)||d===n&&this.isCollapsed()||(a+=d.getTextContent())}return a}applyDOMRange(t){const e=Er(),n=e.getEditorState()._selection,r=nr(t.startContainer,t.startOffset,t.endContainer,t.endOffset,e,n);if(null===r)return;const[o,i]=r;this.anchor.set(o.key,o.offset,o.type,!0),this.focus.set(i.key,i.offset,i.type,!0),ct(this)}clone(){const t=this.anchor,e=this.focus;return new qn(Wn(t.key,t.offset,t.type),Wn(e.key,e.offset,e.type),this.format,this.style)}toggleFormat(t){this.format=ko(this.format,t,null),this.dirty=!0}setStyle(t){this.style=t,this.dirty=!0}hasFormat(t){const e=B[t];return!!(this.format&e)}insertRawText(t){const e=t.split(/(\r?\n|\t)/),n=[],r=e.length;for(let o=0;o<r;o++){const t=e[o];"\n"===t||"\r\n"===t?n.push(_n()):"\t"===t?n.push(Bn()):n.push(In(t))}this.insertNodes(n)}insertText(t){const e=this.anchor,n=this.focus,o=this.format,i=this.style;let s=e,l=n;!this.isCollapsed()&&n.isBefore(e)&&(s=n,l=e),"element"===s.type&&function(t,e,n,r){const o=t.getNode(),i=o.getChildAtIndex(t.offset),s=In(),l=Xr(o)?io().append(s):s;s.setFormat(n),s.setStyle(r),null===i?o.append(l):i.insertBefore(l),t.is(e)&&e.set(s.__key,0,"text"),t.set(s.__key,0,"text")}(s,l,o,i),"element"===l.type&&ys(l,Ts(_s(l,"next")));const a=s.offset;let c=l.offset;const u=this.getNodes(),d=u.length;let f=u[0];Dn(f)||r(26);const h=f.getTextContent().length,g=f.getParentOrThrow();let p=u[d-1];if(1===d&&"element"===l.type&&(c=h,l.set(s.key,c,"text")),this.isCollapsed()&&a===h&&(f.isSegmented()||f.isToken()||!f.canInsertTextAfter()||!g.canInsertTextAfter()&&null===f.getNextSibling())){let e=f.getNextSibling();if(Dn(e)&&e.canInsertTextBefore()&&!bo(e)||(e=In(),e.setFormat(o),e.setStyle(i),g.canInsertTextAfter()?f.insertAfter(e):g.insertAfter(e)),e.select(0,0),f=e,""!==t)return void this.insertText(t)}else if(this.isCollapsed()&&0===a&&(f.isSegmented()||f.isToken()||!f.canInsertTextBefore()||!g.canInsertTextBefore()&&null===f.getPreviousSibling())){let e=f.getPreviousSibling();if(Dn(e)&&!bo(e)||(e=In(),e.setFormat(o),g.canInsertTextBefore()?f.insertBefore(e):g.insertBefore(e)),e.select(),f=e,""!==t)return void this.insertText(t)}else if(f.isSegmented()&&a!==h){const t=In(f.getTextContent());t.setFormat(o),f.replace(t),f=t}else if(!this.isCollapsed()&&""!==t){const e=p.getParent();if(!g.canInsertTextBefore()||!g.canInsertTextAfter()||qr(e)&&(!e.canInsertTextBefore()||!e.canInsertTextAfter()))return this.insertText(""),er(this.anchor,this.focus,null),void this.insertText(t)}if(1===d){if(f.isToken()){const e=In(t);return e.select(),void f.replace(e)}const e=f.getFormat(),n=f.getStyle();if(a!==c||e===o&&n===i){if(function(t){return t instanceof jn}(f)){const e=In(t);return e.setFormat(o),e.setStyle(i),e.select(),void f.replace(e)}}else{if(""!==f.getTextContent()){const e=In(t);if(e.setFormat(o),e.setStyle(i),e.select(),0===a)f.insertBefore(e,!1);else{const[t]=f.splitText(a);t.insertAfter(e,!1)}return void(e.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=t.length))}f.setFormat(o),f.setStyle(i)}const r=c-a;f=f.spliceText(a,r,t,!0),""===f.getTextContent()?f.remove():"text"===this.anchor.type&&(f.isComposing()?this.anchor.offset-=t.length:(this.format=e,this.style=n))}else{const e=new Set([...f.getParentKeys(),...p.getParentKeys()]),n=qr(f)?f:f.getParentOrThrow();let r=qr(p)?p:p.getParentOrThrow(),o=p;if(!n.is(r)&&r.isInline())do{o=r,r=r.getParentOrThrow()}while(r.isInline());if("text"===l.type&&(0!==c||""===p.getTextContent())||"element"===l.type&&p.getIndexWithinParent()<c)if(Dn(p)&&!p.isToken()&&c!==p.getTextContentSize()){if(p.isSegmented()){const t=In(p.getTextContent());p.replace(t),p=t}Xr(l.getNode())||"text"!==l.type||(p=p.spliceText(0,c,"")),e.add(p.__key)}else{const t=p.getParentOrThrow();t.canBeEmpty()||1!==t.getChildrenSize()?p.remove():t.remove()}else e.add(p.__key);const i=r.getChildren(),s=new Set(u),g=n.is(r),m=n.isInline()&&null===f.getNextSibling()?n:f;for(let t=i.length-1;t>=0;t--){const e=i[t];if(e.is(f)||qr(e)&&e.isParentOf(f))break;e.isAttached()&&(!s.has(e)||e.is(o)?g||m.insertAfter(e,!1):e.remove())}if(!g){let t=r,n=null;for(;null!==t;){const r=t.getChildren(),o=r.length;(0===o||r[o-1].is(n))&&(e.delete(t.__key),n=t),t=t.getParent()}}if(f.isToken())if(a===h)f.select();else{const e=In(t);e.select(),f.replace(e)}else f=f.spliceText(a,h-a,t,!0),""===f.getTextContent()?f.remove():f.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=t.length);for(let t=1;t<d;t++){const n=u[t],r=n.__key;e.has(r)||n.remove()}}}removeText(){const t=ar()===this;vs(this,ks(Cs(this))),t&&ar()!==this&&zo(this)}formatText(t,e=null){if(this.isCollapsed())return this.toggleFormat(t),void Oo(null);const n=this.getNodes(),r=[];for(const x of n)Dn(x)&&r.push(x);const o=e=>{n.forEach((n=>{if(qr(n)){const r=n.getFormatFlags(t,e);n.setTextFormat(r)}}))},i=r.length;if(0===i)return this.toggleFormat(t),Oo(null),void o(e);const s=this.anchor,l=this.focus,a=this.isBackward(),c=a?l:s,u=a?s:l;let d=0,f=r[0],h="element"===c.type?0:c.offset;if("text"===c.type&&h===f.getTextContentSize()&&(d=1,f=r[1],h=0),null==f)return;const g=f.getFormatFlags(t,e);o(g);const p=i-1;let m=r[p];const _="text"===u.type?u.offset:m.getTextContentSize();if(f.is(m)){if(h===_)return;if(bo(f)||0===h&&_===f.getTextContentSize())f.setFormat(g);else{const t=f.splitText(h,_),e=0===h?t[0]:t[1];e.setFormat(g),"text"===c.type&&c.set(e.__key,0,"text"),"text"===u.type&&u.set(e.__key,_-h,"text")}return void(this.format=g)}0===h||bo(f)||([,f]=f.splitText(h),h=0),f.setFormat(g);const y=m.getFormatFlags(t,g);_>0&&(_===m.getTextContentSize()||bo(m)||([m]=m.splitText(_)),m.setFormat(y));for(let x=d+1;x<p;x++){const e=r[x],n=e.getFormatFlags(t,y);e.setFormat(n)}"text"===c.type&&c.set(f.__key,h,"text"),"text"===u.type&&u.set(m.__key,_,"text"),this.format=g|y}insertNodes(t){if(0===t.length)return;if(this.isCollapsed()||this.removeText(),"root"===this.anchor.key){this.insertParagraph();const e=ar();return Un(e)||r(134),e.insertNodes(t)}const e=(this.isBackward()?this.focus:this.anchor).getNode(),n=Pi(e,Oi),o=t[t.length-1];if(qr(n)&&"__language"in n){if("__language"in t[0])this.insertText(t[0].getTextContent());else{const e=mr(this);n.splice(e,0,t),o.selectEnd()}return}if(!t.some((t=>(qr(t)||Vr(t))&&!t.isInline()))){qr(n)||r(211,e.constructor.name,e.getType());const i=mr(this);return n.splice(i,0,t),void o.selectEnd()}const i=function(t){const e=io();let n=null;for(let r=0;r<t.length;r++){const o=t[r],i=yn(o);if(i||Vr(o)&&o.isInline()||qr(o)&&o.isInline()||Dn(o)||o.isParentRequired()){if(null===n&&(n=o.createParentElementNode(),e.append(n),i))continue;null!==n&&n.append(o)}else e.append(o),n=null}return e}(t),s=i.getLastDescendant(),l=i.getChildren(),a=qr(n)&&n.isEmpty()?null:this.insertParagraph(),c=l[l.length-1];let u=l[0];var d;qr(d=u)&&Oi(d)&&!d.isEmpty()&&qr(n)&&(!n.isEmpty()||n.canMergeWhenEmpty())&&(qr(n)||r(211,e.constructor.name,e.getType()),n.append(...u.getChildren()),u=l[1]),u&&(null===n&&r(212,e.constructor.name,e.getType()),function(t,e,n){const o=e.getParentOrThrow().getLastChild();let i=e;const s=[e];for(;i!==o;)i.getNextSibling()||r(140),i=i.getNextSibling(),s.push(i);let l=t;for(const r of s)l=l.insertAfter(r)}(n,u));const f=Pi(s,Oi);a&&qr(f)&&(a.canMergeWhenEmpty()||Oi(c))&&(f.append(...a.getChildren()),a.remove()),qr(n)&&n.isEmpty()&&n.remove(),s.selectEnd();const h=qr(n)?n.getLastChild():null;yn(h)&&f!==n&&h.remove()}insertParagraph(){if("root"===this.anchor.key){const t=io();return jo().splice(this.anchor.offset,0,[t]),t.select(),t}const t=mr(this),e=Pi(this.anchor.getNode(),Oi);qr(e)||r(213);const n=e.getChildAtIndex(t),o=n?[n,...n.getNextSiblings()]:[],i=e.insertNewAfter(this,!1);return i?(i.append(...o),i.selectStart(),i):null}insertLineBreak(t){const e=_n();if(this.insertNodes([e]),t){const t=e.getParentOrThrow(),n=e.getIndexWithinParent();t.select(n,n)}}extract(){const t=this.getNodes(),e=t.length,n=e-1,r=this.anchor,o=this.focus;let i=t[0],s=t[n];const[l,a]=Vn(this);if(0===e)return[];if(1===e){if(Dn(i)&&!this.isCollapsed()){const t=l>a?a:l,e=l>a?l:a,n=i.splitText(t,e),r=0===t?n[0]:n[1];return null!=r?[r]:[]}return[i]}const c=r.isBefore(o);if(Dn(i)){const e=c?l:a;e===i.getTextContentSize()?t.shift():0!==e&&([,i]=i.splitText(e),t[0]=i)}if(Dn(s)){const e=s.getTextContent().length,r=c?a:l;0===r?t.pop():r!==e&&([s]=s.splitText(r),t[n]=s)}return t}modify(t,e,n){if(yr(this,t,e,n))return;const r="move"===t,o=Er(),i=Si(pi(o));if(!i)return;const s=o._blockCursorElement,l=o._rootElement,a=this.focus.getNode();if(null===l||null===s||!qr(a)||a.isInline()||a.canBeEmpty()||bi(s,o,l),this.dirty){let t=ui(o,this.anchor.key),e=ui(o,this.focus.key);"text"===this.anchor.type&&(t=wo(t)),"text"===this.focus.type&&(e=wo(e)),t&&e&&gr(i,t,this.anchor.offset,e,this.focus.offset)}if(function(t,e,n,r){t.modify(e,n,r)}(i,t,e?"backward":"forward",n),i.rangeCount>0){const t=i.getRangeAt(0),n=this.anchor.getNode(),o=Xr(n)?n:function(t){let e=t.getParentOrThrow();for(;null!==e;){if(_i(e))return e;e=e.getParentOrThrow()}return e}(n);if(this.applyDOMRange(t),this.dirty=!0,!r){const n=this.getNodes(),r=[];let s=!1;for(let t=0;t<n.length;t++){const e=n[t];hi(e,o)?r.push(e):s=!0}if(s&&r.length>0)if(e){const t=r[0];qr(t)?t.selectStart():t.getParentOrThrow().selectStart()}else{const t=r[r.length-1];qr(t)?t.selectEnd():t.getParentOrThrow().selectEnd()}i.anchorNode===t.startContainer&&i.anchorOffset===t.startOffset||function(t){const e=t.focus,n=t.anchor,r=n.key,o=n.offset,i=n.type;n.set(e.key,e.offset,e.type,!0),e.set(r,o,i,!0)}(this)}}"lineboundary"===n&&yr(this,t,e,n,"decorators")}forwardDeletion(t,e,n){if(!n&&("element"===t.type&&qr(e)&&t.offset===e.getChildrenSize()||"text"===t.type&&t.offset===e.getTextContentSize())){const t=e.getParent(),n=e.getNextSibling()||(null===t?null:t.getNextSibling());if(qr(n)&&n.isShadowRoot())return!0}return!1}deleteCharacter(t){const e=this.isCollapsed();if(this.isCollapsed()){const e=this.anchor;let n=e.getNode();if(this.forwardDeletion(e,n,t))return;const r=as(_s(e,t?"previous":"next"));if(r.getTextSlices().every((t=>null===t||0===t.distance))){let t={type:"initial"};for(const e of r.iterNodeCarets("shadowRoot"))if(Gi(e))if(e.origin.isInline());else{if(e.origin.isShadowRoot()){if("merge-block"===t.type)break;if(qr(r.anchor.origin)&&r.anchor.origin.isEmpty()){const t=Ts(e);vs(this,us(t,t)),r.anchor.origin.remove()}return}"merge-next-block"!==t.type&&"merge-block"!==t.type||(t={block:t.block,caret:e,type:"merge-block"})}else{if("merge-block"===t.type)break;if(Vi(e)){if(qr(e.origin)){if(e.origin.isInline()){if(!e.origin.isParentOf(r.anchor.origin))break}else t={block:e.origin,type:"merge-next-block"};continue}if(Vr(e.origin)){if(e.origin.isIsolated());else if("merge-next-block"===t.type&&(e.origin.isKeyboardSelectable()||!e.origin.isInline())&&qr(r.anchor.origin)&&r.anchor.origin.isEmpty()){r.anchor.origin.remove();const t=sr();t.add(e.origin.getKey()),zo(t)}else e.origin.remove();return}break}}if("merge-block"===t.type){const{caret:e,block:n}=t;return vs(this,us(!e.origin.isEmpty()&&n.isEmpty()?bs(ts(n,e.direction)):r.anchor,e)),this.removeText()}}const o=this.focus;if(this.modify("extend",t,"character"),this.isCollapsed()){if(t&&0===e.offset&&Gn(this,e.getNode()))return}else{const r="text"===o.type?o.getNode():null;if(n="text"===e.type?e.getNode():null,null!==r&&r.isSegmented()){const e=o.offset,i=r.getTextContentSize();if(r.is(n)||t&&e!==i||!t&&0!==e)return void Yn(r,t,e)}else if(null!==n&&n.isSegmented()){const o=e.offset,i=n.getTextContentSize();if(n.is(r)||t&&0!==o||!t&&o!==i)return void Yn(n,t,o)}!function(t,e){const n=t.anchor,r=t.focus,o=n.getNode();if(o===r.getNode()&&"text"===n.type&&"text"===r.type){const t=n.offset,i=r.offset,s=t<i,l=s?t:i,a=s?i:t,c=a-1;l!==c&&function(t){return!($o(t)||Xn(t))}(o.getTextContent().slice(l,a))&&(e?r.set(r.key,c,r.type):n.set(n.key,c,n.type))}}(this,t)}}if(this.removeText(),t&&!e&&this.isCollapsed()&&"element"===this.anchor.type&&0===this.anchor.offset){const t=this.anchor.getNode();t.isEmpty()&&Xr(t.getParent())&&null===t.getPreviousSibling()&&Gn(this,t)}}deleteLine(t){this.isCollapsed()&&this.modify("extend",t,"lineboundary"),this.isCollapsed()?this.deleteCharacter(t):this.removeText()}deleteWord(t){if(this.isCollapsed()){const e=this.anchor,n=e.getNode();if(this.forwardDeletion(e,n,t))return;this.modify("extend",t,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function Hn(t){return t instanceof Kn}function Zn(t){const e=t.offset;if("text"===t.type)return e;const n=t.getNode();return e===n.getChildrenSize()?n.getTextContent().length:0}function Vn(t){const e=t.getStartEndPoints();if(null===e)return[0,0];const[n,r]=e;return"element"===n.type&&"element"===r.type&&n.key===r.key&&n.offset===r.offset?[0,0]:[Zn(n),Zn(r)]}function Gn(t,e){for(let n=e;n;n=n.getParent()){if(qr(n)){if(n.collapseAtStart(t))return!0;if(_i(n))break}if(n.getPreviousSibling())break}return!1}const Xn=(()=>{try{const t=new RegExp("\\p{Emoji}","u"),e=t.test.bind(t);if(e("\u2764\ufe0f")&&e("#\ufe0f\u20e3")&&e("\ud83d\udc4d"))return e}catch(r){}return()=>!1})();function Yn(t,e,n){const r=t,o=r.getTextContent().split(/(?=\s)/g),i=o.length;let s=0,l=0;for(let c=0;c<i;c++){const t=c===i-1;if(l=s,s+=o[c].length,e&&s===n||s>n||t){o.splice(c,1),t&&(l=void 0);break}}const a=o.join("").trim();""===a?r.remove():(r.setTextContent(a),r.select(l,l))}function Qn(t,e,n,o){let i,s=e;if(ki(t)){let l=!1;const a=t.childNodes,c=a.length,u=o._blockCursorElement;s===c&&(l=!0,s=c-1);let d=a[s],f=!1;if(d===u)d=a[s+1],f=!0;else if(null!==u){const n=u.parentNode;t===n&&e>Array.prototype.indexOf.call(n.children,u)&&s--}if(i=Wo(d),Dn(i))s=Jo(i,l);else{let a=Wo(t);if(null===a)return null;if(qr(a)){const c=o.getElementByKey(a.getKey());null===c&&r(214);const u=a.getDOMSlot(c);[a,s]=u.resolveChildIndex(a,c,t,e),qr(a)||r(215),l&&s>=a.getChildrenSize()&&(s=Math.max(0,a.getChildrenSize()-1));let d=a.getChildAtIndex(s);if(qr(d)&&function(t,e,n){const r=t.getParent();return null===n||null===r||!r.canBeEmpty()||r!==n.getNode()}(d,0,n)){const t=l?d.getLastDescendant():d.getFirstDescendant();null===t?a=d:(d=t,a=qr(d)?d:d.getParentOrThrow()),s=0}Dn(d)?(i=d,a=null,s=Jo(d,l)):d!==a&&l&&!f&&(qr(a)||r(216),s=Math.min(a.getChildrenSize(),s+1))}else{const n=a.getIndexWithinParent();s=0===e&&Vr(a)&&Wo(t)===a?n:n+1,a=a.getParentOrThrow()}if(qr(a))return Wn(a.__key,s,"element")}}else i=Wo(t);return Dn(i)?Wn(i.__key,s,"text"):null}function tr(t,e,n){const r=t.offset,o=t.getNode();if(0===r){const r=o.getPreviousSibling(),i=o.getParent();if(e){if((n||!e)&&null===r&&qr(i)&&i.isInline()){const e=i.getPreviousSibling();Dn(e)&&t.set(e.__key,e.getTextContent().length,"text")}}else qr(r)&&!n&&r.isInline()?t.set(r.__key,r.getChildrenSize(),"element"):Dn(r)&&t.set(r.__key,r.getTextContent().length,"text")}else if(r===o.getTextContent().length){const r=o.getNextSibling(),i=o.getParent();if(e&&qr(r)&&r.isInline())t.set(r.__key,0,"element");else if((n||e)&&null===r&&qr(i)&&i.isInline()&&!i.canInsertTextAfter()){const e=i.getNextSibling();Dn(e)&&t.set(e.__key,0,"text")}}}function er(t,e,n){if("text"===t.type&&"text"===e.type){const r=t.isBefore(e),o=t.is(e);tr(t,r,o),tr(e,!r,o),o&&e.set(t.key,t.offset,t.type);const i=Er();if(i.isComposing()&&i._compositionKey!==t.key&&Un(n)){const r=n.anchor,o=n.focus;t.set(r.key,r.offset,r.type,!0),e.set(o.key,o.offset,o.type,!0)}}}function nr(t,e,n,r,o,i){if(null===t||null===n||!yo(o,t,n))return null;const s=Qn(t,e,Un(i)?i.anchor:null,o);if(null===s)return null;const l=Qn(n,r,Un(i)?i.focus:null,o);if(null===l)return null;if("element"===s.type&&"element"===l.type){const e=Wo(t),r=Wo(n);if(Vr(e)&&Vr(r))return null}return er(s,l,i),[s,l]}function rr(t){return qr(t)&&!t.isInline()}function or(t,e,n,r,o,i){const s=Ar(),l=new qn(Wn(t,e,o),Wn(n,r,i),0,"");return l.dirty=!0,s._selection=l,l}function ir(){const t=Wn("root",0,"element"),e=Wn("root",0,"element");return new qn(t,e,0,"")}function sr(){return new Kn(new Set)}function lr(t,e,n,r){const o=n._window;if(null===o)return null;const i=r||o.event,s=i?i.type:void 0,l="selectionchange"===s,a=!H&&(l||"beforeinput"===s||"compositionstart"===s||"compositionend"===s||"click"===s&&i&&3===i.detail||"drop"===s||void 0===s);let c,u,d,f;if(Un(t)&&!a)return t.clone();if(null===e)return null;if(c=e.anchorNode,u=e.focusNode,d=e.anchorOffset,f=e.focusOffset,l&&Un(t)&&!yo(n,c,u))return t.clone();const h=nr(c,d,u,f,n,t);if(null===h)return null;const[g,p]=h;return new qn(g,p,Un(t)?t.format:0,Un(t)?t.style:"")}function ar(){return Ar()._selection}function cr(){return Er()._editorState._selection}function ur(t,e,n,r=1){const o=t.anchor,i=t.focus,s=o.getNode(),l=i.getNode();if(!e.is(s)&&!e.is(l))return;const a=e.__key;if(t.isCollapsed()){const e=o.offset;if(n<=e&&r>0||n<e&&r<0){const n=Math.max(0,e+r);o.set(a,n,"element"),i.set(a,n,"element"),dr(t)}}else{const s=t.isBackward(),l=s?i:o,c=l.getNode(),u=s?o:i,d=u.getNode();if(e.is(c)){const t=l.offset;(n<=t&&r>0||n<t&&r<0)&&l.set(a,Math.max(0,t+r),"element")}if(e.is(d)){const t=u.offset;(n<=t&&r>0||n<t&&r<0)&&u.set(a,Math.max(0,t+r),"element")}}dr(t)}function dr(t){const e=t.anchor,n=e.offset,r=t.focus,o=r.offset,i=e.getNode(),s=r.getNode();if(t.isCollapsed()){if(!qr(i))return;const t=i.getChildrenSize(),o=n>=t,s=o?i.getChildAtIndex(t-1):i.getChildAtIndex(n);if(Dn(s)){let t=0;o&&(t=s.getTextContentSize()),e.set(s.__key,t,"text"),r.set(s.__key,t,"text")}}else{if(qr(i)){const t=i.getChildrenSize(),r=n>=t,o=r?i.getChildAtIndex(t-1):i.getChildAtIndex(n);if(Dn(o)){let t=0;r&&(t=o.getTextContentSize()),e.set(o.__key,t,"text")}}if(qr(s)){const t=s.getChildrenSize(),e=o>=t,n=e?s.getChildAtIndex(t-1):s.getChildAtIndex(o);if(Dn(n)){let t=0;e&&(t=n.getTextContentSize()),r.set(n.__key,t,"text")}}}}function fr(t,e,n,r,o){let i=null,s=0,l=null;null!==r?(i=r.__key,Dn(r)?(s=r.getTextContentSize(),l="text"):qr(r)&&(s=r.getChildrenSize(),l="element")):null!==o&&(i=o.__key,Dn(o)?l="text":qr(o)&&(l="element")),null!==i&&null!==l?t.set(i,s,l):(s=e.getIndexWithinParent(),-1===s&&(s=n.getChildrenSize()),t.set(n.__key,s,"element"))}function hr(t,e,n,r,o){"text"===t.type?t.set(n,t.offset+(e?0:o),"text"):t.offset>r.getIndexWithinParent()&&t.set(t.key,t.offset-1,"element")}function gr(t,e,n,r,o){try{t.setBaseAndExtent(e,n,r,o)}catch(t){}}function pr(t){let e=ar()||cr();null===e&&(e=jo().selectEnd()),e.insertNodes(t)}function mr(t){let e=t;t.isCollapsed()||e.removeText();const n=ar();Un(n)&&(e=n),Un(e)||r(161);const o=e.anchor;let i=o.getNode(),s=o.offset;for(;!Oi(i);){const t=i;if([i,s]=_r(i,s),t.is(i))break}return s}function _r(t,e){const n=t.getParent();if(!n){const t=io();return jo().append(t),t.select(),[jo(),0]}if(Dn(t)){const r=t.splitText(e);if(0===r.length)return[n,t.getIndexWithinParent()];const o=0===e?0:1;return[n,r[0].getIndexWithinParent()+o]}if(!qr(t)||0===e)return[n,t.getIndexWithinParent()];const r=t.getChildAtIndex(e);if(r){const n=new qn(Wn(t.__key,e,"element"),Wn(t.__key,e,"element"),0,""),o=t.insertNewAfter(n);o&&o.append(r,...r.getNextSiblings())}return[n,t.getIndexWithinParent()+1]}function yr(t,e,n,r,o="decorators-and-blocks"){if("move"===e&&"character"===r&&!t.isCollapsed()){const[e,r]=n===t.isBackward()?[t.focus,t.anchor]:[t.anchor,t.focus];return r.set(e.key,e.offset,e.type),!0}const i=_s(t.focus,n?"previous":"next"),s="lineboundary"===r,l="move"===e;let a=i,c="decorators-and-blocks"===o;if(!Ns(a)){for(const t of a){c=!1;const{origin:e}=t;if(!Vr(e)||e.isIsolated()||(a=t,!s||!e.isInline()))break}if(c)for(const t of as(i).iterNodeCarets("extend"===e?"shadowRoot":"root")){if(Gi(t))t.origin.isInline()||(a=t);else{if(qr(t.origin))continue;Vr(t.origin)&&!t.origin.isInline()&&(a=t)}break}}if(a===i)return!1;if(l&&!s&&Vr(a.origin)&&a.origin.isKeyboardSelectable()){const t=sr();return t.add(a.origin.getKey()),zo(t),!0}return a=Ts(a),l&&ys(t.anchor,a),ys(t.focus,a),c||!s}let xr=null,vr=null,Cr=!1,br=!1,Sr=0;const wr={characterData:!0,childList:!0,subtree:!0};function kr(){return Cr||null!==xr&&xr._readOnly}function Tr(){Cr&&r(13)}function Nr(){Sr>99&&r(14)}function Ar(){return null===xr&&r(195,Or()),xr}function Er(){return null===vr&&r(196,Or()),vr}function Or(){let t=0;const e=new Set,n=go.version;if("undefined"!=typeof window)for(const o of document.querySelectorAll("[contenteditable]")){const r=Co(o);if(xo(r))t++;else if(r){let t=String(r.constructor.version||"<0.17.1");t===n&&(t+=" (separately built, likely a bundler configuration issue)"),e.add(t)}}let r=` Detected on the page: ${t} compatible editor(s) with version ${n}`;return e.size&&(r+=` and incompatible editors with versions ${Array.from(e).join(", ")}`),r}function Pr(t,e,n){const o=e.__type,i=function(t,e){const n=t._nodes.get(e);return void 0===n&&r(30,e),n}(t,o);let s=n.get(o);void 0===s&&(s=Array.from(i.transforms),n.set(o,s));const l=s.length;for(let r=0;r<l&&(s[r](e),e.isAttached());r++);}function Mr(t,e){return void 0!==t&&t.__key!==e&&t.isAttached()}function Fr(t,e){if(!e)return;const n=t._updateTags;let r=e;Array.isArray(e)||(r=[e]);for(const o of r)n.add(o)}function Lr(t){return Ir(t,Er()._nodes)}function Ir(t,e){const n=t.type,o=e.get(n);void 0===o&&r(17,n);const i=o.klass;t.type!==i.getType()&&r(18,i.name);const s=i.importJSON(t),l=t.children;if(qr(s)&&Array.isArray(l))for(let r=0;r<l.length;r++){const t=Ir(l[r],e);s.append(t)}return s}function Dr(t,e,n){const r=xr,o=Cr,i=vr;xr=e,Cr=!0,vr=t;try{return n()}finally{xr=r,Cr=o,vr=i}}function Rr(t,e){const n=t._pendingEditorState,r=t._rootElement,o=t._headless||null===r;if(null===n)return;const i=t._editorState,s=i._selection,l=n._selection,a=t._dirtyType!==v,c=xr,u=Cr,d=vr,f=t._updating,h=t._observer;let g=null;if(t._pendingEditorState=null,t._editorState=n,!o&&a&&null!==h){vr=t,xr=n,Cr=!1,t._updating=!0;try{const e=t._dirtyType,r=t._dirtyElements,o=t._dirtyLeaves;h.disconnect(),g=function(t,e,n,r,o,i){Ct="",kt="",bt="",Tt=r===b,At=null,ft=n,dt=n._config,ht=n._nodes,gt=ft._listeners.mutation,pt=o,mt=i,_t=t._nodeMap,yt=e._nodeMap,Nt=e._readOnly,xt=new Map(n._keyToDOMMap);const s=new Map;return vt=s,Jt("root",null),ft=void 0,ht=void 0,pt=void 0,mt=void 0,_t=void 0,yt=void 0,dt=void 0,xt=void 0,vt=void 0,s}(i,n,t,e,r,o)}catch(e){if(e instanceof Error&&t._onError(e),br)throw e;return fo(t,null,r,n),nt(t),t._dirtyType=b,br=!0,Rr(t,i),void(br=!1)}finally{h.observe(r,wr),t._updating=f,xr=c,Cr=u,vr=d}}n._readOnly||(n._readOnly=!0);const m=t._dirtyLeaves,_=t._dirtyElements,y=t._normalizedNodes,x=t._updateTags,C=t._deferred;a&&(t._dirtyType=v,t._cloneNotNeeded.clear(),t._dirtyLeaves=new Set,t._dirtyElements=new Map,t._normalizedNodes=new Set,t._updateTags=new Set),function(t,e){const n=t._decorators;let r=t._pendingDecorators||n;const o=e._nodeMap;let i;for(i in r)o.has(i)||(r===n&&(r=Do(t)),delete r[i])}(t,n);const S=o?null:Si(pi(t));if(t._editable&&null!==S&&(a||null===l||l.dirty)&&null!==r&&!x.has("skip-dom-selection")){vr=t,xr=n;try{if(null!==h&&h.disconnect(),a||null===l||l.dirty){const e=t._blockCursorElement;null!==e&&bi(e,t,r),function(t,e,n,r,o,i,s){const l=r.anchorNode,a=r.focusNode,c=r.anchorOffset,u=r.focusOffset,d=document.activeElement;if(o.has("collaboration")&&d!==i||null!==d&&_o(d))return;if(!Un(e))return void(null!==t&&yo(n,l,a)&&r.removeAllRanges());const f=e.anchor,h=e.focus,g=f.key,p=h.key,m=ui(n,g),_=ui(n,p),y=f.offset,x=h.offset,v=e.format,C=e.style,b=e.isCollapsed();let S=m,w=_,k=!1;if("text"===f.type){S=wo(m);const t=f.getNode();k=t.getFormat()!==v||t.getStyle()!==C}else Un(t)&&"text"===t.anchor.type&&(k=!0);var T,N,A,E,O;if("text"===h.type&&(w=wo(_)),null!==S&&null!==w&&(b&&(null===t||k||Un(t)&&(t.format!==v||t.style!==C))&&(T=v,N=C,A=y,E=g,O=performance.now(),Ye=[T,N,A,E,O]),c!==y||u!==x||l!==S||a!==w||"Range"===r.type&&b||(null!==d&&i.contains(d)||i.focus({preventScroll:!0}),"element"===f.type))){if(gr(r,S,y,w,x),!o.has("skip-scroll-into-view")&&e.isCollapsed()&&null!==i&&i===document.activeElement){const t=Un(e)&&"element"===e.anchor.type?S.childNodes[y]||null:r.rangeCount>0?r.getRangeAt(0):null;if(null!==t){let e;if(t instanceof Text){const n=document.createRange();n.selectNode(t),e=n.getBoundingClientRect()}else e=t.getBoundingClientRect();!function(t,e,n){const r=fi(n),o=gi(r);if(null===r||null===o)return;let{top:i,bottom:s}=e,l=0,a=0,c=n;for(;null!==c;){const e=c===r.body;if(e)l=0,a=pi(t).innerHeight;else{const t=c.getBoundingClientRect();l=t.top,a=t.bottom}let n=0;if(i<l?n=-(l-i):s>a&&(n=s-a),0!==n)if(e)o.scrollBy(0,n);else{const t=c.scrollTop;c.scrollTop+=n;const e=c.scrollTop-t;i-=e,s-=e}if(e)break;c=di(c)}}(n,e,i)}}Ue=!0}}(s,l,t,S,x,r)}!function(t,e,n){let r=t._blockCursorElement;if(Un(n)&&n.isCollapsed()&&"element"===n.anchor.type&&e.contains(document.activeElement)){const o=n.anchor,i=o.getNode(),s=o.offset;let l=!1,a=null;if(s===i.getChildrenSize())Ci(i.getChildAtIndex(s-1))&&(l=!0);else{const e=i.getChildAtIndex(s);if(null!==e&&Ci(e)){const n=e.getPreviousSibling();(null===n||Ci(n))&&(l=!0,a=t.getElementByKey(e.__key))}}if(l){const n=t.getElementByKey(i.__key);return null===r&&(t._blockCursorElement=r=function(t){const e=t.theme,n=document.createElement("div");n.contentEditable="false",n.setAttribute("data-lexical-cursor","true");let r=e.blockCursor;if(void 0!==r){if("string"==typeof r){const t=p(r);r=e.blockCursor=t}void 0!==r&&n.classList.add(...r)}return n}(t._config)),e.style.caretColor="transparent",void(null===a?n.appendChild(r):n.insertBefore(r,a))}}null!==r&&bi(r,t,e)}(t,r,l)}finally{null!==h&&h.observe(r,wr),vr=d,xr=c}}null!==g&&function(t,e,n,r,o){const i=Array.from(t._listeners.mutation),s=i.length;for(let l=0;l<s;l++){const[t,s]=i[l],a=e.get(s);void 0!==a&&t(a,{dirtyLeaves:r,prevEditorState:o,updateTags:n})}}(t,g,x,m,i),Un(l)||null===l||null!==s&&s.is(l)||t.dispatchCommand(Ht,void 0);const w=t._pendingDecorators;null!==w&&(t._decorators=w,t._pendingDecorators=null,jr("decorator",t,!0,w)),function(t,e,n){const r=Ro(e),o=Ro(n);r!==o&&jr("textcontent",t,!0,o)}(t,e||i,n),jr("update",t,!0,{dirtyElements:_,dirtyLeaves:m,editorState:n,mutatedNodes:g,normalizedNodes:y,prevEditorState:e||i,tags:x}),function(t,e){if(t._deferred=[],0!==e.length){const n=t._updating;t._updating=!0;try{for(let t=0;t<e.length;t++)e[t]()}finally{t._updating=n}}}(t,C),function(t){const e=t._updates;if(0!==e.length){const n=e.shift();if(n){const[e,r]=n;Wr(t,e,r)}}}(t)}function jr(t,e,n,...r){const o=e._updating;e._updating=n;try{const n=Array.from(e._listeners[t]);for(let t=0;t<n.length;t++)n[t].apply(null,r)}finally{e._updating=o}}function Br(t,e,n){if(!1===t._updating||vr!==t){let r=!1;return t.update((()=>{r=Br(t,e,n)})),r}const r=Ko(t);for(let o=4;o>=0;o--)for(let i=0;i<r.length;i++){const s=r[i]._commands.get(e);if(void 0!==s){const e=s[o];if(void 0!==e){const r=Array.from(e),o=r.length;for(let e=0;e<o;e++)if(!0===r[e](n,t))return!0}}}return!1}function zr(t,e){const n=t._updates;let o=e||!1;for(;0!==n.length;){const e=n.shift();if(e){const[n,i]=e;let s;if(void 0!==i){if(s=i.onUpdate,i.skipTransforms&&(o=!0),i.discrete){const e=t._pendingEditorState;null===e&&r(191),e._flushSync=!0}s&&t._deferred.push(s),Fr(t,i.tag)}n()}}return o}function Wr(t,e,n){const o=t._updateTags;let i,s=!1,l=!1;void 0!==n&&(i=n.onUpdate,Fr(t,n.tag),s=n.skipTransforms||!1,l=n.discrete||!1),i&&t._deferred.push(i);const a=t._editorState;let c=t._pendingEditorState,u=!1;(null===c||c._readOnly)&&(c=t._pendingEditorState=Yr(c||a),u=!0),c._flushSync=l;const d=xr,f=Cr,h=vr,g=t._updating;xr=c,Cr=!1,t._updating=!0,vr=t;const p=t._headless||null===t.getRootElement();try{u&&(p?null!==a._selection&&(c._selection=a._selection.clone()):c._selection=function(t,e){const n=t.getEditorState()._selection,r=Si(pi(t));return Un(n)||null==n?lr(n,r,t,e):n.clone()}(t,n&&n.event||null));const o=t._compositionKey;e(),s=zr(t,s),function(t,e){const n=e.getEditorState()._selection,r=t._selection;if(Un(r)){const t=r.anchor,e=r.focus;let o;if("text"===t.type&&(o=t.getNode(),o.selectionTransform(n,r)),"text"===e.type){const t=e.getNode();o!==t&&t.selectionTransform(n,r)}}}(c,t),t._dirtyType!==v&&(s?function(t,e){const n=e._dirtyLeaves,r=t._nodeMap;for(const o of n){const t=r.get(o);Dn(t)&&t.isAttached()&&t.isSimpleText()&&!t.isUnmergeable()&&at(t)}}(c,t):function(t,e){const n=e._dirtyLeaves,r=e._dirtyElements,o=t._nodeMap,i=Po(),s=new Map;let l=n,a=l.size,c=r,u=c.size;for(;a>0||u>0;){if(a>0){e._dirtyLeaves=new Set;for(const t of l){const r=o.get(t);Dn(r)&&r.isAttached()&&r.isSimpleText()&&!r.isUnmergeable()&&at(r),void 0!==r&&Mr(r,i)&&Pr(e,r,s),n.add(t)}if(l=e._dirtyLeaves,a=l.size,a>0){Sr++;continue}}e._dirtyLeaves=new Set,e._dirtyElements=new Map,c.delete("root")&&c.set("root",!0);for(const t of c){const n=t[0],l=t[1];if(r.set(n,l),!l)continue;const a=o.get(n);void 0!==a&&Mr(a,i)&&Pr(e,a,s)}l=e._dirtyLeaves,a=l.size,c=e._dirtyElements,u=c.size,Sr++}e._dirtyLeaves=n,e._dirtyElements=r}(c,t),zr(t),function(t,e,n,r){const o=t._nodeMap,i=e._nodeMap,s=[];for(const[l]of r){const t=i.get(l);void 0!==t&&(t.isAttached()||(qr(t)&&U(t,l,o,i,s,r),o.has(l)||r.delete(l),s.push(l)))}for(const l of s)i.delete(l);for(const l of n){const t=i.get(l);void 0===t||t.isAttached()||(o.has(l)||n.delete(l),i.delete(l))}}(a,c,t._dirtyLeaves,t._dirtyElements)),o!==t._compositionKey&&(c._flushSync=!0);const i=c._selection;if(Un(i)){const t=c._nodeMap,e=i.anchor.key,n=i.focus.key;void 0!==t.get(e)&&void 0!==t.get(n)||r(19)}else Hn(i)&&0===i._nodes.size&&(c._selection=null)}catch(r){return r instanceof Error&&t._onError(r),t._pendingEditorState=a,t._dirtyType=b,t._cloneNotNeeded.clear(),t._dirtyLeaves=new Set,t._dirtyElements.clear(),void Rr(t)}finally{xr=d,Cr=f,vr=h,t._updating=g,Sr=0}const m=t._dirtyType!==v||t._deferred.length>0||function(t,e){const n=e.getEditorState()._selection,r=t._selection;if(null!==r){if(r.dirty||!r.is(n))return!0}else if(null!==n)return!0;return!1}(c,t);m?c._flushSync?(c._flushSync=!1,Rr(t)):u&&mo((()=>{Rr(t)})):(c._flushSync=!1,u&&(o.clear(),t._deferred=[],t._pendingEditorState=null))}function Jr(t,e,n){t._updating?vr===t?e():t._updates.push([e,n]):Wr(t,e,n)}class $r{constructor(t,e,n){this.element=t,this.before=e||null,this.after=n||null}withBefore(t){return new $r(this.element,t,this.after)}withAfter(t){return new $r(this.element,this.before,t)}withElement(t){return this.element===t?this:new $r(t,this.before,this.after)}insertChild(t){const e=this.before||this.getManagedLineBreak();return null!==e&&e.parentElement!==this.element&&r(222),this.element.insertBefore(t,e),this}removeChild(t){return t.parentElement!==this.element&&r(223),this.element.removeChild(t),this}replaceChild(t,e){return e.parentElement!==this.element&&r(224),this.element.replaceChild(t,e),this}getFirstChild(){const t=this.after?this.after.nextSibling:this.element.firstChild;return t===this.before||t===this.getManagedLineBreak()?null:t}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(t){if(null===t)this.removeManagedLineBreak();else{const e="decorator"===t&&(u||c);this.insertManagedLineBreak(e)}}removeManagedLineBreak(){const t=this.getManagedLineBreak();if(t){const e=this.element,n="IMG"===t.nodeName?t.nextSibling:null;n&&e.removeChild(n),e.removeChild(t),e.__lexicalLineBreak=void 0}}insertManagedLineBreak(t){const e=this.getManagedLineBreak();if(e){if(t===("IMG"===e.nodeName))return;this.removeManagedLineBreak()}const n=this.element,r=this.before,o=document.createElement("br");if(n.insertBefore(o,r),t){const t=document.createElement("img");t.setAttribute("data-lexical-linebreak","true"),t.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",t.alt="",n.insertBefore(t,o),n.__lexicalLineBreak=t}else n.__lexicalLineBreak=o}getFirstChildOffset(){let t=0;for(let e=this.after;null!==e;e=e.previousSibling)t++;return t}resolveChildIndex(t,e,n,r){if(n===this.element){const e=this.getFirstChildOffset();return[t,Math.min(e+t.getChildrenSize(),Math.max(e,r))]}const o=Kr(e,n);o.push(r);const i=Kr(e,this.element);let s=t.getIndexWithinParent();for(let l=0;l<i.length;l++){const t=o[l],e=i[l];if(void 0===t||t<e)break;if(t>e){s+=1;break}}return[t.getParentOrThrow(),s]}}function Kr(t,e){const n=[];let o=e;for(;o!==t&&null!==o;o=e.parentNode){let t=0;for(let e=o.previousSibling;null!==e;e=e.previousSibling)t++;n.push(t)}return o!==t&&r(225),n.reverse()}class Ur extends gn{constructor(t){super(t),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(t){super.afterCloneFrom(t),this.__first=t.__first,this.__last=t.__last,this.__size=t.__size,this.__indent=t.__indent,this.__format=t.__format,this.__style=t.__style,this.__dir=t.__dir,this.__textFormat=t.__textFormat,this.__textStyle=t.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){const t=this.getFormat();return J[t]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){const t=[];let e=this.getFirstChild();for(;null!==e;)t.push(e),e=e.getNextSibling();return t}getChildrenKeys(){const t=[];let e=this.getFirstChild();for(;null!==e;)t.push(e.__key),e=e.getNextSibling();return t}getChildrenSize(){return this.getLatest().__size}isEmpty(){return 0===this.getChildrenSize()}isDirty(){const t=Er()._dirtyElements;return null!==t&&t.has(this.__key)}isLastChild(){const t=this.getLatest(),e=this.getParentOrThrow().getLastChild();return null!==e&&e.is(t)}getAllTextNodes(){const t=[];let e=this.getFirstChild();for(;null!==e;){if(Dn(e)&&t.push(e),qr(e)){const n=e.getAllTextNodes();t.push(...n)}e=e.getNextSibling()}return t}getFirstDescendant(){let t=this.getFirstChild();for(;qr(t);){const e=t.getFirstChild();if(null===e)break;t=e}return t}getLastDescendant(){let t=this.getLastChild();for(;qr(t);){const e=t.getLastChild();if(null===e)break;t=e}return t}getDescendantByIndex(t){const e=this.getChildren(),n=e.length;if(t>=n){const t=e[n-1];return qr(t)&&t.getLastDescendant()||t||null}const r=e[t];return qr(r)&&r.getFirstDescendant()||r||null}getFirstChild(){const t=this.getLatest().__first;return null===t?null:Mo(t)}getFirstChildOrThrow(){const t=this.getFirstChild();return null===t&&r(45,this.__key),t}getLastChild(){const t=this.getLatest().__last;return null===t?null:Mo(t)}getLastChildOrThrow(){const t=this.getLastChild();return null===t&&r(96,this.__key),t}getChildAtIndex(t){const e=this.getChildrenSize();let n,r;if(t<e/2){for(n=this.getFirstChild(),r=0;null!==n&&r<=t;){if(r===t)return n;n=n.getNextSibling(),r++}return null}for(n=this.getLastChild(),r=e-1;null!==n&&r>=t;){if(r===t)return n;n=n.getPreviousSibling(),r--}return null}getTextContent(){let t="";const e=this.getChildren(),n=e.length;for(let r=0;r<n;r++){const o=e[r];t+=o.getTextContent(),qr(o)&&r!==n-1&&!o.isInline()&&(t+=F)}return t}getTextContentSize(){let t=0;const e=this.getChildren(),n=e.length;for(let r=0;r<n;r++){const o=e[r];t+=o.getTextContentSize(),qr(o)&&r!==n-1&&!o.isInline()&&(t+=F.length)}return t}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(t){if(""!==t){const e=W[t];return!!(this.getFormat()&e)}return!1}hasTextFormat(t){const e=B[t];return!!(this.getTextFormat()&e)}getFormatFlags(t,e){return ko(this.getLatest().__textFormat,t,e)}getTextStyle(){return this.getLatest().__textStyle}select(t,e){Tr();const n=ar();let r=t,o=e;const i=this.getChildrenSize();if(!this.canBeEmpty())if(0===t&&0===e){const t=this.getFirstChild();if(Dn(t)||qr(t))return t.select(0,0)}else if(!(void 0!==t&&t!==i||void 0!==e&&e!==i)){const t=this.getLastChild();if(Dn(t)||qr(t))return t.select()}void 0===r&&(r=i),void 0===o&&(o=i);const s=this.__key;return Un(n)?(n.anchor.set(s,r,"element"),n.focus.set(s,o,"element"),n.dirty=!0,n):or(s,r,s,o,"element","element")}selectStart(){const t=this.getFirstDescendant();return t?t.selectStart():this.select()}selectEnd(){const t=this.getLastDescendant();return t?t.selectEnd():this.select()}clear(){const t=this.getWritable();return this.getChildren().forEach((t=>t.remove())),t}append(...t){return this.splice(this.getChildrenSize(),0,t)}setDirection(t){const e=this.getWritable();return e.__dir=t,e}setFormat(t){return this.getWritable().__format=""!==t?W[t]:0,this}setStyle(t){return this.getWritable().__style=t||"",this}setTextFormat(t){const e=this.getWritable();return e.__textFormat=t,e}setTextStyle(t){const e=this.getWritable();return e.__textStyle=t,e}setIndent(t){return this.getWritable().__indent=t,this}splice(t,e,n){const o=n.length,i=this.getChildrenSize(),s=this.getWritable();t+e<=i||r(226,String(t),String(e),String(i));const l=s.__key,a=[],c=[],u=this.getChildAtIndex(t+e);let d=null,f=i-e+o;if(0!==t)if(t===i)d=this.getLastChild();else{const e=this.getChildAtIndex(t);null!==e&&(d=e.getPreviousSibling())}if(e>0){let t=null===d?this.getFirstChild():d.getNextSibling();for(let n=0;n<e;n++){null===t&&r(100);const e=t.getNextSibling(),n=t.__key;Ao(t.getWritable()),c.push(n),t=e}}let h=d;for(let g=0;g<o;g++){const t=n[g];null!==h&&t.is(h)&&(d=h=h.getPreviousSibling());const e=t.getWritable();e.__parent===l&&f--,Ao(e);const o=t.__key;if(null===h)s.__first=o,e.__prev=null;else{const t=h.getWritable();t.__next=o,e.__prev=t.__key}t.__key===l&&r(76),e.__parent=l,a.push(o),h=t}if(t+e===i)null!==h&&(h.getWritable().__next=null,s.__last=h.__key);else if(null!==u){const t=u.getWritable();if(null!==h){const e=h.getWritable();t.__prev=h.__key,e.__next=u.__key}else t.__prev=null}if(s.__size=f,c.length){const t=ar();if(Un(t)){const e=new Set(c),n=new Set(a),{anchor:r,focus:o}=t;Hr(r,e,n)&&fr(r,r.getNode(),this,d,u),Hr(o,e,n)&&fr(o,o.getNode(),this,d,u),0!==f||this.canBeEmpty()||_i(this)||this.remove()}}return s}getDOMSlot(t){return new $r(t)}exportDOM(t){const{element:e}=super.exportDOM(t);if(ki(e)){const t=this.getIndent();t>0&&(e.style.paddingInlineStart=40*t+"px");const n=this.getDirection();n&&(e.dir=n)}return{element:e}}exportJSON(){const t={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},e=this.getTextFormat(),n=this.getTextStyle();return 0!==e&&(t.textFormat=e),""!==n&&(t.textStyle=n),t}updateFromJSON(t){return super.updateFromJSON(t).setFormat(t.format).setIndent(t.indent).setDirection(t.direction).setTextFormat(t.textFormat||0).setTextStyle(t.textStyle||"")}insertNewAfter(t,e){return null}canIndent(){return!0}collapseAtStart(t){return!1}excludeFromCopy(t){return!1}canReplaceWith(t){return!0}canInsertAfter(t){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(t){return!1}extractWithChild(t,e,n){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(t,e){const n=this.getDOMSlot(t);let r=n.getFirstChild();for(let o=this.getFirstChild();o;o=o.getNextSibling()){const t=e.getElementByKey(o.getKey());null!==t&&(null==r?(n.insertChild(t),r=t):r!==t&&n.replaceChild(t,r),r=r.nextSibling)}}}function qr(t){return t instanceof Ur}function Hr(t,e,n){let r=t.getNode();for(;r;){const t=r.__key;if(e.has(t)&&!n.has(t))return!0;r=r.getParent()}return!1}class Zr extends gn{decorate(t,e){r(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function Vr(t){return t instanceof Zr}class Gr extends Ur{static getType(){return"root"}static clone(){return new Gr}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){r(51)}getTextContent(){const t=this.__cachedText;return!kr()&&Er()._dirtyType!==v||null===t?super.getTextContent():t}remove(){r(52)}replace(t){r(53)}insertBefore(t){r(54)}insertAfter(t){r(55)}updateDOM(t,e){return!1}splice(t,e,n){for(const o of n)qr(o)||Vr(o)||r(282);return super.splice(t,e,n)}static importJSON(t){return jo().updateFromJSON(t)}collapseAtStart(){return!0}}function Xr(t){return t instanceof Gr}function Yr(t){return new eo(new Map(t._nodeMap))}function Qr(){return new eo(new Map([["root",new Gr]]))}function to(t){const e=t.exportJSON(),n=t.constructor;if(e.type!==n.getType()&&r(130,n.name),qr(t)){const o=e.children;Array.isArray(o)||r(59,n.name);const i=t.getChildren();for(let t=0;t<i.length;t++){const e=to(i[t]);o.push(e)}}return e}class eo{constructor(t,e){this._nodeMap=t,this._selection=e||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return 1===this._nodeMap.size&&null===this._selection}read(t,e){return Dr(e&&e.editor||null,this,t)}clone(t){const e=new eo(this._nodeMap,void 0===t?this._selection:t);return e._readOnly=!0,e}toJSON(){return Dr(null,this,(()=>({root:to(jo())})))}}class no extends Ur{static getType(){return"artificial"}createDOM(t){return document.createElement("div")}}class ro extends Ur{static getType(){return"paragraph"}static clone(t){return new ro(t.__key)}createDOM(t){const e=document.createElement("p"),n=ri(t.theme,"paragraph");return void 0!==n&&e.classList.add(...n),e}updateDOM(t,e,n){return!1}static importDOM(){return{p:t=>({conversion:oo,priority:0})}}exportDOM(t){const{element:e}=super.exportDOM(t);if(ki(e)){this.isEmpty()&&e.append(document.createElement("br"));const t=this.getFormatType();e.style.textAlign=t}return{element:e}}static importJSON(t){return io().updateFromJSON(t)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(t,e){const n=io();n.setTextFormat(t.format),n.setTextStyle(t.style);const r=this.getDirection();return n.setDirection(r),n.setFormat(this.getFormatType()),n.setStyle(this.getStyle()),this.insertAfter(n,e),n}collapseAtStart(){const t=this.getChildren();if(0===t.length||Dn(t[0])&&""===t[0].getTextContent().trim()){if(null!==this.getNextSibling())return this.selectNext(),this.remove(),!0;if(null!==this.getPreviousSibling())return this.selectPrevious(),this.remove(),!0}return!1}}function oo(t){const e=io();return t.style&&(e.setFormat(t.style.textAlign),Ri(t,e)),{node:e}}function io(){return xi(new ro)}function so(t){return t instanceof ro}const lo=0,ao=1,co=3,uo=4;function fo(t,e,n,r){const o=t._keyToDOMMap;o.clear(),t._editorState=Qr(),t._pendingEditorState=r,t._compositionKey=null,t._dirtyType=v,t._cloneNotNeeded.clear(),t._dirtyLeaves=new Set,t._dirtyElements.clear(),t._normalizedNodes=new Set,t._updateTags=new Set,t._updates=[],t._blockCursorElement=null;const i=t._observer;null!==i&&(i.disconnect(),t._observer=null),null!==e&&(e.textContent=""),null!==n&&(n.textContent="",o.set("root",n))}function ho(t){const e=t||{},n=vr,r=e.theme||{},o=void 0===t?n:e.parentEditor||null,i=e.disableEvents||!1,s=Qr(),l=e.namespace||(null!==o?o._config.namespace:Uo()),a=e.editorState,c=[Gr,Tn,pn,jn,ro,no,...e.nodes||[]],{onError:u,html:d}=e,f=void 0===e.editable||e.editable;let h;if(void 0===t&&null!==n)h=n._nodes;else{h=new Map;for(let t=0;t<c.length;t++){let e=c[t],n=null,r=null;if("function"!=typeof e){const t=e;e=t.replace,n=t.with,r=t.withKlass||null}const o=e.getType(),i=e.transform(),s=new Set;null!==i&&s.add(i),h.set(o,{exportDOM:d&&d.export?d.export.get(e):void 0,klass:e,replace:n,replaceWithKlass:r,transforms:s})}}const g=new go(s,o,h,{disableEvents:i,namespace:l,theme:r},u||console.error,function(t,e){const n=new Map,r=new Set,o=t=>{Object.keys(t).forEach((e=>{let r=n.get(e);void 0===r&&(r=[],n.set(e,r)),r.push(t[e])}))};return t.forEach((t=>{const e=t.klass.importDOM;if(null==e||r.has(e))return;r.add(e);const n=e.call(t.klass);null!==n&&o(n)})),e&&o(e),n}(h,d?d.import:void 0),f);return void 0!==a&&(g._pendingEditorState=a,g._dirtyType=b),g}class go{constructor(t,e,n,r,o,i,s){this._parentEditor=e,this._rootElement=null,this._editorState=t,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=r,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=v,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=Uo(),this._onError=o,this._htmlConversions=i,this._editable=s,this._headless=null!==e&&e._headless,this._window=null,this._blockCursorElement=null}isComposing(){return null!=this._compositionKey}registerUpdateListener(t){const e=this._listeners.update;return e.add(t),()=>{e.delete(t)}}registerEditableListener(t){const e=this._listeners.editable;return e.add(t),()=>{e.delete(t)}}registerDecoratorListener(t){const e=this._listeners.decorator;return e.add(t),()=>{e.delete(t)}}registerTextContentListener(t){const e=this._listeners.textcontent;return e.add(t),()=>{e.delete(t)}}registerRootListener(t){const e=this._listeners.root;return t(this._rootElement,null),e.add(t),()=>{t(null,this._rootElement),e.delete(t)}}registerCommand(t,e,n){void 0===n&&r(35);const o=this._commands;o.has(t)||o.set(t,[new Set,new Set,new Set,new Set,new Set]);const i=o.get(t);void 0===i&&r(36,String(t));const s=i[n];return s.add(e),()=>{s.delete(e),i.every((t=>0===t.size))&&o.delete(t)}}registerMutationListener(t,e,n){const r=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(t)).klass,o=this._listeners.mutation;o.set(e,r);const i=n&&n.skipInitialization;return void 0!==i&&i||this.initializeMutationListener(e,r),()=>{o.delete(e)}}getRegisteredNode(t){const e=this._nodes.get(t.getType());return void 0===e&&r(37,t.name),e}resolveRegisteredNodeAfterReplacements(t){for(;t.replaceWithKlass;)t=this.getRegisteredNode(t.replaceWithKlass);return t}initializeMutationListener(t,e){const n=this._editorState,r=Ii(n).get(e.getType());if(!r)return;const o=new Map;for(const i of r.keys())o.set(i,"created");o.size>0&&t(o,{dirtyLeaves:new Set,prevEditorState:n,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(t,e){const n=this.getRegisteredNode(t);return n.transforms.add(e),n}registerNodeTransform(t,e){const n=this.registerNodeTransformToKlass(t,e),r=[n],o=n.replaceWithKlass;if(null!=o){const t=this.registerNodeTransformToKlass(o,e);r.push(t)}return function(t,e){const n=Ii(t.getEditorState()),r=[];for(const o of e){const t=n.get(o);t&&r.push(t)}0!==r.length&&t.update((()=>{for(const t of r)for(const e of t.keys()){const t=Mo(e);t&&t.markDirty()}}),null===t._pendingEditorState?{tag:"history-merge"}:void 0)}(this,r.map((t=>t.klass.getType()))),()=>{r.forEach((t=>t.transforms.delete(e)))}}hasNode(t){return this._nodes.has(t.getType())}hasNodes(t){return t.every(this.hasNode.bind(this))}dispatchCommand(t,e){return ai(this,t,e)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(t){const e=this._rootElement;if(t!==e){const n=ri(this._config.theme,"root"),r=this._pendingEditorState||this._editorState;if(this._rootElement=t,fo(this,e,t,r),null!==e&&(this._config.disableEvents||fn(e),null!=n&&e.classList.remove(...n)),null!==t){const e=gi(t),r=t.style;r.userSelect="text",r.whiteSpace="pre-wrap",r.wordBreak="break-word",t.setAttribute("data-lexical-editor","true"),this._window=e,this._dirtyType=b,nt(this),this._updateTags.add("history-merge"),Rr(this),this._config.disableEvents||function(t,e){const n=t.ownerDocument,r=Ke.get(n);(void 0===r||r<1)&&n.addEventListener("selectionchange",cn),Ke.set(n,(r||0)+1),t.__lexicalEditor=e;const o=ln(t);for(let i=0;i<Be.length;i++){const[n,r]=Be[i],s="function"==typeof r?t=>{dn(t)||(un(t),(e.isEditable()||"click"===n)&&r(t,e))}:t=>{if(dn(t))return;un(t);const r=e.isEditable();switch(n){case"cut":return r&&ai(e,Ee,t);case"copy":return ai(e,Ae,t);case"paste":return r&&ai(e,te,t);case"dragstart":return r&&ai(e,ke,t);case"dragover":return r&&ai(e,Te,t);case"dragend":return r&&ai(e,Ne,t);case"focus":return r&&ai(e,Ie,t);case"blur":return r&&ai(e,De,t);case"drop":return r&&ai(e,Se,t)}};t.addEventListener(n,s),o.push((()=>{t.removeEventListener(n,s)}))}}(t,this),null!=n&&t.classList.add(...n)}else this._window=null,this._updateTags.add("history-merge"),Rr(this);jr("root",this,!1,t,e)}}getElementByKey(t){return this._keyToDOMMap.get(t)||null}getEditorState(){return this._editorState}setEditorState(t,e){t.isEmpty()&&r(38);let n=t;n._readOnly&&(n=Yr(t),n._selection=t._selection?t._selection.clone():null),et(this);const o=this._pendingEditorState,i=this._updateTags,s=void 0!==e?e.tag:null;null===o||o.isEmpty()||(null!=s&&i.add(s),Rr(this)),this._pendingEditorState=n,this._dirtyType=b,this._dirtyElements.set("root",!1),this._compositionKey=null,null!=s&&i.add(s),this._updating||Rr(this)}parseEditorState(t,e){return function(t,e,n){const r=Qr(),o=xr,i=Cr,s=vr,l=e._dirtyElements,a=e._dirtyLeaves,c=e._cloneNotNeeded,u=e._dirtyType;e._dirtyElements=new Map,e._dirtyLeaves=new Set,e._cloneNotNeeded=new Set,e._dirtyType=0,xr=r,Cr=!1,vr=e;try{const o=e._nodes;Ir(t.root,o),n&&n(),r._readOnly=!0}catch(t){t instanceof Error&&e._onError(t)}finally{e._dirtyElements=l,e._dirtyLeaves=a,e._cloneNotNeeded=c,e._dirtyType=u,xr=o,Cr=i,vr=s}return r}("string"==typeof t?JSON.parse(t):t,this,e)}read(t){return Rr(this),this.getEditorState().read(t,{editor:this})}update(t,e){!function(t,e,n){t._updating?t._updates.push([e,n]):Wr(t,e,n)}(this,t,e)}focus(t,e={}){const n=this._rootElement;null!==n&&(n.setAttribute("autocapitalize","off"),Jr(this,(()=>{const r=ar(),o=jo();null!==r?r.dirty=!0:0!==o.getChildrenSize()&&("rootStart"===e.defaultSelection?o.selectStart():o.selectEnd()),function(t){Tr(),Er()._updateTags.add(t)}("focus"),function(t){Tr(),Er()._deferred.push(t)}((()=>{n.removeAttribute("autocapitalize"),t&&t()}))})),null===this._pendingEditorState&&n.removeAttribute("autocapitalize"))}blur(){const t=this._rootElement;null!==t&&t.blur();const e=Si(this._window);null!==e&&e.removeAllRanges()}isEditable(){return this._editable}setEditable(t){this._editable!==t&&(this._editable=t,jr("editable",this,!0,t))}toJSON(){return{editorState:this._editorState.toJSON()}}}go.version="0.28.0+prod.esm";let po=1;const mo="function"==typeof queueMicrotask?queueMicrotask:t=>{Promise.resolve().then(t)};function _o(t){const e=document.activeElement;if(!ki(e))return!1;const n=e.nodeName;return Vr(Io(t))&&("INPUT"===n||"TEXTAREA"===n||"true"===e.contentEditable&&null==Co(e))}function yo(t,e,n){const r=t.getRootElement();try{return null!==r&&r.contains(e)&&r.contains(n)&&null!==e&&!_o(e)&&vo(e)===t}catch(t){return!1}}function xo(t){return t instanceof go}function vo(t){let e=t;for(;null!=e;){const t=Co(e);if(xo(t))return t;e=di(e)}return null}function Co(t){return t?t.__lexicalEditor:null}function bo(t){return t.isToken()||t.isSegmented()}function So(t){return Ti(t)&&t.nodeType===_}function wo(t){let e=t;for(;null!=e;){if(So(e))return e;e=e.firstChild}return null}function ko(t,e,n){const r=B[e];if(null!==n&&(t&r)==(n&r))return t;let o=t^r;return"subscript"===e?o&=~B.superscript:"superscript"===e?o&=~B.subscript:"lowercase"===e?(o&=~B.uppercase,o&=~B.capitalize):"uppercase"===e?(o&=~B.lowercase,o&=~B.capitalize):"capitalize"===e&&(o&=~B.lowercase,o&=~B.uppercase),o}function To(t){return Dn(t)||yn(t)||Vr(t)}function No(t,e){if(null!=e)return void(t.__key=e);Tr(),Nr();const n=Er(),r=Ar(),o=""+po++;r._nodeMap.set(o,t),qr(t)?n._dirtyElements.set(o,!0):n._dirtyLeaves.add(o),n._cloneNotNeeded.add(o),n._dirtyType=C,t.__key=o}function Ao(t){const e=t.getParent();if(null!==e){const n=t.getWritable(),r=e.getWritable(),o=t.getPreviousSibling(),i=t.getNextSibling();if(null===o)if(null!==i){const t=i.getWritable();r.__first=i.__key,t.__prev=null}else r.__first=null;else{const t=o.getWritable();if(null!==i){const e=i.getWritable();e.__prev=t.__key,t.__next=e.__key}else t.__next=null;n.__prev=null}if(null===i)if(null!==o){const t=o.getWritable();r.__last=o.__key,t.__next=null}else r.__last=null;else{const t=i.getWritable();if(null!==o){const e=o.getWritable();e.__next=t.__key,t.__prev=e.__key}else t.__prev=null;n.__next=null}r.__size--,n.__parent=null}}function Eo(t){Nr();const e=t.getLatest(),n=e.__parent,r=Ar(),o=Er(),i=r._nodeMap,s=o._dirtyElements;null!==n&&function(t,e,n){let r=t;for(;null!==r;){if(n.has(r))return;const t=e.get(r);if(void 0===t)break;n.set(r,!1),r=t.__parent}}(n,i,s);const l=e.__key;o._dirtyType=C,qr(t)?s.set(l,!0):o._dirtyLeaves.add(l)}function Oo(t){Tr();const e=Er(),n=e._compositionKey;if(t!==n){if(e._compositionKey=t,null!==n){const t=Mo(n);null!==t&&t.getWritable()}if(null!==t){const e=Mo(t);null!==e&&e.getWritable()}}}function Po(){return kr()?null:Er()._compositionKey}function Mo(t,e){const n=(e||Ar())._nodeMap.get(t);return void 0===n?null:n}function Fo(t,e){const n=Lo(t,Er());return void 0!==n?Mo(n,e):null}function Lo(t,e){return t[`__lexicalKey_${e._key}`]}function Io(t,e){let n=t;for(;null!=n;){const t=Fo(n,e);if(null!==t)return t;n=di(n)}return null}function Do(t){const e=t._decorators,n=Object.assign({},e);return t._pendingDecorators=n,n}function Ro(t){return t.read((()=>jo().getTextContent()))}function jo(){return Bo(Ar())}function Bo(t){return t._nodeMap.get("root")}function zo(t){Tr();const e=Ar();null!==t&&(t.dirty=!0,t.setCachedNodes(null)),e._selection=t}function Wo(t){const e=Er(),n=function(t,e){let n=t;for(;null!=n;){const t=Lo(n,e);if(void 0!==t)return t;n=di(n)}return null}(t,e);return null===n?t===e.getRootElement()?Mo("root"):null:Mo(n)}function Jo(t,e){return e?t.getTextContentSize():0}function $o(t){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(t)}function Ko(t){const e=[];let n=t;for(;null!==n;)e.push(n),n=n._parentEditor;return e}function Uo(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function qo(t){return So(t)?t.nodeValue:null}function Ho(t,e,n){const r=Si(pi(e));if(null===r)return;const o=r.anchorNode;let{anchorOffset:i,focusOffset:s}=r;if(null!==o){let e=qo(o);const r=Io(o);if(null!==e&&Dn(r)){if(e===M&&n){const t=n.length;e=n,i=t,s=t}null!==e&&Zo(r,e,i,s,t)}}}function Zo(t,e,n,r,o){let i=t;if(i.isAttached()&&(o||!i.isDirty())){const s=i.isComposing();let l=e;(s||o)&&e[e.length-1]===M&&(l=e.slice(0,-1));const a=i.getTextContent();if(o||l!==a){if(""===l){if(Oo(null),c||u||g)i.remove();else{const t=Er();setTimeout((()=>{t.update((()=>{i.isAttached()&&i.remove()}))}),20)}return}const e=i.getParent(),o=cr(),a=i.getTextContentSize(),d=Po(),f=i.getKey();if(i.isToken()||null!==d&&f===d&&!s||Un(o)&&(null!==e&&!e.canInsertTextBefore()&&0===o.anchor.offset||o.anchor.key===t.__key&&0===o.anchor.offset&&!i.canInsertTextBefore()&&!s||o.focus.key===t.__key&&o.focus.offset===a&&!i.canInsertTextAfter()&&!s))return void i.markDirty();const h=ar();if(!Un(h)||null===n||null===r)return void i.setTextContent(l);if(h.setTextNodeRange(i,n,i,r),i.isSegmented()){const t=In(i.getTextContent());i.replace(t),i=t}i.setTextContent(l)}}}function Vo(t){return"ArrowLeft"===t}function Go(t){return"ArrowRight"===t}function Xo(t,e){return s?t:e}function Yo(t){return"Enter"===t}function Qo(t){return"Backspace"===t}function ti(t){return"Delete"===t}function ei(t,e,n){return"a"===t.toLowerCase()&&Xo(e,n)}function ni(t){const e=jo();if(Un(t)){const e=t.anchor,n=t.focus,r=e.getNode().getTopLevelElementOrThrow().getParentOrThrow();return e.set(r.getKey(),0,"element"),n.set(r.getKey(),r.getChildrenSize(),"element"),ct(t),t}{const t=e.select(0,e.getChildrenSize());return zo(ct(t)),t}}function ri(t,e){void 0===t.__lexicalClassNameCache&&(t.__lexicalClassNameCache={});const n=t.__lexicalClassNameCache,r=n[e];if(void 0!==r)return r;const o=t[e];if("string"==typeof o){const t=p(o);return n[e]=t,t}return o}function oi(t,e,n,o,i){if(0===n.size)return;const s=o.__type,l=o.__key,a=e.get(s);void 0===a&&r(33,s);const c=a.klass;let u=t.get(c);void 0===u&&(u=new Map,t.set(c,u));const d=u.get(l),f="destroyed"===d&&"created"===i;(void 0===d||f)&&u.set(l,f?"updated":i)}function ii(t,e,n){const r=t.getParent();let o=n,i=t;return null!==r&&(e&&0===n?(o=i.getIndexWithinParent(),i=r):e||n!==i.getChildrenSize()||(o=i.getIndexWithinParent()+1,i=r)),i.getChildAtIndex(e?o-1:o)}function si(t,e){const n=t.offset;if("element"===t.type)return ii(t.getNode(),e,n);{const r=t.getNode();if(e&&0===n||!e&&n===r.getTextContentSize()){const t=e?r.getPreviousSibling():r.getNextSibling();return null===t?ii(r.getParentOrThrow(),e,r.getIndexWithinParent()+(e?0:1)):t}}return null}function li(t){const e=pi(t).event,n=e&&e.inputType;return"insertFromPaste"===n||"insertFromPasteAsQuotation"===n}function ai(t,e,n){return Br(t,e,n)}function ci(t){return!Xr(t)&&!t.isLastChild()&&!t.isInline()}function ui(t,e){const n=t._keyToDOMMap.get(e);return void 0===n&&r(75,e),n}function di(t){const e=t.assignedSlot||t.parentElement;return Ni(e)?e.host:e}function fi(t){return function(t){return Ti(t)&&t.nodeType===y}(t)?t:ki(t)?t.ownerDocument:null}function hi(t,e){let n=t.getParent();for(;null!==n;){if(n.is(e))return!0;n=n.getParent()}return!1}function gi(t){const e=fi(t);return e?e.defaultView:null}function pi(t){const e=t._window;return null===e&&r(78),e}function mi(t){return qr(t)&&t.isInline()||Vr(t)&&t.isInline()}function _i(t){return Xr(t)||qr(t)&&t.isShadowRoot()}function yi(t){const e=t.constructor.clone(t);return No(e,null),e}function xi(t){const e=Er(),n=t.constructor.getType(),o=e._nodes.get(n);void 0===o&&r(200,t.constructor.name,n);const{replace:i,replaceWithKlass:s}=o;if(null!==i){const e=i(t),o=e.constructor;return null!==s?e instanceof s||r(201,s.name,s.getType(),o.name,o.getType(),t.constructor.name,n):e instanceof t.constructor&&o!==t.constructor||r(202,o.name,o.getType(),t.constructor.name,n),e.__key===t.__key&&r(203,t.constructor.name,n,o.name,o.getType()),e}return t}function vi(t,e){!Xr(t.getParent())||qr(e)||Vr(e)||r(99)}function Ci(t){return(Vr(t)||qr(t)&&!t.canBeEmpty())&&!t.isInline()}function bi(t,e,n){n.style.removeProperty("caret-color"),e._blockCursorElement=null;const r=t.parentElement;null!==r&&r.removeChild(t)}function Si(t){return o?(t||window).getSelection():null}function wi(t){return ki(t)&&"A"===t.tagName}function ki(t){return Ti(t)&&t.nodeType===m}function Ti(t){return"object"==typeof t&&null!==t&&"nodeType"in t&&"number"==typeof t.nodeType}function Ni(t){return Ti(t)&&t.nodeType===x}function Ai(t){const e=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return null!==t.nodeName.match(e)}function Ei(t){const e=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return null!==t.nodeName.match(e)}function Oi(t){if(Vr(t)&&!t.isInline())return!0;if(!qr(t)||_i(t))return!1;const e=t.getFirstChild(),n=null===e||yn(e)||Dn(e)||e.isInline();return!t.isInline()&&!1!==t.canBeEmpty()&&n}function Pi(t,e){let n=t;for(;null!==n&&null!==n.getParent()&&!e(n);)n=n.getParentOrThrow();return e(n)?n:null}function Mi(){return Er()}const Fi=new WeakMap,Li=new Map;function Ii(t){if(!t._readOnly&&t.isEmpty())return Li;t._readOnly||r(192);let e=Fi.get(t);return e||(e=function(t){const e=new Map;for(const[n,r]of t._nodeMap){const t=r.__type;let o=e.get(t);o||(o=new Map,e.set(t,o)),o.set(n,r)}return e}(t),Fi.set(t,e)),e}function Di(t){const e=t.constructor.clone(t);return e.afterCloneFrom(t),e}function Ri(t,e){const n=(parseInt(t.style.paddingInlineStart,10)||0)/40;e.setIndent(n)}function ji(t){t.__lexicalUnmanaged=!0}function Bi(t){return!0===t.__lexicalUnmanaged}const zi={next:"previous",previous:"next"};class Wi{constructor(t){this.origin=t}[Symbol.iterator](){return ds({hasNext:Vi,initial:this.getAdjacentCaret(),map:t=>t,step:t=>t.getAdjacentCaret()})}getAdjacentCaret(){return ts(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return ts(this.origin,this.direction)}remove(){const t=this.getNodeAtCaret();return t&&t.remove(),this}replaceOrInsert(t,e){const n=this.getNodeAtCaret();return t.is(this.origin)||t.is(n)||(null===n?this.insert(t):n.replace(t,e)),this}splice(t,e,n="next"){const o=n===this.direction?e:Array.from(e).reverse();let i=this;const s=this.getParentAtCaret(),l=new Map;for(let r=i.getAdjacentCaret();null!==r&&l.size<t;r=r.getAdjacentCaret()){const t=r.origin.getWritable();l.set(t.getKey(),t)}for(const a of o){if(l.size>0){const t=i.getNodeAtCaret();if(t)if(l.delete(t.getKey()),l.delete(a.getKey()),t.is(a)||i.origin.is(a));else{const e=a.getParent();e&&e.is(s)&&a.remove(),t.replace(a)}else null===t&&r(263,Array.from(l).join(" "))}else i.insert(a);i=ts(a,this.direction)}for(const r of l.values())r.remove();return this}}class Ji extends Wi{type="child";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:os(t,this.direction)}getParentCaret(t="root"){return ts(Ui(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=Ki(this.direction);return ts(this.getNodeAtCaret(),t)||os(this.origin,t)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(t){return t instanceof Ji&&this.direction===t.direction&&this.origin.is(t.origin)}isSamePointCaret(t){return this.isSameNodeCaret(t)}}const $i={root:Xr,shadowRoot:_i};function Ki(t){return zi[t]}function Ui(t,e="root"){return $i[e](t)?null:t}class qi extends Wi{type="sibling";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:ts(t,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return qr(this.origin)?os(this.origin,this.direction):null}getParentCaret(t="root"){return ts(Ui(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=Ki(this.direction);return ts(this.getNodeAtCaret(),t)||os(this.origin.getParentOrThrow(),t)}isSamePointCaret(t){return t instanceof qi&&this.direction===t.direction&&this.origin.is(t.origin)}isSameNodeCaret(t){return(t instanceof qi||t instanceof Hi)&&this.direction===t.direction&&this.origin.is(t.origin)}}class Hi extends Wi{type="text";constructor(t,e){super(t),this.offset=e}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:es(t,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(t="root"){return ts(Ui(this.getParentAtCaret(),t),this.direction)}getFlipped(){return es(this.origin,Ki(this.direction),this.offset)}isSamePointCaret(t){return t instanceof Hi&&this.direction===t.direction&&this.origin.is(t.origin)&&this.offset===t.offset}isSameNodeCaret(t){return(t instanceof qi||t instanceof Hi)&&this.direction===t.direction&&this.origin.is(t.origin)}getSiblingCaret(){return ts(this.origin,this.direction)}}function Zi(t){return t instanceof Hi}function Vi(t){return t instanceof qi}function Gi(t){return t instanceof Ji}const Xi={next:class extends Hi{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(t){return this.origin.insertAfter(t),this}},previous:class extends Hi{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(t){return this.origin.insertBefore(t),this}}},Yi={next:class extends qi{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(t){return this.origin.insertAfter(t),this}},previous:class extends qi{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(t){return this.origin.insertBefore(t),this}}},Qi={next:class extends Ji{direction="next";getNodeAtCaret(){return this.origin.getFirstChild()}insert(t){return this.origin.splice(0,0,[t]),this}},previous:class extends Ji{direction="previous";getNodeAtCaret(){return this.origin.getLastChild()}insert(t){return this.origin.splice(this.origin.getChildrenSize(),0,[t]),this}}};function ts(t,e){return t?new Yi[e](t):null}function es(t,e,n){return t?new Xi[e](t,ns(t,n)):null}function ns(t,e){const n=t.getTextContentSize(),o="next"===e?n:"previous"===e?0:e;return o>=0&&o<=n||r(274,String(e),String(n)),o}function rs(t,e){return new ls(t,e)}function os(t,e){return qr(t)?new Qi[e](t):null}function is(t){return t&&function(t){return t&&t.getChildCaret()||t}(t.getAdjacentCaret())}class ss{type="node-caret-range";constructor(t,e,n){this.anchor=t,this.focus=e,this.direction=n}getLatest(){const t=this.anchor.getLatest(),e=this.focus.getLatest();return t===this.anchor&&e===this.focus?this:new ss(t,e,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){const t=t=>{const e=this[t].getLatest();return Zi(e)?function(t,e){const{direction:n,origin:r}=t;return rs(t,ns(r,"focus"===e?Ki(n):n)-t.offset)}(e,t):null},e=t("anchor"),n=t("focus");if(e&&n){const{caret:t}=e,{caret:r}=n;if(t.isSameNodeCaret(r))return[rs(t,r.offset-t.offset),null]}return[e,n]}iterNodeCarets(t="root"){const e=Zi(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),n=this.focus.getLatest(),r=Zi(n),o=e=>e.isSameNodeCaret(n)?null:is(e)||e.getParentCaret(t);return ds({hasNext:t=>null!==t&&!(r&&n.isSameNodeCaret(t)),initial:e.isSameNodeCaret(n)?null:o(e),map:t=>t,step:o})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class ls{type="slice";constructor(t,e){this.caret=t,this.distance=e}getSliceIndices(){const{distance:t,caret:{offset:e}}=this,n=e+t;return n<e?[n,e]:[e,n]}getTextContent(){const[t,e]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(t,e)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){const{caret:{origin:t,direction:e}}=this,[n,r]=this.getSliceIndices(),o=t.getTextContent();return es(t.setTextContent(o.slice(0,n)+o.slice(r)),e,n)}}function as(t){return us(t,ts(jo(),t.direction))}function cs(t){return us(t,t)}function us(t,e){return t.direction!==e.direction&&r(265),new ss(t,e,t.direction)}function ds(t){const{initial:e,hasNext:n,step:r,map:o}=t;let i=e;return{[Symbol.iterator](){return this},next(){if(!n(i))return{done:!0,value:void 0};const t={done:!1,value:o(i)};return i=r(i),t}}}function fs(t,e){const n=ms(t.origin,e.origin);switch(null===n&&r(275,t.origin.getKey(),e.origin.getKey()),n.type){case"same":{const n="text"===t.type,r="text"===e.type;return n&&r?function(t,e){return Math.sign(t-e)}(t.offset,e.offset):t.type===e.type?0:n?-1:r?1:"child"===t.type?-1:1}case"ancestor":return"child"===t.type?-1:1;case"descendant":return"child"===e.type?1:-1;case"branch":return hs(n)}}function hs(t){const{a:e,b:n}=t,r=e.__key,o=n.__key;let i=e,s=n;for(;i&&s;i=i.getNextSibling(),s=s.getNextSibling()){if(i.__key===o)return-1;if(s.__key===r)return 1}return null===i?1:-1}function gs(t,e){return e.is(t)}function ps(t){return qr(t)?[t.getLatest(),null]:[t.getParent(),t.getLatest()]}function ms(t,e){if(t.is(e))return{commonAncestor:t,type:"same"};const n=new Map;for(let[r,o]=ps(t);r;o=r,r=r.getParent())n.set(r,o);for(let[o,i]=ps(e);o;i=o,o=o.getParent()){const s=n.get(o);if(void 0!==s)return null===s?(gs(t,o)||r(276),{commonAncestor:o,type:"ancestor"}):null===i?(gs(e,o)||r(277),{commonAncestor:o,type:"descendant"}):((qr(s)||gs(t,s))&&(qr(i)||gs(e,i))&&o.is(s.getParent())&&o.is(i.getParent())||r(278),{a:s,b:i,commonAncestor:o,type:"branch"})}return null}function _s(t,e){const{type:n,key:o,offset:i}=t,s=function(t){const e=Mo(t);return null===e&&r(63,t),e}(t.key);return"text"===n?(Dn(s)||r(266,s.getType(),o),es(s,e,i)):(qr(s)||r(267,s.getType(),o),function(t,e,n){let r=os(t,"next");for(let o=0;o<e;o++){const t=r.getAdjacentCaret();if(null===t)break;r=t}return As(r,n)}(s,t.offset,e))}function ys(t,e){const{origin:n,direction:o}=e,i="next"===o;Zi(e)?t.set(n.getKey(),e.offset,"text"):Vi(e)?Dn(n)?t.set(n.getKey(),ns(n,o),"text"):t.set(n.getParentOrThrow().getKey(),n.getIndexWithinParent()+(i?1:0),"element"):(Gi(e)&&qr(n)||r(268),t.set(n.getKey(),i?0:n.getChildrenSize(),"element"))}function xs(t){const e=ar(),n=Un(e)?e:ir();return vs(n,t),zo(n),n}function vs(t,e){ys(t.anchor,e.anchor),ys(t.focus,e.focus)}function Cs(t){const{anchor:e,focus:n}=t,r=_s(e,"next"),o=_s(n,"next"),i=fs(r,o)<=0?"next":"previous";return us(As(r,i),As(o,i))}function bs(t){const{direction:e,origin:n}=t,r=ts(n,Ki(e)).getNodeAtCaret();return r?ts(r,e):os(n.getParentOrThrow(),e)}function Ss(t,e="root"){const n=[t];for(let r=Gi(t)?t.getParentCaret(e):t.getSiblingCaret();null!==r;r=r.getParentCaret(e))n.push(bs(r));return n}function ws(t){return!!t&&t.origin.isAttached()}function ks(t,e="removeEmptySlices"){if(t.isCollapsed())return t;const n="root",o="next";let i=e;const s=Es(t,o),l=Ss(s.anchor,n),a=Ss(s.focus.getFlipped(),n),c=new Set,u=[];for(const r of s.iterNodeCarets(n))if(Gi(r))c.add(r.origin.getKey());else if(Vi(r)){const{origin:t}=r;qr(t)&&!c.has(t.getKey())||u.push(t)}for(const r of u)r.remove();for(const r of s.getTextSlices()){if(!r)continue;const{origin:t}=r.caret,e=t.getTextContentSize(),n=bs(ts(t,o)),s=t.getMode();if(Math.abs(r.distance)===e&&"removeEmptySlices"===i||"token"===s&&0!==r.distance)n.remove();else if(0!==r.distance){i="removeEmptySlices";let t=r.removeTextSlice();const e=r.caret.origin;if("segmented"===s){const e=t.origin,r=In(e.getTextContent()).setStyle(e.getStyle()).setFormat(e.getFormat());n.replaceOrInsert(r),t=es(r,o,t.offset)}e.is(l[0].origin)&&(l[0]=t),e.is(a[0].origin)&&(a[0]=t.getFlipped())}}let d,f;for(const r of l)if(ws(r)){d=Ts(r);break}for(const r of a)if(ws(r)){f=Ts(r);break}const h=function(t,e,n){if(!t||!e)return null;const r=t.getParentAtCaret(),o=e.getParentAtCaret();if(!r||!o)return null;const i=r.getParents().reverse();i.push(r);const s=o.getParents().reverse();s.push(o);const l=Math.min(i.length,s.length);let a;for(a=0;a<l&&i[a]===s[a];a++);const c=(t,e)=>{let n;for(let r=a;r<t.length;r++){const o=t[r];if(_i(o))return;!n&&e(o)&&(n=o)}return n},u=c(i,Oi),d=u&&c(s,(t=>n.has(t.getKey())&&Oi(t)));return u&&d?[u,d]:null}(d,f,c);if(h){const[t,e]=h;os(t,"previous").splice(0,e.getChildren()),e.remove()}const g=[d,f,...l,...a].find(ws);if(g)return cs(As(Ts(g),t.direction));r(269,JSON.stringify(l.map((t=>t.origin.__key))))}function Ts(t){const e=function(t){let e=t;for(;Gi(e);){const t=is(e);if(!Gi(t))break;e=t}return e}(t.getLatest()),{direction:n}=e;if(Dn(e.origin))return Zi(e)?e:es(e.origin,n,n);const r=e.getAdjacentCaret();return Vi(r)&&Dn(r.origin)?es(r.origin,n,Ki(n)):e}function Ns(t){return Zi(t)&&t.offset!==ns(t.origin,t.direction)}function As(t,e){return t.direction===e?t:t.getFlipped()}function Es(t,e){return t.direction===e?t:us(As(t.focus,e),As(t.anchor,e))}function Os(t){const{origin:e,offset:n,direction:o}=t;if(n===ns(e,o))return t.getSiblingCaret();if(n===ns(e,Ki(o)))return bs(t.getSiblingCaret());const[i]=e.splitText(n);return Dn(i)||r(281),As(ts(i,"next"),o)}function Ps(t,e){return!0}function Ms(t,{$copyElementNode:e=yi,$splitTextPointCaretNext:n=Os,rootMode:r="shadowRoot",$shouldSplit:o=Ps}={}){if(Zi(t))return n(t);const i=t.getParentCaret(r);if(i){const{origin:n}=i;if(Gi(t)&&(!n.canBeEmpty()||!o(n,"first")))return bs(i);const r=function(t){const e=[];for(let n=t.getAdjacentCaret();n;n=n.getAdjacentCaret())e.push(n.origin);return e}(t);(r.length>0||n.canBeEmpty()&&o(n,"last"))&&i.insert(e(n).splice(0,0,r))}return i}},53545:(t,e,n)=>{"use strict";n.d(e,{H:()=>r});const r="SCEditor"},75260:(t,e,n)=>{"use strict";n.d(e,{A:()=>Fo});var r=n(74848),o=n(96540),i=n(58065),s=n(11848),l=n(71194),a=n(75933),c=n(19546),u=n.n(c),d=n(79197),f=n(48832);function h(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const o of e)r.append("v",o);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const g="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,p=g&&"documentMode"in document?document.documentMode:null,m=(g&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),g&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),!(!g||!("InputEvent"in window)||p)&&new window.InputEvent("input"),g&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),g&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&window.MSStream,g&&/Android/.test(navigator.userAgent),g&&/^(?=.*Chrome).*/i.test(navigator.userAgent));g&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent);function _(...t){const e=[];for(const n of t)if(n&&"string"==typeof n)for(const[t]of n.matchAll(/\S+/g))e.push(t);return e}function y(...t){return()=>{for(let e=t.length-1;e>=0;e--)t[e]();t.length=0}}function x(t,...e){const n=_(...e);n.length>0&&t.classList.add(...n)}function v(t,...e){const n=_(...e);n.length>0&&t.classList.remove(...n)}function C(t,e){let n=t;for(;null!=n;){if(n instanceof e)return n;n=n.getParent()}return null}function b(t){const e=S(t,(t=>(0,f.ff4)(t)&&!t.isInline()));return(0,f.ff4)(e)||h(4,t.__key),e}const S=(t,e)=>{let n=t;for(;n!==(0,f.NiT)()&&null!=n;){if(e(n))return n;n=n.getParent()}return null};function w(t){const e=(0,f.vJq)()||(0,f.S1w)();let n;if((0,f.I2P)(e))n=(0,f.Ave)(e.focus,"next");else{if(null!=e){const t=e.getNodes(),r=t[t.length-1];r&&(n=(0,f.IlV)(r,"next"))}n=n||(0,f.uwZ)((0,f.NiT)(),"previous").getFlipped().insert((0,f.lJ7)())}const r=function(t,e,n){let r=(0,f.Csq)(e,"next");for(let o=r;o;o=(0,f.k1Q)(o,n))r=o;return(0,f.rN)(r)&&h(283),r.insert(t.isInline()?(0,f.lJ7)().append(t):t),(0,f.Csq)((0,f.IlV)(t.getLatest(),"next"),e.direction)}(t,n),o=(0,f.erb)(r),i=(0,f.cmH)(o)?(0,f.lSZ)(o):r;return(0,f.xQ8)((0,f.sWS)(i)),t.getLatest()}function k(t,e){return null!==t&&Object.getPrototypeOf(t).constructor.name===e.name}function T(t,e){const n=[],r=Array.from(t).reverse();for(let o=r.pop();void 0!==o;o=r.pop())if(e(o))n.push(o);else if((0,f.ff4)(o))for(const t of N(o))r.push(t);return n}function N(t){return A((0,f.uwZ)(t,"previous"))}function A(t){return(0,f.Bts)({hasNext:f.OpE,initial:t.getAdjacentCaret(),map:t=>t.origin.getLatest(),step:t=>t.getAdjacentCaret()})}const E=new Set(["http:","https:","mailto:","sms:","tel:"]);class O extends f.fGB{static getType(){return"link"}static clone(t){return new O(t.__url,{rel:t.__rel,target:t.__target,title:t.__title},t.__key)}constructor(t="",e={},n){super(n);const{target:r=null,rel:o=null,title:i=null}=e;this.__url=t,this.__target=r,this.__rel=o,this.__title=i}createDOM(t){const e=document.createElement("a");return e.href=this.sanitizeUrl(this.__url),null!==this.__target&&(e.target=this.__target),null!==this.__rel&&(e.rel=this.__rel),null!==this.__title&&(e.title=this.__title),x(e,t.theme.link),e}updateDOM(t,e,n){if((0,f.nYP)(e)){const n=this.__url,r=this.__target,o=this.__rel,i=this.__title;n!==t.__url&&(e.href=n),r!==t.__target&&(r?e.target=r:e.removeAttribute("target")),o!==t.__rel&&(o?e.rel=o:e.removeAttribute("rel")),i!==t.__title&&(i?e.title=i:e.removeAttribute("title"))}return!1}static importDOM(){return{a:t=>({conversion:P,priority:1})}}static importJSON(t){return M().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setURL(t.url).setRel(t.rel||null).setTarget(t.target||null).setTitle(t.title||null)}sanitizeUrl(t){try{const e=new URL(t);if(!E.has(e.protocol))return"about:blank"}catch(e){return t}return t}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(t){const e=this.getWritable();return e.__url=t,e}getTarget(){return this.getLatest().__target}setTarget(t){const e=this.getWritable();return e.__target=t,e}getRel(){return this.getLatest().__rel}setRel(t){const e=this.getWritable();return e.__rel=t,e}getTitle(){return this.getLatest().__title}setTitle(t){const e=this.getWritable();return e.__title=t,e}insertNewAfter(t,e=!0){const n=M(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(n,e),n}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(t,e,n){if(!(0,f.I2P)(e))return!1;const r=e.anchor.getNode(),o=e.focus.getNode();return this.isParentOf(r)&&this.isParentOf(o)&&e.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}}function P(t){let e=null;if((0,f.nYP)(t)){const n=t.textContent;(null!==n&&""!==n||t.children.length>0)&&(e=M(t.getAttribute("href")||"",{rel:t.getAttribute("rel"),target:t.getAttribute("target"),title:t.getAttribute("title")}))}return{node:e}}function M(t="",e){return(0,f.pTq)(new O(t,e))}function F(t){return t instanceof O}class L extends O{constructor(t="",e={},n){super(t,e,n),this.__isUnlinked=void 0!==e.isUnlinked&&null!==e.isUnlinked&&e.isUnlinked}static getType(){return"autolink"}static clone(t){return new L(t.__url,{isUnlinked:t.__isUnlinked,rel:t.__rel,target:t.__target,title:t.__title},t.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(t){const e=this.getWritable();return e.__isUnlinked=t,e}createDOM(t){return this.__isUnlinked?document.createElement("span"):super.createDOM(t)}updateDOM(t,e,n){return super.updateDOM(t,e,n)||t.__isUnlinked!==this.__isUnlinked}static importJSON(t){return I().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setIsUnlinked(t.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(t,e=!0){const n=this.getParentOrThrow().insertNewAfter(t,e);if((0,f.ff4)(n)){const t=I(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return n.append(t),t}return null}}function I(t="",e){return(0,f.pTq)(new L(t,e))}function D(t){return t instanceof L}const R=(0,f.guI)("TOGGLE_LINK_COMMAND");function j(t,e){if("element"===t.type){const n=t.getNode();return(0,f.ff4)(n)||function(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const o of e)r.append("v",o);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(252),n.getChildren()[t.offset+e]||null}return null}function B(t,e={}){const{target:n,title:r}=e,o=void 0===e.rel?"noreferrer":e.rel,i=(0,f.vJq)();if(!(0,f.I2P)(i))return;const s=i.extract();if(null===t)return void s.forEach((t=>{const e=S(t,(t=>!D(t)&&F(t)));if(e){const t=e.getChildren();for(let n=0;n<t.length;n++)e.insertBefore(t[n]);e.remove()}}));const l=new Set,a=e=>{l.has(e.getKey())||(l.add(e.getKey()),e.setURL(t),void 0!==n&&e.setTarget(n),void 0!==o&&e.setRel(o),void 0!==r&&e.setTitle(r))};if(1===s.length){const t=z(s[0],F);if(null!==t)return a(t)}!function(t){const e=(0,f.vJq)();if(!(0,f.I2P)(e))return t();const n=(0,f.CaD)(e),r=n.isBackward(),o=j(n.anchor,r?-1:0),i=j(n.focus,r?0:-1);t();if(o||i){const t=(0,f.vJq)();if((0,f.I2P)(t)){const e=t.clone();if(o){const t=o.getParent();t&&e.anchor.set(t.getKey(),o.getIndexWithinParent()+(r?1:0),"element")}if(i){const t=i.getParent();t&&e.focus.set(t.getKey(),i.getIndexWithinParent()+(r?0:1),"element")}(0,f.n1P)((0,f.CaD)(e))}}}((()=>{let e=null;for(const i of s){if(!i.isAttached())continue;const s=z(i,F);if(s){a(s);continue}if((0,f.ff4)(i)){if(!i.isInline())continue;if(F(i)){if(!(D(i)||null!==e&&e.getParentOrThrow().isParentOf(i))){a(i),e=i;continue}for(const t of i.getChildren())i.insertBefore(t);i.remove();continue}}const l=i.getPreviousSibling();F(l)&&l.is(e)?l.append(i):(e=M(t,{rel:o,target:n,title:r}),i.insertAfter(e),e.append(i))}}))}function z(t,e){let n=t;for(;null!==n&&null!==n.getParent()&&!e(n);)n=n.getParentOrThrow();return e(n)?n:null}var W=n(27639);function J(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const o of e)r.append("v",o);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function $(t){let e=t.getParent();mt(e)||J(40);let n=e;for(;null!==n;)n=n.getParent(),mt(n)&&(e=n);return e}function K(t){let e=[];const n=t.getChildren().filter(ct);for(let r=0;r<n.length;r++){const t=n[r],o=t.getFirstChild();mt(o)?e=e.concat(K(o)):e.push(t)}return e}function U(t){return ct(t)&&mt(t.getFirstChild())}function q(t){return at().append(t)}function H(t,e){return ct(t)&&(0===e.length||1===e.length&&t.is(e[0])&&0===t.getChildrenSize())}function Z(t){const e=(0,f.vJq)();if(null!==e){let n=e.getNodes();if((0,f.I2P)(e)){const r=e.getStartEndPoints();null===r&&J(143);const[o]=r,i=o.getNode(),s=i.getParent();if((0,f.IqF)(i)){const t=i.getFirstChild();if(t)n=t.selectStart().getNodes();else{const t=(0,f.lJ7)();i.append(t),n=t.select().getNodes()}}else if(H(i,n)){const e=pt(t);if((0,f.IqF)(s)){i.replace(e);const t=at();(0,f.ff4)(i)&&(t.setFormat(i.getFormatType()),t.setIndent(i.getIndent())),e.append(t)}else if(ct(i)){const t=i.getParentOrThrow();V(e,t.getChildren()),t.replace(e)}return}}const r=new Set;for(let e=0;e<n.length;e++){const o=n[e];if(!(0,f.ff4)(o)||!o.isEmpty()||ct(o)||r.has(o.getKey())){if((0,f.jG6)(o)){let e=o.getParent();for(;null!=e;){const n=e.getKey();if(mt(e)){if(!r.has(n)){const o=pt(t);V(o,e.getChildren()),e.replace(o),r.add(n)}break}{const o=e.getParent();if((0,f.IqF)(o)&&!r.has(n)){r.add(n),G(e,t);break}e=o}}}}else G(o,t)}}}function V(t,e){t.splice(t.getChildrenSize(),0,e)}function G(t,e){if(mt(t))return t;const n=t.getPreviousSibling(),r=t.getNextSibling(),o=at();let i;if(V(o,t.getChildren()),mt(n)&&e===n.getListType())n.append(o),mt(r)&&e===r.getListType()&&(V(n,r.getChildren()),r.remove()),i=n;else if(mt(r)&&e===r.getListType())r.getFirstChildOrThrow().insertBefore(o),i=r;else{const n=pt(e);n.append(o),t.replace(n),i=n}return o.setFormat(t.getFormatType()),o.setIndent(t.getIndent()),t.remove(),i}function X(t,e){const n=t.getLastChild(),r=e.getFirstChild();n&&r&&U(n)&&U(r)&&(X(n.getFirstChild(),r.getFirstChild()),r.remove());const o=e.getChildren();o.length>0&&t.append(...o),e.remove()}function Y(){const t=(0,f.vJq)();if((0,f.I2P)(t)){const e=new Set,n=t.getNodes(),r=t.anchor.getNode();if(H(r,n))e.add($(r));else for(let t=0;t<n.length;t++){const r=n[t];if((0,f.jG6)(r)){const t=C(r,rt);null!=t&&e.add($(t))}}for(const o of e){let e=o;const n=K(o);for(const r of n){const n=(0,f.lJ7)().setTextStyle(t.style).setTextFormat(t.format);V(n,r.getChildren()),e.insertAfter(n),e=n,r.__key===t.anchor.key&&(0,f.wp6)(t.anchor,(0,f.lSZ)((0,f.uwZ)(n,"next"))),r.__key===t.focus.key&&(0,f.wp6)(t.focus,(0,f.lSZ)((0,f.uwZ)(n,"next"))),r.remove()}o.remove()}}}function Q(t){const e=new Set;if(U(t)||e.has(t.getKey()))return;const n=t.getParent(),r=t.getNextSibling(),o=t.getPreviousSibling();if(U(r)&&U(o)){const n=o.getFirstChild();if(mt(n)){n.append(t);const o=r.getFirstChild();mt(o)&&(V(n,o.getChildren()),r.remove(),e.add(r.getKey()))}}else if(U(r)){const e=r.getFirstChild();if(mt(e)){const n=e.getFirstChild();null!==n&&n.insertBefore(t)}}else if(U(o)){const e=o.getFirstChild();mt(e)&&e.append(t)}else if(mt(n)){const e=at().setTextFormat(n.getTextFormat()).setTextStyle(n.getTextStyle()),i=pt(n.getListType()).setTextFormat(n.getTextFormat()).setTextStyle(n.getTextStyle());e.append(i),i.append(t),o?o.insertAfter(e):r?r.insertBefore(e):n.append(e)}}function tt(t){if(U(t))return;const e=t.getParent(),n=e?e.getParent():void 0;if(mt(n?n.getParent():void 0)&&ct(n)&&mt(e)){const r=e?e.getFirstChild():void 0,o=e?e.getLastChild():void 0;if(t.is(r))n.insertBefore(t),e.isEmpty()&&n.remove();else if(t.is(o))n.insertAfter(t),e.isEmpty()&&n.remove();else{const r=e.getListType(),o=at(),i=pt(r);o.append(i),t.getPreviousSiblings().forEach((t=>i.append(t)));const s=at(),l=pt(r);s.append(l),V(l,t.getNextSiblings()),n.insertBefore(o),n.insertAfter(s),n.replace(t)}}}function et(...t){const e=[];for(const n of t)if(n&&"string"==typeof n)for(const[t]of n.matchAll(/\S+/g))e.push(t);return e}function nt(t,e,n){const r=(0,W.Wh)(e.__textStyle);for(const o in r)t.style.setProperty(`--listitem-marker-${o}`,r[o]);if(n)for(const o in(0,W.Wh)(n.__textStyle))o in r||t.style.removeProperty(`--listitem-marker-${o}`)}class rt extends f.fGB{static getType(){return"listitem"}static clone(t){return new rt(t.__value,t.__checked,t.__key)}constructor(t,e,n){super(n),this.__value=void 0===t?1:t,this.__checked=e}createDOM(t){const e=document.createElement("li"),n=this.getParent();mt(n)&&"check"===n.getListType()&&it(e,this,null),e.value=this.__value,ot(e,t.theme,this);const r=this.__style;return r&&(e.style.cssText=r),nt(e,this,null),e}updateDOM(t,e,n){const r=this.getParent();mt(r)&&"check"===r.getListType()&&it(e,this,t),e.value=this.__value,ot(e,n.theme,this);const o=t.__style,i=this.__style;return o!==i&&(""===i?e.removeAttribute("style"):e.style.cssText=i),nt(e,this,t),!1}static transform(){return t=>{if(ct(t)||J(144),null==t.__checked)return;const e=t.getParent();mt(e)&&"check"!==e.getListType()&&null!=t.getChecked()&&t.setChecked(void 0)}}static importDOM(){return{li:()=>({conversion:st,priority:0})}}static importJSON(t){return at().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setValue(t.value).setChecked(t.checked)}exportDOM(t){const e=this.createDOM(t._config);e.style.textAlign=this.getFormatType();const n=this.getDirection();return n&&(e.dir=n),{element:e}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(...t){for(let e=0;e<t.length;e++){const n=t[e];if((0,f.ff4)(n)&&this.canMergeWith(n)){const t=n.getChildren();this.append(...t),n.remove()}else super.append(n)}return this}replace(t,e){if(ct(t))return super.replace(t);this.setIndent(0);const n=this.getParentOrThrow();if(!mt(n))return t;if(n.__first===this.getKey())n.insertBefore(t);else if(n.__last===this.getKey())n.insertAfter(t);else{const e=pt(n.getListType());let r=this.getNextSibling();for(;r;){const t=r;r=r.getNextSibling(),e.append(t)}n.insertAfter(t),t.insertAfter(e)}return e&&((0,f.ff4)(t)||J(139),this.getChildren().forEach((e=>{t.append(e)}))),this.remove(),0===n.getChildrenSize()&&n.remove(),t}insertAfter(t,e=!0){const n=this.getParentOrThrow();if(mt(n)||J(39),ct(t))return super.insertAfter(t,e);const r=this.getNextSiblings();if(n.insertAfter(t,e),0!==r.length){const o=pt(n.getListType());r.forEach((t=>o.append(t))),t.insertAfter(o,e)}return t}remove(t){const e=this.getPreviousSibling(),n=this.getNextSibling();super.remove(t),e&&n&&U(e)&&U(n)&&(X(e.getFirstChild(),n.getFirstChild()),n.remove())}insertNewAfter(t,e=!0){const n=at().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(n,e),n}collapseAtStart(t){const e=(0,f.lJ7)();this.getChildren().forEach((t=>e.append(t)));const n=this.getParentOrThrow(),r=n.getParentOrThrow(),o=ct(r);if(1===n.getChildrenSize())if(o)n.remove(),r.select();else{n.insertBefore(e),n.remove();const r=t.anchor,o=t.focus,i=e.getKey();"element"===r.type&&r.getNode().is(this)&&r.set(i,r.offset,"element"),"element"===o.type&&o.getNode().is(this)&&o.set(i,o.offset,"element")}else n.insertBefore(e),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(t){const e=this.getWritable();return e.__value=t,e}getChecked(){const t=this.getLatest();let e;const n=this.getParent();return mt(n)&&(e=n.getListType()),"check"===e?Boolean(t.__checked):void 0}setChecked(t){const e=this.getWritable();return e.__checked=t,e}toggleChecked(){const t=this.getWritable();return t.setChecked(!t.__checked)}getIndent(){const t=this.getParent();if(null===t||!this.isAttached())return this.getLatest().__indent;let e=t.getParentOrThrow(),n=0;for(;ct(e);)e=e.getParentOrThrow().getParentOrThrow(),n++;return n}setIndent(t){"number"!=typeof t&&J(117),(t=Math.floor(t))>=0||J(199);let e=this.getIndent();for(;e!==t;)e<t?(Q(this),e++):(tt(this),e--);return this}canInsertAfter(t){return ct(t)}canReplaceWith(t){return ct(t)}canMergeWith(t){return ct(t)||(0,f.bSg)(t)}extractWithChild(t,e){if(!(0,f.I2P)(e))return!1;const n=e.anchor.getNode(),r=e.focus.getNode();return this.isParentOf(n)&&this.isParentOf(r)&&this.getTextContent().length===e.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return pt("bullet")}canMergeWhenEmpty(){return!0}}function ot(t,e,n){const r=[],o=[],i=e.list,s=i?i.listitem:void 0;let l;if(i&&i.nested&&(l=i.nested.listitem),void 0!==s&&r.push(...et(s)),i){const t=n.getParent(),e=mt(t)&&"check"===t.getListType(),s=n.getChecked();e&&!s||o.push(i.listitemUnchecked),e&&s||o.push(i.listitemChecked),e&&r.push(s?i.listitemChecked:i.listitemUnchecked)}if(void 0!==l){const t=et(l);n.getChildren().some((t=>mt(t)))?r.push(...t):o.push(...t)}o.length>0&&v(t,...o),r.length>0&&x(t,...r)}function it(t,e,n,r){mt(e.getFirstChild())?(t.removeAttribute("role"),t.removeAttribute("tabIndex"),t.removeAttribute("aria-checked")):(t.setAttribute("role","checkbox"),t.setAttribute("tabIndex","-1"),n&&e.__checked===n.__checked||t.setAttribute("aria-checked",e.getChecked()?"true":"false"))}function st(t){if(t.classList.contains("task-list-item"))for(const n of t.children)if("INPUT"===n.tagName)return lt(n);const e=t.getAttribute("aria-checked");return{node:at("true"===e||"false"!==e&&void 0)}}function lt(t){return"checkbox"!==t.getAttribute("type")?{node:null}:{node:at(t.hasAttribute("checked"))}}function at(t){return(0,f.pTq)(new rt(void 0,t))}function ct(t){return t instanceof rt}class ut extends f.fGB{static getType(){return"list"}static clone(t){const e=t.__listType||gt[t.__tag];return new ut(e,t.__start,t.__key)}constructor(t="number",e=1,n){super(n);const r=gt[t]||t;this.__listType=r,this.__tag="number"===r?"ol":"ul",this.__start=e}getTag(){return this.__tag}setListType(t){const e=this.getWritable();return e.__listType=t,e.__tag="number"===t?"ol":"ul",e}getListType(){return this.__listType}getStart(){return this.__start}setStart(t){const e=this.getWritable();return e.__start=t,e}createDOM(t,e){const n=this.__tag,r=document.createElement(n);return 1!==this.__start&&r.setAttribute("start",String(this.__start)),r.__lexicalListType=this.__listType,dt(r,t.theme,this),r}updateDOM(t,e,n){return t.__tag!==this.__tag||(dt(e,n.theme,this),!1)}static transform(){return t=>{mt(t)||J(163),function(t){const e=t.getNextSibling();mt(e)&&t.getListType()===e.getListType()&&X(t,e)}(t),function(t){const e="check"!==t.getListType();let n=t.getStart();for(const r of t.getChildren())ct(r)&&(r.getValue()!==n&&r.setValue(n),e&&null!=r.getLatest().__checked&&r.setChecked(void 0),mt(r.getFirstChild())||n++)}(t)}}static importDOM(){return{ol:()=>({conversion:ht,priority:0}),ul:()=>({conversion:ht,priority:0})}}static importJSON(t){return pt().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setListType(t.listType).setStart(t.start)}exportDOM(t){const e=this.createDOM(t._config,t);return(0,f.sby)(e)&&(1!==this.__start&&e.setAttribute("start",String(this.__start)),"check"===this.__listType&&e.setAttribute("__lexicalListType","check")),{element:e}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}splice(t,e,n){let r=n;for(let o=0;o<n.length;o++){const t=n[o];ct(t)||(r===n&&(r=[...n]),r[o]=at().append(!(0,f.ff4)(t)||mt(t)||t.isInline()?t:(0,f.sTu)(t.getTextContent())))}return super.splice(t,e,r)}extractWithChild(t){return ct(t)}}function dt(t,e,n){const r=[],o=[],i=e.list;if(void 0!==i){const t=i[`${n.__tag}Depth`]||[],e=function(t){let e=1,n=t.getParent();for(;null!=n;){if(ct(n)){const t=n.getParent();if(mt(t)){e++,n=t.getParent();continue}J(40)}return e}return e}(n)-1,s=e%t.length,l=t[s],a=i[n.__tag];let c;const u=i.nested,d=i.checklist;if(void 0!==u&&u.list&&(c=u.list),void 0!==a&&r.push(a),void 0!==d&&"check"===n.__listType&&r.push(d),void 0!==l){r.push(...et(l));for(let e=0;e<t.length;e++)e!==s&&o.push(n.__tag+e)}if(void 0!==c){const t=et(c);e>1?r.push(...t):o.push(...t)}}o.length>0&&v(t,...o),r.length>0&&x(t,...r)}function ft(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];if(ct(r)){e.push(r);const t=r.getChildren();t.length>1&&t.forEach((t=>{mt(t)&&e.push(q(t))}))}else e.push(q(r))}return e}function ht(t){const e=t.nodeName.toLowerCase();let n=null;return"ol"===e?n=pt("number",t.start):"ul"===e&&(n=function(t){if("check"===t.getAttribute("__lexicallisttype")||t.classList.contains("contains-task-list"))return!0;for(const e of t.childNodes)if((0,f.sby)(e)&&e.hasAttribute("aria-checked"))return!0;return!1}(t)?pt("check"):pt("bullet")),{after:ft,node:n}}const gt={ol:"number",ul:"bullet"};function pt(t="number",e=1){return(0,f.pTq)(new ut(t,e))}function mt(t){return t instanceof ut}const _t=(0,f.guI)("INSERT_UNORDERED_LIST_COMMAND"),yt=(0,f.guI)("INSERT_ORDERED_LIST_COMMAND"),xt=((0,f.guI)("INSERT_CHECK_LIST_COMMAND"),(0,f.guI)("REMOVE_LIST_COMMAND"));function vt(t){return y(t.registerCommand(yt,(()=>(Z("number"),!0)),f.AcJ),t.registerCommand(_t,(()=>(Z("bullet"),!0)),f.AcJ),t.registerCommand(xt,(()=>(Y(),!0)),f.AcJ),t.registerCommand(f.XKQ,(()=>function(){const t=(0,f.vJq)();if(!(0,f.I2P)(t)||!t.isCollapsed())return!1;const e=t.anchor.getNode();if(!ct(e)||0!==e.getChildrenSize())return!1;const n=$(e),r=e.getParent();mt(r)||J(40);const o=r.getParent();let i;if((0,f.IqF)(o))i=(0,f.lJ7)(),n.insertAfter(i);else{if(!ct(o))return!1;i=at(),o.insertAfter(i)}i.setTextStyle(t.style).setTextFormat(t.format).select();const s=e.getNextSiblings();if(s.length>0){const t=pt(r.getListType());if(ct(i)){const e=at();e.append(t),i.insertAfter(e)}else i.insertAfter(t);t.append(...s)}return function(t){let e=t;for(;null==e.getNextSibling()&&null==e.getPreviousSibling();){const t=e.getParent();if(null==t||!ct(t)&&!mt(t))break;e=t}e.remove()}(e),!0}()),f.AcJ),t.registerNodeTransform(rt,(t=>{const e=t.getFirstChild();if(e){if((0,f.kFe)(e)){const n=e.getStyle(),r=e.getFormat();t.getTextStyle()!==n&&t.setTextStyle(n),t.getTextFormat()!==r&&t.setTextFormat(r)}}else{const e=(0,f.vJq)();(0,f.I2P)(e)&&(e.style!==t.getTextStyle()||e.format!==t.getTextFormat())&&e.isCollapsed()&&t.is(e.anchor.getNode())&&t.setTextStyle(e.style).setTextFormat(e.format)}})),t.registerNodeTransform(f.Ey8,(t=>{const e=t.getParent();if(ct(e)&&t.is(e.getFirstChild())){const n=t.getStyle(),r=t.getFormat();n===e.getTextStyle()&&r===e.getTextFormat()||e.setTextStyle(n).setTextFormat(r)}})))}function Ct(t,e){const n=e.body?e.body.childNodes:[];let r=[];const o=[];for(let i=0;i<n.length;i++){const e=n[i];if(!wt.has(e.nodeName)){const n=kt(e,t,o,!1);null!==n&&(r=r.concat(n))}}return function(t){for(const e of t)e.getNextSibling()instanceof f.A7V&&e.insertAfter((0,f.WKo)());for(const e of t){const t=e.getChildren();for(const n of t)e.insertBefore(n);e.remove()}}(o),r}function bt(t,e){if("undefined"==typeof document||"undefined"==typeof window&&void 0===global.window)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const n=document.createElement("div"),r=(0,f.NiT)().getChildren();for(let o=0;o<r.length;o++)St(t,r[o],n,e);return n.innerHTML}function St(t,e,n,r=null){let o=null===r||e.isSelected(r);const i=(0,f.ff4)(e)&&e.excludeFromCopy("html");let s=e;if(null!==r){let t=(0,f.BEs)(e);t=(0,f.kFe)(t)&&null!==r?(0,W.SD)(r,t):t,s=t}const l=(0,f.ff4)(s)?s.getChildren():[],a=t._nodes.get(s.getType());let c;c=a&&void 0!==a.exportDOM?a.exportDOM(t,s):s.exportDOM(t);const{element:u,after:d}=c;if(!u)return!1;const h=document.createDocumentFragment();for(let g=0;g<l.length;g++){const n=l[g],i=St(t,n,h,r);!o&&(0,f.ff4)(e)&&i&&e.extractWithChild(n,r,"html")&&(o=!0)}if(o&&!i){if(((0,f.sby)(u)||(0,f.K8K)(u))&&u.append(h),n.append(u),d){const t=d.call(s,u);t&&((0,f.K8K)(u)?u.replaceChildren(t):u.replaceWith(t))}}else n.append(h);return o}const wt=new Set(["STYLE","SCRIPT"]);function kt(t,e,n,r,o=new Map,i){let s=[];if(wt.has(t.nodeName))return s;let l=null;const a=function(t,e){const{nodeName:n}=t,r=e._htmlConversions.get(n.toLowerCase());let o=null;if(void 0!==r)for(const i of r){const e=i(t);null!==e&&(null===o||(o.priority||0)<=(e.priority||0))&&(o=e)}return null!==o?o.conversion:null}(t,e),c=a?a(t):null;let u=null;if(null!==c){u=c.after;const e=c.node;if(l=Array.isArray(e)?e[e.length-1]:e,null!==l){for(const[,t]of o)if(l=t(l,i),!l)break;l&&s.push(...Array.isArray(e)?e:[l])}null!=c.forChild&&o.set(t.nodeName,c.forChild)}const d=t.childNodes;let h=[];const g=(null==l||!(0,f.IqF)(l))&&(null!=l&&(0,f.y68)(l)||r);for(let f=0;f<d.length;f++)h.push(...kt(d[f],e,n,g,new Map(o),l));return null!=u&&(h=u(h)),(0,f.a9V)(t)&&(h=function(t,e,n){const r=t.style.textAlign,o=[];let i=[];for(let s=0;s<e.length;s++){const t=e[s];if((0,f.y68)(t))r&&!t.getFormat()&&t.setFormat(r),o.push(t);else if(i.push(t),s===e.length-1||s<e.length-1&&(0,f.y68)(e[s+1])){const t=n();t.setFormat(r),t.append(...i),o.push(t),i=[]}}return o}(t,h,g?()=>{const t=new f.A7V;return n.push(t),t}:f.lJ7)),null==l?h.length>0?s=s.concat(h):(0,f.a9V)(t)&&function(t){return null!=t.nextSibling&&null!=t.previousSibling&&((0,f._On)(t.nextSibling)&&(0,f._On)(t.previousSibling))}(t)&&(s=s.concat((0,f.WKo)())):(0,f.ff4)(l)&&l.append(...h),s}function Tt(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const o of e)r.append("v",o);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function Nt(t,e,n){const r=t.getData("application/x-lexical-editor");if(r)try{const t=JSON.parse(r);if(t.namespace===n._config.namespace&&Array.isArray(t.nodes))return At(n,function(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n],o=(0,f.GMe)(r);(0,f.kFe)(o)&&(0,W.Xg)(o),e.push(o)}return e}(t.nodes),e)}catch(t){}const o=t.getData("text/html"),i=t.getData("text/plain");if(o&&i!==o)try{return At(n,Ct(n,(new DOMParser).parseFromString(function(t){return window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:t=>t}).createHTML(t):t}(o),"text/html")),e)}catch(t){}const s=i||t.getData("text/uri-list");if(null!=s)if((0,f.I2P)(e)){const t=s.split(/(\r?\n|\t)/);""===t[t.length-1]&&t.pop();for(let e=0;e<t.length;e++){const n=(0,f.vJq)();if((0,f.I2P)(n)){const r=t[e];"\n"===r||"\r\n"===r?n.insertParagraph():"\t"===r?n.insertNodes([(0,f.ev7)()]):n.insertText(r)}}}else e.insertRawText(s)}function At(t,e,n){t.dispatchCommand(f.oqR,{nodes:e,selection:n})||n.insertNodes(e)}function Et(t,e,n,r=[]){let o=null===e||n.isSelected(e);const i=(0,f.ff4)(n)&&n.excludeFromCopy("html");let s=n;if(null!==e){let t=(0,f.BEs)(n);t=(0,f.kFe)(t)&&null!==e?(0,W.SD)(e,t):t,s=t}const l=(0,f.ff4)(s)?s.getChildren():[],a=function(t){const e=t.exportJSON(),n=t.constructor;if(e.type!==n.getType()&&Tt(58,n.name),(0,f.ff4)(t)){const t=e.children;Array.isArray(t)||Tt(59,n.name)}return e}(s);if((0,f.kFe)(s)){const t=s.__text;t.length>0?a.text=t:o=!1}for(let c=0;c<l.length;c++){const r=l[c],i=Et(t,e,r,a.children);!o&&(0,f.ff4)(n)&&i&&n.extractWithChild(r,e,"clone")&&(o=!0)}if(o&&!i)r.push(a);else if(Array.isArray(a.children))for(let c=0;c<a.children.length;c++){const t=a.children[c];r.push(t)}return o}let Ot=null;async function Pt(t,e,n){if(null!==Ot)return!1;if(null!==e)return new Promise(((r,o)=>{t.update((()=>{r(Mt(t,e,n))}))}));const r=t.getRootElement(),o=t._window||window,i=window.document,s=(0,f.peL)(o);if(null===r||null===s)return!1;const l=i.createElement("span");l.style.cssText="position: fixed; top: -1000px;",l.append(i.createTextNode("#")),r.append(l);const a=new Range;return a.setStart(l,0),a.setEnd(l,1),s.removeAllRanges(),s.addRange(a),new Promise(((e,r)=>{const o=t.registerCommand(f.u5G,(r=>(k(r,ClipboardEvent)&&(o(),null!==Ot&&(window.clearTimeout(Ot),Ot=null),e(Mt(t,r,n))),!0)),f.da8);Ot=window.setTimeout((()=>{o(),Ot=null,e(!1)}),50),i.execCommand("copy"),l.remove()}))}function Mt(t,e,n){if(void 0===n){const e=(0,f.peL)(t._window);if(!e)return!1;const r=e.anchorNode,o=e.focusNode;if(null!==r&&null!==o&&!(0,f.LYZ)(t,r,o))return!1;const i=(0,f.vJq)();if(null===i)return!1;n=function(t=(0,f.vJq)()){const e={"text/plain":t?t.getTextContent():""};if(t){const n=(0,f.i0_)();for(const[r,o]of Ft){const i=o(n,t);null!==i&&(e[r]=i)}}return e}(i)}e.preventDefault();const r=e.clipboardData;return null!==r&&(function(t,e){for(const n in e){const r=e[n];void 0!==r&&t.setData(n,r)}}(r,n),!0)}const Ft=[["text/html",function(t,e=(0,f.vJq)()){return null==e&&Tt(166),(0,f.I2P)(e)&&e.isCollapsed()||0===e.getNodes().length?"":bt(t,e)}],["application/x-lexical-editor",function(t,e=(0,f.vJq)()){return null==e&&Tt(166),(0,f.I2P)(e)&&e.isCollapsed()||0===e.getNodes().length?null:JSON.stringify(function(t,e){const n=[],r=(0,f.NiT)().getChildren();for(let o=0;o<r.length;o++)Et(t,e,r[o],n);return{namespace:t._config.namespace,nodes:n}}(t,e))}]];function Lt(t,e){if(void 0!==document.caretRangeFromPoint){const n=document.caretRangeFromPoint(t,e);return null===n?null:{node:n.startContainer,offset:n.startOffset}}if("undefined"!==document.caretPositionFromPoint){const n=document.caretPositionFromPoint(t,e);return null===n?null:{node:n.offsetNode,offset:n.offset}}return null}const It="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,Dt=It&&"documentMode"in document?document.documentMode:null,Rt=!(!It||!("InputEvent"in window)||Dt)&&"getTargetRanges"in new window.InputEvent("input"),jt=It&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Bt=It&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,zt=It&&/^(?=.*Chrome).*/i.test(navigator.userAgent),Wt=It&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!zt,Jt=(0,f.guI)("DRAG_DROP_PASTE_FILE");class $t extends f.fGB{static getType(){return"quote"}static clone(t){return new $t(t.__key)}createDOM(t){const e=document.createElement("blockquote");return x(e,t.theme.quote),e}updateDOM(t,e){return!1}static importDOM(){return{blockquote:t=>({conversion:Zt,priority:0})}}exportDOM(t){const{element:e}=super.exportDOM(t);if((0,f.sby)(e)){this.isEmpty()&&e.append(document.createElement("br"));const t=this.getFormatType();e.style.textAlign=t;const n=this.getDirection();n&&(e.dir=n)}return{element:e}}static importJSON(t){return Kt().updateFromJSON(t)}insertNewAfter(t,e){const n=(0,f.lJ7)(),r=this.getDirection();return n.setDirection(r),this.insertAfter(n,e),n}collapseAtStart(){const t=(0,f.lJ7)();return this.getChildren().forEach((e=>t.append(e))),this.replace(t),!0}canMergeWhenEmpty(){return!0}}function Kt(){return(0,f.pTq)(new $t)}class Ut extends f.fGB{static getType(){return"heading"}static clone(t){return new Ut(t.__tag,t.__key)}constructor(t,e){super(e),this.__tag=t}getTag(){return this.__tag}setTag(t){const e=this.getWritable();return this.__tag=t,e}createDOM(t){const e=this.__tag,n=document.createElement(e),r=t.theme.heading;if(void 0!==r){x(n,r[e])}return n}updateDOM(t,e,n){return t.__tag!==this.__tag}static importDOM(){return{h1:t=>({conversion:Ht,priority:0}),h2:t=>({conversion:Ht,priority:0}),h3:t=>({conversion:Ht,priority:0}),h4:t=>({conversion:Ht,priority:0}),h5:t=>({conversion:Ht,priority:0}),h6:t=>({conversion:Ht,priority:0}),p:t=>{const e=t.firstChild;return null!==e&&qt(e)?{conversion:()=>({node:null}),priority:3}:null},span:t=>qt(t)?{conversion:t=>({node:Vt("h1")}),priority:3}:null}}exportDOM(t){const{element:e}=super.exportDOM(t);if((0,f.sby)(e)){this.isEmpty()&&e.append(document.createElement("br"));const t=this.getFormatType();e.style.textAlign=t;const n=this.getDirection();n&&(e.dir=n)}return{element:e}}static importJSON(t){return Vt(t.tag).updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTag(t.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(t,e=!0){const n=t?t.anchor.offset:0,r=this.getLastDescendant(),o=!r||t&&t.anchor.key===r.getKey()&&n===r.getTextContentSize()||!t?(0,f.lJ7)():Vt(this.getTag()),i=this.getDirection();if(o.setDirection(i),this.insertAfter(o,e),0===n&&!this.isEmpty()&&t){const t=(0,f.lJ7)();t.select(),this.replace(t,!0)}return o}collapseAtStart(){const t=this.isEmpty()?(0,f.lJ7)():Vt(this.getTag());return this.getChildren().forEach((e=>t.append(e))),this.replace(t),!0}extractWithChild(){return!0}}function qt(t){return"span"===t.nodeName.toLowerCase()&&"26pt"===t.style.fontSize}function Ht(t){const e=t.nodeName.toLowerCase();let n=null;return"h1"!==e&&"h2"!==e&&"h3"!==e&&"h4"!==e&&"h5"!==e&&"h6"!==e||(n=Vt(e),null!==t.style&&((0,f.dxY)(t,n),n.setFormat(t.style.textAlign))),{node:n}}function Zt(t){const e=Kt();return null!==t.style&&(e.setFormat(t.style.textAlign),(0,f.dxY)(t,e)),{node:e}}function Vt(t="h1"){return(0,f.pTq)(new Ut(t))}function Gt(t){return t instanceof Ut}function Xt(t){let e=null;if(k(t,DragEvent)?e=t.dataTransfer:k(t,ClipboardEvent)&&(e=t.clipboardData),null===e)return[!1,[],!1];const n=e.types,r=n.includes("Files"),o=n.includes("text/html")||n.includes("text/plain");return[r,Array.from(e.files),o]}function Yt(t){const e=(0,f.vJq)();if(!(0,f.I2P)(e))return!1;const n=new Set,r=e.getNodes();for(let o=0;o<r.length;o++){const e=r[o],i=e.getKey();if(n.has(i))continue;const s=S(e,(t=>(0,f.ff4)(t)&&!t.isInline()));if(null===s)continue;const l=s.getKey();s.canIndent()&&!n.has(l)&&(n.add(l),t(s))}return n.size>0}function Qt(t){const e=(0,f.xL4)(t);return(0,f.Cyw)(e)}function te(t){for(const e of["lowercase","uppercase","capitalize"])t.hasFormat(e)&&t.toggleFormat(e)}const ee=(0,o.createContext)(null);function ne(){const t=(0,o.useContext)(ee);return null==t&&function(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const o of e)r.append("v",o);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(8),t}function re(t,e){return t.getEditorState().read((()=>{const t=(0,f.nsf)(e);return null!==t&&t.isSelected()}))}function oe(t){const[e]=ne(),[n,r]=(0,o.useState)((()=>re(e,t)));return(0,o.useEffect)((()=>{let n=!0;const o=e.registerUpdateListener((()=>{n&&r(re(e,t))}));return()=>{n=!1,o()}}),[e,t]),[n,(0,o.useCallback)((n=>{e.update((()=>{let e=(0,f.vJq)();(0,f.RTZ)(e)||(e=(0,f.rUs)(),(0,f.n1P)(e)),(0,f.RTZ)(e)&&(n?e.add(t):e.delete(t))}))}),[e,t]),(0,o.useCallback)((()=>{e.update((()=>{const t=(0,f.vJq)();(0,f.RTZ)(t)&&t.clear()}))}),[e])]}const ie=new Set;function se({altText:t,className:e,imageRef:n,src:o,width:i,height:s,maxWidth:l}){return function(t){if(!ie.has(t))throw new Promise((e=>{const n=new Image;n.src=t,n.onload=()=>{ie.add(t),e()}}))}(o),(0,r.jsx)("img",{className:e,src:o,alt:t,ref:n,style:{height:`${s}${"inherit"===s?"":"px"}`,maxWidth:l,width:`${i}${"inherit"===i?"":"px"}`}})}function le({src:t,altText:e,nodeKey:n,maxWidth:i}){const s=(0,o.useRef)(null),l=(0,o.useRef)(null),[a,c,u]=oe(n),[d]=ne(),h=(0,o.useRef)(null),g=(0,o.useCallback)((t=>{if(a&&(0,f.RTZ)((0,f.vJq)())){t.preventDefault();const e=(0,f.nsf)(n);(function(t){return"image"===t.getType()})(e)&&e.remove(),c(!1)}return!1}),[a,n,c]),p=(0,o.useCallback)((t=>{const e=(0,f.vJq)(),n=l.current;return!(!a||!(0,f.RTZ)(e)||1!==e.getNodes().length||null===n||n===document.activeElement)&&(t.preventDefault(),n.focus(),!0)}),[a]),m=(0,o.useCallback)((t=>l.current===t.target&&((0,f.n1P)(null),d.update((()=>{c(!0);const t=d.getRootElement();null!==t&&t.focus()})),!0)),[d,c]);return(0,o.useEffect)((()=>{const t=y(d.registerCommand(f.MvL,((t,e)=>(h.current=e,!1)),f.AcJ),d.registerCommand(f.d8p,(t=>{const e=t;return e.target===s.current&&(e.shiftKey?c(!a):(u(),c(!0)),!0)}),f.AcJ),d.registerCommand(f.w$Z,g,f.AcJ),d.registerCommand(f.gCZ,g,f.AcJ),d.registerCommand(f.RTo,p,f.AcJ),d.registerCommand(f.Q$N,m,f.AcJ));return()=>{t()}}),[u,d,a,n,g,p,m,c]),(0,r.jsx)(o.Suspense,Object.assign({fallback:null},{children:(0,r.jsx)(se,{className:a?"selected":null,src:t,altText:e,imageRef:s,maxWidth:i})}))}function ae(t){if(t instanceof HTMLImageElement){const{alt:e,src:n}=t;return{node:ue({altText:e,src:n,maxWidth:"100%"})}}return null}class ce extends f.Kp7{static getType(){return"image"}static clone(t){return new ce(t.__src,t.__altText,t.__maxWidth,t.__key)}constructor(t,e,n,r){super(r),this.__src=t,this.__altText=e,this.__maxWidth=n}setWidthAndHeight(t,e){const n=this.getWritable();n.__width=t,n.__height=e}createDOM(t){const e=document.createElement("div"),n=t.theme.image;return void 0!==n&&(e.className=n),e}updateDOM(){return!1}static importDOM(){const t=f.Ey8.importDOM();return Object.assign({img:t=>({conversion:ae,priority:0})},t)}exportDOM(){const t=document.createElement("img");return t.setAttribute("src",this.__src),t.setAttribute("alt",this.__altText),t.setAttribute("style",`max-width: ${this.__maxWidth}px;`),{element:t}}decorate(){return(0,r.jsx)(le,{src:this.__src,altText:this.__altText,maxWidth:this.__maxWidth,nodeKey:this.getKey()})}static importJSON(t){const{altText:e,maxWidth:n,src:r}=t;return ue({altText:e,src:r,maxWidth:n})}exportJSON(){return{altText:this.getAltText(),maxWidth:this.__maxWidth,src:this.getSrc(),type:"image",version:1}}}function ue({src:t,altText:e,maxWidth:n}){return new ce(t,e,n)}function de(t){return{node:he({avatar:"",bio:"",date_joined:void 0,description:"",gender:"",location:"",real_name:"",reputation:0,role:"",status:"",tags:void 0,website:"",id:t.getAttribute("id"),ext_id:t.getAttribute("ext_id"),username:t.innerText.replace("@","")})}}class fe extends f.Ey8{static getType(){return"mention"}static clone(t){return new fe(t.__user,t.__text,t.__key)}constructor(t,e,n){super(null!=e?e:`@${t.username}`,n),this.__user=t}createDOM(t){const e=document.createElement("mention");return e.setAttribute("id",`${this.__user.id}`),e.setAttribute("ext-id",`${this.__user.ext_id}`),e.innerText=this.__text,e}updateDOM(t,e,n){const r=e.firstChild;return null===r||(super.updateDOM(t,r,n),!1)}static importDOM(){const t=f.Ey8.importDOM();return Object.assign({mention:t=>({conversion:de,priority:0})},t)}exportDOM(){const t=document.createElement("mention");return t.setAttribute("id",`${this.__user.id}`),t.setAttribute("ext-id",`${this.__user.ext_id}`),t.textContent=`@${this.__user.username}`,{element:t}}isTextEntity(){return!0}static importJSON(t){const{user:e}=t;return he(e)}exportJSON(){return Object.assign(Object.assign({},super.exportJSON()),{user:this.__user,type:"mention",version:1})}}function he(t){const e=new fe(t);return e.setMode("segmented").toggleDirectionless(),e}const ge=(0,f.guI)("INSERT_HORIZONTAL_RULE_COMMAND");function pe({nodeKey:t}){const[e]=ne(),[n,r,i]=oe(t);return(0,o.useEffect)((()=>y(e.registerCommand(f.d8p,(o=>{const s=e.getElementByKey(t);return o.target===s&&(o.shiftKey||i(),r(!n),!0)}),f.AcJ))),[i,e,n,t,r]),(0,o.useEffect)((()=>{const r=e.getElementByKey(t),o=e._config.theme.hrSelected??"selected";null!==r&&(n?x(r,o):v(r,o))}),[e,n,t]),null}class me extends f.Kp7{static getType(){return"horizontalrule"}static clone(t){return new me(t.__key)}static importJSON(t){return ye().updateFromJSON(t)}static importDOM(){return{hr:()=>({conversion:_e,priority:0})}}exportDOM(){return{element:document.createElement("hr")}}createDOM(t){const e=document.createElement("hr");return x(e,t.theme.hr),e}getTextContent(){return"\n"}isInline(){return!1}updateDOM(){return!1}decorate(){return(0,r.jsx)(pe,{nodeKey:this.__key})}}function _e(){return{node:ye()}}function ye(){return(0,f.pTq)(new me)}const xe=[me,Ut,ut,rt,$t,f.Ey8,L,O,ce,fe],ve="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,Ce=ve?o.useLayoutEffect:o.useEffect,be={tag:"history-merge"};function Se({initialConfig:t,children:e}){const n=(0,o.useMemo)((()=>{const{theme:e,namespace:n,nodes:r,onError:o,editorState:i,html:s}=t,l=function(t,e){let n=null;return null!=t&&(n=t[1]),{getTheme:function(){return null!=e?e:null!=n?n.getTheme():null}}}(null,e),a=(0,f.ieJ)({editable:t.editable,html:s,namespace:n,nodes:r,onError:t=>o(t,a),theme:e});return function(t,e){if(null!==e)if(void 0===e)t.update((()=>{const e=(0,f.NiT)();if(e.isEmpty()){const n=(0,f.lJ7)();e.append(n);const r=ve?document.activeElement:null;(null!==(0,f.vJq)()||null!==r&&r===t.getRootElement())&&n.select()}}),be);else if(null!==e)switch(typeof e){case"string":{const n=t.parseEditorState(e);t.setEditorState(n,be);break}case"object":t.setEditorState(e,be);break;case"function":t.update((()=>{(0,f.NiT)().isEmpty()&&e(t)}),be)}}(a,i),[a,l]}),[]);return Ce((()=>{const e=t.editable,[r]=n;r.setEditable(void 0===e||e)}),[]),(0,r.jsx)(ee.Provider,{value:n,children:e})}function we(t,e=!0){if(t)return!1;let n=(0,f.NiT)().getTextContent();return e&&(n=n.trim()),""===n}function ke(t){return()=>function(t){if(!we(t,!1))return!1;const e=(0,f.NiT)().getChildren(),n=e.length;if(n>1)return!1;for(let r=0;r<n;r++){const t=e[r];if((0,f.Cyw)(t))return!1;if((0,f.ff4)(t)){if(!(0,f.bSg)(t))return!1;if(0!==t.__indent)return!1;const e=t.getChildren(),n=e.length;for(let t=0;t<n;t++){const t=e[r];if(!(0,f.kFe)(t))return!1}}}return!0}(t)}const Te="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?o.useLayoutEffect:o.useEffect;const Ne=(0,o.forwardRef)((function({editor:t,ariaActiveDescendant:e,ariaAutoComplete:n,ariaControls:i,ariaDescribedBy:s,ariaErrorMessage:l,ariaExpanded:a,ariaInvalid:c,ariaLabel:u,ariaLabelledBy:d,ariaMultiline:f,ariaOwns:h,ariaRequired:g,autoCapitalize:p,className:m,id:_,role:y="textbox",spellCheck:x=!0,style:v,tabIndex:C,"data-testid":b,...S},w){const[k,T]=(0,o.useState)(t.isEditable()),N=(0,o.useCallback)((e=>{e&&e.ownerDocument&&e.ownerDocument.defaultView?t.setRootElement(e):t.setRootElement(null)}),[t]),A=(0,o.useMemo)((()=>function(...t){return e=>{t.forEach((t=>{"function"==typeof t?t(e):null!=t&&(t.current=e)}))}}(w,N)),[N,w]);return Te((()=>(T(t.isEditable()),t.registerEditableListener((t=>{T(t)})))),[t]),(0,r.jsx)("div",{"aria-activedescendant":k?e:void 0,"aria-autocomplete":k?n:"none","aria-controls":k?i:void 0,"aria-describedby":s,...null!=l?{"aria-errormessage":l}:{},"aria-expanded":k&&"combobox"===y?!!a:void 0,...null!=c?{"aria-invalid":c}:{},"aria-label":u,"aria-labelledby":d,"aria-multiline":f,"aria-owns":k?h:void 0,"aria-readonly":!k||void 0,"aria-required":g,autoCapitalize:p,className:m,contentEditable:k,"data-testid":b,id:_,ref:A,role:k?y:void 0,spellCheck:x,style:v,tabIndex:C,...S})}));function Ae(t){return t.getEditorState().read(ke(t.isComposing()))}const Ee=(0,o.forwardRef)((function(t,e){const{placeholder:n,...o}=t,[i]=ne();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Ne,{editor:i,...o,ref:e}),null!=n&&(0,r.jsx)(Oe,{editor:i,content:n})]})}));function Oe({content:t,editor:e}){const n=function(t){const[e,n]=(0,o.useState)((()=>Ae(t)));return Te((()=>{function e(){const e=Ae(t);n(e)}return e(),y(t.registerUpdateListener((()=>{e()})),t.registerEditableListener((()=>{e()})))}),[t]),e}(e),[i,s]=(0,o.useState)(e.isEditable());if((0,o.useLayoutEffect)((()=>(s(e.isEditable()),e.registerEditableListener((t=>{s(t)})))),[e]),!n)return null;let l=null;return"function"==typeof t?l=t(i):null!==t&&(l=t),null===l?null:(0,r.jsx)("div",{"aria-hidden":!0,children:l})}class Pe extends f.Kp7{constructor(t,e){super(e),this.__format=t||""}exportJSON(){return{...super.exportJSON(),format:this.__format||""}}updateFromJSON(t){return super.updateFromJSON(t).setFormat(t.format||"")}canIndent(){return!1}createDOM(){return document.createElement("div")}updateDOM(){return!1}setFormat(t){const e=this.getWritable();return e.__format=t,e}isInline(){return!1}}const Me=/^(\d+(?:\.\d+)?)px$/,Fe={BOTH:3,COLUMN:2,NO_STATUS:0,ROW:1};class Le extends f.fGB{static getType(){return"tablecell"}static clone(t){return new Le(t.__headerState,t.__colSpan,t.__width,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__rowSpan=t.__rowSpan,this.__backgroundColor=t.__backgroundColor,this.__verticalAlign=t.__verticalAlign}static importDOM(){return{td:t=>({conversion:De,priority:0}),th:t=>({conversion:De,priority:0})}}static importJSON(t){return Re().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHeaderStyles(t.headerState).setColSpan(t.colSpan||1).setRowSpan(t.rowSpan||1).setWidth(t.width||void 0).setBackgroundColor(t.backgroundColor||null).setVerticalAlign(t.verticalAlign||void 0)}constructor(t=Fe.NO_STATUS,e=1,n,r){super(r),this.__colSpan=e,this.__rowSpan=1,this.__headerState=t,this.__width=n,this.__backgroundColor=null,this.__verticalAlign=void 0}createDOM(t){const e=document.createElement(this.getTag());return this.__width&&(e.style.width=`${this.__width}px`),this.__colSpan>1&&(e.colSpan=this.__colSpan),this.__rowSpan>1&&(e.rowSpan=this.__rowSpan),null!==this.__backgroundColor&&(e.style.backgroundColor=this.__backgroundColor),Ie(this.__verticalAlign)&&(e.style.verticalAlign=this.__verticalAlign),x(e,t.theme.tableCell,this.hasHeader()&&t.theme.tableCellHeader),e}exportDOM(t){const e=super.exportDOM(t);if((0,f.sby)(e.element)){const t=e.element;t.setAttribute("data-temporary-table-cell-lexical-key",this.getKey()),t.style.border="1px solid black",this.__colSpan>1&&(t.colSpan=this.__colSpan),this.__rowSpan>1&&(t.rowSpan=this.__rowSpan),t.style.width=`${this.getWidth()||75}px`,t.style.verticalAlign=this.getVerticalAlign()||"top",t.style.textAlign="start",null===this.__backgroundColor&&this.hasHeader()&&(t.style.backgroundColor="#f2f3f5")}return e}exportJSON(){return{...super.exportJSON(),...Ie(this.__verticalAlign)&&{verticalAlign:this.__verticalAlign},backgroundColor:this.getBackgroundColor(),colSpan:this.__colSpan,headerState:this.__headerState,rowSpan:this.__rowSpan,width:this.getWidth()}}getColSpan(){return this.getLatest().__colSpan}setColSpan(t){const e=this.getWritable();return e.__colSpan=t,e}getRowSpan(){return this.getLatest().__rowSpan}setRowSpan(t){const e=this.getWritable();return e.__rowSpan=t,e}getTag(){return this.hasHeader()?"th":"td"}setHeaderStyles(t,e=Fe.BOTH){const n=this.getWritable();return n.__headerState=t&e|n.__headerState&~e,n}getHeaderStyles(){return this.getLatest().__headerState}setWidth(t){const e=this.getWritable();return e.__width=t,e}getWidth(){return this.getLatest().__width}getBackgroundColor(){return this.getLatest().__backgroundColor}setBackgroundColor(t){const e=this.getWritable();return e.__backgroundColor=t,e}getVerticalAlign(){return this.getLatest().__verticalAlign}setVerticalAlign(t){const e=this.getWritable();return e.__verticalAlign=t||void 0,e}toggleHeaderStyle(t){const e=this.getWritable();return(e.__headerState&t)===t?e.__headerState-=t:e.__headerState+=t,e}hasHeaderState(t){return(this.getHeaderStyles()&t)===t}hasHeader(){return this.getLatest().__headerState!==Fe.NO_STATUS}updateDOM(t){return t.__headerState!==this.__headerState||t.__width!==this.__width||t.__colSpan!==this.__colSpan||t.__rowSpan!==this.__rowSpan||t.__backgroundColor!==this.__backgroundColor||t.__verticalAlign!==this.__verticalAlign}isShadowRoot(){return!0}collapseAtStart(){return!0}canBeEmpty(){return!1}canIndent(){return!1}}function Ie(t){return"middle"===t||"bottom"===t}function De(t){const e=t,n=t.nodeName.toLowerCase();let r;Me.test(e.style.width)&&(r=parseFloat(e.style.width));const o=Re("th"===n?Fe.ROW:Fe.NO_STATUS,e.colSpan,r);o.__rowSpan=e.rowSpan;const i=e.style.backgroundColor;""!==i&&(o.__backgroundColor=i);const s=e.style.verticalAlign;Ie(s)&&(o.__verticalAlign=s);const l=e.style,a=(l&&l.textDecoration||"").split(" "),c="700"===l.fontWeight||"bold"===l.fontWeight,u=a.includes("line-through"),d="italic"===l.fontStyle,h=a.includes("underline");return{after:t=>{const e=[];let n=null;const r=()=>{if(n){const t=n.getFirstChild();(0,f.wH$)(t)&&1===n.getChildrenSize()&&t.remove()}};for(const o of t)(0,f.Gew)(o)||(0,f.kFe)(o)||(0,f.wH$)(o)?((0,f.kFe)(o)&&(c&&o.toggleFormat("bold"),u&&o.toggleFormat("strikethrough"),d&&o.toggleFormat("italic"),h&&o.toggleFormat("underline")),n?n.append(o):(n=(0,f.lJ7)().append(o),e.push(n))):(e.push(o),r(),n=null);return r(),0===e.length&&e.push((0,f.lJ7)()),e},node:o}}function Re(t=Fe.NO_STATUS,e=1,n){return(0,f.pTq)(new Le(t,e,n))}function je(t){return t instanceof Le}(0,f.guI)("INSERT_TABLE_COMMAND");function Be(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const o of e)r.append("v",o);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}class ze extends f.fGB{static getType(){return"tablerow"}static clone(t){return new ze(t.__height,t.__key)}static importDOM(){return{tr:t=>({conversion:We,priority:0})}}static importJSON(t){return Je().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHeight(t.height)}constructor(t,e){super(e),this.__height=t}exportJSON(){const t=this.getHeight();return{...super.exportJSON(),...void 0===t?void 0:{height:t}}}createDOM(t){const e=document.createElement("tr");return this.__height&&(e.style.height=`${this.__height}px`),x(e,t.theme.tableRow),e}extractWithChild(t,e,n){return"html"===n}isShadowRoot(){return!0}setHeight(t){const e=this.getWritable();return e.__height=t,e}getHeight(){return this.getLatest().__height}updateDOM(t){return t.__height!==this.__height}canBeEmpty(){return!1}canIndent(){return!1}}function We(t){const e=t;let n;return Me.test(e.style.height)&&(n=parseFloat(e.style.height)),{after:t=>T(t,je),node:Je(n)}}function Je(t){return(0,f.pTq)(new ze(t))}function $e(t){return t instanceof ze}const Ke="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,Ue=Ke&&"documentMode"in document?document.documentMode:null;Ke&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);Ke&&"InputEvent"in window&&!Ue&&new window.InputEvent("input");function qe(t,e,n){const[r,o,i]=He(t,e,n);return null===o&&Be(207),null===i&&Be(208),[r,o,i]}function He(t,e,n){const r=[];let o=null,i=null;function s(t){let e=r[t];return void 0===e&&(r[t]=e=[]),e}const l=t.getChildren();for(let a=0;a<l.length;a++){const t=l[a];$e(t)||Be(209);const r=s(a);for(let c=t.getFirstChild(),u=0;null!=c;c=c.getNextSibling()){for(je(c)||Be(147);void 0!==r[u];)u++;const t={cell:c,startColumn:u,startRow:a},{__rowSpan:d,__colSpan:f}=c;for(let e=0;e<d&&!(a+e>=l.length);e++){const n=s(a+e);for(let e=0;e<f;e++)n[u+e]=t}null!==e&&null===o&&e.is(c)&&(o=t),null!==n&&null===i&&n.is(c)&&(i=t)}}return[r,o,i]}function Ze(t){let e;if(t instanceof Le)e=t;else if("__type"in t){const n=S(t,je);je(n)||Be(148),e=n}else{const n=S(t.getNode(),je);je(n)||Be(148),e=n}const n=e.getParent();$e(n)||Be(149);const r=n.getParent();return dn(r)||Be(210),[e,n,r]}function Ve(t,e,n){let r,o=Math.min(e.startColumn,n.startColumn),i=Math.min(e.startRow,n.startRow),s=Math.max(e.startColumn+e.cell.__colSpan-1,n.startColumn+n.cell.__colSpan-1),l=Math.max(e.startRow+e.cell.__rowSpan-1,n.startRow+n.cell.__rowSpan-1);do{r=!1;for(let e=0;e<t.length;e++)for(let n=0;n<t[0].length;n++){const a=t[e][n];if(!a)continue;const c=a.startColumn+a.cell.__colSpan-1,u=a.startRow+a.cell.__rowSpan-1,d=a.startColumn<=s&&c>=o,f=a.startRow<=l&&u>=i;if(d&&f){const t=Math.min(o,a.startColumn),e=Math.max(s,c),n=Math.min(i,a.startRow),d=Math.max(l,u);t===o&&e===s&&n===i&&d===l||(o=t,s=e,i=n,l=d,r=!0)}}}while(r);return{maxColumn:s,maxRow:l,minColumn:o,minRow:i}}function Ge(t){const[e,,n]=Ze(t),r=n.getChildren(),o=r.length,i=r[0].getChildren().length,s=new Array(o);for(let l=0;l<o;l++)s[l]=new Array(i);for(let l=0;l<o;l++){const t=r[l].getChildren();let n=0;for(let r=0;r<t.length;r++){for(;s[l][n];)n++;const o=t[r],i=o.__rowSpan||1,a=o.__colSpan||1;for(let t=0;t<i;t++)for(let e=0;e<a;e++)s[l+t][n+e]=o;if(e===o)return{colSpan:a,columnIndex:n,rowIndex:l,rowSpan:i};n+=a}}return null}function Xe(t){const[[e,n,r,o],[i,s,l,a]]=["anchor","focus"].map((e=>{const n=t[e].getNode(),r=S(n,je);je(r)||Be(238,e,n.getKey(),n.getType());const o=r.getParent();$e(o)||Be(239,e);const i=o.getParent();return dn(i)||Be(240,e),[n,r,o,i]}));return o.is(a)||Be(241),{anchorCell:n,anchorNode:e,anchorRow:r,anchorTable:o,focusCell:s,focusNode:i,focusRow:l,focusTable:a}}class Ye{constructor(t,e,n){this.anchor=e,this.focus=n,e._selection=this,n._selection=this,this._cachedNodes=null,this.dirty=!1,this.tableKey=t}getStartEndPoints(){return[this.anchor,this.focus]}isValid(){return"root"!==this.tableKey&&"root"!==this.anchor.key&&"element"===this.anchor.type&&"root"!==this.focus.key&&"element"===this.focus.type}isBackward(){return this.focus.isBefore(this.anchor)}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){return Qe(t)&&this.tableKey===t.tableKey&&this.anchor.is(t.anchor)&&this.focus.is(t.focus)}set(t,e,n){this.dirty=this.dirty||t!==this.tableKey||e!==this.anchor.key||n!==this.focus.key,this.tableKey=t,this.anchor.key=e,this.focus.key=n,this._cachedNodes=null}clone(){return new Ye(this.tableKey,(0,f.z8s)(this.anchor.key,this.anchor.offset,this.anchor.type),(0,f.z8s)(this.focus.key,this.focus.offset,this.focus.type))}isCollapsed(){return!1}extract(){return this.getNodes()}insertRawText(t){}insertText(){}hasFormat(t){let e=0;this.getNodes().filter(je).forEach((t=>{const n=t.getFirstChild();(0,f.bSg)(n)&&(e|=n.getTextFormat())}));const n=f.LZn[t];return!!(e&n)}insertNodes(t){const e=this.focus.getNode();(0,f.ff4)(e)||Be(151),(0,f.CaD)(e.select(0,e.getChildrenSize())).insertNodes(t)}getShape(){const{anchorCell:t,focusCell:e}=Xe(this),n=Ge(t);null===n&&Be(153);const r=Ge(e);null===r&&Be(155);const o=Math.min(n.columnIndex,r.columnIndex),i=Math.max(n.columnIndex+n.colSpan-1,r.columnIndex+r.colSpan-1),s=Math.min(n.rowIndex,r.rowIndex),l=Math.max(n.rowIndex+n.rowSpan-1,r.rowIndex+r.rowSpan-1);return{fromX:Math.min(o,i),fromY:Math.min(s,l),toX:Math.max(o,i),toY:Math.max(s,l)}}getNodes(){if(!this.isValid())return[];const t=this._cachedNodes;if(null!==t)return t;const{anchorTable:e,anchorCell:n,focusCell:r}=Xe(this),o=r.getParents()[1];if(o!==e){if(e.isParentOf(r)){const t=o.getParent();null==t&&Be(159),this.set(this.tableKey,r.getKey(),t.getKey())}else{const t=e.getParent();null==t&&Be(158),this.set(this.tableKey,t.getKey(),r.getKey())}return this.getNodes()}const[i,s,l]=qe(e,n,r),{minColumn:a,maxColumn:c,minRow:u,maxRow:d}=Ve(i,s,l),h=new Map([[e.getKey(),e]]);let g=null;for(let f=u;f<=d;f++)for(let t=a;t<=c;t++){const{cell:e}=i[f][t],n=e.getParent();$e(n)||Be(160),n!==g&&(h.set(n.getKey(),n),g=n),h.has(e.getKey())||tn(e,(t=>{h.set(t.getKey(),t)}))}const p=Array.from(h.values());return(0,f.GcU)()||(this._cachedNodes=p),p}getTextContent(){const t=this.getNodes().filter((t=>je(t)));let e="";for(let n=0;n<t.length;n++){const r=t[n],o=r.__parent,i=(t[n+1]||{}).__parent;e+=r.getTextContent()+(i!==o?"\n":"\t")}return e}}function Qe(t){return t instanceof Ye}function tn(t,e){const n=[[t]];for(let r=n.at(-1);void 0!==r&&n.length>0;r=n.at(-1)){const t=r.pop();void 0===t?n.pop():!1!==e(t)&&(0,f.ff4)(t)&&n.push(t.getChildren())}}function en(t){return(0,f.sby)(t)&&"TABLE"===t.nodeName}function nn(t,e){for(let n=e,r=null;null!==n;n=n.getParent()){if(t.is(n))return r;je(n)&&(r=n)}return null}f.bbF,f.UDz,f.AX0,f.JM3,f.hi0,f.viC,f.WuB,f.gCZ,f.w$Z;function rn(t,e,n){return nn(t,(0,f.xL4)(e,n))}function on(t,e,n){if(!e.theme.tableAlignment)return;const r=[],o=[];for(const i of["center","right"]){const t=e.theme.tableAlignment[i];t&&(i===n?o:r).push(t)}v(t,...r),x(t,...o)}const sn=new WeakSet;function ln(t=(0,f.i0_)()){return sn.has(t)}class an extends f.fGB{static getType(){return"table"}getColWidths(){return this.getLatest().__colWidths}setColWidths(t){const e=this.getWritable();return e.__colWidths=t,e}static clone(t){return new an(t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__colWidths=t.__colWidths,this.__rowStriping=t.__rowStriping,this.__frozenColumnCount=t.__frozenColumnCount,this.__frozenRowCount=t.__frozenRowCount}static importDOM(){return{table:t=>({conversion:cn,priority:1})}}static importJSON(t){return un().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setRowStriping(t.rowStriping||!1).setFrozenColumns(t.frozenColumnCount||0).setFrozenRows(t.frozenRowCount||0).setColWidths(t.colWidths)}constructor(t){super(t),this.__rowStriping=!1,this.__frozenColumnCount=0,this.__frozenRowCount=0}exportJSON(){return{...super.exportJSON(),colWidths:this.getColWidths(),frozenColumnCount:this.__frozenColumnCount?this.__frozenColumnCount:void 0,frozenRowCount:this.__frozenRowCount?this.__frozenRowCount:void 0,rowStriping:this.__rowStriping?this.__rowStriping:void 0}}extractWithChild(t,e,n){return"html"===n}getDOMSlot(t){const e=en(t)?t:t.querySelector("table");return en(e)||Be(229),super.getDOMSlot(t).withElement(e).withAfter(e.querySelector("colgroup"))}createDOM(t,e){const n=document.createElement("table");this.__style&&(n.style.cssText=this.__style);const r=document.createElement("colgroup");if(n.appendChild(r),(0,f.pd8)(r),x(n,t.theme.table),this.updateTableElement(null,n,t),ln(e)){const e=document.createElement("div"),r=t.theme.tableScrollableWrapper;return r?x(e,r):e.style.cssText="overflow-x: auto;",e.appendChild(n),e}return n}updateTableElement(t,e,n){this.__style!==(t?t.__style:"")&&(e.style.cssText=this.__style),this.__rowStriping!==(!!t&&t.__rowStriping)&&function(t,e,n){n?(x(t,e.theme.tableRowStriping),t.setAttribute("data-lexical-row-striping","true")):(v(t,e.theme.tableRowStriping),t.removeAttribute("data-lexical-row-striping"))}(e,n,this.__rowStriping),this.__frozenColumnCount!==(t?t.__frozenColumnCount:0)&&function(t,e,n){n>0?(x(t,e.theme.tableFrozenColumn),t.setAttribute("data-lexical-frozen-column","true")):(v(t,e.theme.tableFrozenColumn),t.removeAttribute("data-lexical-frozen-column"))}(e,n,this.__frozenColumnCount),this.__frozenRowCount!==(t?t.__frozenRowCount:0)&&function(t,e,n){n>0?(x(t,e.theme.tableFrozenRow),t.setAttribute("data-lexical-frozen-row","true")):(v(t,e.theme.tableFrozenRow),t.removeAttribute("data-lexical-frozen-row"))}(e,n,this.__frozenRowCount),function(t,e,n,r){const o=t.querySelector("colgroup");if(!o)return;const i=[];for(let s=0;s<n;s++){const t=document.createElement("col"),e=r&&r[s];e&&(t.style.width=`${e}px`),i.push(t)}o.replaceChildren(...i)}(e,0,this.getColumnCount(),this.getColWidths()),on(e,n,this.getFormatType())}updateDOM(t,e,n){return this.updateTableElement(t,this.getDOMSlot(e).element,n),!1}exportDOM(t){const e=super.exportDOM(t),{element:n}=e;return{after:n=>{if(e.after&&(n=e.after(n)),!en(n)&&(0,f.sby)(n)&&(n=n.querySelector("table")),!en(n))return null;on(n,t._config,this.getFormatType());const[r]=He(this,null,null),o=new Map;for(const t of r)for(const e of t){const t=e.cell.getKey();o.has(t)||o.set(t,{colSpan:e.cell.getColSpan(),startColumn:e.startColumn})}const i=new Set;for(const t of n.querySelectorAll(":scope > tr > [data-temporary-table-cell-lexical-key]")){const e=t.getAttribute("data-temporary-table-cell-lexical-key");if(e){const n=o.get(e);if(t.removeAttribute("data-temporary-table-cell-lexical-key"),n){o.delete(e);for(let t=0;t<n.colSpan;t++)i.add(t+n.startColumn)}}}const s=n.querySelector(":scope > colgroup");if(s){const t=Array.from(n.querySelectorAll(":scope > colgroup > col")).filter(((t,e)=>i.has(e)));s.replaceChildren(...t)}const l=n.querySelectorAll(":scope > tr");if(l.length>0){const t=document.createElement("tbody");for(const e of l)t.appendChild(e);n.append(t)}return n},element:!en(n)&&(0,f.sby)(n)?n.querySelector("table"):n}}canBeEmpty(){return!1}isShadowRoot(){return!0}getCordsFromCellNode(t,e){const{rows:n,domRows:r}=e;for(let o=0;o<n;o++){const e=r[o];if(null!=e)for(let n=0;n<e.length;n++){const r=e[n];if(null==r)continue;const{elem:i}=r,s=rn(this,i);if(null!==s&&t.is(s))return{x:n,y:o}}}throw new Error("Cell not found in table.")}getDOMCellFromCords(t,e,n){const{domRows:r}=n,o=r[e];if(null==o)return null;const i=o[t<o.length?t:o.length-1];return null==i?null:i}getDOMCellFromCordsOrThrow(t,e,n){const r=this.getDOMCellFromCords(t,e,n);if(!r)throw new Error("Cell not found at cords.");return r}getCellNodeFromCords(t,e,n){const r=this.getDOMCellFromCords(t,e,n);if(null==r)return null;const o=(0,f.xL4)(r.elem);return je(o)?o:null}getCellNodeFromCordsOrThrow(t,e,n){const r=this.getCellNodeFromCords(t,e,n);if(!r)throw new Error("Node at cords not TableCellNode.");return r}getRowStriping(){return Boolean(this.getLatest().__rowStriping)}setRowStriping(t){const e=this.getWritable();return e.__rowStriping=t,e}setFrozenColumns(t){const e=this.getWritable();return e.__frozenColumnCount=t,e}getFrozenColumns(){return this.getLatest().__frozenColumnCount}setFrozenRows(t){const e=this.getWritable();return e.__frozenRowCount=t,e}getFrozenRows(){return this.getLatest().__frozenRowCount}canSelectBefore(){return!0}canIndent(){return!1}getColumnCount(){const t=this.getFirstChild();if(!t)return 0;let e=0;return t.getChildren().forEach((t=>{je(t)&&(e+=t.getColSpan())})),e}}function cn(t){const e=un();t.hasAttribute("data-lexical-row-striping")&&e.setRowStriping(!0);const n=t.querySelector(":scope > colgroup");if(n){let t=[];for(const e of n.querySelectorAll(":scope > col")){let n=e.style.width||"";if(!Me.test(n)&&(n=e.getAttribute("width")||"",!/^\d+$/.test(n))){t=void 0;break}t.push(parseFloat(n))}t&&e.setColWidths(t)}return{after:t=>T(t,$e),node:e}}function un(){return(0,f.pTq)(new an)}function dn(t){return t instanceof an}var fn=n(37116),hn=n(4671),gn=n(18653),pn=n(40059),mn=n(51372),_n=n(25911),yn=n(7751),xn=n(33676),vn=n(31635),Cn=n(3246),bn=n(56545),Sn=n(29368),wn=n(45284),kn=n(2877),Tn=n(86691),Nn=n(41071),An=n(18590),En=n(53545);const On=(0,f.guI)(),Pn=(0,Nn.If)((0,o.forwardRef)(((t,e)=>{var{progress:n=null}=t,o=(0,vn.__rest)(t,["progress"]);return(0,r.jsx)(hn.A,Object.assign({},o,{"aria-label":"upload image",ref:e},{children:n?(0,r.jsx)(Cn.A,{variant:"determinate",value:n,size:"1rem"}):(0,r.jsx)(pn.A,Object.assign({color:"inherit"},{children:"image"}))}))})));const Mn={root:`${En.H}-image-plugin-root`},Fn=(0,s.Ay)((function({editor:t,className:e=""}){const n=(0,wn.J_)(),i=(0,kn.X1)(),[s,l]=(0,o.useState)({}),{enqueueSnackbar:a}=(0,An.dh)();return i.user?(0,r.jsxs)(bn.Ay,Object.assign({destination:{url:`${n.settings.portal}${Sn.A.ComposerChunkUploadMedia.url()}`,headers:Object.assign({},n.settings.session&&n.settings.session.authToken&&{Authorization:`Bearer ${n.settings.session.authToken.accessToken}`}),method:Sn.A.ComposerChunkUploadMedia.method},chunkSize:204800,multiple:!0,accept:"image/*",fileFilter:(t,e,n)=>t.type.startsWith("image/")},{children:[(0,r.jsx)(Tn.A,{type:"eimage",onSuccess:e=>{const n={altText:e.title,src:e.image,width:e.image_width,height:e.image_height};t.focus(),t.dispatchCommand(On,n)},onProgress:t=>{l(Object.assign({},t))},onError:(t,e)=>{a(e,{variant:"error",autoHideDuration:3e3})}}),(0,r.jsx)(Pn,{className:e,extraProps:{disabled:0!==Object.keys(s).length,progress:0!==Object.keys(s).length?Object.values(s)[0].completed:null}})]})):null}),{name:En.H,slot:"ImagePluginRoot"})((()=>({})));function Ln(){const[t]=ne();return(0,o.useEffect)((()=>{if(t.hasNodes([ce]))return t.registerCommand(On,(t=>(w(ue({src:t.src,altText:t.altText,maxWidth:"100%",width:t.width,height:t.height})),!0)),f.jZM)}),[t]),t.hasNodes([ce])?(0,r.jsx)(Fn,{editor:t,className:Mn.root}):null}var In=n(44675),Dn=n(90508),Rn=n(67011),jn=n(20973),Bn=n(4032);const zn={root:`${En.H}-emoji-plugin-root`},Wn=(0,s.Ay)((function({editor:t,className:e="",isLessonCommentEditor:n=!1}){const i=(0,In.A)(),s=(0,Dn.A)(i.breakpoints.down("md")),[l,a]=(0,o.useState)(!1);return s?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(hn.A,Object.assign({className:e,onClick:t=>{a(t.currentTarget)}},{children:(0,r.jsx)(pn.A,{children:"sentiment_satisfied_alt"})})),(0,r.jsx)(Rn.Ay,Object.assign({open:Boolean(l),anchorEl:l,onClose:()=>a(null),TransitionComponent:jn.A,anchorOrigin:n?{vertical:"bottom",horizontal:"left"}:{vertical:"top",horizontal:"right"},transformOrigin:n?{vertical:"top",horizontal:"right"}:{vertical:"bottom",horizontal:"left"},sx:t=>({zIndex:t.zIndex.tooltip})},{children:(0,r.jsx)(Bn.A,{onEmojiClick:(e,n)=>{t.focus(),t.dispatchCommand(f.bM3,e.emoji)}})}))]})}),{name:En.H,slot:"EmojiPluginRoot"})((()=>({})));function Jn({isLessonCommentEditor:t=!1}){const[e]=ne();return(0,r.jsx)(Wn,{editor:e,className:zn.root,isLessonCommentEditor:t})}const $n=(0,f.guI)(),Kn=(0,Nn.If)((0,o.forwardRef)(((t,e)=>{var{progress:n=null}=t,o=(0,vn.__rest)(t,["progress"]);return(0,r.jsx)(hn.A,Object.assign({},o,{"aria-label":"upload image",ref:e},{children:n?(0,r.jsx)(Cn.A,{variant:"determinate",value:n,size:"1rem"}):(0,r.jsx)(pn.A,Object.assign({color:"inherit"},{children:"attach_file"}))}))}))),Un={root:`${En.H}-media-plugin-root`},qn=(0,s.Ay)(l.A,{name:En.H,slot:"MediaPluginRoot"})((()=>({})));function Hn(t){var e;const{className:n="",onMediaAdd:i=null,isUploading:s}=t,[l,a]=(0,o.useState)({}),[c,d]=(0,o.useState)(""),[h]=ne(),g=(0,wn.J_)(),p=(0,kn.X1)(),{enqueueSnackbar:m}=(0,An.dh)();(0,o.useEffect)((()=>{if(h.hasNodes([ce]))return h.registerCommand(On,(t=>(w(ue({src:t.src,altText:t.altText,maxWidth:"100%",width:t.width,height:t.height})),!0)),f.jZM)}),[h]);return p.user&&h.hasNodes([ce])?(0,r.jsx)(qn,Object.assign({className:u()(Un.root,n)},{children:(0,r.jsxs)(bn.Ay,Object.assign({destination:{url:`${g.settings.portal}${Sn.A.ComposerChunkUploadMedia.url()}`,headers:(null===(e=g.settings.session)||void 0===e?void 0:e.authToken)?{Authorization:`Bearer ${g.settings.session.authToken.accessToken}`}:{},method:Sn.A.ComposerChunkUploadMedia.method},chunkSize:204800,accept:"image/*,application/*",fileFilter:t=>(t.type.startsWith("image/")?d("image"):d("file"),t.type.startsWith("image/")||t.type.startsWith("application/")),multiple:!0},{children:[(0,r.jsx)(Tn.A,{type:c,onSuccess:t=>{if("image"===t.type){const e={altText:t.title,src:t.image,width:t.image_width,height:t.image_height};h.focus(),h.dispatchCommand(On,e)}else{const e={src:t.url||t.image,name:t.title,type:t.type};h.focus(),h.dispatchCommand($n,e),i&&i(t)}},onProgress:t=>{a(Object.assign({},t)),s&&s(0!==Object.keys(t).length)},onError:(t,e)=>{m(e,{variant:"error",autoHideDuration:3e3})}}),(0,r.jsx)(Kn,{className:n,extraProps:{disabled:0!==Object.keys(l).length,progress:0!==Object.keys(l).length?Object.values(l)[0].completed:null}})]}))})):null}const Zn={h1:"format_heading_1",h2:"format_heading_2",h3:"format_heading_3",bullet:"format_list_bulleted",number:"format_list_numbered",quote:"format_quote",paragraph:"format_paragraph"},Vn=["bold","underline","italic","strikethrough","subscript","superscript"],Gn=["left","right","center","justify"];function Xn({className:t="",editor:e,blockType:n,disabled:s=!1}){const[l,a]=o.useState(null),c=t=>r=>{switch(t){case"bullet":"bullet"!==n?e.dispatchCommand(_t,void 0):e.dispatchCommand(xt,void 0);break;case"number":"number"!==n?e.dispatchCommand(yt,void 0):e.dispatchCommand(xt,void 0);break;case"paragraph":e.update((()=>{const t=(0,f.vJq)();((0,f.I2P)(t)||Qe(t))&&(0,W.zI)(t,(()=>(0,f.lJ7)()))}));break;case"quote":"quote"!==n&&e.update((()=>{const t=(0,f.vJq)();((0,f.I2P)(t)||Qe(t))&&(0,W.zI)(t,(()=>Kt()))}));break;default:n!==(o=t)&&e.update((()=>{const t=(0,f.vJq)();((0,f.I2P)(t)||Qe(t))&&(0,W.zI)(t,(()=>Vt(o)))}))}var o;a(null)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(hn.A,Object.assign({className:t,disabled:s,onClick:t=>{a(t.currentTarget)}},{children:(0,r.jsx)(gn.A,Object.assign({title:(0,r.jsx)(i.A,{id:"ui.editor.toolbarPlugin.blockType",defaultMessage:"ui.editor.toolbarPlugin.blockType"})},{children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(pn.A,{children:Zn[n]}),(0,r.jsx)(pn.A,{children:l?"expand_less":"expand_more"})]})}))})),(0,r.jsx)(mn.A,Object.assign({anchorEl:l,open:Boolean(l),onClose:()=>{a(null)}},{children:Object.keys(Zn).map((t=>(0,r.jsx)(_n.A,Object.assign({onClick:c(t)},{children:(0,r.jsx)(pn.A,{children:Zn[t]})}),t)))}))]})}const Yn={root:`${En.H}-toolbar-plugin-root`,blockFormat:`${En.H}-block-format`},Qn=(0,s.Ay)(l.A,{name:En.H,slot:"ToolbarPluginRoot"})((()=>({})));function tr(t){const e=(0,d.A)({props:t,name:En.H}),{uploadImage:n=!1,uploadFile:s=!1,MediaPluginProps:l={},customLink:a=null}=e,[c]=ne(),[u,h]=(0,o.useState)(c),[g,p]=(0,o.useState)("paragraph"),[m,_]=(0,o.useState)("root"),[x,v]=(0,o.useState)(null),[w,k]=(0,o.useState)(!1),[T,N]=(0,o.useState)((()=>c.isEditable())),[A,E]=(0,o.useState)([]),[O,P]=(0,o.useState)(Gn[0]),M=(0,o.useCallback)((()=>{const t=(0,f.vJq)();if((0,f.I2P)(t)){const e=t.anchor.getNode();let n="root"===e.getKey()?e:S(e,(t=>{const e=t.getParent();return null!==e&&(0,f.IqF)(e)}));null===n&&(n=e.getTopLevelElementOrThrow());const r=n.getKey(),o=u.getElementByKey(r);E(Vn.filter((e=>t.hasFormat(e)))),P(Gn.find((t=>{var e;return(null===(e=n.getFormatType)||void 0===e?void 0:e.call(n))===t}))||Gn[0]);const i=(0,fn.O)(t);F(i.getParent())||F(i)?k(!0):k(!1);if(dn(S(i,dn))?_("table"):_("root"),null!==o)if(v(r),mt(n)){const t=C(e,ut),r=t?t.getListType():n.getListType();p(r)}else{const t=Gt(n)?n.getTag():n.getType();t in Zn&&p(t)}}}),[u]);(0,o.useEffect)((()=>c.registerCommand(f.MvL,((t,e)=>(M(),h(e),!1)),f.da8)),[c,M]),(0,o.useEffect)((()=>y(c.registerEditableListener((t=>{N(t)})),u.registerUpdateListener((({editorState:t})=>{t.read((()=>{M()}))})))),[M,u,c]);const L=(0,o.useCallback)((()=>{u.update((()=>{const t=(0,f.vJq)();if((0,f.I2P)(t)){const e=t.anchor,n=t.focus,r=t.getNodes();if(e.key===n.key&&e.offset===n.offset)return;r.forEach(((t,o)=>{(0,f.kFe)(t)?(0===o&&0!==e.offset&&(t=t.splitText(e.offset)[1]||t),o===r.length-1&&(t=t.splitText(n.offset)[0]||t),""!==t.__style&&t.setStyle(""),0!==t.__format&&(t.setFormat(0),b(t).setFormat(""))):Gt(t)||function(t){return t instanceof $t}(t)?t.replace((0,f.lJ7)(),!0):function(t){return t instanceof Pe}(t)&&t.setFormat("")}))}}))}),[u]),I=(0,o.useCallback)((()=>{w?c.dispatchCommand(R,null):c.dispatchCommand(R,"https://")}),[c,w]);return(0,r.jsxs)(Qn,Object.assign({className:Yn.root},{children:[g in Zn&&u===c&&(0,r.jsx)(Xn,{className:Yn.blockFormat,disabled:!T,blockType:g,editor:c}),(0,r.jsx)(hn.A,Object.assign({disabled:!T,onClick:()=>{u.dispatchCommand(f.fUS,Gn[(Gn.findIndex((t=>O===t))+1)%Gn.length])}},{children:(0,r.jsx)(gn.A,Object.assign({title:(0,r.jsx)(i.A,{id:`ui.editor.toolbarPlugin.${O}`,defaultMessage:`ui.editor.toolbarPlugin.${O}`})},{children:(0,r.jsx)(pn.A,{children:`format_align_${O}`})}))})),(0,r.jsx)(yn.A,Object.assign({value:A},{children:Vn.map((t=>(0,r.jsx)(xn.A,Object.assign({value:t,disabled:!T,onClick:()=>{u.dispatchCommand(f.mB,t)}},{children:(0,r.jsx)(gn.A,Object.assign({title:(0,r.jsx)(i.A,{id:`ui.editor.toolbarPlugin.${t}`,defaultMessage:`ui.editor.toolbarPlugin.${t}`})},{children:(0,r.jsx)(pn.A,{children:`format_${t}`})}))}),t)))})),(0,r.jsx)(hn.A,Object.assign({disabled:!T,onClick:L},{children:(0,r.jsx)(gn.A,Object.assign({title:(0,r.jsx)(i.A,{id:"ui.editor.toolbarPlugin.clear",defaultMessage:"ui.editor.toolbarPlugin.clear"})},{children:(0,r.jsx)(pn.A,{children:"format_clear"})}))})),(0,r.jsx)(hn.A,Object.assign({disabled:!T,onClick:()=>{u.dispatchCommand(ge,void 0)}},{children:(0,r.jsx)(gn.A,Object.assign({title:(0,r.jsx)(i.A,{id:"ui.editor.toolbarPlugin.horizontalRule",defaultMessage:"ui.editor.toolbarPlugin.horizontalRule"})},{children:(0,r.jsx)(pn.A,{children:"format_horizontal_rule"})}))})),n&&(0,r.jsx)(Ln,{}),s&&(0,r.jsx)(Hn,Object.assign({},l)),null!=a?a:(0,r.jsx)(hn.A,Object.assign({disabled:!T,onClick:I},{children:(0,r.jsx)(gn.A,Object.assign({title:(0,r.jsx)(i.A,{id:"ui.editor.toolbarPlugin.link",defaultMessage:"ui.editor.toolbarPlugin.link"})},{children:(0,r.jsx)(pn.A,{children:"format_link"})}))})),(0,r.jsx)(Jn,{})]}))}function er(){const[t]=ne();return(0,o.useEffect)((()=>t.registerCommand(ge,(t=>{const e=(0,f.vJq)();if(!(0,f.I2P)(e))return!1;if(null!==e.focus.getNode()){w(ye())}return!0}),f.jZM)),[t]),null}const nr="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?o.useLayoutEffect:o.useEffect;function rr(t){return{initialValueFn:()=>t.isEditable(),subscribe:e=>t.registerEditableListener(e)}}var or=n(40961);const ir=(0,n(5448).Nh)()?o.useLayoutEffect:o.useEffect;const sr=()=>{const[t]=ne(),[e,n]=(0,o.useState)(!1);return(0,o.useEffect)((()=>t.registerCommand(f.I2H,(()=>(n(!1),!1)),f.AcJ)),[]),(0,o.useEffect)((()=>t.registerCommand(f.$7r,(()=>(n(!0),!1)),f.AcJ)),[]),e};function lr(t){return t.getEditorState().read(ke(t.isComposing()))}function ar(t){ir((()=>y(function(t){return y(t.registerCommand(f.d8p,(t=>{const e=(0,f.vJq)();return!!(0,f.RTZ)(e)&&(e.clear(),!0)}),0),t.registerCommand(f.WuB,(t=>{const e=(0,f.vJq)();return(0,f.I2P)(e)?(e.deleteCharacter(t),!0):!!(0,f.RTZ)(e)&&(e.deleteNodes(),!0)}),f.jZM),t.registerCommand(f.hi0,(t=>{const e=(0,f.vJq)();return!!(0,f.I2P)(e)&&(e.deleteWord(t),!0)}),f.jZM),t.registerCommand(f.viC,(t=>{const e=(0,f.vJq)();return!!(0,f.I2P)(e)&&(e.deleteLine(t),!0)}),f.jZM),t.registerCommand(f.bM3,(e=>{const n=(0,f.vJq)();if("string"==typeof e)null!==n&&n.insertText(e);else{if(null===n)return!1;const r=e.dataTransfer;if(null!=r)Nt(r,n,t);else if((0,f.I2P)(n)){const t=e.data;return t&&n.insertText(t),!0}}return!0}),f.jZM),t.registerCommand(f.$ey,(()=>{const t=(0,f.vJq)();return!!(0,f.I2P)(t)&&(t.removeText(),!0)}),f.jZM),t.registerCommand(f.mB,(t=>{const e=(0,f.vJq)();return!!(0,f.I2P)(e)&&(e.formatText(t),!0)}),f.jZM),t.registerCommand(f.fUS,(t=>{const e=(0,f.vJq)();if(!(0,f.I2P)(e)&&!(0,f.RTZ)(e))return!1;const n=e.getNodes();for(const r of n){const e=S(r,(t=>(0,f.ff4)(t)&&!t.isInline()));null!==e&&e.setFormat(t)}return!0}),f.jZM),t.registerCommand(f.FEN,(t=>{const e=(0,f.vJq)();return!!(0,f.I2P)(e)&&(e.insertLineBreak(t),!0)}),f.jZM),t.registerCommand(f.XKQ,(()=>{const t=(0,f.vJq)();return!!(0,f.I2P)(t)&&(t.insertParagraph(),!0)}),f.jZM),t.registerCommand(f.YW5,(()=>((0,f.H2A)([(0,f.ev7)()]),!0)),f.jZM),t.registerCommand(f.PiT,(()=>Yt((t=>{const e=t.getIndent();t.setIndent(e+1)}))),f.jZM),t.registerCommand(f.sik,(()=>Yt((t=>{const e=t.getIndent();e>0&&t.setIndent(e-1)}))),f.jZM),t.registerCommand(f.UDz,(t=>{const e=(0,f.vJq)();if((0,f.RTZ)(e)&&!Qt(t.target)){const t=e.getNodes();if(t.length>0)return t[0].selectPrevious(),!0}else if((0,f.I2P)(e)){const n=(0,f.B$P)(e.focus,!0);if(!t.shiftKey&&(0,f.Cyw)(n)&&!n.isIsolated()&&!n.isInline())return n.selectPrevious(),t.preventDefault(),!0}return!1}),f.jZM),t.registerCommand(f.bbF,(t=>{const e=(0,f.vJq)();if((0,f.RTZ)(e)){const t=e.getNodes();if(t.length>0)return t[0].selectNext(0,0),!0}else if((0,f.I2P)(e)){if(function(t){const e=t.focus;return"root"===e.key&&e.offset===(0,f.NiT)().getChildrenSize()}(e))return t.preventDefault(),!0;const n=(0,f.B$P)(e.focus,!1);if(!t.shiftKey&&(0,f.Cyw)(n)&&!n.isIsolated()&&!n.isInline())return n.selectNext(),t.preventDefault(),!0}return!1}),f.jZM),t.registerCommand(f.AX0,(t=>{const e=(0,f.vJq)();if((0,f.RTZ)(e)){const n=e.getNodes();if(n.length>0)return t.preventDefault(),n[0].selectPrevious(),!0}if(!(0,f.I2P)(e))return!1;if((0,W.Cb)(e,!0)){const n=t.shiftKey;return t.preventDefault(),(0,W.Rk)(e,n,!0),!0}return!1}),f.jZM),t.registerCommand(f.JM3,(t=>{const e=(0,f.vJq)();if((0,f.RTZ)(e)&&!Qt(t.target)){const n=e.getNodes();if(n.length>0)return t.preventDefault(),n[0].selectNext(0,0),!0}if(!(0,f.I2P)(e))return!1;const n=t.shiftKey;return!!(0,W.Cb)(e,!1)&&(t.preventDefault(),(0,W.Rk)(e,n,!1),!0)}),f.jZM),t.registerCommand(f.gCZ,(e=>{if(Qt(e.target))return!1;const n=(0,f.vJq)();if((0,f.I2P)(n)){const{anchor:r}=n,o=r.getNode();if(n.isCollapsed()&&0===r.offset&&!(0,f.hVZ)(o)&&b(o).getIndent()>0)return e.preventDefault(),t.dispatchCommand(f.sik,void 0);if(Bt&&"ko-KR"===navigator.language)return!1}else if(!(0,f.RTZ)(n))return!1;return e.preventDefault(),t.dispatchCommand(f.WuB,!0)}),f.jZM),t.registerCommand(f.w$Z,(e=>{if(Qt(e.target))return!1;const n=(0,f.vJq)();return!(!(0,f.I2P)(n)&&!(0,f.RTZ)(n))&&(e.preventDefault(),t.dispatchCommand(f.WuB,!1))}),f.jZM),t.registerCommand(f.RTo,(e=>{const n=(0,f.vJq)();if(!(0,f.I2P)(n))return!1;if(te(n),null!==e){if((Bt||jt||Wt)&&Rt)return!1;if(e.preventDefault(),e.shiftKey)return t.dispatchCommand(f.FEN,!1)}return t.dispatchCommand(f.XKQ,void 0)}),f.jZM),t.registerCommand(f.Q$N,(()=>{const e=(0,f.vJq)();return!!(0,f.I2P)(e)&&(t.blur(),!0)}),f.jZM),t.registerCommand(f.Sr4,(e=>{const[,n]=Xt(e);if(n.length>0){const r=Lt(e.clientX,e.clientY);if(null!==r){const{offset:e,node:o}=r,i=(0,f.xL4)(o);if(null!==i){const t=(0,f.uTE)();if((0,f.kFe)(i))t.anchor.set(i.getKey(),e,"text"),t.focus.set(i.getKey(),e,"text");else{const e=i.getParentOrThrow().getKey(),n=i.getIndexWithinParent()+1;t.anchor.set(e,n,"element"),t.focus.set(e,n,"element")}const n=(0,f.CaD)(t);(0,f.n1P)(n)}t.dispatchCommand(Jt,n)}return e.preventDefault(),!0}const r=(0,f.vJq)();return!!(0,f.I2P)(r)}),f.jZM),t.registerCommand(f.TgX,(t=>{const[e]=Xt(t),n=(0,f.vJq)();return!(e&&!(0,f.I2P)(n))}),f.jZM),t.registerCommand(f.riq,(t=>{const[e]=Xt(t),n=(0,f.vJq)();if(e&&!(0,f.I2P)(n))return!1;const r=Lt(t.clientX,t.clientY);if(null!==r){const e=(0,f.xL4)(r.node);(0,f.Cyw)(e)&&t.preventDefault()}return!0}),f.jZM),t.registerCommand(f.HYn,(()=>((0,f.e1k)(),!0)),f.jZM),t.registerCommand(f.u5G,(e=>(Pt(t,k(e,ClipboardEvent)?e:null),!0)),f.jZM),t.registerCommand(f.VSO,(e=>(async function(t,e){await Pt(e,k(t,ClipboardEvent)?t:null),e.update((()=>{const t=(0,f.vJq)();(0,f.I2P)(t)?t.removeText():(0,f.RTZ)(t)&&t.getNodes().forEach((t=>t.remove()))}))}(e,t),!0)),f.jZM),t.registerCommand(f.waI,(e=>{const[,n,r]=Xt(e);return n.length>0&&!r?(t.dispatchCommand(Jt,n),!0):!((0,f.vAA)(e.target)&&(0,f.Z$U)(e.target)||null===(0,f.vJq)()||(function(t,e){t.preventDefault(),e.update((()=>{const n=(0,f.vJq)(),r=k(t,InputEvent)||k(t,KeyboardEvent)?null:t.clipboardData;null!=r&&null!==n&&Nt(r,n,e)}),{tag:"paste"})}(e,t),0))}),f.jZM),t.registerCommand(f.Huu,(t=>{const e=(0,f.vJq)();return(0,f.I2P)(e)&&te(e),!1}),f.jZM),t.registerCommand(f.OXk,(t=>{const e=(0,f.vJq)();return(0,f.I2P)(e)&&te(e),!1}),f.jZM))}(t),function(t){const e=window.location.origin,n=n=>{if(n.origin!==e)return;const r=t.getRootElement();if(document.activeElement!==r)return;const o=n.data;if("string"==typeof o){let e;try{e=JSON.parse(o)}catch(i){return}if(e&&"nuanria_messaging"===e.protocol&&"request"===e.type){const r=e.payload;if(r&&"makeChanges"===r.functionId){const e=r.args;if(e){const[r,o,i,s,l,a]=e;t.update((()=>{const t=(0,f.vJq)();if((0,f.I2P)(t)){const e=t.anchor;let a=e.getNode(),c=0,u=0;if((0,f.kFe)(a)&&r>=0&&o>=0&&(c=r,u=r+o,t.setTextNodeRange(a,c,a,u)),c===u&&""===i||(t.insertRawText(i),a=e.getNode()),(0,f.kFe)(a)){c=s,u=s+l;const e=a.getTextContentSize();c=c>e?e:c,u=u>e?e:u,t.setTextNodeRange(a,c,a,u)}n.stopImmediatePropagation()}}))}}}}};return window.addEventListener("message",n,!0),()=>{window.removeEventListener("message",n,!0)}}(t))),[t])}function cr({contentEditable:t,placeholder:e,ErrorBoundary:n}){const[i]=ne(),s=function(t,e){const[n,i]=(0,o.useState)((()=>t.getDecorators()));return ir((()=>t.registerDecoratorListener((t=>{(0,or.flushSync)((()=>{i(t)}))}))),[t]),(0,o.useEffect)((()=>{i(t.getDecorators())}),[t]),(0,o.useMemo)((()=>{const i=[],s=Object.keys(n);for(let l=0;l<s.length;l++){const a=s[l],c=(0,r.jsx)(e,Object.assign({onError:e=>t._onError(e)},{children:(0,r.jsx)(o.Suspense,Object.assign({fallback:null},{children:n[a]}))})),u=t.getElementByKey(a);null!==u&&i.push((0,or.createPortal)(c,u,a))}return i}),[e,n,t])}(i,n);return ar(i),(0,r.jsxs)(r.Fragment,{children:[t,(0,r.jsx)(ur,{content:e}),s]})}function ur({content:t}){const[e]=ne(),n=function(t){const[e,n]=(0,o.useState)((()=>lr(t)));return ir((()=>{function e(){const e=lr(t);n(e)}return e(),y(t.registerUpdateListener((()=>{e()})),t.registerEditableListener((()=>{e()})))}),[t]),e}(e),r=function(t){const[e]=ne(),n=(0,o.useMemo)((()=>t(e)),[e,t]),[r,i]=(0,o.useState)((()=>n.initialValueFn())),s=(0,o.useRef)(r);return nr((()=>{const{initialValueFn:t,subscribe:e}=n,r=t();return s.current!==r&&(s.current=r,i(r)),e((t=>{s.current=t,i(t)}))}),[n,t]),r}(rr),i=sr();return!n||i?null:"function"==typeof t?t(r):t}const dr=function({defaultValue:t}){const[e]=ne();return(0,o.useEffect)((()=>{t&&e.update((()=>{const n=(new DOMParser).parseFromString(t,"text/html"),r=Ct(e,n),o=(0,f.NiT)();if(r.length<=1){const t=(0,f.lJ7)();r.forEach((e=>t.append(e))),o.getFirstChild().replace(t).selectEnd()}else o.getFirstChild().remove(),r.forEach((t=>{((0,f.ff4)(t)||(0,f.Cyw)(t))&&o.append(t)})),o.selectEnd()}))}),[]),null},fr="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?o.useLayoutEffect:o.useEffect;function hr({ignoreHistoryMergeTagChange:t=!0,ignoreSelectionChange:e=!1,onChange:n}){const[r]=ne();return fr((()=>{if(n)return r.registerUpdateListener((({editorState:o,dirtyElements:i,dirtyLeaves:s,prevEditorState:l,tags:a})=>{e&&0===i.size&&0===s.size||t&&a.has("history-merge")||l.isEmpty()||n(o,r,a)}))}),[r,t,e,n]),null}const gr=t=>{const{onChange:e}=t;return(0,r.jsx)(hr,{onChange:(t,n)=>{t.read((()=>{const t=bt(n);e(t)}))}})};function pr(t,e){for(let n=0;n<e.length;n++){const r=e[n](t);if(r)return r}return null}const mr=/[.,;\s]/;function _r(t){return mr.test(t)}function yr(t){return _r(t[t.length-1])}function xr(t){return _r(t[0])}function vr(t){let e=t.getPreviousSibling();return(0,f.ff4)(e)&&(e=e.getLastDescendant()),null===e||(0,f.wH$)(e)||(0,f.kFe)(e)&&yr(e.getTextContent())}function Cr(t){let e=t.getNextSibling();return(0,f.ff4)(e)&&(e=e.getFirstDescendant()),null===e||(0,f.wH$)(e)||(0,f.kFe)(e)&&xr(e.getTextContent())}function br(t,e,n,r){return!!(t>0?_r(n[t-1]):vr(r[0]))&&(e<n.length?_r(n[e]):Cr(r[r.length-1]))}function Sr(t,e,n){const r=[],o=[],i=[];let s=0,l=0;const a=[...t];for(;a.length>0;){const t=a[0],c=t.getTextContent().length,u=l;l+c<=e?(r.push(t),s+=c):u>=n?i.push(t):o.push(t),l+=c,a.shift()}return[s,r,o,i]}function wr(t,e,n,r){const o=I(r.url,r.attributes);if(1===t.length){let i,s=t[0];0===e?[i,s]=s.splitText(n):[,i,s]=s.splitText(e,n);const l=(0,f.sTu)(r.text);return l.setFormat(i.getFormat()),l.setDetail(i.getDetail()),l.setStyle(i.getStyle()),o.append(l),i.replace(o),s}if(t.length>1){const r=t[0];let i,s=r.getTextContent().length;0===e?i=r:[,i]=r.splitText(e);const l=[];let a;for(let e=1;e<t.length;e++){const r=t[e],o=r.getTextContent().length,i=s;if(i<n)if(s+o<=n)l.push(r);else{const[t,e]=r.splitText(n-i);l.push(t),a=e}s+=o}const c=(0,f.vJq)(),u=c?c.getNodes().find(f.kFe):void 0,d=(0,f.sTu)(i.getTextContent());return d.setFormat(i.getFormat()),d.setDetail(i.getDetail()),d.setStyle(i.getStyle()),o.append(d,...l),u&&u===i&&((0,f.I2P)(c)?d.select(c.anchor.offset,c.focus.offset):(0,f.RTZ)(c)&&d.select(0,d.getTextContent().length)),i.replace(o),a}}function kr(t,e,n){const r=t.getChildren(),o=r.length;for(let a=0;a<o;a++){const e=r[a];if(!(0,f.kFe)(e)||!e.isSimpleText())return Tr(t),void n(null,t.getURL())}const i=t.getTextContent(),s=pr(i,e);if(null===s||s.text!==i)return Tr(t),void n(null,t.getURL());if(!vr(t)||!Cr(t))return Tr(t),void n(null,t.getURL());const l=t.getURL();if(l!==s.url&&(t.setURL(s.url),n(s.url,l)),s.attributes){const e=t.getRel();e!==s.attributes.rel&&(t.setRel(s.attributes.rel||null),n(s.attributes.rel||null,e));const r=t.getTarget();r!==s.attributes.target&&(t.setTarget(s.attributes.target||null),n(s.attributes.target||null,r))}}function Tr(t){const e=t.getChildren();for(let n=e.length-1;n>=0;n--)t.insertAfter(e[n]);return t.remove(),e.map((t=>t.getLatest()))}function Nr({matchers:t,onChange:e}){const[n]=ne();return function(t,e,n){(0,o.useEffect)((()=>{t.hasNodes([L])||function(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const o of e)r.append("v",o);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(77);const r=(t,e)=>{n&&n(t,e)};return y(t.registerNodeTransform(f.Ey8,(t=>{const n=t.getParentOrThrow(),o=t.getPreviousSibling();if(D(n)&&!n.getIsUnlinked())kr(n,e,r);else if(!F(n)){if(t.isSimpleText()&&(xr(t.getTextContent())||!D(o))){const n=function(t){const e=[t];let n=t.getNextSibling();for(;null!==n&&(0,f.kFe)(n)&&n.isSimpleText()&&(e.push(n),!/[\s]/.test(n.getTextContent()));)n=n.getNextSibling();return e}(t);!function(t,e,n){let r=[...t];const o=r.map((t=>t.getTextContent())).join("");let i,s=o,l=0;for(;(i=pr(s,e))&&null!==i;){const t=i.index,e=t+i.length;if(br(l+t,l+e,o,r)){const[o,,s,a]=Sr(r,l+t,l+e),c=wr(s,l+t-o,l+e-o,i);r=c?[c,...a]:a,n(i.url,null),l=0}else l+=e;s=s.substring(e)}}(n,e,r)}!function(t,e,n){const r=t.getPreviousSibling(),o=t.getNextSibling(),i=t.getTextContent();var s;!D(r)||r.getIsUnlinked()||xr(i)&&(s=i,!(r.isEmailURI()?/^\.[a-zA-Z]{2,}/.test(s):/^\.[a-zA-Z0-9]{1,}/.test(s)))||(r.append(t),kr(r,e,n),n(null,r.getURL())),!D(o)||o.getIsUnlinked()||yr(i)||(Tr(o),kr(o,e,n),n(null,o.getURL()))}(t,e,r)}})),t.registerCommand(R,(t=>{const e=(0,f.vJq)();return!(null!==t||!(0,f.I2P)(e)||(e.extract().forEach((t=>{const e=t.getParent();if(D(e))return e.setIsUnlinked(!e.getIsUnlinked()),e.markDirty(),!0})),1))}),f.AcJ))}),[t,e,n])}(n,t,e),null}const Ar=/((https?:\/\/(www\.)?)|(www\.))[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,Er=/(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/,Or=t=>t.startsWith("http://")||t.startsWith("https://")||t.startsWith("mailto:")?t:`https://${t}`,Pr=[t=>{const e=Ar.exec(t);return e&&{index:e.index,length:e[0].length,text:e[0],url:Or(e[0]),attributes:{target:"_blank"}}},t=>{const e=Er.exec(t);return e&&{index:e.index,length:e[0].length,text:e[0],url:`mailto:${e[0]}`,attributes:{target:"_blank"}}}];function Mr(){return(0,r.jsx)(Nr,{matchers:Pr})}var Fr=n(13550),Lr=n(27365),Ir=n(1275),Dr=n(45061);const Rr="\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'\"~=<>_:;",jr=Rr,Br=new RegExp("(^|[^#])((?:"+("\\b[A-Z][^\\s"+Rr+"]")+"{1,})$)"),zr=jr,Wr=["@","\\uff20"].join(""),Jr="[^"+Wr+zr+"\\s]",$r=new RegExp("(^|\\s|\\()(["+Wr+"]((?:"+Jr+("(?:\\.[ |$]| |["+zr+"]|)")+"){0,75}))$"),Kr=new RegExp("(^|\\s|\\()(["+Wr+"]((?:"+Jr+"){0,50}))$");function Ur(t,e){const n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return n.top>r.top&&n.top<r.bottom}function qr(t,e,n,r){const[i]=ne();(0,o.useEffect)((()=>{if(null!=e&&null!=t){const t=i.getRootElement(),o=null!=t?function(t,e){let n=getComputedStyle(t);const r="absolute"===n.position,o=e?/(auto|scroll|hidden)/:/(auto|scroll)/;if("fixed"===n.position)return document.body;for(let i=t;i=i.parentElement;)if(n=getComputedStyle(i),(!r||"static"!==n.position)&&o.test(n.overflow+n.overflowY+n.overflowX))return i;return document.body}(t,!1):document.body;let s=!1,l=Ur(e,o);const a=function(){s||(window.requestAnimationFrame((function(){n(),s=!1})),s=!0);const t=Ur(e,o);t!==l&&(l=t,null!=r&&r(t))},c=new ResizeObserver(n);return window.addEventListener("resize",n),document.addEventListener("scroll",a,{capture:!0,passive:!0}),c.observe(e),()=>{c.unobserve(e),window.removeEventListener("resize",n),document.removeEventListener("scroll",a,!0)}}}),[e,i,r,n,t])}const Hr=new Map;function Zr({index:t,isHovered:e,isSelected:n,onClick:i,onMouseEnter:s,onMouseLeave:l,result:a}){const c=(0,o.useRef)(null);return(0,r.jsxs)("li",Object.assign({tabIndex:-1,className:u()("item",{selected:n,hovered:e}),ref:c,role:"option","aria-selected":n,id:"typeahead-item-"+t,onMouseEnter:s,onMouseLeave:l,onClick:i},{children:[(0,r.jsx)(Lr.A,{alt:a.username,src:a.avatar})," ",a.username]}),a.id)}function Vr(t){const e=function(t,e){let n=$r.exec(t);if(null===n&&(n=Kr.exec(t)),null!==n){const t=n[1],r=n[3];if(r.length>=e)return{leadOffset:n.index+t.length,matchingString:r,replaceableString:n[2]}}return null}(t,1);return null===e?function(t,e){const n=Br.exec(t);if(null!==n){const t=n[1],r=n[2];if(null!=r&&r.length>=e)return{leadOffset:n.index+t.length,matchingString:r,replaceableString:r}}return null}(t,3):e}const Gr={root:`${En.H}-mention-plugin-root`},Xr=(0,s.Ay)((function({close:t,editor:e,resolution:n,className:i=""}){const s=(0,o.useRef)(null),l=n.match,a=function(t){const[e,n]=(0,o.useState)(null);return(0,o.useEffect)((()=>{const e=Hr.get(t);null!==e&&(void 0===e?(Hr.set(t,null),Fr.A.request({url:Sn.A.UserSearch.url(),method:Sn.A.UserSearch.method,params:{user:t,limit:5}}).then((e=>{Hr.set(t,e.data.results),n(e.data.results)}))):n(e))}),[t]),e}(l.matchingString),[c,u]=(0,o.useState)(null),[d,h]=(0,o.useState)(null),g=(0,o.useCallback)((n=>{if(n=n||c,null===a||null===n)return;const r=a[n];t(),function(t,e,n){t.update((()=>{const t=(0,f.vJq)();if(!(0,f.I2P)(t)||!t.isCollapsed())return;const r=t.anchor;if("text"!==r.type)return;const o=r.getNode();if(!o.isSimpleText())return;const i=r.offset,s=o.getTextContent().slice(0,i),l=n.replaceableString.length,a=i-function(t,e,n){let r=n;for(let o=r;o<=e.length;o++)t.substr(-o)===e.substr(0,o)&&(r=o);return r}(s,e.username,l);if(a<0)return;let c;0===a?[c]=o.splitText(i):[,c]=o.splitText(a,i);const u=he(e);c.replace(u),u.select()}))}(e,r,l)}),[t,l,e,a,c]),p=(0,o.useCallback)((t=>{const n=e.getRootElement();null!==n&&(n.setAttribute("aria-activedescendant","typeahead-item-"+t),u(t))}),[e]);return(0,o.useEffect)((()=>()=>{const t=e.getRootElement();null!==t&&t.removeAttribute("aria-activedescendant")}),[e]),ir((()=>{null===a?u(null):null===c&&p(0)}),[a,c,p]),(0,o.useEffect)((()=>y(e.registerCommand(f.bbF,(t=>{const e=t;return null!==a&&null!==c&&c<4&&c!==a.length-1&&(p(c+1),e.preventDefault(),e.stopImmediatePropagation()),!0}),f.AcJ),e.registerCommand(f.UDz,(t=>{const e=t;return null!==a&&null!==c&&0!==c&&(p(c-1),e.preventDefault(),e.stopImmediatePropagation()),!0}),f.AcJ),e.registerCommand(f.Q$N,(e=>{const n=e;return null!==a&&null!==c&&(n.preventDefault(),n.stopImmediatePropagation(),t(),!0)}),f.AcJ),e.registerCommand(f.OXk,(t=>{const e=t;return null!==a&&null!==c&&(e.preventDefault(),e.stopImmediatePropagation(),g(),!0)}),f.AcJ),e.registerCommand(f.RTo,(t=>null!==a&&null!==c&&(null!==t&&(t.preventDefault(),t.stopImmediatePropagation()),g(),!0)),f.AcJ))),[g,t,e,a,c,p]),null===a?null:(0,r.jsx)("div",Object.assign({className:i,"aria-label":"Suggested mentions",ref:s,role:"listbox"},{children:(0,r.jsx)("ul",{children:a.slice(0,5).map(((t,e)=>(0,r.jsx)(Zr,{index:e,isHovered:e===d,isSelected:e===c,onClick:()=>{g(e)},onMouseEnter:()=>{h(e)},onMouseLeave:()=>{h(null)},result:t},t.id)))})}))}),{name:En.H,slot:"MentionPluginRoot"})((()=>({})));function Yr(t,e=null){const[n,i]=(0,o.useState)(null),s=function(t,e,n){const[r,i]=(0,o.useState)(null),[s]=ne(),l=(0,o.useCallback)((()=>{const e=s.getRootElement(),o=r,l=o.firstChild;if(null!==e&&null!==t){const{left:r,top:s,width:a,height:c}=t.range.getBoundingClientRect();if(o.style.top=`${s+window.scrollY}px`,o.style.left=`${r+window.scrollX}px`,o.style.height=`${c}px`,o.style.width=`${a}px`,null!==l){const t=l.getBoundingClientRect(),n=t.height,i=t.width,a=e.getBoundingClientRect();r+i>a.right&&(o.style.left=`${a.right-i+window.scrollX}px`);const u=10;(s+n>window.innerHeight||s+n>a.bottom)&&s-a.top>n&&(o.style.top=s-n+window.scrollY-(c+u)+"px")}o.isConnected||(null!=n&&(o.className=n),o.setAttribute("aria-label","Typeahead menu"),o.setAttribute("id","typeahead-menu"),o.setAttribute("role","listbox"),o.style.display="block",o.style.position="absolute",document.body.append(o)),i(o),e.setAttribute("aria-controls","typeahead-menu")}}),[r,s,t,n]);(0,o.useEffect)((()=>{t&&!r&&i(document.createElement("div"))}),[t]),(0,o.useEffect)((()=>{const e=s.getRootElement();if(null!==t&&r)return l(),()=>{null!==e&&e.removeAttribute("aria-controls");const t=r;null!==t&&t.isConnected&&t.remove()}}),[r,s,l,t]);const a=(0,o.useCallback)((n=>{null!==t&&(n||e(null))}),[t,e]);return qr(t,r,l,a),r}(n,i,e);(0,o.useEffect)((()=>{if(!t.hasNodes([fe]))throw new Error("MentionsPlugin: MentionNode not registered on editor")}),[t]),(0,o.useEffect)((()=>{let e=document.createRange(),n=null;const r=t.registerUpdateListener((({prevEditorState:r})=>{if(r.isEmpty())return;const o=e,s=function(t){let e=null;return t.getEditorState().read((()=>{const t=(0,f.vJq)();(0,f.I2P)(t)&&(e=function(t){const e=t.anchor;if("text"!==e.type)return null;const n=e.getNode();if(!n.isSimpleText())return null;const r=e.offset;return n.getTextContent().slice(0,r)}(t))})),e}(t);if(s===n||null===o)return;if(n=s,null===s)return;const l=Vr(s);if(null!==l&&!function(t,e){return 0===e&&t.getEditorState().read((()=>{const t=(0,f.vJq)();if((0,f.I2P)(t)){const e=t.anchor.getNode().getPreviousSibling();return(0,f.kFe)(e)&&e.isTextEntity()}return!1}))}(t,l.leadOffset)){const t=function(t,e){const n=window.getSelection();if(null===n||!n.isCollapsed)return!1;const r=n.anchorNode,o=t.leadOffset,i=n.anchorOffset;if(null==r||null==i)return!1;try{e.setStart(r,o),e.setEnd(r,i)}catch(s){return!1}return!0}(l,o);if(null!==t)return void i({match:l,range:o})}i(null)}));return()=>{e=null,r()}}),[t]);const l=(0,o.useCallback)((()=>{i(null)}),[n]);return null===n||null===t?null:s?(0,r.jsx)(Ir.x,Object.assign({onClickAway:l},{children:(0,r.jsx)(Dr.A,Object.assign({container:s},{children:(0,r.jsx)(Xr,{close:l,resolution:n,editor:t,className:Gr.root})}))})):null}function Qr(){const[t]=ne();return Yr(t)}const to=({onBlur:t})=>{const[e]=ne();return(0,o.useEffect)((()=>e.registerCommand(f.I2H,(e=>(t&&t(e),!0)),f.jZM)),[]),null},eo=({onFocus:t})=>{const[e]=ne();return(0,o.useEffect)((()=>e.registerCommand(f.$7r,(e=>(t&&t(e),!0)),f.jZM)),[]),null};function no(t,e){return no=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},no(t,e)}var ro={error:null},oo=function(t){var e,n;function r(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).state=ro,e.resetErrorBoundary=function(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];null==e.props.onReset||(t=e.props).onReset.apply(t,r),e.reset()},e}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,no(e,n),r.getDerivedStateFromError=function(t){return{error:t}};var i=r.prototype;return i.reset=function(){this.setState(ro)},i.componentDidCatch=function(t,e){var n,r;null==(n=(r=this.props).onError)||n.call(r,t,e)},i.componentDidUpdate=function(t,e){var n,r,o,i,s=this.state.error,l=this.props.resetKeys;null!==s&&null!==e.error&&(void 0===(o=t.resetKeys)&&(o=[]),void 0===(i=l)&&(i=[]),o.length!==i.length||o.some((function(t,e){return!Object.is(t,i[e])})))&&(null==(n=(r=this.props).onResetKeysChange)||n.call(r,t.resetKeys,l),this.reset())},i.render=function(){var t=this.state.error,e=this.props,n=e.fallbackRender,r=e.FallbackComponent,i=e.fallback;if(null!==t){var s={error:t,resetErrorBoundary:this.resetErrorBoundary};if(o.isValidElement(i))return i;if("function"==typeof n)return n(s);if(r)return o.createElement(r,s);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},r}(o.Component);function io({children:t,onError:e}){return(0,r.jsx)(oo,{fallback:(0,r.jsx)("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:e,children:t})}function so({validateUrl:t,attributes:e}){const[n]=ne();return(0,o.useEffect)((()=>{if(!n.hasNodes([O]))throw new Error("LinkPlugin: LinkNode not registered on editor");return y(n.registerCommand(R,(n=>{if(null===n)return B(n),!0;if("string"==typeof n)return!(void 0!==t&&!t(n)||(B(n,e),0));{const{url:t,target:r,rel:o,title:i}=n;return B(t,{...e,rel:o,target:r,title:i}),!0}}),f.AcJ),void 0!==t?n.registerCommand(f.waI,(r=>{const o=(0,f.vJq)();if(!(0,f.I2P)(o)||o.isCollapsed()||!k(r,ClipboardEvent))return!1;if(null===r.clipboardData)return!1;const i=r.clipboardData.getData("text");return!!t(i)&&!o.getNodes().some((t=>(0,f.ff4)(t)))&&(n.dispatchCommand(R,{...e,url:i}),r.preventDefault(),!0)}),f.AcJ):()=>{})}),[n,t,e]),null}var lo=n(44467),ao=n(1136),co=n(57416),uo=n(43581),fo=n(206);const ho={root:`${En.H}-floating-link-plugin-root`},go=(0,s.Ay)(ao.A,{name:En.H,slot:"FloatingLinkPluginRoot"})((()=>({})));function po({editor:t,isLink:e,setIsLink:n}){const[i,s]=(0,o.useState)(null),[l,a]=(0,o.useState)(""),[c,u]=(0,o.useState)(null),[d,h]=(0,o.useState)(null),g=(0,o.useCallback)((()=>{var e;const n=(0,f.vJq)();if((0,f.I2P)(n)){const t=(0,fn.O)(n),e=t.getParent();F(e)?a(e.getURL()):F(t)?a(t.getURL()):a("")}const r=window.getSelection(),o=document.activeElement,i=t.getRootElement();return null!==n&&null!==r&&null!==i&&i.contains(r.anchorNode)&&t.isEditable()?(s(null===(e=r.focusNode)||void 0===e?void 0:e.parentElement),h(n)):o||(s(null),h(null),a("")),!0}),[t]);(0,o.useEffect)((()=>{l!=c&&u(null)}),[l]),(0,o.useEffect)((()=>y(t.registerUpdateListener((({editorState:t})=>{t.read((()=>{g()}))})),t.registerCommand(f.MvL,(()=>(g(),!0)),f.AcJ),t.registerCommand(f.Q$N,(()=>!!e&&(n(!1),!0)),f.WgU))),[t,g,n,e]),(0,o.useEffect)((()=>{t.getEditorState().read((()=>{g()}))}),[t,g]);return e&&l!==c?(0,r.jsx)(go,Object.assign({className:ho.root,open:Boolean(i),anchorEl:i,placement:"right"},{children:(0,r.jsx)(co.A,{children:(0,r.jsx)(uo.A,{size:"small",value:l,variant:"outlined",onChange:t=>{a(t.target.value)},InputProps:{endAdornment:(0,r.jsxs)(fo.A,Object.assign({position:"end"},{children:[(0,r.jsx)(hn.A,Object.assign({size:"small",tabIndex:0,onClick:()=>{n(!1)}},{children:(0,r.jsx)(pn.A,{children:"close"})})),(0,r.jsx)(hn.A,Object.assign({size:"small",tabIndex:1,onClick:()=>{null!==d&&""!==l&&(u(l),t.dispatchCommand(R,(0,lo.AY)(l)?l:"https://"))}},{children:(0,r.jsx)(pn.A,{children:"check"})}))]}))}})})})):null}const mo=()=>{const[t]=ne();return function(t){const[e,n]=(0,o.useState)(t),[i,s]=(0,o.useState)(!1),l=(0,o.useCallback)((()=>{const t=(0,f.vJq)();if((0,f.I2P)(t)){const e=(0,fn.O)(t),n=S(e,F),r=S(e,D);s(null!=n&&null==r)}}),[]);return(0,o.useEffect)((()=>y(t.registerUpdateListener((({editorState:t})=>{t.read((()=>{l()}))})),t.registerCommand(f.MvL,((t,e)=>(l(),n(e),!1)),f.da8))),[t,l]),(0,r.jsx)(po,{editor:e,isLink:i,setIsLink:s})}(t)},_o=(0,o.forwardRef)(((t,e)=>{const[n]=ne();return(0,o.useImperativeHandle)(e,(()=>({focus:()=>{n.focus()}}))),null})),yo=0,xo=1,vo=2,Co=0,bo=1,So=2,wo=3,ko=4;function To(t,e){let n=Date.now(),r=Co;return(o,i,s,l,a,c)=>{const u=Date.now();if(c.has("historic"))return r=Co,n=u,vo;const d=function(t,e,n,r,o){if(null===t||0===n.size&&0===r.size&&!o)return Co;const i=e._selection,s=t._selection;if(o)return bo;if(!((0,f.I2P)(i)&&(0,f.I2P)(s)&&s.isCollapsed()&&i.isCollapsed()))return Co;const l=function(t,e,n){const r=t._nodeMap,o=[];for(const i of e){const t=r.get(i);void 0!==t&&o.push(t)}for(const[i,s]of n){if(!s)continue;const t=r.get(i);void 0===t||(0,f.hVZ)(t)||o.push(t)}return o}(e,n,r);if(0===l.length)return Co;if(l.length>1){const n=e._nodeMap,r=n.get(i.anchor.key),o=n.get(s.anchor.key);return r&&o&&!t._nodeMap.has(r.__key)&&(0,f.kFe)(r)&&1===r.__text.length&&1===i.anchor.offset?So:Co}const a=l[0],c=t._nodeMap.get(a.__key);if(!(0,f.kFe)(c)||!(0,f.kFe)(a)||c.__mode!==a.__mode)return Co;const u=c.__text,d=a.__text;if(u===d)return Co;const h=i.anchor,g=s.anchor;if(h.key!==g.key||"text"!==h.type)return Co;const p=h.offset,m=g.offset,_=d.length-u.length;return 1===_&&m===p-1?So:-1===_&&m===p+1?wo:-1===_&&m===p?ko:Co}(o,i,l,a,t.isComposing()),h=(()=>{const h=null===s||s.editor===t,g=c.has("history-push");if(!g&&h&&c.has("history-merge"))return yo;if(null===o)return xo;const p=i._selection;return l.size>0||a.size>0?!1===g&&d!==Co&&d===r&&u<n+e&&h||1===l.size&&function(t,e,n){const r=e._nodeMap.get(t),o=n._nodeMap.get(t),i=e._selection,s=n._selection;return!((0,f.I2P)(i)&&(0,f.I2P)(s)&&"element"===i.anchor.type&&"element"===i.focus.type&&"text"===s.anchor.type&&"text"===s.focus.type||!(0,f.kFe)(r)||!(0,f.kFe)(o)||r.__parent!==o.__parent)&&JSON.stringify(e.read((()=>r.exportJSON())))===JSON.stringify(n.read((()=>o.exportJSON())))}(Array.from(l)[0],o,i)?yo:xo:null!==p?yo:vo})();return n=u,r=d,h}}function No(t){t.undoStack=[],t.redoStack=[],t.current=null}function Ao({delay:t,externalHistoryState:e}){const[n]=ne();return function(t,e,n=1e3){const r=(0,o.useMemo)((()=>e||{current:null,redoStack:[],undoStack:[]}),[e]);(0,o.useEffect)((()=>function(t,e,n){const r=To(t,n),o=y(t.registerCommand(f.ZKf,(()=>(function(t,e){const n=e.redoStack,r=e.undoStack;if(0!==r.length){const o=e.current,i=r.pop();null!==o&&(n.push(o),t.dispatchCommand(f.WWb,!0)),0===r.length&&t.dispatchCommand(f.KfJ,!1),e.current=i||null,i&&i.editor.setEditorState(i.editorState,{tag:"historic"})}}(t,e),!0)),f.jZM),t.registerCommand(f.V30,(()=>(function(t,e){const n=e.redoStack,r=e.undoStack;if(0!==n.length){const o=e.current;null!==o&&(r.push(o),t.dispatchCommand(f.KfJ,!0));const i=n.pop();0===n.length&&t.dispatchCommand(f.WWb,!1),e.current=i||null,i&&i.editor.setEditorState(i.editorState,{tag:"historic"})}}(t,e),!0)),f.jZM),t.registerCommand(f.SKc,(()=>(No(e),!1)),f.jZM),t.registerCommand(f.t5V,(()=>(No(e),t.dispatchCommand(f.WWb,!1),t.dispatchCommand(f.KfJ,!1),!0)),f.jZM),t.registerUpdateListener((({editorState:n,prevEditorState:o,dirtyLeaves:i,dirtyElements:s,tags:l})=>{const a=e.current,c=e.redoStack,u=e.undoStack,d=null===a?null:a.editorState;if(null!==a&&n===d)return;const h=r(o,n,a,i,s,l);if(h===xo)0!==c.length&&(e.redoStack=[],t.dispatchCommand(f.WWb,!1)),null!==a&&(u.push({...a}),t.dispatchCommand(f.KfJ,!0));else if(h===vo)return;e.current={editor:t,editorState:n}})));return o}(t,r,n)),[n,t,r])}(n,e,t),null}function Eo(){const[t]=ne();return(0,o.useEffect)((()=>{if(!t.hasNodes([ut,rt]))throw new Error("ListPlugin: ListNode and/or ListItemNode not registered on editor")}),[t]),function(t){(0,o.useEffect)((()=>vt(t)),[t])}(t),null}const Oo={root:`${En.H}-root`,focused:`${En.H}-focused`,toolbar:`${En.H}-toolbar`,content:`${En.H}-content`,placeholder:`${En.H}-placeholder`,actions:`${En.H}-actions`},Po=(0,s.Ay)(l.A,{name:En.H,slot:"Root",overridesResolver:(t,e)=>[e.root,t.className.includes(Oo.toolbar)&&e.toolbar]})((({theme:t})=>({}))),Mo={heading:{h1:`${En.H}-h1`,h2:`${En.H}-h2`,h3:`${En.H}-h3`,h4:`${En.H}-h4`,h5:`${En.H}-h5`,h6:`${En.H}-h6`},link:`${En.H}-link`,list:{listitem:`${En.H}-listItem`,nested:{listitem:`${En.H}-nestedListItem`},olDepth:[`${En.H}-ol1`,`${En.H}-ol2`,`${En.H}-ol3`,`${En.H}-ol4`,`${En.H}-ol5`],ul:`${En.H}-ul`},ltr:`${En.H}-ltr`,paragraph:`${En.H}-paragraph`,image:`${En.H}-image`,quote:`${En.H}-quote`,rtl:`${En.H}-rtl`,text:{bold:`${En.H}-textBold`,italic:`${En.H}-textItalic`,strikethrough:`${En.H}-textStrikethrough`,subscript:`${En.H}-textSubscript`,superscript:`${En.H}-textSuperscript`,underline:`${En.H}-textUnderline`,underlineStrikethrough:`${En.H}-textUnderlineStrikethrough`}},Fo=(0,o.forwardRef)(((t,e)=>{const n=(0,d.A)({props:t,name:En.H}),{id:s="editor",className:c=null,defaultValue:f="",toolbar:h=!1,uploadImage:g=!1,uploadFile:p=!1,editable:m=!0,onChange:_=null,onMediaChange:y=null,onFocus:x=null,onBlur:v=null,action:C=null,ToolBarProps:b={},MediaPluginProps:S={},placeholder:w=(0,r.jsx)(i.A,{id:"ui.editor.placeholder",defaultMessage:"ui.editor.placeholder"}),isLessonCommentEditor:k=!1}=n,T=(0,o.useRef)(),[N,A]=(0,o.useState)(!1),E=(t,e)=>{console.log(t)},O=(0,o.useCallback)((t=>{A(!0),x&&x(t)}),[x]),P=(0,o.useCallback)((t=>{A(!1),v&&v(t)}),[v]);(0,o.useImperativeHandle)(e,(()=>({focus:()=>{T.current.focus()}})));const M=(0,o.useMemo)((()=>({namespace:"LexicalEditor",editable:m,onError:E,nodes:[...xe],theme:Mo})),[m]);return(0,r.jsx)(Po,Object.assign({id:s,className:u()(Oo.root,c,{[Oo.toolbar]:h,[Oo.focused]:N})},{children:(0,r.jsxs)(Se,Object.assign({initialConfig:M},{children:[h?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tr,Object.assign({uploadImage:g,uploadFile:p,MediaPluginProps:{onMediaAdd:t=>{y&&y(t)}}},b)),(0,r.jsx)(Eo,{}),(0,r.jsx)(er,{})]}):(0,r.jsxs)(a.A,Object.assign({className:Oo.actions,direction:"row"},{children:[g&&(0,r.jsx)(Ln,{}),(0,r.jsx)(Jn,{isLessonCommentEditor:k}),p&&(0,r.jsx)(Hn,Object.assign({},S)),C&&C]})),(0,r.jsx)(cr,{contentEditable:(0,r.jsx)(Ee,{className:Oo.content}),placeholder:(0,r.jsx)(l.A,Object.assign({className:Oo.placeholder,onClick:()=>{T.current.focus()}},{children:w})),ErrorBoundary:io}),(0,r.jsx)(dr,{defaultValue:f}),(0,r.jsx)(Ao,{}),(0,r.jsx)(gr,{onChange:t=>{_&&_(t)}}),(0,r.jsx)(to,{onBlur:P}),(0,r.jsx)(eo,{onFocus:O}),(0,r.jsx)(Mr,{}),(0,r.jsx)(Qr,{}),(0,r.jsx)(so,{}),(0,r.jsx)(mo,{}),(0,r.jsx)(_o,{ref:T})]}))}))}))},75735:t=>{t.exports=function(t){"use strict";var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(t,e){var n=t[0],r=t[1],o=t[2],i=t[3];r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+e[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&o)+e[1]-389564586|0)<<12|i>>>20)+n|0)&n|~i&r)+e[2]+606105819|0)<<17|o>>>15)+i|0)&i|~o&n)+e[3]-1044525330|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+e[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&o)+e[5]+1200080426|0)<<12|i>>>20)+n|0)&n|~i&r)+e[6]-1473231341|0)<<17|o>>>15)+i|0)&i|~o&n)+e[7]-45705983|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+e[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&o)+e[9]-1958414417|0)<<12|i>>>20)+n|0)&n|~i&r)+e[10]-42063|0)<<17|o>>>15)+i|0)&i|~o&n)+e[11]-1990404162|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+e[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&o)+e[13]-40341101|0)<<12|i>>>20)+n|0)&n|~i&r)+e[14]-1502002290|0)<<17|o>>>15)+i|0)&i|~o&n)+e[15]+1236535329|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+e[1]-165796510|0)<<5|n>>>27)+r|0)&o|r&~o)+e[6]-1069501632|0)<<9|i>>>23)+n|0)&r|n&~r)+e[11]+643717713|0)<<14|o>>>18)+i|0)&n|i&~n)+e[0]-373897302|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+e[5]-701558691|0)<<5|n>>>27)+r|0)&o|r&~o)+e[10]+38016083|0)<<9|i>>>23)+n|0)&r|n&~r)+e[15]-660478335|0)<<14|o>>>18)+i|0)&n|i&~n)+e[4]-405537848|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+e[9]+568446438|0)<<5|n>>>27)+r|0)&o|r&~o)+e[14]-1019803690|0)<<9|i>>>23)+n|0)&r|n&~r)+e[3]-187363961|0)<<14|o>>>18)+i|0)&n|i&~n)+e[8]+1163531501|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+e[13]-1444681467|0)<<5|n>>>27)+r|0)&o|r&~o)+e[2]-51403784|0)<<9|i>>>23)+n|0)&r|n&~r)+e[7]+1735328473|0)<<14|o>>>18)+i|0)&n|i&~n)+e[12]-1926607734|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+e[5]-378558|0)<<4|n>>>28)+r|0)^r^o)+e[8]-2022574463|0)<<11|i>>>21)+n|0)^n^r)+e[11]+1839030562|0)<<16|o>>>16)+i|0)^i^n)+e[14]-35309556|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+e[1]-1530992060|0)<<4|n>>>28)+r|0)^r^o)+e[4]+1272893353|0)<<11|i>>>21)+n|0)^n^r)+e[7]-155497632|0)<<16|o>>>16)+i|0)^i^n)+e[10]-1094730640|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+e[13]+681279174|0)<<4|n>>>28)+r|0)^r^o)+e[0]-358537222|0)<<11|i>>>21)+n|0)^n^r)+e[3]-722521979|0)<<16|o>>>16)+i|0)^i^n)+e[6]+76029189|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+e[9]-640364487|0)<<4|n>>>28)+r|0)^r^o)+e[12]-421815835|0)<<11|i>>>21)+n|0)^n^r)+e[15]+530742520|0)<<16|o>>>16)+i|0)^i^n)+e[2]-995338651|0)<<23|r>>>9)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+e[0]-198630844|0)<<6|n>>>26)+r|0)|~o))+e[7]+1126891415|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+e[14]-1416354905|0)<<15|o>>>17)+i|0)|~n))+e[5]-57434055|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+e[12]+1700485571|0)<<6|n>>>26)+r|0)|~o))+e[3]-1894986606|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+e[10]-1051523|0)<<15|o>>>17)+i|0)|~n))+e[1]-2054922799|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+e[8]+1873313359|0)<<6|n>>>26)+r|0)|~o))+e[15]-30611744|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+e[6]-1560198380|0)<<15|o>>>17)+i|0)|~n))+e[13]+1309151649|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+e[4]-145523070|0)<<6|n>>>26)+r|0)|~o))+e[11]-1120210379|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+e[2]+718787259|0)<<15|o>>>17)+i|0)|~n))+e[9]-343485551|0)<<21|r>>>11)+o|0,t[0]=n+t[0]|0,t[1]=r+t[1]|0,t[2]=o+t[2]|0,t[3]=i+t[3]|0}function r(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}function o(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24);return n}function i(t){var e,o,i,s,l,a,c=t.length,u=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=c;e+=64)n(u,r(t.substring(e-64,e)));for(o=(t=t.substring(e-64)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<o;e+=1)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(n(u,i),e=0;e<16;e+=1)i[e]=0;return s=(s=8*c).toString(16).match(/(.*?)(.{0,8})$/),l=parseInt(s[2],16),a=parseInt(s[1],16)||0,i[14]=l,i[15]=a,n(u,i),u}function s(t){var e,r,i,s,l,a,c=t.length,u=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=c;e+=64)n(u,o(t.subarray(e-64,e)));for(r=(t=e-64<c?t.subarray(e-64):new Uint8Array(0)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<r;e+=1)i[e>>2]|=t[e]<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(n(u,i),e=0;e<16;e+=1)i[e]=0;return s=(s=8*c).toString(16).match(/(.*?)(.{0,8})$/),l=parseInt(s[2],16),a=parseInt(s[1],16)||0,i[14]=l,i[15]=a,n(u,i),u}function l(t){var n,r="";for(n=0;n<4;n+=1)r+=e[t>>8*n+4&15]+e[t>>8*n&15];return r}function a(t){var e;for(e=0;e<t.length;e+=1)t[e]=l(t[e]);return t.join("")}function c(t){return/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t))),t}function u(t,e){var n,r=t.length,o=new ArrayBuffer(r),i=new Uint8Array(o);for(n=0;n<r;n+=1)i[n]=t.charCodeAt(n);return e?i:o}function d(t){return String.fromCharCode.apply(null,new Uint8Array(t))}function f(t,e,n){var r=new Uint8Array(t.byteLength+e.byteLength);return r.set(new Uint8Array(t)),r.set(new Uint8Array(e),t.byteLength),n?r:r.buffer}function h(t){var e,n=[],r=t.length;for(e=0;e<r-1;e+=2)n.push(parseInt(t.substr(e,2),16));return String.fromCharCode.apply(String,n)}function g(){this.reset()}return a(i("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function e(t,e){return(t=0|t||0)<0?Math.max(t+e,0):Math.min(t,e)}ArrayBuffer.prototype.slice=function(n,r){var o,i,s,l,a=this.byteLength,c=e(n,a),u=a;return r!==t&&(u=e(r,a)),c>u?new ArrayBuffer(0):(o=u-c,i=new ArrayBuffer(o),s=new Uint8Array(i),l=new Uint8Array(this,c,o),s.set(l),i)}}(),g.prototype.append=function(t){return this.appendBinary(c(t)),this},g.prototype.appendBinary=function(t){this._buff+=t,this._length+=t.length;var e,o=this._buff.length;for(e=64;e<=o;e+=64)n(this._hash,r(this._buff.substring(e-64,e)));return this._buff=this._buff.substring(e-64),this},g.prototype.end=function(t){var e,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<o;e+=1)i[e>>2]|=r.charCodeAt(e)<<(e%4<<3);return this._finish(i,o),n=a(this._hash),t&&(n=h(n)),this.reset(),n},g.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},g.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},g.prototype.setState=function(t){return this._buff=t.buff,this._length=t.length,this._hash=t.hash,this},g.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},g.prototype._finish=function(t,e){var r,o,i,s=e;if(t[s>>2]|=128<<(s%4<<3),s>55)for(n(this._hash,t),s=0;s<16;s+=1)t[s]=0;r=(r=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(r[2],16),i=parseInt(r[1],16)||0,t[14]=o,t[15]=i,n(this._hash,t)},g.hash=function(t,e){return g.hashBinary(c(t),e)},g.hashBinary=function(t,e){var n=a(i(t));return e?h(n):n},g.ArrayBuffer=function(){this.reset()},g.ArrayBuffer.prototype.append=function(t){var e,r=f(this._buff.buffer,t,!0),i=r.length;for(this._length+=t.byteLength,e=64;e<=i;e+=64)n(this._hash,o(r.subarray(e-64,e)));return this._buff=e-64<i?new Uint8Array(r.buffer.slice(e-64)):new Uint8Array(0),this},g.ArrayBuffer.prototype.end=function(t){var e,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<o;e+=1)i[e>>2]|=r[e]<<(e%4<<3);return this._finish(i,o),n=a(this._hash),t&&(n=h(n)),this.reset(),n},g.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},g.ArrayBuffer.prototype.getState=function(){var t=g.prototype.getState.call(this);return t.buff=d(t.buff),t},g.ArrayBuffer.prototype.setState=function(t){return t.buff=u(t.buff,!0),g.prototype.setState.call(this,t)},g.ArrayBuffer.prototype.destroy=g.prototype.destroy,g.ArrayBuffer.prototype._finish=g.prototype._finish,g.ArrayBuffer.hash=function(t,e){var n=a(s(new Uint8Array(t)));return e?h(n):n},g}()},75949:(t,e,n)=>{"use strict";n.d(e,{A:()=>s,J:()=>i});var r=n(38413),o=n(31609);function i(t){return(0,o.Ay)("MuiToggleButton",t)}const s=(0,r.A)("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"])},86691:(t,e,n)=>{"use strict";n.d(e,{A:()=>y});var r=n(31635),o=n(56545),i=n(5784),s=n(13550),l=n(29368),a=n(45284),c=n(2877);const u=t=>new Promise(((e,n)=>{const r=new FileReader;r.onload=t=>{let n=new Image;n.onload=function(t){let r=document.createElement("canvas"),o=1920,i=n.width,s=n.height;i>s?i>o&&(s*=o/i,i=o):s>o&&(i*=o/s,s=o),r.width=i,r.height=s,r.getContext("2d").drawImage(n,0,0,i,s),e((t=>{let e;e=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):unescape(t.split(",")[1]);let n=t.split(",")[0].split(":")[1].split(";")[0],r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return new Blob([r],{type:n})})(r.toDataURL("image/jpeg")))},n.src=t.target.result},r.onerror=n,r.readAsDataURL(t)}));var d=n(94520),f=n(96540),h=n(6442),g=n(15906),p=n(67743),m=n(75735),_=n.n(m);const y=t=>{const{type:e=null,onSuccess:n=null,onProgress:m=null,onError:y=null}=t,x=(0,f.useRef)(!0),v=f.useRef({chunks:{},setChunk:null,setChunks:null}),[C,b]=(0,f.useState)({});v.current={chunks:C,setChunk:t=>{const e=Object.assign(Object.assign({},v.current.chunks),{[t.id]:Object.assign(Object.assign({},v.current.chunks[t.id]),t)});b(e),v.current.chunks=e},setChunks:t=>{b(t),v.current.chunks=t}};const S=(0,a.J_)(),{refreshSession:w}=(0,c.X1)(),k=(0,h.A)();return(0,f.useEffect)((()=>{x.current?x.current=!1:m&&m(C)}),[C]),(0,i.Jg)((t=>{if(t.file.type.startsWith("image/")){const e=new FileReader;e.onload=e=>{v.current.setChunk({id:t.id,image:e.target.result})},e.readAsDataURL(t.file)}v.current.setChunk({id:t.id,upload_id:null,completed:0,name:t.file.name})})),(0,i.OE)((t=>{v.current.setChunk({id:t.id,completed:t.completed})})),(0,o.IN)((t=>{((t,e,n)=>{e=e||2097152;let r=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,o=Math.ceil(t.size/e),i=0,s=new(_().ArrayBuffer),l=new FileReader;function a(){let n=i*e,o=n+e>=t.size?t.size:n+e;l.readAsArrayBuffer(r.call(t,n,o))}l.onload=function(t){s.append(t.target.result),i++,i<o?a():n(s.end())},l.onerror=function(){console.warn("oops, something went wrong.")},a()})(t.file,2142880,(e=>{const r=new FormData;r.append("upload_id",v.current.chunks[t.id].upload_id),r.append("type",v.current.chunks[t.id].type),r.append("md5",e),s.A.request({url:l.A.ComposerChunkUploadMediaComplete.url(),method:l.A.ComposerChunkUploadMediaComplete.method,data:r,headers:{"Content-Type":"multipart/form-data"}}).then((e=>{setTimeout((()=>{const r=Object.assign({},v.current.chunks);delete r[t.id],v.current.setChunks(r),n(e.data)}),0)})).catch((e=>{console.log(e),y(Object.assign({},v.current.chunks[t.id]),k.formatMessage(p.A.fileUploadErrorGeneric));const n=Object.assign({},v.current.chunks);delete n[t.id],v.current.setChunks(n)}))}))})),(0,o.Xy)((t=>{y(Object.assign({},v.current.chunks[t.id]),k.formatMessage(p.A.fileUploadErrorGeneric));const e=Object.assign({},v.current.chunks);delete e[t.id],v.current.setChunks(e)})),(0,o.Y2)((t=>{const n={url:`${S.settings.portal}${l.A.ComposerChunkUploadMedia.url()}`,sendOptions:{paramName:"image",method:l.A.ComposerChunkUploadMedia.method,formatServerResponse:(t,e,n)=>(0,r.__awaiter)(void 0,void 0,void 0,(function*(){return 401===e&&(yield w()),Promise.resolve(JSON.parse(t))}))}};return v.current.chunks[t.item.id].upload_id?n.sendOptions.params={upload_id:v.current.chunks[t.item.id].upload_id}:v.current.setChunk({id:t.item.id,type:e||t.sendOptions.paramName}),n})),(0,o.Ui)((t=>(0,r.__awaiter)(void 0,void 0,void 0,(function*(){const e=yield t.uploadData.response.data;v.current.setChunk({id:t.item.id,upload_id:e.upload_id})})))),(0,o.gr)((({items:t,options:e})=>(0,r.__awaiter)(void 0,void 0,void 0,(function*(){const n=["JWT","OAuth"].includes(S.settings.session.type)?{headers:{Authorization:`Bearer ${S.settings.session.authToken.accessToken}`}}:{};return 0==t.length?Promise.resolve({options:e,destination:n}):new Promise((o=>{Promise.all(t.map((t=>(0,r.__awaiter)(void 0,void 0,void 0,(function*(){return Object.assign(Object.assign({},t),{file:t.file.type.startsWith("image/")&&"image/gif"!==t.file.type?yield u(t.file):t.file})}))))).then((t=>{o({items:t,options:{inputFieldName:e.inputFieldName,destination:n}})})).catch((t=>{d.V.error(t,g.d),o({options:{inputFieldName:e.inputFieldName,destination:n}})}))}))})))),null}}}]);