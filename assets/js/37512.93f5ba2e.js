/*! For license information please see 37512.93f5ba2e.js.LICENSE.txt */
(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[37512],{15906:(t,e,a)=>{"use strict";a.d(e,{d:()=>r});const r="@selfcommunity/react-ui"},19546:(t,e)=>{var a;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var t="",e=0;e<arguments.length;e++){var a=arguments[e];a&&(t=i(t,n(a)))}return t}function n(t){if("string"==typeof t||"number"==typeof t)return t;if("object"!=typeof t)return"";if(Array.isArray(t))return o.apply(null,t);if(t.toString!==Object.prototype.toString&&!t.toString.toString().includes("[native code]"))return t.toString();var e="";for(var a in t)r.call(t,a)&&t[a]&&(e=i(e,a));return e}function i(t,e){return e?t?t+" "+e:t+e:t}t.exports?(o.default=o,t.exports=o):void 0===(a=function(){return o}.apply(e,[]))||(t.exports=a)}()},27885:(t,e,a)=>{"use strict";a.d(e,{XU:()=>m,ib:()=>f,YK:()=>d});var r,o,n=a(16404),i=a(96540),s=a(6442);!function(t){t.formatDate="FormattedDate",t.formatTime="FormattedTime",t.formatNumber="FormattedNumber",t.formatList="FormattedList",t.formatDisplayName="FormattedDisplayName"}(r||(r={})),function(t){t.formatDate="FormattedDateParts",t.formatTime="FormattedTimeParts",t.formatNumber="FormattedNumberParts",t.formatList="FormattedListParts"}(o||(o={}));var u=function(t){var e=(0,s.A)(),a=t.value,r=t.children,o=(0,n.Tt)(t,["value","children"]);return r(e.formatNumberToParts(a,o))};u.displayName="FormattedNumberParts";function l(t){var e=function(e){var a=(0,s.A)(),r=e.value,o=e.children,i=(0,n.Tt)(e,["value","children"]),u="string"==typeof r?new Date(r||0):r;return o("formatDate"===t?a.formatDateToParts(u,i):a.formatTimeToParts(u,i))};return e.displayName=o[t],e}function c(t){var e=function(e){var a=(0,s.A)(),r=e.value,o=e.children,u=(0,n.Tt)(e,["value","children"]),l=a[t](r,u);if("function"==typeof o)return o(l);var c=a.textComponent||i.Fragment;return i.createElement(c,null,l)};return e.displayName=r[t],e}function d(t){return t}u.displayName="FormattedNumberParts";var m=c("formatDate"),f=c("formatTime");c("formatNumber"),c("formatList"),c("formatDisplayName"),l("formatDate"),l("formatTime")},37273:(t,e,a)=>{"use strict";function r(t){var e,a,o="";if("string"==typeof t||"number"==typeof t)o+=t;else if("object"==typeof t)if(Array.isArray(t)){var n=t.length;for(e=0;e<n;e++)t[e]&&(a=r(t[e]))&&(o&&(o+=" "),o+=a)}else for(a in t)t[a]&&(o&&(o+=" "),o+=a);return o}a.d(e,{A:()=>o});const o=function(){for(var t,e,a=0,o="",n=arguments.length;a<n;a++)(t=arguments[a])&&(e=r(t))&&(o&&(o+=" "),o+=e);return o}},37512:(t,e,a)=>{"use strict";a.d(e,{A:()=>S});var r=a(31635),o=a(74848),n=a(96540),i=a(66848),s=a(11848),u=a(67733),l=a(47859),c=a(40059),d=a(19546),m=a.n(d),f=a(6279),y=a(40462),b=a(29368);class g{static generateDataPortability(t){return(0,y.A)(Object.assign({url:b.A.GenerateDataPortability.url({}),method:b.A.GenerateDataPortability.method},t))}static downloadDataPortability(t){return(0,y.A)(Object.assign({url:b.A.DataPortabilityDownload.url({}),method:b.A.DataPortabilityDownload.method,responseType:"blob"},t))}static dataPortabilityStatus(t){return(0,y.A)(Object.assign({url:b.A.DataPortabilityStatus.url({}),method:b.A.DataPortabilityStatus.method},t))}}class v{static generateDataPortability(t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return g.generateDataPortability(t)}))}static downloadDataPortability(t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return g.downloadDataPortability(t)}))}static dataPortabilityStatus(t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return g.dataPortabilityStatus(t)}))}}var p=a(94520),h=a(60921),A=a(2877),D=a(15906),P=a(6442),j=a(58065),N=a(27885),x=a(49873),w=a(43253),T=a(1806);const _="SCAccountDataPortability",F={root:`${_}-root`,createButton:`${_}-create-button`,downloadButton:`${_}-download-button`,generationInfo:`${_}-generation-info`},M=(0,s.Ay)(u.A,{name:_,slot:"Root",overridesResolver:(t,e)=>e.root})((({theme:t})=>({})));const S=function(t){const e=(0,i.A)({props:t,name:_}),{className:a}=e,s=(0,r.__rest)(e,["className"]),u=(0,n.useContext)(A.T6),[d,y]=(0,n.useState)(null),[b,g]=(0,n.useState)(!1),[S,C]=(0,n.useState)(!1),B=u.user?u.user.id:null,O=(0,P.A)(),L=()=>{v.dataPortabilityStatus().then((t=>{t&&(!t.computing&&t.generated_at&&g(!1),y(t))})).catch((t=>{p.V.error(D.d,t)})).then((()=>g(!1)))};return(0,n.useEffect)((()=>{let t;return null!==B&&(L(),t=setInterval((()=>{L()}),5e3)),()=>t&&clearInterval(t)}),[B]),B?(0,o.jsxs)(M,Object.assign({className:m()(F.root,a)},s,{children:[(0,o.jsx)(l.A,Object.assign({variant:"h6"},{children:(0,o.jsx)(j.A,{id:"ui.accountDataPortability.title",defaultMessage:"ui.accountDataPortability.title",values:{username:(0,h.ZH)(u.user.username)}})})),(0,o.jsx)(l.A,Object.assign({variant:"body2",component:"div"},{children:(0,o.jsx)(j.A,{id:"ui.accountDataPortability.info",defaultMessage:"ui.accountDataPortability.info",values:{li:t=>(0,o.jsx)("li",{children:t}),ul:t=>(0,o.jsx)("ul",{children:t})}})})),(0,o.jsx)(f.A,Object.assign({size:"small",loading:d&&d.computing||b,disabled:!d||d&&(d.computing||d.requested_at&&(0,w.A)(new Date,(0,T.A)(d.requested_at.toString()))<24),loadingPosition:"start",startIcon:(0,o.jsx)(c.A,{children:"folder_open"}),variant:"outlined",className:F.createButton,onClick:()=>{g(!0),v.generateDataPortability().then((t=>{t&&y(d)})).catch((t=>{p.V.error(D.d,t)})).then((()=>g(!1)))}},{children:d&&d.computing||b?(0,o.jsx)(j.A,{id:"ui.accountDataPortability.createLoadingButton",defaultMessage:"ui.accountDataPortability.createLoadingButton"}):(0,o.jsx)(j.A,{id:"ui.accountDataPortability.createButton",defaultMessage:"ui.accountDataPortability.createButton"})})),d&&!d.computing&&d.generated_at&&(0,o.jsx)(f.A,Object.assign({size:"small",loading:S,loadingPosition:"start",startIcon:(0,o.jsx)(c.A,{children:"cloud_download_outlined"}),variant:"outlined",className:F.downloadButton,onClick:()=>{C(!0),v.downloadDataPortability({timeout:18e5}).then((t=>{const e=window.URL.createObjectURL(new Blob([t],{type:"application/zip"})),a=document.createElement("a");a.href=e,a.setAttribute("download",`${u.user.username}_${O.formatDate((0,x.A)(new Date,"yyyy-MM-dd'T'HH:mm:ssxxx"),{year:"numeric",month:"numeric",day:"numeric"})}.zip`),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(e),C(!1)})).catch((t=>{C(!1),p.V.error(D.d,t)}))}},{children:(0,o.jsx)(j.A,{id:"ui.accountDataPortability.downloadButton",defaultMessage:"ui.accountDataPortability.downloadButton"})})),(0,o.jsx)("br",{}),d&&!d.computing&&d.generated_at&&(0,o.jsx)(l.A,Object.assign({className:F.generationInfo,variant:"body2"},{children:(0,o.jsx)(j.A,{id:"ui.accountDataPortability.generatedInfo",defaultMessage:"ui.accountDataPortability.generatedInfo",values:{date:(0,o.jsx)(N.XU,{value:d.requested_at,day:"numeric",month:"long",year:"numeric"}),time:(0,o.jsx)(N.ib,{value:d.requested_at})}})}))]})):null}},58065:(t,e,a)=>{"use strict";a.d(e,{A:()=>l});var r=a(16404),o=a(96540),n=a(6442),i=a(24184);function s(t){var e=(0,n.A)(),a=e.formatMessage,r=e.textComponent,i=void 0===r?o.Fragment:r,s=t.id,u=t.description,l=t.defaultMessage,c=t.values,d=t.children,m=t.tagName,f=void 0===m?i:m,y=a({id:s,description:u,defaultMessage:l},c,{ignoreTag:t.ignoreTag});return"function"==typeof d?d(Array.isArray(y)?y:[y]):f?o.createElement(f,null,o.Children.toArray(y)):o.createElement(o.Fragment,null,y)}s.displayName="FormattedMessage";var u=o.memo(s,(function(t,e){var a=t.values,o=(0,r.Tt)(t,["values"]),n=e.values,s=(0,r.Tt)(e,["values"]);return(0,i.bN)(n,a)&&(0,i.bN)(o,s)}));u.displayName="MemoizedFormattedMessage";const l=u},67733:(t,e,a)=>{"use strict";a.d(e,{A:()=>h});var r=a(78739),o=a(96554),n=a(96540),i=a(37273),s=a(79343),u=a(33571),l=a(39599),c=a(82858),d=a(74848);const m=["className","component"];var f=a(79071),y=a(21789),b=a(58312);const g=(0,a(38413).A)("MuiBox",["root"]),v=(0,y.A)(),p=function(t={}){const{themeId:e,defaultTheme:a,defaultClassName:f="MuiBox-root",generateClassName:y}=t,b=(0,s.default)("div",{shouldForwardProp:t=>"theme"!==t&&"sx"!==t&&"as"!==t})(u.A);return n.forwardRef((function(t,n){const s=(0,c.A)(a),u=(0,l.A)(t),{className:g,component:v="div"}=u,p=(0,o.A)(u,m);return(0,d.jsx)(b,(0,r.A)({as:v,ref:n,className:(0,i.A)(g,y?y(f):f),theme:e&&s[e]||s},p))}))}({themeId:b.A,defaultTheme:v,defaultClassName:g.root,generateClassName:f.A.generate}),h=p}}]);