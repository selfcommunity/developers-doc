/*! For license information please see 26474.afe7c243.js.LICENSE.txt */
(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[26474],{81458:(e,t,n)=>{"use strict";n.d(t,{Z:()=>M});var o=n(80102),a=n(83117),i=n(67294),s=n(63961),r=n(94780),l=n(70917),c=n(51025),d=n(11716),u=n(98216),p=n(90948),m=n(28628),h=n(1588),g=n(34867);function f(e){return(0,g.ZP)("MuiLinearProgress",e)}(0,h.Z)("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);var b=n(85893);const v=["className","color","value","valueBuffer","variant"];let j,O,x,y,C,Z,E=e=>e;const w=(0,l.F4)(j||(j=E`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),_=(0,l.F4)(O||(O=E`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),N=(0,l.F4)(x||(x=E`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),S=(e,t)=>"inherit"===t?"currentColor":e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:"light"===e.palette.mode?(0,c.$n)(e.palette[t].main,.62):(0,c._j)(e.palette[t].main,.5),T=(0,p.ZP)("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${(0,u.Z)(n.color)}`],t[n.variant]]}})((({ownerState:e,theme:t})=>(0,a.Z)({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:S(t,e.color)},"inherit"===e.color&&"buffer"!==e.variant&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},"buffer"===e.variant&&{backgroundColor:"transparent"},"query"===e.variant&&{transform:"rotate(180deg)"}))),A=(0,p.ZP)("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.dashed,t[`dashedColor${(0,u.Z)(n.color)}`]]}})((({ownerState:e,theme:t})=>{const n=S(t,e.color);return(0,a.Z)({position:"absolute",marginTop:0,height:"100%",width:"100%"},"inherit"===e.color&&{opacity:.3},{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})}),(0,l.iv)(y||(y=E`
    animation: ${0} 3s infinite linear;
  `),N)),P=(0,p.ZP)("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${(0,u.Z)(n.color)}`],("indeterminate"===n.variant||"query"===n.variant)&&t.bar1Indeterminate,"determinate"===n.variant&&t.bar1Determinate,"buffer"===n.variant&&t.bar1Buffer]}})((({ownerState:e,theme:t})=>(0,a.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:"inherit"===e.color?"currentColor":(t.vars||t).palette[e.color].main},"determinate"===e.variant&&{transition:"transform .4s linear"},"buffer"===e.variant&&{zIndex:1,transition:"transform .4s linear"})),(({ownerState:e})=>("indeterminate"===e.variant||"query"===e.variant)&&(0,l.iv)(C||(C=E`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),w))),k=(0,p.ZP)("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${(0,u.Z)(n.color)}`],("indeterminate"===n.variant||"query"===n.variant)&&t.bar2Indeterminate,"buffer"===n.variant&&t.bar2Buffer]}})((({ownerState:e,theme:t})=>(0,a.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},"buffer"!==e.variant&&{backgroundColor:"inherit"===e.color?"currentColor":(t.vars||t).palette[e.color].main},"inherit"===e.color&&{opacity:.3},"buffer"===e.variant&&{backgroundColor:S(t,e.color),transition:"transform .4s linear"})),(({ownerState:e})=>("indeterminate"===e.variant||"query"===e.variant)&&(0,l.iv)(Z||(Z=E`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),_))),M=i.forwardRef((function(e,t){const n=(0,m.i)({props:e,name:"MuiLinearProgress"}),{className:i,color:l="primary",value:c,valueBuffer:p,variant:h="indeterminate"}=n,g=(0,o.Z)(n,v),j=(0,a.Z)({},n,{color:l,variant:h}),O=(e=>{const{classes:t,variant:n,color:o}=e,a={root:["root",`color${(0,u.Z)(o)}`,n],dashed:["dashed",`dashedColor${(0,u.Z)(o)}`],bar1:["bar",`barColor${(0,u.Z)(o)}`,("indeterminate"===n||"query"===n)&&"bar1Indeterminate","determinate"===n&&"bar1Determinate","buffer"===n&&"bar1Buffer"],bar2:["bar","buffer"!==n&&`barColor${(0,u.Z)(o)}`,"buffer"===n&&`color${(0,u.Z)(o)}`,("indeterminate"===n||"query"===n)&&"bar2Indeterminate","buffer"===n&&"bar2Buffer"]};return(0,r.Z)(a,f,t)})(j),x=(0,d.V)(),y={},C={bar1:{},bar2:{}};if("determinate"===h||"buffer"===h)if(void 0!==c){y["aria-valuenow"]=Math.round(c),y["aria-valuemin"]=0,y["aria-valuemax"]=100;let e=c-100;x&&(e=-e),C.bar1.transform=`translateX(${e}%)`}else 0;if("buffer"===h)if(void 0!==p){let e=(p||0)-100;x&&(e=-e),C.bar2.transform=`translateX(${e}%)`}else 0;return(0,b.jsxs)(T,(0,a.Z)({className:(0,s.Z)(O.root,i),ownerState:j,role:"progressbar"},y,{ref:t},g,{children:["buffer"===h?(0,b.jsx)(A,{className:O.dashed,ownerState:j}):null,(0,b.jsx)(P,{className:O.bar1,ownerState:j,style:C.bar1}),"determinate"===h?null:(0,b.jsx)(k,{className:O.bar2,ownerState:j,style:C.bar2})]}))}))},98619:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var o=n(80102),a=n(83117),i=n(67294),s=n(63961),r=n(94780),l=n(51025),c=n(90948),d=n(14136),u=n(28628),p=n(49990),m=n(58974),h=n(51705),g=n(59773),f=n(68686),b=n(85893);const v=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],j=(0,c.ZP)(p.Z,{shouldForwardProp:e=>(0,d.Z)(e)||"classes"===e,name:"MuiListItemButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((({theme:e,ownerState:t})=>(0,a.Z)({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${f.Z.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,l.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${f.Z.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,l.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${f.Z.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,l.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,l.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${f.Z.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${f.Z.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},"flex-start"===t.alignItems&&{alignItems:"flex-start"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.dense&&{paddingTop:4,paddingBottom:4}))),O=i.forwardRef((function(e,t){const n=(0,u.i)({props:e,name:"MuiListItemButton"}),{alignItems:l="center",autoFocus:c=!1,component:d="div",children:p,dense:O=!1,disableGutters:x=!1,divider:y=!1,focusVisibleClassName:C,selected:Z=!1,className:E}=n,w=(0,o.Z)(n,v),_=i.useContext(g.Z),N=i.useMemo((()=>({dense:O||_.dense||!1,alignItems:l,disableGutters:x})),[l,_.dense,O,x]),S=i.useRef(null);(0,m.Z)((()=>{c&&S.current&&S.current.focus()}),[c]);const T=(0,a.Z)({},n,{alignItems:l,dense:N.dense,disableGutters:x,divider:y,selected:Z}),A=(e=>{const{alignItems:t,classes:n,dense:o,disabled:i,disableGutters:s,divider:l,selected:c}=e,d={root:["root",o&&"dense",!s&&"gutters",l&&"divider",i&&"disabled","flex-start"===t&&"alignItemsFlexStart",c&&"selected"]},u=(0,r.Z)(d,f.t,n);return(0,a.Z)({},n,u)})(T),P=(0,h.Z)(S,t);return(0,b.jsx)(g.Z.Provider,{value:N,children:(0,b.jsx)(j,(0,a.Z)({ref:P,href:w.href||w.to,component:(w.href||w.to)&&"div"===d?"button":d,focusVisibleClassName:(0,s.Z)(A.focusVisible,C),ownerState:T,className:(0,s.Z)(A.root,E)},w,{classes:A,children:p}))})}))},98704:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(97582),a=n(24085),i=n(91705);class s{static getAllCategories(e,t){return(0,i.N)(Object.assign(Object.assign({},t),{params:e,url:a.Z.CategoryList.url({}),method:a.Z.CategoryList.method}))}static searchCategory(e,t){return(0,i.N)(Object.assign(Object.assign({},t),{params:e,url:a.Z.SearchCategory.url({}),method:a.Z.SearchCategory.method}))}static createCategory(e,t){return(0,i.N)(Object.assign({url:a.Z.CreateCategory.url({}),method:a.Z.CreateCategory.method,data:e},t))}static getSpecificCategory(e,t){return(0,i.N)(Object.assign({url:a.Z.Category.url({id:e}),method:a.Z.Category.method},t))}static updateASpecificCategory(e,t,n){return(0,i.N)(Object.assign({url:a.Z.UpdateCategory.url({id:e}),method:a.Z.UpdateCategory.method,data:t},n))}static patchASpecificCategory(e,t,n){return(0,i.N)(Object.assign({url:a.Z.PatchCategory.url({id:e}),method:a.Z.PatchCategory.method,data:t},n))}static deleteASpecificCategory(e,t){return(0,i.N)(Object.assign({url:a.Z.DeleteCategory.url({id:e}),method:a.Z.DeleteCategory.method},t))}static getCategoryAudience(e,t){return(0,i.N)(Object.assign({url:a.Z.CategoryAudience.url({id:e}),method:a.Z.CategoryAudience.method},t))}static getCategoryFollowers(e,t,n){return(0,i.N)(Object.assign({url:a.Z.CategoryFollowers.url({id:e}),method:a.Z.CategoryFollowers.method,params:t},n))}static getCategoryFeed(e,t,n){return(0,i.N)(Object.assign({url:a.Z.CategoryFeed.url({id:e}),method:a.Z.CategoryFeed.method,params:t},n))}static getCategoryTrendingFeed(e,t,n){return(0,i.N)(Object.assign(Object.assign({},n),{params:t,url:a.Z.CategoryTrendingFeed.url({id:e}),method:a.Z.CategoryTrendingFeed.method}))}static getCategoryTrendingFollowers(e,t,n){return(0,i.N)(Object.assign({url:a.Z.CategoryTrendingPeople.url({id:e}),method:a.Z.CategoryTrendingPeople.method,params:t},n))}static followCategory(e,t){return(0,i.N)(Object.assign({url:a.Z.FollowCategory.url({id:e}),method:a.Z.FollowCategory.method},t))}static checkCategoryIsFollowed(e,t){return(0,i.N)(Object.assign({url:a.Z.CheckCategoryIsFollowed.url({id:e}),method:a.Z.CheckCategoryIsFollowed.method},t))}static getFollowedCategories(e,t){return(0,i.N)(Object.assign(Object.assign({},t),{params:e,url:a.Z.CategoriesFollowed.url({}),method:a.Z.CategoriesFollowed.method}))}static getPopularCategories(e,t){return(0,i.N)(Object.assign(Object.assign({},t),{params:e,url:a.Z.PopularCategories.url({}),method:a.Z.PopularCategories.method}))}}class r{static getAllCategories(e,t){return(0,o.mG)(this,void 0,void 0,(function*(){return s.getAllCategories(e,t)}))}static searchCategory(e,t){return(0,o.mG)(this,void 0,void 0,(function*(){return s.searchCategory(e,t)}))}static createCategory(e,t){return(0,o.mG)(this,void 0,void 0,(function*(){return s.createCategory(e,t)}))}static getSpecificCategory(e,t){return(0,o.mG)(this,void 0,void 0,(function*(){return s.getSpecificCategory(e,t)}))}static updateASpecificCategory(e,t,n){return(0,o.mG)(this,void 0,void 0,(function*(){return s.updateASpecificCategory(e,t,n)}))}static patchASpecificCategory(e,t,n){return(0,o.mG)(this,void 0,void 0,(function*(){return s.patchASpecificCategory(e,t,n)}))}static deleteASpecificCategory(e,t){return(0,o.mG)(this,void 0,void 0,(function*(){return s.deleteASpecificCategory(e,t)}))}static getCategoryAudience(e,t){return(0,o.mG)(this,void 0,void 0,(function*(){return s.getCategoryAudience(e,t)}))}static getCategoryFollowers(e,t,n){return(0,o.mG)(this,void 0,void 0,(function*(){return s.getCategoryFollowers(e,t,n)}))}static getCategoryFeed(e,t,n){return(0,o.mG)(this,void 0,void 0,(function*(){return s.getCategoryFeed(e,t,n)}))}static getCategoryTrendingFeed(e,t,n){return(0,o.mG)(this,void 0,void 0,(function*(){return s.getCategoryTrendingFeed(e,t,n)}))}static getCategoryTrendingFollowers(e,t,n){return(0,o.mG)(this,void 0,void 0,(function*(){return s.getCategoryTrendingFollowers(e,t,n)}))}static followCategory(e,t){return(0,o.mG)(this,void 0,void 0,(function*(){return s.followCategory(e,t)}))}static checkCategoryIsFollowed(e,t){return(0,o.mG)(this,void 0,void 0,(function*(){return s.checkCategoryIsFollowed(e,t)}))}static getFollowedCategories(e,t){return(0,o.mG)(this,void 0,void 0,(function*(){return s.getFollowedCategories(e,t)}))}static getPopularCategories(e,t){return(0,o.mG)(this,void 0,void 0,(function*(){return s.getPopularCategories(e,t)}))}}},58952:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var o=n(97582),a=n(67294),i=n(74482),s=n(24085),r=n(98704),l=n(59219),c=n(99960),d=n(69721);const u={categories:[],isLoading:!0},p=e=>{const{cacheStrategy:t=l.n2.CACHE_FIRST}=e||{},n=(0,d.Ny)(),p=t!==l.n2.NETWORK_ONLY?(e=>{if(!e)return null;const t=e.map((e=>{const t=(0,d.u5)(e);return l.ZP.get(t)}));return t.filter((e=>!e)).length>0?null:t})(l.ZP.get(n,null)):null,[m,h]=(0,a.useState)(null!==p?{categories:p,isLoading:!1}:u),g=(e=s.Z.CategoryList.url())=>(0,o.mG)(void 0,void 0,void 0,(function*(){const t=yield r.Z.getAllCategories({active:!0},{url:e});return t.next?t.results.concat(yield g(t.next)):t.results}));return(0,a.useEffect)((()=>{t===l.n2.CACHE_FIRST&&p||g().then((e=>{h({categories:e,isLoading:!1}),l.ZP.set(n,e.map((e=>{const t=(0,d.u5)(e.id);return l.ZP.set(t,e),e.id})))})).catch((e=>{console.log(e),c.Y.error(i.h,"Unable to retrieve categories")}))}),[]),m}},94158:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var o=n(97582),a=n(85893),i=n(67294),s=n(44012),r=n(6208),l=n(77931),c=n(98456),d=n(69368),u=n(23370),p=n.n(u),m=n(11447),h=n.n(m),g=n(87918),f=n(58952),b=n(90948),v=n(29360);const j="SCCategoryAutocomplete",O={root:`${j}-root`},x=(0,b.ZP)(r.Z,{name:j,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({}))),y=e=>{const t=(0,v.Z)({props:e,name:j}),{onChange:n,multiple:r=!1,defaultValue:u=(r?[]:null),limitCountCategories:m=0,checkboxSelect:b=!1,disabled:y=!1,TextFieldProps:C={variant:"outlined",label:(0,a.jsx)(s.Z,{id:"ui.categoryAutocomplete.label",defaultMessage:"ui.categoryAutocomplete.label"})}}=t,Z=(0,o._T)(t,["onChange","multiple","defaultValue","limitCountCategories","checkboxSelect","disabled","TextFieldProps"]),[E,w]=(0,i.useState)(!1),[_,N]=(0,i.useState)("string"==typeof u?null:u),{categories:S,isLoading:T}=(0,f.Z)();(0,i.useEffect)((()=>{null!==_&&n&&n(_)}),[_]),(0,i.useEffect)((()=>{T||"string"!=typeof u||N(r?S.filter((e=>e.id===Number(u))):S.find((e=>e.id===Number(u))))}),[T]);return(0,a.jsx)(x,Object.assign({className:O.root,multiple:r,open:E,onOpen:()=>{w(!0)},onClose:()=>{w(!1)},filterSelectedOptions:!b,disableCloseOnSelect:b,options:S||[],getOptionLabel:e=>e.name||"",value:_,selectOnFocus:!0,clearOnBlur:!0,blurOnSelect:!0,handleHomeEndKeys:!0,clearIcon:null,disabled:y||T,noOptionsText:(0,a.jsx)(s.Z,{id:"ui.categoryAutocomplete.empty",defaultMessage:"ui.categoryAutocomplete.empty"}),onChange:(e,t)=>{let n=null;if(r&&m>0){const[...e]=t;n=e.slice(-1*m)}else n=t;N(n)},isOptionEqualToValue:(e,t)=>t.id===e.id,renderTags:(e,t)=>e.map(((e,n)=>(0,a.jsx)(g.Z,Object.assign({id:e.id,label:e.name,color:e.color},t({index:n})),e.id))),renderOption:(e,t,{selected:n,inputValue:o})=>{const s=h()(t.name,o),r=p()(t.name,s);return(0,a.jsxs)("li",Object.assign({},e,{children:[b&&(0,a.jsx)(d.Z,{style:{marginRight:8},checked:n}),(0,a.jsx)(g.Z,{label:(0,a.jsx)(i.Fragment,{children:r.map(((e,t)=>(0,a.jsx)("span",Object.assign({style:{fontWeight:e.highlight?700:400}},{children:e.text}),t)))})})]}))},renderInput:e=>(0,a.jsx)(l.Z,Object.assign({},e,C,{margin:"dense",InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"categories",endAdornment:(0,a.jsxs)(i.Fragment,{children:[T?(0,a.jsx)(c.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},Z))}},6605:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Lt});var o=n(97582),a=n(85893),i=n(67294),s=n(49794),r=n(72951),l=n(9774),c=n(24243),d=n(24085),u=n(59488),p=n(8860),m=n(51206),h=n(65580),g=n(85472),f=n(44012),b=n(67564),v=n(16628),j=n(64666),O=n(54776),x=n(37292),y=n(46901),C=n(92401),Z=n(37645),E=n(93946),w=n(6514),_=n(94253),N=n(31425),S=n(90948),T=n(2734);const A="discussion",P="post",k="poll",M=160;var I=n(57250),R=n(96828),D=n(77931),$=n(23370),F=n.n($),L=n(11447),B=n.n(L),U=n(15861),V=n(25662),G=n(10760),z=n(40044),H=n(6208),Y=n(8455),W=n(94184),q=n.n(W);const X="SCComposer";var K=n(98456),J=n(87952),Q=n(74482),ee=n(59219),te=n(99960),ne=n(69721);const oe={groups:[],isLoading:!0},ae=e=>{const{cacheStrategy:t=ee.n2.CACHE_FIRST}=e||{},n=(0,ne.Em)(),a=t!==ee.n2.NETWORK_ONLY?(e=>{if(!e)return null;const t=e.map((e=>{const t=(0,ne.b0)(e);return ee.ZP.get(t)}));return t.filter((e=>!e)).length>0?null:t})(ee.ZP.get(n,null)):null,[s,r]=(0,i.useState)(null!==a?{groups:a,isLoading:!1}:oe),l=(e=d.Z.GetUserGroups.url())=>(0,o.mG)(void 0,void 0,void 0,(function*(){const t=(yield c.Z.request({url:e,method:d.Z.GetUserGroups.method})).data;return t.next?t.results.concat(yield l(t.next)):t.results}));return(0,i.useEffect)((()=>{t===ee.n2.CACHE_FIRST&&a||l().then((e=>{r({groups:e,isLoading:!1}),ee.ZP.set(n,e.map((e=>{const t=(0,ne.b0)(e.id);return ee.ZP.set(t,e),e.id})))})).catch((e=>{console.log(e),te.Y.error(Q.h,"Unable to retrieve groups")}))}),[]),s};var ie=n(29360);const se="SCGroupAutocomplete",re={root:`${se}-root`},le=(0,S.ZP)(H.Z,{name:se,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({}))),ce=e=>{const t=(0,ie.Z)({props:e,name:se}),{onChange:n,defaultValue:s=null,disabled:r=!1,TextFieldProps:l={variant:"outlined",label:(0,a.jsx)(f.Z,{id:"ui.groupAutocomplete.label",defaultMessage:"ui.groupAutocomplete.label"})}}=t,c=(0,o._T)(t,["onChange","defaultValue","disabled","TextFieldProps"]),[d,u]=(0,i.useState)(!1),[p,m]=(0,i.useState)("string"==typeof s?null:s),{groups:h,isLoading:g}=ae();(0,i.useEffect)((()=>{null!==p&&n&&n(p)}),[p]),(0,i.useEffect)((()=>{g||"string"!=typeof s||m(h.find((e=>e.id===Number(s))))}),[g]);return(0,a.jsx)(le,Object.assign({className:re.root,open:d,onOpen:()=>{u(!0)},onClose:()=>{u(!1)},options:h||[],getOptionLabel:e=>e.name||"",value:p,selectOnFocus:!0,clearOnBlur:!0,blurOnSelect:!0,handleHomeEndKeys:!0,clearIcon:null,disabled:r||g,noOptionsText:(0,a.jsx)(f.Z,{id:"ui.groupAutocomplete.empty",defaultMessage:"ui.groupAutocomplete.empty"}),onChange:(e,t)=>{m(t)},isOptionEqualToValue:(e,t)=>t.id===e.id,renderOption:(e,t,{inputValue:n})=>{const o=B()(t.name,n),s=F()(t.name,o);return(0,a.jsxs)(_.Z,Object.assign({component:"li"},e,{children:[(0,a.jsx)(J.Z,{alt:t.name,src:t.image_small,sx:{marginRight:1}}),(0,a.jsx)(i.Fragment,{children:s.map(((e,t)=>(0,a.jsx)(U.Z,Object.assign({sx:{fontWeight:e.highlight?700:400,marginRight:.2}},{children:e.text}),t)))})]}))},renderInput:e=>(0,a.jsx)(D.Z,Object.assign({},e,l,{margin:"dense",InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"groups",endAdornment:(0,a.jsxs)(i.Fragment,{children:[g?(0,a.jsx)(K.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},c))},de={events:[],isLoading:!0},ue=e=>{const{cacheStrategy:t=ee.n2.CACHE_FIRST}=e||{},n=(0,ne.Oi)(),a=t!==ee.n2.NETWORK_ONLY?(e=>{if(!e)return null;const t=e.map((e=>{const t=(0,ne.$Y)(e);return ee.ZP.get(t)}));return t.filter((e=>!e)).length>0?null:t})(ee.ZP.get(n,null)):null,[s,r]=(0,i.useState)(null!==a?{events:a,isLoading:!1}:de),l=(e=d.Z.GetUserEvents.url())=>(0,o.mG)(void 0,void 0,void 0,(function*(){const t=(yield c.Z.request({url:e,method:d.Z.GetUserEvents.method})).data;return t.next?t.results.concat(yield l(t.next)):t.results}));return(0,i.useEffect)((()=>{t===ee.n2.CACHE_FIRST&&a||l().then((e=>{r({events:e,isLoading:!1}),ee.ZP.set(n,e.map((e=>{const t=(0,ne.$Y)(e.id);return ee.ZP.set(t,e),e.id})))})).catch((e=>{console.log(e),te.Y.error(Q.h,"Unable to retrieve events")}))}),[]),s},pe="SCEventAutocomplete",me={root:`${pe}-root`},he=(0,S.ZP)(H.Z,{name:pe,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({}))),ge=e=>{const t=(0,ie.Z)({props:e,name:pe}),{onChange:n,defaultValue:s=null,disabled:r=!1,TextFieldProps:l={variant:"outlined",label:(0,a.jsx)(f.Z,{id:"ui.eventAutocomplete.label",defaultMessage:"ui.eventAutocomplete.label"})}}=t,c=(0,o._T)(t,["onChange","defaultValue","disabled","TextFieldProps"]),[d,u]=(0,i.useState)(!1),[p,m]=(0,i.useState)("string"==typeof s?null:s),{events:h,isLoading:g}=ue();(0,i.useEffect)((()=>{null!==p&&n&&n(p)}),[p]),(0,i.useEffect)((()=>{g||"string"!=typeof s||m(h.find((e=>e.id===Number(s))))}),[g]);return(0,a.jsx)(he,Object.assign({className:me.root,open:d,onOpen:()=>{u(!0)},onClose:()=>{u(!1)},options:h||[],getOptionLabel:e=>e.name||"",value:p,selectOnFocus:!0,clearOnBlur:!0,blurOnSelect:!0,handleHomeEndKeys:!0,clearIcon:null,disabled:r||g,noOptionsText:(0,a.jsx)(f.Z,{id:"ui.eventAutocomplete.empty",defaultMessage:"ui.eventAutocomplete.empty"}),onChange:(e,t)=>{m(t)},isOptionEqualToValue:(e,t)=>t.id===e.id,renderOption:(e,t,{inputValue:n})=>{const o=B()(t.name,n),s=F()(t.name,o);return(0,a.jsxs)(_.Z,Object.assign({component:"li"},e,{children:[(0,a.jsx)(J.Z,{alt:t.name,src:t.image_small,sx:{marginRight:1}}),(0,a.jsx)(i.Fragment,{children:s.map(((e,t)=>(0,a.jsx)(U.Z,Object.assign({sx:{fontWeight:e.highlight?700:400,marginRight:.2}},{children:e.text}),t)))})]}))},renderInput:e=>(0,a.jsx)(D.Z,Object.assign({},e,l,{margin:"dense",InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"events",endAdornment:(0,a.jsxs)(i.Fragment,{children:[g?(0,a.jsx)(K.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},c))};var fe;!function(e){e.AUDIENCE_ALL="all",e.AUDIENCE_TAG="tag",e.AUDIENCE_GROUP="group",e.AUDIENCE_EVENT="event"}(fe||(fe={}));const be={root:`${X}-layer-audience-root`,title:`${X}-layer-title`,content:`${X}-layer-content`,message:`${X}-layer-audience-message`,autocomplete:`${X}-layer-audience-autocomplete`},ve=(0,S.ZP)(_.Z,{name:X,slot:"LayerAudienceRoot"})((()=>({}))),je=i.forwardRef(((e,t)=>{const{className:n,onClose:s,onSave:l,defaultValue:u=(fe.AUDIENCE_TAG?[]:null),TextFieldProps:h={variant:"outlined",label:(0,a.jsx)(f.Z,{id:"ui.composer.layer.audience.tags.label",defaultMessage:"ui.composer.layer.audience.tags.label"})}}=e,v=(0,o._T)(e,["className","onClose","onSave","defaultValue","TextFieldProps"]),[j,O]=(0,i.useState)(!1),[x,y]=(0,i.useState)(null===u||0===u.length?fe.AUDIENCE_ALL:u&&Object.prototype.hasOwnProperty.call(u,"recurring")?fe.AUDIENCE_EVENT:u&&Object.prototype.hasOwnProperty.call(u,"managed_by")?fe.AUDIENCE_GROUP:fe.AUDIENCE_TAG),[C,_]=(0,i.useState)(u||void 0),{scAddressingTags:N}=function({fetch:e=!1}){const[t,n]=(0,i.useState)([]),[o,a]=(0,i.useState)(!1),s=(0,m.LD)(),l=(0,p.ko)(),u=(0,i.useMemo)((()=>()=>c.Z.request({url:d.Z.ComposerAddressingTagList.url(),method:d.Z.ComposerAddressingTagList.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[]);return(0,i.useEffect)((()=>{!o&&e&&s.user&&l.features.includes(r.$.TAGGING)&&u().then((e=>{a(!0),n(e)}))}),[o,e,s.user,l.features]),{scAddressingTags:t}}({fetch:j}),{preferences:S,features:T}=(0,p.ko)(),A=(0,i.useMemo)((()=>S&&T&&T.includes(r.$.TAGGING)&&T.includes(r.$.GROUPING)&&g.$T in S&&S[g.$T].value),[S,T]),P=(0,i.useMemo)((()=>S&&T&&T.includes(r.$.TAGGING)&&g.my in S&&S[g.my].value),[S,T]),k=(0,i.useCallback)((()=>{x===fe.AUDIENCE_GROUP||x===fe.AUDIENCE_EVENT?l(C):l((null==C?void 0:C.length)&&(null==C?void 0:C.length)>0?C:null)}),[C,l,x]),M=(0,i.useCallback)(((e,t)=>_(t)),[]),I=(0,i.useCallback)((e=>_(e)),[]),R=(0,i.useCallback)((e=>_(e)),[]),$=(0,i.useCallback)(((e,t)=>y(t)),[]),L=(0,i.useCallback)((()=>O(!0)),[]),W=(0,i.useCallback)((()=>O(!1)),[]);return(0,a.jsxs)(ve,Object.assign({ref:t,className:q()(n,be.root)},v,{children:[(0,a.jsxs)(Z.Z,Object.assign({className:be.title},{children:[(0,a.jsx)(E.Z,Object.assign({onClick:s},{children:(0,a.jsx)(b.Z,{children:"arrow_back"})})),(0,a.jsx)(U.Z,{children:(0,a.jsx)(f.Z,{id:"ui.composer.layer.audience.title",defaultMessage:"ui.composer.layer.audience.title"})}),(0,a.jsx)(V.Z,Object.assign({size:"small",color:"secondary",variant:"contained",onClick:k},{children:(0,a.jsx)(f.Z,{id:"ui.composer.layer.save",defaultMessage:"ui.composer.layer.save"})}))]})),(0,a.jsxs)(w.Z,Object.assign({className:be.content},{children:[(0,a.jsxs)(G.Z,Object.assign({value:x,onChange:$,"aria-label":"audience type"},{children:[(0,a.jsx)(z.Z,{value:fe.AUDIENCE_ALL,icon:(0,a.jsx)(b.Z,{children:"public"}),label:(0,a.jsx)(f.Z,{id:"ui.composer.layer.audience.all",defaultMessage:"ui.composer.layer.audience.all"})}),P&&(0,a.jsx)(z.Z,{disabled:Boolean(null==C?void 0:C.length)&&!Object.prototype.hasOwnProperty.call(C,"recurring")||void 0!==C&&Boolean(!(null==C?void 0:C.length))&&x!==fe.AUDIENCE_ALL||Boolean(0===(null==C?void 0:C.length))&&x===fe.AUDIENCE_ALL&&Boolean(0!==(null==u?void 0:u.length)),value:fe.AUDIENCE_EVENT,icon:(0,a.jsx)(b.Z,{children:"CalendarIcon"}),label:(0,a.jsx)(f.Z,{id:"ui.composer.layer.audience.event",defaultMessage:"ui.composer.layer.audience.event"})}),A&&(0,a.jsx)(z.Z,{disabled:Boolean(null==C?void 0:C.length)&&!Object.prototype.hasOwnProperty.call(C,"managed_by")||void 0!==C&&Boolean(!(null==C?void 0:C.length))&&x!==fe.AUDIENCE_ALL||Boolean(0===(null==C?void 0:C.length))&&x===fe.AUDIENCE_ALL&&Boolean(0!==(null==u?void 0:u.length)),value:fe.AUDIENCE_GROUP,icon:(0,a.jsx)(b.Z,{children:"groups"}),label:(0,a.jsx)(f.Z,{id:"ui.composer.layer.audience.group",defaultMessage:"ui.composer.layer.audience.group"})}),(0,a.jsx)(z.Z,{disabled:C&&Object.prototype.hasOwnProperty.call(C,"managed_by"),value:fe.AUDIENCE_TAG,icon:(0,a.jsx)(b.Z,{children:"label"}),label:(0,a.jsx)(f.Z,{id:"ui.composer.layer.audience.tag",defaultMessage:"ui.composer.layer.audience.tag"})})]})),(0,a.jsxs)(U.Z,Object.assign({className:be.message},{children:[x===fe.AUDIENCE_ALL&&(0,a.jsx)(f.Z,{id:"ui.composer.layer.audience.all.message",defaultMessage:"ui.composer.audience.layer.all.message"}),x===fe.AUDIENCE_EVENT&&(0,a.jsx)(f.Z,{id:"ui.composer.layer.audience.event.message",defaultMessage:"ui.composer.audience.layer.event.message"}),x===fe.AUDIENCE_GROUP&&(0,a.jsx)(f.Z,{id:"ui.composer.layer.audience.group.message",defaultMessage:"ui.composer.audience.layer.group.message"}),x===fe.AUDIENCE_TAG&&(0,a.jsx)(f.Z,{id:"ui.composer.layer.audience.tag.message",defaultMessage:"ui.composer.audience.layer.tag.message"})]})),x===fe.AUDIENCE_TAG&&(0,a.jsx)(H.Z,{className:be.autocomplete,open:j,onOpen:L,onClose:W,multiple:!0,options:N||[],getOptionLabel:e=>e.name||"",value:C,selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,clearIcon:null,noOptionsText:(0,a.jsx)(f.Z,{id:"ui.composer.layer.audience.tags.empty",defaultMessage:"ui.composer.layer.audience.tags.empty"}),onChange:M,isOptionEqualToValue:(e,t)=>t.id===e.id,renderTags:(e,t)=>e.map(((e,n)=>(0,a.jsx)(Y.Z,Object.assign({tag:e},t({index:n})),e.id))),renderOption:(e,t,{selected:n,inputValue:o})=>{const s=B()(t.name,o),r=F()(t.name,s);return(0,a.jsx)("li",Object.assign({},e,{children:(0,a.jsx)(Y.Z,{tag:t,label:(0,a.jsx)(i.Fragment,{children:r.map(((e,t)=>(0,a.jsx)("span",Object.assign({style:{fontWeight:e.highlight?700:400}},{children:e.text}),t)))})},t.id)}))},renderInput:e=>(0,a.jsx)(D.Z,Object.assign({},e,h,{InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"addressing",endAdornment:(0,a.jsx)(i.Fragment,{children:e.InputProps.endAdornment})})}))}),x===fe.AUDIENCE_GROUP&&(0,a.jsx)(ce,{onChange:R,defaultValue:u}),x===fe.AUDIENCE_EVENT&&(0,a.jsx)(ge,{onChange:I,defaultValue:u})]}))]}))}));var Oe=n(77488),xe=n(86879),ye=n(64635),Ce=n(53457),Ze=n(34386),Ee=n(67720),we=n(50480),_e=n(69368),Ne=n(54490),Se=n(86896),Te=n(16941),Ae=n(87109),Pe=n(50720),ke=n(9039),Me=n(8381),Ie=n(58160),Re=n(95826),De=n(23855);const $e={en:Re.Z,it:Ie.Z},Fe={root:`${X}-content-poll-root`,generalError:`${X}-general-error`,title:`${X}-content-poll-title`,choices:`${X}-content-poll-choices`,choiceNew:`${X}-content-poll-choice-new`,metadata:`${X}-content-poll-metadata`},Le=(0,S.ZP)(_.Z,{name:X,slot:"ContentPollRoot"})((({theme:e})=>({}))),Be=(0,Ne.vU)({choicePlaceholder:{id:"ui.composer.content.poll.choice.placeholder",defaultMessage:"ui.composer.content.poll.choice.placeholder"}}),Ue=(0,i.forwardRef)(((e,t)=>{var{children:n}=e,i=(0,o._T)(e,["children"]);return(0,a.jsx)(Ce.Z,Object.assign({direction:"column",ref:t},i,{children:n}))})),Ve={choice:""},Ge={title:"",multiple_choices:!1,expiration_at:null,choices:[Object.assign({},Ve),Object.assign({},Ve)]},ze=e=>{const t=(0,ie.Z)({props:e,name:X}),{className:n=null,value:o={poll:Object.assign({},Ge)},error:s={},disabled:r,onChange:l}=t,{titleError:c=null,error:d=null}=Object.assign({},s),u=(0,i.useMemo)((()=>o.poll?o.poll:Object.assign({},Ge)),[o,Ge]),p=(0,Se.Z)(),m=(0,i.useCallback)((e=>{l(Object.assign(Object.assign({},o),{poll:Object.assign(Object.assign({},u),{title:e.target.value})}))}),[o,u]),h=(0,i.useCallback)((e=>{l(Object.assign(Object.assign({},o),{poll:Object.assign(Object.assign({},u),{choices:e})}))}),[o,u]),g=(0,i.useCallback)((e=>t=>{const n=[...u.choices];n[e].choice=t.target.value,l(Object.assign(Object.assign({},o),{poll:Object.assign(Object.assign({},u),{choices:n})}))}),[o,u]),v=(0,i.useCallback)((()=>{l(Object.assign(Object.assign({},o),{poll:Object.assign(Object.assign({},u),{choices:[...u.choices,Object.assign({},Ve)]})}))}),[o,u]),j=(0,i.useCallback)((e=>t=>{const n=[...u.choices];n.splice(e,1),l(Object.assign(Object.assign({},o),{poll:Object.assign(Object.assign({},u),{choices:n})}))}),[o,u]),O=(0,i.useCallback)((e=>{l(Object.assign(Object.assign({},o),{poll:Object.assign(Object.assign({},u),{multiple_choices:e.target.checked})}))}),[o,u]),x=(0,i.useCallback)((e=>{l(Object.assign(Object.assign({},o),{poll:Object.assign(Object.assign({},u),{expiration_at:e})}))}),[o,u]),y=(0,i.useMemo)((()=>{const e=new Date;return e.setDate(e.getDate()+2),e}),[]);return(0,a.jsxs)(Le,Object.assign({className:q()(Fe.root,n)},{children:[d&&(0,a.jsx)(U.Z,Object.assign({className:Fe.generalError},{children:(0,a.jsx)(f.Z,{id:`ui.composer.content.poll.error.${d}`,defaultMessage:`ui.composer.content.poll.error.${d}`})})),(0,a.jsx)(_.Z,Object.assign({className:Fe.title},{children:(0,a.jsx)(D.Z,{autoFocus:!0,disabled:r,label:(0,a.jsx)(f.Z,{id:"ui.composer.content.poll.title",defaultMessage:"ui.composer.content.poll.title"}),variant:"outlined",value:u.title,onChange:m,fullWidth:!0,error:Boolean(c),helperText:c&&c,InputProps:{endAdornment:(0,a.jsx)(U.Z,Object.assign({variant:"body2"},{children:160-u.title.length}))}})})),(0,a.jsx)(_.Z,Object.assign({className:Fe.choices},{children:(0,a.jsx)(Te.ReactSortable,Object.assign({list:[...u.choices],setList:h,tag:Ue},{children:u.choices.map(((e,t)=>(0,a.jsx)(D.Z,{placeholder:p.formatMessage(Be.choicePlaceholder),value:e.choice,onChange:g(t),variant:"outlined",disabled:r,InputProps:{startAdornment:(0,a.jsx)(Ae.Z,Object.assign({position:"start"},{children:(0,a.jsx)(b.Z,{children:"drag"})})),endAdornment:(0,a.jsx)(Ae.Z,Object.assign({position:"end"},{children:(0,a.jsx)(Ze.Z,Object.assign({title:u.choices.length<=2?(0,a.jsx)(f.Z,{id:"ui.composer.content.poll.choice.delete.disabled",defaultMessage:"ui.composer.content.poll.choice.delete.disabled"}):(0,a.jsx)(f.Z,{id:"ui.composer.content.poll.choice.delete",defaultMessage:"ui.composer.content.poll.choice.delete"})},{children:(0,a.jsx)("span",{children:(0,a.jsx)(E.Z,Object.assign({onClick:j(t),disabled:u.choices.length<=2,edge:"end"},{children:(0,a.jsx)(b.Z,{children:"delete"})}))})}))}))}},t)))}))})),(0,a.jsx)(_.Z,Object.assign({className:Fe.choiceNew},{children:(0,a.jsxs)(V.Z,Object.assign({color:"inherit",variant:"text",onClick:v},{children:[(0,a.jsx)(b.Z,{children:"add"}),(0,a.jsx)(f.Z,{id:"ui.composer.content.poll.choice.add",defaultMessage:"ui.composer.choice.add"})]}))})),(0,a.jsx)(Ee.Z,{}),(0,a.jsxs)(Ce.Z,Object.assign({className:Fe.metadata},{children:[(0,a.jsx)(we.Z,{control:(0,a.jsx)(_e.Z,{checked:u.multiple_choices,onChange:O}),label:(0,a.jsx)(f.Z,{id:"ui.composer.content.poll.multiple",defaultMessage:"ui.composer.content.poll.multiple"})}),(0,a.jsx)(Pe._,Object.assign({dateAdapter:Me.H,adapterLocale:$e[p.locale]},{children:(0,a.jsx)(ke.M,{disabled:r,label:(0,a.jsx)(f.Z,{id:"ui.composer.content.poll.expiration",defaultMessage:"ui.composer.content.poll.expiration"}),value:"string"==typeof u.expiration_at?(0,De.Z)(u.expiration_at):u.expiration_at,onChange:x,slotProps:{textField:{variant:"outlined"}},minDate:y})}))]}))]}))};var He=n(20377),Ye=n(94631),We=n(591),qe=n(47120);const Xe={root:`${X}-typeswitch-root`},Ke=(0,S.ZP)(We.Z,{name:X,slot:"TypeSwitchButtonGroupRoot"})((()=>({})));const Je=function(e){const{preferences:t}=(0,p.ko)(),n=(0,m.LD)(),s=(0,i.useMemo)((()=>t[g.ej].value||h.B2(n.user)),[t,n.user]),r=(0,i.useMemo)((()=>t[g.y1].value),[t]),l=(0,i.useMemo)((()=>t[g.Ow].value),[t]),{className:c,onChange:d,value:u}=e,b=(0,o._T)(e,["className","onChange","value"]);(0,i.useEffect)((()=>{null===u&&d&&d(r?P:A)}),[u]);const v=(0,i.useCallback)(((e,t)=>{d&&d(t)}),[d]);return(0,a.jsxs)(Ke,Object.assign({className:q()(Xe.root,c),onChange:v,exclusive:!0,value:u},b,{children:[r&&(0,a.jsx)(qe.Z,Object.assign({value:P},{children:(0,a.jsx)(f.Z,{id:"ui.composer.typeSwitch.post",defaultMessage:"ui.composer.typeSwitch.post"})})),l&&(0,a.jsx)(qe.Z,Object.assign({value:A},{children:(0,a.jsx)(f.Z,{id:"ui.composer.typeSwitch.discussion",defaultMessage:"ui.composer.typeSwitch.discussion"})})),s&&(0,a.jsx)(qe.Z,Object.assign({value:k},{children:(0,a.jsx)(f.Z,{id:"ui.composer.typeSwitch.poll",defaultMessage:"ui.composer.typeSwitch.poll"})}))]}))};var Qe=n(12880);const et={root:`${X}-content-post-root`,generalError:`${X}-general-error`,medias:`${X}-content-post-medias`,editor:`${X}-content-post-editor`},tt=(0,S.ZP)(_.Z,{name:X,slot:"ContentPostRoot"})((({theme:e})=>({}))),nt={categories:[],medias:[],html:"",addressing:[],event:null,group:null},ot=e=>{const{className:t=null,value:n=Object.assign({},nt),error:o={},disabled:s=!1,onChange:r,EditorProps:l={}}=e,{error:c=null}=Object.assign({},o),d=(0,i.useRef)();(0,i.useEffect)((()=>{d&&d.current&&d.current.focus()}),[d]);const u=(0,i.useCallback)((e=>{r(Object.assign(Object.assign({},n),{html:e}))}),[n]);return(0,a.jsxs)(tt,Object.assign({className:q()(et.root,t)},{children:[c&&(0,a.jsx)(U.Z,Object.assign({className:et.generalError},{children:(0,a.jsx)(f.Z,{id:`ui.composer.error.${c}`,defaultMessage:`ui.composer.error.${c}`})})),(0,a.jsx)(Qe.Z,Object.assign({ref:d},l,{editable:!s,className:et.editor,onChange:u,defaultValue:n.html}))]}))};var at=n(94158);const it={root:`${X}-layer-category-root`,title:`${X}-layer-title`,content:`${X}-layer-content`},st=(0,S.ZP)(_.Z,{name:X,slot:"LayerCategoryRoot"})((()=>({}))),rt=i.forwardRef(((e,t)=>{const{className:n,onClose:s,onSave:r,defaultValue:l=[]}=e,c=(0,o._T)(e,["className","onClose","onSave","defaultValue"]),[d,u]=(0,i.useState)(l),p=(0,i.useCallback)((()=>r(d)),[d,r]),m=(0,i.useCallback)((e=>u(e)),[]);return(0,a.jsxs)(st,Object.assign({ref:t,className:q()(n,it.root)},c,{children:[(0,a.jsxs)(Z.Z,Object.assign({className:it.title},{children:[(0,a.jsx)(E.Z,Object.assign({onClick:s},{children:(0,a.jsx)(b.Z,{children:"arrow_back"})})),(0,a.jsx)(U.Z,{children:(0,a.jsx)(f.Z,{id:"ui.composer.layer.category.title",defaultMessage:"ui.composer.layer.category.title"})}),(0,a.jsx)(V.Z,Object.assign({size:"small",color:"secondary",variant:"contained",onClick:p},{children:(0,a.jsx)(f.Z,{id:"ui.composer.layer.save",defaultMessage:"ui.composer.layer.save"})}))]})),(0,a.jsx)(w.Z,Object.assign({className:it.content},{children:(0,a.jsx)(at.Z,{multiple:!0,onChange:m,defaultValue:l})}))]}))}));var lt=n(88304);const ct={root:`${X}-layer-location-root`,title:`${X}-layer-title`,content:`${X}-layer-content`},dt=(0,S.ZP)(_.Z,{name:X,slot:"LayerLocationRoot"})((()=>({}))),ut=i.forwardRef(((e,t)=>{const{className:n,onClose:s,onSave:r,defaultValue:l=null}=e,c=(0,o._T)(e,["className","onClose","onSave","defaultValue"]),[d,u]=(0,i.useState)(l),p=(0,i.useCallback)((()=>r(d)),[d,r]),m=(0,i.useCallback)((e=>u(e)),[]);return(0,a.jsxs)(dt,Object.assign({ref:t,className:q()(n,ct.root)},c,{children:[(0,a.jsxs)(Z.Z,Object.assign({className:ct.title},{children:[(0,a.jsx)(E.Z,Object.assign({onClick:s},{children:(0,a.jsx)(b.Z,{children:"arrow_back"})})),(0,a.jsx)(U.Z,{children:(0,a.jsx)(f.Z,{id:"ui.composer.layer.location.title",defaultMessage:"ui.composer.layer.location.title"})}),(0,a.jsx)(V.Z,Object.assign({size:"small",color:"secondary",variant:"contained",onClick:p},{children:(0,a.jsx)(f.Z,{id:"ui.composer.layer.save",defaultMessage:"ui.composer.layer.save"})}))]})),(0,a.jsx)(w.Z,Object.assign({className:ct.content},{children:(0,a.jsx)(lt.Z,{onChange:m,defaultValue:d||""})}))]}))})),pt={root:`${X}-content-discussion-root`,generalError:`${X}-general-error`,title:`${X}-content-discussion-title`,medias:`${X}-content-discussion-medias`,editor:`${X}-content-discussion-editor`},mt=(0,S.ZP)(_.Z,{name:X,slot:"ContentDiscussionRoot"})((({theme:e})=>({}))),ht={title:"",categories:[],group:null,event:null,medias:[],html:"",addressing:[]},gt=e=>{const{className:t=null,value:n=Object.assign({},ht),error:o={},disabled:s=!1,onChange:r,EditorProps:l={}}=e,{titleError:c=null,error:d=null}=Object.assign({},o),u=(0,Se.Z)(),p=(0,i.useCallback)((e=>{r(Object.assign(Object.assign({},n),{title:e.target.value}))}),[n]),m=(0,i.useCallback)((e=>{r(Object.assign(Object.assign({},n),{html:e}))}),[n]);return(0,a.jsxs)(mt,Object.assign({className:q()(pt.root,t)},{children:[d&&(0,a.jsx)(U.Z,Object.assign({className:pt.generalError},{children:(0,a.jsx)(f.Z,{id:`ui.composer.error.${d}`,defaultMessage:`ui.composer.error.${d}`})})),(0,a.jsx)(D.Z,{className:pt.title,placeholder:u.formatMessage({id:"ui.composer.content.discussion.title.label",defaultMessage:"ui.composer.content.discussion.title.label"}),autoFocus:!0,fullWidth:!0,variant:"outlined",value:n.title,multiline:!0,onChange:p,InputProps:{endAdornment:(0,a.jsx)(U.Z,Object.assign({variant:"body2"},{children:M-n.title.length}))},error:Boolean(c),helperText:c,disabled:s}),(0,a.jsx)(Qe.Z,Object.assign({},l,{editable:!s,className:pt.editor,onChange:m,defaultValue:n.html}))]}))};var ft=n(22461),bt=n(70815),vt=n(26474),jt=n(87918);const Ot={root:`${X}-attributes-root`},xt=(0,S.ZP)(_.Z,{name:X,slot:"AttributesRoot"})((()=>({}))),yt=e=>{var t,n,o,s;const{className:r=null,value:l=null,onChange:c=null,onClick:d=null}=e,u=(0,i.useCallback)((e=>()=>{c&&c(Object.assign(Object.assign({},l),{categories:l.categories.filter((t=>t.id!==e))}))}),[l,c]),p=(0,i.useCallback)((()=>{d&&d("categories")}),[d]),m=(0,i.useCallback)((()=>{c&&c(Object.assign(Object.assign({},l),{event:null}))}),[l,c]),h=(0,i.useCallback)((()=>{d&&d("event")}),[d]),g=(0,i.useCallback)((()=>{c&&c(Object.assign(Object.assign({},l),{group:null}))}),[l,c]),f=(0,i.useCallback)((()=>{d&&d("group")}),[d]),v=(0,i.useCallback)((e=>()=>{c&&c(Object.assign(Object.assign({},l),{addressing:l.addressing.filter((t=>t.id!==e))}))}),[l,c]),j=(0,i.useCallback)((()=>{d&&d("addressing")}),[d]),O=(0,i.useCallback)((()=>{c&&c(Object.assign(Object.assign({},l),{location:null}))}),[l,c]),x=(0,i.useCallback)((()=>{d&&d("location")}),[d]);return(0,a.jsxs)(xt,Object.assign({className:q()(Ot.root,r)},{children:[(null===(t=null==l?void 0:l.categories)||void 0===t?void 0:t.length)>0&&(null==l?void 0:l.categories.map((e=>(0,a.jsx)(jt.Z,{label:e.name,onDelete:u(e.id),icon:(0,a.jsx)(b.Z,{children:"category"}),onClick:p},e.id)))),(null==l?void 0:l.group)&&(0,a.jsx)(jt.Z,{label:null==l?void 0:l.group.name,onDelete:g,icon:(0,a.jsx)(b.Z,{children:"groups"}),onClick:f,disabled:!(null===(n=null==l?void 0:l.group)||void 0===n?void 0:n.subscription_status)},null==l?void 0:l.group.id),(null==l?void 0:l.event)&&(0,a.jsx)(jt.Z,{label:null==l?void 0:l.event.name,onDelete:m,icon:(0,a.jsx)(b.Z,{children:"CalendarIcon"}),onClick:h,disabled:!(null===(o=null==l?void 0:l.event)||void 0===o?void 0:o.subscription_status)},null==l?void 0:l.event.id),(null===(s=null==l?void 0:l.addressing)||void 0===s?void 0:s.length)>0&&(null==l?void 0:l.addressing.map((e=>(0,a.jsx)(Y.Z,{tag:e,onDelete:v(e.id),icon:(0,a.jsx)(b.Z,{children:"label"}),onClick:j},e.id)))),(null==l?void 0:l.location)&&(0,a.jsx)(jt.Z,{icon:(0,a.jsx)(b.Z,{children:"add_location_alt"}),label:null==l?void 0:l.location.location,onDelete:O,onClick:x})]}))};var Ct=n(88078);const Zt={root:`${X}-skeleton-root`,title:`${X}-title`,avatar:`${X}-avatar`,content:`${X}-content`,actions:`${X}-actions`},Et=(0,S.ZP)(_.Z,{name:X,slot:"SkeletonRoot"})((()=>({})));function wt(){return(0,a.jsx)(Et,Object.assign({className:Zt.root},{children:(0,a.jsx)(Ct.Z,{sx:{height:190},animation:"wave",variant:"rectangular"})}))}var _t=n(78462),Nt=n(97212),St=n(98619),Tt=n(59334);const At={root:`${X}-layer-close-root`,title:`${X}-layer-title`,content:`${X}-layer-content`},Pt=(0,S.ZP)(_.Z,{name:X,slot:"LayerCloseRoot"})((()=>({}))),kt=i.forwardRef(((e,t)=>{const{className:n,onClose:i,onSave:s,defaultValue:r=[]}=e,l=(0,o._T)(e,["className","onClose","onSave","defaultValue"]);return(0,a.jsxs)(Pt,Object.assign({ref:t,className:q()(n,At.root)},l,{children:[(0,a.jsxs)(Z.Z,Object.assign({className:At.title},{children:[(0,a.jsx)(E.Z,Object.assign({onClick:i},{children:(0,a.jsx)(b.Z,{children:"arrow_back"})})),(0,a.jsx)(U.Z,{children:(0,a.jsx)(f.Z,{id:"ui.composer.layer.close.title",defaultMessage:"ui.composer.layer.close.title"})})]})),(0,a.jsxs)(w.Z,Object.assign({className:At.content},{children:[(0,a.jsx)(U.Z,{children:(0,a.jsx)(f.Z,{id:"ui.composer.layer.close.text",defaultMessage:"ui.composer.layer.close.text"})}),(0,a.jsxs)(_t.Z,{children:[(0,a.jsx)(Nt.ZP,{children:(0,a.jsx)(St.Z,Object.assign({onClick:i},{children:(0,a.jsx)(Tt.Z,{primary:(0,a.jsx)(f.Z,{id:"ui.composer.layer.close.no",defaultMessage:"ui.composer.layer.close.no"})})}))}),(0,a.jsx)(Nt.ZP,{children:(0,a.jsx)(St.Z,Object.assign({onClick:s},{children:(0,a.jsx)(Tt.Z,{primary:(0,a.jsx)(f.Z,{id:"ui.composer.layer.close.yes",defaultMessage:"ui.composer.layer.close.yes"})})}))})]})]}))]}))})),Mt=(0,i.forwardRef)((function(e,t){return(0,a.jsx)(v.Z,Object.assign({ref:t},e))})),It={root:`${X}-root`,ios:`${X}-ios`,title:`${X}-title`,types:`${X}-types`,content:`${X}-content`,attributes:`${X}-attributes`,medias:`${X}-medias`,actions:`${X}-actions`,layerTransitionRoot:`${X}-layer-transition-root`},Rt=(0,S.ZP)(j.Z,{name:X,slot:"Root"})((()=>({}))),Dt=(0,S.ZP)(O.Z,{name:X,slot:"LayerTransitionRoot"})((({theme:e})=>({}))),$t={id:null,type:null,title:"",titleError:null,html:"",htmlError:null,categories:[],group:null,event:null,categoriesError:null,groupsError:null,addressing:null,addressingError:null,medias:[],poll:null,location:null,error:null},Ft=(e,t)=>{switch(t.type){case"reset":return Object.assign(Object.assign({},$t),{key:(0,Oe.MX)()});case"resetEventFeed":return Object.assign(Object.assign({},$t),{event:e.event,key:(0,Oe.MX)()});case"resetGroupFeed":return Object.assign(Object.assign({},$t),{group:e.group,key:(0,Oe.MX)()});case"resetCategoryFeed":return Object.assign(Object.assign({},$t),{categories:e.categories,key:(0,Oe.MX)()});case"multiple":return Object.assign(Object.assign({},e),t.value);default:return Object.assign(Object.assign({},e),{[t.type]:t.value})}};const Lt=function(e){const t=(0,ie.Z)({props:e,name:X}),{feedObjectId:n=null,feedObjectType:v=null,feedObject:j=null,defaultValue:O={},mediaObjectTypes:S=[ft.Z,bt.Z,vt.Z],EditorProps:A={},onClose:P=null,onSuccess:D=null,maxWidth:$,feedType:F}=t,L=(0,o._T)(t,["feedObjectId","feedObjectType","feedObject","defaultValue","mediaObjectTypes","EditorProps","onClose","onSuccess","maxWidth","feedType"]),{preferences:B,features:U}=(0,p.ko)(),V=(0,m.LD)(),{enqueueSnackbar:G}=(0,He.Ds)(),z=(0,T.Z)(),H=(0,x.Z)(z.breakpoints.down("md"),{noSsr:(0,xe.rx)()}),[Y,W]=(0,i.useState)(!1),[K,J]=(0,i.useState)(),[Q,ee]=(0,i.useReducer)(Ft,Object.assign(Object.assign(Object.assign({},$t),O),{key:(0,Oe.MX)()})),{key:te,id:ne,type:oe,title:ae,titleError:se,html:re,categories:le,event:ce,group:de,addressing:ue,audience:pe,medias:me,poll:he,pollError:ge,location:fe,error:be}=Q,ve=e=>{e.type===s.q.POST||(e.type,s.q.DISCUSSION),j.author.id===V.user.id?(ee({type:"multiple",value:{id:e.id,type:e.poll?k:j.type,title:e.title,html:e.html,categories:e.categories,event:e.event,group:e.group,addressing:e.addressing,medias:e.medias,poll:e.poll,location:e.location}}),Ee(!1)):_e(!0)},Ce=(0,i.useMemo)((()=>Boolean(n&&v||j)),[n,v,j]),[Ze,Ee]=(0,i.useState)(Ce),[we,_e]=(0,i.useState)(!1),Ne=(0,i.useRef)(),Se=(0,i.useRef)(!1),Te=(0,i.useRef)(null),Ae=(0,i.useRef)({medias:me});Ae.current={medias:me};const Pe=(0,i.useMemo)((()=>he&&he.title.length>0&&he.title.length<M&&he.choices.length>=2),[he]),ke=(0,i.useMemo)((()=>!Ze&&(oe===s.q.DISCUSSION&&ae.length>0&&ae.length<M||oe===s.q.POST&&((0,Oe.Vt)(re).length>0||me.length>0||Pe)||oe===k&&Pe)),[Ze,oe,ae,re,me,Pe]),Me=(0,i.useMemo)((()=>(0,ye.g)()),[]);(0,i.useEffect)((()=>{Ce&&(null===j?(Ee(!0),c.Z.request({url:d.Z.FeedObject.url({type:v,id:n}),method:d.Z.FeedObject.method}).then((e=>{ve(e.data)})).catch((()=>{_e(!0)})).then((()=>Ee(!1)))):ve(j))}),[Ce]),(0,i.useEffect)((()=>{if(!Se.current&&ke){Se.current=!0;const e=e=>(e.preventDefault(),"");window.onbeforeunload=e}else Se.current&&!ke&&(Se.current=!1,window.onbeforeunload=null)}),[Q,ke]),(0,i.useEffect)((()=>{if(!Ne.current||!Me)return;const e=e=>{Te.current=e.touches[0].clientY},t=e=>{const t=e.touches[0].clientY,n=t-Te.current;Te.current=t,n>0&&Ne.current.focus()};return Ne.current.addEventListener("touchstart",e),Ne.current.addEventListener("touchmove",t),()=>{var n,o;null===(n=Ne.current)||void 0===n||n.removeEventListener("touchstart",e),null===(o=Ne.current)||void 0===o||o.removeEventListener("touchmove",t)}}),[Ne.current,Me]);const Ie=(0,i.useCallback)((e=>J(e)),[]),Re=(0,i.useCallback)((()=>J(null)),[]),De=(0,i.useCallback)((e=>{ee({type:"type",value:e})}),[]),$e=(0,i.useCallback)((e=>{ee({type:"multiple",value:Object.assign(Object.assign({},e),{pollError:e.poll.title.length>M?{titleError:(0,a.jsx)(f.Z,{id:"ui.composer.title.error.maxlength",defaultMessage:"ui.composer.title.error.maxlength"})}:null})})}),[]),Fe=(0,i.useCallback)((e=>{ee({type:"multiple",value:Object.assign(Object.assign({},e),{titleError:e.title.length>M?(0,a.jsx)(f.Z,{id:"ui.composer.title.error.maxlength",defaultMessage:"ui.composer.title.error.maxlength"}):null})})}),[]),Le=(0,i.useCallback)((e=>{ee({type:"multiple",value:Object.assign({},e)})}),[]),Be=(0,i.useCallback)((e=>{ee({type:"categories",value:e}),J(null)}),[]),Ue=(0,i.useCallback)((()=>Ie({name:"category",Component:rt,ComponentProps:{onClose:Re,onSave:Be,defaultValue:le}})),[Ie,Re,Be,le]),Ve=(0,i.useCallback)((e=>{de||e&&Object.prototype.hasOwnProperty.call(e,"emotional_image_position")?ee({type:"group",value:e}):ce||e&&Object.prototype.hasOwnProperty.call(e,"recurring")?ee({type:"event",value:e}):ee({type:"addressing",value:e}),J(null)}),[de]),Ge=(0,i.useCallback)((()=>Ie({name:"audience",Component:je,ComponentProps:{onClose:Re,onSave:Ve,defaultValue:de||ue&&Object.prototype.hasOwnProperty.call(ue,"emotional_image_position")?de:ce||ue&&Object.prototype.hasOwnProperty.call(ue,"recurring")?ce:ue}})),[Ie,Re,Ve,ue,ce,de]),We=(0,i.useCallback)((e=>{ee({type:"location",value:e}),J(null)}),[]),qe=(0,i.useCallback)((()=>Ie({name:"location",Component:ut,ComponentProps:{onClose:Re,onSave:We,defaultValue:fe}})),[Ie,Re,We,fe]),Xe=(0,i.useCallback)((e=>{const t=[...e];ee({type:"medias",value:[...e]}),Ae.current.medias=t,J(null)}),[]),Ke=(0,i.useCallback)((e=>{const t=[...Ae.current.medias,e];ee({type:"medias",value:t}),Ae.current.medias=t}),[]),Qe=(0,i.useCallback)((e=>t=>{e.layerComponent&&Ie({name:e.name,Component:e.layerComponent,ComponentProps:{onClose:Re,onSave:Xe,defaultValue:me}})}),[Ie,Re,Xe,me]),et=(0,i.useCallback)((e=>{ee({type:"multiple",value:Object.assign({},e)})}),[]),tt=(0,i.useCallback)((e=>{switch(e){case"categories":Ue();break;case"addressing":Ge();break;case"location":qe()}}),[Ue,Ge,qe]),nt=(0,i.useCallback)((e=>{if(e.preventDefault(),e.stopPropagation(),h.IT(V.user))return void G((0,a.jsx)(f.Z,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3});const t=[...le.map((e=>e.id)),...(0,Ye.E)(re)],n={title:ae,text:re,medias:me.map((e=>e.id)),categories:t.filter(((e,n)=>t.indexOf(e)===n))};(B[g.ej].value||h.B2(V.user))&&Pe&&(n.poll=he),B[g.ey].value&&fe&&(n.location=fe),U.includes(r.$.TAGGING)&&null!==ue&&(n.addressing=ue.map((e=>e.id))),U.includes(r.$.TAGGING)&&U.includes(r.$.GROUPING)&&B[g.$T].value&&null!==de&&(n.group=de.id),U.includes(r.$.TAGGING)&&U.includes(r.$.EVENT)&&B[g.my].value&&null!==ce&&(n.event=ce.id),W(!0);const o=oe===k?s.q.POST:oe;let i=d.Z.Composer.url({type:o}),p=d.Z.Composer.method;Ce&&(i=d.Z.ComposerEdit.url({type:v||o,id:ne}),p=d.Z.ComposerEdit.method),c.Z.request({url:i,method:p,data:n}).then((e=>{D(e.data),Se.current&&(window.onbeforeunload=null),F&&F===l.a.CATEGORY?ee({type:"resetCategoryFeed"}):F===l.a.EVENT?ee({type:"resetEventFeed"}):F===l.a.GROUP?ee({type:"resetGroupFeed"}):ee({type:"reset"})})).catch((e=>{ee({type:"multiple",value:(0,u.yt)(e)})})).then((()=>W(!1)))}),[V.user,v,ne,oe,ae,re,le,ce,de,ue,pe,me,he,fe,Pe]),at=(0,i.useCallback)(((e,t)=>{Se.current&&(window.onbeforeunload=null),t&&ke?Ie({name:"close",Component:kt,ComponentProps:{onClose:Re,onSave:()=>{P&&P(e),J(null),F&&F===l.a.CATEGORY?ee({type:"resetCategoryFeed"}):F===l.a.EVENT?ee({type:"resetEventFeed"}):F===l.a.GROUP?ee({type:"resetGroupFeed"}):ee({type:"reset"})}}}):(P&&P(e),J(null),ee({type:"reset"}))}),[P,ke,Re]),it=(0,i.useCallback)((e=>{ke?Ie({name:"close",Component:kt,ComponentProps:{onClose:Re,onSave:at}}):at(e)}),[ke,Ie,Re,at]),st=(0,i.useMemo)((()=>-1!==me.findIndex((e=>e.type===I.TC))),[me]),lt=(0,i.useMemo)((()=>{if(Ce&&Ze)return(0,a.jsx)(wt,{});if(Ce&&we)return(0,a.jsxs)(y.Z,Object.assign({severity:"error",onClose:at},{children:[(0,a.jsx)(C.Z,{children:(0,a.jsx)(f.Z,{id:"ui.composer.edit.error.title",defaultMessage:"ui.composer.edit.error.title"})}),(0,a.jsx)(f.Z,{id:"ui.composer.edit.error.content",defaultMessage:"ui.composer.edit.error.content"})]}));switch(oe){case k:return(0,a.jsx)(ze,{onChange:$e,value:{html:re,event:ce,group:de,addressing:ue,medias:me,poll:he,location:fe},error:ge,disabled:Y},te);case s.q.DISCUSSION:return(0,a.jsx)(gt,{value:{title:ae,html:re,categories:le,event:ce,group:de,addressing:ue,medias:me,poll:he,location:fe},error:{titleError:se,error:be},onChange:Fe,disabled:Y,EditorProps:Object.assign({toolbar:!0,uploadImage:!0},A)},te);default:return(0,a.jsx)(ot,{value:{html:re,categories:le,event:ce,group:de,addressing:ue,medias:me,poll:he,location:fe},error:{error:be},onChange:Le,disabled:Y,EditorProps:Object.assign({toolbar:!1,uploadImage:!1},A)},te)}}),[te,oe,ae,re,le,ce,de,ue,me,he,ge,fe,be,$e,Le,Y]);return V.user||V.loading&&open?(0,a.jsxs)(Rt,Object.assign({ref:Ne,TransitionComponent:Mt,keepMounted:!0,onClose:at},L,{className:q()(It.root,{[It.ios]:Me}),scroll:"body",fullScreen:H,tabIndex:-1},{children:[(0,a.jsxs)("form",Object.assign({onSubmit:nt,method:"post"},{children:[(0,a.jsxs)(Z.Z,Object.assign({className:It.title},{children:[(0,a.jsx)(E.Z,Object.assign({onClick:it},{children:(0,a.jsx)(b.Z,{children:"close"})})),(0,a.jsx)(R.Z,Object.assign({size:"small",type:"submit",color:"secondary",variant:"contained",disabled:!ke,loading:Y},{children:(0,a.jsx)(f.Z,{id:"ui.composer.submit",defaultMessage:"ui.composer.submit"})}))]})),(0,a.jsxs)(w.Z,Object.assign({className:It.content},{children:[(0,a.jsx)(yt,{value:{categories:le,event:ce,group:de,addressing:ue,location:fe},className:It.attributes,onChange:et,onClick:tt}),lt,me&&me.length>0&&(0,a.jsx)(_.Z,Object.assign({className:It.medias},{children:S.map((e=>e.previewComponent?(0,a.jsx)(e.previewComponent,{value:me,onChange:Xe},e.name):e.displayComponent?(0,a.jsx)(e.displayComponent,{medias:me},e.name):void 0))}))]})),!ke&&!Ce&&(0,a.jsx)(Je,{className:It.types,onChange:De,size:"small",value:oe}),(0,a.jsxs)(N.Z,Object.assign({className:It.actions},{children:[S.filter((e=>null!==e.triggerButton)).map((e=>{const t=e.layerComponent?{onClick:Qe(e)}:{onAdd:Ke};return(0,a.jsx)(e.triggerButton,Object.assign({disabled:Y||st,color:me.filter(e.filter).length>0?"primary":"default"},t),e.name)})),(0,a.jsx)(E.Z,Object.assign({disabled:Y,onClick:Ue},{children:(0,a.jsx)(b.Z,{children:"category"})})),(0,a.jsx)(E.Z,Object.assign({disabled:Y||!U.includes(r.$.TAGGING)||Boolean(null==j?void 0:j.group)||Boolean(null==j?void 0:j.event),onClick:Ge},{children:!de&&null===ue||!ce&&null===ue||0===(null==ue?void 0:ue.length)?(0,a.jsx)(b.Z,{children:"public"}):de?(0,a.jsx)(b.Z,{children:"groups"}):ce?(0,a.jsx)(b.Z,{children:"CalendarIcon"}):(0,a.jsx)(b.Z,{children:"label"})})),B[g.ey].value&&(0,a.jsx)(E.Z,Object.assign({disabled:Y,onClick:qe,color:null!==fe?"primary":"default"},{children:(0,a.jsx)(b.Z,{children:"add_location_alt"})}))]}))]})),K&&(0,a.jsx)(Dt,Object.assign({className:It.layerTransitionRoot,in:!0,container:Ne.current,direction:"left"},{children:(0,a.jsx)(K.Component,Object.assign({},K.ComponentProps))}))]})):null}},12805:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var o=n(97582),a=n(85893),i=n(67294),s=n(63902),r=n(90948),l=n(88078),c=n(37024),d=n(2734),u=n(78445),p=n(44267),m=n(94184),h=n.n(m),g=n(37540);const f={root:`${g.B}-skeleton-root`,media:`${g.B}-media`},b=(0,r.ZP)(s.Z,{name:g.B,slot:"SkeletonRoot"})((()=>({})));function v(e){const{template:t=c.r.SNIPPET}=e,n=(0,o._T)(e,["template"]),s=(0,d.Z)();let r;return r=t===c.r.PREVIEW||t===c.r.DETAIL||t===c.r.SEARCH?(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(u.Z,{avatar:(0,a.jsx)(l.Z,{animation:"wave",variant:"circular",width:s.selfcommunity.user.avatar.sizeMedium,height:s.selfcommunity.user.avatar.sizeMedium}),title:(0,a.jsx)(l.Z,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),subheader:(0,a.jsx)(l.Z,{animation:"wave",height:10,width:"40%"})}),(0,a.jsx)(l.Z,{animation:"wave",variant:"rectangular",className:f.media}),(0,a.jsx)(p.Z,{children:(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(l.Z,{animation:"wave",height:10,style:{marginBottom:6}}),(0,a.jsx)(l.Z,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),(0,a.jsx)(l.Z,{animation:"wave",height:10,width:"60%"})]})})]}):(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(u.Z,{avatar:(0,a.jsx)(l.Z,{animation:"wave",variant:"circular",width:s.selfcommunity.user.avatar.sizeMedium,height:s.selfcommunity.user.avatar.sizeMedium}),title:(0,a.jsx)(l.Z,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),subheader:(0,a.jsx)(l.Z,{animation:"wave",height:10,width:"40%"})}),(0,a.jsx)(p.Z,{children:(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(l.Z,{animation:"wave",height:10,style:{marginBottom:6}}),(0,a.jsx)(l.Z,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),(0,a.jsx)(l.Z,{animation:"wave",height:10,width:"60%",style:{marginBottom:6}})]})})]}),(0,a.jsx)(b,Object.assign({className:h()(f.root,`${g.B}-${t}`)},n,{children:r}))}},37540:(e,t,n)=>{"use strict";n.d(t,{B:()=>o});const o="SCFeedObject"},52693:(e,t,n)=>{"use strict";n.d(t,{Z:()=>on});var o=n(97582),a=n(85893),i=n(67294),s=n(90948),r=n(44267),l=n(15861),c=n(25662),d=n(94253),u=n(87918),p=n(78445),m=n(87952),h=n(34386),g=n(48542),f=n(62023),b=n(57922),v=n(12805),j=n(91568),O=n(51575),x=n(86558),y=n(86886),C=n(67720),Z=n(94184),E=n.n(Z),w=n(85050),_=n(85966),N=n(37540);const S={root:`${N.B}-action-vote-root`,divider:`${N.B}-action-vote-divider`,button:`${N.B}-action-vote-button`,inline:`${N.B}-action-vote-inline`,viewAudienceButton:`${N.B}-action-vote-view-audience-button`},T=(0,s.ZP)(d.Z,{name:N.B,slot:"ActionVoteRoot"})((()=>({})));const A=function(e){const{className:t=null,feedObjectId:n=null,feedObject:s=null,feedObjectType:r=null,withAudience:l=!0,withAction:c=!0,inlineAction:d=!1,onVoteAction:u=(()=>null)}=e,p=(0,o._T)(e,["className","feedObjectId","feedObject","feedObjectType","withAudience","withAction","inlineAction","onVoteAction"]);return(0,a.jsxs)(T,Object.assign({className:E()(S.root,t,{[S.inline]:d})},p,{children:[l&&(0,a.jsx)(_.Z,{className:S.viewAudienceButton,contributionId:n,contributionType:r,contribution:s,variant:"text",size:"small"}),c&&(0,a.jsxs)(i.Fragment,{children:[!d&&l&&(0,a.jsx)(C.Z,{className:S.divider}),(0,a.jsx)(w.Z,{className:S.button,contributionId:n,contributionType:r,contribution:s,onVote:u})]})]}))};var P=n(54490),k=n(86896),M=n(67564),I=n(31498),R=n(41538),D=n(97265),$=n(49794),F=n(37024),L=n(70050),B=n(88078);const U=(0,P.vU)({comments:{id:"ui.feedObject.comment.comments",defaultMessage:"ui.feedObject.comment.comments"},comment:{id:"ui.feedObject.comment.comment",defaultMessage:"ui.feedObject.comment.comment"}}),V={root:`${N.B}-action-comment-root`,divider:`${N.B}-action-comment-divider`,inline:`${N.B}-action-comment-inline`,button:`${N.B}-action-comment-button`,viewAudienceButton:`${N.B}-action-comment-view-audience-button`},G=(0,s.ZP)(d.Z,{name:N.B,slot:"ActionCommentRoot"})((()=>({})));const z=function(e){const{className:t,feedObjectId:n,feedObject:s,feedObjectType:r=$.q.POST,feedObjectTemplate:d=F.r,withAction:u=!0,withAudience:p=!0,inlineAction:m=!1,onViewCommentsAction:g,onCommentAction:f}=e,b=(0,o._T)(e,["className","feedObjectId","feedObject","feedObjectType","feedObjectTemplate","withAction","withAudience","inlineAction","onViewCommentsAction","onCommentAction"]),{obj:v,setObj:j}=(0,I.Z)({id:n,feedObject:s,feedObjectType:r}),O=(0,R.sy)(),x=(0,k.Z)();return(0,a.jsxs)(G,Object.assign({className:E()(V.root,t,{[V.inline]:m})},b,{children:[function(){let e;return p&&(e=v?(0,a.jsx)(a.Fragment,{children:g?(0,a.jsx)(c.Z,Object.assign({variant:"text",size:"small",onClick:g,color:"inherit"},{children:`${x.formatMessage(U.comments,{total:v.comment_count})}`})):(0,a.jsx)(a.Fragment,{children:d===F.r.DETAIL?(0,a.jsx)(l.Z,Object.assign({variant:"body2"},{children:`${x.formatMessage(U.comments,{total:v.comment_count})}`})):(0,a.jsx)(c.Z,Object.assign({variant:"text",size:"small",component:D.Z,to:O.url((0,L.Ig)(v),(0,L.p3)(v)),classes:{root:V.viewAudienceButton}},{children:`${x.formatMessage(U.comments,{total:v.comment_count})}`}))})}):(0,a.jsx)(c.Z,Object.assign({variant:"text",size:"small",disabled:!0,color:"inherit"},{children:(0,a.jsx)(B.Z,{animation:"wave",height:18,width:50})}))),e}(),function(){let e={};return f||(e={component:D.Z,to:O.url((0,L.Ig)(v),(0,L.p3)(v))}),(0,a.jsx)(a.Fragment,{children:u&&(0,a.jsxs)(i.Fragment,{children:[!m&&p&&(0,a.jsx)(C.Z,{className:V.divider}),(0,a.jsx)(h.Z,Object.assign({title:`${x.formatMessage(U.comment)}`},{children:(0,a.jsx)(c.Z,Object.assign({onClick:f,className:V.button},e,{children:(0,a.jsx)(M.Z,{children:"chat_bubble_outline"})}))}))]})})}()]}))};var H=n(44012),Y=n(96828),W=n(78462),q=n(97212),X=n(79558),K=n(24085),J=n(24243),Q=n(99960),ee=n(75459),te=n(39154),ne=n(52271),oe=n(37089);const ae=function(e){const{id:t=null,feedObject:n=null,feedObjectType:s=(n?n.type:$.q.POST),open:r=!1,onClose:c=null}=e,d=(0,o._T)(e,["id","feedObject","feedObjectType","open","onClose"]),{obj:u,setObj:p}=(0,I.Z)({id:t,feedObject:n,feedObjectType:s}),[m,h]=(0,i.useState)(Boolean(t&&s||n)),[g,f]=(0,i.useState)([]),[b,v]=(0,i.useState)(t&&s?`${K.Z.ShareUsersList.url({type:s,id:t})}`:n&&s?`${K.Z.ShareUsersList.url({type:s,id:n.id})}`:null);function j(){h(!0),J.Z.request({url:b,method:K.Z.ShareUsersList.method}).then((e=>{const t=e.data;f([...g,...t.results]),h(!1),v(null!==t.next?t.next:null)})).catch((e=>{Q.Y.error(ee.J,e)}))}return(0,i.useEffect)((()=>{u&&b&&j()}),[`${u}`]),(0,a.jsx)(te.Z,Object.assign({title:(0,a.jsx)(H.Z,{defaultMessage:"ui.feedObject.sharesDialog.title",id:"ui.feedObject.sharesDialog.title"}),onClose:c,open:r},d,{children:m?(0,a.jsx)(ne.Z,{size:50}):(0,a.jsx)(X.Z,Object.assign({dataLength:g.length,next:j,hasMoreNext:null!==b,loaderNext:(0,a.jsx)(ne.Z,{size:30}),height:400,endMessage:(0,a.jsx)(l.Z,Object.assign({variant:"body2",align:"center",fontWeight:"bold"},{children:(0,a.jsx)(H.Z,{id:"ui.feedObject.sharesDialog.noOtherLikes",defaultMessage:"ui.feedObject.sharesDialog.noOtherLikes"})}))},{children:(0,a.jsx)(W.Z,{children:g.slice(0,4).map(((e,t)=>(0,a.jsx)(q.ZP,{children:(0,a.jsx)(oe.Z,{elevation:0,user:e},t)},e.id)))})}))}))};var ie=n(2734),se=n(37292),re=n(59334),le=n(25464),ce=n(44652),de=n(18972),ue=n(48885),pe=n(57250),me=n(20377),he=n(26462),ge=n(77488),fe=n(62254),be=n(8860),ve=n(85472),je=n(51206),Oe=n(65580),xe=n(37991),ye=n(6605);const Ce=(0,P.vU)({shares:{id:"ui.feedObject.share.shares",defaultMessage:"ui.feedObject.share.shares"},share:{id:"ui.feedObject.share.share",defaultMessage:"ui.feedObject.share.share"}}),Ze={root:`${N.B}-action-share-root`,divider:`${N.B}-action-share-divider`,inline:`${N.B}-action-share-inline`,button:`${N.B}-action-share-button`,viewAudienceButton:`${N.B}-action-share-view-audience-button`},Ee=(0,s.ZP)(d.Z,{name:N.B,slot:"ActionShareRoot"})((()=>({})));const we=function(e){const{className:t=null,feedObjectId:n=null,feedObject:s=null,feedObjectType:r=$.q.POST,withAction:l=!0,withAudience:u=!0,inlineAction:p=!1}=e,m=(0,o._T)(e,["className","feedObjectId","feedObject","feedObjectType","withAction","withAudience","inlineAction"]),g=(0,ie.Z)(),f=(0,se.Z)(g.breakpoints.down("md")),{obj:b,setObj:v}=(0,I.Z)({id:n,feedObject:s,feedObjectType:r}),[j,O]=(0,i.useState)(!1),[x,y]=(0,i.useState)(!1),[Z,w]=(0,i.useState)(null),[_,N]=(0,i.useState)(!1),[S,T]=i.useState(null),A=(0,fe.RM)(),P=(0,R.sy)(),D=(0,i.useContext)(be.Tt),F=ve.MX in D.preferences&&D.preferences[ve.MX].value,U=ve.Yy in D.preferences&&D.preferences[ve.Yy].value,V=ve.KD in D.preferences&&D.preferences[ve.KD].value,G=(0,je.LD)(),{enqueueSnackbar:z}=(0,me.Ds)(),W=("undefined"!=typeof location&&location.origin?location.origin:"")+P.url((0,L.Ig)(b),(0,L.p3)(b)),q=(0,i.useMemo)((()=>s.group&&s.group.privacy===he.f.PUBLIC),[s.group]),X=(0,i.useMemo)((()=>!D.preferences[ve.Kq].value||Oe.B2(G.user)),[D,G.user]),te=(0,k.Z)(),ne=e=>{T(e.currentTarget)},oe=()=>{T(null)};function we(){N(!_)}function _e(){O(!1),y(!1)}function Ne(){v(Object.assign({},b,{share_count:b.share_count+1})),_e()}const Se=(0,i.useMemo)((()=>()=>{let e=b.id;const t=b.medias.filter((e=>e.type===pe.TC));t.length&&(e=t[0].embed.metadata.id);const n=b.medias.some((e=>e.embed.embed_type===pe.ej));return J.Z.request({url:K.Z.ComposerMediaCreate.url(),method:K.Z.ComposerMediaCreate.method,data:{type:pe.TC,[n?"event_object":"shared_object"]:e}}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))}),[b]);function Te(){return(0,a.jsxs)(d.Z,{children:[(!s.group||q)&&(0,a.jsxs)(a.Fragment,{children:[X&&(0,a.jsxs)(de.Z,Object.assign({onClick:()=>{return e=!1,void(G.user?Oe.IT(G.user)?z((0,a.jsx)(H.Z,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3}):(O(!0),Se().then((t=>{w(Object.assign({medias:[t]},e?{categories:b.categories}:{})),y(!0)})).catch((e=>{Q.Y.error(ee.J,e),O(!1)}))):A.settings.handleAnonymousAction());var e}},{children:[(0,a.jsx)(ue.Z,{children:(0,a.jsx)(M.Z,{children:"redo"})}),(0,a.jsx)(re.Z,{primary:(0,a.jsx)(H.Z,{id:"ui.feedObject.share.shareNow",defaultMessage:"ui.feedObject.share.shareNow"})})]})),F&&(0,a.jsxs)(de.Z,Object.assign({onClick:()=>window.open(xe.jm+W,"facebook-share-dialog","width=626,height=436")},{children:[(0,a.jsx)(ue.Z,{children:(0,a.jsx)(M.Z,{children:"facebook"})}),(0,a.jsx)(re.Z,{primary:(0,a.jsx)(H.Z,{id:"ui.feedObject.share.facebook",defaultMessage:"ui.feedObject.share.facebook"})})]})),U&&(0,a.jsxs)(de.Z,Object.assign({onClick:()=>window.open(xe.Eg+W,"x-share-dialog","width=626,height=436")},{children:[(0,a.jsx)(ue.Z,{children:(0,a.jsx)(M.Z,{children:"twitter"})}),(0,a.jsx)(re.Z,{primary:(0,a.jsx)(H.Z,{id:"ui.feedObject.share.x",defaultMessage:"ui.feedObject.share.x"})})]})),V&&(0,a.jsxs)(de.Z,Object.assign({onClick:()=>window.open(xe.nm+W,"linkedin-share-dialog","width=626,height=436")},{children:[(0,a.jsx)(ue.Z,{children:(0,a.jsx)(M.Z,{children:"linkedin"})}),(0,a.jsx)(re.Z,{primary:(0,a.jsx)(H.Z,{id:"ui.feedObject.share.linkedin",defaultMessage:"ui.feedObject.share.linkedin"})})]}))]}),(0,a.jsxs)(de.Z,{children:[(0,a.jsx)(ue.Z,{children:(0,a.jsx)(M.Z,{children:"link"})}),(0,a.jsx)(re.Z,{primary:(0,a.jsx)(H.Z,{id:"ui.feedObject.share.permanentLink",defaultMessage:"ui.feedObject.share.permanentLink"}),onClick:()=>{(0,ge.TE)(W).then((()=>{z((0,a.jsx)(H.Z,{id:"ui.common.permanentLinkCopied",defaultMessage:"ui.common.permanentLinkCopied"}),{variant:"success",autoHideDuration:3e3})}))}})]})]})}return(0,a.jsxs)(Ee,Object.assign({className:E()(Ze.root,t,{[Ze.inline]:p})},m,{children:[function(){const e=b.share_count;let t;return u&&(t=b?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,Object.assign({variant:"text",size:"small",onClick:we,disabled:e<1,classes:{root:Ze.viewAudienceButton}},{children:`${te.formatMessage(Ce.shares,{total:e})}`})),_&&e>0&&(0,a.jsx)(ae,{feedObject:b,feedObjectType:b.type,open:_,onClose:we})]}):(0,a.jsx)(c.Z,Object.assign({variant:"text",size:"small",disabled:!0,color:"inherit"},{children:(0,a.jsx)(B.Z,{animation:"wave",height:18,width:50})}))),t}(),(0,a.jsx)(i.Fragment,{children:l&&(0,a.jsxs)(i.Fragment,{children:[!p&&u&&(0,a.jsx)(C.Z,{className:Ze.divider}),(0,a.jsx)(h.Z,Object.assign({title:`${te.formatMessage(Ce.share)}`},{children:(0,a.jsx)(Y.Z,Object.assign({loading:j,onClick:ne,className:Ze.button},{children:(0,a.jsx)(M.Z,{children:"share"})}))})),(0,a.jsx)(a.Fragment,{children:f?(0,a.jsx)(ce.Z,Object.assign({open:Boolean(S),onClick:oe,onClose:oe,onOpen:ne,anchor:"bottom",disableSwipeToOpen:!0},{children:Te()})):(0,a.jsx)(le.Z,Object.assign({anchorEl:S,open:Boolean(S),onClose:oe,onClick:oe,slotProps:{paper:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"}},{children:Te()}))}),x&&(0,a.jsx)(ye.Z,{open:x,defaultValue:Z,onClose:_e,onSuccess:Ne,maxWidth:"sm",fullWidth:!0})]})})]}))},_e={root:`${N.B}-actions-root`,action:`${N.B}-actions-action`},Ne=(0,s.ZP)(y.ZP,{name:N.B,slot:"ActionsRoot"})((()=>({})));const Se=function(e){const{className:t,feedObject:n,feedObjectId:o=(null==n?void 0:n.id),feedObjectType:i=(null==n?void 0:n.type),feedObjectTemplate:s=F.r.PREVIEW,hideVoteAction:r=!1,hideShareAction:l=!1,hideCommentAction:c=!1,handleExpandActivities:d,VoteActionProps:u={},CommentActionProps:p={},ShareActionProps:m={}}=e,{obj:h}=(0,I.Z)({id:o,feedObject:n,feedObjectType:i});if(!h)return null;const g=function(){let e=4;return l&&c?e=12:(c||c)&&(e=6),e}();return(0,a.jsxs)(Ne,Object.assign({container:!0,className:E()(_e.root,t)},{children:[!r&&(0,a.jsx)(y.ZP,Object.assign({item:!0,xs:g,className:_e.action},{children:(0,a.jsx)(A,Object.assign({feedObjectId:o||h.id,feedObject:h,feedObjectType:i||h.type},u))})),!c&&(0,a.jsx)(y.ZP,Object.assign({item:!0,xs:g,className:_e.action},{children:(0,a.jsx)(z,Object.assign({feedObject:h,feedObjectType:i,feedObjectTemplate:s,onCommentAction:d},p))})),!l&&(0,a.jsx)(y.ZP,Object.assign({item:!0,xs:g,className:_e.action},{children:(0,a.jsx)(we,Object.assign({feedObject:h,feedObjectType:i,id:o},m))}))]}))};var Te=n(66242),Ae=n(81458);const Pe={root:`${N.B}-poll-object-choices-root`,label:`${N.B}-poll-object-choices-label`,vote:`${N.B}-poll-object-choices-vote`,progress:`${N.B}-poll-object-choices-progress`},ke=(0,s.ZP)(Te.Z,{name:N.B,slot:"PollObjectChoicesRoot"})((()=>({})));function Me(e){var{className:t}=e,n=(0,o._T)(e,["className"]);return(0,a.jsxs)(d.Z,Object.assign({className:t},{children:[(0,a.jsx)(Ae.Z,Object.assign({variant:"determinate"},n)),(0,a.jsx)(l.Z,Object.assign({variant:"body2",color:"text.secondary"},{children:`${Math.round(n.value)}%`}))]}))}const Ie=function(e){const{className:t=null,choiceObj:n=null,feedObject:i=null,vote:s=null,votes:r=null,isVoting:c=null,votable:d=null}=e,u=(0,o._T)(e,["className","choiceObj","feedObject","vote","votes","isVoting","votable"]),p=!i,m=(0,fe.RM)(),h=(0,je.LD)();return(0,a.jsxs)(ke,Object.assign({className:E()(Pe.root,t)},u,{children:[(0,a.jsx)(l.Z,Object.assign({className:Pe.label},{children:n.choice})),(0,a.jsx)(Me,{className:Pe.progress,value:(g=n.vote_count,f=r,0===f?0:100*g/f)}),(0,a.jsx)(Y.Z,Object.assign({loading:c===n.id,variant:n.voted?"contained":"outlined",size:"small",disabled:p||null!==c||d,className:Pe.vote,onClick:()=>{h.user?s(n):m.settings.handleAnonymousAction()}},{children:n.voted?(0,a.jsx)(M.Z,{children:"check"}):(0,a.jsx)(H.Z,{id:"ui.feedObject.poll.choice.vote",defaultMessage:"ui.feedObject.poll.choice.vote"})}))]}));var g,f},Re=(0,P.vU)({showPoll:{id:"ui.feedObject.poll.showPoll",defaultMessage:"ui.feedObject.poll.showPoll"},hidePoll:{id:"ui.feedObject.poll.hidePoll",defaultMessage:"ui.feedObject.poll.hidePoll"},expDate:{id:"ui.feedObject.poll.expDate",defaultMessage:"ui.feedObject.poll.expDate"},voters:{id:"ui.feedObject.poll.voters",defaultMessage:"ui.feedObject.poll.voters"},votes:{id:"ui.feedObject.poll.votes",defaultMessage:"ui.feedObject.poll.votes"}}),De={root:`${N.B}-poll-object-root`,voters:`${N.B}-poll-object-voters`,votes:`${N.B}-poll-object-votes`,toggleButton:`${N.B}-poll-object-toggle-button`,title:`${N.B}-poll-object-title`,expiration:`${N.B}-poll-object-expiration`,closed:`${N.B}-poll-object-closed`,expandIcon:`${N.B}-poll-object-expand-icon`,collapsedIcon:`${N.B}-poll-object-collapsed-icon`},$e=(0,s.ZP)(Te.Z,{name:N.B,slot:"PollObjectRoot"})((()=>({})));const Fe=function(e){const{className:t,feedObject:n,pollObject:s,disabled:d,visible:u=!0,onChange:m,onToggleVisibility:h}=e,g=(0,o._T)(e,["className","feedObject","pollObject","disabled","visible","onChange","onToggleVisibility"]),f=(0,k.Z)(),[v,j]=(0,i.useState)(s),[O,x]=(0,i.useState)(function(){const e=s.choices;let t=0;for(let n=0;n<e.length;n++)t+=e[n].vote_count;return t||0}()),[y,C]=(0,i.useState)(s.choices),[Z,w]=(0,i.useState)(null),[_,N]=(0,i.useState)(!u),S=s.multiple_choices,T=s.closed;function A(e){w(e.id),J.Z.request({url:K.Z.PollVote.url({id:n.id,type:n.type}),method:K.Z.PollVote.method,data:{choice:e.id}}).then((t=>{e.voted?(e=>{const t=[...y].map((t=>Object.assign({},t,{voted:t.id!==e&&t.voted,vote_count:t.id===e&&t.vote_count>0?t.vote_count-1:t.vote_count})));C(t),m(t),x((e=>e-1))})(e.id):(e=>{const t=[...y];let n;S?(n=t.map((t=>Object.assign({},t,{voted:t.id===e||t.voted,vote_count:t.id===e?t.vote_count+1:t.vote_count}))),x((e=>e+1))):(n=t.map((t=>Object.assign({},t,{voted:t.id===e,vote_count:t.id===e?t.vote_count+1:t.vote_count>0&&t.voted?t.vote_count-1:t.vote_count}))),x(n.reduce(((e,t)=>e+t.vote_count),0))),C(n),m(n)})(e.id),w(null)})).catch((e=>{Q.Y.error(ee.J,e)}))}const P=(0,i.useMemo)((()=>()=>{h&&h(_),N((e=>!e))}),[N,h]);let I=(0,a.jsx)(a.Fragment,{});return s&&(I=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.Z,{title:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(c.Z,Object.assign({className:De.toggleButton,onClick:P,"aria-expanded":_,endIcon:(0,a.jsx)(M.Z,Object.assign({className:E()(De.expandIcon,{[De.collapsedIcon]:_})},{children:"arrow_upward"}))},{children:_?f.formatMessage(Re.showPoll):f.formatMessage(Re.hidePoll)}))})}),(0,a.jsx)(b.Z,Object.assign({in:!_,timeout:"auto",unmountOnExit:!0},{children:(0,a.jsxs)(r.Z,{children:[(0,a.jsx)(l.Z,Object.assign({variant:"body1",className:De.title},{children:v.title})),v.expiration_at&&Date.parse(v.expiration_at)>=(new Date).getTime()&&(0,a.jsxs)(l.Z,Object.assign({variant:"body2",className:De.expiration},{children:[`${f.formatMessage(Re.expDate)}`,`${f.formatDate(Date.parse(v.expiration_at),{year:"numeric",month:"numeric",day:"numeric"})}`]})),v.closed&&(0,a.jsx)(l.Z,Object.assign({variant:"body2",className:De.closed},{children:(0,a.jsx)(H.Z,{id:"ui.feedObject.poll.closed",defaultMessage:"ui.feedObject.poll.closed"})})),(0,a.jsx)(W.Z,{children:y.map(((e,t)=>(0,a.jsx)(q.ZP,{children:(0,a.jsx)(Ie,{elevation:0,choiceObj:e,feedObject:d?null:n,votes:O,vote:A,isVoting:Z,votable:T})},t)))}),S?(0,a.jsxs)("div",Object.assign({className:De.votes},{children:[(0,a.jsx)(M.Z,{children:"list"}),(0,a.jsx)(l.Z,{children:`${f.formatMessage(Re.votes,{total:O})}`})]})):(0,a.jsxs)("div",Object.assign({className:De.voters},{children:[(0,a.jsx)(M.Z,{children:"people_alt"}),(0,a.jsx)(l.Z,{children:`${f.formatMessage(Re.voters,{total:O})}`})]}))]})}))]})),(0,i.useEffect)((()=>{C(s.choices)}),[s.choices]),(0,a.jsx)($e,Object.assign({className:E()(De.root,t)},g,{children:I}))};var Le=n(59219),Be=n(74482),Ue=n(69721),Ve=n(22319);const Ge={LOADING_NEXT:"_loading_next",LOADING_PREVIOUS:"_loading_previous",DATA_NEXT_LOADED:"_data_next_loaded",DATA_PREVIOUS_LOADED:"_data_previous_loaded",DATA_RELOAD:"_data_reload",DATA_RELOADED:"_data_reloaded"};function ze(e,t){switch(t.type){case Ge.LOADING_NEXT:return Object.assign(Object.assign({},e),{isLoadingNext:!0,isLoadingPrevious:!1});case Ge.LOADING_PREVIOUS:return Object.assign(Object.assign({},e),{isLoadingNext:!1,isLoadingPrevious:!0});case Ge.DATA_NEXT_LOADED:return Object.assign(Object.assign(Object.assign(Object.assign({},e),{page:t.payload.currentPage,contributors:t.payload.contributors,isLoadingNext:!1,componentLoaded:!0,next:t.payload.next}),t.payload.previous?{previous:t.payload.previous}:{}),t.payload.total?{total:t.payload.total}:{});case Ge.DATA_PREVIOUS_LOADED:return Object.assign(Object.assign({},e),{page:t.payload.currentPage,contributors:t.payload.contributors,isLoadingPrevious:!1,previous:t.payload.previous});case Ge.DATA_RELOAD:return Object.assign(Object.assign({},e),{next:t.payload.next,contributors:[],total:0,previous:null,reload:!0});case Ge.DATA_RELOADED:return Object.assign(Object.assign({},e),{componentLoaded:!1,reload:!1});default:throw new Error(`Unhandled type: ${t.type}`)}}function He(e){const{id:t,feedObject:n,feedObjectType:o,offset:a=0,pageSize:s=5,onChangePage:r,cacheStrategy:l=Le.n2.CACHE_FIRST}=e,c=(0,Ve.Z)(),{obj:d,setObj:u}=(0,I.Z)({id:t,feedObject:n,feedObjectType:o}),p=d?d.id:null,m=()=>{const e=a?`&offset=${a}`:"",n=d?d.id:t,i=d?d.type:o;return`${K.Z.FeedObjectContributorsList.url({type:i,id:n})}?limit=${s}${e}`},[h,g]=(0,i.useReducer)(ze,{},(()=>function(e){const t=e.obj?(0,Ue.t9)(e.obj.id,e.obj.type,e.next):null;let n={componentLoaded:!1,contributors:[],total:0,next:e.next,previous:null,isLoadingNext:!1,isLoadingPrevious:!1,page:e.offset/e.pageSize+1,reload:!1};if(t&&Le.ZP.hasKey(t)&&e.cacheStrategy!==Le.n2.NETWORK_ONLY){const e=Le.ZP.get(t);return Object.assign(Object.assign({},n),{total:e.count,next:e.next,previous:e.previous,contributors:e.results})}return n}({obj:d,offset:a,pageSize:s,next:m(),cacheStrategy:l}))),f=e=>{const t=new URLSearchParams(e),n=Object.fromEntries(t.entries());return(n.offset?parseInt(n.offset):0)/s+1},b=(e,t)=>v(e,!1).then((e=>{let n,o=f(h.next);if(t){n=h.contributors.slice(0,h.contributors.length-e.results.length).concat(e.results)}else{let t=h.contributors.slice(e.results.length,h.contributors.length);n=e.results.concat(t)}c.current&&g({type:t?Ge.DATA_NEXT_LOADED:Ge.DATA_PREVIOUS_LOADED,payload:Object.assign(Object.assign({page:o,contributors:n},t?{next:e.next}:{previous:e.previous}),{total:e.count})})})),v=(e,t=!0)=>{const n=(0,Ue.t9)(d.id,d.type,e);return t&&Le.ZP.hasKey(n)&&l!==Le.n2.NETWORK_ONLY?Promise.resolve(Le.ZP.get(n)):J.Z.request({url:e,method:K.Z.Comments.method}).then((e=>e.status>=300?Promise.reject(e):(Le.ZP.set(n,e.data),Promise.resolve(e.data))))};function j(){d&&h.next&&!h.isLoadingNext&&(g({type:Ge.LOADING_NEXT}),v(h.next).then((e=>{if(c.current){let t=f(h.next);g({type:Ge.DATA_NEXT_LOADED,payload:Object.assign({page:t,contributors:[...h.contributors,...e.results],next:e.next,total:e.count,componentLoaded:!0},a&&0===h.contributors.length?{previous:e.previous}:{})}),r&&r(t)}})).catch((e=>{Q.Y.error(Be.h,e)})).then((()=>{c.current&&l===Le.n2.STALE_WHILE_REVALIDATE&&b(h.next,!0)})))}return(0,i.useEffect)((()=>{c.current&&h.componentLoaded&&Boolean(d)&&!h.reload&&g({type:Ge.DATA_RELOAD,payload:{next:m()}})}),[p,s,a,c]),(0,i.useEffect)((()=>{c.current&&h.componentLoaded&&h.reload&&!h.isLoadingNext&&!h.isLoadingPrevious&&(g({type:Ge.DATA_RELOADED}),j())}),[h.reload,c]),Object.assign(Object.assign({feedObject:d,setFeedObject:u},h),{pageSize:s,getNextPage:j,getPreviousPage:function(){d&&h.previous&&!h.isLoadingPrevious&&(g({type:Ge.LOADING_PREVIOUS}),v(h.previous).then((e=>{if(c.current){let t=f(h.previous);g({type:Ge.DATA_PREVIOUS_LOADED,payload:{page:t,contributors:[...e.results,...h.contributors],previous:e.previous}}),r&&r(t)}})).catch((e=>{Q.Y.error(Be.h,e)})).then((()=>{l===Le.n2.STALE_WHILE_REVALIDATE&&b(h.next,!1)})))}})}var Ye=n(51107),We=n(59107);const qe={root:`${N.B}-contributors-skeleton-root`,btnParticipants:`${N.B}-btn-participants`},Xe=(0,s.ZP)(d.Z,{name:N.B,slot:"ContributorsSkeletonRoot"})((()=>({})));function Ke(e){const{className:t=null,AvatarGroupSkeletonProps:n={}}=e,i=(0,o._T)(e,["className","AvatarGroupSkeletonProps"]);return(0,a.jsx)(Xe,Object.assign({className:E()(qe.root,t)},i,{children:(0,a.jsxs)(c.Z,Object.assign({variant:"text",disabled:!0,classes:{root:qe.btnParticipants}},{children:[(0,a.jsx)(H.Z,{id:"ui.feedObject.contributors.participants",defaultMessage:"ui.feedObject.contributors.participants"}),":",(0,a.jsx)(We.Z,Object.assign({},e.AvatarGroupSkeletonProps))]}))}))}const Je={root:`${N.B}-contributors-root`,avatarGroup:`${N.B}-contributors-avatarGroup`,btnParticipants:`${N.B}-contributors-btn-participants`},Qe=(0,s.ZP)(d.Z,{name:N.B,slot:"ContributorsRoot"})((()=>({})));const et=function(e){const{className:t=null,feedObjectId:n=null,feedObject:s=null,feedObjectType:r=null,ContributorsSkeletonProps:u={},cacheStrategy:p=Le.n2.CACHE_FIRST}=e,h=(0,o._T)(e,["className","feedObjectId","feedObject","feedObjectType","ContributorsSkeletonProps","cacheStrategy"]),g=He({id:n,feedObject:s,feedObjectType:r,pageSize:10,cacheStrategy:p}),[f,b]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{g.feedObject&&g.getNextPage()}),[g.feedObject]),g.feedObject?(0,a.jsx)(Qe,Object.assign({className:E()(Je.root,t)},h,{children:(0,a.jsx)(d.Z,{children:g.isLoadingNext&&!f?(0,a.jsx)(Ke,Object.assign({},u)):(0,a.jsx)(a.Fragment,{children:g.contributors.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.Z,Object.assign({variant:"text",onClick:()=>b(!0),classes:{root:Je.btnParticipants},color:"inherit"},{children:[(0,a.jsx)(H.Z,{id:"ui.feedObject.contributors.participants",defaultMessage:"ui.feedObject.contributors.participants"}),":",(0,a.jsxs)(Ye.Z,Object.assign({},h,{children:[g.contributors.map(((e,t)=>(0,a.jsx)(m.Z,{alt:e.username,src:e.avatar},t))),[...Array(Math.max(g.total-g.contributors.length,0))].map(((e,t)=>(0,a.jsx)(m.Z,{},t)))]}))]})),f&&(0,a.jsx)(te.Z,Object.assign({title:(0,a.jsx)(H.Z,{defaultMessage:"ui.feedObject.contributors.title",id:"ui.feedObject.contributors.title",values:{total:g.total}}),onClose:()=>b(!1),open:f},{children:g.isLoadingNext?(0,a.jsx)(ne.Z,{size:50}):(0,a.jsx)(X.Z,Object.assign({dataLength:g.contributors.length,next:g.getNextPage(),hasMoreNext:Boolean(g.next),loaderNext:(0,a.jsx)(ne.Z,{size:30}),height:400,endMessage:(0,a.jsx)(l.Z,Object.assign({variant:"body2",align:"center",fontWeight:"bold"},{children:(0,a.jsx)(H.Z,{id:"ui.feedObject.contributors.noOtherContributors",defaultMessage:"ui.feedObject.contributors.noOtherContributors"})}))},{children:(0,a.jsx)(W.Z,{children:g.contributors.map(((e,t)=>(0,a.jsx)(q.ZP,{children:(0,a.jsx)(oe.Z,{elevation:0,user:e,sx:{m:0},onClick:()=>b(!1)},e.id)},t)))})}))}))]}):null})})})):null};var tt=n(63219),nt=n(52180),ot=n(56581);const at={root:`${N.B}-action-follow-root`,button:`${N.B}-action-follow-button`,iconized:`${N.B}-action-follow-iconized`,followed:`${N.B}-action-follow-followed`},it=(0,s.ZP)(d.Z,{name:N.B,slot:"ActionFollowRoot"})((()=>({})));const st=function(e){const{className:t=null,feedObjectId:n=null,feedObject:s=null,feedObjectType:r=$.q.POST,handleFollow:l,iconized:c=!0}=e,d=(0,o._T)(e,["className","feedObjectId","feedObject","feedObjectType","handleFollow","iconized"]),{obj:u,setObj:p}=(0,I.Z)({id:n,feedObject:s,feedObjectType:r}),[m,g]=(0,i.useState)(!1),f=(0,fe.RM)(),b=(0,je.LD)(),{enqueueSnackbar:v}=(0,me.Ds)(),j=(0,i.useMemo)((()=>()=>J.Z.request({url:K.Z.FollowContribution.url({type:u.type,id:u.id}),method:K.Z.FollowContribution.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[u]);function O(){b.user?(g(!0),j().then((e=>{const t=!u.followed;p(Object.assign({},u,{followed:t})),g(!1),l&&l(t)})).catch((e=>{Q.Y.error(ee.J,e),(0,ot.w)(e,b.managers.blockedUsers.isBlocked(u.author),v)||v((0,a.jsx)(H.Z,{id:"ui.common.error.action",defaultMessage:"ui.common.error.action"}),{variant:"error",autoHideDuration:3e3}),g(!1)}))):f.settings.handleAnonymousAction()}return(0,a.jsx)(it,Object.assign({className:E()(at.root,t)},d,{children:function(){let e=(0,a.jsx)(H.Z,{id:"ui.feedObject.follow",defaultMessage:"ui.feedObject.follow"});return u.followed&&(e=(0,a.jsx)(H.Z,{id:"ui.feedObject.unfollow",defaultMessage:"ui.feedObject.unfollow"})),(0,a.jsx)(i.Fragment,{children:b.user&&u.author.id!==b.user.id&&!u.deleted&&(0,a.jsx)(h.Z,Object.assign({title:e},{children:(0,a.jsx)(Y.Z,Object.assign({className:E()(at.button,{[at.iconized]:c,[at.followed]:u.followed}),loading:m,variant:c?"text":"contained",disabled:m,onClick:O},{children:c?(0,a.jsx)(M.Z,{children:u.followed?"bookmark_added":"bookmark_border"}):e}))}))})}()}))};var rt=n(63902),lt=n(29360),ct=n(115),dt=n(20166),ut=n(80317),pt=n(98619);const mt=(0,P.vU)({relevantActivities:{id:"ui.feedObject.activitiesMenu.relevantActivities",defaultMessage:"ui.feedObject.activitiesMenu.relevantActivities"},recentComments:{id:"ui.feedObject.activitiesMenu.recentComments",defaultMessage:"ui.feedObject.activitiesMenu.recentComments"},firstComments:{id:"ui.feedObject.activitiesMenu.firstComments",defaultMessage:"ui.feedObject.activitiesMenu.firstComments"},followedComments:{id:"ui.feedObject.activitiesMenu.followedComments",defaultMessage:"ui.feedObject.activitiesMenu.followedComments"},connectionsComments:{id:"ui.feedObject.activitiesMenu.connectionsComments",defaultMessage:"ui.feedObject.activitiesMenu.connectionsComments"}}),ht={root:`${N.B}-activities-menu-root`,selector:`${N.B}-activities-menu-selector`},gt=(0,s.ZP)(d.Z,{name:N.B,slot:"ActivitiesMenuRoot"})((()=>({})));const ft=function(e){const{className:t=null,selectedActivities:n=null,hideRelevantActivitiesItem:s=!1,onChange:r=null}=e,l=(0,o._T)(e,["className","selectedActivities","hideRelevantActivitiesItem","onChange"]),u=(0,i.useContext)(be.Tt),p=(0,je.LD)(),m=(0,ie.Z)(),g=(0,se.Z)(m.breakpoints.down("md")),f=u.preferences[ve.$0].value,[b,v]=i.useState(null),j=Boolean(b),O=(0,k.Z)(),x=e=>{v(e.currentTarget)},y=()=>{v(null)},C=e=>()=>{r&&r(e)};function Z(){return(0,a.jsxs)(d.Z,{children:[!s&&(0,a.jsx)(pt.Z,Object.assign({selected:n===F.F.RELEVANCE_ACTIVITIES,onClick:C(F.F.RELEVANCE_ACTIVITIES)},{children:(0,a.jsx)(re.Z,{primary:(0,a.jsx)("b",{children:O.formatMessage(mt.relevantActivities)}),secondary:(0,a.jsx)(H.Z,{id:"ui.feedObject.activitiesMenu.relevantActivitiesDesc",defaultMessage:"ui.feedObject.activitiesMenu.relevantActivitiesDesc"})})})),(0,a.jsx)(pt.Z,Object.assign({selected:n===F.F.RECENT_COMMENTS,onClick:C(F.F.RECENT_COMMENTS)},{children:(0,a.jsx)(re.Z,{primary:(0,a.jsx)("b",{children:O.formatMessage(mt.recentComments)}),secondary:(0,a.jsx)(H.Z,{id:"ui.feedObject.activitiesMenu.recentCommentsDesc",defaultMessage:"ui.feedObject.activitiesMenu.recentCommentsDesc"})})})),(0,a.jsx)(pt.Z,Object.assign({selected:n===F.F.FIRST_COMMENTS,onClick:C(F.F.FIRST_COMMENTS)},{children:(0,a.jsx)(re.Z,{primary:(0,a.jsx)("b",{children:O.formatMessage(mt.firstComments)}),secondary:(0,a.jsx)(H.Z,{id:"ui.feedObject.activitiesMenu.firstCommentsDesc",defaultMessage:"ui.feedObject.activitiesMenu.firstCommentsDesc"})})})),p.user&&(0,a.jsx)(pt.Z,Object.assign({selected:n===F.F.CONNECTIONS_COMMENTS,onClick:C(F.F.CONNECTIONS_COMMENTS)},{children:(0,a.jsx)(re.Z,{primary:(0,a.jsx)("b",{children:f?O.formatMessage(mt.followedComments):O.formatMessage(mt.connectionsComments)}),secondary:f?(0,a.jsx)(H.Z,{id:"ui.feedObject.activitiesMenu.followedCommentsDesc",defaultMessage:"ui.feedObject.activitiesMenu.followedCommentsDesc"}):(0,a.jsx)(H.Z,{id:"ui.feedObject.activitiesMenu.connectionsCommentsDesc",defaultMessage:"ui.feedObject.activitiesMenu.connectionsCommentsDesc"})})}))]})}return(0,a.jsxs)(gt,Object.assign({className:E()(ht.root,t)},l,{children:[(0,a.jsx)(d.Z,Object.assign({className:ht.selector},{children:(0,a.jsx)(h.Z,Object.assign({title:(0,a.jsx)(H.Z,{id:"ui.feedObject.activitiesMenu.tooltipTitle",defaultMessage:"ui.feedObject.activitiesMenu.tooltipTitle"})},{children:(0,a.jsxs)(c.Z,Object.assign({variant:"text",size:"small",onClick:x},{children:[n===F.F.CONNECTIONS_COMMENTS&&f?O.formatMessage(mt.followedComments):O.formatMessage(mt[`${(0,ge.eV)(n)}`]),"\xa0 ",(0,a.jsx)(M.Z,{children:"expand_more"})]}))}))})),g?(0,a.jsx)(ce.Z,Object.assign({open:j,onClose:y,onOpen:x,anchor:"bottom",disableSwipeToOpen:!0},{children:Z()})):(0,a.jsx)(le.Z,Object.assign({anchorEl:b,open:j,onClose:y,onClick:y,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"}},{children:Z()}))]}))};var bt=n(9774),vt=n(12132),jt=n(42879);const Ot=(0,P.vU)({comment:{id:"ui.feedObject.relevantActivities.comment",defaultMessage:"ui.feedObject.relevantActivities.comment"}}),xt={root:`${N.B}-activity-comment-root`,avatar:`${N.B}-activity-comment-avatar`,username:`${N.B}-activity-comment-username`,showMoreContent:`${N.B}-activity-comment-show-more-content`},yt=(0,s.ZP)(ct.Z,{name:N.B,slot:"ActivityCommentRoot"})((()=>({})));const Ct=function(e){const{className:t=null,activityObject:n=null}=e,s=(0,o._T)(e,["className","activityObject"]),r=(0,R.sy)(),[l,c]=(0,i.useState)(!1),d=(0,k.Z)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(yt,Object.assign({},s,{className:E()(xt.root,t),image:(0,a.jsx)(D.Z,Object.assign({},!n.author.deleted&&{to:r.url(vt.USER_PROFILE_ROUTE_NAME,n.author)},{onClick:n.author.deleted?()=>c(!0):null},{children:(0,a.jsx)(m.Z,{alt:n.author.username,variant:"circular",src:n.author.avatar,className:xt.avatar})})),primary:(0,a.jsx)(a.Fragment,{children:d.formatMessage(Ot.comment,{username:(0,a.jsx)(D.Z,Object.assign({},!n.author.deleted&&{to:r.url(vt.USER_PROFILE_ROUTE_NAME,n.author)},{onClick:n.author.deleted?()=>c(!0):null,className:xt.username},{children:n.author.username})),link:(...e)=>(0,a.jsx)(D.Z,Object.assign({to:r.url(vt.COMMENT_ROUTE_NAME,(0,L.p3)(n.comment))},{children:e}))})}),secondary:(0,a.jsx)(j.Z,{date:n.active_at})})),l&&(0,a.jsx)(jt.Z,{open:l,handleClose:()=>c(!1)})]})},Zt=(0,P.vU)({vote:{id:"ui.feedObject.relevantActivities.vote",defaultMessage:"ui.feedObject.relevantActivities.vote"}}),Et={root:`${N.B}-activity-vote-up-root`,avatar:`${N.B}-activity-vote-up-avatar`,username:`${N.B}-activity-vote-up-username`},wt=(0,s.ZP)(ct.Z,{name:N.B,slot:"ActivityVoteUpRoot"})((()=>({})));const _t=function(e){const{className:t=null,activityObject:n=null}=e,s=(0,o._T)(e,["className","activityObject"]),r=(0,R.sy)(),[l,c]=(0,i.useState)(!1),d=(0,k.Z)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(wt,Object.assign({},s,{className:E()(Et.root,t),image:(0,a.jsx)(D.Z,Object.assign({},!n.author.deleted&&{to:r.url(vt.USER_PROFILE_ROUTE_NAME,n.author)},{onClick:n.author.deleted?()=>c(!0):null},{children:(0,a.jsx)(m.Z,{alt:n.author.username,variant:"circular",src:n.author.avatar,className:Et.avatar})})),primary:(0,a.jsx)(a.Fragment,{children:d.formatMessage(Zt.vote,{username:(0,a.jsx)(D.Z,Object.assign({},!n.author.deleted&&{to:r.url(vt.USER_PROFILE_ROUTE_NAME,n.author)},{className:Et.username,onClick:n.author.deleted?()=>c(!0):null},{children:n.author.username}))})}),secondary:(0,a.jsx)(j.Z,{date:n.active_at})})),l&&(0,a.jsx)(jt.Z,{open:l,handleClose:()=>c(!1)})]})},Nt=(0,P.vU)({follow:{id:"ui.feedObject.relevantActivities.follow",defaultMessage:"ui.feedObject.relevantActivities.follow"}}),St={root:`${N.B}-activity-follow-root`,avatar:`${N.B}-activity-follow-avatar`,username:`${N.B}-activity-follow-username`},Tt=(0,s.ZP)(ct.Z,{name:N.B,slot:"ActivityFollowRoot"})((()=>({})));const At=function(e){const t=(0,lt.Z)({props:e,name:N.B}),{className:n=null,activityObject:s=null}=t,r=(0,o._T)(t,["className","activityObject"]),l=(0,R.sy)(),[c,d]=(0,i.useState)(!1),u=(0,k.Z)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Tt,Object.assign({},r,{className:E()(St.root,n),image:(0,a.jsx)(D.Z,Object.assign({},!s.author.deleted&&{to:l.url(vt.USER_PROFILE_ROUTE_NAME,s.author)},{onClick:s.author.deleted?()=>d(!0):null},{children:(0,a.jsx)(m.Z,{alt:s.author.username,variant:"circular",src:s.author.avatar,className:St.avatar})})),primary:(0,a.jsx)(a.Fragment,{children:u.formatMessage(Nt.follow,{username:(0,a.jsx)(D.Z,Object.assign({},!s.author.deleted&&{to:l.url(vt.USER_PROFILE_ROUTE_NAME,s.author)},{onClick:s.author.deleted?()=>d(!0):null,className:St.username},{children:s.author.username}))})}),secondary:(0,a.jsx)(j.Z,{date:s.active_at})})),c&&(0,a.jsx)(jt.Z,{open:c,handleClose:()=>d(!1)})]})},Pt=(0,P.vU)({pollVote:{id:"ui.feedObject.relevantActivities.pollVote",defaultMessage:"ui.feedObject.relevantActivities.pollVote"}}),kt={root:`${N.B}-activity-poll-vote-root`,avatar:`${N.B}-activity-poll-vote-avatar`,username:`${N.B}-activity-poll-vote-username`},Mt=(0,s.ZP)(ct.Z,{name:N.B,slot:"ActivityPollVoteRoot"})((()=>({})));const It=function(e){const{className:t=null,activityObject:n=null}=e,s=(0,o._T)(e,["className","activityObject"]),r=(0,R.sy)(),[l,c]=(0,i.useState)(!1),d=(0,k.Z)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Mt,Object.assign({},s,{className:E()(kt.root,t),image:(0,a.jsx)(D.Z,Object.assign({},!n.author.deleted&&{to:r.url(vt.USER_PROFILE_ROUTE_NAME,n.author)},{onClick:n.author.deleted?()=>c(!0):null},{children:(0,a.jsx)(m.Z,{alt:n.author.username,variant:"circular",src:n.author.avatar,className:kt.avatar})})),primary:(0,a.jsx)(a.Fragment,{children:d.formatMessage(Pt.pollVote,{username:(0,a.jsx)(D.Z,Object.assign({},!n.author.deleted&&{to:r.url(vt.USER_PROFILE_ROUTE_NAME,n.author)},{onClick:n.author.deleted?()=>c(!0):null,className:kt.username},{children:n.author.username}))})}),secondary:(0,a.jsx)(j.Z,{date:n.active_at})})),l&&(0,a.jsx)(jt.Z,{open:l,handleClose:()=>c(!1)})]})},Rt={root:`${N.B}-relevant-activities-root`,activity:`${N.B}-relevant-activities-activity`},Dt=(0,s.ZP)(d.Z,{name:N.B,slot:"RelevantActivitiesRoot"})((()=>({})));const $t=function(e){const{className:t=null,activities:n=[],showMaxRelevantActivities:s=5}=e,r=(0,o._T)(e,["className","activities","showMaxRelevantActivities"]),[c,d]=(0,i.useState)(!1);function u(e,t){return e.type===bt.f.COMMENT?(0,a.jsx)(Ct,{activityObject:e,elevation:0},t):e.type===bt.f.FOLLOW?(0,a.jsx)(At,{activityObject:e,elevation:0},t):e.type===bt.f.VOTE?(0,a.jsx)(_t,{activityObject:e,elevation:0},t):e.type===bt.f.POLLVOTE?(0,a.jsx)(It,{activityObject:e,elevation:0},t):null}return(0,a.jsx)(Dt,Object.assign({className:E()(Rt.root,t)},r,{children:n.length<=0?(0,a.jsx)(l.Z,Object.assign({variant:"body2"},{children:(0,a.jsx)(H.Z,{id:"ui.feedObject.relevantActivities.noResults",defaultMessage:"ui.feedObject.relevantActivities.noResults"})})):(0,a.jsxs)(W.Z,{children:[n.slice(0,s).map(((e,t)=>(0,a.jsx)(q.ZP,Object.assign({className:Rt.activity},{children:u(e,t)}),t))),!c&&n.length>s&&(0,a.jsxs)(pt.Z,Object.assign({onClick:()=>d((e=>!e))},{children:[(0,a.jsx)(re.Z,{primary:(0,a.jsx)(H.Z,{id:"ui.feedObject.relevantActivities.showOthers",defaultMessage:"ui.feedObject.relevantActivities.showOthers"})}),c?(0,a.jsx)(M.Z,{children:"expand_less"}):(0,a.jsx)(M.Z,{children:"expand_more"})]})),(0,a.jsx)(b.Z,Object.assign({in:c,timeout:"auto",unmountOnExit:!0},{children:n.slice(s).map(((e,t)=>(0,a.jsx)(q.ZP,Object.assign({className:Rt.activity},{children:u(e,t)}),t)))}))]})}))};var Ft=n(47189),Lt=n(97650);const Bt={root:`${N.B}-activities-root`,activities:`${N.B}-activities`},Ut=(0,s.ZP)(d.Z,{name:N.B,slot:"ActivitiesRoot"})((()=>({})));const Vt=function(e){const{id:t=`feed_object_activities_${e.feedObjectId?e.feedObjectId:e.feedObject?e.feedObject.id:""}`,className:n,feedObjectId:s,feedObject:r,feedObjectType:l=$.q.POST,cacheStrategy:c=Le.n2.CACHE_FIRST,CommentsObjectProps:u={},CommentComponentProps:p={variant:"outlined"},feedObjectActivities:m=[],comments:h=[],onSetSelectedActivities:g,activitiesType:f=F.F.RECENT_COMMENTS}=e,b=(0,o._T)(e,["id","className","feedObjectId","feedObject","feedObjectType","cacheStrategy","CommentsObjectProps","CommentComponentProps","feedObjectActivities","comments","onSetSelectedActivities","activitiesType"]),{ref:v,inView:j}=(0,Lt.YD)({triggerOnce:!0}),[O,x]=(0,i.useState)(f),y=(0,Ft.Z)({id:s,feedObject:r,feedObjectType:l,cacheStrategy:c,pageSize:2,orderBy:O===F.F.CONNECTIONS_COMMENTS?dt.p.CONNECTION_DESC:O===F.F.FIRST_COMMENTS?dt.p.ADDED_AT_ASC:dt.p.ADDED_AT_DESC}),C=y.feedObject?y.feedObject.id:null,Z=Math.min(3,y.feedObject?y.feedObject.comment_count:2),w=m&&m.length>0;function _(){y.getNextPage()}return(0,i.useEffect)((()=>{x(f)}),[f]),(0,i.useEffect)((()=>{C&&!y.comments.length&&j&&y.getNextPage()}),[C,j]),(0,a.jsx)(Ut,Object.assign({id:t,className:E()(Bt.root,n)},b,{ref:v},{children:y.feedObject&&(Boolean(y.feedObject.comment_count)||m&&m.length>0||h.length>0||r&&r.comment_count>0)?(0,a.jsxs)(d.Z,Object.assign({className:Bt.activities},w?{}:{style:{minHeight:80*Math.min(Z,r.comment_count)+"px"}},{children:[(0,a.jsx)(ft,{selectedActivities:O,hideRelevantActivitiesItem:!w,onChange:function(e){g(e),x(e)}}),O===F.F.RELEVANCE_ACTIVITIES?(0,a.jsx)($t,{activities:m}):(0,a.jsx)(a.Fragment,{children:(y.feedObject.comment_count>0||h.length>0)&&(0,a.jsx)(ut.Z,Object.assign({feedObject:y.feedObject,comments:y.comments,startComments:h,next:y.next,isLoadingNext:y.isLoadingNext,handleNext:_,totalLoadedComments:y.comments.length+h.length,totalComments:y.feedObject.comment_count,hideAdvertising:!0},u,{cacheStrategy:c,CommentsObjectSkeletonProps:{count:Z},CommentComponentProps:Object.assign(Object.assign(Object.assign(Object.assign({},u.CommentComponentProps?u.CommentComponentProps:{}),{truncateContent:!0}),p),{cacheStrategy:c}),inPlaceLoadMoreContents:!1}))})]})):null}))};var Gt=n(80366),zt=n(68456),Ht=n(55218);var Yt=n(22461),Wt=n(70815),qt=n(26474);const Xt="SCFeedObjectMediaPreview",Kt={root:`${Xt}-root`},Jt=(0,s.ZP)(d.Z,{name:Xt,slot:"Root"})((()=>({}))),Qt=e=>{const t=(0,lt.Z)({props:e,name:Xt}),{className:n,medias:i,mediaObjectTypes:s=[Yt.Z,Wt.Z,qt.Z]}=t,r=(0,o._T)(t,["className","medias","mediaObjectTypes"]),{handleMediaClick:l}={handleMediaClick:e=>{J.Z.request({url:K.Z.MediaClickTracker.url({id:e.id}),method:K.Z.MediaClickTracker.method}).catch((e=>{Q.Y.error(Be.h,e)}))}};return i.length?(0,a.jsx)(Jt,Object.assign({className:E()(n,Kt.root)},r,{children:s.map((e=>{const{displayProps:t={}}=e;return(0,a.jsx)("div",{children:(0,a.jsx)(e.displayComponent,Object.assign({medias:i},t,{onMediaClick:l}))},e.name)}))})):null},en=(0,P.vU)({visibleToAll:{id:"ui.feedObject.visibleToAll",defaultMessage:"ui.feedObject.visibleToAll"},visibleToGroup:{id:"ui.feedObject.visibleToGroup",defaultMessage:"ui.feedObject.visibleToGroup"}}),tn={root:`${N.B}-root`,deleted:`${N.B}-deleted`,header:`${N.B}-header`,category:`${N.B}-category`,event:`${N.B}-event`,group:`${N.B}-group`,avatar:`${N.B}-avatar`,username:`${N.B}-username`,activityAt:`${N.B}-activity-at`,tag:`${N.B}-tag`,location:`${N.B}-location`,content:`${N.B}-content`,showMore:`${N.B}-show-more`,error:`${N.B}-error`,titleSection:`${N.B}-title-section`,title:`${N.B}-title`,textSection:`${N.B}-text-section`,text:`${N.B}-text`,snippet:`${N.B}-snippet`,snippetContent:`${N.B}-snippet-content`,mediasSection:`${N.B}-medias-section`,pollsSection:`${N.B}-polls-section`,infoSection:`${N.B}-info-section`,actionsSection:`${N.B}-actions-section`,replyContent:`${N.B}-reply-content`,activitiesSection:`${N.B}-activities-section`,activitiesContent:`${N.B}-activities-content`,followButton:`${N.B}-follow-button`},nn=(0,s.ZP)(rt.Z,{name:N.B,slot:"Root"})((()=>({})));const on=function(e){var t,n,s,y,C,Z,w,_,S,T,A;const P=(0,lt.Z)({props:e,name:N.B}),{id:B=`feed_object_${P.feedObjectId?P.feedObjectId:P.feedObject?P.feedObject.id:""}`,className:U=null,feedObjectId:V=null,feedObject:G=null,feedObjectType:z=null,feedObjectActivities:Y=null,cacheStrategy:W=Le.n2.CACHE_FIRST,markRead:q=!1,template:X=F.r.PREVIEW,hideFollowAction:te=!1,summaryExpanded:ne=!1,activitiesExpanded:oe=!0,activitiesExpandedType:ae,hideParticipantsPreview:ie=!1,pollVisible:se=!0,FollowButtonProps:re={},FeedObjectSkeletonProps:le={elevation:0},ActionsProps:ce={},CommentObjectReplyComponent:de=Gt.Z,CommentObjectReplyComponentProps:ue={WidgetProps:{variant:"outlined"}},CommentComponentProps:he={variant:"outlined"},CommentObjectSkeletonProps:ge={elevation:0,WidgetProps:{variant:"outlined"}},ContributionActionsMenuProps:be={},FeedObjectMediaPreviewProps:ve={},ActivitiesProps:xe={cacheStrategy:W},PollObjectProps:Ce={elevation:0},ContributorsFeedObjectProps:Ze={},onReply:Ee,onHeightChange:we,onStateChange:_e}=P,Ne=(0,o._T)(P,["id","className","feedObjectId","feedObject","feedObjectType","feedObjectActivities","cacheStrategy","markRead","template","hideFollowAction","summaryExpanded","activitiesExpanded","activitiesExpandedType","hideParticipantsPreview","pollVisible","FollowButtonProps","FeedObjectSkeletonProps","ActionsProps","CommentObjectReplyComponent","CommentObjectReplyComponentProps","CommentComponentProps","CommentObjectSkeletonProps","ContributionActionsMenuProps","FeedObjectMediaPreviewProps","ActivitiesProps","PollObjectProps","ContributorsFeedObjectProps","onReply","onHeightChange","onStateChange"]),Te=(0,fe.RM)(),Ae=(0,R.sy)(),Pe=(0,je.LD)(),{enqueueSnackbar:ke}=(0,me.Ds)(),{obj:Me,setObj:Ie,error:Re}=(0,I.Z)({id:V,feedObject:G,feedObjectType:z,cacheStrategy:W}),De=Me?Me.id:null,[$e,Be]=(0,i.useState)(!1),Ve=()=>Me&&oe&&(Me.comment_count>0||Y&&Y.length>0),[Ge,ze]=(0,i.useState)(!1),[He,Ye]=(0,i.useState)(Ve()),[We,qe]=(0,i.useState)([]),[Xe,Ke]=(0,i.useState)(!1),[Je,Qe]=(0,i.useState)(function(){if(ae)return ae;if(Y&&Y.length>0)return F.F.RELEVANCE_ACTIVITIES;return F.F.RECENT_COMMENTS}()),[at,it]=(0,i.useState)(ne),rt=(0,i.useMemo)((()=>{var e;return(null==Me?void 0:Me.medias.length)&&(null===(e=Me.medias[0].embed)||void 0===e?void 0:e.embed_type)===pe.ej}),[null==Me?void 0:Me.medias]),dt=(0,i.useMemo)((()=>{var e,t,n,o;return te||rt&&!1===(null===(o=null===(n=null===(t=null===(e=null==Me?void 0:Me.medias)||void 0===e?void 0:e[0])||void 0===t?void 0:t.embed)||void 0===n?void 0:n.metadata)||void 0===o?void 0:o.active)}),[te,rt,Me]),ut=(0,k.Z)(),pt=(0,i.useMemo)((()=>e=>{_e&&e&&_e(e),we&&we()}),[_e,we]),mt=e=>{Ie(e),pt()};(0,i.useEffect)((()=>{const e=Ve();Ye(e),pt({activitiesExpanded:e,activitiesExpandedType:Je,cacheStrategy:Le.n2.CACHE_FIRST})}),[De,Je]);const ht=(0,i.useCallback)((e=>{"poll"in Me&&mt(Object.assign({},Me,{poll:Object.assign(Object.assign({},Me.poll),{choices:e})}))}),[Me]),gt=(0,i.useCallback)((e=>{pt({pollVisible:e})}),[se,pt]),ft=(0,i.useCallback)((()=>{it(!at),pt({summaryExpanded:!at})}),[at,pt]),bt=(0,i.useCallback)(((e,t,n)=>{ke(n?(0,a.jsx)(H.Z,{id:"ui.feedObject.flagSent",defaultMessage:"ui.feedObject.flagSent"}):(0,a.jsx)(H.Z,{id:"ui.feedObject.flagRemoved",defaultMessage:"ui.feedObject.flagRemoved"}),{autoHideDuration:3e3})}),[]),Ot=(0,i.useCallback)((()=>{mt(Object.assign({},Me,{deleted:!1}))}),[Me]),xt=(0,i.useCallback)((()=>{mt(Object.assign({},Me,{collapsed:!Me.collapsed}))}),[Me]),yt=(0,i.useCallback)((()=>{mt(Object.assign({},Me,{deleted:!Me.deleted}))}),[Me]),Ct=(0,i.useCallback)((()=>{mt(Object.assign({},Me,{suspended:!Me.suspended})),ke(Me.suspended?(0,a.jsx)(H.Z,{id:"ui.feedObject.notificationsEnabled",defaultMessage:"ui.feedObject.notificationsEnabled"}):(0,a.jsx)(H.Z,{id:"ui.feedObject.notificationsDisabled",defaultMessage:"ui.feedObject.notificationsDisabled"}),{autoHideDuration:3e3})}),[Me]),Zt=(0,i.useCallback)((()=>{ze((e=>!e))}),[Ge]),Et=(0,i.useCallback)((e=>{mt(e),ze(!1)}),[Me,Ge]),wt=(0,i.useCallback)((e=>{mt(Object.assign({},Me,{voted:e.voted,vote_count:e.vote_count,reactions_count:e.reactions_count,reaction:e.reaction}))}),[Me]),_t=(0,i.useCallback)((()=>{if(Pe.user){const e=!He;Ye(e),pt({activitiesExpanded:e})}else Te.settings.handleAnonymousAction()}),[He,Pe.user,pt,Je]),Nt=(0,i.useCallback)((e=>{mt(Object.assign(Object.assign({},Me),{followed:e}))}),[Me]),St=(0,i.useCallback)((()=>{mt(Object.assign(Object.assign({},Me),{comment_count:Math.max(Me.comment_count-1,0)}))}),[Me]),Tt=(0,i.useCallback)((e=>{Qe(e),qe([]),pt({activitiesExpandedType:e})}),[Me,He]),At=(0,i.useMemo)((()=>e=>J.Z.request({url:K.Z.NewComment.url({}),method:K.Z.NewComment.method,data:{[`${Me.type}`]:Me.id,text:e}}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[De]),Pt=e=>{Pe.user?Oe.IT(Pe.user)?ke((0,a.jsx)(H.Z,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3}):(Ke(!0),At(e).then((e=>{const t=e;t.summary_truncated=!1,Je!==F.F.RECENT_COMMENTS?(qe([]),Qe(F.F.RECENT_COMMENTS)):qe([t,...We]),Ke(!1);const n=Object.assign({},Me,{comment_count:Me.comment_count+1});mt(n),Le.ZP.deleteKeysWithPrefix(Ue.NX(Me.id,Me.type)),Ee&&Ee(e),pt({activitiesExpanded:He,activitiesExpandedType:F.F.RECENT_COMMENTS})})).catch((e=>{Q.Y.error(ee.J,e),(0,ot.w)(e,Pe.managers.blockedUsers.isBlocked(Me.author),ke)||ke((0,a.jsx)(H.Z,{id:"ui.common.error.action",defaultMessage:"ui.common.error.action"}),{variant:"error",autoHideDuration:3e3})}))):Te.settings.handleAnonymousAction()},kt=(0,i.useCallback)(((e,t)=>{const n="summary_html"in e?e.summary_html:e.summary,o="summary_truncated"in e?e.summary_truncated:e.html.length>=Ht.zo,i=at||t===F.r.DETAIL?(0,L.P3)(e.html,Ae.url):(0,L.P3)(n,Ae.url);return t===F.r.SHARE?(0,a.jsxs)(D.Z,Object.assign({to:Ae.url((0,L.Ig)(e),(0,L.p3)(e)),className:tn.text},{children:[(0,a.jsx)(l.Z,{component:"span",className:tn.text,variant:"body2",gutterBottom:!0,dangerouslySetInnerHTML:{__html:i}}),!at&&o&&(0,a.jsx)(c.Z,Object.assign({size:"small",variant:"text",color:"inherit",className:tn.showMore,onClick:ft},{children:(0,a.jsx)(H.Z,{id:"ui.feedObject.content.showMore",defaultMessage:"ui.feedObject.content.showMore"})}))]})):t===F.r.DETAIL?(0,a.jsx)(l.Z,{component:"div",gutterBottom:!0,className:tn.text,dangerouslySetInnerHTML:{__html:i}}):(0,a.jsxs)(l.Z,Object.assign({component:"div",gutterBottom:!0,className:tn.text},{children:[(0,a.jsx)(l.Z,{component:"span",dangerouslySetInnerHTML:{__html:i}}),!at&&o&&(0,a.jsx)(c.Z,Object.assign({size:"small",variant:"text",color:"inherit",className:tn.showMore,onClick:ft},{children:(0,a.jsx)(H.Z,{id:"ui.feedObject.content.showMore",defaultMessage:"ui.feedObject.content.showMore"})}))]}))}),[Me,X,at]);let Mt;return Mt=!Me&&Re||(null==Me?void 0:Me.deleted)&&!Pe.user&&!Oe.GJ(Pe.user)&&!Oe.vJ(Pe.user)?(0,a.jsx)(r.Z,Object.assign({className:E()(tn.error,tn.content)},{children:(0,a.jsx)(H.Z,{id:"ui.feedObject.error",defaultMessage:"ui.feedObject.error"})})):X===F.r.PREVIEW||X===F.r.DETAIL||X===F.r.SEARCH?(0,a.jsx)(i.Fragment,{children:Me?(0,a.jsxs)(d.Z,Object.assign({className:E()({[tn.deleted]:Me&&Me.deleted})},{children:[Me.categories.length>0&&(0,a.jsxs)("div",Object.assign({className:tn.category},{children:[(0,a.jsxs)(a.Fragment,{children:[Me.group&&(0,a.jsx)("div",Object.assign({className:tn.group},{children:(0,a.jsx)(u.Z,{color:"secondary",size:"small",icon:(0,a.jsx)(M.Z,{children:"groups"}),component:D.Z,to:Ae.url(vt.GROUP_ROUTE_NAME,Me.group),clickable:!0},Me.group.id)})),Me.event&&(0,a.jsx)("div",Object.assign({className:tn.event},{children:(0,a.jsx)(u.Z,{color:"secondary",size:"small",label:Me.event.name,icon:(0,a.jsx)(M.Z,{children:"CalendarIcon"}),component:D.Z,to:Ae.url(vt.EVENT_ROUTE_NAME,Me.event),clickable:!0},Me.event.id)}))]}),Me.categories.map((e=>(0,a.jsx)(D.Z,Object.assign({to:Ae.url(vt.CATEGORY_ROUTE_NAME,e)},{children:(0,a.jsx)(l.Z,Object.assign({variant:"overline"},{children:e.name}))}),e.id)))]})),Me.group&&!Me.categories.length&&(0,a.jsx)("div",Object.assign({className:tn.group},{children:(0,a.jsx)(u.Z,{color:"secondary",size:"small",icon:(0,a.jsx)(M.Z,{children:"groups"}),label:Me.group.name,component:D.Z,to:Ae.url(vt.GROUP_ROUTE_NAME,Me.group),clickable:!0},Me.group.id)})),Me.event&&!Me.categories.length&&(0,a.jsx)("div",Object.assign({className:tn.event},{children:(0,a.jsx)(u.Z,{color:"secondary",size:"small",icon:(0,a.jsx)(M.Z,{children:"CalendarIcon"}),label:Me.event.name,component:D.Z,to:Ae.url(vt.EVENT_ROUTE_NAME,Me.event),clickable:!0},Me.event.id)})),(0,a.jsx)(p.Z,{className:tn.header,avatar:(0,a.jsx)(D.Z,Object.assign({},!Me.author.deleted&&{to:Ae.url(vt.USER_PROFILE_ROUTE_NAME,Me.author)},{onClick:Me.author.deleted?()=>Be(!0):null},{children:(0,a.jsx)(zt.Z,Object.assign({hide:!Me.author.community_badge},{children:(0,a.jsx)(m.Z,Object.assign({"aria-label":"recipe",src:Me.author.avatar,className:tn.avatar},{children:Me.author.username}))}))})),title:(0,a.jsx)(D.Z,Object.assign({},!Me.author.deleted&&{to:Ae.url(vt.USER_PROFILE_ROUTE_NAME,Me.author)},{onClick:Me.author.deleted?()=>Be(!0):null,className:tn.username},{children:Me.author.username})),subheader:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(D.Z,Object.assign({to:Ae.url((0,L.Ig)(Me),(0,L.p3)(Me)),className:tn.activityAt},{children:(0,a.jsx)(j.Z,{component:"span",date:Me.added_at})})),Me.location&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O.Z,{}),(0,a.jsxs)(d.Z,Object.assign({className:tn.location},{children:[(0,a.jsx)(M.Z,{children:"add_location_alt"}),null===(t=Me.location)||void 0===t?void 0:t.location]}))]}),(0,a.jsx)(O.Z,{}),(0,a.jsx)(d.Z,Object.assign({className:tn.tag},{children:Me.addressing.length>0?(0,a.jsx)(x.Z,{tags:Me.addressing,TagChipProps:{disposable:!1,clickable:!1}}):Me.group?(0,a.jsx)(h.Z,Object.assign({title:`${ut.formatMessage(en.visibleToGroup,{group:Me.group.name})}`},{children:(0,a.jsx)(M.Z,Object.assign({color:"disabled",fontSize:"small"},{children:"groups"}))})):(0,a.jsx)(h.Z,Object.assign({title:`${ut.formatMessage(en.visibleToAll)}`},{children:(0,a.jsx)(M.Z,Object.assign({color:"disabled",fontSize:"small"},{children:"public"}))}))}))]}),action:(0,a.jsx)(nt.Z,Object.assign({feedObject:Me,feedObjectType:z,onEditContribution:Zt,onHideContribution:xt,onDeleteContribution:yt,onRestoreContribution:Ot,onSuspendNotificationContribution:Ct,onFlagContribution:bt},be))}),(0,a.jsxs)(r.Z,Object.assign({classes:{root:tn.content}},{children:[(0,a.jsx)(d.Z,Object.assign({className:tn.titleSection},{children:"title"in Me&&(0,a.jsx)(a.Fragment,{children:X===F.r.DETAIL?(0,a.jsx)(l.Z,Object.assign({variant:"body1",gutterBottom:!0,className:tn.title},{children:Me.title})):(0,a.jsx)(D.Z,Object.assign({to:Ae.url((0,L.Ig)(Me),(0,L.p3)(Me))},{children:(0,a.jsx)(l.Z,Object.assign({variant:"body1",gutterBottom:!0,className:tn.title},{children:Me.title}))}))})})),(0,a.jsx)(d.Z,Object.assign({className:tn.textSection},{children:kt(Me,X)})),(0,a.jsx)(d.Z,Object.assign({className:tn.mediasSection},{children:(0,a.jsx)(Qt,Object.assign({medias:Me.medias},ve))})),(0,a.jsx)(d.Z,Object.assign({className:tn.pollsSection},{children:Me.poll&&(0,a.jsx)(Fe,Object.assign({visible:se||X===F.r.DETAIL||Boolean(Me.type!==$.q.DISCUSSION&&!Me.html&&!Me.medias.length),feedObject:Me,pollObject:Me.poll,onChange:ht,onToggleVisibility:gt},Ce))})),(0,a.jsx)(d.Z,Object.assign({className:tn.infoSection},{children:(0,a.jsxs)(g.Z,Object.assign({direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2},{children:[!ie&&(0,a.jsx)(et,Object.assign({feedObject:Me,feedObjectType:Me.type},Ze,{cacheStrategy:W})),!dt&&(0,a.jsx)(st,Object.assign({feedObject:Me,feedObjectType:Me.type,handleFollow:Nt},re))]}))}))]})),(0,a.jsxs)(f.Z,Object.assign({className:tn.actionsSection},{children:[(0,a.jsx)(Se,Object.assign({feedObjectId:V,feedObjectType:z,feedObject:Me,hideCommentAction:X===F.r.DETAIL||rt&&!(null===(s=null===(n=null==Me?void 0:Me.medias[0].embed)||void 0===n?void 0:n.metadata)||void 0===s?void 0:s.active),handleExpandActivities:X===F.r.PREVIEW?_t:null,hideVoteAction:rt&&!(null===(C=null===(y=null==Me?void 0:Me.medias[0].embed)||void 0===y?void 0:y.metadata)||void 0===C?void 0:C.active),hideShareAction:rt&&!(null===(w=null===(Z=null==Me?void 0:Me.medias[0].embed)||void 0===Z?void 0:Z.metadata)||void 0===w?void 0:w.active),VoteActionProps:{onVoteAction:wt}},ce)),X===F.r.DETAIL&&(!rt||!0===(null===(A=null===(T=null===(S=null===(_=null==Me?void 0:Me.medias)||void 0===_?void 0:_[0])||void 0===S?void 0:S.embed)||void 0===T?void 0:T.metadata)||void 0===A?void 0:A.active))||He&&(0,a.jsx)(d.Z,Object.assign({className:tn.replyContent},{children:(0,a.jsx)(de,Object.assign({id:`reply-feedObject-${Me.id}`,onReply:Pt,editable:!Xe||Boolean(Me)},ue),Number(Xe))}))]})),X===F.r.PREVIEW&&(Me.comment_count>0||Y&&Y.length>0)&&(0,a.jsx)(b.Z,Object.assign({in:He,timeout:"auto",classes:{root:tn.activitiesSection}},{children:(0,a.jsx)(r.Z,Object.assign({className:tn.activitiesContent},{children:(0,a.jsx)(Vt,Object.assign({feedObject:Me,feedObjectActivities:Y,activitiesType:Je,onSetSelectedActivities:Tt,comments:We,CommentsObjectProps:{CommentComponentProps:Object.assign({onDelete:St,truncateContent:!0,CommentsObjectComponentProps:{inPlaceLoadMoreContents:!1}},he),CommentObjectSkeletonProps:ge},cacheStrategy:W},xe),Je)}))})),Ge&&(0,a.jsx)(ye.Z,{open:Ge,feedObject:Me,onClose:Zt,onSuccess:Et,maxWidth:"sm",fullWidth:!0})]})):(0,a.jsx)(v.Z,Object.assign({template:X},le))}):X===F.r.SHARE?(0,a.jsx)(i.Fragment,{children:Me?(0,a.jsxs)(i.Fragment,{children:[Me.categories.length>0&&(0,a.jsxs)("div",Object.assign({className:tn.category},{children:[(0,a.jsxs)(a.Fragment,{children:[Me.group&&(0,a.jsx)("div",Object.assign({className:tn.group},{children:(0,a.jsx)(u.Z,{color:"secondary",size:"small",icon:(0,a.jsx)(M.Z,{children:"groups"}),component:D.Z,to:Ae.url(vt.GROUP_ROUTE_NAME,Me.group),clickable:!0},Me.group.id)})),Me.event&&(0,a.jsx)("div",Object.assign({className:tn.event},{children:(0,a.jsx)(u.Z,{color:"secondary",size:"small",icon:(0,a.jsx)(M.Z,{children:"CalendarIcon"}),component:D.Z,to:Ae.url(vt.EVENT_ROUTE_NAME,Me.event),clickable:!0},Me.event.id)}))]}),Me.categories.map((e=>(0,a.jsx)(D.Z,Object.assign({to:Ae.url(vt.CATEGORY_ROUTE_NAME,e)},{children:(0,a.jsx)(l.Z,Object.assign({variant:"overline"},{children:e.name}))}),e.id)))]})),Me.group&&!Me.categories.length&&(0,a.jsx)("div",Object.assign({className:tn.group},{children:(0,a.jsx)(u.Z,{color:"secondary",size:"small",icon:(0,a.jsx)(M.Z,{children:"groups"}),label:Me.group.name,component:D.Z,to:Ae.url(vt.GROUP_ROUTE_NAME,Me.group),clickable:!0},Me.group.id)})),Me.event&&!Me.categories.length&&(0,a.jsx)("div",Object.assign({className:tn.event},{children:(0,a.jsx)(u.Z,{color:"secondary",size:"small",icon:(0,a.jsx)(M.Z,{children:"groups"}),label:Me.event.name,component:D.Z,to:Ae.url(vt.EVENT_ROUTE_NAME,Me.event),clickable:!0},Me.event.id)})),(0,a.jsx)(p.Z,{classes:{root:tn.header},avatar:(0,a.jsx)(D.Z,Object.assign({},!Me.author.deleted&&{to:Ae.url(vt.USER_PROFILE_ROUTE_NAME,Me.author)},{onClick:Me.author.deleted?()=>Be(!0):null,className:tn.username},{children:(0,a.jsx)(zt.Z,Object.assign({hide:!Me.author.community_badge},{children:(0,a.jsx)(m.Z,Object.assign({"aria-label":"recipe",src:Me.author.avatar,className:tn.avatar},{children:Me.author.username}))}))})),title:(0,a.jsx)(D.Z,Object.assign({},!Me.author.deleted&&{to:Ae.url(vt.USER_PROFILE_ROUTE_NAME,Me.author)},{onClick:Me.author.deleted?()=>Be(!0):null,className:tn.username},{children:Me.author.username})),subheader:(0,a.jsx)(D.Z,Object.assign({to:Ae.url((0,L.Ig)(Me),(0,L.p3)(Me)),className:tn.activityAt},{children:(0,a.jsx)(j.Z,{date:Me.added_at})}))}),(0,a.jsxs)(r.Z,Object.assign({classes:{root:tn.content}},{children:[(0,a.jsx)(d.Z,Object.assign({className:tn.titleSection},{children:"title"in Me&&(0,a.jsx)(D.Z,Object.assign({to:Ae.url((0,L.Ig)(Me),(0,L.p3)(Me))},{children:(0,a.jsx)(l.Z,Object.assign({variant:"body1",gutterBottom:!0,className:tn.title},{children:Me.title}))}))})),(0,a.jsx)(d.Z,Object.assign({className:tn.textSection},{children:kt(Me,X)})),(0,a.jsx)(d.Z,Object.assign({className:tn.mediasSection},{children:(0,a.jsx)(Qt,Object.assign({medias:Me.medias},ve))})),(0,a.jsx)(d.Z,Object.assign({className:tn.pollsSection},{children:Me.poll&&(0,a.jsx)(Fe,Object.assign({feedObject:Me,pollObject:Me.poll,onChange:ht,visible:Boolean(Me.type!==$.q.DISCUSSION&&!Me.html&&!Me.medias.length)},Ce))}))]}))]}):(0,a.jsx)(v.Z,Object.assign({template:X},le))}):(0,a.jsx)(i.Fragment,{children:Me?(0,a.jsx)(ct.Z,{elevation:0,className:tn.snippet,image:(0,a.jsx)(D.Z,Object.assign({},!Me.author.deleted&&{to:Ae.url(vt.USER_PROFILE_ROUTE_NAME,Me.author)},{onClick:Me.author.deleted?()=>Be(!0):null},{children:(0,a.jsx)(zt.Z,Object.assign({hide:!Me.author.community_badge},{children:(0,a.jsx)(m.Z,{alt:Me.author.username,variant:"circular",src:Me.author.avatar,className:tn.avatar})}))})),primary:(0,a.jsxs)(d.Z,{children:[(0,a.jsx)(D.Z,Object.assign({},!Me.author.deleted&&{to:Ae.url(vt.USER_PROFILE_ROUTE_NAME,Me.author)},{onClick:Me.author.deleted?()=>Be(!0):null,className:tn.username},{children:Me.author.username})),(0,a.jsx)(l.Z,Object.assign({variant:"body2",className:tn.snippetContent},{children:(0,a.jsx)(D.Z,Object.assign({to:Ae.url((0,L.Ig)(Me),(0,L.p3)(Me))},{children:(0,L.cO)(Me)}))}))]}),disableTypography:!0,secondary:(0,a.jsxs)(g.Z,Object.assign({direction:"row",justifyContent:"space-between",spacing:2,alignItems:"center"},{children:[(0,a.jsx)(D.Z,Object.assign({to:Ae.url((0,L.Ig)(Me),(0,L.p3)(Me)),className:tn.activityAt},{children:(0,a.jsx)(j.Z,{component:"span",date:Me.added_at})})),(0,a.jsx)(c.Z,Object.assign({component:D.Z,to:Ae.url((0,L.Ig)(Me),(0,L.p3)(Me)),variant:"text",color:"secondary",size:"small"},{children:(0,a.jsx)(H.Z,{id:"ui.feedObject.comment",defaultMessage:"ui.feedObject.comment"})}))]}))}):(0,a.jsx)(v.Z,Object.assign({},le))}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(nn,Object.assign({id:B,className:E()(tn.root,U,`${N.B}-${X}`)},Ne,{children:[Me&&q&&(0,a.jsx)(tt.Z,{endpoint:K.Z.FeedObjectMarkRead,data:{object:[Me.id]}}),Mt]})),$e&&(0,a.jsx)(jt.Z,{open:$e,handleClose:()=>Be(!1)})]})}},88304:(e,t,n)=>{"use strict";n.d(t,{Z:()=>x});var o=n(97582),a=n(85893),i=n(67294),s=n(44012),r=n(77931),l=n(98456),c=n(6208),d=n(24243),u=n(24085),p=n(90948),m=n(23370),h=n.n(m),g=n(11447),f=n.n(g),b=n(29360);const v="SCLocationAutocomplete",j={root:`${v}-root`},O=(0,p.ZP)(c.Z,{name:v,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({minWidth:120})));const x=function(e){const t=(0,b.Z)({props:e,name:v}),{defaultValue:n=null,disabled:c=!1,onChange:p,TextFieldProps:m={variant:"outlined",label:(0,a.jsx)(s.Z,{id:"ui.locationAutocomplete.label",defaultMessage:"ui.composer.locations.label"})}}=t,g=(0,o._T)(t,["defaultValue","disabled","onChange","TextFieldProps"]),[x,y]=(0,i.useState)(!1),[C,Z]=(0,i.useState)([]),[E,w]=(0,i.useState)(n),[_,N]=(0,i.useState)("");(0,i.useEffect)((()=>{!x&&_.trim().length>0&&((e=0,t=20)=>{d.Z.request({url:u.Z.ComposerLocalitySearch.url(),method:u.Z.ComposerLocalitySearch.method,params:{offset:e,limit:t,search:_.trim()}}).then((e=>{Z(e.data.results)})).then((()=>y(!1)))})()}),[_]),(0,i.useEffect)((()=>{E&&p&&p(E)}),[E]);const S=(0,i.useMemo)((()=>!E||"string"==typeof E||C.find((e=>E.lat===e.lat&&E.lng===e.lng))?C:[...C,{lat:E.lat,lng:E.lng,full_address:E.location}]),[E,C]);return(0,a.jsx)(O,Object.assign({className:j.root,options:S||[],getOptionLabel:e=>(null==e?void 0:e.full_address)||(null==e?void 0:e.location)||"",filterOptions:e=>e,autoComplete:!0,includeInputInList:!0,value:E||null,selectOnFocus:!0,handleHomeEndKeys:!0,disabled:c,noOptionsText:(0,a.jsx)(s.Z,{id:"ui.locationAutocomplete.empty",defaultMessage:"ui.locationAutocomplete.empty"}),onChange:(e,t)=>{w(t?{location:t.full_address,lat:t.lat,lng:t.lng}:null),p&&p(t)},onInputChange:(e,t)=>{N(t)},isOptionEqualToValue:(e,t)=>t.lat===e.lat&&t.lng===e.lng,renderInput:e=>(0,a.jsx)(r.Z,Object.assign({},e,m,{margin:"dense",InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"location",endAdornment:(0,a.jsxs)(i.Fragment,{children:[x?(0,a.jsx)(l.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})})),renderOption:(e,t,{inputValue:n})=>{const o=f()(t.full_address,n),i=h()(t.full_address,o);return(0,a.jsx)("li",Object.assign({},e,{style:{whiteSpace:"break-spaces"}},{children:i.map(((e,t)=>e.highlight?(0,a.jsx)("span",Object.assign({style:{fontWeight:700}},{children:e.text}),t):e.text))}),`${t.lat}_${t.lng}`)}},g))}},55218:(e,t,n)=>{"use strict";n.d(t,{EH:()=>o,qZ:()=>a,zo:()=>i});const o="widget_",a=10,i=150},75256:(e,t,n)=>{"use strict";n.d(t,{Fs:()=>o,Qo:()=>a});const o=[600,600],a=[200,200]},57250:(e,t,n)=>{"use strict";n.d(t,{LP:()=>c,MR:()=>o,OH:()=>l,Rj:()=>s,TC:()=>r,ej:()=>d,iC:()=>a,oP:()=>i});const o="image",a="video",i="doc",s="url",r="share",l="event",c="sc_link",d="sc_shared_event"},37991:(e,t,n)=>{"use strict";n.d(t,{Eg:()=>a,jm:()=>o,nm:()=>i});const o="https://www.facebook.com/sharer.php?u=",a="https://x.com/intent/tweet?url=",i="https://www.linkedin.com/sharing/share-offsite/?url="},63219:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var o=n(85893),a=n(67294),i=n(24243),s=n(1216),r=n(75256);const l=e=>{const{endpoint:t,params:n={},callback:o,data:s=null}=e,r=()=>{i.Z.request({url:t.url(n),method:t.method,data:s}).then((e=>{o&&o(e)})).catch((()=>null))};return(0,a.useEffect)((()=>{let e;if(t)return e=setTimeout(r),()=>{e&&clearTimeout(e)}}),[]),null},c=e=>(0,o.jsx)(s.ZP,Object.assign({once:!0,offset:r.Qo},{children:(0,o.jsx)(l,Object.assign({},e))}))},22461:(e,t,n)=>{"use strict";n.d(t,{Z:()=>te});var o=n(85893),a=n(67294),i=n(90948),s=n(97582),r=n(60773);const l="SCMediaFile";var c=n(57250),d=n(93946),u=n(97265),p=n(67564);const m={root:`${l}-lightbox-root`},h=(0,i.ZP)(r.Z,{name:l,slot:"LightboxRoot"})((()=>({})));function g(e){const{medias:t=[],index:n=0,onClose:i,onIndexChange:r}=e,l=(0,s._T)(e,["medias","index","onClose","onIndexChange"]),g=(0,a.useCallback)(((e,t)=>({src:e.image,width:e.image_width,height:e.image_height,key:t})),[]),f=(0,a.useCallback)((e=>t[e.index].type===c.oP?(0,o.jsx)(d.Z,Object.assign({component:u.Z,to:t[e.index].url,target:"_blank",color:"inherit"},{children:(0,o.jsx)(p.Z,{children:"download"})})):(0,o.jsx)(o.Fragment,{})),[t]);return(0,o.jsx)(h,Object.assign({},l,{className:m.root,images:t.map(g),visible:-1!==n,onClose:i,index:n,onIndexChange:r,toolbarRender:f}))}var f=n(94253),b=n(15861),v=n(86886),j=n(94184),O=n.n(j),x=n(97650);const y=e=>e.type===c.MR||e.type===c.oP,C={displayRoot:`${l}-display-root`,background:`${l}-background`,backgroundPortrait:`${l}-background-portrait`,heightOne:`${l}-height-one`,heightHalfOne:`${l}-height-half-one`,heightTwo:`${l}-height-two`,heightThree:`${l}-height-three`,cover:`${l}-cover`,coverText:`${l}-cover-text`,slide:`${l}-slide`,border:`${l}-border`,gallery:`${l}-gallery`,title:`${l}-title`,iconFile:`${l}-icon-file`},Z=(0,i.ZP)(f.Z,{name:l,slot:"DisplayRoot"})((({theme:e})=>({})));var E=n(44652),w=n(25464),_=n(98619),N=n(18972),S=n(2734),T=n(37292),A=n(97212),P=n(98456),k=n(78462),M=n(62254),I=n(44012),R=n(63862),D=n(41567),$=n(24085),F=n(99626);const L=(e,t)=>{const n=(n,i)=>{const{showFileUpload:r,getInternalFileInput:l}=(0,F.uO)(),{id:c,className:d,text:u,children:p,extraProps:m,onClick:h}=n,g=(0,s._T)(n,["id","className","text","children","extraProps","onClick"]),f=(0,a.useRef)();f.current=g;const b=(0,a.useCallback)((e=>{const n=l();n.current.accept=t.accept,t.capture?n.current.capture=t.capture:n.current.removeAttribute("capture"),r(f.current),null==h||h(e)}),[l,r,f,h]);return(0,o.jsx)(e,Object.assign({ref:i,onClick:b,id:c,className:d,children:p||u||"Upload"},m))};return(0,F.zD)(n),(0,a.forwardRef)(n)};var B=n(20377);const U={triggerRoot:`${l}-trigger-root`,triggerDrawerRoot:`${l}-trigger-drawer-root`,triggerMenuRoot:`${l}-trigger-menu-root`,paper:`${l}-paper`,item:`${l}-item`},V=(0,i.ZP)(d.Z,{name:l,slot:"TriggerRoot"})((()=>({}))),G=(0,i.ZP)(E.Z,{name:l,slot:"TriggerDrawerRoot"})((()=>({}))),z=(0,i.ZP)(w.Z,{name:l,slot:"TriggerMenuRoot"})((()=>({}))),H=L((0,a.forwardRef)(((e,t)=>(0,o.jsx)(_.Z,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:"image/*",capture:"camera"}),Y=L((0,a.forwardRef)(((e,t)=>(0,o.jsx)(_.Z,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:"image/*"}),W=L((0,a.forwardRef)(((e,t)=>(0,o.jsx)(_.Z,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:"application/pdf"}),q=L((0,a.forwardRef)(((e,t)=>(0,o.jsx)(N.Z,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:"image/*"}),X=L((0,a.forwardRef)(((e,t)=>(0,o.jsx)(N.Z,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:"application/pdf"});var K=n(16941);const J={previewRoot:`${l}-preview-root`,media:`${l}-media`,delete:`${l}-delete`,title:`${l}-title`},Q=(0,i.ZP)(f.Z,{name:l,slot:"PreviewRoot"})((()=>({}))),ee="file_sort",te={name:"file",displayComponent:e=>{const{className:t="",medias:n=[],maxVisible:i=5,gallery:s=!0,onMediaClick:r=null}=e,[l,c]=(0,a.useState)(-1),{ref:d,inView:u}=(0,x.YD)({triggerOnce:!1}),m=(0,a.useMemo)((()=>n.filter(y)),[n]),h=(e,t=!1)=>{if("object"==typeof e){const n=e.image_thumbnail?e.image_thumbnail.url:e.image?e.image:"/static/frontend_v2/images/image.svg";return t&&e.image?e.image:n}return e},f=(0,a.useCallback)((e=>{!1!==s&&(c(e),r(m[e]))}),[m]),j=e=>{if(!e)return null;let t=null;if(e.type)if("doc"===e.type)t=(0,o.jsx)(p.Z,Object.assign({className:C.iconFile},{children:"picture_as_pdf"}));else t=(0,o.jsx)(p.Z,Object.assign({className:C.iconFile},{children:"insert_drive_file"}));return(0,o.jsx)(a.Fragment,{children:e.title&&(0,o.jsx)("div",Object.assign({className:C.title},{children:(0,o.jsxs)(b.Z,Object.assign({variant:"subtitle2"},{children:[t," ",e.title]}))}))})},E=e=>s?[(0,o.jsx)("div",{className:O()(C.cover,C.slide)},`cover-${e}`),(0,o.jsx)("div",Object.assign({className:O()(C.coverText,C.slide,"animate-text"),style:{fontSize:"100%"}},{children:(0,o.jsx)(p.Z,{children:"zoom_out_map"})}),`cover-text-${e}`)]:null,w=e=>{const t=m.length-(i&&i>5?5:i);return[e&&(0,o.jsx)("div",{className:C.cover},"count"),e&&(0,o.jsx)("div",Object.assign({className:C.coverText,style:{fontSize:"200%"}},{children:(0,o.jsxs)("p",{children:["+",t]})}),"count-sub")]},_=[...m];return i&&m.length>i&&(_.length=i),0===m.length?null:(0,o.jsxs)(Z,Object.assign({className:O()(C.displayRoot,t)},{children:[[1,3,4].includes(_.length)&&(()=>{const e=m.length>i&&1==i?w(!0):E(0),t=!!m[0].image_mimetype&&m[0].image_mimetype.includes("image/gif"),n=m[0].image_height<m[0].image_width;return(0,o.jsx)(v.ZP,Object.assign({container:!0,style:Object.assign({},m[0].image_thumbnail&&m[0].image_thumbnail.color?{backgroundColor:m[0].image_thumbnail.color}:{})},{children:(0,o.jsxs)(v.ZP,Object.assign({item:!0,ref:d,xs:12,classes:{root:O()(C.border,C.heightOne,Object.assign(Object.assign({},t||n?{[C.background]:!0}:{[C.backgroundPortrait]:!0}),{[C.gallery]:s,[C.heightHalfOne]:m.length>1}))},onClick:()=>f(0),style:Object.assign({background:`url(${h(m[0],u&&t)})`},n?{paddingTop:100*m[0].image_height/m[0].image_width+"%"}:{})},{children:[e,j(m[0])]}))}))})(),_.length>=2&&4!=_.length&&(()=>{const e=m.length>i&&[2,3].includes(+i)?w(!0):E(1),t=[3,4].includes(m.length)||m.length>+i&&[3,4].includes(+i);return(0,o.jsxs)(v.ZP,Object.assign({container:!0},{children:[(0,o.jsxs)(v.ZP,Object.assign({item:!0,xs:6,classes:{root:O()(C.border,C.heightTwo,C.background,{[C.gallery]:s})},onClick:()=>f(t?1:0),style:{background:`url(${h(t?m[1]:m[0])})`}},{children:[E(t?1:0),j(m[0])]})),(0,o.jsxs)(v.ZP,Object.assign({item:!0,xs:6,classes:{root:O()(C.border,C.heightTwo,C.background,{[C.gallery]:s})},onClick:()=>f(t?2:1),style:{background:`url(${h(t?m[2]:m[1])})`}},{children:[e,j(m[1])]}))]}))})(),_.length>=4&&(()=>{const e=4==m.length||m.length>+i&&4==+i,t=!i||i>5||m.length>i&&[4,5].includes(+i)?w(!0):E(e?3:4);return(0,o.jsxs)(v.ZP,Object.assign({container:!0},{children:[(0,o.jsxs)(v.ZP,Object.assign({item:!0,xs:4,md:4,classes:{root:O()(C.border,C.heightThree,C.background,{[C.gallery]:s})},onClick:()=>f(e?1:2),style:{background:`url(${h(e?m[1]:m[2])})`}},{children:[E(e?1:2),j(m[1])]})),(0,o.jsxs)(v.ZP,Object.assign({item:!0,xs:4,md:4,classes:{root:O()(C.border,C.heightThree,C.background,{[C.gallery]:s})},onClick:()=>f(e?2:3),style:{background:`url(${h(e?m[2]:m[3])})`}},{children:[E(e?2:3),j(m[2])]})),(0,o.jsxs)(v.ZP,Object.assign({item:!0,xs:4,md:4,classes:{root:O()(C.border,C.heightThree,C.background,{[C.gallery]:s})},onClick:()=>f(e?3:4),style:{background:`url(${h(e?m[3]:m[4])})`}},{children:[t,j(m[3])]}))]}))})(),-1!==l&&(0,o.jsx)(g,{onClose:()=>{c(-1)},index:l,medias:m})]}))},triggerButton:e=>{var{className:t,onAdd:n=null}=e,i=(0,s._T)(e,["className","onAdd"]);const[r,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(!1),u=(0,M.RM)(),m=(0,S.Z)(),h=(0,T.Z)(m.breakpoints.down("md")),{enqueueSnackbar:g,closeSnackbar:f}=(0,B.Ds)(),b=(0,a.useCallback)((e=>{l(e.currentTarget)}),[]),v=(0,a.useCallback)((()=>{l(null)}),[]),j=(0,a.useCallback)((e=>e.type.startsWith("image/")||"application/pdf"===e.type),[]),x=(0,a.useCallback)((e=>{n&&n(e)}),[n]),y=(0,a.useCallback)((e=>{d(Object.keys(e).length>0)}),[]),C=(0,a.useCallback)(((e,t)=>{const n=g(`${e.name}: ${t}`,{variant:"error",anchorOrigin:{horizontal:"center",vertical:"top"},autoHideDuration:2e3,SnackbarProps:{onClick:()=>{f(n)}}})}),[g]),Z=(0,a.useMemo)((()=>h?[(0,o.jsx)(A.ZP,Object.assign({className:U.item},{children:(0,o.jsx)(H,Object.assign({inputFieldName:"image"},{children:(0,o.jsx)(I.Z,{id:"ui.composer.media.file.photo",defaultMessage:"ui.composer.media.file.photo"})}))}),"photo"),(0,o.jsx)(A.ZP,Object.assign({className:U.item},{children:(0,o.jsx)(Y,Object.assign({inputFieldName:"image"},{children:(0,o.jsx)(I.Z,{id:"ui.composer.media.file.gallery",defaultMessage:"ui.composer.media.file.gallery"})}))}),"gallery"),(0,o.jsx)(A.ZP,Object.assign({className:U.item},{children:(0,o.jsx)(W,Object.assign({inputFieldName:"document"},{children:(0,o.jsx)(I.Z,{id:"ui.composer.media.file.document",defaultMessage:"ui.composer.media.file.document"})}))}),"document")]:[(0,o.jsx)(q,Object.assign({extraProps:{className:U.item},inputFieldName:"image"},{children:(0,o.jsx)(I.Z,{id:"ui.composer.media.file.gallery",defaultMessage:"ui.composer.media.file.gallery"})}),"gallery"),(0,o.jsx)(X,Object.assign({extraProps:{className:U.item},inputFieldName:"document"},{children:(0,o.jsx)(I.Z,{id:"ui.composer.media.file.document",defaultMessage:"ui.composer.media.file.document"})}),"document")]),[h,j,x,y,C]);return(0,o.jsxs)(D.ZP,Object.assign({destination:{url:`${u.settings.portal}${$.Z.ComposerChunkUploadMedia.url()}`,method:$.Z.ComposerChunkUploadMedia.method},fileFilter:j,chunkSize:204800,multiple:!0},{children:[(0,o.jsx)(R.Z,{onSuccess:x,onProgress:y,onError:C}),(0,o.jsx)(V,Object.assign({className:O()(t,U.triggerRoot)},i,{"aria-label":"add media",disabled:c,onClick:b},{children:c?(0,o.jsx)(P.Z,{size:20}):(0,o.jsx)(p.Z,{children:"photo_file"})})),h?(0,o.jsx)(G,Object.assign({onClick:()=>l(null),className:U.triggerDrawerRoot,anchor:"bottom",open:Boolean(r),onClose:v,onOpen:b,PaperProps:{className:U.paper},disableSwipeToOpen:!0},{children:(0,o.jsx)(k.Z,{children:Z})})):(0,o.jsx)(z,Object.assign({onClick:()=>l(null),className:U.triggerMenuRoot,anchorEl:r,open:Boolean(r),onClose:v,PaperProps:{className:U.paper}},{children:Z}))]}))},layerComponent:null,previewComponent:a.forwardRef(((e,t)=>{const{className:n,onChange:i,value:r=[]}=e,l=(0,s._T)(e,["className","onChange","value"]),u=(0,S.Z)(),m=(0,T.Z)(u.breakpoints.down("md")),h=(0,a.useMemo)((()=>r.filter(y)),[r]);(0,a.useEffect)((()=>{if(void 0===typeof document)return null;const e=document.getElementById(ee);e&&(e.scrollLeft=e.scrollWidth)}),[h]);const g=(0,a.useCallback)((e=>{i&&i([...r.filter((t=>-1===e.findIndex((e=>e.id===t.id)))),...e])}),[i,r]),v=(0,a.useCallback)((e=>()=>i&&i(r.filter((t=>t.id!==e)))),[i,r]),j=(0,a.useMemo)((()=>h.map((e=>(0,o.jsxs)(f.Z,Object.assign({className:J.media,sx:{backgroundImage:`url(${(null==e?void 0:e.image_thumbnail)?e.image_thumbnail.url:e.image})`}},{children:[(0,o.jsx)(d.Z,Object.assign({className:J.delete,onClick:v(e.id),size:"small"},{children:(0,o.jsx)(p.Z,{children:"delete"})})),e.title&&(0,o.jsxs)(b.Z,Object.assign({className:J.title},{children:[e.type===c.oP&&(0,o.jsx)(p.Z,{children:"picture_as_pdf"}),e.title]}))]}),e.id)))),[h]);return(0,o.jsx)(Q,Object.assign({ref:t,className:O()(n,J.previewRoot)},l,{children:h.length>0&&(m?(0,o.jsx)(f.Z,Object.assign({id:ee},{children:j})):(0,o.jsx)(K.ReactSortable,Object.assign({id:ee,list:h,setList:g},{children:j})))}))})),filter:y}},70815:(e,t,n)=>{"use strict";n.d(t,{Z:()=>H});var o=n(97582),a=n(85893),i=n(67294),s=n(90948),r=n(1216),l=n(57250),c=n(67742),d=n(94253),u=n(75256),p=n(88078),m=n(94184),h=n.n(m);const g="SCMediaLink";var f=n(98456);const b=e=>e.type===l.Rj&&e.embed&&e.embed.embed_type===l.LP,v={displayRoot:`${g}-display-root`,displayLink:`${g}-link`,displayHtmlWrap:`${g}-html-wrap`,displayHtml:`${g}-html`,displayHtmlPlaceholder:`${g}-html-placeholder`,displayHtmlLoading:`${g}-html-loading`,displayVideo:`${g}-video`,thumbnail:`${g}-thumbnail`,thumbnailFullWidth:`${g}-thumbnail`,image:`${g}-image`,snippet:`${g}-snippet`,snippetTitle:`${g}-snippet-title`,snippetDescription:`${g}-snippet-description`},j=(0,s.ZP)(d.Z,{name:g,slot:"DisplayRoot"})((({theme:e})=>({}))),O=e=>{const{className:t="",medias:n,fullWidth:s=!1,onMediaClick:m=null}=e,g=(0,o._T)(e,["className","medias","fullWidth","onMediaClick"]),f=e=>{m&&m(e)},O=(0,i.useMemo)((()=>n.filter(b)),[n]),x=(e,t)=>{const n=new URL(e.embed.metadata.url).hostname.replace("www.","");return(0,a.jsxs)(d.Z,Object.assign({className:v.displayLink},{children:[e.embed.metadata.images&&e.embed.metadata.images.length>0&&(0,a.jsx)(a.Fragment,{children:s?(0,a.jsx)(d.Z,{className:h()(v.thumbnailFullWidth,v.image),style:{background:`url(${e.image})`,paddingBottom:100/e.image_width/e.image_height+"%"}}):(0,a.jsx)(d.Z,{className:h()(v.thumbnail,v.image),style:{background:`url(${e.image})`}})}),(0,a.jsxs)(d.Z,Object.assign({className:v.snippet},{children:[(0,a.jsx)("b",Object.assign({className:v.snippetTitle},{children:e.embed.metadata.title})),(0,a.jsx)("br",{}),(0,a.jsx)("p",Object.assign({className:v.snippetDescription},{children:e.embed.metadata.description})),(0,a.jsx)("a",Object.assign({href:e.embed.metadata.url,target:"_blank",onClick:()=>f(e)},{children:n}))]})),(0,a.jsx)("div",{style:{clear:"both"}})]}),t)};return 0===O.length?null:(0,a.jsx)(j,Object.assign({className:h()(t,v.displayRoot)},g,{children:O.map(((e,t)=>e.embed.metadata&&e.embed.metadata.type===l.iC?(0,a.jsx)(r.ZP,Object.assign({className:v.displayVideo,placeholder:(0,a.jsx)(p.Z,{variant:"rectangular",height:360,width:"100%"}),once:!0,offset:u.Fs},{children:(0,a.jsx)(c.Z,{url:e.url,width:"100%",onVideoWatch:()=>f(e)},t)}),t):(0,a.jsx)(i.Fragment,{children:x(e,t)},t)))}))};var x=n(93946),y=n(67564);const C={triggerRoot:`${g}-trigger-root`},Z=(0,s.ZP)(x.Z,{name:g,slot:"TriggerRoot"})((()=>({})));var E=n(44012),w=n(37645),_=n(15861),N=n(25662),S=n(6514),T=n(16941);const A={previewRoot:`${g}-preview-root`,media:`${g}-media`,video:`${g}-media-video`,delete:`${g}-delete`},P=(0,s.ZP)(d.Z,{name:g,slot:"PreviewRoot"})((()=>({}))),k=i.forwardRef(((e,t)=>{const{className:n,onChange:s,value:r=[]}=e,c=(0,o._T)(e,["className","onChange","value"]),u=(0,i.useMemo)((()=>r.filter(b)),[r]),p=(0,i.useCallback)((e=>{s&&s([...r.filter((t=>-1===e.findIndex((e=>e.id===t.id)))),...e])}),[s,r]),m=(0,i.useCallback)((e=>()=>s&&s(r.filter((t=>t.id!==e)))),[s,r]);return(0,a.jsx)(P,Object.assign({ref:t,className:h()(n,A.previewRoot)},c,{children:u.length>0&&(0,a.jsx)(T.ReactSortable,Object.assign({list:u,setList:p},{children:u.map((e=>(0,a.jsxs)(d.Z,Object.assign({className:h()(A.media,{[A.video]:e.embed.metadata&&e.embed.metadata.type===l.iC})},{children:[(0,a.jsx)(O,{medias:[e]}),(0,a.jsx)(x.Z,Object.assign({className:A.delete,onClick:m(e.id),size:"small"},{children:(0,a.jsx)(y.Z,{children:"delete"})}))]}),e.id)))}))}))}));var M=n(87109),I=n(77931),R=n(24243),D=n(24085),$=n(59488),F=n(79991),L=n(16628);const B={url:"",urlError:null},U=e=>{const[t,n]=(0,i.useState)(!1),[s,r]=(0,i.useState)(Object.assign({},B)),{url:c,urlError:d}=s,u=i.useRef(c);u.current=c;const p=i.useRef(null),{helperText:m,error:h,onSuccess:g}=e,b=(0,o._T)(e,["helperText","error","onSuccess"]);(0,i.useEffect)((()=>()=>clearTimeout(p.current)),[]);const v=e=>{e&&(e.preventDefault(),e.stopPropagation()),p.current&&clearTimeout(p.current),n(!0),R.Z.request({url:D.Z.ComposerMediaCreate.url(),method:D.Z.ComposerMediaCreate.method,data:{type:l.Rj,url:u.current}}).then((e=>{r(Object.assign({},B)),g&&g(e.data)})).catch((e=>{const t=(0,$.yt)(e);r({urlError:t.urlError?`urlError.${t.urlError.error}`:t.error,url:u.current})})).then((()=>n(!1)))};return(0,a.jsx)("form",Object.assign({method:"post",onSubmit:v},{children:(0,a.jsx)(I.Z,Object.assign({value:c,type:"url",onChange:e=>{const t=e.target,n=t.value.startsWith("h")?t.value:`https://${t.value}`;r({url:n,urlError:(0,F.jv)(n)?null:"validationError"})},onPaste:e=>{p.current&&clearTimeout(p.current),p.current=setTimeout((()=>{(0,F.jv)(u.current)&&v(e)}),500)},error:h||Boolean(d),helperText:m||d&&(0,a.jsx)(E.Z,{id:`ui.composer.media.link.add.error.${d}`,defaultMessage:`ui.composer.media.link.add.error.${d}`})||(0,a.jsx)(E.Z,{id:"ui.composer.media.link.add.help",defaultMessage:"ui.composer.media.link.add.help"}),disabled:t},b,{InputProps:{endAdornment:(0,a.jsx)(M.Z,Object.assign({position:"end"},{children:(0,a.jsx)(L.Z,Object.assign({in:null===d&&""!==c},{children:(0,a.jsx)(x.Z,Object.assign({size:"small",disabled:t,type:"submit"},{children:t?(0,a.jsx)(f.Z,{color:"primary",size:20}):(0,a.jsx)(E.Z,{id:"ui.composer.media.link.add.submit",defaultMessage:"ui.composer.media.link.add.submit"})}))}))}))}}))}))},V={layerRoot:`${g}-layer-root`,title:`${g}-layer-title`,content:`${g}-layer-content`,media:`${g}-media`,delete:`${g}-delete`},G=(0,s.ZP)(d.Z,{name:g,slot:"LayerRoot"})((()=>({}))),z=i.forwardRef(((e,t)=>{const{className:n,onClose:s,onSave:r,defaultValue:l=[]}=e,c=(0,o._T)(e,["className","onClose","onSave","defaultValue"]),[d,u]=(0,i.useState)(l),p=(0,i.useCallback)((()=>r(d)),[d]),m=(0,i.useCallback)((e=>u([...d,e])),[d]),g=(0,i.useCallback)((e=>u(e)),[]);return(0,a.jsxs)(G,Object.assign({ref:t,className:h()(n,V.layerRoot)},c,{children:[(0,a.jsxs)(w.Z,Object.assign({className:V.title},{children:[(0,a.jsx)(x.Z,Object.assign({onClick:s},{children:(0,a.jsx)(y.Z,{children:"arrow_back"})})),(0,a.jsx)(_.Z,{children:(0,a.jsx)(E.Z,{id:"ui.composer.media.link.layer.title",defaultMessage:"ui.composer.media.link.layer.title"})}),(0,a.jsx)(N.Z,Object.assign({size:"small",color:"secondary",variant:"contained",onClick:p},{children:(0,a.jsx)(E.Z,{id:"ui.composer.layer.save",defaultMessage:"ui.composer.layer.save"})}))]})),(0,a.jsxs)(S.Z,Object.assign({className:V.content},{children:[(0,a.jsx)(U,{id:"page",name:"page",label:(0,a.jsx)(E.Z,{id:"ui.composer.media.link.add.label",defaultMessage:"ui.composer.media.link.add.label"}),fullWidth:!0,variant:"outlined",placeholder:"https://",onSuccess:m}),(0,a.jsx)(k,{onChange:g,value:d})]}))]}))})),H={name:"link",displayComponent:O,triggerButton:e=>{var{className:t}=e,n=(0,o._T)(e,["className"]);return(0,a.jsx)(Z,Object.assign({className:h()(t,C.triggerRoot)},n,{"aria-label":"add link"},{children:(0,a.jsx)(y.Z,{children:"link"})}))},layerComponent:z,previewComponent:k,filter:b}},26474:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var o=n(97582),a=n(85893),i=n(67294),s=n(90948),r=n(94253),l=n(52693),c=n(37024),d=n(59219),u=n(94184),p=n.n(u),m=n(57250);const h=e=>e.type===m.TC||e.type===m.OH,g="SCMediaShare";var f=n(38210),b=n(10523);const v={displayRoot:`${g}-display-root`,sharePreview:`${g}-share-preview`,sharePlaceholder:`${g}-share-placeholder`},j=(0,s.ZP)(r.Z,{name:g,slot:"DisplayRoot"})((({theme:e})=>({}))),O={name:"share",displayComponent:e=>{var{className:t,medias:n=[],onMediaClick:s=null}=e,u=(0,o._T)(e,["className","medias","onMediaClick"]);const g=(0,i.useMemo)((()=>n.filter(h)),[n]);return 0===g.length?null:(0,a.jsx)(j,Object.assign({className:p()(t,v.displayRoot)},u,{children:g.map(((e,t)=>(0,a.jsx)(r.Z,Object.assign({className:v.sharePreview,onClick:s},{children:e.type===m.OH||e.embed&&e.embed.embed_type===m.ej?(0,a.jsx)(b.Z,{event:e.embed.metadata,template:f.Y.DETAIL,variant:"outlined",square:!0,hideEventParticipants:!0,hideEventPlanner:!0,actions:(0,a.jsx)(a.Fragment,{})}):(0,a.jsx)(l.Z,{feedObjectId:e.embed.metadata.id,feedObjectType:e.embed.metadata.type,variant:"outlined",template:c.r.SHARE,cacheStrategy:d.n2.CACHE_FIRST})}),t)))}))},triggerButton:null,layerComponent:null,previewComponent:null,filter:h}},8455:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var o=n(97582),a=n(85893),i=n(87918),s=n(94184),r=n.n(s),l=n(90948);const c="SCTagChip",d={ellipsis:`${c}-ellipsis`},u=(0,l.ZP)(i.Z,{name:c,slot:"Root",overridesResolver:(e,t)=>[t.root]})((({theme:e})=>({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",height:25,[`&.${d.ellipsis}`]:{maxWidth:120}})));function p(e){const{tag:t,clickable:n=!0,disposable:i=!0,label:s=null,ellipsis:l=!1,onClick:c=null,onDelete:p=null,className:m=null}=e,h=(0,o._T)(e,["tag","clickable","disposable","label","ellipsis","onClick","onDelete","className"]);return(0,a.jsx)(u,Object.assign({className:r()(m,{[d.ellipsis]:l}),sx:{backgroundColor:`${t.color}`,color:e=>e.palette.getContrastText(t.color)}},n&&{onClick:()=>{c&&c(t.id)}},i&&{onDelete:()=>{p&&p(t.id)}},{label:s||t.name},h))}},86558:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E,x:()=>Z});var o=n(97582),a=n(85893),i=n(67294),s=n(90948),r=n(7982),l=n(94253),c=n(48542),d=n(15861),u=n(67720),p=n(96514),m=n(90629),h=n(11535),g=n(67564),f=n(8455);const b="SCTags",v=(0,s.ZP)(l.Z,{name:`${b}`,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({cursor:"pointer"}))),j={paper:`${b}-paper`},O=(0,s.ZP)(h.Z,{name:`${b}Popper`,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({zIndex:2,[`& .${j.paper}`]:{padding:"10px 5px"}}))),x=(0,s.ZP)(c.Z,{name:`${b}List`,slot:"Root",overridesResolver:(e,t)=>t.root})({}),y=(0,s.ZP)(c.Z,{name:`${b}Stack`,slot:"Root",overridesResolver:(e,t)=>t.root})({flexWrap:"wrap",justifyContent:"flex-start",alignItems:"flex-start","& > div:not(style)+:not(style)":{margin:0}}),C=(0,s.ZP)(l.Z,{name:`${b}ItemList`,slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({padding:e.spacing(.2),textAlign:"center",color:e.palette.text.secondary})));var Z;function E(e){const{tags:t=[],title:n=null,type:s=Z.POPPER,onOpen:l=null,onClose:c=null,onClickTag:h=null,TagChipProps:b={}}=e,E=(0,o._T)(e,["tags","title","type","onOpen","onClose","onClickTag","TagChipProps"]),[w,_]=(0,i.useState)(!1);let N=(0,i.useRef)(null);function S(){N.current&&N.current.contains(event.target)||(_(!1),E.onClose&&E.onClose())}function T(){return(0,a.jsx)(a.Fragment,{children:n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,Object.assign({sx:{padding:1,fontWeight:600}},{children:n})),(0,a.jsx)(u.Z,{})]})})}const A=(0,i.useRef)(w);return i.useEffect((()=>{!0===A.current&&!1===w&&N.current.focus(),A.current=w}),[w]),(0,a.jsx)(a.Fragment,{children:t.length&&(0,a.jsx)(i.Fragment,{children:s===Z.POPPER?(0,a.jsxs)(v,Object.assign({},E,{children:[(0,a.jsx)(g.Z,Object.assign({ref:N,fontSize:"small",onClick:function(){_((e=>!e)),E.onOpen&&E.onOpen(!w)},"aria-haspopup":"true"},{children:"label"})),(0,a.jsx)(O,Object.assign({open:w,anchorEl:N.current,transition:!0,placement:"bottom-start",modifiers:[{name:"preventOverflow",enabled:!0}]},{children:e=>{var{TransitionProps:n,placement:i}=e,s=(0,o._T)(e,["TransitionProps","placement"]);return(0,a.jsx)(p.Z,Object.assign({},n,{style:{transformOrigin:"bottom"===i?"center top":"center bottom"}},{children:(0,a.jsx)(m.Z,Object.assign({variant:"outlined",className:j.paper},{children:(0,a.jsx)(r.d,Object.assign({onClickAway:S},{children:(0,a.jsxs)(a.Fragment,{children:[T(),(0,a.jsx)(y,Object.assign({spacing:2},s,{children:t.map((e=>(0,a.jsx)(C,{children:(0,a.jsx)(f.Z,Object.assign({tag:e,onClick:h},b))},e.id)))}))]})}))}))}))}}))]})):(0,a.jsxs)(x,{children:[T(),(0,a.jsx)(y,Object.assign({spacing:1,direction:E.direction?E.direction:"column"},{children:t.map((e=>(0,a.jsx)(C,{children:(0,a.jsx)(f.Z,Object.assign({tag:e,onClick:h},b))},e.id)))}))]})})})}!function(e){e.LIST="list",e.POPPER="popper"}(Z||(Z={}))},37024:(e,t,n)=>{"use strict";var o,a;n.d(t,{F:()=>a,r:()=>o}),function(e){e.SNIPPET="snippet",e.PREVIEW="preview",e.DETAIL="detail",e.SEARCH="search",e.SHARE="share"}(o||(o={})),function(e){e.RELEVANCE_ACTIVITIES="relevant_activities",e.RECENT_COMMENTS="recent_comments",e.FIRST_COMMENTS="first_comments",e.CONNECTIONS_COMMENTS="connections_comments"}(a||(a={}))},9774:(e,t,n)=>{"use strict";var o,a;n.d(t,{a:()=>o,f:()=>a}),function(e){e.HOME="home",e.EXPLORE="explore",e.CATEGORY="category",e.GROUP="group",e.EVENT="event"}(o||(o={})),function(e){e.COMMENT="comment",e.VOTE="vote",e.POLLVOTE="pollvote",e.FOLLOW="follow"}(a||(a={}))},11447:function(e){var t,n;e.exports=(t={772:(e,t,n)=>{const o=n(826).remove,a=/[.*+?^${}()|[\]\\]/g,i=/[a-z0-9_]/i,s=/\s+/;e.exports=function(e,t,n){var r,l;l={insideWords:!1,findAllOccurrences:!1,requireMatchAll:!1},r=(r=n)||{},Object.keys(r).forEach((e=>{l[e]=!!r[e]})),n=l;const c=Array.from(e).map((e=>o(e)));let d=c.join("");return(t=o(t)).trim().split(s).filter((e=>e.length>0)).reduce(((e,t)=>{const o=t.length,s=!n.insideWords&&i.test(t[0])?"\\b":"",r=new RegExp(s+t.replace(a,"\\$&"),"i");let l,u;if(l=r.exec(d),n.requireMatchAll&&null===l)return d="",[];for(;l;){u=l.index;const t=o-c.slice(u,u+o).join("").length,a=u-c.slice(0,u).join("").length,i=[u+a,u+o+a+t];if(i[0]!==i[1]&&e.push(i),d=d.slice(0,u)+new Array(o+1).join(" ")+d.slice(u+o),!n.findAllOccurrences)break;l=r.exec(d)}return e}),[]).sort(((e,t)=>e[0]-t[0]))}},826:e=>{var t={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\u1ea4":"A","\u1eae":"A","\u1eb2":"A","\u1eb4":"A","\u1eb6":"A","\xc6":"AE","\u1ea6":"A","\u1eb0":"A","\u0202":"A","\xc7":"C","\u1e08":"C","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\u1ebe":"E","\u1e16":"E","\u1ec0":"E","\u1e14":"E","\u1e1c":"E","\u0206":"E","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\u1e2e":"I","\u020a":"I","\xd0":"D","\xd1":"N","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\u1ed0":"O","\u1e4c":"O","\u1e52":"O","\u020e":"O","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xdd":"Y","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\u1ea5":"a","\u1eaf":"a","\u1eb3":"a","\u1eb5":"a","\u1eb7":"a","\xe6":"ae","\u1ea7":"a","\u1eb1":"a","\u0203":"a","\xe7":"c","\u1e09":"c","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\u1ebf":"e","\u1e17":"e","\u1ec1":"e","\u1e15":"e","\u1e1d":"e","\u0207":"e","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\u1e2f":"i","\u020b":"i","\xf0":"d","\xf1":"n","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\u1ed1":"o","\u1e4d":"o","\u1e53":"o","\u020f":"o","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xfd":"y","\xff":"y","\u0100":"A","\u0101":"a","\u0102":"A","\u0103":"a","\u0104":"A","\u0105":"a","\u0106":"C","\u0107":"c","\u0108":"C","\u0109":"c","\u010a":"C","\u010b":"c","\u010c":"C","\u010d":"c","C\u0306":"C","c\u0306":"c","\u010e":"D","\u010f":"d","\u0110":"D","\u0111":"d","\u0112":"E","\u0113":"e","\u0114":"E","\u0115":"e","\u0116":"E","\u0117":"e","\u0118":"E","\u0119":"e","\u011a":"E","\u011b":"e","\u011c":"G","\u01f4":"G","\u011d":"g","\u01f5":"g","\u011e":"G","\u011f":"g","\u0120":"G","\u0121":"g","\u0122":"G","\u0123":"g","\u0124":"H","\u0125":"h","\u0126":"H","\u0127":"h","\u1e2a":"H","\u1e2b":"h","\u0128":"I","\u0129":"i","\u012a":"I","\u012b":"i","\u012c":"I","\u012d":"i","\u012e":"I","\u012f":"i","\u0130":"I","\u0131":"i","\u0132":"IJ","\u0133":"ij","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u1e30":"K","\u1e31":"k","K\u0306":"K","k\u0306":"k","\u0139":"L","\u013a":"l","\u013b":"L","\u013c":"l","\u013d":"L","\u013e":"l","\u013f":"L","\u0140":"l","\u0141":"l","\u0142":"l","\u1e3e":"M","\u1e3f":"m","M\u0306":"M","m\u0306":"m","\u0143":"N","\u0144":"n","\u0145":"N","\u0146":"n","\u0147":"N","\u0148":"n","\u0149":"n","N\u0306":"N","n\u0306":"n","\u014c":"O","\u014d":"o","\u014e":"O","\u014f":"o","\u0150":"O","\u0151":"o","\u0152":"OE","\u0153":"oe","P\u0306":"P","p\u0306":"p","\u0154":"R","\u0155":"r","\u0156":"R","\u0157":"r","\u0158":"R","\u0159":"r","R\u0306":"R","r\u0306":"r","\u0212":"R","\u0213":"r","\u015a":"S","\u015b":"s","\u015c":"S","\u015d":"s","\u015e":"S","\u0218":"S","\u0219":"s","\u015f":"s","\u0160":"S","\u0161":"s","\u0162":"T","\u0163":"t","\u021b":"t","\u021a":"T","\u0164":"T","\u0165":"t","\u0166":"T","\u0167":"t","T\u0306":"T","t\u0306":"t","\u0168":"U","\u0169":"u","\u016a":"U","\u016b":"u","\u016c":"U","\u016d":"u","\u016e":"U","\u016f":"u","\u0170":"U","\u0171":"u","\u0172":"U","\u0173":"u","\u0216":"U","\u0217":"u","V\u0306":"V","v\u0306":"v","\u0174":"W","\u0175":"w","\u1e82":"W","\u1e83":"w","X\u0306":"X","x\u0306":"x","\u0176":"Y","\u0177":"y","\u0178":"Y","Y\u0306":"Y","y\u0306":"y","\u0179":"Z","\u017a":"z","\u017b":"Z","\u017c":"z","\u017d":"Z","\u017e":"z","\u017f":"s","\u0192":"f","\u01a0":"O","\u01a1":"o","\u01af":"U","\u01b0":"u","\u01cd":"A","\u01ce":"a","\u01cf":"I","\u01d0":"i","\u01d1":"O","\u01d2":"o","\u01d3":"U","\u01d4":"u","\u01d5":"U","\u01d6":"u","\u01d7":"U","\u01d8":"u","\u01d9":"U","\u01da":"u","\u01db":"U","\u01dc":"u","\u1ee8":"U","\u1ee9":"u","\u1e78":"U","\u1e79":"u","\u01fa":"A","\u01fb":"a","\u01fc":"AE","\u01fd":"ae","\u01fe":"O","\u01ff":"o","\xde":"TH","\xfe":"th","\u1e54":"P","\u1e55":"p","\u1e64":"S","\u1e65":"s","X\u0301":"X","x\u0301":"x","\u0403":"\u0413","\u0453":"\u0433","\u040c":"\u041a","\u045c":"\u043a","A\u030b":"A","a\u030b":"a","E\u030b":"E","e\u030b":"e","I\u030b":"I","i\u030b":"i","\u01f8":"N","\u01f9":"n","\u1ed2":"O","\u1ed3":"o","\u1e50":"O","\u1e51":"o","\u1eea":"U","\u1eeb":"u","\u1e80":"W","\u1e81":"w","\u1ef2":"Y","\u1ef3":"y","\u0200":"A","\u0201":"a","\u0204":"E","\u0205":"e","\u0208":"I","\u0209":"i","\u020c":"O","\u020d":"o","\u0210":"R","\u0211":"r","\u0214":"U","\u0215":"u","B\u030c":"B","b\u030c":"b","\u010c\u0323":"C","\u010d\u0323":"c","\xca\u030c":"E","\xea\u030c":"e","F\u030c":"F","f\u030c":"f","\u01e6":"G","\u01e7":"g","\u021e":"H","\u021f":"h","J\u030c":"J","\u01f0":"j","\u01e8":"K","\u01e9":"k","M\u030c":"M","m\u030c":"m","P\u030c":"P","p\u030c":"p","Q\u030c":"Q","q\u030c":"q","\u0158\u0329":"R","\u0159\u0329":"r","\u1e66":"S","\u1e67":"s","V\u030c":"V","v\u030c":"v","W\u030c":"W","w\u030c":"w","X\u030c":"X","x\u030c":"x","Y\u030c":"Y","y\u030c":"y","A\u0327":"A","a\u0327":"a","B\u0327":"B","b\u0327":"b","\u1e10":"D","\u1e11":"d","\u0228":"E","\u0229":"e","\u0190\u0327":"E","\u025b\u0327":"e","\u1e28":"H","\u1e29":"h","I\u0327":"I","i\u0327":"i","\u0197\u0327":"I","\u0268\u0327":"i","M\u0327":"M","m\u0327":"m","O\u0327":"O","o\u0327":"o","Q\u0327":"Q","q\u0327":"q","U\u0327":"U","u\u0327":"u","X\u0327":"X","x\u0327":"x","Z\u0327":"Z","z\u0327":"z"},n=Object.keys(t).join("|"),o=new RegExp(n,"g"),a=new RegExp(n,""),i=function(e){return e.replace(o,(function(e){return t[e]}))};e.exports=i,e.exports.has=function(e){return!!e.match(a)},e.exports.remove=i}},n={},function e(o){var a=n[o];if(void 0!==a)return a.exports;var i=n[o]={exports:{}};return t[o](i,i.exports,e),i.exports}(772))},23370:function(e){var t,n;e.exports=(t={705:e=>{e.exports=function(e,t){const n=[];return 0===t.length?n.push({text:e,highlight:!1}):t[0][0]>0&&n.push({text:e.slice(0,t[0][0]),highlight:!1}),t.forEach(((o,a)=>{const i=o[0],s=o[1];n.push({text:e.slice(i,s),highlight:!0}),a===t.length-1?s<e.length&&n.push({text:e.slice(s,e.length),highlight:!1}):s<t[a+1][0]&&n.push({text:e.slice(s,t[a+1][0]),highlight:!1})})),n}}},n={},function e(o){var a=n[o];if(void 0!==a)return a.exports;var i=n[o]={exports:{}};return t[o](i,i.exports,e),i.exports}(705))},1216:(e,t,n)=>{"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(67294),i=u(a),s=u(n(45697)),r=n(54081),l=u(n(38315)),c=u(n(38282)),d=u(n(40821));function u(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=0,f=0,b=0,v=0,j="data-lazyload-listened",O=[],x=[],y=!1;try{var C=Object.defineProperty({},"passive",{get:function(){y=!0}});window.addEventListener("test",null,C)}catch(A){}var Z=!!y&&{capture:!1,passive:!0},E=function(e){var t=e.ref;if(t instanceof HTMLElement){var n=(0,l.default)(t),o=e.props.overflow&&n!==t.ownerDocument&&n!==document&&n!==document.documentElement?function(e,t){var n=e.ref,o=void 0,a=void 0,i=void 0,s=void 0;try{var r=t.getBoundingClientRect();o=r.top,a=r.left,i=r.height,s=r.width}catch(A){o=g,a=f,i=v,s=b}var l=window.innerHeight||document.documentElement.clientHeight,c=window.innerWidth||document.documentElement.clientWidth,d=Math.max(o,0),u=Math.max(a,0),p=Math.min(l,o+i)-d,m=Math.min(c,a+s)-u,h=void 0,j=void 0,O=void 0,x=void 0;try{var y=n.getBoundingClientRect();h=y.top,j=y.left,O=y.height,x=y.width}catch(A){h=g,j=f,O=v,x=b}var C=h-d,Z=j-u,E=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return C-E[0]<=p&&C+O+E[1]>=0&&Z-E[0]<=m&&Z+x+E[1]>=0}(e,n):function(e){var t=e.ref;if(!(t.offsetWidth||t.offsetHeight||t.getClientRects().length))return!1;var n=void 0,o=void 0;try{var a=t.getBoundingClientRect();n=a.top,o=a.height}catch(A){n=g,o=v}var i=window.innerHeight||document.documentElement.clientHeight,s=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return n-s[0]<=i&&n+o+s[1]>=0}(e);o?e.visible||(e.props.once&&x.push(e),e.visible=!0,e.forceUpdate()):e.props.once&&e.visible||(e.visible=!1,e.props.unmountIfInvisible&&e.forceUpdate())}},w=function(){x.forEach((function(e){var t=O.indexOf(e);-1!==t&&O.splice(t,1)})),x=[]},_=function(){for(var e=0;e<O.length;++e){var t=O[e];E(t)}w()},N=void 0,S=null,T=function(e){function t(e){p(this,t);var n=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.visible=!1,n.setRef=n.setRef.bind(n),n}return h(t,e),o(t,[{key:"componentDidMount",value:function(){var e=window,t=this.props.scrollContainer;t&&"string"==typeof t&&(e=e.document.querySelector(t));var n=void 0!==this.props.debounce&&"throttle"===N||"debounce"===N&&void 0===this.props.debounce;if(n&&((0,r.off)(e,"scroll",S,Z),(0,r.off)(window,"resize",S,Z),S=null),S||(void 0!==this.props.debounce?(S=(0,c.default)(_,"number"==typeof this.props.debounce?this.props.debounce:300),N="debounce"):void 0!==this.props.throttle?(S=(0,d.default)(_,"number"==typeof this.props.throttle?this.props.throttle:300),N="throttle"):S=_),this.props.overflow){var o=(0,l.default)(this.ref);if(o&&"function"==typeof o.getAttribute){var a=+o.getAttribute(j)+1;1===a&&o.addEventListener("scroll",S,Z),o.setAttribute(j,a)}}else if(0===O.length||n){var i=this.props,s=i.scroll,u=i.resize;s&&(0,r.on)(e,"scroll",S,Z),u&&(0,r.on)(window,"resize",S,Z)}O.push(this),E(this)}},{key:"shouldComponentUpdate",value:function(){return this.visible}},{key:"componentWillUnmount",value:function(){if(this.props.overflow){var e=(0,l.default)(this.ref);if(e&&"function"==typeof e.getAttribute){var t=+e.getAttribute(j)-1;0===t?(e.removeEventListener("scroll",S,Z),e.removeAttribute(j)):e.setAttribute(j,t)}}var n=O.indexOf(this);-1!==n&&O.splice(n,1),0===O.length&&"undefined"!=typeof window&&((0,r.off)(window,"resize",S,Z),(0,r.off)(window,"scroll",S,Z))}},{key:"setRef",value:function(e){e&&(this.ref=e)}},{key:"render",value:function(){var e=this.props,t=e.height,n=e.children,o=e.placeholder,a=e.className,s=e.classNamePrefix,r=e.style;return i.default.createElement("div",{className:s+"-wrapper "+a,ref:this.setRef,style:r},this.visible?n:o||i.default.createElement("div",{style:{height:t},className:s+"-placeholder"}))}}]),t}(a.Component);T.propTypes={className:s.default.string,classNamePrefix:s.default.string,once:s.default.bool,height:s.default.oneOfType([s.default.number,s.default.string]),offset:s.default.oneOfType([s.default.number,s.default.arrayOf(s.default.number)]),overflow:s.default.bool,resize:s.default.bool,scroll:s.default.bool,children:s.default.node,throttle:s.default.oneOfType([s.default.number,s.default.bool]),debounce:s.default.oneOfType([s.default.number,s.default.bool]),placeholder:s.default.node,scrollContainer:s.default.oneOfType([s.default.string,s.default.object]),unmountIfInvisible:s.default.bool,style:s.default.object},T.defaultProps={className:"",classNamePrefix:"lazyload",once:!1,offset:0,overflow:!1,resize:!1,scroll:!0,unmountIfInvisible:!1};t.ZP=T},38282:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var o=void 0,a=void 0,i=void 0,s=void 0,r=void 0,l=function l(){var c=+new Date-s;c<t&&c>=0?o=setTimeout(l,t-c):(o=null,n||(r=e.apply(i,a),o||(i=null,a=null)))};return function(){i=this,a=arguments,s=+new Date;var c=n&&!o;return o||(o=setTimeout(l,t)),c&&(r=e.apply(i,a),i=null,a=null),r}}},54081:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.on=function(e,t,n,o){o=o||!1,e.addEventListener?e.addEventListener(t,n,o):e.attachEvent&&e.attachEvent("on"+t,(function(t){n.call(e,t||window.event)}))},t.off=function(e,t,n,o){o=o||!1,e.removeEventListener?e.removeEventListener(t,n,o):e.detachEvent&&e.detachEvent("on"+t,n)}},38315:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!(e instanceof HTMLElement))return document.documentElement;for(var t="absolute"===e.style.position,n=/(scroll|auto)/,o=e;o;){if(!o.parentNode)return e.ownerDocument||document.documentElement;var a=window.getComputedStyle(o),i=a.position,s=a.overflow,r=a["overflow-x"],l=a["overflow-y"];if("static"===i&&t)o=o.parentNode;else{if(n.test(s)&&n.test(r)&&n.test(l))return o;o=o.parentNode}}return e.ownerDocument||e.documentElement||document.documentElement}},40821:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var o,a;return t||(t=250),function(){var i=n||this,s=+new Date,r=arguments;o&&s<o+t?(clearTimeout(a),a=setTimeout((function(){o=s,e.apply(i,r)}),t)):(o=s,e.apply(i,r))}}},16941:(e,t,n)=>{var o=n(51474),a=n(64045),i=n(26945),s=n(36038);function r(e){return e&&e.__esModule?e.default:e}function l(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}function c(e){null!==e.parentElement&&e.parentElement.removeChild(e)}function d(e){e.forEach((e=>c(e.element)))}function u(e){e.forEach((e=>{!function(e,t,n){const o=e.children[n]||null;e.insertBefore(t,o)}(e.parentElement,e.element,e.oldIndex)}))}function p(e,t){const n=f(e),o={parentElement:e.from};let a=[];switch(n){case"normal":a=[{element:e.item,newIndex:e.newIndex,oldIndex:e.oldIndex,parentElement:e.from}];break;case"swap":a=[{element:e.item,oldIndex:e.oldIndex,newIndex:e.newIndex,...o},{element:e.swapItem,oldIndex:e.newIndex,newIndex:e.oldIndex,...o}];break;case"multidrag":a=e.oldIndicies.map(((t,n)=>({element:t.multiDragElement,oldIndex:t.index,newIndex:e.newIndicies[n].index,...o})))}const i=function(e,t){const n=e.map((e=>({...e,item:t[e.oldIndex]}))).sort(((e,t)=>e.oldIndex-t.oldIndex));return n}(a,t);return i}function m(e,t){return g(e,h(e,t))}function h(e,t){const n=[...t];return e.concat().reverse().forEach((e=>n.splice(e.oldIndex,1))),n}function g(e,t,n,o){const a=[...t];return e.forEach((e=>{const t=o&&n&&o(e.item,n);a.splice(e.newIndex,0,t||e.item)})),a}function f(e){return e.oldIndicies&&e.oldIndicies.length>0?"multidrag":e.swapItem?"swap":"normal"}function b(e){const{list:t,setList:n,children:o,tag:a,style:i,className:s,clone:r,onAdd:l,onChange:c,onChoose:d,onClone:u,onEnd:p,onFilter:m,onRemove:h,onSort:g,onStart:f,onUnchoose:b,onUpdate:v,onMove:j,onSpill:O,onSelect:x,onDeselect:y,...C}=e;return C}l(e.exports,"Sortable",(()=>$882b6d93070905b3$re_export$Sortable)),l(e.exports,"Direction",(()=>$882b6d93070905b3$re_export$Direction)),l(e.exports,"DOMRect",(()=>$882b6d93070905b3$re_export$DOMRect)),l(e.exports,"GroupOptions",(()=>$882b6d93070905b3$re_export$GroupOptions)),l(e.exports,"MoveEvent",(()=>$882b6d93070905b3$re_export$MoveEvent)),l(e.exports,"Options",(()=>$882b6d93070905b3$re_export$Options)),l(e.exports,"PullResult",(()=>$882b6d93070905b3$re_export$PullResult)),l(e.exports,"PutResult",(()=>$882b6d93070905b3$re_export$PutResult)),l(e.exports,"SortableEvent",(()=>$882b6d93070905b3$re_export$SortableEvent)),l(e.exports,"SortableOptions",(()=>$882b6d93070905b3$re_export$SortableOptions)),l(e.exports,"Utils",(()=>$882b6d93070905b3$re_export$Utils)),l(e.exports,"ReactSortable",(()=>j));const v={dragging:null};class j extends i.Component{static defaultProps={clone:e=>e};constructor(e){super(e),this.ref=(0,i.createRef)();const t=[...e.list].map((e=>Object.assign(e,{chosen:!1,selected:!1})));e.setList(t,this.sortable,v),r(s)(!e.plugins,'\nPlugins prop is no longer supported.\nInstead, mount it with "Sortable.mount(new MultiDrag())"\nPlease read the updated README.md at https://github.com/SortableJS/react-sortablejs.\n      ')}componentDidMount(){if(null===this.ref.current)return;const e=this.makeOptions();r(o).create(this.ref.current,e)}componentDidUpdate(e){e.disabled!==this.props.disabled&&this.sortable&&this.sortable.option("disabled",this.props.disabled)}render(){const{tag:e,style:t,className:n,id:o}=this.props,a={style:t,className:n,id:o},s=e&&null!==e?e:"div";return(0,i.createElement)(s,{ref:this.ref,...a},this.getChildren())}getChildren(){const{children:e,dataIdAttr:t,selectedClass:n="sortable-selected",chosenClass:o="sortable-chosen",dragClass:s="sortable-drag",fallbackClass:l="sortable-falback",ghostClass:c="sortable-ghost",swapClass:d="sortable-swap-highlight",filter:u="sortable-filter",list:p}=this.props;if(!e||null==e)return null;const m=t||"data-id";return i.Children.map(e,((e,t)=>{if(void 0===e)return;const s=p[t]||{},{className:l}=e.props,c="string"==typeof u&&{[u.replace(".","")]:!!s.filtered},d=r(a)(l,{[n]:s.selected,[o]:s.chosen,...c});return(0,i.cloneElement)(e,{[m]:e.key,className:d})}))}get sortable(){const e=this.ref.current;if(null===e)return null;const t=Object.keys(e).find((e=>e.includes("Sortable")));return t?e[t]:null}makeOptions(){const e=b(this.props);["onAdd","onChoose","onDeselect","onEnd","onRemove","onSelect","onSpill","onStart","onUnchoose","onUpdate"].forEach((t=>e[t]=this.prepareOnHandlerPropAndDOM(t))),["onChange","onClone","onFilter","onSort"].forEach((t=>e[t]=this.prepareOnHandlerProp(t)));return{...e,onMove:(e,t)=>{const{onMove:n}=this.props,o=e.willInsertAfter||-1;if(!n)return o;const a=n(e,t,this.sortable,v);return void 0!==a&&a}}}prepareOnHandlerPropAndDOM(e){return t=>{this.callOnHandlerProp(t,e),this[e](t)}}prepareOnHandlerProp(e){return t=>{this.callOnHandlerProp(t,e)}}callOnHandlerProp(e,t){const n=this.props[t];n&&n(e,this.sortable,v)}onAdd(e){const{list:t,setList:n,clone:o}=this.props,a=p(e,[...v.dragging.props.list]);d(a);n(g(a,t,e,o).map((e=>Object.assign(e,{selected:!1}))),this.sortable,v)}onRemove(e){const{list:t,setList:n}=this.props,o=f(e),a=p(e,t);u(a);let i=[...t];if("clone"!==e.pullMode)i=h(a,i);else{let t=a;switch(o){case"multidrag":t=a.map(((t,n)=>({...t,element:e.clones[n]})));break;case"normal":t=a.map((t=>({...t,element:e.clone})));break;default:r(s)(!0,`mode "${o}" cannot clone. Please remove "props.clone" from <ReactSortable/> when using the "${o}" plugin`)}d(t),a.forEach((t=>{const n=t.oldIndex,o=this.props.clone(t.item,e);i.splice(n,1,o)}))}i=i.map((e=>Object.assign(e,{selected:!1}))),n(i,this.sortable,v)}onUpdate(e){const{list:t,setList:n}=this.props,o=p(e,t);d(o),u(o);return n(m(o,t),this.sortable,v)}onStart(){v.dragging=this}onEnd(){v.dragging=null}onChoose(e){const{list:t,setList:n}=this.props;n(t.map(((t,n)=>{let o=t;return n===e.oldIndex&&(o=Object.assign(t,{chosen:!0})),o})),this.sortable,v)}onUnchoose(e){const{list:t,setList:n}=this.props;n(t.map(((t,n)=>{let o=t;return n===e.oldIndex&&(o=Object.assign(o,{chosen:!1})),o})),this.sortable,v)}onSpill(e){const{removeOnSpill:t,revertOnSpill:n}=this.props;t&&!n&&c(e.item)}onSelect(e){const{list:t,setList:n}=this.props,o=t.map((e=>Object.assign(e,{selected:!1})));e.newIndicies.forEach((t=>{const n=t.index;if(-1===n)return console.log(`"${e.type}" had indice of "${t.index}", which is probably -1 and doesn't usually happen here.`),void console.log(e);o[n].selected=!0})),n(o,this.sortable,v)}onDeselect(e){const{list:t,setList:n}=this.props,o=t.map((e=>Object.assign(e,{selected:!1})));e.newIndicies.forEach((e=>{const t=e.index;-1!==t&&(o[t].selected=!0)})),n(o,this.sortable,v)}}var O,x;O=e.exports,x={},Object.keys(x).forEach((function(e){"default"===e||"__esModule"===e||O.hasOwnProperty(e)||Object.defineProperty(O,e,{enumerable:!0,get:function(){return x[e]}})}))},64045:(e,t)=>{var n;!function(){"use strict";var o={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var s=a.apply(null,n);s&&e.push(s)}}else if("object"===i)if(n.toString===Object.prototype.toString)for(var r in n)o.call(n,r)&&n[r]&&e.push(r);else e.push(n.toString())}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},60071:(e,t)=>{"use strict";var n=Symbol.for("react.element"),o=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,f={};function b(e,t,n){this.props=e,this.context=t,this.refs=f,this.updater=n||h}function v(){}function j(e,t,n){this.props=e,this.context=t,this.refs=f,this.updater=n||h}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=b.prototype;var O=j.prototype=new v;O.constructor=j,g(O,b.prototype),O.isPureReactComponent=!0;var x=Array.isArray,y=Object.prototype.hasOwnProperty,C={current:null},Z={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,o){var a,i={},s=null,r=null;if(null!=t)for(a in void 0!==t.ref&&(r=t.ref),void 0!==t.key&&(s=""+t.key),t)y.call(t,a)&&!Z.hasOwnProperty(a)&&(i[a]=t[a]);var l=arguments.length-2;if(1===l)i.children=o;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===i[a]&&(i[a]=l[a]);return{$$typeof:n,type:e,key:s,ref:r,props:i,_owner:C.current}}function w(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var _=/\/+/g;function N(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function S(e,t,a,i,s){var r=typeof e;"undefined"!==r&&"boolean"!==r||(e=null);var l=!1;if(null===e)l=!0;else switch(r){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case o:l=!0}}if(l)return s=s(l=e),e=""===i?"."+N(l,0):i,x(s)?(a="",null!=e&&(a=e.replace(_,"$&/")+"/"),S(s,t,a,"",(function(e){return e}))):null!=s&&(w(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,a+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(_,"$&/")+"/")+e)),t.push(s)),1;if(l=0,i=""===i?".":i+":",x(e))for(var c=0;c<e.length;c++){var d=i+N(r=e[c],c);l+=S(r,t,a,d,s)}else if(d=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"==typeof d)for(e=d.call(e),c=0;!(r=e.next()).done;)l+=S(r=r.value,t,a,d=i+N(r,c++),s);else if("object"===r)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,n){if(null==e)return e;var o=[],a=0;return S(e,o,"","",(function(e){return t.call(n,e,a++)})),o}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},k={transition:null},M={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:k,ReactCurrentOwner:C};function I(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,n){T(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return T(e,(function(){t++})),t},toArray:function(e){return T(e,(function(e){return e}))||[]},only:function(e){if(!w(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=b,t.Fragment=a,t.Profiler=s,t.PureComponent=j,t.StrictMode=i,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.act=I,t.cloneElement=function(e,t,o){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=g({},e.props),i=e.key,s=e.ref,r=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,r=C.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)y.call(t,c)&&!Z.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=o;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];a.children=l}return{$$typeof:n,type:e.type,key:i,ref:s,props:a,_owner:r}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:r,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=w,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.transition;k.transition={};try{e()}finally{k.transition=t}},t.unstable_act=I,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},26945:(e,t,n)=>{"use strict";e.exports=n(60071)},36038:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=!0,a="Invariant failed";function i(e,t){if(!e){if(o)throw new Error(a);var n="function"==typeof t?t():t;throw new Error(n?a+": "+n:a)}}},51474:(e,t,n)=>{"use strict";function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r.apply(this,arguments)}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function c(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}n.r(t),n.d(t,{MultiDrag:()=>yt,Sortable:()=>Ve,Swap:()=>ut,default:()=>Et});function u(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var p=u(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),m=u(/Edge/i),h=u(/firefox/i),g=u(/safari/i)&&!u(/chrome/i)&&!u(/android/i),f=u(/iP(ad|od|hone)/i),b=u(/chrome/i)&&u(/android/i),v={capture:!1,passive:!1};function j(e,t,n){e.addEventListener(t,n,!p&&v)}function O(e,t,n){e.removeEventListener(t,n,!p&&v)}function x(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(n){return!1}return!1}}function y(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function C(e,t,n,o){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&x(e,t):x(e,t))||o&&e===n)return e;if(e===n)break}while(e=y(e))}return null}var Z,E=/\s+/g;function w(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(E," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(E," ")}}function _(e,t,n){var o=e&&e.style;if(o){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in o||-1!==t.indexOf("webkit")||(t="-webkit-"+t),o[t]=n+("string"==typeof n?"":"px")}}function N(e,t){var n="";if("string"==typeof e)n=e;else do{var o=_(e,"transform");o&&"none"!==o&&(n=o+" "+n)}while(!t&&(e=e.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(n)}function S(e,t,n){if(e){var o=e.getElementsByTagName(t),a=0,i=o.length;if(n)for(;a<i;a++)n(o[a],a);return o}return[]}function T(){var e=document.scrollingElement;return e||document.documentElement}function A(e,t,n,o,a){if(e.getBoundingClientRect||e===window){var i,s,r,l,c,d,u;if(e!==window&&e.parentNode&&e!==T()?(s=(i=e.getBoundingClientRect()).top,r=i.left,l=i.bottom,c=i.right,d=i.height,u=i.width):(s=0,r=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,u=window.innerWidth),(t||n)&&e!==window&&(a=a||e.parentNode,!p))do{if(a&&a.getBoundingClientRect&&("none"!==_(a,"transform")||n&&"static"!==_(a,"position"))){var m=a.getBoundingClientRect();s-=m.top+parseInt(_(a,"border-top-width")),r-=m.left+parseInt(_(a,"border-left-width")),l=s+i.height,c=r+i.width;break}}while(a=a.parentNode);if(o&&e!==window){var h=N(a||e),g=h&&h.a,f=h&&h.d;h&&(l=(s/=f)+(d/=f),c=(r/=g)+(u/=g))}return{top:s,left:r,bottom:l,right:c,width:u,height:d}}}function P(e,t,n){for(var o=D(e,!0),a=A(e)[t];o;){var i=A(o)[n];if(!("top"===n||"left"===n?a>=i:a<=i))return o;if(o===T())break;o=D(o,!1)}return!1}function k(e,t,n,o){for(var a=0,i=0,s=e.children;i<s.length;){if("none"!==s[i].style.display&&s[i]!==Ve.ghost&&(o||s[i]!==Ve.dragged)&&C(s[i],n.draggable,e,!1)){if(a===t)return s[i];a++}i++}return null}function M(e,t){for(var n=e.lastElementChild;n&&(n===Ve.ghost||"none"===_(n,"display")||t&&!x(n,t));)n=n.previousElementSibling;return n||null}function I(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Ve.clone||t&&!x(e,t)||n++;return n}function R(e){var t=0,n=0,o=T();if(e)do{var a=N(e),i=a.a,s=a.d;t+=e.scrollLeft*i,n+=e.scrollTop*s}while(e!==o&&(e=e.parentNode));return[t,n]}function D(e,t){if(!e||!e.getBoundingClientRect)return T();var n=e,o=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var a=_(n);if(n.clientWidth<n.scrollWidth&&("auto"==a.overflowX||"scroll"==a.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==a.overflowY||"scroll"==a.overflowY)){if(!n.getBoundingClientRect||n===document.body)return T();if(o||t)return n;o=!0}}}while(n=n.parentNode);return T()}function $(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function F(e,t){return function(){if(!Z){var n=arguments;1===n.length?e.call(this,n[0]):e.apply(this,n),Z=setTimeout((function(){Z=void 0}),t)}}}function L(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function B(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function U(e,t){_(e,"position","absolute"),_(e,"top",t.top),_(e,"left",t.left),_(e,"width",t.width),_(e,"height",t.height)}function V(e){_(e,"position",""),_(e,"top",""),_(e,"left",""),_(e,"width",""),_(e,"height","")}var G="Sortable"+(new Date).getTime();function z(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==_(e,"display")&&e!==Ve.ghost){t.push({target:e,rect:A(e)});var n=a({},t[t.length-1].rect);if(e.thisAnimationDuration){var o=N(e,!0);o&&(n.top-=o.f,n.left-=o.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[n][o])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var o=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof n&&n());var a=!1,i=0;t.forEach((function(e){var t=0,n=e.target,s=n.fromRect,r=A(n),l=n.prevFromRect,c=n.prevToRect,d=e.rect,u=N(n,!0);u&&(r.top-=u.f,r.left-=u.e),n.toRect=r,n.thisAnimationDuration&&$(l,r)&&!$(s,r)&&(d.top-r.top)/(d.left-r.left)==(s.top-r.top)/(s.left-r.left)&&(t=function(e,t,n,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*o.animation}(d,l,c,o.options)),$(r,s)||(n.prevFromRect=s,n.prevToRect=r,t||(t=o.options.animation),o.animate(n,d,r,t)),t&&(a=!0,i=Math.max(i,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),a?e=setTimeout((function(){"function"==typeof n&&n()}),i):"function"==typeof n&&n(),t=[]},animate:function(e,t,n,o){if(o){_(e,"transition",""),_(e,"transform","");var a=N(this.el),i=a&&a.a,s=a&&a.d,r=(t.left-n.left)/(i||1),l=(t.top-n.top)/(s||1);e.animatingX=!!r,e.animatingY=!!l,_(e,"transform","translate3d("+r+"px,"+l+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),_(e,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),_(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){_(e,"transition",""),_(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),o)}}}}var H=[],Y={initializeByDefault:!0},W={mount:function(e){for(var t in Y)Y.hasOwnProperty(t)&&!(t in e)&&(e[t]=Y[t]);H.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),H.push(e)},pluginEvent:function(e,t,n){var o=this;this.eventCanceled=!1,n.cancel=function(){o.eventCanceled=!0};var i=e+"Global";H.forEach((function(o){t[o.pluginName]&&(t[o.pluginName][i]&&t[o.pluginName][i](a({sortable:t},n)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](a({sortable:t},n)))}))},initializePlugins:function(e,t,n,o){for(var a in H.forEach((function(o){var a=o.pluginName;if(e.options[a]||o.initializeByDefault){var i=new o(e,t,e.options);i.sortable=e,i.options=e.options,e[a]=i,r(n,i.defaults)}})),e.options)if(e.options.hasOwnProperty(a)){var i=this.modifyOption(e,a,e.options[a]);void 0!==i&&(e.options[a]=i)}},getEventProperties:function(e,t){var n={};return H.forEach((function(o){"function"==typeof o.eventProperties&&r(n,o.eventProperties.call(t[o.pluginName],e))})),n},modifyOption:function(e,t,n){var o;return H.forEach((function(a){e[a.pluginName]&&a.optionListeners&&"function"==typeof a.optionListeners[t]&&(o=a.optionListeners[t].call(e[a.pluginName],n))})),o}};function q(e){var t=e.sortable,n=e.rootEl,o=e.name,i=e.targetEl,s=e.cloneEl,r=e.toEl,l=e.fromEl,c=e.oldIndex,d=e.newIndex,u=e.oldDraggableIndex,h=e.newDraggableIndex,g=e.originalEvent,f=e.putSortable,b=e.extraEventProperties;if(t=t||n&&n[G]){var v,j=t.options,O="on"+o.charAt(0).toUpperCase()+o.substr(1);!window.CustomEvent||p||m?(v=document.createEvent("Event")).initEvent(o,!0,!0):v=new CustomEvent(o,{bubbles:!0,cancelable:!0}),v.to=r||n,v.from=l||n,v.item=i||n,v.clone=s,v.oldIndex=c,v.newIndex=d,v.oldDraggableIndex=u,v.newDraggableIndex=h,v.originalEvent=g,v.pullMode=f?f.lastPutMode:void 0;var x=a(a({},b),W.getEventProperties(o,t));for(var y in x)v[y]=x[y];n&&n.dispatchEvent(v),j[O]&&j[O].call(t,v)}}var X=["evt"],K=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.evt,i=l(n,X);W.pluginEvent.bind(Ve)(e,t,a({dragEl:Q,parentEl:ee,ghostEl:te,rootEl:ne,nextEl:oe,lastDownEl:ae,cloneEl:ie,cloneHidden:se,dragStarted:je,putSortable:pe,activeSortable:Ve.active,originalEvent:o,oldIndex:re,oldDraggableIndex:ce,newIndex:le,newDraggableIndex:de,hideGhostForTarget:Fe,unhideGhostForTarget:Le,cloneNowHidden:function(){se=!0},cloneNowShown:function(){se=!1},dispatchSortableEvent:function(e){J({sortable:t,name:e,originalEvent:o})}},i))};function J(e){q(a({putSortable:pe,cloneEl:ie,targetEl:Q,rootEl:ne,oldIndex:re,oldDraggableIndex:ce,newIndex:le,newDraggableIndex:de},e))}var Q,ee,te,ne,oe,ae,ie,se,re,le,ce,de,ue,pe,me,he,ge,fe,be,ve,je,Oe,xe,ye,Ce,Ze=!1,Ee=!1,we=[],_e=!1,Ne=!1,Se=[],Te=!1,Ae=[],Pe="undefined"!=typeof document,ke=f,Me=m||p?"cssFloat":"float",Ie=Pe&&!b&&!f&&"draggable"in document.createElement("div"),Re=function(){if(Pe){if(p)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),De=function(e,t){var n=_(e),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),a=k(e,0,t),i=k(e,1,t),s=a&&_(a),r=i&&_(i),l=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+A(a).width,c=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+A(i).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&s.float&&"none"!==s.float){var d="left"===s.float?"left":"right";return!i||"both"!==r.clear&&r.clear!==d?"horizontal":"vertical"}return a&&("block"===s.display||"flex"===s.display||"table"===s.display||"grid"===s.display||l>=o&&"none"===n[Me]||i&&"none"===n[Me]&&l+c>o)?"vertical":"horizontal"},$e=function(e){function t(e,n){return function(o,a,i,s){var r=o.options.group.name&&a.options.group.name&&o.options.group.name===a.options.group.name;if(null==e&&(n||r))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(o,a,i,s),n)(o,a,i,s);var l=(n?o:a).options.group.name;return!0===e||"string"==typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var n={},o=e.group;o&&"object"==i(o)||(o={name:o}),n.name=o.name,n.checkPull=t(o.pull,!0),n.checkPut=t(o.put),n.revertClone=o.revertClone,e.group=n},Fe=function(){!Re&&te&&_(te,"display","none")},Le=function(){!Re&&te&&_(te,"display","")};Pe&&!b&&document.addEventListener("click",(function(e){if(Ee)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Ee=!1,!1}),!0);var Be=function(e){if(Q){e=e.touches?e.touches[0]:e;var t=(a=e.clientX,i=e.clientY,we.some((function(e){var t=e[G].options.emptyInsertThreshold;if(t&&!M(e)){var n=A(e),o=a>=n.left-t&&a<=n.right+t,r=i>=n.top-t&&i<=n.bottom+t;return o&&r?s=e:void 0}})),s);if(t){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[G]._onDragOver(n)}}var a,i,s},Ue=function(e){Q&&Q.parentNode[G]._isOutsideThisEl(e.target)};function Ve(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=r({},t),e[G]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return De(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Ve.supportPointer&&"PointerEvent"in window&&!g,emptyInsertThreshold:5};for(var o in W.initializePlugins(this,e,n),n)!(o in t)&&(t[o]=n[o]);for(var a in $e(t),this)"_"===a.charAt(0)&&"function"==typeof this[a]&&(this[a]=this[a].bind(this));this.nativeDraggable=!t.forceFallback&&Ie,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?j(e,"pointerdown",this._onTapStart):(j(e,"mousedown",this._onTapStart),j(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(j(e,"dragover",this),j(e,"dragenter",this)),we.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),r(this,z())}function Ge(e,t,n,o,a,i,s,r){var l,c,d=e[G],u=d.options.onMove;return!window.CustomEvent||p||m?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=n,l.draggedRect=o,l.related=a||t,l.relatedRect=i||A(t),l.willInsertAfter=r,l.originalEvent=s,e.dispatchEvent(l),u&&(c=u.call(d,l,s)),c}function ze(e){e.draggable=!1}function He(){Te=!1}function Ye(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function We(e){return setTimeout(e,0)}function qe(e){return clearTimeout(e)}Ve.prototype={constructor:Ve,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(Oe=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,Q):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,o=this.options,a=o.preventOnFilter,i=e.type,s=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,r=(s||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||r,c=o.filter;if(function(e){Ae.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var o=t[n];o.checked&&Ae.push(o)}}(n),!Q&&!(/mousedown|pointerdown/.test(i)&&0!==e.button||o.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!g||!r||"SELECT"!==r.tagName.toUpperCase())&&!((r=C(r,o.draggable,n,!1))&&r.animated||ae===r)){if(re=I(r),ce=I(r,o.draggable),"function"==typeof c){if(c.call(this,e,r,this))return J({sortable:t,rootEl:l,name:"filter",targetEl:r,toEl:n,fromEl:n}),K("filter",t,{evt:e}),void(a&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(o){if(o=C(l,o.trim(),n,!1))return J({sortable:t,rootEl:o,name:"filter",targetEl:r,fromEl:n,toEl:n}),K("filter",t,{evt:e}),!0}))))return void(a&&e.cancelable&&e.preventDefault());o.handle&&!C(l,o.handle,n,!1)||this._prepareDragStart(e,s,r)}}},_prepareDragStart:function(e,t,n){var o,a=this,i=a.el,s=a.options,r=i.ownerDocument;if(n&&!Q&&n.parentNode===i){var l=A(n);if(ne=i,ee=(Q=n).parentNode,oe=Q.nextSibling,ae=n,ue=s.group,Ve.dragged=Q,me={target:Q,clientX:(t||e).clientX,clientY:(t||e).clientY},be=me.clientX-l.left,ve=me.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,Q.style["will-change"]="all",o=function(){K("delayEnded",a,{evt:e}),Ve.eventCanceled?a._onDrop():(a._disableDelayedDragEvents(),!h&&a.nativeDraggable&&(Q.draggable=!0),a._triggerDragStart(e,t),J({sortable:a,name:"choose",originalEvent:e}),w(Q,s.chosenClass,!0))},s.ignore.split(",").forEach((function(e){S(Q,e.trim(),ze)})),j(r,"dragover",Be),j(r,"mousemove",Be),j(r,"touchmove",Be),j(r,"mouseup",a._onDrop),j(r,"touchend",a._onDrop),j(r,"touchcancel",a._onDrop),h&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Q.draggable=!0),K("delayStart",this,{evt:e}),!s.delay||s.delayOnTouchOnly&&!t||this.nativeDraggable&&(m||p))o();else{if(Ve.eventCanceled)return void this._onDrop();j(r,"mouseup",a._disableDelayedDrag),j(r,"touchend",a._disableDelayedDrag),j(r,"touchcancel",a._disableDelayedDrag),j(r,"mousemove",a._delayedDragTouchMoveHandler),j(r,"touchmove",a._delayedDragTouchMoveHandler),s.supportPointer&&j(r,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(o,s.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Q&&ze(Q),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;O(e,"mouseup",this._disableDelayedDrag),O(e,"touchend",this._disableDelayedDrag),O(e,"touchcancel",this._disableDelayedDrag),O(e,"mousemove",this._delayedDragTouchMoveHandler),O(e,"touchmove",this._delayedDragTouchMoveHandler),O(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?j(document,"pointermove",this._onTouchMove):j(document,t?"touchmove":"mousemove",this._onTouchMove):(j(Q,"dragend",this),j(ne,"dragstart",this._onDragStart));try{document.selection?We((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(e,t){if(Ze=!1,ne&&Q){K("dragStarted",this,{evt:t}),this.nativeDraggable&&j(document,"dragover",Ue);var n=this.options;!e&&w(Q,n.dragClass,!1),w(Q,n.ghostClass,!0),Ve.active=this,e&&this._appendGhost(),J({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(he){this._lastX=he.clientX,this._lastY=he.clientY,Fe();for(var e=document.elementFromPoint(he.clientX,he.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(he.clientX,he.clientY))!==t;)t=e;if(Q.parentNode[G]._isOutsideThisEl(e),t)do{if(t[G]){if(t[G]._onDragOver({clientX:he.clientX,clientY:he.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Le()}},_onTouchMove:function(e){if(me){var t=this.options,n=t.fallbackTolerance,o=t.fallbackOffset,a=e.touches?e.touches[0]:e,i=te&&N(te,!0),s=te&&i&&i.a,r=te&&i&&i.d,l=ke&&Ce&&R(Ce),c=(a.clientX-me.clientX+o.x)/(s||1)+(l?l[0]-Se[0]:0)/(s||1),d=(a.clientY-me.clientY+o.y)/(r||1)+(l?l[1]-Se[1]:0)/(r||1);if(!Ve.active&&!Ze){if(n&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(te){i?(i.e+=c-(ge||0),i.f+=d-(fe||0)):i={a:1,b:0,c:0,d:1,e:c,f:d};var u="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");_(te,"webkitTransform",u),_(te,"mozTransform",u),_(te,"msTransform",u),_(te,"transform",u),ge=c,fe=d,he=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!te){var e=this.options.fallbackOnBody?document.body:ne,t=A(Q,!0,ke,!0,e),n=this.options;if(ke){for(Ce=e;"static"===_(Ce,"position")&&"none"===_(Ce,"transform")&&Ce!==document;)Ce=Ce.parentNode;Ce!==document.body&&Ce!==document.documentElement?(Ce===document&&(Ce=T()),t.top+=Ce.scrollTop,t.left+=Ce.scrollLeft):Ce=T(),Se=R(Ce)}w(te=Q.cloneNode(!0),n.ghostClass,!1),w(te,n.fallbackClass,!0),w(te,n.dragClass,!0),_(te,"transition",""),_(te,"transform",""),_(te,"box-sizing","border-box"),_(te,"margin",0),_(te,"top",t.top),_(te,"left",t.left),_(te,"width",t.width),_(te,"height",t.height),_(te,"opacity","0.8"),_(te,"position",ke?"absolute":"fixed"),_(te,"zIndex","100000"),_(te,"pointerEvents","none"),Ve.ghost=te,e.appendChild(te),_(te,"transform-origin",be/parseInt(te.style.width)*100+"% "+ve/parseInt(te.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,o=e.dataTransfer,a=n.options;K("dragStart",this,{evt:e}),Ve.eventCanceled?this._onDrop():(K("setupClone",this),Ve.eventCanceled||((ie=B(Q)).removeAttribute("id"),ie.draggable=!1,ie.style["will-change"]="",this._hideClone(),w(ie,this.options.chosenClass,!1),Ve.clone=ie),n.cloneId=We((function(){K("clone",n),Ve.eventCanceled||(n.options.removeCloneOnHide||ne.insertBefore(ie,Q),n._hideClone(),J({sortable:n,name:"clone"}))})),!t&&w(Q,a.dragClass,!0),t?(Ee=!0,n._loopId=setInterval(n._emulateDragOver,50)):(O(document,"mouseup",n._onDrop),O(document,"touchend",n._onDrop),O(document,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",a.setData&&a.setData.call(n,o,Q)),j(document,"drop",n),_(Q,"transform","translateZ(0)")),Ze=!0,n._dragStartId=We(n._dragStarted.bind(n,t,e)),j(document,"selectstart",n),je=!0,g&&_(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,o,i,s=this.el,r=e.target,l=this.options,c=l.group,d=Ve.active,u=ue===c,p=l.sort,m=pe||d,h=this,g=!1;if(!Te){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),r=C(r,l.draggable,s,!0),$("dragOver"),Ve.eventCanceled)return g;if(Q.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||h._ignoreWhileAnimating===r)return B(!1);if(Ee=!1,d&&!l.disabled&&(u?p||(o=ee!==ne):pe===this||(this.lastPutMode=ue.checkPull(this,d,Q,e))&&c.checkPut(this,d,Q,e))){if(i="vertical"===this._getDirection(e,r),t=A(Q),$("dragOverValid"),Ve.eventCanceled)return g;if(o)return ee=ne,F(),this._hideClone(),$("revert"),Ve.eventCanceled||(oe?ne.insertBefore(Q,oe):ne.appendChild(Q)),B(!0);var f=M(s,l.draggable);if(!f||function(e,t,n){var o=A(M(n.el,n.options.draggable)),a=10;return t?e.clientX>o.right+a||e.clientX<=o.right&&e.clientY>o.bottom&&e.clientX>=o.left:e.clientX>o.right&&e.clientY>o.top||e.clientX<=o.right&&e.clientY>o.bottom+a}(e,i,this)&&!f.animated){if(f===Q)return B(!1);if(f&&s===e.target&&(r=f),r&&(n=A(r)),!1!==Ge(ne,s,Q,t,r,n,e,!!r))return F(),f&&f.nextSibling?s.insertBefore(Q,f.nextSibling):s.appendChild(Q),ee=s,U(),B(!0)}else if(f&&function(e,t,n){var o=A(k(n.el,0,n.options,!0)),a=10;return t?e.clientX<o.left-a||e.clientY<o.top&&e.clientX<o.right:e.clientY<o.top-a||e.clientY<o.bottom&&e.clientX<o.left}(e,i,this)){var b=k(s,0,l,!0);if(b===Q)return B(!1);if(n=A(r=b),!1!==Ge(ne,s,Q,t,r,n,e,!1))return F(),s.insertBefore(Q,b),ee=s,U(),B(!0)}else if(r.parentNode===s){n=A(r);var v,j,O,x=Q.parentNode!==s,y=!function(e,t,n){var o=n?e.left:e.top,a=n?e.right:e.bottom,i=n?e.width:e.height,s=n?t.left:t.top,r=n?t.right:t.bottom,l=n?t.width:t.height;return o===s||a===r||o+i/2===s+l/2}(Q.animated&&Q.toRect||t,r.animated&&r.toRect||n,i),Z=i?"top":"left",E=P(r,"top","top")||P(Q,"top","top"),N=E?E.scrollTop:void 0;if(Oe!==r&&(j=n[Z],_e=!1,Ne=!y&&l.invertSwap||x),v=function(e,t,n,o,a,i,s,r){var l=o?e.clientY:e.clientX,c=o?n.height:n.width,d=o?n.top:n.left,u=o?n.bottom:n.right,p=!1;if(!s)if(r&&ye<c*a){if(!_e&&(1===xe?l>d+c*i/2:l<u-c*i/2)&&(_e=!0),_e)p=!0;else if(1===xe?l<d+ye:l>u-ye)return-xe}else if(l>d+c*(1-a)/2&&l<u-c*(1-a)/2)return function(e){return I(Q)<I(e)?1:-1}(t);if((p=p||s)&&(l<d+c*i/2||l>u-c*i/2))return l>d+c/2?1:-1;return 0}(e,r,n,i,y?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,Ne,Oe===r),0!==v){var S=I(Q);do{S-=v,O=ee.children[S]}while(O&&("none"===_(O,"display")||O===te))}if(0===v||O===r)return B(!1);Oe=r,xe=v;var T=r.nextElementSibling,R=!1,D=Ge(ne,s,Q,t,r,n,e,R=1===v);if(!1!==D)return 1!==D&&-1!==D||(R=1===D),Te=!0,setTimeout(He,30),F(),R&&!T?s.appendChild(Q):r.parentNode.insertBefore(Q,R?T:r),E&&L(E,0,N-E.scrollTop),ee=Q.parentNode,void 0===j||Ne||(ye=Math.abs(j-A(r)[Z])),U(),B(!0)}if(s.contains(Q))return B(!1)}return!1}function $(l,c){K(l,h,a({evt:e,isOwner:u,axis:i?"vertical":"horizontal",revert:o,dragRect:t,targetRect:n,canSort:p,fromSortable:m,target:r,completed:B,onMove:function(n,o){return Ge(ne,s,Q,t,n,A(n),e,o)},changed:U},c))}function F(){$("dragOverAnimationCapture"),h.captureAnimationState(),h!==m&&m.captureAnimationState()}function B(t){return $("dragOverCompleted",{insertion:t}),t&&(u?d._hideClone():d._showClone(h),h!==m&&(w(Q,pe?pe.options.ghostClass:d.options.ghostClass,!1),w(Q,l.ghostClass,!0)),pe!==h&&h!==Ve.active?pe=h:h===Ve.active&&pe&&(pe=null),m===h&&(h._ignoreWhileAnimating=r),h.animateAll((function(){$("dragOverAnimationComplete"),h._ignoreWhileAnimating=null})),h!==m&&(m.animateAll(),m._ignoreWhileAnimating=null)),(r===Q&&!Q.animated||r===s&&!r.animated)&&(Oe=null),l.dragoverBubble||e.rootEl||r===document||(Q.parentNode[G]._isOutsideThisEl(e.target),!t&&Be(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function U(){le=I(Q),de=I(Q,l.draggable),J({sortable:h,name:"change",toEl:s,newIndex:le,newDraggableIndex:de,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){O(document,"mousemove",this._onTouchMove),O(document,"touchmove",this._onTouchMove),O(document,"pointermove",this._onTouchMove),O(document,"dragover",Be),O(document,"mousemove",Be),O(document,"touchmove",Be)},_offUpEvents:function(){var e=this.el.ownerDocument;O(e,"mouseup",this._onDrop),O(e,"touchend",this._onDrop),O(e,"pointerup",this._onDrop),O(e,"touchcancel",this._onDrop),O(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;le=I(Q),de=I(Q,n.draggable),K("drop",this,{evt:e}),ee=Q&&Q.parentNode,le=I(Q),de=I(Q,n.draggable),Ve.eventCanceled||(Ze=!1,Ne=!1,_e=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),qe(this.cloneId),qe(this._dragStartId),this.nativeDraggable&&(O(document,"drop",this),O(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),g&&_(document.body,"user-select",""),_(Q,"transform",""),e&&(je&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),te&&te.parentNode&&te.parentNode.removeChild(te),(ne===ee||pe&&"clone"!==pe.lastPutMode)&&ie&&ie.parentNode&&ie.parentNode.removeChild(ie),Q&&(this.nativeDraggable&&O(Q,"dragend",this),ze(Q),Q.style["will-change"]="",je&&!Ze&&w(Q,pe?pe.options.ghostClass:this.options.ghostClass,!1),w(Q,this.options.chosenClass,!1),J({sortable:this,name:"unchoose",toEl:ee,newIndex:null,newDraggableIndex:null,originalEvent:e}),ne!==ee?(le>=0&&(J({rootEl:ee,name:"add",toEl:ee,fromEl:ne,originalEvent:e}),J({sortable:this,name:"remove",toEl:ee,originalEvent:e}),J({rootEl:ee,name:"sort",toEl:ee,fromEl:ne,originalEvent:e}),J({sortable:this,name:"sort",toEl:ee,originalEvent:e})),pe&&pe.save()):le!==re&&le>=0&&(J({sortable:this,name:"update",toEl:ee,originalEvent:e}),J({sortable:this,name:"sort",toEl:ee,originalEvent:e})),Ve.active&&(null!=le&&-1!==le||(le=re,de=ce),J({sortable:this,name:"end",toEl:ee,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){K("nulling",this),ne=Q=ee=te=oe=ie=ae=se=me=he=je=le=de=re=ce=Oe=xe=pe=ue=Ve.dragged=Ve.ghost=Ve.clone=Ve.active=null,Ae.forEach((function(e){e.checked=!0})),Ae.length=ge=fe=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Q&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,o=0,a=n.length,i=this.options;o<a;o++)C(e=n[o],i.draggable,this.el,!1)&&t.push(e.getAttribute(i.dataIdAttr)||Ye(e));return t},sort:function(e,t){var n={},o=this.el;this.toArray().forEach((function(e,t){var a=o.children[t];C(a,this.options.draggable,o,!1)&&(n[e]=a)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(o.removeChild(n[e]),o.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return C(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var o=W.modifyOption(this,e,t);n[e]=void 0!==o?o:t,"group"===e&&$e(n)},destroy:function(){K("destroy",this);var e=this.el;e[G]=null,O(e,"mousedown",this._onTapStart),O(e,"touchstart",this._onTapStart),O(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(O(e,"dragover",this),O(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),we.splice(we.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!se){if(K("hideClone",this),Ve.eventCanceled)return;_(ie,"display","none"),this.options.removeCloneOnHide&&ie.parentNode&&ie.parentNode.removeChild(ie),se=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(se){if(K("showClone",this),Ve.eventCanceled)return;Q.parentNode!=ne||this.options.group.revertClone?oe?ne.insertBefore(ie,oe):ne.appendChild(ie):ne.insertBefore(ie,Q),this.options.group.revertClone&&this.animate(Q,ie),_(ie,"display",""),se=!1}}else this._hideClone()}},Pe&&j(document,"touchmove",(function(e){(Ve.active||Ze)&&e.cancelable&&e.preventDefault()})),Ve.utils={on:j,off:O,css:_,find:S,is:function(e,t){return!!C(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:F,closest:C,toggleClass:w,clone:B,index:I,nextTick:We,cancelNextTick:qe,detectDirection:De,getChild:k},Ve.get=function(e){return e[G]},Ve.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Ve.utils=a(a({},Ve.utils),e.utils)),W.mount(e)}))},Ve.create=function(e,t){return new Ve(e,t)},Ve.version="1.15.0";var Xe,Ke,Je,Qe,et,tt,nt=[],ot=!1;function at(){nt.forEach((function(e){clearInterval(e.pid)})),nt=[]}function it(){clearInterval(tt)}var st,rt=F((function(e,t,n,o){if(t.scroll){var a,i=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,r=t.scrollSensitivity,l=t.scrollSpeed,c=T(),d=!1;Ke!==n&&(Ke=n,at(),Xe=t.scroll,a=t.scrollFn,!0===Xe&&(Xe=D(n,!0)));var u=0,p=Xe;do{var m=p,h=A(m),g=h.top,f=h.bottom,b=h.left,v=h.right,j=h.width,O=h.height,x=void 0,y=void 0,C=m.scrollWidth,Z=m.scrollHeight,E=_(m),w=m.scrollLeft,N=m.scrollTop;m===c?(x=j<C&&("auto"===E.overflowX||"scroll"===E.overflowX||"visible"===E.overflowX),y=O<Z&&("auto"===E.overflowY||"scroll"===E.overflowY||"visible"===E.overflowY)):(x=j<C&&("auto"===E.overflowX||"scroll"===E.overflowX),y=O<Z&&("auto"===E.overflowY||"scroll"===E.overflowY));var S=x&&(Math.abs(v-i)<=r&&w+j<C)-(Math.abs(b-i)<=r&&!!w),P=y&&(Math.abs(f-s)<=r&&N+O<Z)-(Math.abs(g-s)<=r&&!!N);if(!nt[u])for(var k=0;k<=u;k++)nt[k]||(nt[k]={});nt[u].vx==S&&nt[u].vy==P&&nt[u].el===m||(nt[u].el=m,nt[u].vx=S,nt[u].vy=P,clearInterval(nt[u].pid),0==S&&0==P||(d=!0,nt[u].pid=setInterval(function(){o&&0===this.layer&&Ve.active._onTouchMove(et);var t=nt[this.layer].vy?nt[this.layer].vy*l:0,n=nt[this.layer].vx?nt[this.layer].vx*l:0;"function"==typeof a&&"continue"!==a.call(Ve.dragged.parentNode[G],n,t,e,et,nt[this.layer].el)||L(nt[this.layer].el,n,t)}.bind({layer:u}),24))),u++}while(t.bubbleScroll&&p!==c&&(p=D(p,!1)));ot=d}}),30),lt=function(e){var t=e.originalEvent,n=e.putSortable,o=e.dragEl,a=e.activeSortable,i=e.dispatchSortableEvent,s=e.hideGhostForTarget,r=e.unhideGhostForTarget;if(t){var l=n||a;s();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,d=document.elementFromPoint(c.clientX,c.clientY);r(),l&&!l.el.contains(d)&&(i("spill"),this.onSpill({dragEl:o,putSortable:n}))}};function ct(){}function dt(){}function ut(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(e){var t=e.dragEl;st=t},dragOverValid:function(e){var t=e.completed,n=e.target,o=e.onMove,a=e.activeSortable,i=e.changed,s=e.cancel;if(a.options.swap){var r=this.sortable.el,l=this.options;if(n&&n!==r){var c=st;!1!==o(n)?(w(n,l.swapClass,!0),st=n):st=null,c&&c!==st&&w(c,l.swapClass,!1)}i(),t(!0),s()}},drop:function(e){var t=e.activeSortable,n=e.putSortable,o=e.dragEl,a=n||this.sortable,i=this.options;st&&w(st,i.swapClass,!1),st&&(i.swap||n&&n.options.swap)&&o!==st&&(a.captureAnimationState(),a!==t&&t.captureAnimationState(),function(e,t){var n,o,a=e.parentNode,i=t.parentNode;if(!a||!i||a.isEqualNode(t)||i.isEqualNode(e))return;n=I(e),o=I(t),a.isEqualNode(i)&&n<o&&o++;a.insertBefore(t,a.children[n]),i.insertBefore(e,i.children[o])}(o,st),a.animateAll(),a!==t&&t.animateAll())},nulling:function(){st=null}},r(e,{pluginName:"swap",eventProperties:function(){return{swapItem:st}}})}ct.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var o=k(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(t,o):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:lt},r(ct,{pluginName:"revertOnSpill"}),dt.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:lt},r(dt,{pluginName:"removeOnSpill"});var pt,mt,ht,gt,ft,bt=[],vt=[],jt=!1,Ot=!1,xt=!1;function yt(){function e(e){for(var t in this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this));e.options.avoidImplicitDeselect||(e.options.supportPointer?j(document,"pointerup",this._deselectMultiDrag):(j(document,"mouseup",this._deselectMultiDrag),j(document,"touchend",this._deselectMultiDrag))),j(document,"keydown",this._checkKeyDown),j(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:!1,setData:function(t,n){var o="";bt.length&&mt===e?bt.forEach((function(e,t){o+=(t?", ":"")+e.textContent})):o=n.textContent,t.setData("Text",o)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){var t=e.dragEl;ht=t},delayEnded:function(){this.isMultiDrag=~bt.indexOf(ht)},setupClone:function(e){var t=e.sortable,n=e.cancel;if(this.isMultiDrag){for(var o=0;o<bt.length;o++)vt.push(B(bt[o])),vt[o].sortableIndex=bt[o].sortableIndex,vt[o].draggable=!1,vt[o].style["will-change"]="",w(vt[o],this.options.selectedClass,!1),bt[o]===ht&&w(vt[o],this.options.chosenClass,!1);t._hideClone(),n()}},clone:function(e){var t=e.sortable,n=e.rootEl,o=e.dispatchSortableEvent,a=e.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||bt.length&&mt===t&&(Ct(!0,n),o("clone"),a()))},showClone:function(e){var t=e.cloneNowShown,n=e.rootEl,o=e.cancel;this.isMultiDrag&&(Ct(!1,n),vt.forEach((function(e){_(e,"display","")})),t(),ft=!1,o())},hideClone:function(e){var t=this,n=(e.sortable,e.cloneNowHidden),o=e.cancel;this.isMultiDrag&&(vt.forEach((function(e){_(e,"display","none"),t.options.removeCloneOnHide&&e.parentNode&&e.parentNode.removeChild(e)})),n(),ft=!0,o())},dragStartGlobal:function(e){e.sortable;!this.isMultiDrag&&mt&&mt.multiDrag._deselectMultiDrag(),bt.forEach((function(e){e.sortableIndex=I(e)})),bt=bt.sort((function(e,t){return e.sortableIndex-t.sortableIndex})),xt=!0},dragStarted:function(e){var t=this,n=e.sortable;if(this.isMultiDrag){if(this.options.sort&&(n.captureAnimationState(),this.options.animation)){bt.forEach((function(e){e!==ht&&_(e,"position","absolute")}));var o=A(ht,!1,!0,!0);bt.forEach((function(e){e!==ht&&U(e,o)})),Ot=!0,jt=!0}n.animateAll((function(){Ot=!1,jt=!1,t.options.animation&&bt.forEach((function(e){V(e)})),t.options.sort&&Zt()}))}},dragOver:function(e){var t=e.target,n=e.completed,o=e.cancel;Ot&&~bt.indexOf(t)&&(n(!1),o())},revert:function(e){var t=e.fromSortable,n=e.rootEl,o=e.sortable,a=e.dragRect;bt.length>1&&(bt.forEach((function(e){o.addAnimationState({target:e,rect:Ot?A(e):a}),V(e),e.fromRect=a,t.removeAnimationState(e)})),Ot=!1,function(e,t){bt.forEach((function(n,o){var a=t.children[n.sortableIndex+(e?Number(o):0)];a?t.insertBefore(n,a):t.appendChild(n)}))}(!this.options.removeCloneOnHide,n))},dragOverCompleted:function(e){var t=e.sortable,n=e.isOwner,o=e.insertion,a=e.activeSortable,i=e.parentEl,s=e.putSortable,r=this.options;if(o){if(n&&a._hideClone(),jt=!1,r.animation&&bt.length>1&&(Ot||!n&&!a.options.sort&&!s)){var l=A(ht,!1,!0,!0);bt.forEach((function(e){e!==ht&&(U(e,l),i.appendChild(e))})),Ot=!0}if(!n)if(Ot||Zt(),bt.length>1){var c=ft;a._showClone(t),a.options.animation&&!ft&&c&&vt.forEach((function(e){a.addAnimationState({target:e,rect:gt}),e.fromRect=gt,e.thisAnimationDuration=null}))}else a._showClone(t)}},dragOverAnimationCapture:function(e){var t=e.dragRect,n=e.isOwner,o=e.activeSortable;if(bt.forEach((function(e){e.thisAnimationDuration=null})),o.options.animation&&!n&&o.multiDrag.isMultiDrag){gt=r({},t);var a=N(ht,!0);gt.top-=a.f,gt.left-=a.e}},dragOverAnimationComplete:function(){Ot&&(Ot=!1,Zt())},drop:function(e){var t=e.originalEvent,n=e.rootEl,o=e.parentEl,a=e.sortable,i=e.dispatchSortableEvent,s=e.oldIndex,r=e.putSortable,l=r||this.sortable;if(t){var c=this.options,d=o.children;if(!xt)if(c.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),w(ht,c.selectedClass,!~bt.indexOf(ht)),~bt.indexOf(ht))bt.splice(bt.indexOf(ht),1),pt=null,q({sortable:a,rootEl:n,name:"deselect",targetEl:ht,originalEvent:t});else{if(bt.push(ht),q({sortable:a,rootEl:n,name:"select",targetEl:ht,originalEvent:t}),t.shiftKey&&pt&&a.el.contains(pt)){var u,p,m=I(pt),h=I(ht);if(~m&&~h&&m!==h)for(h>m?(p=m,u=h):(p=h,u=m+1);p<u;p++)~bt.indexOf(d[p])||(w(d[p],c.selectedClass,!0),bt.push(d[p]),q({sortable:a,rootEl:n,name:"select",targetEl:d[p],originalEvent:t}))}else pt=ht;mt=l}if(xt&&this.isMultiDrag){if(Ot=!1,(o[G].options.sort||o!==n)&&bt.length>1){var g=A(ht),f=I(ht,":not(."+this.options.selectedClass+")");if(!jt&&c.animation&&(ht.thisAnimationDuration=null),l.captureAnimationState(),!jt&&(c.animation&&(ht.fromRect=g,bt.forEach((function(e){if(e.thisAnimationDuration=null,e!==ht){var t=Ot?A(e):g;e.fromRect=t,l.addAnimationState({target:e,rect:t})}}))),Zt(),bt.forEach((function(e){d[f]?o.insertBefore(e,d[f]):o.appendChild(e),f++})),s===I(ht))){var b=!1;bt.forEach((function(e){e.sortableIndex===I(e)||(b=!0)})),b&&i("update")}bt.forEach((function(e){V(e)})),l.animateAll()}mt=l}(n===o||r&&"clone"!==r.lastPutMode)&&vt.forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))}},nullingGlobal:function(){this.isMultiDrag=xt=!1,vt.length=0},destroyGlobal:function(){this._deselectMultiDrag(),O(document,"pointerup",this._deselectMultiDrag),O(document,"mouseup",this._deselectMultiDrag),O(document,"touchend",this._deselectMultiDrag),O(document,"keydown",this._checkKeyDown),O(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if(!(void 0!==xt&&xt||mt!==this.sortable||e&&C(e.target,this.options.draggable,this.sortable.el,!1)||e&&0!==e.button))for(;bt.length;){var t=bt[0];w(t,this.options.selectedClass,!1),bt.shift(),q({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:t,originalEvent:e})}},_checkKeyDown:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},r(e,{pluginName:"multiDrag",utils:{select:function(e){var t=e.parentNode[G];t&&t.options.multiDrag&&!~bt.indexOf(e)&&(mt&&mt!==t&&(mt.multiDrag._deselectMultiDrag(),mt=t),w(e,t.options.selectedClass,!0),bt.push(e))},deselect:function(e){var t=e.parentNode[G],n=bt.indexOf(e);t&&t.options.multiDrag&&~n&&(w(e,t.options.selectedClass,!1),bt.splice(n,1))}},eventProperties:function(){var e=this,t=[],n=[];return bt.forEach((function(o){var a;t.push({multiDragElement:o,index:o.sortableIndex}),a=Ot&&o!==ht?-1:Ot?I(o,":not(."+e.options.selectedClass+")"):I(o),n.push({multiDragElement:o,index:a})})),{items:c(bt),clones:[].concat(vt),oldIndicies:t,newIndicies:n}},optionListeners:{multiDragKey:function(e){return"ctrl"===(e=e.toLowerCase())?e="Control":e.length>1&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e}}})}function Ct(e,t){vt.forEach((function(n,o){var a=t.children[n.sortableIndex+(e?Number(o):0)];a?t.insertBefore(n,a):t.appendChild(n)}))}function Zt(){bt.forEach((function(e){e!==ht&&e.parentNode&&e.parentNode.removeChild(e)}))}Ve.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?j(document,"dragover",this._handleAutoScroll):this.options.supportPointer?j(document,"pointermove",this._handleFallbackAutoScroll):t.touches?j(document,"touchmove",this._handleFallbackAutoScroll):j(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?O(document,"dragover",this._handleAutoScroll):(O(document,"pointermove",this._handleFallbackAutoScroll),O(document,"touchmove",this._handleFallbackAutoScroll),O(document,"mousemove",this._handleFallbackAutoScroll)),it(),at(),clearTimeout(Z),Z=void 0},nulling:function(){et=Ke=Xe=ot=tt=Je=Qe=null,nt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,o=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,i=document.elementFromPoint(o,a);if(et=e,t||this.options.forceAutoScrollFallback||m||p||g){rt(e,this.options,i,t);var s=D(i,!0);!ot||tt&&o===Je&&a===Qe||(tt&&it(),tt=setInterval((function(){var i=D(document.elementFromPoint(o,a),!0);i!==s&&(s=i,at()),rt(e,n.options,i,t)}),10),Je=o,Qe=a)}else{if(!this.options.bubbleScroll||D(i,!0)===T())return void at();rt(e,this.options,D(i,!1),!1)}}},r(e,{pluginName:"scroll",initializeByDefault:!0})}),Ve.mount(dt,ct);const Et=Ve}}]);