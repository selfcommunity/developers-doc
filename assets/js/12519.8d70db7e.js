"use strict";(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[12519],{44267:(e,t,n)=>{n.d(t,{Z:()=>g});var o=n(83117),r=n(80102),i=n(67294),a=n(63961),s=n(58510),c=n(90948),u=n(71657),l=n(1977),d=n(8027);function m(e){return(0,d.ZP)("MuiCardContent",e)}(0,l.Z)("MuiCardContent",["root"]);var p=n(85893);const h=["className","component"],v=(0,c.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),g=i.forwardRef((function(e,t){const n=(0,u.Z)({props:e,name:"MuiCardContent"}),{className:i,component:c="div"}=n,l=(0,r.Z)(n,h),d=(0,o.Z)({},n,{component:c}),g=(e=>{const{classes:t}=e;return(0,s.Z)({root:["root"]},m,t)})(d);return(0,p.jsx)(v,(0,o.Z)({as:c,className:(0,a.Z)(g.root,i),ownerState:d,ref:t},l))}))},57922:(e,t,n)=>{n.d(t,{Z:()=>w});var o=n(80102),r=n(83117),i=n(67294),a=n(63961),s=n(98885),c=n(39192),u=n(58510),l=n(90948),d=n(71657),m=n(96067),p=n(30577),h=n(2734),v=n(51705),g=n(1977),Z=n(8027);function f(e){return(0,Z.ZP)("MuiCollapse",e)}(0,g.Z)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);var E=n(85893);const y=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],b=(0,l.ZP)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],"entered"===n.state&&t.entered,"exited"===n.state&&!n.in&&"0px"===n.collapsedSize&&t.hidden]}})((({theme:e,ownerState:t})=>(0,r.Z)({height:0,overflow:"hidden",transition:e.transitions.create("height")},"horizontal"===t.orientation&&{height:"auto",width:0,transition:e.transitions.create("width")},"entered"===t.state&&(0,r.Z)({height:"auto",overflow:"visible"},"horizontal"===t.orientation&&{width:"auto"}),"exited"===t.state&&!t.in&&"0px"===t.collapsedSize&&{visibility:"hidden"}))),S=(0,l.ZP)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})((({ownerState:e})=>(0,r.Z)({display:"flex",width:"100%"},"horizontal"===e.orientation&&{width:"auto",height:"100%"}))),C=(0,l.ZP)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})((({ownerState:e})=>(0,r.Z)({width:"100%"},"horizontal"===e.orientation&&{width:"auto",height:"100%"}))),_=i.forwardRef((function(e,t){const n=(0,d.Z)({props:e,name:"MuiCollapse"}),{addEndListener:l,children:g,className:Z,collapsedSize:_="0px",component:w,easing:O,in:R,onEnter:T,onEntered:x,onEntering:M,onExit:N,onExited:P,onExiting:I,orientation:L="vertical",style:B,timeout:$=m.x9.standard,TransitionComponent:A=s.ZP}=n,j=(0,o.Z)(n,y),V=(0,r.Z)({},n,{orientation:L,collapsedSize:_}),k=(e=>{const{orientation:t,classes:n}=e,o={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return(0,u.Z)(o,f,n)})(V),H=(0,h.Z)(),z=(0,c.Z)(),D=i.useRef(null),F=i.useRef(),W="number"==typeof _?`${_}px`:_,q="horizontal"===L,Y=q?"width":"height",U=i.useRef(null),K=(0,v.Z)(t,U),J=e=>t=>{if(e){const n=U.current;void 0===t?e(n):e(n,t)}},G=()=>D.current?D.current[q?"clientWidth":"clientHeight"]:0,Q=J(((e,t)=>{D.current&&q&&(D.current.style.position="absolute"),e.style[Y]=W,T&&T(e,t)})),X=J(((e,t)=>{const n=G();D.current&&q&&(D.current.style.position="");const{duration:o,easing:r}=(0,p.C)({style:B,timeout:$,easing:O},{mode:"enter"});if("auto"===$){const t=H.transitions.getAutoHeightDuration(n);e.style.transitionDuration=`${t}ms`,F.current=t}else e.style.transitionDuration="string"==typeof o?o:`${o}ms`;e.style[Y]=`${n}px`,e.style.transitionTimingFunction=r,M&&M(e,t)})),ee=J(((e,t)=>{e.style[Y]="auto",x&&x(e,t)})),te=J((e=>{e.style[Y]=`${G()}px`,N&&N(e)})),ne=J(P),oe=J((e=>{const t=G(),{duration:n,easing:o}=(0,p.C)({style:B,timeout:$,easing:O},{mode:"exit"});if("auto"===$){const n=H.transitions.getAutoHeightDuration(t);e.style.transitionDuration=`${n}ms`,F.current=n}else e.style.transitionDuration="string"==typeof n?n:`${n}ms`;e.style[Y]=W,e.style.transitionTimingFunction=o,I&&I(e)}));return(0,E.jsx)(A,(0,r.Z)({in:R,onEnter:Q,onEntered:ee,onEntering:X,onExit:te,onExited:ne,onExiting:oe,addEndListener:e=>{"auto"===$&&z.start(F.current||0,e),l&&l(U.current,e)},nodeRef:U,timeout:"auto"===$?null:$},j,{children:(e,t)=>(0,E.jsx)(b,(0,r.Z)({as:w,className:(0,a.Z)(k.root,Z,{entered:k.entered,exited:!R&&"0px"===W&&k.hidden}[e]),style:(0,r.Z)({[q?"minWidth":"minHeight"]:W},B),ref:K},t,{ownerState:(0,r.Z)({},V,{state:e}),children:(0,E.jsx)(S,{ownerState:(0,r.Z)({},V,{state:e}),className:k.wrapper,ref:D,children:(0,E.jsx)(C,{ownerState:(0,r.Z)({},V,{state:e}),className:k.wrapperInner,children:g})})}))}))}));_.muiSupportAuto=!0;const w=_},59334:(e,t,n)=>{n.d(t,{Z:()=>g});var o=n(80102),r=n(83117),i=n(67294),a=n(63961),s=n(58510),c=n(15861),u=n(59773),l=n(71657),d=n(90948),m=n(26336),p=n(85893);const h=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],v=(0,d.ZP)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${m.Z.primary}`]:t.primary},{[`& .${m.Z.secondary}`]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})((({ownerState:e})=>(0,r.Z)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},e.primary&&e.secondary&&{marginTop:6,marginBottom:6},e.inset&&{paddingLeft:56}))),g=i.forwardRef((function(e,t){const n=(0,l.Z)({props:e,name:"MuiListItemText"}),{children:d,className:g,disableTypography:Z=!1,inset:f=!1,primary:E,primaryTypographyProps:y,secondary:b,secondaryTypographyProps:S}=n,C=(0,o.Z)(n,h),{dense:_}=i.useContext(u.Z);let w=null!=E?E:d,O=b;const R=(0,r.Z)({},n,{disableTypography:Z,inset:f,primary:!!w,secondary:!!O,dense:_}),T=(e=>{const{classes:t,inset:n,primary:o,secondary:r,dense:i}=e,a={root:["root",n&&"inset",i&&"dense",o&&r&&"multiline"],primary:["primary"],secondary:["secondary"]};return(0,s.Z)(a,m.L,t)})(R);return null==w||w.type===c.Z||Z||(w=(0,p.jsx)(c.Z,(0,r.Z)({variant:_?"body2":"body1",className:T.primary,component:null!=y&&y.variant?void 0:"span",display:"block"},y,{children:w}))),null==O||O.type===c.Z||Z||(O=(0,p.jsx)(c.Z,(0,r.Z)({variant:"body2",className:T.secondary,color:"text.secondary",display:"block"},S,{children:O}))),(0,p.jsxs)(v,(0,r.Z)({className:(0,a.Z)(T.root,g),ownerState:R,ref:t},C,{children:[w,O]}))}))},34927:(e,t,n)=>{n.d(t,{Z:()=>h});var o=n(67294),r=n(24085),i=n(24243),a=n(59219),s=n(99960),c=n(74482),u=n(49794),l=n(69721),d=n(53704),m=n(68787),p=n(80427);function h({id:e,contribution:t=null,contributionType:n,onVote:h=null,cacheStrategy:v=a.n2.CACHE_FIRST}){const g=(0,o.useMemo)((()=>n===u.q.COMMENT?(0,l.ht)(e):(0,l._j)(e,n)),[e,n]),Z=(0,o.useMemo)((()=>n===u.q.COMMENT?r.Z.Comment:r.Z.FeedObject),[e,n]),[f,E]=(0,o.useState)(!1),[y,b]=(0,o.useState)(v!==a.n2.NETWORK_ONLY?a.ZP.get(g,t):t),[S,C]=(0,o.useState)(!1),[_,w]=(0,o.useState)(r.Z.VotesList.url({type:n,id:e})),[O,R]=(0,o.useState)([]),[T,x]=(0,o.useState)(!1),[M,N]=(0,o.useState)(null),P=(0,d.RM)(),I=(0,m.LD)(),L=(0,p.hW)(),B=(0,o.useMemo)((()=>{var e;return{default:null===(e=L.reactions)||void 0===e?void 0:e.find((e=>1===e.id)),reactions:L.reactions,isLoading:L.isLoading}}),[L.reactions,L.isLoading]),$=(0,o.useMemo)((()=>()=>(E(!0),i.Z.request({url:Z.url({type:n,id:e}),method:Z.method}).then((e=>(E(!1),e.status>=300?Promise.reject(e):Promise.resolve(e.data)))))),[e,n]),A=(0,o.useMemo)((()=>e=>{const t={};return e&&B.reactions&&(t.reaction=e.id),i.Z.request({url:r.Z.Vote.url({type:y.type,id:y.id}),method:r.Z.Vote.method,params:t}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))}),[y,P]);(0,o.useEffect)((()=>{(v!==a.n2.CACHE_FIRST||!y||I.user&&!Object.prototype.hasOwnProperty.call(y,"voted"))&&$().then((e=>{b(e),a.ZP.set(g,e)})).catch((t=>{a.ZP.delete(g),N(`FeedObject with id ${e} not found`),s.Y.error(c.h,`FeedObject with id ${e} not found`),s.Y.error(c.h,t.message)}))}),[e,n,I.user]),(0,o.useEffect)((()=>{t&&b(t)}),[t]);const j=(0,o.useMemo)((()=>({contributionVoted:!!y&&y.voted,contributionVoteCount:y?y.vote_count:0,contributionReaction:y?y.reaction:null,contributionReactionsCount:y?y.reactions_count:null})),[y]);return Object.assign(Object.assign({},j),{isLoading:f,isVoting:S,handleVote:e=>{I.user&&y&&!S&&(C(!0),A(e).then((()=>{var t,n;let o={voted:!y.voted,vote_count:y.voted?y.vote_count-1:y.vote_count+1};if(e&&(null===(t=null==y?void 0:y.reaction)||void 0===t?void 0:t.id)!==e.id){const t=!(null==y?void 0:y.reaction),n=-1===y.reactions_count.findIndex((t=>t.reaction.id===e.id));o={voted:!!t||y.voted,vote_count:t?y.vote_count+1:y.vote_count,reaction:e,reactions_count:[...y.reactions_count.map((t=>{var n,o;return t.reaction.id===(null===(n=null==y?void 0:y.reaction)||void 0===n?void 0:n.id)&&t.count-1==0?null:t.reaction.id===(null===(o=null==y?void 0:y.reaction)||void 0===o?void 0:o.id)&&t.count-1>0?{count:t.count-1,reaction:t.reaction}:t.reaction.id===e.id?{count:t.count+1,reaction:t.reaction}:t})),n?{count:1,reaction:e}:null].filter((e=>Boolean(e)))}}else e&&(null==y?void 0:y.reaction)&&(null===(n=null==y?void 0:y.reaction)||void 0===n?void 0:n.id)===e.id&&(o=Object.assign({},o,{reaction:null,reactions_count:y.reactions_count.map((e=>{var t,n;return e.reaction.id===(null===(t=null==y?void 0:y.reaction)||void 0===t?void 0:t.id)&&e.count-1==0?null:e.reaction.id===(null===(n=null==y?void 0:y.reaction)||void 0===n?void 0:n.id)&&e.count-1>0?{count:e.count-1,reaction:e.reaction}:e})).filter((e=>Boolean(e)))}));const r=Object.assign({},y,o);b(r),C(!1),h&&h(r,null)})).catch((e=>{s.Y.error(c.h,e),C(!1),h&&h(y,e)})))},reactions:B,error:M,handleFetchVoteList:({reaction:t=null,reset:o=!1})=>{const a=o?`${r.Z.VotesList.url({type:n,id:e})}${t?`?reaction=${t.id}`:""}`:_;x(!0),i.Z.request({url:a,method:r.Z.VotesList.method}).then((e=>{R(o?e.data.results:[...O,...e.data.results]),w(e.data.next)})).catch((e=>N(e))).then((()=>x(!1)))},voteList:O,isLoadingVoteList:T,voteListHasNext:Boolean(_)})}},44854:(e,t,n)=>{n.d(t,{Z:()=>S});var o=n(67294),r=n(90948),i=n(5616),a=n(22319),s=n(74482),c=n(24243),u=n(24085),l=n(59219),d=n(99960),m=n(69721);var p=n(94184),h=n.n(p),v=n(29628),g=n(54545),Z=n(87620),f=n(86388);const E="SCCustomAdv",y={root:`${E}-root`,wrap:`${E}-wrap`,image:`${E}-image`,embedCode:`${E}-embed-code`,prefixedHeight:`${E}-prefixed-height`},b=(0,r.ZP)(i.Z,{name:E,slot:"Root"})((()=>({})));const S=function(e){const t=(0,v.Z)({props:e,name:E}),{id:n="custom_adv",className:r,advId:p=null,position:S,categoriesId:C,prefixedHeight:_,onStateChange:w,onHeightChange:O}=t,R=(0,a.Z)(),T=(0,o.useRef)(0),{scCustomAdv:x}=function({id:e=null,position:t=null,categoriesId:n=null,cacheStrategy:r=l.n2.CACHE_FIRST}){const[i,p]=(0,o.useState)(null!==e&&r===l.n2.CACHE_FIRST&&l.ZP.get((0,m.eg)(e))?l.ZP.get((0,m.eg)(e)):null),[h,v]=(0,o.useState)(null),g=(0,a.Z)(),Z=(0,o.useMemo)((()=>e=>{e.map((e=>{l.ZP.set((0,m.eg)(e.id),e)}))}),[]),f=(0,o.useMemo)((()=>()=>null!==e?c.Z.request({url:u.Z.CustomAdv.url({id:e}),method:u.Z.CustomAdv.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve([e.data]))):c.Z.request({url:u.Z.CustomAdvSearch.url({}),method:u.Z.CustomAdvSearch.method,params:Object.assign(Object.assign({},t&&{position:t}),{categories:n?`[${n.toString()}]`:"[]"})}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data.results)))),[e,t,`${n}`]);return(0,o.useEffect)((()=>{i&&r===l.n2.CACHE_FIRST||f().then((e=>{g.current&&p(e[Math.floor(Math.random()*e.length)]),Z(e)})).catch((e=>{g.current&&v(`Custom ADV with position ${t} not found`),d.Y.error(s.h,`Custom ADV with position ${t} not found`),d.Y.error(s.h,e.message)}))}),[e,t,`${n}`,i]),{scCustomAdv:i,setSCCustomAdv:p,error:h}}({id:p,position:S,categoriesId:C});(0,Z.F_)((()=>{x&&w&&w({advId:x.id,prefixedHeight:T.current}),O&&O()}),[x]);const{ref:M}=(0,f.Z)({round:e=>e,onResize:({width:e,height:t})=>{R.current&&(T.current=t,w&&w({advId:x.id,prefixedHeight:t}))}});if(!x)return o.createElement(g.Z,null);const N=o.createElement(i.Z,{className:y.wrap},x.image&&o.createElement("img",{src:x.image,alt:x.title,className:h()(y.image,{[y.prefixedHeight]:Boolean(_)})}),x.embed_code&&o.createElement(i.Z,{className:h()(y.embedCode,{[y.prefixedHeight]:Boolean(_)}),dangerouslySetInnerHTML:{__html:x.embed_code}}));return o.createElement(b,{id:n,className:h()(y.root,r),ref:M,style:Object.assign({},_?{paddingBottom:_}:{width:"100%"})},x.link?o.createElement("a",{href:x.link,title:x.title},N):N)}},85050:(e,t,n)=>{n.d(t,{Z:()=>T});var o=n(97582),r=n(67294),i=n(90948),a=n(31812),s=n(94184),c=n.n(s),u=n(29628),l=n(67564),d=n(82123),m=n(2734),p=n(61730),h=n(34386),v=n(90629),g=n(93946),Z=n(53704),f=n(68787),E=n(65580),y=n(34927),b=n(44012),S=n(20377),C=n(56581);const _="SCVoteButton",w={root:`${_}-root`,voted:`${_}-voted`,popperRoot:`${_}-popper-root`,reactionList:`${_}-reaction-list`,reaction:`${_}-reaction`},O=(0,i.ZP)(a.Z,{name:_,slot:"Root",overridesResolver:(e,t)=>[t.root,t.voted]})((({theme:e})=>({}))),R=(0,i.ZP)(d.Z,{name:_,slot:"Root",overridesResolver:(e,t)=>t.popperRoot})((()=>({})));const T=function(e){const t=(0,u.Z)({props:e,name:_}),{className:n,contributionId:i,contributionType:a,contribution:s=null,onVote:d}=t,T=(0,o._T)(t,["className","contributionId","contributionType","contribution","onVote"]),[x,M]=(0,r.useState)(null),N=(0,r.useRef)(null),P=(0,Z.RM)(),I=(0,f.LD)(),{enqueueSnackbar:L}=(0,S.Ds)(),B=e=>{A(),N.current=setTimeout((()=>M(e.target)),1e3)},$=e=>{A(),N.current=setTimeout((()=>M(null)),500)},A=()=>{N.current&&clearTimeout(N.current),N.current=null},j=e=>{I.user?E.IT(I.user)?L(r.createElement(b.Z,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3}):F(e):P.settings.handleAnonymousAction()},{isLoading:V,isVoting:k,contributionVoted:H,contributionReaction:z,reactions:D,handleVote:F,error:W}=(0,y.Z)({id:i,contributionType:a,contribution:s,onVote:(e,t)=>{M(null),t?(0,C.w)(t,I.managers.blockedUsers.isBlocked(e.author),L)||L(r.createElement(b.Z,{id:"ui.common.error.action",defaultMessage:"ui.common.error.action"}),{variant:"error",autoHideDuration:3e3}):d&&d(e)}}),q=(0,m.Z)(),Y=(0,p.Z)(q.breakpoints.down("md")),U=(0,r.useMemo)((()=>D.default?{onMouseEnter:B,onMouseLeave:$}:{}),[D]),K=r.createElement(O,Object.assign({onClick:Y?B:()=>j(z||(D.default?D.default:null)),disabled:V||Boolean(W),loading:k,className:c()(w.root,n,{[w.voted]:I.user&&H})},T,U),I.user&&H?z?r.createElement(l.Z,null,r.createElement("img",{alt:z.label,src:z.image,width:"100%",height:"100%"})):r.createElement(l.Z,null,"thumb_up"):r.createElement(l.Z,null,"thumb_up_off_alt"));return r.createElement(r.Fragment,null,D.default?K:r.createElement(h.Z,{title:H?r.createElement(b.Z,{id:"ui.voteButton.voteDown",defaultMessage:"ui.voteButton.voteDown"}):r.createElement(b.Z,{id:"ui.voteButton.voteUp",defaultMessage:"ui.voteButton.voteUp"})},r.createElement("span",null,K)),D.default&&r.createElement(R,{id:`vote_${i}_${a}_popper`,className:w.popperRoot,open:Boolean(x)&&!k&&!V,anchorEl:x,placement:"top",keepMounted:!0},r.createElement(v.Z,{className:w.reactionList,onMouseEnter:A,onMouseLeave:$},D.reactions.map((e=>r.createElement(g.Z,{key:e.id,className:w.reaction,onClick:()=>j(e)},r.createElement(l.Z,null,r.createElement("img",{alt:e.label,src:e.image,width:"100%",height:"100%"}))))))))}},72871:(e,t,n)=>{n.d(t,{Im:()=>r,ig:()=>o,vT:()=>i});const o=10,r=0,i="page"},51575:(e,t,n)=>{n.d(t,{Z:()=>m});var o=n(97582),r=n(67294),i=n(90948),a=n(29628),s=n(94184),c=n.n(s);const u="SCBullet",l={root:`${u}-root`},d=(0,i.ZP)("span",{name:u,slot:"Root",overridesResolver:(e,t)=>[t.root]})((()=>({})));function m(e){const t=(0,a.Z)({props:e,name:u}),{className:n}=t,i=(0,o._T)(t,["className"]);return r.createElement(d,Object.assign({className:c()(n,l.root)},i),"\u2022")}},54545:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(67294);const r=(0,n(90948).ZP)("div",{name:"SCHiddenPlaceholder",slot:"Root",overridesResolver:(e,t)=>[t.root]})((()=>({height:1,width:"100%",display:"none"})));function i(e){return o.createElement(r,Object.assign({},e))}},83781:(e,t,n)=>{var o;n.d(t,{n:()=>o}),function(e){e.POSITION_BELOW_TOPBAR="BELOW_TOPBAR",e.POSITION_BELOW_FEED_OBJECT="BELOW_THE_POST",e.POSITION_ABOVE_FOOTER_BAR="ABOVE_FOOTER_BAR",e.POSITION_FOOTER_STICKY="FOOTER_STICKY",e.POSITION_IN_COMMENTS="IN_POST_COMMENTS",e.POSITION_RELATED_POSTS_COLUMN="RELATED_POSTS_COLUMN",e.POSITION_FEED_SIDEBAR="TOOLS_COLUMN",e.POSITION_FEED="IN_STREAM"}(o||(o={}))},86388:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(67294);function r(e,t,n){return e[t]?e[t][0]?e[t][0][n]:e[t][n]:"contentBoxSize"===t?e.contentRect["inlineSize"===n?"width":"height"]:void 0}function i(e){void 0===e&&(e={});var t=e.onResize,n=(0,o.useRef)(void 0);n.current=t;var i=e.round||Math.round,a=(0,o.useRef)(),s=(0,o.useState)({width:void 0,height:void 0}),c=s[0],u=s[1],l=(0,o.useRef)(!1);(0,o.useEffect)((function(){return l.current=!1,function(){l.current=!0}}),[]);var d=(0,o.useRef)({width:void 0,height:void 0}),m=function(e,t){var n=(0,o.useRef)(null),r=(0,o.useRef)(null);r.current=t;var i=(0,o.useRef)(null);(0,o.useEffect)((function(){a()}));var a=(0,o.useCallback)((function(){var t=i.current,o=r.current,a=t||(o?o instanceof Element?o:o.current:null);n.current&&n.current.element===a&&n.current.subscriber===e||(n.current&&n.current.cleanup&&n.current.cleanup(),n.current={element:a,subscriber:e,cleanup:a?e(a):void 0})}),[e]);return(0,o.useEffect)((function(){return function(){n.current&&n.current.cleanup&&(n.current.cleanup(),n.current=null)}}),[]),(0,o.useCallback)((function(e){i.current=e,a()}),[a])}((0,o.useCallback)((function(t){return a.current&&a.current.box===e.box&&a.current.round===i||(a.current={box:e.box,round:i,instance:new ResizeObserver((function(t){var o=t[0],a="border-box"===e.box?"borderBoxSize":"device-pixel-content-box"===e.box?"devicePixelContentBoxSize":"contentBoxSize",s=r(o,a,"inlineSize"),c=r(o,a,"blockSize"),m=s?i(s):void 0,p=c?i(c):void 0;if(d.current.width!==m||d.current.height!==p){var h={width:m,height:p};d.current.width=m,d.current.height=p,n.current?n.current(h):l.current||u(h)}}))}),a.current.instance.observe(t,{box:e.box}),function(){a.current&&a.current.instance.unobserve(t)}}),[e.box,i]),e.ref);return(0,o.useMemo)((function(){return{ref:m,width:c.width,height:c.height}}),[m,c.width,c.height])}}}]);