"use strict";(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[24472],{92991:(e,t,o)=>{o.d(t,{Z:()=>m});var r=o(67294),n=o(27331),i=o(5730);function s(e,t){void 0===e&&(e=""),void 0===t&&(t={});const o=Object.keys(t).map((e=>encodeURIComponent(e)+"="+encodeURIComponent(t[e]))).join("&");return fetch(e,{method:"POST",headers:{accept:"application/json","content-type":"application/x-www-form-urlencoded"},body:o})}function a(){if((0,i.Z)()){const e={refresh_token:JSON.parse(window.localStorage.getItem("token")).refresh_token,client_id:n.r.user.client_id,grant_type:"refresh_token"};return s(`${n.r.portal}/oauth/token/`,e).then((e=>e.json())).then((e=>({accessToken:e.access_token,refreshToken:e.refresh_token,tokenType:e.token_type,expiresIn:e.expires_in}))).catch((e=>Promise.reject(e)))}}function c(){const e=(0,i.Z)(),[t,o]=(0,r.useState)(e?JSON.parse(window.localStorage.getItem("token")):"");return(0,r.useEffect)((()=>{e&&(!t||1e3*t.expiresIn<Date.now()?s(`${n.r.portal}/oauth/token/`,n.r.user).then((e=>e.json())).then((e=>({accessToken:e.access_token,refreshToken:e.refresh_token,tokenType:e.token_type,expiresIn:e.expires_in}))).catch((e=>e)).then((e=>{o(e)})):e&&o(JSON.parse(window.localStorage.getItem("token"))))}),[e]),(0,r.useEffect)((()=>{e&&window.localStorage.setItem("token",JSON.stringify(t))}),[e,t]),t}var d=o(53704),l=o(21367),u=o(19666),g=o(85893);function m(e){let{children:t}=e;const o=c(),r={portal:n.r.portal,locale:{default:"en"},session:{type:"OAuth",clientId:n.r.user.client_id,authToken:o,handleRefreshToken:a},theme:l.Z,handleAnonymousAction:()=>{alert("Anonymous action")}};return(0,g.jsx)(u.Z,{children:()=>(0,g.jsx)(d.ZP,{conf:r,children:t})})}},27331:(e,t,o)=>{o.d(t,{r:()=>r});const r={user:{username:"beatrice",password:"Password!!Beatrice2021",client_id:"XJjPE54IBBjhibs0Rf0wZ969cZNPq6WjC02FrkaM",grant_type:"password"},portal:"https://api.fashionista.community"}},98789:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>c,default:()=>m,frontMatter:()=>a,metadata:()=>d,toc:()=>u});var r=o(85893),n=o(11151),i=o(92991),s=o(81820);const a={sidebar_label:"Category Trending Feed Widget",sidebar_position:1,title:"Category Trending Feed Widget"},c=void 0,d={id:"sdk/community-js/react-ui/Components/CategoryTrendingFeed",title:"Category Trending Feed Widget",description:"The Category Trending Feed Widget renders a specific category's trending posts, discussions, statuses list.",source:"@site/docs/sdk/community-js/react-ui/Components/CategoryTrendingFeed.mdx",sourceDirName:"sdk/community-js/react-ui/Components",slug:"/sdk/community-js/react-ui/Components/CategoryTrendingFeed",permalink:"/docs/sdk/community-js/react-ui/Components/CategoryTrendingFeed",draft:!1,unlisted:!1,editUrl:"https://github.com/selfcommunity/developers-doc/tree/main/docs/sdk/community-js/react-ui/Components/CategoryTrendingFeed.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_label:"Category Trending Feed Widget",sidebar_position:1,title:"Category Trending Feed Widget"},sidebar:"sdkSidebar",previous:{title:"Category Header",permalink:"/docs/sdk/community-js/react-ui/Components/CategoryHeader"},next:{title:"Category Trending Users Widget",permalink:"/docs/sdk/community-js/react-ui/Components/CategoryTrendingUsers"}},l={},u=[{value:"Usage",id:"usage",level:4}];function g(e){const t={blockquote:"blockquote",code:"code",h4:"h4",p:"p",pre:"pre",...(0,n.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsxs)(t.p,{children:["The Category Trending Feed Widget renders a specific category's trending posts, discussions, statuses list.",(0,r.jsx)("br",{}),'\nThis list is composed of feed object items containing the avatar and username of the author, the item content, the date of creation of the same\nand a "comment" button that allows users to browse to the post, discussion or status extended version.',(0,r.jsx)("br",{}),'\nThe feed objects are shown in an orderly manner: few items are shown in the main card while the others can be displayed in a modal card by clicking on the "show more" button.']}),"\n"]}),"\n","\n","\n",(0,r.jsx)(i.Z,{children:(0,r.jsx)(s.Z,{categoryId:5,template:"snippet",elevation:1})}),"\n",(0,r.jsx)(t.h4,{id:"usage",children:"Usage"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-jsx",children:" import React from 'react';\n import {SCContextProvider} from '@selfcommunity/react-core';\n import {CategoryTrendingFeedWidget} from '@selfcommunity/react-ui';\n\n function App() {\n   const conf = {\n     portal: '<community-path>',\n     session: {\n       type: 'OAuth',\n       token: '<community-token>',\n       refreshToken: '<community-refresh-token>',\n       refreshTokenEndpoint: '<community-refresh-endpoint>',\n     },\n   };\n   return (\n     <SCContextProvider conf={conf}><CategoryTrendingFeedWidget /></SCContextProvider>\n   );\n }\n"})})]})}function m(e={}){const{wrapper:t}={...(0,n.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(g,{...e})}):g(e)}},98704:(e,t,o)=>{o.d(t,{Z:()=>c});var r=o(97582),n=o(24085),i=o(91705),s=o(66821);class a{static getAllCategories(e,t){const o=(0,s.B)(e);return(0,i.N)(Object.assign({url:`${n.Z.CategoryList.url({})}?${o.toString()}`,method:n.Z.CategoryList.method},t))}static searchCategory(e,t){const o=(0,s.B)(e);return(0,i.N)(Object.assign({url:`${n.Z.SearchCategory.url({})}?${o.toString()}`,method:n.Z.SearchCategory.method},t))}static createCategory(e,t){return(0,i.N)(Object.assign({url:n.Z.CreateCategory.url({}),method:n.Z.CreateCategory.method,data:e},t))}static getSpecificCategory(e,t){return(0,i.N)(Object.assign({url:n.Z.Category.url({id:e}),method:n.Z.Category.method},t))}static updateASpecificCategory(e,t,o){return(0,i.N)(Object.assign({url:n.Z.UpdateCategory.url({id:e}),method:n.Z.UpdateCategory.method,data:t},o))}static patchASpecificCategory(e,t,o){return(0,i.N)(Object.assign({url:n.Z.PatchCategory.url({id:e}),method:n.Z.PatchCategory.method,data:t},o))}static deleteASpecificCategory(e,t){return(0,i.N)(Object.assign({url:n.Z.DeleteCategory.url({id:e}),method:n.Z.DeleteCategory.method},t))}static getCategoryAudience(e,t){return(0,i.N)(Object.assign({url:n.Z.CategoryAudience.url({id:e}),method:n.Z.CategoryAudience.method},t))}static getCategoryFollowers(e,t,o){return(0,i.N)(Object.assign({url:n.Z.CategoryFollowers.url({id:e}),method:n.Z.CategoryFollowers.method,params:t},o))}static getCategoryFeed(e,t,o){return(0,i.N)(Object.assign({url:n.Z.CategoryFeed.url({id:e}),method:n.Z.CategoryFeed.method,params:t},o))}static getCategoryTrendingFeed(e,t,o){const r=(0,s.B)(t);return(0,i.N)(Object.assign({url:`${n.Z.CategoryTrendingFeed.url({id:e})}?${r.toString()}`,method:n.Z.CategoryTrendingFeed.method},o))}static getCategoryTrendingFollowers(e,t,o){return(0,i.N)(Object.assign({url:n.Z.CategoryTrendingPeople.url({id:e}),method:n.Z.CategoryTrendingPeople.method,params:t},o))}static followCategory(e,t){return(0,i.N)(Object.assign({url:n.Z.FollowCategory.url({id:e}),method:n.Z.FollowCategory.method},t))}static checkCategoryIsFollowed(e,t){return(0,i.N)(Object.assign({url:n.Z.CheckCategoryIsFollowed.url({id:e}),method:n.Z.CheckCategoryIsFollowed.method},t))}static getFollowedCategories(e,t){const o=(0,s.B)(e);return(0,i.N)(Object.assign({url:`${n.Z.CategoriesFollowed.url({})}?${o.toString()}`,method:n.Z.CategoriesFollowed.method},t))}static getPopularCategories(e,t){const o=(0,s.B)(e);return(0,i.N)(Object.assign(Object.assign({},t),{url:`${n.Z.PopularCategories.url({})}?${o.toString()}`,method:n.Z.PopularCategories.method}))}}class c{static getAllCategories(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){return a.getAllCategories(e,t)}))}static searchCategory(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){return a.searchCategory(e,t)}))}static createCategory(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){return a.createCategory(e,t)}))}static getSpecificCategory(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){return a.getSpecificCategory(e,t)}))}static updateASpecificCategory(e,t,o){return(0,r.mG)(this,void 0,void 0,(function*(){return a.updateASpecificCategory(e,t,o)}))}static patchASpecificCategory(e,t,o){return(0,r.mG)(this,void 0,void 0,(function*(){return a.patchASpecificCategory(e,t,o)}))}static deleteASpecificCategory(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){return a.deleteASpecificCategory(e,t)}))}static getCategoryAudience(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){return a.getCategoryAudience(e,t)}))}static getCategoryFollowers(e,t,o){return(0,r.mG)(this,void 0,void 0,(function*(){return a.getCategoryFollowers(e,t,o)}))}static getCategoryFeed(e,t,o){return(0,r.mG)(this,void 0,void 0,(function*(){return a.getCategoryFeed(e,t,o)}))}static getCategoryTrendingFeed(e,t,o){return(0,r.mG)(this,void 0,void 0,(function*(){return a.getCategoryTrendingFeed(e,t,o)}))}static getCategoryTrendingFollowers(e,t,o){return(0,r.mG)(this,void 0,void 0,(function*(){return a.getCategoryTrendingFollowers(e,t,o)}))}static followCategory(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){return a.followCategory(e,t)}))}static checkCategoryIsFollowed(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){return a.checkCategoryIsFollowed(e,t)}))}static getFollowedCategories(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){return a.getFollowedCategories(e,t)}))}static getPopularCategories(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){return a.getPopularCategories(e,t)}))}}},98365:(e,t,o)=>{o.d(t,{Z:()=>m});var r=o(67294),n=o(74482),i=o(65001),s=o(24085),a=o(59219),c=o(96570),d=o(99960),l=o(69721),u=o(87620),g=o(68689);function m({id:e=null,category:t=null,cacheStrategy:o=a.n2.CACHE_FIRST}){const m=t?t.id:e,y=(0,g.LD)(),h=y.user?y.user.id:null,p=(0,l.u5)(m),C=h?t:(0,c.Kd)(t,["followed"]),[f,b]=(0,r.useState)(o!==a.n2.NETWORK_ONLY?a.ZP.get(p,C):null),[v,E]=(0,r.useState)(null),_=(0,r.useMemo)((()=>()=>i.Z.request({url:s.Z.Category.url({id:m}),method:s.Z.Category.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[m]);return(0,r.useEffect)((()=>{m&&(!f||f&&m!==f.id)&&_().then((e=>{const t=h?e:(0,c.Kd)(e,["followed"]);b(t),a.ZP.set(p,t)})).catch((t=>{a.ZP.delete(p),E(`Category with id ${e} not found`),d.Y.error(n.h,`Category with id ${e} not found`),d.Y.error(n.h,t.message)}))}),[m]),(0,u.F_)((()=>{if(t){const e=h?t:(0,c.Kd)(t,["followed"]);b(e),a.ZP.set(p,e)}}),[t]),{scCategory:f,setSCCategory:b,error:v}}},45431:(e,t,o)=>{o.d(t,{Z:()=>g});var r=o(67294),n=o(63902),i=o(78462),s=o(90948),a=o(12805),c=o(44267),d=o(89546);const l={root:`${d.B}-skeleton-root`,list:`${d.B}-list`},u=(0,s.ZP)(n.Z,{name:d.B,slot:"SkeletonRoot"})((()=>({})));function g(e){return r.createElement(u,Object.assign({className:l.root},e),r.createElement(c.Z,null,r.createElement(i.Z,{className:l.list},[...Array(4)].map(((e,t)=>r.createElement(a.Z,{key:t,elevation:0}))))))}},89546:(e,t,o)=>{o.d(t,{B:()=>r});const r="SCCategoryTrendingFeedWidget"},81820:(e,t,o)=>{o.d(t,{Z:()=>$});var r=o(97582),n=o(67294),i=o(90948),s=o(78462),a=o(2734),c=o(98396),d=o(44267),l=o(15861),u=o(97212),g=o(69417),m=o(63902),y=o(98704),h=o(65001),p=o(24085),C=o(59219),f=o(99960),b=o(5840),v=o(75459),E=o(38509),_=o(12805),O=o(44012),S=o(37024),Z=o(94184),T=o.n(Z),N=o(39154),j=o(79558),F=o(45431),k=o(29628),x=o(54545),L=o(69721),w=o(68689),A=o(66380),I=o(41538),P=o(85472),R=o(98365),U=o(97265),D=o(12132),G=o(15927),M=o(89546);const W={root:`${M.B}-root`,title:`${M.B}-title`,noResults:`${M.B}-no-results`,showMore:`${M.B}-show-more`,dialogRoot:`${M.B}-dialog-root`,endMessage:`${M.B}-end-message`},B=(0,i.ZP)(m.Z,{name:M.B,slot:"Root"})((()=>({}))),K=(0,i.ZP)(N.Z,{name:M.B,slot:"DialogRoot"})((()=>({})));const $=function(e){const t=(0,k.Z)({props:e,name:M.B}),{className:o=null,categoryId:i=null,autoHide:m=null,limit:Z=3,FeedObjectProps:N={template:S.r.SNIPPET},cacheStrategy:$=C.n2.CACHE_FIRST,onHeightChange:X,onStateChange:z,DialogProps:H={}}=t,V=(0,r._T)(t,["className","categoryId","autoHide","limit","FeedObjectProps","cacheStrategy","onHeightChange","onStateChange","DialogProps"]),[Y,J]=(0,n.useReducer)(G.Xi,{isLoadingNext:!1,next:null,cacheKey:L.hu(L.ol,i),cacheStrategy:$,visibleItems:Z},G.Mv),[q,Q]=(0,n.useState)(!1),ee=(0,w.LD)(),te=(0,A.ko)(),oe=(0,I.sy)(),re=(0,n.useMemo)((()=>P.Ao in te.preferences&&te.preferences[P.Ao].value),[te]),ne=(0,a.Z)(),ie=(0,c.Z)(ne.breakpoints.down("md")),{scCategory:se}=(0,R.Z)({id:i}),ae=se?se.id:null,ce=(0,n.useMemo)((()=>()=>{Y.initialized||Y.isLoadingNext||(J({type:G.dK.LOADING_NEXT}),y.Z.getCategoryTrendingFeed(ae,{limit:Z}).then((e=>{J({type:G.dK.LOAD_NEXT_SUCCESS,payload:Object.assign(Object.assign({},e),{initialized:!0})})})).catch((e=>{J({type:G.dK.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),f.Y.error(v.J,e)})))}),[ae,Y.isLoadingNext,Y.initialized,Z,J]);(0,n.useEffect)((()=>{var e;let t;if(void 0!==ee.user&&ae&&(re||!re&&(null===(e=ee.user)||void 0===e?void 0:e.id)))return t=setTimeout(ce),()=>{t&&clearTimeout(t)}}),[ae,ee.user,re]),(0,n.useEffect)((()=>{q&&Y.next&&Y.results.length===Z&&Y.initialized&&(J({type:G.dK.LOADING_NEXT}),y.Z.getCategoryTrendingFeed(ae,{offset:Z,limit:10}).then((e=>{J({type:G.dK.LOAD_NEXT_SUCCESS,payload:Object.assign(Object.assign({},e),{initialized:!0})})})).catch((e=>{J({type:G.dK.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),f.Y.error(v.J,e)})))}),[q,Z,Y.next,Y.results.length,Y.initialized,ae]),(0,n.useEffect)((()=>{X&&X()}),[Y.results]),(0,n.useEffect)((()=>{(re||ee.user)&&(0,b.U)(ae)&&$===C.n2.NETWORK_ONLY&&z&&z({cacheStrategy:C.n2.CACHE_FIRST})}),[re,$,ae,ee.user]);const de=(0,n.useMemo)((()=>()=>{J({type:G.dK.LOADING_NEXT}),h.Z.request({url:Y.next,method:p.Z.CategoryTrendingFeed.method}).then((e=>{J({type:G.dK.LOAD_NEXT_SUCCESS,payload:e.data})}))}),[J,Y.next]),le=()=>{Q((e=>!e))};if(!re&&!ee.user||m&&!Y.count&&Y.initialized)return n.createElement(x.Z,null);if(!Y.initialized)return n.createElement(F.Z,null);const ue=n.createElement(d.Z,null,n.createElement(l.Z,{className:W.title,variant:"h5"},n.createElement(O.Z,{id:"ui.categoryTrendingFeedWidget.title",defaultMessage:"ui.categoryTrendingFeedWidget.title"})),Y.count?n.createElement(n.Fragment,null,n.createElement(s.Z,null,Y.results.slice(0,Y.visibleItems).map((e=>n.createElement(u.ZP,{key:e[e.type].id},n.createElement(E.Z,Object.assign({elevation:0,feedObject:e[e.type]},N)))))),Y.count>Y.visibleItems&&n.createElement(g.Z,Object.assign({className:W.showMore},ie?{onClick:le}:{component:U.Z,to:oe.url(D.CATEGORY_TRENDING_FEED_ROUTE_NAME,se)}),n.createElement(O.Z,{id:"ui.categoryTrendingFeedWidget.button.showAll",defaultMessage:"ui.categoryTrendingFeedWidget.button.showAll"}))):n.createElement(l.Z,{className:W.noResults,variant:"body2"},n.createElement(O.Z,{id:"ui.categoryTrendingFeedWidget.noResults",defaultMessage:"ui.categoryTrendingFeedWidget.noResults"})),q&&n.createElement(K,Object.assign({className:W.dialogRoot,title:n.createElement(O.Z,{defaultMessage:"ui.categoryTrendingFeedWidget.title",id:"ui.categoryTrendingFeedWidget.title",values:{total:Y.count}}),onClose:le,open:q},H),n.createElement(j.Z,{dataLength:Y.results.length,next:de,hasMoreNext:Boolean(Y.next),loaderNext:n.createElement(_.Z,Object.assign({elevation:0},N)),height:ie?"100%":400,endMessage:n.createElement(l.Z,{className:W.endMessage},n.createElement(O.Z,{id:"ui.categoryTrendingFeedWidget.noMoreResults",defaultMessage:"ui.categoryTrendingFeedWidget.noMoreResults"}))},n.createElement(s.Z,null,Y.results.map((e=>n.createElement(u.ZP,{key:e[e.type].id},n.createElement(E.Z,Object.assign({elevation:0,feedObject:e[e.type]},N)))))))));return n.createElement(B,Object.assign({className:T()(W.root,o)},V),ue)}},15927:(e,t,o)=>{o.d(t,{Mv:()=>s,Xi:()=>i,dK:()=>n});var r=o(59219);const n={LOADING_NEXT:"_loading_next",LOADING_PREVIOUS:"_loading_previous",LOAD_NEXT_SUCCESS:"_load_next_success",LOAD_PREVIOUS_SUCCESS:"_load_previous_success",LOAD_NEXT_FAILURE:"_load_next_failure",LOAD_PREVIOUS_FAILURE:"_load_previous_failure",SET_RESULTS:"_set_results",SET_VISIBLE_ITEMS:"_set_visible_items",RESET:"_reset"};function i(e,t){var o;let i=Object.assign({},e);switch(t.type){case n.LOADING_NEXT:i=Object.assign(Object.assign({},e),{isLoadingNext:!0,errorLoadNext:null});break;case n.LOADING_PREVIOUS:i=Object.assign(Object.assign({},e),{isLoadingPrevious:!0,errorLoadPrevious:null});break;case n.LOAD_NEXT_SUCCESS:i=Object.assign(Object.assign({},e),{isLoadingNext:!1,count:t.payload.count,next:t.payload.next?t.payload.next:null,results:[...e.results,...t.payload.results],errorLoadNext:null,initialized:(null===(o=t.payload)||void 0===o?void 0:o.initialized)||!0});break;case n.LOAD_PREVIOUS_SUCCESS:i=Object.assign(Object.assign({},e),{isLoadingPrevious:!1,count:t.payload.count,previous:t.payload.previous?t.payload.previous:null,results:[...t.payload.results,...e.results],errorPreviousNext:null});break;case n.SET_RESULTS:i=Object.assign(Object.assign(Object.assign({},e),{results:[...t.payload.results]}),t.payload.count?{count:t.payload.count}:{});break;case n.SET_VISIBLE_ITEMS:i=Object.assign(Object.assign({},e),{visibleItems:t.payload.visibleItems});break;case n.LOAD_NEXT_FAILURE:i=Object.assign(Object.assign({},e),{isLoadingNext:!1,errorLoadNext:t.payload.error});break;case n.LOAD_PREVIOUS_FAILURE:i=Object.assign(Object.assign({},e),{isLoadingNext:!1,errorLoadPrevious:t.payload.error});break;case n.RESET:i={isLoadingNext:!1,next:null,results:[],count:0,errorLoadNext:null,initialized:!1}}return r.ZP.set(i.cacheKey,i),i}function s(e){let t={cacheKey:e.cacheKey?e.cacheKey:null,count:e.count?e.count:0,results:e.results?e.results:[],next:e.next?e.next:null,previous:e.previous?e.previous:null,isLoadingNext:!!e.isLoadingNext&&e.isLoadingNext,isLoadingPrevious:!!e.isLoadingPrevious&&e.isLoadingPrevious,visibleItems:e.visibleItems?e.visibleItems:null,initialized:!1};if(t.cacheKey&&r.ZP.hasKey(t.cacheKey)&&e.cacheStrategy!==r.n2.NETWORK_ONLY){const e=r.ZP.get(t.cacheKey);return Object.assign(Object.assign({},t),e)}return t}},5840:(e,t,o)=>{function r(e){return!isNaN(e)&&parseInt(String(Number(e)))==e&&!isNaN(parseInt(String(e),10))}o.d(t,{U:()=>r})}}]);