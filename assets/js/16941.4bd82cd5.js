"use strict";(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[16941],{51294:(e,t,n)=>{n.d(t,{Z:()=>m});var o=n(67294),a=n(74482),i=n(24243),r=n(24085),s=n(59219),l=n(99960),c=n(69721),u=n(87620);function m({id:e=null,commentObject:t=null,cacheStrategy:n=s.n2.CACHE_FIRST}){const m=t?t.id:e,d=(0,c.ht)(m),[p,b]=(0,o.useState)(n!==s.n2.NETWORK_ONLY?s.ZP.get(d,t):t),[g,E]=(0,o.useState)(null),h=(0,o.useMemo)((()=>()=>i.Z.request({url:r.Z.Comment.url({id:m}),method:r.Z.Comment.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[m]);return(0,o.useEffect)((()=>{!m||p&&n!==s.n2.STALE_WHILE_REVALIDATE||h().then((e=>{b(e),s.ZP.set(d,e)})).catch((t=>{s.ZP.delete(d),E(`CommentObject with id ${e} not found`),l.Y.error(a.h,`CommentObject with id ${e} not found`),l.Y.error(a.h,t.message)}))}),[m]),(0,u.F_)((()=>{t&&(b(t),s.ZP.set(d,p))}),[t]),{obj:p,setObj:b,error:g}}},47189:(e,t,n)=>{n.d(t,{Z:()=>h});var o,a=n(67294),i=n(74482);!function(e){e.ADDED_AT_DESC="-added_at",e.ADDED_AT_ASC="added_at",e.CONNECTION_DESC="-connection",e.CONNECTION_ASC="connection"}(o||(o={}));var r=n(24085),s=n(24243),l=n(59219),c=n(99960),u=n(31498),m=n(69721),d=n(22319);function p(e,t){const n=new URLSearchParams(e),o=Object.fromEntries(n.entries());return(o.offset?parseInt(o.offset):0)/t+1}const b={LOADING_NEXT:"_loading_next",LOADING_PREVIOUS:"_loading_previous",DATA_NEXT_LOADED:"_data_next_loaded",DATA_PREVIOUS_LOADED:"_data_previous_loaded",DATA_RELOAD:"_data_reload",DATA_RELOADED:"_data_reloaded",DATA_REVALIDATE:"_data_revalidate"};function g(e,t){switch(t.type){case b.LOADING_NEXT:return Object.assign(Object.assign({},e),{isLoadingNext:!0,isLoadingPrevious:!1});case b.LOADING_PREVIOUS:return Object.assign(Object.assign({},e),{isLoadingNext:!1,isLoadingPrevious:!0});case b.DATA_NEXT_LOADED:return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),{comments:t.payload.comments,isLoadingNext:!1,componentLoaded:!0,revalidate:!1,revalidateNext:null,revalidatePrevious:null,next:t.payload.next}),t.payload.page?{page:t.payload.page}:{}),t.payload.nextPage?{nextPage:t.payload.nextPage}:{}),t.payload.previous?{previous:t.payload.previous}:{}),t.payload.previousPage?{previousPage:t.payload.previousPage}:{}),t.payload.total?{total:t.payload.total}:{});case b.DATA_PREVIOUS_LOADED:return Object.assign(Object.assign(Object.assign(Object.assign({},e),{comments:t.payload.comments,isLoadingPrevious:!1,revalidate:!1,revalidateNext:null,revalidatePrevious:null,previous:t.payload.previous}),t.payload.page?{page:t.payload.page}:{}),t.payload.previousPage?{previousPage:t.payload.previousPage}:{});case b.DATA_RELOAD:return Object.assign(Object.assign({},e),{next:t.payload.next,previousPage:null,nextPage:null,comments:[],total:0,previous:null,isLoadingNext:!0,reload:!0});case b.DATA_RELOADED:return Object.assign(Object.assign({},e),{componentLoaded:!0,reload:!1});case b.DATA_REVALIDATE:return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),{componentLoaded:!0,revalidate:!0}),t.payload.revalidateNext?{revalidateNext:t.payload.revalidateNext}:{}),t.payload.revalidatePrevious?{revalidatePrevious:t.payload.revalidatePrevious}:{}),{reload:!1});default:throw new Error(`Unhandled type: ${t.type}`)}}function E(e){const t=e.obj?(0,m.AL)(e.obj.id,e.obj.type,e.next):null;let n={componentLoaded:!1,comments:[],total:0,next:e.next,previous:null,isLoadingNext:!1,isLoadingPrevious:!1,page:Math.ceil(e.offset/e.pageSize+1),reload:!1,revalidate:!1,revalidateNext:null,revalidatePrevious:null};if(n.nextPage=n.next?n.page+1:null,n.previousPage=n.previous?n.page-1:null,t&&l.ZP.hasKey(t)&&e.cacheStrategy!==l.n2.NETWORK_ONLY){const o=l.ZP.get(t);let a=Math.max(p(o.next,e.pageSize),1);const i=o.next?p(o.next,e.pageSize):null,r=o.previous?Math.max(p(o.previous,e.pageSize)-1,1):null;return Object.assign(Object.assign({},n),{total:o.count,next:o.next,previous:o.previous,comments:o.results,page:a,nextPage:i,previousPage:r,componentLoaded:!0})}return n}function h(e){const{id:t,feedObject:n,feedObjectType:h,offset:O=0,pageSize:v=5,orderBy:f=o.ADDED_AT_DESC,parent:Z,onChangePage:y,cacheStrategy:C=l.n2.NETWORK_ONLY}=e,{obj:j,setObj:_}=(0,u.Z)({id:t,feedObject:n,feedObjectType:h,cacheStrategy:C}),M=()=>{const e=O?`&offset=${O}`:"",n=Z?`&parent=${Z}`:"",o=j?j.id:t,a=j?j.type:h;return`${r.Z.Comments.url()}?${a}=${o}&limit=${v}&ordering=${f}${e}${n}`},[A,P]=(0,a.useReducer)(g,{obj:j,offset:O,pageSize:v,next:M(),cacheStrategy:C},E),N=(0,d.Z)(),S=(e,t=!0)=>{const n=(0,m.AL)(j.id,j.type,e);return t&&l.ZP.hasKey(n)&&C!==l.n2.NETWORK_ONLY?Promise.resolve(l.ZP.get(n)):s.Z.request({url:e,method:r.Z.Comments.method}).then((e=>e.status>=300?Promise.reject(e):(l.ZP.set(n,e.data),e.data.results.forEach((e=>l.ZP.set((0,m.ht)(e.id),e))),Promise.resolve(e.data))))};function T(){if(j&&A.next&&!A.isLoadingNext){const e=A.next;P({type:b.LOADING_NEXT}),S(e).then((t=>{if(N.current){let n=p(e,v),o=t.next?n+1:null;P({type:b.DATA_NEXT_LOADED,payload:Object.assign({page:n,nextPage:o,comments:[...A.comments,...t.results],next:t.next,total:t.count,componentLoaded:!0},O&&0===A.comments.length?{previous:t.previous,previousPage:t.previous?n-1:null}:{})}),y&&y(n)}})).catch((e=>{c.Y.error(i.h,e)})).then((()=>{N.current&&C===l.n2.STALE_WHILE_REVALIDATE&&P({type:b.DATA_REVALIDATE,payload:{revalidateNext:e}})}))}}return(0,a.useEffect)((()=>{N.current&&A.componentLoaded&&A.reload&&!A.isLoadingNext&&!A.isLoadingPrevious&&(P({type:b.DATA_RELOADED}),T())}),[A.reload,N]),(0,a.useEffect)((()=>{var e,t;N.current&&A.componentLoaded&&Boolean(j)&&!A.reload&&A.revalidate&&(e=A.revalidateNext,t=Boolean(A.revalidateNext),S(e,!1).then((e=>{let n,o=p(t?e.next:e.previous,v);if(t)n=A.comments.slice(0,A.comments.length-e.results.length).concat(e.results);else{let t=A.comments.slice(e.results.length,A.comments.length);n=e.results.concat(t)}N.current&&P({type:t?b.DATA_NEXT_LOADED:b.DATA_PREVIOUS_LOADED,payload:Object.assign(Object.assign({page:o,comments:n},t?{next:e.next}:{previous:e.previous}),{total:e.count})})})))}),[A.revalidate,N]),Object.assign(Object.assign({feedObject:j,setFeedObject:_},A),{pageSize:v,getNextPage:T,getPreviousPage:function(){if(j&&A.previous&&!A.isLoadingPrevious){const e=A.previous;P({type:b.LOADING_PREVIOUS}),S(e).then((t=>{if(N.current){let n=p(e,v),o=t.previous?n-1:null;P({type:b.DATA_PREVIOUS_LOADED,payload:{page:n,previousPage:o,comments:[...t.results,...A.comments],previous:t.previous}}),y&&y(n)}})).catch((e=>{c.Y.error(i.h,e)})).then((()=>{N.current&&C===l.n2.STALE_WHILE_REVALIDATE&&P({type:b.DATA_REVALIDATE,payload:{revalidatePrevious:e}})}))}},orderBy:f,reload:()=>{N.current&&A.componentLoaded&&Boolean(j)&&!A.isLoadingNext&&!A.reload&&P({type:b.DATA_RELOAD,payload:{next:M()}})}})}},31498:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(67294),a=n(24243),i=n(24085),r=n(59219),s=n(99960),l=n(74482),c=n(49794),u=n(87620),m=n(69721);function d({id:e=null,feedObject:t=null,feedObjectType:n=c.q.POST||c.q.DISCUSSION||c.q.STATUS,cacheStrategy:d=r.n2.CACHE_FIRST}){const p=t?t.id:e,b=t?t.type:n,g=(0,m._j)(p,b),[E,h]=(0,o.useState)(d!==r.n2.NETWORK_ONLY?r.ZP.get(g,t):t),[O,v]=(0,o.useState)(null),f=(0,o.useMemo)((()=>()=>a.Z.request({url:i.Z.FeedObject.url({type:b,id:p}),method:i.Z.FeedObject.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[p,b]);return(0,o.useEffect)((()=>{p&&b&&!t&&f().then((e=>{h(e),r.ZP.set(g,e)})).catch((t=>{r.ZP.delete(g),v(`FeedObject with id ${e} not found`),s.Y.error(l.h,`FeedObject with id ${e} not found`),s.Y.error(l.h,t.message)}))}),[p,b]),(0,u.F_)((()=>{t&&(d===r.n2.NETWORK_ONLY?(h(t),r.ZP.set(g,t)):h(r.ZP.get(g,t)))}),[t]),{obj:E,setObj:e=>{r.ZP.set(g,e),h(Object.assign({},e))},error:O}}},90303:(e,t,n)=>{n.d(t,{Z:()=>b});var o=n(97582),a=n(67294),i=n(63902),r=n(90948),s=n(88078),l=n(2734),c=n(44267),u=n(115),m=n(18426);const d={root:`${m.B}-skeleton-root`,avatar:`${m.B}-avatar`,primaryContent:`${m.B}-primary-content`},p=(0,r.ZP)(u.Z,{name:m.B,slot:"SkeletonRoot"})((()=>({})));function b(e){const{WidgetProps:t}=e,n=(0,o._T)(e,["WidgetProps"]),r=(0,l.Z)();return a.createElement(p,Object.assign({className:d.root,disableTypography:!0},n,{image:a.createElement(s.Z,{animation:"wave",variant:"circular",width:r.selfcommunity.user.avatar.sizeMedium,height:r.selfcommunity.user.avatar.sizeMedium,className:d.avatar}),secondary:a.createElement(a.Fragment,null,a.createElement(i.Z,Object.assign({},t),a.createElement(c.Z,null,a.createElement(s.Z,{animation:"wave",height:10,width:"80%",className:d.primaryContent}),a.createElement(s.Z,{animation:"wave",height:10,width:"40%"}))))}))}},18426:(e,t,n)=>{n.d(t,{B:()=>o});const o="SCCommentObject"},87459:(e,t,n)=>{n.d(t,{Z:()=>z});var o=n(97582),a=n(67294),i=n(90948),r=n(63902),s=n(44012),l=n(94253),c=n(25662),u=n(87952),m=n(44267),d=n(15861),p=n(51575),b=n(94184),g=n.n(b),E=n(75459),h=n(90303),O=n(20166),v=n(80317),f=n(80366),Z=n(52180),y=n(91568),C=n(70050),j=n(20377),_=n(29360),M=n(115),A=n(49794),P=n(24243),N=n(24085),S=n(59219),T=n(99960),k=n(76171),x=n(13391),D=n(41538),L=n(51294),I=n(47189),R=n(69721),B=n(97265),$=n(12132),w=n(65580),V=n(85050),F=n(85966),W=n(42879),q=n(68456),U=n(18426);const Y={root:`${U.B}-root`,comment:`${U.B}-comment`,nestedComments:`${U.B}-nested-comments`,avatar:`${U.B}-avatar`,content:`${U.B}-content`,showMoreContent:`${U.B}-show-more-content`,author:`${U.B}-author`,textContent:`${U.B}-text-content`,commentActionsMenu:`${U.B}-comment-actions-menu`,deleted:`${U.B}-deleted`,activityAt:`${U.B}-activity-at`,vote:`${U.B}-vote`,voteAudience:`${U.B}-vote-audience`,reply:`${U.B}-reply`,contentSubSection:`${U.B}-comment-sub-section`},H=(0,i.ZP)(l.Z,{name:U.B,slot:"Root"})((()=>({})));const z=function(e){const t=(0,_.Z)({props:e,name:U.B}),{id:n=`comment_object_${t.commentObjectId?t.commentObjectId:t.commentObject?t.commentObject.id:""}`,className:i,commentObjectId:b,commentObject:z,feedObjectId:K,feedObject:J,feedObjectType:X=A.q.POST,commentReply:G,onOpenReply:Q,onDelete:ee,onCollapsed:te,onRestore:ne,onVote:oe,elevation:ae=0,truncateContent:ie=!1,CommentObjectSkeletonProps:re={elevation:ae,WidgetProps:{variant:"outlined"}},CommentObjectReplyProps:se={elevation:ae,WidgetProps:{variant:"outlined"}},linkableCommentDateTime:le=!0,cacheStrategy:ce=S.n2.NETWORK_ONLY,CommentsObjectComponentProps:ue={}}=t,me=(0,o._T)(t,["id","className","commentObjectId","commentObject","feedObjectId","feedObject","feedObjectType","commentReply","onOpenReply","onDelete","onCollapsed","onRestore","onVote","elevation","truncateContent","CommentObjectSkeletonProps","CommentObjectReplyProps","linkableCommentDateTime","cacheStrategy","CommentsObjectComponentProps"]),de=(0,k.RM)(),pe=(0,a.useContext)(x.K8),be=(0,D.sy)(),{enqueueSnackbar:ge}=(0,j.Ds)(),{obj:Ee,setObj:he}=(0,L.Z)({id:b,commentObject:z,cacheStrategy:ce}),[Oe,ve]=(0,a.useState)(G),[fe,Ze]=(0,a.useState)(!1),[ye,Ce]=(0,a.useState)(!1),[je,_e]=(0,a.useState)(null),Me=(0,I.Z)({id:K,feedObject:J,feedObjectType:X,orderBy:O.p.ADDED_AT_DESC,parent:z?z.id:b,cacheStrategy:ce}),[Ae,Pe]=(0,a.useState)(!1),Ne=e=>{he(e),oe&&oe(e)};function Se(e){S.ZP.set(R.ht(Ee.id),e),he(e);const t=(0,C.Wu)(Ee);S.ZP.deleteKeysWithPrefix(R.NX(e[t].id,t))}function Te(e){return a.createElement(a.Fragment,null,le?a.createElement(B.Z,{to:be.url($.COMMENT_ROUTE_NAME,(0,C.p3)(e)),className:Y.activityAt},a.createElement(y.Z,{date:e.added_at})):a.createElement(y.Z,{date:e.added_at}))}function ke(e){return a.createElement(c.Z,{className:Y.reply,variant:"text",onClick:()=>xe(e)},a.createElement(s.Z,{id:"ui.commentObject.reply",defaultMessage:"ui.commentObject.reply"}))}function xe(e){pe.user?(ve(e),Q&&Q(e)):de.settings.handleAnonymousAction()}const De=e=>P.Z.request({url:N.Z.NewComment.url({}),method:N.Z.NewComment.method,data:Object.assign(Object.assign({[`${J?J.type:X}`]:J?J.id:K,parent:Oe.parent?Oe.parent:Oe.id},Oe.parent?{in_reply_to:Oe.id}:{}),{text:e})}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)));function Le(e){w.IT(pe.user)?ge(a.createElement(s.Z,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3}):(Ze(!0),De(e).then((e=>{const t=e;t.summary_truncated=!1,Se(Object.assign(Object.assign({},Ee),{comment_count:Ee.comment_count+1,latest_comments:[...Ee.latest_comments,t]})),ve(null),Ze(!1)})).catch((e=>{T.Y.error(E.J,e),ge(a.createElement(s.Z,{id:"ui.common.error.action",defaultMessage:"ui.common.error.action"}),{variant:"error",autoHideDuration:3e3}),Ze(!1)})))}function Ie(e){Se(e),ee&&ee(e)}function Re(e){Se(Object.assign({},Ee,{collapsed:!Ee.collapsed})),te&&te(e)}function Be(e){Se(Object.assign({},Ee,{deleted:!1})),ne&&ne(e)}function $e(e){_e(e)}function we(){_e(null)}const Ve=e=>P.Z.request({url:N.Z.UpdateComment.url({id:je.id}),method:N.Z.UpdateComment.method,data:{text:e}}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)));function Fe(e){w.IT(pe.user)?ge(a.createElement(s.Z,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3}):(Ce(!0),Ve(e).then((e=>{Se(Object.assign({},Ee,{text:e.text,html:e.html,summary:e.summary,added_at:e.added_at})),_e(null),Ce(!1)})).catch((e=>{T.Y.error(E.J,e),ge(a.createElement(s.Z,{id:"ui.common.error.action",defaultMessage:"ui.common.error.action"}),{variant:"error",autoHideDuration:3e3})})))}let We;return We=Ee?function(e){if(e.deleted&&(!pe.user||pe.user&&!w.B2(pe.user)&&pe.user.id!==e.author.id))return null;const t="summary_truncated"in e&&e.summary_truncated,n="summary_html"in e&&ie&&t?e.summary_html:e.html,o=(0,C.P3)(n,be.url);return a.createElement(a.Fragment,{key:e.id},je&&je.id===e.id?a.createElement(l.Z,{className:Y.comment},a.createElement(f.Z,Object.assign({text:e.html,autoFocus:!0,id:`edit-${e.id}`,onSave:Fe,onCancel:we,editable:!fe||!ye},se))):a.createElement(M.Z,{elevation:0,className:Y.comment,image:a.createElement(B.Z,Object.assign({},!e.author.deleted&&{to:be.url($.USER_PROFILE_ROUTE_NAME,e.author)},{onClick:e.author.deleted?()=>Pe(!0):null}),a.createElement(q.Z,{hide:!Ee.author.community_badge},a.createElement(u.Z,{alt:Ee.author.username,variant:"circular",src:e.author.avatar,className:Y.avatar}))),disableTypography:!0,primary:a.createElement(a.Fragment,null,a.createElement(r.Z,Object.assign({className:Y.content,elevation:ae},me),a.createElement(m.Z,{className:g()({[Y.deleted]:Ee&&Ee.deleted})},a.createElement(B.Z,Object.assign({className:Y.author},!e.author.deleted&&{to:be.url($.USER_PROFILE_ROUTE_NAME,e.author)},{onClick:e.author.deleted?()=>Pe(!0):null}),a.createElement(d.Z,{component:"span"},e.author.username)),a.createElement(d.Z,{className:Y.textContent,variant:"body2",gutterBottom:!0,dangerouslySetInnerHTML:{__html:o}}),t&&ie&&a.createElement(B.Z,{to:be.url($.COMMENT_ROUTE_NAME,(0,C.p3)(e)),className:Y.showMoreContent},a.createElement(s.Z,{id:"ui.commentObject.showMore",defaultMessage:"ui.commentObject.showMore"}))),pe.user&&a.createElement(l.Z,{className:Y.commentActionsMenu},a.createElement(Z.Z,{commentObject:e,onRestoreContribution:Be,onHideContribution:Re,onDeleteContribution:Ie,onEditContribution:$e}))),a.createElement(l.Z,{component:"span",className:Y.contentSubSection},Te(e),a.createElement(p.Z,null),a.createElement(V.Z,{size:"small",className:Y.vote,contributionId:e.id,contributionType:A.q.COMMENT,contribution:e,onVote:Ne}),a.createElement(p.Z,null),ke(e),a.createElement(F.Z,{size:"small",className:Y.voteAudience,contributionId:e.id,contributionType:A.q.COMMENT,contribution:e})))}),e.comment_count>0&&a.createElement(l.Z,{className:Y.nestedComments},function(e){return a.createElement(v.Z,Object.assign({feedObject:Me.feedObject,feedObjectType:Me.feedObject?Me.feedObject.type:X,hideAdvertising:!0,comments:[].concat(Me.comments).reverse(),endComments:e.latest_comments,previous:e.comment_count>e.latest_comments.length?Me.next:null,isLoadingPrevious:Me.isLoadingNext,handlePrevious:Me.getNextPage,CommentComponentProps:Object.assign(Object.assign({onOpenReply:xe,CommentObjectSkeletonProps:re,elevation:ae,linkableCommentDateTime:le},me),{cacheStrategy:ce,truncateContent:ie}),CommentsObjectSkeletonProps:{count:1,CommentObjectSkeletonProps:re},inPlaceLoadMoreContents:!0},ue,{cacheStrategy:ce}))}(e)),pe.user&&Oe&&(Oe.id===e.id||Oe.parent===e.id)&&!e.parent&&a.createElement(l.Z,{className:Y.nestedComments},a.createElement(f.Z,Object.assign({text:`@${Oe.author.username}, `,autoFocus:!0,key:`reply-${Oe.id}`,id:`reply-${Oe.id}`,onReply:Le,editable:!fe},se))))}(Ee):a.createElement(h.Z,Object.assign({},re)),a.createElement(a.Fragment,null,a.createElement(H,{id:n,className:g()(Y.root,i)},We),Ae&&a.createElement(W.Z,{open:Ae,handleClose:()=>Pe(!1)}))}},80366:(e,t,n)=>{n.d(t,{Z:()=>Z});var o=n(97582),a=n(67294),i=n(90948),r=n(63902),s=n(44012),l=n(87952),c=n(48542),u=n(13391),m=n(12880),d=n(94184),p=n.n(d),b=n(66090),g=n(115),E=n(68456),h=n(29360);const O="SCCommentObjectReply",v={root:`${O}-root`,comment:`${O}-comment`,hasValue:`${O}-has-value`,avatar:`${O}-avatar`,actions:`${O}-actions`,buttonReply:`${O}-button-reply`,buttonSave:`${O}-button-save`,buttonCancel:`${O}-button-cancel`},f=(0,i.ZP)(g.Z,{name:O,slot:"Root"})((()=>({})));const Z=function(e){const t=(0,h.Z)({props:e,name:O}),{id:n="CommentObjectReply",className:i,elevation:d=0,autoFocus:g=!1,onReply:Z,onSave:y,onCancel:C,editable:j=!0,text:_="",WidgetProps:M={variant:"outlined"}}=t,A=(0,o._T)(t,["id","className","elevation","autoFocus","onReply","onSave","onCancel","editable","text","WidgetProps"]),P=(0,u.LD)(),[N,S]=(0,a.useState)(_);let T=(0,a.useRef)();(0,a.useEffect)((()=>{g&&k()}),[g]);const k=()=>{T.current&&T.current.focus()},x=(0,a.useMemo)((()=>{const e=N.trim();return""===e||'<p class="SCEditor-paragraph"></p>'===e||'<p class="SCEditor-paragraph"><br></p>'===e}),[N]);return a.createElement(f,Object.assign({id:n},A,{disableTypography:!0,onClick:k,elevation:d,className:p()(v.root,i),image:P.user?a.createElement(E.Z,{hide:!P.user.community_badge},a.createElement(l.Z,{alt:P.user.username,variant:"circular",src:P.user.avatar,classes:{root:v.avatar}})):a.createElement(l.Z,{variant:"circular",className:v.avatar}),secondary:a.createElement(r.Z,Object.assign({className:p()(v.comment,{[v.hasValue]:!x})},M),a.createElement(m.Z,{ref:T,onChange:e=>{S(e)},defaultValue:N,editable:j,uploadImage:!0}),!x&&a.createElement(c.Z,{direction:"row",spacing:2,className:v.actions},Z&&a.createElement(b.Z,{variant:"outlined",size:"small",onClick:()=>{Z&&Z(N)},loading:!j,className:v.buttonReply},a.createElement(s.Z,{id:"ui.commentObject.replyComment.reply",defaultMessage:"ui.commentObject.replyComment.reply"})),y&&a.createElement(a.Fragment,null,C&&a.createElement(b.Z,{variant:"text",size:"small",onClick:()=>{C&&C()},disabled:!j,color:"inherit",className:v.buttonCancel},a.createElement(s.Z,{id:"ui.commentObject.replyComment.cancel",defaultMessage:"ui.commentObject.replyComment.cancel"})),a.createElement(b.Z,{variant:"outlined",size:"small",onClick:()=>{y&&y(N)},loading:!j,className:v.buttonSave},a.createElement(s.Z,{id:"ui.commentObject.replyComment.save",defaultMessage:"ui.commentObject.replyComment.save"})))))}))}},52532:(e,t,n)=>{n.d(t,{Z:()=>m});var o=n(97582),a=n(67294),i=n(90948),r=n(90303),s=n(94253),l=n(44764);const c={root:`${l.B}-skeleton-root`},u=(0,i.ZP)(s.Z,{name:l.B,slot:"SkeletonRoot"})((()=>({})));function m(e){const{count:t=3,CommentObjectSkeletonProps:n={}}=e,i=(0,o._T)(e,["count","CommentObjectSkeletonProps"]);return a.createElement(u,Object.assign({className:c.root},i),[...Array(t)].map(((e,t)=>a.createElement(r.Z,Object.assign({key:t},n)))))}},44764:(e,t,n)=>{n.d(t,{B:()=>o});const o="SCCommentsObject"},80317:(e,t,n)=>{n.d(t,{Z:()=>L});var o=n(97582),a=n(67294),i=n(90948),r=n(44012),s=n(87459),l=n(90303),c=n(15861),u=n(94253),m=n(25662),d=n(48542),p=n(94184),b=n.n(p),g=n(44854),E=n(29360),h=n(52532),O=n(97650),v=n(70050),f=n(49794),Z=n(83781),y=n(59219),C=n(79991),j=n(72871),_=n(85472),M=n(13391),A=n(66380),P=n(41538),N=n(31498),S=n(97265),T=n(44764);const k={root:`${T.B}-root`,loadNextCommentsButton:`${T.B}-load-more-comments-button`,loadPreviousCommentsButton:`${T.B}-load-previous-comments-button`,paginationLink:`${T.B}-pagination-link`,pagination:`${T.B}-pagination`,commentsCounter:`${T.B}-comments-counter`,commentNotFound:`${T.B}-comment-not-found`,noOtherComments:`${T.B}-no-other-comment`},x=(0,i.ZP)(u.Z,{name:T.B,slot:"Root"})((()=>({}))),D=[_.Rl,_.OM];const L=function(e){const t=(0,E.Z)({props:e,name:T.B}),{id:n=`comments_object_${t.feedObjectId?t.feedObjectId:t.feedObject?t.feedObject.id:""}`,className:i,feedObjectId:p,feedObject:L,feedObjectType:I=f.q.POST,CommentComponent:R=s.Z,CommentComponentProps:B={variant:"outlined"},CommentObjectSkeletonProps:$={elevation:0,WidgetProps:{variant:"outlined"}},CommentsObjectSkeletonProps:w={},next:V,isLoadingNext:F,handleNext:W,previous:q,isLoadingPrevious:U,handlePrevious:Y,totalLoadedComments:H,totalComments:z,page:K,previousPage:J,nextPage:X,comments:G=[],startComments:Q=[],endComments:ee=[],infiniteScrolling:te=!1,hideAdvertising:ne=!1,disablePaginationLinks:oe=!1,hidePaginationLinks:ae=!0,inPlaceLoadMoreContents:ie=!0,paginationLinksPageQueryParam:re=j.vT,PaginationLinkProps:se={},cacheStrategy:le=y.n2.NETWORK_ONLY}=t,ce=(0,o._T)(t,["id","className","feedObjectId","feedObject","feedObjectType","CommentComponent","CommentComponentProps","CommentObjectSkeletonProps","CommentsObjectSkeletonProps","next","isLoadingNext","handleNext","previous","isLoadingPrevious","handlePrevious","totalLoadedComments","totalComments","page","previousPage","nextPage","comments","startComments","endComments","infiniteScrolling","hideAdvertising","disablePaginationLinks","hidePaginationLinks","inPlaceLoadMoreContents","paginationLinksPageQueryParam","PaginationLinkProps","cacheStrategy"]),ue=(0,M.LD)(),me=(0,A.ko)(),de=(0,P.sy)(),{obj:pe}=(0,N.Z)({id:p,feedObject:L,feedObjectType:I,cacheStrategy:le}),be=G.map((e=>e.id)),ge=Math.floor(Math.random()*(Math.min(G.length,5)-1+1)+1),Ee=(0,a.useMemo)((()=>{const e={};return D.map((t=>e[t]=t in me.preferences?me.preferences[t].value:null)),e}),[me.preferences]),he=(0,a.useMemo)((()=>()=>pe&&!ne&&Ee[_.Rl]&&(Ee[_.OM]&&null===ue.user||!Ee[_.OM])?a.createElement(g.Z,Object.assign({position:Z.n.POSITION_IN_COMMENTS},pe.categories.length&&{categoriesId:pe.categories.map((e=>e.id))})):null),[JSON.stringify(pe)]);function Oe(e){setTimeout((()=>{const t=document.getElementById(`reply-${e.id}`);t&&t.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}),200)}function ve(e,t){te&&e&&!F&&W&&W()}function fe(e){return e.filter((e=>!be.includes(e.id)))}function Ze(e){return a.createElement(a.Fragment,null,e.map(((e,t)=>a.createElement(a.Fragment,{key:t},a.createElement(R,Object.assign({key:e.id,commentObject:e,onOpenReply:Oe,feedObject:pe},B,{CommentObjectSkeletonProps:$})),ge===t&&he()))))}let ye=a.createElement(a.Fragment,null);return ye=!pe||(U||F)&&!G.length?a.createElement(h.Z,Object.assign({CommentObjectSkeletonProps:$},w)):a.createElement(a.Fragment,null,q&&a.createElement(u.Z,{className:k.pagination},U&&a.createElement(l.Z,Object.assign({},$,{count:1})),!U&&a.createElement(a.Fragment,null,a.createElement(m.Z,Object.assign({variant:"text"},ie?{onClick:Y}:{component:S.Z,to:`${de.url((0,v.Ig)(L),(0,v.p3)(L))}`},{disabled:U,color:"inherit",classes:{root:k.loadPreviousCommentsButton}}),a.createElement(r.Z,{id:"ui.commentsObject.loadPreviousComments",defaultMessage:"ui.commentsObject.loadPreviousComments"})),!oe&&J&&q&&a.createElement(S.Z,Object.assign({to:`${(0,C.Ee)(de.url((0,v.Ig)(L),(0,v.p3)(L)),[{[re]:J}])}`,className:b()({[k.paginationLink]:ae})},se),a.createElement(r.Z,{id:"ui.commentsObject.previousComments",defaultMessage:"ui.commentsObject.previousComments"})))),Ze(G),V&&a.createElement(u.Z,{className:k.pagination},F?a.createElement(l.Z,Object.assign({},$,{count:1})):a.createElement(a.Fragment,null,a.createElement(O.df,{as:"div",onChange:ve,threshold:.5},a.createElement(d.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2},a.createElement(m.Z,Object.assign({variant:"text"},ie?{onClick:W}:{component:S.Z,to:X&&V?`${(0,C.Ee)(de.url((0,v.Ig)(L),(0,v.p3)(L)),[{[re]:X}])}`:`${de.url((0,v.Ig)(L),(0,v.p3)(L))}`},{disabled:F,color:"inherit",classes:{root:k.loadNextCommentsButton}}),a.createElement(r.Z,{id:"ui.commentsObject.loadMoreComments",defaultMessage:"ui.commentsObject.loadMoreComments"})),Boolean(z&&H)&&a.createElement(c.Z,{variant:"body1",classes:{root:k.commentsCounter}},a.createElement(r.Z,{id:"ui.commentsObject.numberOfComments",defaultMessage:"ui.commentsObject.numberOfComments",values:{loaded:H,total:z}})))),!oe&&X&&V&&a.createElement(S.Z,Object.assign({to:`${(0,C.Ee)(de.url((0,v.Ig)(L),(0,v.p3)(L)),[{[re]:X}])}`,className:b()({[k.paginationLink]:ae})},se),a.createElement(r.Z,{id:"ui.commentsObject.nextComments",defaultMessage:"ui.commentsObject.nextComments"}))))),a.createElement(x,Object.assign({id:n,className:b()(k.root,i)},ce),Ze(fe(Q)),ye,Ze(fe(ee)))}},85966:(e,t,n)=>{n.d(t,{Z:()=>N});var o=n(97582),a=n(67294),i=n(90948),r=n(66090),s=n(94184),l=n.n(s),c=n(29360),u=n(67564),m=n(94253),d=n(10760),p=n(40044),b=n(15861),g=n(78462),E=n(97212),h=n(87952),O=n(44012),v=n(13391),f=n(34927),Z=n(39154),y=n(52271),C=n(79558),j=n(37089);const _="SCVoteAudienceButton",M={root:`${_}-root`,reactionList:`${_}-reaction-list`,dialogRoot:`${_}-dialog-root`,dialogTabs:`${_}-dialog-tabs`,dialogVoteBadge:`${_}-dialog-vote-badge`},A=(0,i.ZP)(r.Z,{name:_,slot:"Root",overridesResolver:(e,t)=>[t.root,t.voted]})((({theme:e})=>({}))),P=(0,i.ZP)(Z.Z,{name:_,slot:"Root",overridesResolver:(e,t)=>t.dialogRoot})((({theme:e})=>({})));const N=function(e){const t=(0,c.Z)({props:e,name:_}),{className:n,contributionId:i,contributionType:r,contribution:s=null}=t,Z=(0,o._T)(t,["className","contributionId","contributionType","contribution"]),[N,S]=(0,a.useState)(!1),[T,k]=(0,a.useState)(0),x=(0,v.LD)(),D=e=>{S(!1)},L=(e,t)=>{k(t)},{isLoading:I,contributionVoted:R,contributionVoteCount:B,contributionReactionsCount:$,reactions:w,error:V,handleFetchVoteList:F,voteList:W,isLoadingVoteList:q,voteListHasNext:U}=(0,f.Z)({id:i,contributionType:r,contribution:s});(0,a.useEffect)((()=>{!q&&N&&F({reset:!0})}),[N]),(0,a.useEffect)((()=>{if(q||!N)return;if(0===T)return void F({reset:!0});const{reaction:e}=$[T-1];F({reaction:e,reset:!0})}),[T]);const Y=(0,a.useMemo)((()=>!w.default||I||V?x.user&&R?a.createElement(u.Z,null,"thumb_up"):a.createElement(u.Z,null,"thumb_up_off_alt"):a.createElement(m.Z,{className:M.reactionList},$&&$.slice(0,3).map(((e,t)=>a.createElement(u.Z,{key:e.reaction.id},a.createElement("img",{alt:e.reaction.label,src:e.reaction.image,width:"100%",height:"100%"})))))),[w.default,I,V,$,x.user,R]),H=(0,a.useMemo)((()=>w.default&&!I?a.createElement(d.Z,{className:M.dialogTabs,value:T,onChange:L,"aria-label":"reactions"},a.createElement(p.Z,{label:a.createElement(O.Z,{defaultMessage:"ui.voteAudienceButton.dialog.tab.all",id:"ui.voteAudienceButton.dialog.tab.all"})}),$&&$.map((e=>a.createElement(p.Z,{key:e.reaction.id,label:a.createElement(a.Fragment,null,a.createElement(u.Z,null,a.createElement("img",{alt:e.reaction.label,src:e.reaction.image,width:"100%",height:"100%"})),e.count)})))):a.createElement(O.Z,{defaultMessage:"ui.voteAudienceButton.dialog.title",id:"ui.voteAudienceButton.dialog.title"})),[T,w,$]);return a.createElement(a.Fragment,null,a.createElement(A,Object.assign({onClick:e=>{S(!0)},disabled:I||Boolean(V)||0===B,loading:I,className:l()(M.root,n)},Z),Y,"\xa0",x.user&&R?1===B?a.createElement(O.Z,{id:"ui.voteAudienceButton.votedOnlyByMe",defaultMessage:"ui.voteAudienceButton.votedOnlyByMe"}):a.createElement(O.Z,{id:"ui.voteAudienceButton.votedByMe",defaultMessage:"ui.voteAudienceButton.votedByMe",values:{total:B-1}}):a.createElement(O.Z,{id:"ui.voteAudienceButton.votes",defaultMessage:"ui.voteAudienceButton.votes",values:{total:B}})),N&&a.createElement(P,{title:H,onClose:D,open:N,DialogContentProps:{}},q&&!W?a.createElement(y.Z,{size:50}):a.createElement(C.Z,{dataLength:W.length,next:()=>F({}),hasMoreNext:U,loaderNext:a.createElement(y.Z,{size:30}),height:400,endMessage:a.createElement(b.Z,{variant:"body2",align:"center",fontWeight:"bold"},a.createElement(O.Z,{id:"ui.voteAudienceButton.dialog.end",defaultMessage:"ui.voteAudienceButton.dialog.end"}))},a.createElement(g.Z,null,W.map((e=>a.createElement(E.ZP,{key:e.user.id},a.createElement(j.Z,{elevation:0,user:e.user,badgeContent:a.createElement(h.Z,{className:M.dialogVoteBadge},e.reaction?a.createElement(u.Z,null,a.createElement("img",{alt:e.reaction.label,src:e.reaction.image,width:"100%",height:"100%"})):a.createElement(u.Z,null,"thumb_up")),onClick:D}))))))))}},52271:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(67294),a=n(98456),i=n(90948),r=n(94253);const s=(0,i.ZP)(r.Z,{name:"SCCentralProgress",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({display:"flex",flexDirection:"column",justifyContent:"center",height:"calc(100% - 100px)",padding:50})));function l(e){return o.createElement(s,null,o.createElement(a.Z,Object.assign({sx:{margin:"0 auto",display:"block"}},e)))}},52180:(e,t,n)=>{n.d(t,{Z:()=>Oe});var o=n(97582),a=n(67294),i=n(90948),r=n(54490),s=n(86896),l=n(44012),c=n(11535),u=n(67564),m=n(52271),d=n(75459),p=n(99960),b=n(77488),g=n(20377),E=n(70050),h=n(94184),O=n.n(h),v=n(27560),f=n(94253),Z=n(2734),y=n(37292),C=n(18972),j=n(48885),_=n(59334),M=n(19529),A=n(57922),P=n(15861),N=n(98456),S=n(84118),T=n(67720),k=n(93946),x=n(44652),D=n(96514),L=n(90629),I=n(7982);const R=0,B=1,$=2,w=3,V=4,F=[R,B,$,w,V],W="hidden",q="deleted",U="hide",Y="delete";var H=n(24243),z=n(24085),K=n(76171),J=n(13391),X=n(41538),G=n(31498),Q=n(51294),ee=n(65580),te=n(49794);const ne="_general_section",oe="_flag_contribution_section",ae="_hide_contribution_section",ie="_delete_contribution_section",re="_get_permalink",se="_edit_contribution",le="_delete_contribution",ce="_restore_contribution",ue="_suspend_notification_contribution",me="_moderate_contribution_hidden",de="_moderate_contribution_deleted",pe="SCContributionActionsMenu",be={root:`${pe}-root`,button:`${pe}-button`,popperRoot:`${pe}-popper-root`,paper:`${pe}-paper`,item:`${pe}-item`,itemText:`${pe}-item-text`,subItem:`${pe}-sub-item`,subItemText:`${pe}-sub-item-text`,footerSubItems:`${pe}-footer-sub-items`,selectedIcon:`${pe}-selected-icon`,sectionBadge:`${pe}-section-badge`,sectionWithSelectionIcon:`${pe}-section-with-selection-icon`,visibilityIcons:`${pe}-visibility-icons`},ge=(0,i.ZP)(c.Z,{name:pe,slot:"Root",overridesResolver:(e,t)=>t.popperRoot})((()=>({}))),Ee=(0,i.ZP)(f.Z,{name:pe,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({}))),he=(0,r.vU)({title:{id:"ui.contributionActionMenu.title",defaultMessage:"ui.contributionActionMenu.title"},spam:{id:"ui.contributionActionMenu.spam",defaultMessage:"ui.contributionActionMenu.spam"},aggressive:{id:"ui.contributionActionMenu.aggressive",defaultMessage:"ui.contributionActionMenu.aggressive"},vulgar:{id:"ui.contributionActionMenu.vulgar",defaultMessage:"ui.contributionActionMenu.vulgar"},poorContent:{id:"ui.contributionActionMenu.poorContent",defaultMessage:"ui.contributionActionMenu.poorContent"},offtopic:{id:"ui.contributionActionMenu.offtopic",defaultMessage:"ui.contributionActionMenu.offtopic"},footer:{id:"ui.contributionActionMenu.footer",defaultMessage:"ui.contributionActionMenu.footer"}});function Oe(e){const{className:t,feedObjectId:n,feedObject:i,feedObjectType:r=te.q.POST,commentObjectId:c,commentObject:h,onFlagContribution:pe,onEditContribution:Oe,onHideContribution:ve,onDeleteContribution:fe,onRestoreContribution:Ze,onSuspendNotificationContribution:ye,PopperProps:Ce={}}=e,je=(0,o._T)(e,["className","feedObjectId","feedObject","feedObjectType","commentObjectId","commentObject","onFlagContribution","onEditContribution","onHideContribution","onDeleteContribution","onRestoreContribution","onSuspendNotificationContribution","PopperProps"]),_e=(0,s.Z)(),Me=(0,Z.Z)(),Ae=(0,y.Z)(Me.breakpoints.down("md")),Pe=(0,a.useContext)(K.zL),Ne=(0,a.useContext)(J.K8),Se=Ne.user?Ne.user.id:null,Te=(0,X.sy)(),{enqueueSnackbar:ke}=(0,g.Ds)(),{obj:xe,setObj:De}=(0,G.Z)({id:n,feedObject:i,feedObjectType:r}),{obj:Le,setObj:Ie}=(0,Q.Z)({id:c,commentObject:h}),[Re,Be]=(0,a.useState)(!1),[$e,we]=(0,a.useState)(null),[Ve,Fe]=(0,a.useState)(!1),[We,qe]=(0,a.useState)(null),[Ue,Ye]=(0,a.useState)(!1),[He,ze]=(0,a.useState)(null),[Ke,Je]=(0,a.useState)(null),[Xe,Ge]=(0,a.useState)(null),[Qe,et]=(0,a.useState)(null),[tt,nt]=(0,a.useState)(!1),[ot,at]=(0,a.useState)(null),[it,rt]=(0,a.useState)(null),st=Le||xe;let lt=(0,a.useRef)(null);const ct=(0,a.useMemo)((()=>()=>{let e=[];return Ne.user&&Boolean(st)&&Se!==st.author.id&&!st.deleted&&!st.collapsed&&e.push(oe),ee.B2(Ne.user)&&(e.push(ae),e.push(ie)),e}),[st,Se])(),ut={[oe]:function(){const e=$e===oe;return a.createElement(f.Z,null,!st.deleted&&!st.collapsed&&a.createElement(f.Z,null,a.createElement(C.Z,{className:be.subItem,disabled:Ue,onClick:()=>Pt(oe)},a.createElement(j.Z,null,null!=We?a.createElement(M.Z,{classes:{badge:be.sectionBadge},badgeContent:a.createElement(u.Z,{className:be.sectionWithSelectionIcon},"check"),color:"primary"},a.createElement(u.Z,null,"outlined_flag")):a.createElement(u.Z,null,"outlined_flag")),a.createElement(_.Z,{primary:a.createElement(l.Z,{id:"ui.contributionActionMenu.flagContributionWithMotivation",defaultMessage:"ui.contributionActionMenu.flagContributionWithMotivation"})}),e?a.createElement(u.Z,null,"expand_less"):a.createElement(u.Z,null,"expand_more")),a.createElement(A.Z,{in:e,timeout:"auto",unmountOnExit:!0},Nt(oe),a.createElement(P.Z,{variant:"caption",component:"div",className:be.footerSubItems},_e.formatMessage(he.footer)))))},[ae]:function(){const e=$e===ae;return a.createElement(f.Z,{key:ae},!st.deleted&&a.createElement(f.Z,null,null!=He?a.createElement(a.Fragment,null,a.createElement(C.Z,{className:be.subItem,disabled:Boolean(ot),onClick:()=>_t(me)},a.createElement(j.Z,null,a.createElement(u.Z,null,"restore")),a.createElement(_.Z,{primary:a.createElement(a.Fragment,null,a.createElement(l.Z,{id:"ui.contributionActionMenu.restoreFromHidden",defaultMessage:"ui.contributionActionMenu.restoreFromHidden"})," ","(",At(He),")")}))):a.createElement(a.Fragment,null,a.createElement(C.Z,{className:be.subItem,disabled:Boolean(ot),onClick:()=>Pt(ae)},a.createElement(j.Z,null,a.createElement(u.Z,null,"hide_image")),a.createElement(_.Z,{primary:a.createElement(l.Z,{id:"ui.contributionActionMenu.hideContributionWithMotivation",defaultMessage:"ui.contributionActionMenu.hideContributionWithMotivation"})}),e?a.createElement(u.Z,null,"expand_less"):a.createElement(u.Z,null,"expand_more")),a.createElement(A.Z,{in:e,timeout:"auto",unmountOnExit:!0},Nt(ae)))))},[ie]:function(){const e=$e===ie;return a.createElement(f.Z,{key:ie},!st.collapsed&&!(st.deleted&&!Xe)&&a.createElement(f.Z,null,null!=Xe?a.createElement(a.Fragment,null,a.createElement(C.Z,{className:be.subItem,disabled:Boolean(ot),onClick:()=>_t(de)},a.createElement(j.Z,null,a.createElement(u.Z,null,"restore_from_trash")),a.createElement(_.Z,{primary:a.createElement(a.Fragment,null,a.createElement(l.Z,{id:"ui.contributionActionMenu.restoreFromDeleted",defaultMessage:"ui.contributionActionMenu.restoreFromDeleted"})," ","(",At(Xe),")")}))):a.createElement(a.Fragment,null,a.createElement(C.Z,{className:be.subItem,disabled:Boolean(ot),onClick:()=>Pt(ie)},a.createElement(j.Z,null,a.createElement(u.Z,null,"delete")),a.createElement(_.Z,{primary:a.createElement(l.Z,{id:"ui.contributionActionMenu.deleteContributionWithMotivation",defaultMessage:"ui.contributionActionMenu.deleteContributionWithMotivation"})}),e?a.createElement(u.Z,null,"expand_less"):a.createElement(u.Z,null,"expand_more")),a.createElement(A.Z,{in:e,timeout:"auto",unmountOnExit:!0},Nt(ie)))))}};function mt(){Ne.user?(Fe(!0),Promise.all([vt(),ft()]).then((()=>{Fe(!1)})),Be(!0)):Pe.settings.handleAnonymousAction()}function dt(){lt.current&&lt.current.contains(event.target)||(Be(!1),je.onClose&&je.onClose())}const pt=(0,a.useMemo)((()=>()=>H.Z.request({url:z.Z.UserSuspendContributionNotification.url({type:st.type,id:st.id}),method:z.Z.UserSuspendContributionNotification.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[st]);const bt=(0,a.useMemo)((()=>()=>H.Z.request({url:z.Z.FlagStatus.url({type:st.type,id:st.id}),method:z.Z.FlagStatus.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[st]),gt=(0,a.useMemo)((()=>e=>H.Z.request({url:z.Z.Flag.url({type:st.type,id:st.id}),method:z.Z.Flag.method,data:{flag_type:e}}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[st]),Et=(0,a.useMemo)((()=>()=>H.Z.request({url:z.Z.ModerateContributionStatus.url({contribution_type:st.type,id:st.id}),method:z.Z.ModerateContributionStatus.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[st]),ht=(0,a.useMemo)((()=>()=>{const e=st.type;return H.Z.request({url:e===te.q.COMMENT?z.Z.DeleteComment.url({id:st.id}):z.Z.DeleteFeedObject.url({type:e,id:st.id}),method:e===te.q.COMMENT?z.Z.DeleteComment.method:z.Z.DeleteFeedObject.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))}),[st]),Ot=(0,a.useMemo)((()=>()=>{const e=st.type;return H.Z.request({url:e===te.q.COMMENT?z.Z.RestoreComment.url({id:st.id}):z.Z.RestoreFeedObject.url({type:e,id:st.id}),method:e===te.q.COMMENT?z.Z.RestoreComment.method:z.Z.RestoreFeedObject.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))}),[st]);function vt(){return st&&ct.includes(oe)?bt().then((e=>{void 0!==e.flag_type&&null!==e.flag_type&&qe(e.flag_type)})).catch((e=>{console.dir(e),p.Y.error(d.J,e)})):Promise.resolve()}function ft(){return st&&(ct.includes(ae)||ct.includes(ie))?Et().then((e=>{void 0!==e.flag_type&&null!==e.flag_type&&(e.status===q?Ge(e.flag_type):e.status===W&&ze(e.flag_type))})).catch((e=>{p.Y.error(d.J,e)})):Promise.resolve()}function Zt(e){ee.IT(Ne.user)?ke(a.createElement(l.Z,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3}):!st||Ve||Ue||"undefined"===e||(Ye(!0),gt(e).then((t=>{qe(We===e?null:e),Ye(!1),pe&&pe(st,e,We!==e)})).catch((e=>{p.Y.error(d.J,e),ke(a.createElement(l.Z,{id:"ui.contributionActionMenu.actionError",defaultMessage:"ui.contributionActionMenu.actionError"}),{variant:"error",autoHideDuration:3e3})})))}const yt=(0,a.useMemo)((()=>(e,t)=>H.Z.request({url:z.Z.ModerateContribution.url({id:st.id}),method:z.Z.ModerateContribution.method,data:Object.assign(Object.assign({contribution_type:st.type},null!==t?{moderation_type:t}:{}),{action:e})}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[st]);function Ct(e){Je(e),_t(me)}function jt(e){et(e),_t(de)}function _t(e){ee.IT(Ne.user)&&[se,me,de].includes(e)?ke(a.createElement(l.Z,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3}):e===re?((0,b.TE)(`${location.protocol}//${location.host}${Te.url((0,E.Ig)(st),(0,E.p3)(st))}`).then((()=>{Be(!1),ke(a.createElement(l.Z,{id:"ui.common.permanentLinkCopied",defaultMessage:"ui.common.permanentLinkCopied"}),{variant:"success",autoHideDuration:3e3})})),dt()):e===se?(Oe&&Oe(st),dt()):e===le?(at(le),nt(!0),dt()):e===ce?(at(ce),nt(!0),dt()):e===ue?(at(ue),rt(ue),pt().then((e=>{const t=Object.assign({},xe,{suspended:!xe.suspended});De(t),ye&&ye(t),rt(null)})).catch((e=>{p.Y.error(d.J,e),at(null),rt(null),ke(a.createElement(l.Z,{id:"ui.contributionActionMenu.actionError",defaultMessage:"ui.contributionActionMenu.actionError"}),{variant:"error",autoHideDuration:3e3})}))):e===me?(at(me),nt(!0),dt()):e===de&&(at(de),nt(!0),dt())}function Mt(e){e?([le,ce].includes(ot)?Le?Ie(Object.assign(Object.assign({},Le),{deleted:ot===le})):De(Object.assign(Object.assign({},xe),{deleted:ot===le})):ot===me?Le?Ie(Object.assign(Object.assign({},Le),{collapsed:!Le.collapsed})):De(Object.assign(Object.assign({},xe),{collapsed:!xe.collapsed})):ot===de&&(Le?Ie(Object.assign(Object.assign({},Le),{deleted:!Le.deleted})):De(Object.assign(Object.assign({},xe),{deleted:!xe.deleted}))),rt(null),at(null),nt(!1),ke(a.createElement(l.Z,{id:"ui.contributionActionMenu.actionSuccess",defaultMessage:"ui.contributionActionMenu.actionSuccess"}),{variant:"success",autoHideDuration:3e3})):(rt(null),ke(a.createElement(l.Z,{id:"ui.contributionActionMenu.actionError",defaultMessage:"ui.contributionActionMenu.actionError"}),{variant:"error",autoHideDuration:3e3}))}function At(e){let t;switch(e){case R:t=_e.formatMessage(he.spam);break;case B:t=_e.formatMessage(he.aggressive);break;case $:t=_e.formatMessage(he.vulgar);break;case w:t=_e.formatMessage(he.poorContent);break;case V:t=_e.formatMessage(he.offtopic)}return t}function Pt(e){we(e?e===$e?null:e:null)}function Nt(e){const t=e===oe?Zt:e===ae?Ct:jt;let n=e===oe?We:e===ae?He:Xe;return F.map(((o,i)=>a.createElement(C.Z,{key:`${e}_${i}`,className:be.subItem,disabled:Ue},a.createElement(j.Z,{classes:{root:be.selectedIcon}},n===o&&a.createElement(u.Z,{color:"secondary"},"check")),a.createElement(_.Z,{primary:At(o),onClick:()=>t(o),classes:{root:be.subItemText}}))))}function St(){return a.createElement(f.Z,{key:ne},a.createElement(C.Z,{className:be.subItem,disabled:Ue},a.createElement(j.Z,null,a.createElement(u.Z,null,"link")),a.createElement(_.Z,{primary:a.createElement(l.Z,{id:"ui.contributionActionMenu.permanentLink",defaultMessage:"ui.contributionActionMenu.permanentLink"}),onClick:()=>_t(re),classes:{root:be.itemText}})),Ne.user&&Ne.user.id===st.author.id&&!st.deleted&&a.createElement(C.Z,{className:be.subItem,disabled:Ue},a.createElement(j.Z,null,a.createElement(u.Z,null,"edit")),a.createElement(_.Z,{primary:a.createElement(l.Z,{id:"ui.contributionActionMenu.editContribution",defaultMessage:"ui.contributionActionMenu.editContribution"}),onClick:()=>_t(se),classes:{root:be.itemText}})),Ne.user&&Ne.user.id===st.author.id&&!Xe&&a.createElement(C.Z,{className:be.subItem,disabled:Ue},a.createElement(j.Z,null,it===le||it===ce?a.createElement(N.Z,{size:20}):a.createElement(u.Z,null,"delete")),st.deleted?a.createElement(_.Z,{primary:a.createElement(l.Z,{id:"ui.contributionActionMenu.restoreContribution",defaultMessage:"ui.contributionActionMenu.restoreContribution"}),onClick:()=>_t(ce),classes:{root:be.itemText}}):a.createElement(_.Z,{primary:a.createElement(l.Z,{id:"ui.contributionActionMenu.deleteContribution",defaultMessage:"ui.contributionActionMenu.deleteContribution"}),onClick:()=>_t(le),classes:{root:be.itemText}})),Ne.user&&Ne.user.id!==st.author.id&&st&&st.type!==te.q.COMMENT&&a.createElement(C.Z,{className:be.subItem,disabled:Ue},a.createElement(j.Z,null,it===ue?a.createElement(N.Z,{size:20}):st.suspended?a.createElement(u.Z,null,"notifications_active"):a.createElement(u.Z,null,"notifications_off")),a.createElement(_.Z,{primary:st.suspended?a.createElement(l.Z,{id:"ui.contributionActionMenu.enableNotificationContribution",defaultMessage:"ui.contributionActionMenu.enableNotificationContribution"}):a.createElement(l.Z,{id:"ui.contributionActionMenu.suspendNotificationContribution",defaultMessage:"ui.contributionActionMenu.suspendNotificationContribution"}),onClick:()=>_t(ue),classes:{root:be.itemText}})))}function Tt(){return a.createElement(f.Z,null,Ve||!xe&&!Le?a.createElement(m.Z,{size:30}):a.createElement(S.Z,null,St(),Boolean(ct.length)&&a.createElement(T.Z,null),ct.map(((e,t)=>a.createElement(f.Z,{key:`es_${t}`},ut[e]())))))}return a.createElement(Ee,{className:O()(be.root,t)},a.createElement(k.Z,{ref:e=>{lt.current=e},"aria-haspopup":"true",onClick:mt,className:be.button,size:"small"},st&&(st.collapsed||st.deleted)?a.createElement("span",{className:be.visibilityIcons},st.collapsed?a.createElement(u.Z,null,"visibility_off"):a.createElement(u.Z,null,"delete"),a.createElement(u.Z,null,"expand_more")):a.createElement(u.Z,null,"more_vert")),Ae?a.createElement(x.Z,{open:Re,onClose:dt,onOpen:mt,anchor:"bottom",disableSwipeToOpen:!0},Tt()):a.createElement(ge,Object.assign({open:Re,anchorEl:lt.current,role:void 0,transition:!0,className:be.popperRoot},Ce,{placement:"bottom-end"}),(({TransitionProps:e,placement:t})=>a.createElement(D.Z,Object.assign({},e,{style:{transformOrigin:"bottom"===t?"center top":"center bottom"}}),a.createElement(L.Z,{variant:"outlined",className:be.paper},a.createElement(I.d,{onClickAway:dt},Tt()))))),tt&&a.createElement(v.Z,Object.assign({open:tt},ot===le?{content:a.createElement(l.Z,{id:"ui.contributionActionMenu.deleteContributionInfo",defaultMessage:"ui.contributionActionMenu.deleteContributionInfo"})}:{},{onConfirm:function(){!st||Ve||it||(ot===le?(rt(le),ht().then((e=>{const t=Object.assign({},st,{deleted:!0});fe&&fe(t),Mt(!0)})).catch((e=>{p.Y.error(d.J,e),Mt(!1)}))):ot===ce?(rt(ce),Ot().then((e=>{const t=Object.assign({},st,{deleted:!1});Ze&&Ze(t),Mt(!0)})).catch((e=>{p.Y.error(d.J,e),Mt(!1)}))):ot===me?(rt(me),yt(U,Ke).then((e=>{const t=Object.assign({},st,{collapsed:!st.collapsed});ze(He===Ke?null:Ke),Je(null),ve&&ve(t),Mt(!0)})).catch((e=>{p.Y.error(d.J,e),Mt(!1)}))):ot===de&&(rt(de),yt(Y,Qe).then((e=>{const t=Object.assign({},st,{deleted:!st.deleted});Ge(Xe===Qe?null:Qe),et(null),fe&&fe(t),Mt(!0)})).catch((e=>{p.Y.error(d.J,e),Mt(!1)}))))},isUpdating:Boolean(it),onClose:()=>nt(!1)})))}},20166:(e,t,n)=>{var o;n.d(t,{p:()=>o}),function(e){e.ADDED_AT_DESC="-added_at",e.ADDED_AT_ASC="added_at",e.CONNECTION_DESC="-connection",e.CONNECTION_ASC="connection"}(o||(o={}))},97650:(e,t,n)=>{n.d(t,{YD:()=>b,df:()=>p});var o=n(67294);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a.apply(this,arguments)}const i=new Map,r=new WeakMap;let s,l=0;function c(e){return Object.keys(e).sort().filter((t=>void 0!==e[t])).map((t=>{return`${t}_${"root"===t?(n=e.root,n?(r.has(n)||(l+=1,r.set(n,l.toString())),r.get(n)):"0"):e[t]}`;var n})).toString()}function u(e,t,n={},o=s){if(void 0===window.IntersectionObserver&&void 0!==o){const a=e.getBoundingClientRect();return t(o,{isIntersecting:o,target:e,intersectionRatio:"number"==typeof n.threshold?n.threshold:0,time:0,boundingClientRect:a,intersectionRect:a,rootBounds:a}),()=>{}}const{id:a,observer:r,elements:l}=function(e){let t=c(e),n=i.get(t);if(!n){const o=new Map;let a;const r=new IntersectionObserver((t=>{t.forEach((t=>{var n;const i=t.isIntersecting&&a.some((e=>t.intersectionRatio>=e));e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=i),null==(n=o.get(t.target))||n.forEach((e=>{e(i,t)}))}))}),e);a=r.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:r,elements:o},i.set(t,n)}return n}(n);let u=l.get(e)||[];return l.has(e)||l.set(e,u),u.push(t),r.observe(e),function(){u.splice(u.indexOf(t),1),0===u.length&&(l.delete(e),r.unobserve(e)),0===l.size&&(r.disconnect(),i.delete(a))}}const m=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function d(e){return"function"!=typeof e.children}class p extends o.Component{constructor(e){super(e),this.node=null,this._unobserveCb=null,this.handleNode=e=>{this.node&&(this.unobserve(),e||this.props.triggerOnce||this.props.skip||this.setState({inView:!!this.props.initialInView,entry:void 0})),this.node=e||null,this.observeNode()},this.handleChange=(e,t)=>{e&&this.props.triggerOnce&&this.unobserve(),d(this.props)||this.setState({inView:e,entry:t}),this.props.onChange&&this.props.onChange(e,t)},this.state={inView:!!e.initialInView,entry:void 0}}componentDidUpdate(e){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold&&e.skip===this.props.skip&&e.trackVisibility===this.props.trackVisibility&&e.delay===this.props.delay||(this.unobserve(),this.observeNode())}componentWillUnmount(){this.unobserve(),this.node=null}observeNode(){if(!this.node||this.props.skip)return;const{threshold:e,root:t,rootMargin:n,trackVisibility:o,delay:a,fallbackInView:i}=this.props;this._unobserveCb=u(this.node,this.handleChange,{threshold:e,root:t,rootMargin:n,trackVisibility:o,delay:a},i)}unobserve(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)}render(){if(!d(this.props)){const{inView:e,entry:t}=this.state;return this.props.children({inView:e,entry:t,ref:this.handleNode})}const e=this.props,{children:t,as:n}=e,i=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,m);return o.createElement(n||"div",a({ref:this.handleNode},i),t)}}function b({threshold:e,delay:t,trackVisibility:n,rootMargin:a,root:i,triggerOnce:r,skip:s,initialInView:l,fallbackInView:c,onChange:m}={}){var d;const[p,b]=o.useState(null),g=o.useRef(),[E,h]=o.useState({inView:!!l,entry:void 0});g.current=m,o.useEffect((()=>{if(s||!p)return;let o;return o=u(p,((e,t)=>{h({inView:e,entry:t}),g.current&&g.current(e,t),t.isIntersecting&&r&&o&&(o(),o=void 0)}),{root:i,rootMargin:a,threshold:e,trackVisibility:n,delay:t},c),()=>{o&&o()}}),[Array.isArray(e)?e.toString():e,p,i,a,r,s,n,c,t]);const O=null==(d=E.entry)?void 0:d.target,v=o.useRef();p||!O||r||s||v.current===O||(v.current=O,h({inView:!!l,entry:void 0}));const f=[b,E.inView,E.entry];return f.ref=f[0],f.inView=f[1],f.entry=f[2],f}}}]);