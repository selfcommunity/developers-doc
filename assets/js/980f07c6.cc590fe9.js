"use strict";(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[77338],{92991:(e,t,n)=>{n.d(t,{Z:()=>g});var s=n(67294),a=n(27331),o=n(5730);function r(e,t){void 0===e&&(e=""),void 0===t&&(t={});const n=Object.keys(t).map((e=>encodeURIComponent(e)+"="+encodeURIComponent(t[e]))).join("&");return fetch(e,{method:"POST",headers:{accept:"application/json","content-type":"application/x-www-form-urlencoded"},body:n})}function i(){if((0,o.Z)()){const e={refresh_token:JSON.parse(window.localStorage.getItem("token")).refresh_token,client_id:a.r.user.client_id,grant_type:"refresh_token"};return r(`${a.r.portal}/oauth/token/`,e).then((e=>e.json())).then((e=>({accessToken:e.access_token,refreshToken:e.refresh_token,tokenType:e.token_type,expiresIn:e.expires_in}))).catch((e=>Promise.reject(e)))}}function l(){const e=(0,o.Z)(),[t,n]=(0,s.useState)(e?JSON.parse(window.localStorage.getItem("token")):"");return(0,s.useEffect)((()=>{e&&(!t||1e3*t.expiresIn<Date.now()?r(`${a.r.portal}/oauth/token/`,a.r.user).then((e=>e.json())).then((e=>({accessToken:e.access_token,refreshToken:e.refresh_token,tokenType:e.token_type,expiresIn:e.expires_in}))).catch((e=>e)).then((e=>{n(e)})):e&&n(JSON.parse(window.localStorage.getItem("token"))))}),[e]),(0,s.useEffect)((()=>{e&&window.localStorage.setItem("token",JSON.stringify(t))}),[e,t]),t}var c=n(53704),d=n(42464),u=n(19666),m=n(85893);function g(e){let{children:t}=e;const n=l(),s={portal:a.r.portal,locale:{default:"en"},session:{type:"OAuth",clientId:a.r.user.client_id,authToken:n,handleRefreshToken:i},theme:d.Z,handleAnonymousAction:()=>{alert("Anonymous action")}};return(0,m.jsx)(u.Z,{children:()=>(0,m.jsx)(c.ZP,{conf:s,children:t})})}},27331:(e,t,n)=>{n.d(t,{r:()=>s});const s={user:{username:"beatrice",password:"Password!!Beatrice2021",client_id:"XJjPE54IBBjhibs0Rf0wZ969cZNPq6WjC02FrkaM",grant_type:"password"},portal:"https://api.fashionista.community"}},92343:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>g,frontMatter:()=>i,metadata:()=>c,toc:()=>u});var s=n(85893),a=n(11151),o=n(92991),r=n(14027);const i={sidebar_label:"Category Feed",sidebar_position:1,title:"Category Feed"},l=void 0,c={id:"sdk/community-js/react-templates/Components/CategoryFeed",title:"Category Feed",description:"The Category Feed template renders the category feed.",source:"@site/docs/sdk/community-js/react-templates/Components/CategoryFeed.mdx",sourceDirName:"sdk/community-js/react-templates/Components",slug:"/sdk/community-js/react-templates/Components/CategoryFeed",permalink:"/docs/sdk/community-js/react-templates/Components/CategoryFeed",draft:!1,unlisted:!1,editUrl:"https://github.com/selfcommunity/developers-doc/tree/main/docs/sdk/community-js/react-templates/Components/CategoryFeed.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_label:"Category Feed",sidebar_position:1,title:"Category Feed"},sidebar:"sdkSidebar",previous:{title:"Category",permalink:"/docs/sdk/community-js/react-templates/Components/Category"},next:{title:"Explore Feed",permalink:"/docs/sdk/community-js/react-templates/Components/ExploreFeed"}},d={},u=[{value:"Usage",id:"usage",level:4}];function m(e){const t={blockquote:"blockquote",code:"code",h4:"h4",p:"p",pre:"pre",...(0,a.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsx)(t.p,{children:"The Category Feed template renders the category feed."}),"\n"]}),"\n","\n","\n",(0,s.jsx)(o.Z,{children:(0,s.jsx)(r.Z,{categoryId:3})}),"\n",(0,s.jsx)(t.h4,{id:"usage",children:"Usage"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-jsx",children:" import React from 'react';\n import {SCContextProvider} from '@selfcommunity/react-core';\n import {CategoryFeed} from '@selfcommunity/react-templates';\n\n function App() {\n   const conf = {\n     portal: '<community-path>',\n     session: {\n       type: 'OAuth',\n       token: '<community-token>',\n       refreshToken: '<community-refresh-token>',\n       refreshTokenEndpoint: '<community-refresh-endpoint>',\n     },\n   };\n   return (\n     <SCContextProvider conf={conf}><CategoryFeed/></SCContextProvider>\n   );\n }\n"})})]})}function g(e={}){const{wrapper:t}={...(0,a.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(m,{...e})}):m(e)}},98365:(e,t,n)=>{n.d(t,{Z:()=>g});var s=n(67294),a=n(74482),o=n(24243),r=n(24085),i=n(59219),l=n(96570),c=n(99960),d=n(69721),u=n(87620),m=n(68787);function g({id:e=null,category:t=null,cacheStrategy:n=i.n2.CACHE_FIRST}){const g=t?t.id:e,p=(0,m.LD)(),y=p.user?p.user.id:null,E=(0,d.u5)(g),Z=y?t:(0,l.Kd)(t,["followed"]),[h,f]=(0,s.useState)(n!==i.n2.NETWORK_ONLY?i.ZP.get(E,Z):null),[_,b]=(0,s.useState)(null),O=(0,s.useMemo)((()=>()=>o.Z.request({url:r.Z.Category.url({id:g}),method:r.Z.Category.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[g]);return(0,s.useEffect)((()=>{g&&(!h||h&&g!==h.id)&&O().then((e=>{const t=y?e:(0,l.Kd)(e,["followed"]);f(t),i.ZP.set(E,t)})).catch((t=>{i.ZP.delete(E),b(`Category with id ${e} not found`),c.Y.error(a.h,`Category with id ${e} not found`),c.Y.error(a.h,t.message)}))}),[g]),(0,u.F_)((()=>{if(t){const e=y?t:(0,l.Kd)(t,["followed"]);f(e),i.ZP.set(E,e)}}),[t]),{scCategory:h,setSCCategory:f,error:_}}},69641:(e,t,n)=>{n.d(t,{Z:()=>g});var s=n(67294),a=n(90948),o=n(40506),r=n(24176),i=n(24540),l=n(12805),c=n(37024),d=n(74731);const u={root:`${d.B}-skeleton-root`},m=(0,a.ZP)(o.Z,{name:d.B,slot:"SkeletonRoot"})((()=>({})));function g(){return s.createElement(m,{className:u.root,sidebar:s.createElement(s.Fragment,null,s.createElement(r.Z,{sx:{mb:2}}),s.createElement(r.Z,{sx:{mb:2}}))},s.createElement(i.Z,null),Array.from({length:5}).map(((e,t)=>s.createElement(l.Z,{key:t,template:c.r.DETAIL}))))}},74731:(e,t,n)=>{n.d(t,{B:()=>s});const s="SCCategoryFeedTemplate"},14027:(e,t,n)=>{n.d(t,{Z:()=>j});var s=n(67294),a=n(90948),o=n(58069),r=n(12673),i=n(81820),l=n(38509),c=n(12805),d=n(37024),u=n(93132),m=n(24085),g=n(41538),p=n(98365),y=n(97265),E=n(12132),Z=n(83781),h=n(69641),f=n(29628),_=n(94184),b=n.n(_),O=n(44012),N=n(20377),C=n(70050),S=n(74731);const v={root:`${S.B}-root`},T=(0,a.ZP)(o.Z,{name:S.B,slot:"Root"})((()=>({}))),I=[{type:"widget",component:r.Z,componentProps:{},column:"right",position:0},{type:"widget",component:i.Z,componentProps:{},column:"right",position:1}];const j=function(e){const t=(0,f.Z)({props:e,name:S.B}),{id:n="category_feed",className:a,category:o,categoryId:r,widgets:i=I,FeedObjectProps:_={},FeedSidebarProps:j=null,FeedProps:k={}}=t,x=(0,g.sy)(),{enqueueSnackbar:L}=(0,N.Ds)(),P=(0,s.useRef)(),{scCategory:R}=(0,p.Z)({id:r,category:o}),A=(0,s.useMemo)((()=>i.map((e=>R?Object.assign(Object.assign({},e),{componentProps:Object.assign(Object.assign({},e.componentProps),{categoryId:R.id})}):e))),[i,R]);return R?s.createElement(T,Object.assign({id:n,className:b()(v.root,a),ref:P,endpoint:Object.assign(Object.assign({},m.Z.CategoryFeed),{url:()=>m.Z.CategoryFeed.url({id:R.id})}),widgets:A,ItemComponent:l.Z,itemPropsGenerator:(e,t)=>({feedObject:t[t.type],feedObjectType:t.type,feedObjectActivities:t.activities?t.activities:null,markRead:e?!t.seen_by_id.includes(e.id):null}),itemIdGenerator:e=>e[e.type].id,ItemProps:_,ItemSkeleton:c.Z,ItemSkeletonProps:{template:d.r.PREVIEW},FeedSidebarProps:j,HeaderComponent:s.createElement(u.Z,{onSuccess:e=>{if(-1===e.categories.findIndex((e=>e.id===R.id)))return void L(s.createElement(O.Z,{id:"ui.composerIconButton.composer.success",defaultMessage:"ui.composerIconButton.composer.success"}),{action:t=>s.createElement(y.Z,{to:x.url(E[`${e.type.toUpperCase()}_ROUTE_NAME`],C.p3(e))},s.createElement(O.Z,{id:"ui.composerIconButton.composer.viewContribute",defaultMessage:"ui.composerIconButton.composer.viewContribute"})),variant:"success",autoHideDuration:7e3});const t={type:e.type,[e.type]:e,seen_by_id:[],has_boost:!1};P&&P.current&&P.current.addFeedData(t,!0)},defaultValue:{categories:[R]}}),CustomAdvProps:{position:Z.n.POSITION_FEED,categoriesId:[R.id]},enabledCustomAdvPositions:[Z.n.POSITION_FEED_SIDEBAR,Z.n.POSITION_FEED,Z.n.POSITION_BELOW_TOPBAR]},k)):s.createElement(h.Z,null)}},45431:(e,t,n)=>{n.d(t,{Z:()=>m});var s=n(67294),a=n(63902),o=n(78462),r=n(90948),i=n(12805),l=n(44267),c=n(89546);const d={root:`${c.B}-skeleton-root`,list:`${c.B}-list`},u=(0,r.ZP)(a.Z,{name:c.B,slot:"SkeletonRoot"})((()=>({})));function m(e){return s.createElement(u,Object.assign({className:d.root},e),s.createElement(l.Z,null,s.createElement(o.Z,{className:d.list},[...Array(4)].map(((e,t)=>s.createElement(i.Z,{key:t,elevation:0}))))))}},89546:(e,t,n)=>{n.d(t,{B:()=>s});const s="SCCategoryTrendingFeedWidget"},81820:(e,t,n)=>{n.d(t,{Z:()=>X});var s=n(97582),a=n(67294),o=n(90948),r=n(78462),i=n(2734),l=n(61730),c=n(44267),d=n(15861),u=n(97212),m=n(25662),g=n(63902),p=n(98704),y=n(24243),E=n(24085),Z=n(59219),h=n(99960),f=n(5840),_=n(75459),b=n(38509),O=n(12805),N=n(44012),C=n(37024),S=n(94184),v=n.n(S),T=n(39154),I=n(79558),j=n(45431),k=n(29628),x=n(54545),L=n(69721),P=n(68787),R=n(66380),A=n(41538),F=n(85472),B=n(98365),D=n(97265),M=n(12132),U=n(15927),w=n(89546);const W={root:`${w.B}-root`,title:`${w.B}-title`,noResults:`${w.B}-no-results`,showMore:`${w.B}-show-more`,dialogRoot:`${w.B}-dialog-root`,endMessage:`${w.B}-end-message`},K=(0,o.ZP)(g.Z,{name:w.B,slot:"Root"})((()=>({}))),$=(0,o.ZP)(T.Z,{name:w.B,slot:"DialogRoot"})((()=>({})));const X=function(e){const t=(0,k.Z)({props:e,name:w.B}),{className:n=null,categoryId:o=null,autoHide:g=null,limit:S=3,FeedObjectProps:T={template:C.r.SNIPPET},cacheStrategy:X=Z.n2.CACHE_FIRST,onHeightChange:z,onStateChange:H,DialogProps:G={}}=t,V=(0,s._T)(t,["className","categoryId","autoHide","limit","FeedObjectProps","cacheStrategy","onHeightChange","onStateChange","DialogProps"]),[Y,q]=(0,a.useReducer)(U.Xi,{isLoadingNext:!1,next:null,cacheKey:L.hu(L.ol,o),cacheStrategy:X,visibleItems:S},U.Mv),[J,Q]=(0,a.useState)(!1),ee=(0,P.LD)(),te=(0,R.ko)(),ne=(0,A.sy)(),se=(0,a.useMemo)((()=>F.Ao in te.preferences&&te.preferences[F.Ao].value),[te]),ae=(0,i.Z)(),oe=(0,l.Z)(ae.breakpoints.down("md")),{scCategory:re}=(0,B.Z)({id:o}),ie=re?re.id:null,le=(0,a.useMemo)((()=>()=>{Y.initialized||Y.isLoadingNext||(q({type:U.dK.LOADING_NEXT}),p.Z.getCategoryTrendingFeed(ie,{limit:S}).then((e=>{q({type:U.dK.LOAD_NEXT_SUCCESS,payload:Object.assign(Object.assign({},e),{initialized:!0})})})).catch((e=>{q({type:U.dK.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),h.Y.error(_.J,e)})))}),[ie,Y.isLoadingNext,Y.initialized,S,q]);(0,a.useEffect)((()=>{var e;let t;if(void 0!==ee.user&&ie&&(se||!se&&(null===(e=ee.user)||void 0===e?void 0:e.id)))return t=setTimeout(le),()=>{t&&clearTimeout(t)}}),[ie,ee.user,se]),(0,a.useEffect)((()=>{J&&Y.next&&Y.results.length===S&&Y.initialized&&(q({type:U.dK.LOADING_NEXT}),p.Z.getCategoryTrendingFeed(ie,{offset:S,limit:10}).then((e=>{q({type:U.dK.LOAD_NEXT_SUCCESS,payload:Object.assign(Object.assign({},e),{initialized:!0})})})).catch((e=>{q({type:U.dK.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),h.Y.error(_.J,e)})))}),[J,S,Y.next,Y.results.length,Y.initialized,ie]),(0,a.useEffect)((()=>{z&&z()}),[Y.results]),(0,a.useEffect)((()=>{(se||ee.user)&&(0,f.U)(ie)&&X===Z.n2.NETWORK_ONLY&&H&&H({cacheStrategy:Z.n2.CACHE_FIRST})}),[se,X,ie,ee.user]);const ce=(0,a.useMemo)((()=>()=>{q({type:U.dK.LOADING_NEXT}),y.Z.request({url:Y.next,method:E.Z.CategoryTrendingFeed.method}).then((e=>{q({type:U.dK.LOAD_NEXT_SUCCESS,payload:e.data})}))}),[q,Y.next]),de=()=>{Q((e=>!e))};if(!se&&!ee.user||g&&!Y.count&&Y.initialized)return a.createElement(x.Z,null);if(!Y.initialized)return a.createElement(j.Z,null);const ue=a.createElement(c.Z,null,a.createElement(d.Z,{className:W.title,variant:"h5"},a.createElement(N.Z,{id:"ui.categoryTrendingFeedWidget.title",defaultMessage:"ui.categoryTrendingFeedWidget.title"})),Y.count?a.createElement(a.Fragment,null,a.createElement(r.Z,null,Y.results.slice(0,Y.visibleItems).map((e=>a.createElement(u.ZP,{key:e[e.type].id},a.createElement(b.Z,Object.assign({elevation:0,feedObject:e[e.type]},T)))))),Y.count>Y.visibleItems&&a.createElement(m.Z,Object.assign({className:W.showMore},oe?{onClick:de}:{component:D.Z,to:ne.url(M.CATEGORY_TRENDING_FEED_ROUTE_NAME,re)}),a.createElement(N.Z,{id:"ui.categoryTrendingFeedWidget.button.showAll",defaultMessage:"ui.categoryTrendingFeedWidget.button.showAll"}))):a.createElement(d.Z,{className:W.noResults,variant:"body2"},a.createElement(N.Z,{id:"ui.categoryTrendingFeedWidget.noResults",defaultMessage:"ui.categoryTrendingFeedWidget.noResults"})),J&&a.createElement($,Object.assign({className:W.dialogRoot,title:a.createElement(N.Z,{defaultMessage:"ui.categoryTrendingFeedWidget.title",id:"ui.categoryTrendingFeedWidget.title",values:{total:Y.count}}),onClose:de,open:J},G),a.createElement(I.Z,{dataLength:Y.results.length,next:ce,hasMoreNext:Boolean(Y.next),loaderNext:a.createElement(O.Z,Object.assign({elevation:0},T)),height:oe?"100%":400,endMessage:a.createElement(d.Z,{className:W.endMessage},a.createElement(N.Z,{id:"ui.categoryTrendingFeedWidget.noMoreResults",defaultMessage:"ui.categoryTrendingFeedWidget.noMoreResults"}))},a.createElement(r.Z,null,Y.results.map((e=>a.createElement(u.ZP,{key:e[e.type].id},a.createElement(b.Z,Object.assign({elevation:0,feedObject:e[e.type]},T)))))))));return a.createElement(K,Object.assign({className:v()(W.root,n)},V),ue)}},14459:(e,t,n)=>{n.d(t,{Z:()=>g});var s=n(67294),a=n(63902),o=n(78462),r=n(90948),i=n(50353),l=n(44267),c=n(97212),d=n(33584);const u={root:`${d.B}-skeleton-root`,list:`${d.B}-list`},m=(0,r.ZP)(a.Z,{name:d.B,slot:"SkeletonRoot"})((()=>({})));function g(e){return s.createElement(m,Object.assign({className:u.root},e),s.createElement(l.Z,null,s.createElement(o.Z,{className:u.list},[...Array(4)].map(((e,t)=>s.createElement(c.ZP,{key:t},s.createElement(i.Z,{elevation:0})))))))}},33584:(e,t,n)=>{n.d(t,{B:()=>s});const s="SCCategoryTrendingUsersWidget"},12673:(e,t,n)=>{n.d(t,{Z:()=>w});var s=n(97582),a=n(67294),o=n(90948),r=n(78462),i=n(2734),l=n(61730),c=n(44267),d=n(15861),u=n(97212),m=n(25662),g=n(63902),p=n(98704),y=n(24243),E=n(24085),Z=n(69721),h=n(68787),f=n(66380),_=n(85472),b=n(98365),O=n(44012),N=n(37089),C=n(50353),S=n(94184),v=n.n(S),T=n(39154),I=n(79558),j=n(14459),k=n(29628),x=n(54545),L=n(59219),P=n(99960),R=n(5840),A=n(15927),F=n(75459),B=n(33584);const D={root:`${B.B}-root`,title:`${B.B}-title`,noResults:`${B.B}-no-results`,showMore:`${B.B}-show-more`,dialogRoot:`${B.B}-dialog-root`,endMessage:`${B.B}-end-message`},M=(0,o.ZP)(g.Z,{name:B.B,slot:"Root"})((()=>({}))),U=(0,o.ZP)(T.Z,{name:B.B,slot:"DialogRoot"})((()=>({})));const w=function(e){const t=(0,k.Z)({props:e,name:B.B}),{className:n=null,categoryId:o=null,autoHide:g=null,limit:S=3,UserProps:T={},cacheStrategy:w=L.n2.CACHE_FIRST,onHeightChange:W,onStateChange:K,DialogProps:$={}}=t,X=(0,s._T)(t,["className","categoryId","autoHide","limit","UserProps","cacheStrategy","onHeightChange","onStateChange","DialogProps"]),[z,H]=(0,a.useReducer)(A.Xi,{isLoadingNext:!1,next:null,cacheKey:Z.hu(Z.zj,o),cacheStrategy:w,visibleItems:S},A.Mv),[G,V]=(0,a.useState)(!1),Y=(0,h.LD)(),q=(0,f.ko)(),J=(0,a.useMemo)((()=>_.Ao in q.preferences&&q.preferences[_.Ao].value),[q]),Q=(0,i.Z)(),ee=(0,l.Z)(Q.breakpoints.down("md")),{scCategory:te}=(0,b.Z)({id:o}),ne=te?te.id:null,se=(0,a.useMemo)((()=>()=>{z.initialized||z.isLoadingNext||(H({type:A.dK.LOADING_NEXT}),p.Z.getCategoryTrendingFollowers(ne,{limit:S}).then((e=>{H({type:A.dK.LOAD_NEXT_SUCCESS,payload:Object.assign(Object.assign({},e),{initialized:!0})})})).catch((e=>{H({type:A.dK.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),P.Y.error(F.J,e)})))}),[ne,z.isLoadingNext,z.initialized,S,H]);(0,a.useEffect)((()=>{var e;let t;if(void 0!==Y.user&&ne&&(J||!J&&(null===(e=Y.user)||void 0===e?void 0:e.id)))return t=setTimeout(se),()=>{t&&clearTimeout(t)}}),[ne,Y.user,J]),(0,a.useEffect)((()=>{G&&z.next&&z.results.length===S&&z.initialized&&(H({type:A.dK.LOADING_NEXT}),p.Z.getCategoryTrendingFollowers(ne,{offset:S,limit:10}).then((e=>{H({type:A.dK.LOAD_NEXT_SUCCESS,payload:e})})).catch((e=>{H({type:A.dK.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),P.Y.error(F.J,e)})))}),[G,S,z.next,z.initialized,z.results.length,ne]),(0,a.useEffect)((()=>{W&&W()}),[z.results]),(0,a.useEffect)((()=>{(J||Y.user)&&(0,R.U)(ne)&&w===L.n2.NETWORK_ONLY&&K&&K({cacheStrategy:L.n2.CACHE_FIRST})}),[J,w,ne,Y.user]);const ae=(0,a.useMemo)((()=>()=>{H({type:A.dK.LOADING_NEXT}),y.Z.request({url:z.next,method:E.Z.CategoryTrendingPeople.method}).then((e=>{H({type:A.dK.LOAD_NEXT_SUCCESS,payload:e.data})}))}),[H,z.next]),oe=()=>{V((e=>!e))};if(!J&&!Y.user||g&&!z.count&&z.initialized)return a.createElement(x.Z,null);if(!z.initialized)return a.createElement(j.Z,null);const re=a.createElement(c.Z,null,a.createElement(d.Z,{className:D.title,variant:"h5"},a.createElement(O.Z,{id:"ui.categoryTrendingUsersWidget.title",defaultMessage:"ui.categoryTrendingUsersWidget.title"})),z.count?a.createElement(a.Fragment,null,a.createElement(r.Z,null,z.results.slice(0,z.visibleItems).map((e=>a.createElement(u.ZP,{key:e.id},a.createElement(N.Z,Object.assign({elevation:0,user:e},T)))))),z.count>z.visibleItems&&a.createElement(m.Z,{className:D.showMore,onClick:oe},a.createElement(O.Z,{id:"ui.categoryTrendingUsersWidget.button.showAll",defaultMessage:"ui.categoryTrendingUsersWidget.button.showAll"}))):a.createElement(d.Z,{className:D.noResults,variant:"body2"},a.createElement(O.Z,{id:"ui.categoryTrendingUsersWidget.noResults",defaultMessage:"ui.categoryTrendingUsersWidget.noResults"})),G&&a.createElement(U,Object.assign({className:D.dialogRoot,title:a.createElement(O.Z,{defaultMessage:"ui.categoryTrendingUsersWidget.title",id:"ui.categoryTrendingUsersWidget.title",values:{total:z.count}}),onClose:oe,open:G},$),a.createElement(I.Z,{dataLength:z.results.length,next:ae,hasMoreNext:Boolean(z.next),loaderNext:a.createElement(C.Z,Object.assign({elevation:0},T)),height:ee?"100%":400,endMessage:a.createElement(d.Z,{className:D.endMessage},a.createElement(O.Z,{id:"ui.categoryTrendingUsersWidget.noMoreResults",defaultMessage:"ui.categoryTrendingUsersWidget.noMoreResults"}))},a.createElement(r.Z,null,z.results.map((e=>a.createElement(u.ZP,{key:e.id},a.createElement(N.Z,Object.assign({elevation:0,user:e},T)))))))));return a.createElement(M,Object.assign({className:v()(D.root,n)},X),re)}},24540:(e,t,n)=>{n.d(t,{Z:()=>m});var s=n(67294),a=n(90948),o=n(88078),r=n(44267),i=n(5616),l=n(63902),c=n(31717);const d={root:`${c.B}-skeleton-root`,content:`${c.B}-content`,input:`${c.B}-input`,avatar:`${c.B}-avatar`},u=(0,a.ZP)(l.Z,{name:c.B,slot:"SkeletonRoot"})((()=>({})));function m(){return s.createElement(u,{className:d.root},s.createElement(r.Z,{className:d.content},s.createElement(i.Z,{className:d.input},s.createElement(o.Z,{animation:"wave",variant:"text"})),s.createElement(i.Z,{className:d.avatar},s.createElement(o.Z,{className:d.avatar,animation:"wave",variant:"circular"}))))}},31717:(e,t,n)=>{n.d(t,{B:()=>s});const s="SCInlineComposerWidget"},93132:(e,t,n)=>{n.d(t,{Z:()=>j});var s=n(97582),a=n(67294),o=n(53704),r=n(68787),i=n(41538),l=n(66380),c=n(85472),d=n(65580),u=n(97265),m=n(12132),g=n(44267),p=n(5616),y=n(25662),E=n(87952),Z=n(90948),h=n(44012),f=n(20377),_=n(63902),b=n(29628),O=n(91290),N=n(22461),C=n(70815),S=n(31717),v=n(54545);const T={root:`${S.B}-root`,content:`${S.B}-content`,input:`${S.B}-input`,avatar:`${S.B}-avatar`},I=(0,Z.ZP)(_.Z,{name:S.B,slot:"Root"})((()=>({})));const j=function(e){const t=(0,b.Z)({props:e,name:S.B}),{mediaObjectTypes:n=[N.Z,C.Z],defaultValue:Z,onSuccess:_=null,label:j}=t,k=(0,s._T)(t,["mediaObjectTypes","defaultValue","onSuccess","label"]),x=(0,o.RM)(),L=(0,r.LD)(),P=(0,i.sy)(),{enqueueSnackbar:R}=(0,f.Ds)(),A=(0,l.ko)(),F=(0,a.useMemo)((()=>A.preferences[c.Kq].value),[A.preferences]),[B,D]=(0,a.useState)(!1),M=(0,a.useCallback)((()=>{L.user?d.IT(L.user)?R(a.createElement(h.Z,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3}):D(!0):x.settings.handleAnonymousAction()}),[L.user,x.settings]),U=(0,a.useCallback)((()=>{D(!1)}),[]);return!d.B2(L.user)&&F?a.createElement(v.Z,null):a.createElement(a.Fragment,null,a.createElement(I,Object.assign({className:T.root},k),a.createElement(g.Z,{className:T.content},a.createElement(p.Z,{className:T.input},a.createElement(y.Z,{variant:"text",disableFocusRipple:!0,disableRipple:!0,disableElevation:!0,onClick:M,fullWidth:!0,color:"inherit"},null!=j?j:a.createElement(h.Z,{id:"ui.inlineComposerWidget.label",defaultMessage:"ui.inlineComposerWidget.label"}))),a.createElement(p.Z,{className:T.avatar},L.user?a.createElement(u.Z,{to:P.url(m.USER_PROFILE_ROUTE_NAME,L.user)},a.createElement(E.Z,{alt:L.user.username,variant:"circular",src:L.user.avatar})):a.createElement(E.Z,{variant:"circular"})))),a.createElement(O.Z,{open:B,mediaObjectTypes:n,defaultValue:Z,fullWidth:!0,onClose:U,onSuccess:e=>{_?_(e):R(a.createElement(h.Z,{id:"ui.inlineComposerWidget.success",defaultMessage:"ui.inlineComposerWidget.success"}),{variant:"success",autoHideDuration:3e3}),D(!1)}}))}},15927:(e,t,n)=>{n.d(t,{Mv:()=>r,Xi:()=>o,dK:()=>a});var s=n(59219);const a={LOADING_NEXT:"_loading_next",LOADING_PREVIOUS:"_loading_previous",LOAD_NEXT_SUCCESS:"_load_next_success",LOAD_PREVIOUS_SUCCESS:"_load_previous_success",LOAD_NEXT_FAILURE:"_load_next_failure",LOAD_PREVIOUS_FAILURE:"_load_previous_failure",SET_RESULTS:"_set_results",SET_VISIBLE_ITEMS:"_set_visible_items",RESET:"_reset"};function o(e,t){var n;let o=Object.assign({},e);switch(t.type){case a.LOADING_NEXT:o=Object.assign(Object.assign({},e),{isLoadingNext:!0,errorLoadNext:null});break;case a.LOADING_PREVIOUS:o=Object.assign(Object.assign({},e),{isLoadingPrevious:!0,errorLoadPrevious:null});break;case a.LOAD_NEXT_SUCCESS:o=Object.assign(Object.assign({},e),{isLoadingNext:!1,count:t.payload.count,next:t.payload.next?t.payload.next:null,results:[...e.results,...t.payload.results],errorLoadNext:null,initialized:(null===(n=t.payload)||void 0===n?void 0:n.initialized)||!0});break;case a.LOAD_PREVIOUS_SUCCESS:o=Object.assign(Object.assign({},e),{isLoadingPrevious:!1,count:t.payload.count,previous:t.payload.previous?t.payload.previous:null,results:[...t.payload.results,...e.results],errorPreviousNext:null});break;case a.SET_RESULTS:o=Object.assign(Object.assign(Object.assign({},e),{results:[...t.payload.results]}),t.payload.count?{count:t.payload.count}:{});break;case a.SET_VISIBLE_ITEMS:o=Object.assign(Object.assign({},e),{visibleItems:t.payload.visibleItems});break;case a.LOAD_NEXT_FAILURE:o=Object.assign(Object.assign({},e),{isLoadingNext:!1,errorLoadNext:t.payload.error});break;case a.LOAD_PREVIOUS_FAILURE:o=Object.assign(Object.assign({},e),{isLoadingNext:!1,errorLoadPrevious:t.payload.error});break;case a.RESET:o={isLoadingNext:!1,next:null,results:[],count:0,errorLoadNext:null,initialized:!1}}return s.ZP.set(o.cacheKey,o),o}function r(e){let t={cacheKey:e.cacheKey?e.cacheKey:null,count:e.count?e.count:0,results:e.results?e.results:[],next:e.next?e.next:null,previous:e.previous?e.previous:null,isLoadingNext:!!e.isLoadingNext&&e.isLoadingNext,isLoadingPrevious:!!e.isLoadingPrevious&&e.isLoadingPrevious,visibleItems:e.visibleItems?e.visibleItems:null,initialized:!1};if(t.cacheKey&&s.ZP.hasKey(t.cacheKey)&&e.cacheStrategy!==s.n2.NETWORK_ONLY){const e=s.ZP.get(t.cacheKey);return Object.assign(Object.assign({},t),e)}return t}},5840:(e,t,n)=>{function s(e){return!isNaN(e)&&parseInt(String(Number(e)))==e&&!isNaN(parseInt(String(e),10))}n.d(t,{U:()=>s})}}]);