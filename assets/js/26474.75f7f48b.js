/*! For license information please see 26474.75f7f48b.js.LICENSE.txt */
(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[26474],{51107:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var a=n(80102),o=n(83117),r=n(67294),l=(n(76607),n(63961)),i=n(58510),s=n(90948),c=n(71657),u=n(54801),d=n(87952),m=n(1977),p=n(8027);function g(e){return(0,p.ZP)("MuiAvatarGroup",e)}const f=(0,m.Z)("MuiAvatarGroup",["root","avatar"]);var h=n(85893);const b=["children","className","component","componentsProps","max","renderSurplus","slotProps","spacing","total","variant"],v={small:-16,medium:null},E=(0,s.ZP)("div",{name:"MuiAvatarGroup",slot:"Root",overridesResolver:(e,t)=>(0,o.Z)({[`& .${f.avatar}`]:t.avatar},t.root)})((({theme:e,ownerState:t})=>{const n=t.spacing&&void 0!==v[t.spacing]?v[t.spacing]:-t.spacing;return{[`& .${u.Z.root}`]:{border:`2px solid ${(e.vars||e).palette.background.default}`,boxSizing:"content-box",marginLeft:null!=n?n:-8,"&:last-child":{marginLeft:0}},display:"flex",flexDirection:"row-reverse"}})),y=r.forwardRef((function(e,t){var n;const s=(0,c.Z)({props:e,name:"MuiAvatarGroup"}),{children:u,className:m,component:p="div",componentsProps:f={},max:v=5,renderSurplus:y,slotProps:O={},spacing:C="medium",total:Z,variant:j="circular"}=s,w=(0,a.Z)(s,b);let S=v<2?2:v;const N=(0,o.Z)({},s,{max:v,spacing:C,component:p,variant:j}),_=(e=>{const{classes:t}=e;return(0,i.Z)({root:["root"],avatar:["avatar"]},g,t)})(N),k=r.Children.toArray(u).filter((e=>r.isValidElement(e))),T=Z||k.length;T===S&&(S+=1),S=Math.min(T+1,S);const A=Math.min(k.length,S-1),P=Math.max(T-S,T-A,0),x=y?y(P):`+${P}`,M=null!=(n=O.additionalAvatar)?n:f.additionalAvatar;return(0,h.jsxs)(E,(0,o.Z)({as:p,ownerState:N,className:(0,l.Z)(_.root,m),ref:t},w,{children:[P?(0,h.jsx)(d.Z,(0,o.Z)({variant:j},M,{className:(0,l.Z)(_.avatar,null==M?void 0:M.className),children:x})):null,k.slice(0,A).reverse().map((e=>r.cloneElement(e,{className:(0,l.Z)(e.props.className,_.avatar),variant:e.props.variant||j})))]}))}))},62023:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var a=n(80102),o=n(83117),r=n(67294),l=n(63961),i=n(58510),s=n(90948),c=n(71657),u=n(1977),d=n(8027);function m(e){return(0,d.ZP)("MuiCardActions",e)}(0,u.Z)("MuiCardActions",["root","spacing"]);var p=n(85893);const g=["disableSpacing","className"],f=(0,s.ZP)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})((({ownerState:e})=>(0,o.Z)({display:"flex",alignItems:"center",padding:8},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}}))),h=r.forwardRef((function(e,t){const n=(0,c.Z)({props:e,name:"MuiCardActions"}),{disableSpacing:r=!1,className:s}=n,u=(0,a.Z)(n,g),d=(0,o.Z)({},n,{disableSpacing:r}),h=(e=>{const{classes:t,disableSpacing:n}=e,a={root:["root",!n&&"spacing"]};return(0,i.Z)(a,m,t)})(d);return(0,p.jsx)(f,(0,o.Z)({className:(0,l.Z)(h.root,s),ownerState:d,ref:t},u))}))},81458:(e,t,n)=>{"use strict";n.d(t,{Z:()=>M});var a=n(80102),o=n(83117),r=n(67294),l=n(63961),i=n(58510),s=n(70917),c=n(2101),u=n(82056),d=n(98216),m=n(90948),p=n(71657),g=n(1977),f=n(8027);function h(e){return(0,f.ZP)("MuiLinearProgress",e)}(0,g.Z)("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);var b=n(85893);const v=["className","color","value","valueBuffer","variant"];let E,y,O,C,Z,j,w=e=>e;const S=(0,s.F4)(E||(E=w`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),N=(0,s.F4)(y||(y=w`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),_=(0,s.F4)(O||(O=w`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),k=(e,t)=>"inherit"===t?"currentColor":e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:"light"===e.palette.mode?(0,c.$n)(e.palette[t].main,.62):(0,c._j)(e.palette[t].main,.5),T=(0,m.ZP)("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${(0,d.Z)(n.color)}`],t[n.variant]]}})((({ownerState:e,theme:t})=>(0,o.Z)({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:k(t,e.color)},"inherit"===e.color&&"buffer"!==e.variant&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},"buffer"===e.variant&&{backgroundColor:"transparent"},"query"===e.variant&&{transform:"rotate(180deg)"}))),A=(0,m.ZP)("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.dashed,t[`dashedColor${(0,d.Z)(n.color)}`]]}})((({ownerState:e,theme:t})=>{const n=k(t,e.color);return(0,o.Z)({position:"absolute",marginTop:0,height:"100%",width:"100%"},"inherit"===e.color&&{opacity:.3},{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})}),(0,s.iv)(C||(C=w`
    animation: ${0} 3s infinite linear;
  `),_)),P=(0,m.ZP)("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${(0,d.Z)(n.color)}`],("indeterminate"===n.variant||"query"===n.variant)&&t.bar1Indeterminate,"determinate"===n.variant&&t.bar1Determinate,"buffer"===n.variant&&t.bar1Buffer]}})((({ownerState:e,theme:t})=>(0,o.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:"inherit"===e.color?"currentColor":(t.vars||t).palette[e.color].main},"determinate"===e.variant&&{transition:"transform .4s linear"},"buffer"===e.variant&&{zIndex:1,transition:"transform .4s linear"})),(({ownerState:e})=>("indeterminate"===e.variant||"query"===e.variant)&&(0,s.iv)(Z||(Z=w`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),S))),x=(0,m.ZP)("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${(0,d.Z)(n.color)}`],("indeterminate"===n.variant||"query"===n.variant)&&t.bar2Indeterminate,"buffer"===n.variant&&t.bar2Buffer]}})((({ownerState:e,theme:t})=>(0,o.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},"buffer"!==e.variant&&{backgroundColor:"inherit"===e.color?"currentColor":(t.vars||t).palette[e.color].main},"inherit"===e.color&&{opacity:.3},"buffer"===e.variant&&{backgroundColor:k(t,e.color),transition:"transform .4s linear"})),(({ownerState:e})=>("indeterminate"===e.variant||"query"===e.variant)&&(0,s.iv)(j||(j=w`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),N))),M=r.forwardRef((function(e,t){const n=(0,p.Z)({props:e,name:"MuiLinearProgress"}),{className:r,color:s="primary",value:c,valueBuffer:m,variant:g="indeterminate"}=n,f=(0,a.Z)(n,v),E=(0,o.Z)({},n,{color:s,variant:g}),y=(e=>{const{classes:t,variant:n,color:a}=e,o={root:["root",`color${(0,d.Z)(a)}`,n],dashed:["dashed",`dashedColor${(0,d.Z)(a)}`],bar1:["bar",`barColor${(0,d.Z)(a)}`,("indeterminate"===n||"query"===n)&&"bar1Indeterminate","determinate"===n&&"bar1Determinate","buffer"===n&&"bar1Buffer"],bar2:["bar","buffer"!==n&&`barColor${(0,d.Z)(a)}`,"buffer"===n&&`color${(0,d.Z)(a)}`,("indeterminate"===n||"query"===n)&&"bar2Indeterminate","buffer"===n&&"bar2Buffer"]};return(0,i.Z)(o,h,t)})(E),O=(0,u.V)(),C={},Z={bar1:{},bar2:{}};if("determinate"===g||"buffer"===g)if(void 0!==c){C["aria-valuenow"]=Math.round(c),C["aria-valuemin"]=0,C["aria-valuemax"]=100;let e=c-100;O&&(e=-e),Z.bar1.transform=`translateX(${e}%)`}else 0;if("buffer"===g)if(void 0!==m){let e=(m||0)-100;O&&(e=-e),Z.bar2.transform=`translateX(${e}%)`}else 0;return(0,b.jsxs)(T,(0,o.Z)({className:(0,l.Z)(y.root,r),ownerState:E,role:"progressbar"},C,{ref:t},f,{children:["buffer"===g?(0,b.jsx)(A,{className:y.dashed,ownerState:E}):null,(0,b.jsx)(P,{className:y.bar1,ownerState:E,style:Z.bar1}),"determinate"===g?null:(0,b.jsx)(x,{className:y.bar2,ownerState:E,style:Z.bar2})]}))}))},98619:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var a=n(80102),o=n(83117),r=n(67294),l=n(63961),i=n(58510),s=n(2101),c=n(90948),u=n(14136),d=n(71657),m=n(49990),p=n(58974),g=n(51705),f=n(59773),h=n(68686),b=n(85893);const v=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],E=(0,c.ZP)(m.Z,{shouldForwardProp:e=>(0,u.Z)(e)||"classes"===e,name:"MuiListItemButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((({theme:e,ownerState:t})=>(0,o.Z)({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${h.Z.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,s.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${h.Z.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,s.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${h.Z.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,s.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,s.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${h.Z.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${h.Z.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},"flex-start"===t.alignItems&&{alignItems:"flex-start"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.dense&&{paddingTop:4,paddingBottom:4}))),y=r.forwardRef((function(e,t){const n=(0,d.Z)({props:e,name:"MuiListItemButton"}),{alignItems:s="center",autoFocus:c=!1,component:u="div",children:m,dense:y=!1,disableGutters:O=!1,divider:C=!1,focusVisibleClassName:Z,selected:j=!1,className:w}=n,S=(0,a.Z)(n,v),N=r.useContext(f.Z),_=r.useMemo((()=>({dense:y||N.dense||!1,alignItems:s,disableGutters:O})),[s,N.dense,y,O]),k=r.useRef(null);(0,p.Z)((()=>{c&&k.current&&k.current.focus()}),[c]);const T=(0,o.Z)({},n,{alignItems:s,dense:_.dense,disableGutters:O,divider:C,selected:j}),A=(e=>{const{alignItems:t,classes:n,dense:a,disabled:r,disableGutters:l,divider:s,selected:c}=e,u={root:["root",a&&"dense",!l&&"gutters",s&&"divider",r&&"disabled","flex-start"===t&&"alignItemsFlexStart",c&&"selected"]},d=(0,i.Z)(u,h.t,n);return(0,o.Z)({},n,d)})(T),P=(0,g.Z)(k,t);return(0,b.jsx)(f.Z.Provider,{value:_,children:(0,b.jsx)(E,(0,o.Z)({ref:P,href:S.href||S.to,component:(S.href||S.to)&&"div"===u?"button":u,focusVisibleClassName:(0,l.Z)(A.focusVisible,Z),ownerState:T,className:(0,l.Z)(A.root,w)},S,{classes:A,children:m}))})}))},98704:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var a=n(97582),o=n(24085),r=n(91705);class l{static getAllCategories(e,t){return(0,r.N)(Object.assign(Object.assign({},t),{params:e,url:o.Z.CategoryList.url({}),method:o.Z.CategoryList.method}))}static searchCategory(e,t){return(0,r.N)(Object.assign(Object.assign({},t),{params:e,url:o.Z.SearchCategory.url({}),method:o.Z.SearchCategory.method}))}static createCategory(e,t){return(0,r.N)(Object.assign({url:o.Z.CreateCategory.url({}),method:o.Z.CreateCategory.method,data:e},t))}static getSpecificCategory(e,t){return(0,r.N)(Object.assign({url:o.Z.Category.url({id:e}),method:o.Z.Category.method},t))}static updateASpecificCategory(e,t,n){return(0,r.N)(Object.assign({url:o.Z.UpdateCategory.url({id:e}),method:o.Z.UpdateCategory.method,data:t},n))}static patchASpecificCategory(e,t,n){return(0,r.N)(Object.assign({url:o.Z.PatchCategory.url({id:e}),method:o.Z.PatchCategory.method,data:t},n))}static deleteASpecificCategory(e,t){return(0,r.N)(Object.assign({url:o.Z.DeleteCategory.url({id:e}),method:o.Z.DeleteCategory.method},t))}static getCategoryAudience(e,t){return(0,r.N)(Object.assign({url:o.Z.CategoryAudience.url({id:e}),method:o.Z.CategoryAudience.method},t))}static getCategoryFollowers(e,t,n){return(0,r.N)(Object.assign({url:o.Z.CategoryFollowers.url({id:e}),method:o.Z.CategoryFollowers.method,params:t},n))}static getCategoryFeed(e,t,n){return(0,r.N)(Object.assign({url:o.Z.CategoryFeed.url({id:e}),method:o.Z.CategoryFeed.method,params:t},n))}static getCategoryTrendingFeed(e,t,n){return(0,r.N)(Object.assign(Object.assign({},n),{params:t,url:o.Z.CategoryTrendingFeed.url({id:e}),method:o.Z.CategoryTrendingFeed.method}))}static getCategoryTrendingFollowers(e,t,n){return(0,r.N)(Object.assign({url:o.Z.CategoryTrendingPeople.url({id:e}),method:o.Z.CategoryTrendingPeople.method,params:t},n))}static followCategory(e,t){return(0,r.N)(Object.assign({url:o.Z.FollowCategory.url({id:e}),method:o.Z.FollowCategory.method},t))}static checkCategoryIsFollowed(e,t){return(0,r.N)(Object.assign({url:o.Z.CheckCategoryIsFollowed.url({id:e}),method:o.Z.CheckCategoryIsFollowed.method},t))}static getFollowedCategories(e,t){return(0,r.N)(Object.assign(Object.assign({},t),{params:e,url:o.Z.CategoriesFollowed.url({}),method:o.Z.CategoriesFollowed.method}))}static getPopularCategories(e,t){return(0,r.N)(Object.assign(Object.assign({},t),{params:e,url:o.Z.PopularCategories.url({}),method:o.Z.PopularCategories.method}))}}class i{static getAllCategories(e,t){return(0,a.mG)(this,void 0,void 0,(function*(){return l.getAllCategories(e,t)}))}static searchCategory(e,t){return(0,a.mG)(this,void 0,void 0,(function*(){return l.searchCategory(e,t)}))}static createCategory(e,t){return(0,a.mG)(this,void 0,void 0,(function*(){return l.createCategory(e,t)}))}static getSpecificCategory(e,t){return(0,a.mG)(this,void 0,void 0,(function*(){return l.getSpecificCategory(e,t)}))}static updateASpecificCategory(e,t,n){return(0,a.mG)(this,void 0,void 0,(function*(){return l.updateASpecificCategory(e,t,n)}))}static patchASpecificCategory(e,t,n){return(0,a.mG)(this,void 0,void 0,(function*(){return l.patchASpecificCategory(e,t,n)}))}static deleteASpecificCategory(e,t){return(0,a.mG)(this,void 0,void 0,(function*(){return l.deleteASpecificCategory(e,t)}))}static getCategoryAudience(e,t){return(0,a.mG)(this,void 0,void 0,(function*(){return l.getCategoryAudience(e,t)}))}static getCategoryFollowers(e,t,n){return(0,a.mG)(this,void 0,void 0,(function*(){return l.getCategoryFollowers(e,t,n)}))}static getCategoryFeed(e,t,n){return(0,a.mG)(this,void 0,void 0,(function*(){return l.getCategoryFeed(e,t,n)}))}static getCategoryTrendingFeed(e,t,n){return(0,a.mG)(this,void 0,void 0,(function*(){return l.getCategoryTrendingFeed(e,t,n)}))}static getCategoryTrendingFollowers(e,t,n){return(0,a.mG)(this,void 0,void 0,(function*(){return l.getCategoryTrendingFollowers(e,t,n)}))}static followCategory(e,t){return(0,a.mG)(this,void 0,void 0,(function*(){return l.followCategory(e,t)}))}static checkCategoryIsFollowed(e,t){return(0,a.mG)(this,void 0,void 0,(function*(){return l.checkCategoryIsFollowed(e,t)}))}static getFollowedCategories(e,t){return(0,a.mG)(this,void 0,void 0,(function*(){return l.getFollowedCategories(e,t)}))}static getPopularCategories(e,t){return(0,a.mG)(this,void 0,void 0,(function*(){return l.getPopularCategories(e,t)}))}}},58952:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var a=n(97582),o=n(67294),r=n(74482),l=n(24085),i=n(98704),s=n(59219),c=n(99960),u=n(69721);const d={categories:[],isLoading:!0},m=e=>{const{cacheStrategy:t=s.n2.CACHE_FIRST}=e||{},n=(0,u.Ny)(),m=t!==s.n2.NETWORK_ONLY?(e=>{if(!e)return null;const t=e.map((e=>{const t=(0,u.u5)(e);return s.ZP.get(t)}));return t.filter((e=>!e)).length>0?null:t})(s.ZP.get(n,null)):null,[p,g]=(0,o.useState)(null!==m?{categories:m,isLoading:!1}:d),f=(e=l.Z.CategoryList.url())=>(0,a.mG)(void 0,void 0,void 0,(function*(){const t=yield i.Z.getAllCategories({active:!0},{url:e});return t.next?t.results.concat(yield f(t.next)):t.results}));return(0,o.useEffect)((()=>{t===s.n2.CACHE_FIRST&&m||f().then((e=>{g({categories:e,isLoading:!1}),s.ZP.set(n,e.map((e=>{const t=(0,u.u5)(e.id);return s.ZP.set(t,e),e.id})))})).catch((e=>{console.log(e),c.Y.error(r.h,"Unable to retrieve categories")}))}),[]),p}},94158:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var a=n(97582),o=n(67294),r=n(44012),l=n(45185),i=n(77931),s=n(98456),c=n(69368),u=n(23370),d=n.n(u),m=n(11447),p=n.n(m),g=n(87918),f=n(58952),h=n(90948),b=n(29628);const v="SCCategoryAutocomplete",E={root:`${v}-root`},y=(0,h.ZP)(l.Z,{name:v,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({}))),O=e=>{const t=(0,b.Z)({props:e,name:v}),{onChange:n,multiple:l=!1,defaultValue:u=(l?[]:null),limitCountCategories:m=0,checkboxSelect:h=!1,disabled:O=!1,TextFieldProps:C={variant:"outlined",label:o.createElement(r.Z,{id:"ui.categoryAutocomplete.label",defaultMessage:"ui.categoryAutocomplete.label"})}}=t,Z=(0,a._T)(t,["onChange","multiple","defaultValue","limitCountCategories","checkboxSelect","disabled","TextFieldProps"]),[j,w]=(0,o.useState)(!1),[S,N]=(0,o.useState)("string"==typeof u?null:u),{categories:_,isLoading:k}=(0,f.Z)();(0,o.useEffect)((()=>{null!==S&&n&&n(S)}),[S]),(0,o.useEffect)((()=>{k||"string"!=typeof u||N(l?_.filter((e=>e.id===Number(u))):_.find((e=>e.id===Number(u))))}),[k]);return o.createElement(y,Object.assign({className:E.root,multiple:l,open:j,onOpen:()=>{w(!0)},onClose:()=>{w(!1)},filterSelectedOptions:!h,disableCloseOnSelect:h,options:_||[],getOptionLabel:e=>e.name||"",value:S,selectOnFocus:!0,clearOnBlur:!0,blurOnSelect:!0,handleHomeEndKeys:!0,clearIcon:null,disabled:O||k,noOptionsText:o.createElement(r.Z,{id:"ui.categoryAutocomplete.empty",defaultMessage:"ui.categoryAutocomplete.empty"}),onChange:(e,t)=>{let n=null;if(l&&m>0){const[...e]=t;n=e.slice(-1*m)}else n=t;N(n)},isOptionEqualToValue:(e,t)=>t.id===e.id,renderTags:(e,t)=>e.map(((e,n)=>o.createElement(g.Z,Object.assign({key:e.id,id:e.id,label:e.name,color:e.color},t({index:n}))))),renderOption:(e,t,{selected:n,inputValue:a})=>{const r=p()(t.name,a),l=d()(t.name,r);return o.createElement("li",Object.assign({},e),h&&o.createElement(c.Z,{style:{marginRight:8},checked:n}),o.createElement(g.Z,{label:o.createElement(o.Fragment,null,l.map(((e,t)=>o.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text))))}))},renderInput:e=>o.createElement(i.Z,Object.assign({},e,C,{margin:"dense",InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"categories",endAdornment:o.createElement(o.Fragment,null,k?o.createElement(s.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))},Z))}},91290:(e,t,n)=>{"use strict";n.d(t,{Z:()=>At});var a=n(97582),o=n(67294),r=n(49794),l=n(72951),i=n(24243),s=n(24085),c=n(59488),u=n(66380),d=n(68787),m=n(65580),p=n(85472),g=n(44012),f=n(67564),h=n(16628),b=n(64666),v=n(54776),E=n(61730),y=n(46901),O=n(92401),C=n(37645),Z=n(93946),j=n(6514),w=n(5616),S=n(31425),N=n(90948),_=n(2734);const k="discussion",T="post",A="poll",P=160;var x=n(57250),M=n(31812),I=n(77931),D=n(23370),R=n.n(D),$=n(11447),B=n.n($),L=n(15861),F=n(25662),U=n(20916),V=n(40044),z=n(45185),G=n(8455),H=n(94184),W=n.n(H);const Y="SCComposer";var X=n(98456),q=n(87952),K=n(74482),J=n(59219),Q=n(99960),ee=n(69721);const te={groups:[],isLoading:!0},ne=e=>{const{cacheStrategy:t=J.n2.CACHE_FIRST}=e||{},n=(0,ee.Em)(),r=t!==J.n2.NETWORK_ONLY?(e=>{if(!e)return null;const t=e.map((e=>{const t=(0,ee.b0)(e);return J.ZP.get(t)}));return t.filter((e=>!e)).length>0?null:t})(J.ZP.get(n,null)):null,[l,c]=(0,o.useState)(null!==r?{groups:r,isLoading:!1}:te),u=(e=s.Z.GetUserGroups.url())=>(0,a.mG)(void 0,void 0,void 0,(function*(){const t=(yield i.Z.request({url:e,method:s.Z.GetUserGroups.method})).data;return t.next?t.results.concat(yield u(t.next)):t.results}));return(0,o.useEffect)((()=>{t===J.n2.CACHE_FIRST&&r||u().then((e=>{c({groups:e,isLoading:!1}),J.ZP.set(n,e.map((e=>{const t=(0,ee.b0)(e.id);return J.ZP.set(t,e),e.id})))})).catch((e=>{console.log(e),Q.Y.error(K.h,"Unable to retrieve groups")}))}),[]),l};var ae=n(29628);const oe="SCGroupAutocomplete",re={root:`${oe}-root`},le=(0,N.ZP)(z.Z,{name:oe,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({}))),ie=e=>{const t=(0,ae.Z)({props:e,name:oe}),{onChange:n,defaultValue:r=null,disabled:l=!1,TextFieldProps:i={variant:"outlined",label:o.createElement(g.Z,{id:"ui.groupAutocomplete.label",defaultMessage:"ui.groupAutocomplete.label"})}}=t,s=(0,a._T)(t,["onChange","defaultValue","disabled","TextFieldProps"]),[c,u]=(0,o.useState)(!1),[d,m]=(0,o.useState)("string"==typeof r?null:r),{groups:p,isLoading:f}=ne();(0,o.useEffect)((()=>{null!==d&&n&&n(d)}),[d]),(0,o.useEffect)((()=>{f||"string"!=typeof r||m(p.find((e=>e.id===Number(r))))}),[f]);return o.createElement(le,Object.assign({className:re.root,open:c,onOpen:()=>{u(!0)},onClose:()=>{u(!1)},options:p||[],getOptionLabel:e=>e.name||"",value:d,selectOnFocus:!0,clearOnBlur:!0,blurOnSelect:!0,handleHomeEndKeys:!0,clearIcon:null,disabled:l||f,noOptionsText:o.createElement(g.Z,{id:"ui.groupAutocomplete.empty",defaultMessage:"ui.groupAutocomplete.empty"}),onChange:(e,t)=>{m(t)},isOptionEqualToValue:(e,t)=>t.id===e.id,renderOption:(e,t,{inputValue:n})=>{const a=B()(t.name,n),r=R()(t.name,a);return o.createElement(w.Z,Object.assign({component:"li"},e),o.createElement(q.Z,{alt:t.name,src:t.image_small,sx:{marginRight:1}}),o.createElement(o.Fragment,null,r.map(((e,t)=>o.createElement(L.Z,{key:t,sx:{fontWeight:e.highlight?700:400,marginRight:.2}},e.text)))))},renderInput:e=>o.createElement(I.Z,Object.assign({},e,i,{margin:"dense",InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"groups",endAdornment:o.createElement(o.Fragment,null,f?o.createElement(X.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))},s))};var se;!function(e){e.AUDIENCE_ALL="all",e.AUDIENCE_TAG="tag",e.AUDIENCE_GROUP="group"}(se||(se={}));const ce={root:`${Y}-layer-audience-root`,title:`${Y}-layer-title`,content:`${Y}-layer-content`,message:`${Y}-layer-audience-message`,autocomplete:`${Y}-layer-audience-autocomplete`},ue=(0,N.ZP)(w.Z,{name:Y,slot:"LayerAudienceRoot"})((()=>({}))),de=o.forwardRef(((e,t)=>{const{className:n,onClose:r,onSave:c,defaultValue:m=(se.AUDIENCE_TAG?[]:null),TextFieldProps:p={variant:"outlined",label:o.createElement(g.Z,{id:"ui.composer.layer.audience.tags.label",defaultMessage:"ui.composer.layer.audience.tags.label"})}}=e,h=(0,a._T)(e,["className","onClose","onSave","defaultValue","TextFieldProps"]),[b,v]=(0,o.useState)(!1),[E,y]=(0,o.useState)(null===m||0===m.length?se.AUDIENCE_ALL:m&&Object.prototype.hasOwnProperty.call(m,"managed_by")?se.AUDIENCE_GROUP:se.AUDIENCE_TAG),[O,w]=(0,o.useState)(m||void 0),{scAddressingTags:S}=function({fetch:e=!1}){const[t,n]=(0,o.useState)([]),[a,r]=(0,o.useState)(!1),c=(0,d.LD)(),m=(0,u.ko)(),p=(0,o.useMemo)((()=>()=>i.Z.request({url:s.Z.ComposerAddressingTagList.url(),method:s.Z.ComposerAddressingTagList.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[]);return(0,o.useEffect)((()=>{!a&&e&&c.user&&m.features.includes(l.$.TAGGING)&&p().then((e=>{r(!0),n(e)}))}),[a,e,c.user,m.features]),{scAddressingTags:t}}({fetch:b}),N=(0,o.useCallback)((()=>{E===se.AUDIENCE_GROUP?c(O):c((null==O?void 0:O.length)&&(null==O?void 0:O.length)>0?O:null)}),[O,c,E]),_=(0,o.useCallback)(((e,t)=>w(t)),[]),k=(0,o.useCallback)((e=>w(e)),[]),T=(0,o.useCallback)(((e,t)=>y(t)),[]),A=(0,o.useCallback)((()=>v(!0)),[]),P=(0,o.useCallback)((()=>v(!1)),[]);return console.log(m),o.createElement(ue,Object.assign({ref:t,className:W()(n,ce.root)},h),o.createElement(C.Z,{className:ce.title},o.createElement(Z.Z,{onClick:r},o.createElement(f.Z,null,"arrow_back")),o.createElement(L.Z,null,o.createElement(g.Z,{id:"ui.composer.layer.audience.title",defaultMessage:"ui.composer.layer.audience.title"})),o.createElement(F.Z,{size:"small",color:"secondary",variant:"contained",onClick:N},o.createElement(g.Z,{id:"ui.composer.layer.save",defaultMessage:"ui.composer.layer.save"}))),o.createElement(j.Z,{className:ce.content},o.createElement(U.Z,{value:E,onChange:T,"aria-label":"audience type"},o.createElement(V.Z,{value:se.AUDIENCE_ALL,icon:o.createElement(f.Z,null,"public"),label:o.createElement(g.Z,{id:"ui.composer.layer.audience.all",defaultMessage:"ui.composer.layer.audience.all"})}),o.createElement(V.Z,{disabled:Boolean(null==O?void 0:O.length)&&!Object.prototype.hasOwnProperty.call(O,"managed_by")||void 0!==O&&Boolean(!(null==O?void 0:O.length))&&E!==se.AUDIENCE_ALL||Boolean(0===(null==O?void 0:O.length))&&E===se.AUDIENCE_ALL&&Boolean(0!==(null==m?void 0:m.length)),value:se.AUDIENCE_GROUP,icon:o.createElement(f.Z,null,"groups"),label:o.createElement(g.Z,{id:"ui.composer.layer.audience.group",defaultMessage:"ui.composer.layer.audience.group"})}),o.createElement(V.Z,{disabled:O&&Object.prototype.hasOwnProperty.call(O,"managed_by"),value:se.AUDIENCE_TAG,icon:o.createElement(f.Z,null,"label"),label:o.createElement(g.Z,{id:"ui.composer.layer.audience.tag",defaultMessage:"ui.composer.layer.audience.tag"})})),o.createElement(L.Z,{className:ce.message},E===se.AUDIENCE_ALL&&o.createElement(g.Z,{id:"ui.composer.layer.audience.all.message",defaultMessage:"ui.composer.audience.layer.all.message"}),E===se.AUDIENCE_GROUP&&o.createElement(g.Z,{id:"ui.composer.layer.audience.group.message",defaultMessage:"ui.composer.audience.layer.group.message"}),E===se.AUDIENCE_TAG&&o.createElement(g.Z,{id:"ui.composer.layer.audience.tag.message",defaultMessage:"ui.composer.audience.layer.tag.message"})),E===se.AUDIENCE_TAG&&o.createElement(z.Z,{className:ce.autocomplete,open:b,onOpen:A,onClose:P,multiple:!0,options:S||[],getOptionLabel:e=>e.name||"",value:O,selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,clearIcon:null,noOptionsText:o.createElement(g.Z,{id:"ui.composer.layer.audience.tags.empty",defaultMessage:"ui.composer.layer.audience.tags.empty"}),onChange:_,isOptionEqualToValue:(e,t)=>t.id===e.id,renderTags:(e,t)=>e.map(((e,n)=>o.createElement(G.Z,Object.assign({key:e.id,tag:e},t({index:n}))))),renderOption:(e,t,{selected:n,inputValue:a})=>{const r=B()(t.name,a),l=R()(t.name,r);return o.createElement("li",Object.assign({},e),o.createElement(G.Z,{key:t.id,tag:t,label:o.createElement(o.Fragment,null,l.map(((e,t)=>o.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text))))}))},renderInput:e=>o.createElement(I.Z,Object.assign({},e,p,{InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"addressing",endAdornment:o.createElement(o.Fragment,null,e.InputProps.endAdornment)})}))}),E===se.AUDIENCE_GROUP&&o.createElement(ie,{onChange:k,defaultValue:m})))}));var me=n(77488),pe=n(64635),ge=n(53457),fe=n(34386),he=n(67720),be=n(50480),ve=n(69368),Ee=n(54490),ye=n(86896),Oe=n(16941),Ce=n(87109),Ze=n(50720),je=n(36612),we=n(8381),Se=n(58160),Ne=n(95826),_e=n(23855);const ke={en:Ne.Z,it:Se.Z},Te={root:`${Y}-content-poll-root`,generalError:`${Y}-general-error`,title:`${Y}-content-poll-title`,choices:`${Y}-content-poll-choices`,choiceNew:`${Y}-content-poll-choice-new`,metadata:`${Y}-content-poll-metadata`},Ae=(0,N.ZP)(w.Z,{name:Y,slot:"ContentPollRoot"})((({theme:e})=>({}))),Pe=(0,Ee.vU)({choicePlaceholder:{id:"ui.composer.content.poll.choice.placeholder",defaultMessage:"ui.composer.content.poll.choice.placeholder"}}),xe=(0,o.forwardRef)(((e,t)=>{var{children:n}=e,r=(0,a._T)(e,["children"]);return o.createElement(ge.Z,Object.assign({direction:"column",ref:t},r),n)})),Me={choice:""},Ie={title:"",multiple_choices:!1,expiration_at:null,choices:[Object.assign({},Me),Object.assign({},Me)]},De=e=>{const t=(0,ae.Z)({props:e,name:Y}),{className:n=null,value:a={poll:Object.assign({},Ie)},error:r={},disabled:l,onChange:i}=t,{titleError:s=null,error:c=null}=Object.assign({},r),u=(0,o.useMemo)((()=>a.poll?a.poll:Object.assign({},Ie)),[a,Ie]),d=(0,ye.Z)(),m=(0,o.useCallback)((e=>{i(Object.assign(Object.assign({},a),{poll:Object.assign(Object.assign({},u),{title:e.target.value})}))}),[a,u]),p=(0,o.useCallback)((e=>{i(Object.assign(Object.assign({},a),{poll:Object.assign(Object.assign({},u),{choices:e})}))}),[a,u]),h=(0,o.useCallback)((e=>t=>{const n=[...u.choices];n[e].choice=t.target.value,i(Object.assign(Object.assign({},a),{poll:Object.assign(Object.assign({},u),{choices:n})}))}),[a,u]),b=(0,o.useCallback)((()=>{i(Object.assign(Object.assign({},a),{poll:Object.assign(Object.assign({},u),{choices:[...u.choices,Object.assign({},Me)]})}))}),[a,u]),v=(0,o.useCallback)((e=>t=>{const n=[...u.choices];n.splice(e,1),i(Object.assign(Object.assign({},a),{poll:Object.assign(Object.assign({},u),{choices:n})}))}),[a,u]),E=(0,o.useCallback)((e=>{i(Object.assign(Object.assign({},a),{poll:Object.assign(Object.assign({},u),{multiple_choices:e.target.checked})}))}),[a,u]),y=(0,o.useCallback)((e=>{i(Object.assign(Object.assign({},a),{poll:Object.assign(Object.assign({},u),{expiration_at:e})}))}),[a,u]),O=(0,o.useMemo)((()=>{const e=new Date;return e.setDate(e.getDate()+2),e}),[]);return o.createElement(Ae,{className:W()(Te.root,n)},c&&o.createElement(L.Z,{className:Te.generalError},o.createElement(g.Z,{id:`ui.composer.content.poll.error.${c}`,defaultMessage:`ui.composer.content.poll.error.${c}`})),o.createElement(w.Z,{className:Te.title},o.createElement(I.Z,{autoFocus:!0,disabled:l,label:o.createElement(g.Z,{id:"ui.composer.content.poll.title",defaultMessage:"ui.composer.content.poll.title"}),variant:"outlined",value:u.title,onChange:m,fullWidth:!0,error:Boolean(s),helperText:s&&s,InputProps:{endAdornment:o.createElement(L.Z,{variant:"body2"},160-u.title.length)}})),o.createElement(w.Z,{className:Te.choices},o.createElement(Oe.ReactSortable,{list:[...u.choices],setList:p,tag:xe},u.choices.map(((e,t)=>o.createElement(I.Z,{key:t,placeholder:d.formatMessage(Pe.choicePlaceholder),value:e.choice,onChange:h(t),variant:"outlined",disabled:l,InputProps:{startAdornment:o.createElement(Ce.Z,{position:"start"},o.createElement(f.Z,null,"drag")),endAdornment:o.createElement(Ce.Z,{position:"end"},o.createElement(fe.Z,{title:u.choices.length<=2?o.createElement(g.Z,{id:"ui.composer.content.poll.choice.delete.disabled",defaultMessage:"ui.composer.content.poll.choice.delete.disabled"}):o.createElement(g.Z,{id:"ui.composer.content.poll.choice.delete",defaultMessage:"ui.composer.content.poll.choice.delete"})},o.createElement("span",null,o.createElement(Z.Z,{onClick:v(t),disabled:u.choices.length<=2,edge:"end"},o.createElement(f.Z,null,"delete")))))}}))))),o.createElement(w.Z,{className:Te.choiceNew},o.createElement(F.Z,{color:"inherit",variant:"text",onClick:b},o.createElement(f.Z,null,"add"),o.createElement(g.Z,{id:"ui.composer.content.poll.choice.add",defaultMessage:"ui.composer.choice.add"}))),o.createElement(he.Z,null),o.createElement(ge.Z,{className:Te.metadata},o.createElement(be.Z,{control:o.createElement(ve.Z,{checked:u.multiple_choices,onChange:E}),label:o.createElement(g.Z,{id:"ui.composer.content.poll.multiple",defaultMessage:"ui.composer.content.poll.multiple"})}),o.createElement(Ze._,{dateAdapter:we.H,adapterLocale:ke[d.locale]},o.createElement(je.M,{disabled:l,label:o.createElement(g.Z,{id:"ui.composer.content.poll.expiration",defaultMessage:"ui.composer.content.poll.expiration"}),value:"string"==typeof u.expiration_at?(0,_e.Z)(u.expiration_at):u.expiration_at,onChange:y,slotProps:{textField:{variant:"outlined"}},minDate:O}))))};var Re=n(20377),$e=n(94631),Be=n(67416),Le=n(47120);const Fe={root:`${Y}-typeswitch-root`},Ue=(0,N.ZP)(Be.Z,{name:Y,slot:"TypeSwitchButtonGroupRoot"})((()=>({})));const Ve=function(e){const{preferences:t}=(0,u.ko)(),n=(0,d.LD)(),r=(0,o.useMemo)((()=>t[p.ej].value||m.B2(n.user)),[t,n.user]),l=(0,o.useMemo)((()=>t[p.Ln].value),[t]),i=(0,o.useMemo)((()=>t[p.Ow].value),[t]),{className:s,onChange:c,value:f}=e,h=(0,a._T)(e,["className","onChange","value"]);(0,o.useEffect)((()=>{null===f&&c&&c(l?T:k)}),[f]);const b=(0,o.useCallback)(((e,t)=>{c&&c(t)}),[c]);return o.createElement(Ue,Object.assign({className:W()(Fe.root,s),onChange:b,exclusive:!0,value:f},h),l&&o.createElement(Le.Z,{value:T},o.createElement(g.Z,{id:"ui.composer.typeSwitch.post",defaultMessage:"ui.composer.typeSwitch.post"})),i&&o.createElement(Le.Z,{value:k},o.createElement(g.Z,{id:"ui.composer.typeSwitch.discussion",defaultMessage:"ui.composer.typeSwitch.discussion"})),r&&o.createElement(Le.Z,{value:A},o.createElement(g.Z,{id:"ui.composer.typeSwitch.poll",defaultMessage:"ui.composer.typeSwitch.poll"})))};var ze=n(12880);const Ge={root:`${Y}-content-post-root`,generalError:`${Y}-general-error`,medias:`${Y}-content-post-medias`,editor:`${Y}-content-post-editor`},He=(0,N.ZP)(w.Z,{name:Y,slot:"ContentPostRoot"})((({theme:e})=>({}))),We={categories:[],medias:[],html:"",addressing:[],group:null},Ye=e=>{const{className:t=null,value:n=Object.assign({},We),error:a={},disabled:r=!1,onChange:l,EditorProps:i={}}=e,{error:s=null}=Object.assign({},a),c=(0,o.useRef)();(0,o.useEffect)((()=>{c&&c.current&&c.current.focus()}),[c]);const u=(0,o.useCallback)((e=>{l(Object.assign(Object.assign({},n),{html:e}))}),[n]);return o.createElement(He,{className:W()(Ge.root,t)},s&&o.createElement(L.Z,{className:Ge.generalError},o.createElement(g.Z,{id:`ui.composer.error.${s}`,defaultMessage:`ui.composer.error.${s}`})),o.createElement(ze.Z,Object.assign({ref:c},i,{editable:!r,className:Ge.editor,onChange:u,defaultValue:n.html})))};var Xe=n(94158);const qe={root:`${Y}-layer-category-root`,title:`${Y}-layer-title`,content:`${Y}-layer-content`},Ke=(0,N.ZP)(w.Z,{name:Y,slot:"LayerCategoryRoot"})((()=>({}))),Je=o.forwardRef(((e,t)=>{const{className:n,onClose:r,onSave:l,defaultValue:i=[]}=e,s=(0,a._T)(e,["className","onClose","onSave","defaultValue"]),[c,u]=(0,o.useState)(i),d=(0,o.useCallback)((()=>l(c)),[c,l]),m=(0,o.useCallback)((e=>u(e)),[]);return o.createElement(Ke,Object.assign({ref:t,className:W()(n,qe.root)},s),o.createElement(C.Z,{className:qe.title},o.createElement(Z.Z,{onClick:r},o.createElement(f.Z,null,"arrow_back")),o.createElement(L.Z,null,o.createElement(g.Z,{id:"ui.composer.layer.category.title",defaultMessage:"ui.composer.layer.category.title"})),o.createElement(F.Z,{size:"small",color:"secondary",variant:"contained",onClick:d},o.createElement(g.Z,{id:"ui.composer.layer.save",defaultMessage:"ui.composer.layer.save"}))),o.createElement(j.Z,{className:qe.content},o.createElement(Xe.Z,{multiple:!0,onChange:m,defaultValue:i})))}));var Qe=n(88304);const et={root:`${Y}-layer-location-root`,title:`${Y}-layer-title`,content:`${Y}-layer-content`},tt=(0,N.ZP)(w.Z,{name:Y,slot:"LayerLocationRoot"})((()=>({}))),nt=o.forwardRef(((e,t)=>{const{className:n,onClose:r,onSave:l,defaultValue:i=null}=e,s=(0,a._T)(e,["className","onClose","onSave","defaultValue"]),[c,u]=(0,o.useState)(i),d=(0,o.useCallback)((()=>l(c)),[c,l]),m=(0,o.useCallback)((e=>u(e)),[]);return o.createElement(tt,Object.assign({ref:t,className:W()(n,et.root)},s),o.createElement(C.Z,{className:et.title},o.createElement(Z.Z,{onClick:r},o.createElement(f.Z,null,"arrow_back")),o.createElement(L.Z,null,o.createElement(g.Z,{id:"ui.composer.layer.location.title",defaultMessage:"ui.composer.layer.location.title"})),o.createElement(F.Z,{size:"small",color:"secondary",variant:"contained",onClick:d},o.createElement(g.Z,{id:"ui.composer.layer.save",defaultMessage:"ui.composer.layer.save"}))),o.createElement(j.Z,{className:et.content},o.createElement(Qe.Z,{onChange:m,defaultValue:c||""})))})),at={root:`${Y}-content-discussion-root`,generalError:`${Y}-general-error`,title:`${Y}-content-discussion-title`,medias:`${Y}-content-discussion-medias`,editor:`${Y}-content-discussion-editor`},ot=(0,N.ZP)(w.Z,{name:Y,slot:"ContentDiscussionRoot"})((({theme:e})=>({}))),rt={title:"",categories:[],group:null,medias:[],html:"",addressing:[]},lt=e=>{const{className:t=null,value:n=Object.assign({},rt),error:a={},disabled:r=!1,onChange:l,EditorProps:i={}}=e,{titleError:s=null,error:c=null}=Object.assign({},a),u=(0,ye.Z)(),d=(0,o.useCallback)((e=>{l(Object.assign(Object.assign({},n),{title:e.target.value}))}),[n]),m=(0,o.useCallback)((e=>{l(Object.assign(Object.assign({},n),{html:e}))}),[n]);return o.createElement(ot,{className:W()(at.root,t)},c&&o.createElement(L.Z,{className:at.generalError},o.createElement(g.Z,{id:`ui.composer.error.${c}`,defaultMessage:`ui.composer.error.${c}`})),o.createElement(I.Z,{className:at.title,placeholder:u.formatMessage({id:"ui.composer.content.discussion.title.label",defaultMessage:"ui.composer.content.discussion.title.label"}),autoFocus:!0,fullWidth:!0,variant:"outlined",value:n.title,multiline:!0,onChange:d,InputProps:{endAdornment:o.createElement(L.Z,{variant:"body2"},P-n.title.length)},error:Boolean(s),helperText:s,disabled:r}),o.createElement(ze.Z,Object.assign({},i,{editable:!r,className:at.editor,onChange:m,defaultValue:n.html})))};var it=n(22461),st=n(70815),ct=n(26474),ut=n(87918);const dt={root:`${Y}-attributes-root`},mt=(0,N.ZP)(w.Z,{name:Y,slot:"AttributesRoot"})((()=>({}))),pt=e=>{var t,n,a;const{className:r=null,value:l=null,onChange:i=null,onClick:s=null}=e,c=(0,o.useCallback)((e=>()=>{i&&i(Object.assign(Object.assign({},l),{categories:l.categories.filter((t=>t.id!==e))}))}),[l,i]),u=(0,o.useCallback)((()=>{s&&s("categories")}),[s]),d=(0,o.useCallback)((()=>{i&&i(Object.assign(Object.assign({},l),{group:null}))}),[l,i]),m=(0,o.useCallback)((()=>{s&&s("group")}),[s]),p=(0,o.useCallback)((e=>()=>{i&&i(Object.assign(Object.assign({},l),{addressing:l.addressing.filter((t=>t.id!==e))}))}),[l,i]),g=(0,o.useCallback)((()=>{s&&s("addressing")}),[s]),h=(0,o.useCallback)((()=>{i&&i(Object.assign(Object.assign({},l),{location:null}))}),[l,i]),b=(0,o.useCallback)((()=>{s&&s("location")}),[s]);return o.createElement(mt,{className:W()(dt.root,r)},(null===(t=null==l?void 0:l.categories)||void 0===t?void 0:t.length)>0&&(null==l?void 0:l.categories.map((e=>o.createElement(ut.Z,{key:e.id,label:e.name,onDelete:c(e.id),icon:o.createElement(f.Z,null,"category"),onClick:u})))),(null==l?void 0:l.group)&&o.createElement(ut.Z,{key:null==l?void 0:l.group.id,label:null==l?void 0:l.group.name,onDelete:d,icon:o.createElement(f.Z,null,"groups"),onClick:m,disabled:!(null===(n=null==l?void 0:l.group)||void 0===n?void 0:n.subscription_status)}),(null===(a=null==l?void 0:l.addressing)||void 0===a?void 0:a.length)>0&&(null==l?void 0:l.addressing.map((e=>o.createElement(G.Z,{key:e.id,tag:e,onDelete:p(e.id),icon:o.createElement(f.Z,null,"label"),onClick:g})))),(null==l?void 0:l.location)&&o.createElement(ut.Z,{icon:o.createElement(f.Z,null,"add_location_alt"),label:null==l?void 0:l.location.location,onDelete:h,onClick:b}))};var gt=n(88078);const ft={root:`${Y}-skeleton-root`,title:`${Y}-title`,avatar:`${Y}-avatar`,content:`${Y}-content`,actions:`${Y}-actions`},ht=(0,N.ZP)(w.Z,{name:Y,slot:"SkeletonRoot"})((()=>({})));function bt(){return o.createElement(ht,{className:ft.root},o.createElement(gt.Z,{sx:{height:190},animation:"wave",variant:"rectangular"}))}var vt=n(78462),Et=n(97212),yt=n(98619),Ot=n(59334);const Ct={root:`${Y}-layer-close-root`,title:`${Y}-layer-title`,content:`${Y}-layer-content`},Zt=(0,N.ZP)(w.Z,{name:Y,slot:"LayerCloseRoot"})((()=>({}))),jt=o.forwardRef(((e,t)=>{const{className:n,onClose:r,onSave:l,defaultValue:i=[]}=e,s=(0,a._T)(e,["className","onClose","onSave","defaultValue"]);return o.createElement(Zt,Object.assign({ref:t,className:W()(n,Ct.root)},s),o.createElement(C.Z,{className:Ct.title},o.createElement(Z.Z,{onClick:r},o.createElement(f.Z,null,"arrow_back")),o.createElement(L.Z,null,o.createElement(g.Z,{id:"ui.composer.layer.close.title",defaultMessage:"ui.composer.layer.close.title"}))),o.createElement(j.Z,{className:Ct.content},o.createElement(L.Z,null,o.createElement(g.Z,{id:"ui.composer.layer.close.text",defaultMessage:"ui.composer.layer.close.text"})),o.createElement(vt.Z,null,o.createElement(Et.ZP,null,o.createElement(yt.Z,{onClick:r},o.createElement(Ot.Z,{primary:o.createElement(g.Z,{id:"ui.composer.layer.close.no",defaultMessage:"ui.composer.layer.close.no"})}))),o.createElement(Et.ZP,null,o.createElement(yt.Z,{onClick:l},o.createElement(Ot.Z,{primary:o.createElement(g.Z,{id:"ui.composer.layer.close.yes",defaultMessage:"ui.composer.layer.close.yes"})}))))))})),wt=(0,o.forwardRef)((function(e,t){return o.createElement(h.Z,Object.assign({ref:t},e))})),St={root:`${Y}-root`,ios:`${Y}-ios`,title:`${Y}-title`,types:`${Y}-types`,content:`${Y}-content`,attributes:`${Y}-attributes`,medias:`${Y}-medias`,actions:`${Y}-actions`,layerTransitionRoot:`${Y}-layer-transition-root`},Nt=(0,N.ZP)(b.Z,{name:Y,slot:"Root"})((()=>({}))),_t=(0,N.ZP)(v.Z,{name:Y,slot:"LayerTransitionRoot"})((({theme:e})=>({}))),kt={id:null,type:null,title:"",titleError:null,html:"",htmlError:null,categories:[],group:null,categoriesError:null,groupsError:null,addressing:null,addressingError:null,medias:[],poll:null,location:null,error:null},Tt=(e,t)=>{switch(t.type){case"reset":return Object.assign(Object.assign({},kt),{key:(0,me.MX)()});case"multiple":return Object.assign(Object.assign({},e),t.value);default:return Object.assign(Object.assign({},e),{[t.type]:t.value})}};const At=function(e){const t=(0,ae.Z)({props:e,name:Y}),{feedObjectId:n=null,feedObjectType:h=null,feedObject:b=null,defaultValue:v={},mediaObjectTypes:N=[it.Z,st.Z,ct.Z],EditorProps:k={},onClose:T=null,onSuccess:I=null,maxWidth:D}=t,R=(0,a._T)(t,["feedObjectId","feedObjectType","feedObject","defaultValue","mediaObjectTypes","EditorProps","onClose","onSuccess","maxWidth"]),{preferences:$,features:B}=(0,u.ko)(),L=(0,d.LD)(),{enqueueSnackbar:F}=(0,Re.Ds)(),U=(0,_.Z)(),V=(0,E.Z)(U.breakpoints.down("md"),{noSsr:"undefined"!=typeof window}),[z,G]=(0,o.useState)(!1),[H,X]=(0,o.useState)(),[q,K]=(0,o.useReducer)(Tt,Object.assign(Object.assign(Object.assign({},kt),v),{key:(0,me.MX)()})),{key:J,id:Q,type:ee,title:te,titleError:ne,html:oe,categories:re,group:le,addressing:ie,audience:se,medias:ce,poll:ue,pollError:ge,location:fe,error:he}=q,be=e=>{e.type===r.q.POST||(e.type,r.q.DISCUSSION),b.author.id===L.user.id?(K({type:"multiple",value:{id:e.id,type:e.poll?A:b.type,title:e.title,html:e.html,categories:e.categories,group:e.group,addressing:e.addressing,medias:e.medias,poll:e.poll,location:e.location}}),ye(!1)):Ce(!0)},ve=(0,o.useMemo)((()=>Boolean(n&&h||b)),[n,h,b]),[Ee,ye]=(0,o.useState)(ve),[Oe,Ce]=(0,o.useState)(!1),Ze=(0,o.useRef)(),je=(0,o.useRef)(!1),we=(0,o.useRef)(null),Se=(0,o.useRef)({medias:ce});Se.current={medias:ce};const Ne=(0,o.useMemo)((()=>ue&&ue.title.length>0&&ue.title.length<P&&ue.choices.length>=2),[ue]),_e=(0,o.useMemo)((()=>!Ee&&(ee===r.q.DISCUSSION&&te.length>0&&te.length<P||ee===r.q.POST&&((0,me.Vt)(oe).length>0||ce.length>0||Ne)||ee===A&&Ne)),[Ee,ee,te,oe,ce,Ne]),ke=(0,o.useMemo)((()=>(0,pe.g)()),[]);(0,o.useEffect)((()=>{ve&&(null===b?(ye(!0),i.Z.request({url:s.Z.FeedObject.url({type:h,id:n}),method:s.Z.FeedObject.method}).then((e=>{be(e.data)})).catch((()=>{Ce(!0)})).then((()=>ye(!1)))):be(b))}),[ve]),(0,o.useEffect)((()=>{if(!je.current&&_e){je.current=!0;const e=e=>(e.preventDefault(),"");window.onbeforeunload=e}else je.current&&!_e&&(je.current=!1,window.onbeforeunload=null)}),[q,_e]),(0,o.useEffect)((()=>{if(!Ze.current||!ke)return;const e=e=>{we.current=e.touches[0].clientY},t=e=>{const t=e.touches[0].clientY,n=t-we.current;we.current=t,n>0&&Ze.current.focus()};return Ze.current.addEventListener("touchstart",e),Ze.current.addEventListener("touchmove",t),()=>{var n,a;null===(n=Ze.current)||void 0===n||n.removeEventListener("touchstart",e),null===(a=Ze.current)||void 0===a||a.removeEventListener("touchmove",t)}}),[Ze.current,ke]);const Te=(0,o.useCallback)((e=>X(e)),[]),Ae=(0,o.useCallback)((()=>X(null)),[]),Pe=(0,o.useCallback)((e=>{K({type:"type",value:e})}),[]),xe=(0,o.useCallback)((e=>{K({type:"multiple",value:Object.assign(Object.assign({},e),{pollError:e.poll.title.length>P?{titleError:o.createElement(g.Z,{id:"ui.composer.title.error.maxlength",defaultMessage:"ui.composer.title.error.maxlength"})}:null})})}),[]),Me=(0,o.useCallback)((e=>{K({type:"multiple",value:Object.assign(Object.assign({},e),{titleError:e.title.length>P?o.createElement(g.Z,{id:"ui.composer.title.error.maxlength",defaultMessage:"ui.composer.title.error.maxlength"}):null})})}),[]),Ie=(0,o.useCallback)((e=>{K({type:"multiple",value:Object.assign({},e)})}),[]),Be=(0,o.useCallback)((e=>{K({type:"categories",value:e}),X(null)}),[]),Le=(0,o.useCallback)((()=>Te({name:"category",Component:Je,ComponentProps:{onClose:Ae,onSave:Be,defaultValue:re}})),[Te,Ae,Be,re]),Fe=(0,o.useCallback)((e=>{le||e&&Object.prototype.hasOwnProperty.call(e,"managed_by")?K({type:"group",value:e}):K({type:"addressing",value:e}),X(null)}),[le]),Ue=(0,o.useCallback)((()=>Te({name:"audience",Component:de,ComponentProps:{onClose:Ae,onSave:Fe,defaultValue:le||ie&&Object.prototype.hasOwnProperty.call(ie,"managed_by")?le:ie}})),[Te,Ae,Fe,ie,le]),ze=(0,o.useCallback)((e=>{K({type:"location",value:e}),X(null)}),[]),Ge=(0,o.useCallback)((()=>Te({name:"location",Component:nt,ComponentProps:{onClose:Ae,onSave:ze,defaultValue:fe}})),[Te,Ae,ze,fe]),He=(0,o.useCallback)((e=>{const t=[...e];K({type:"medias",value:[...e]}),Se.current.medias=t,X(null)}),[]),We=(0,o.useCallback)((e=>{const t=[...Se.current.medias,e];K({type:"medias",value:t}),Se.current.medias=t}),[]),Xe=(0,o.useCallback)((e=>t=>{e.layerComponent&&Te({name:e.name,Component:e.layerComponent,ComponentProps:{onClose:Ae,onSave:He,defaultValue:ce}})}),[Te,Ae,He,ce]),qe=(0,o.useCallback)((e=>{K({type:"multiple",value:Object.assign({},e)})}),[]),Ke=(0,o.useCallback)((e=>{switch(e){case"categories":Le();break;case"addressing":Ue();break;case"location":Ge()}}),[Le,Ue,Ge]),Qe=(0,o.useCallback)((e=>{if(e.preventDefault(),e.stopPropagation(),m.IT(L.user))return void F(o.createElement(g.Z,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3});const t=[...re.map((e=>e.id)),...(0,$e.E)(oe)],n={title:te,text:oe,medias:ce.map((e=>e.id)),categories:t.filter(((e,n)=>t.indexOf(e)===n))};($[p.ej].value||m.B2(L.user))&&Ne&&(n.poll=ue),$[p.ey].value&&fe&&(n.location=fe),B.includes(l.$.TAGGING)&&null!==ie&&(n.addressing=ie.map((e=>e.id))),B.includes(l.$.GROUPING)&&null!==le&&(n.group=le.id),G(!0);const a=ee===A?r.q.POST:ee;let u=s.Z.Composer.url({type:a}),d=s.Z.Composer.method;ve&&(u=s.Z.ComposerEdit.url({type:h||a,id:Q}),d=s.Z.ComposerEdit.method),i.Z.request({url:u,method:d,data:n}).then((e=>{I(e.data),je.current&&(window.onbeforeunload=null),K({type:"reset"})})).catch((e=>{K({type:"multiple",value:(0,c.yt)(e)})})).then((()=>G(!1)))}),[L.user,h,Q,ee,te,oe,re,le,ie,se,ce,ue,fe,Ne]),et=(0,o.useCallback)(((e,t)=>{je.current&&(window.onbeforeunload=null),t&&_e?Te({name:"close",Component:jt,ComponentProps:{onClose:Ae,onSave:()=>{T&&T(e),X(null),K({type:"reset"})}}}):(T&&T(e),X(null),K({type:"reset"}))}),[T,_e,Ae]),tt=(0,o.useCallback)((e=>{_e?Te({name:"close",Component:jt,ComponentProps:{onClose:Ae,onSave:et}}):et(e)}),[_e,Te,Ae,et]),at=(0,o.useMemo)((()=>-1!==ce.findIndex((e=>e.type===x.TC))),[ce]),ot=(0,o.useMemo)((()=>{if(ve&&Ee)return o.createElement(bt,null);if(ve&&Oe)return o.createElement(y.Z,{severity:"error",onClose:et},o.createElement(O.Z,null,o.createElement(g.Z,{id:"ui.composer.edit.error.title",defaultMessage:"ui.composer.edit.error.title"})),o.createElement(g.Z,{id:"ui.composer.edit.error.content",defaultMessage:"ui.composer.edit.error.content"}));switch(ee){case A:return o.createElement(De,{key:J,onChange:xe,value:{html:oe,group:le,addressing:ie,medias:ce,poll:ue,location:fe},error:ge,disabled:z});case r.q.DISCUSSION:return o.createElement(lt,{key:J,value:{title:te,html:oe,categories:re,group:le,addressing:ie,medias:ce,poll:ue,location:fe},error:{titleError:ne,error:he},onChange:Me,disabled:z,EditorProps:Object.assign({toolbar:!0,uploadImage:!0},k)});default:return o.createElement(Ye,{key:J,value:{html:oe,categories:re,group:le,addressing:ie,medias:ce,poll:ue,location:fe},error:{error:he},onChange:Ie,disabled:z,EditorProps:Object.assign({toolbar:!1,uploadImage:!1},k)})}}),[J,ee,te,oe,re,le,ie,ce,ue,ge,fe,he,xe,Ie,z]);return L.user||L.loading&&open?o.createElement(Nt,Object.assign({ref:Ze,TransitionComponent:wt,keepMounted:!0,onClose:et},R,{className:W()(St.root,{[St.ios]:ke}),scroll:"body",fullScreen:V,tabIndex:-1}),o.createElement("form",{onSubmit:Qe,method:"post"},o.createElement(C.Z,{className:St.title},o.createElement(Z.Z,{onClick:tt},o.createElement(f.Z,null,"close")),o.createElement(M.Z,{size:"small",type:"submit",color:"secondary",variant:"contained",disabled:!_e,loading:z},o.createElement(g.Z,{id:"ui.composer.submit",defaultMessage:"ui.composer.submit"}))),o.createElement(j.Z,{className:St.content},o.createElement(pt,{value:{categories:re,group:le,addressing:ie,location:fe},className:St.attributes,onChange:qe,onClick:Ke}),ot,ce&&ce.length>0&&o.createElement(w.Z,{className:St.medias},N.map((e=>e.previewComponent?o.createElement(e.previewComponent,{key:e.name,value:ce,onChange:He}):e.displayComponent?o.createElement(e.displayComponent,{key:e.name,medias:ce}):void 0)))),!_e&&!ve&&o.createElement(Ve,{className:St.types,onChange:Pe,size:"small",value:ee}),o.createElement(S.Z,{className:St.actions},N.filter((e=>null!==e.triggerButton)).map((e=>{const t=e.layerComponent?{onClick:Xe(e)}:{onAdd:We};return o.createElement(e.triggerButton,Object.assign({key:e.name,disabled:z||at,color:ce.filter(e.filter).length>0?"primary":"default"},t))})),o.createElement(Z.Z,{disabled:z,onClick:Le},o.createElement(f.Z,null,"category")),o.createElement(Z.Z,{disabled:z||!B.includes(l.$.TAGGING)||Boolean(null==b?void 0:b.group),onClick:Ue},!le&&null===ie||0===(null==ie?void 0:ie.length)?o.createElement(f.Z,null,"public"):le?o.createElement(f.Z,null,"groups"):o.createElement(f.Z,null,"label")),$[p.ey].value&&o.createElement(Z.Z,{disabled:z,onClick:Ge,color:null!==fe?"primary":"default"},o.createElement(f.Z,null,"add_location_alt")))),H&&o.createElement(_t,{className:St.layerTransitionRoot,in:!0,container:Ze.current,direction:"left"},o.createElement(H.Component,Object.assign({},H.ComponentProps)))):null}},12805:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var a=n(97582),o=n(67294),r=n(63902),l=n(90948),i=n(88078),s=n(37024),c=n(2734),u=n(78445),d=n(44267),m=n(94184),p=n.n(m),g=n(37540);const f={root:`${g.B}-skeleton-root`,media:`${g.B}-media`},h=(0,l.ZP)(r.Z,{name:g.B,slot:"SkeletonRoot"})((()=>({})));function b(e){const{template:t=s.r.SNIPPET}=e,n=(0,a._T)(e,["template"]),r=(0,c.Z)();let l;return l=t===s.r.PREVIEW||t===s.r.DETAIL||t===s.r.SEARCH?o.createElement(o.Fragment,null,o.createElement(u.Z,{avatar:o.createElement(i.Z,{animation:"wave",variant:"circular",width:r.selfcommunity.user.avatar.sizeMedium,height:r.selfcommunity.user.avatar.sizeMedium}),title:o.createElement(i.Z,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),subheader:o.createElement(i.Z,{animation:"wave",height:10,width:"40%"})}),o.createElement(i.Z,{animation:"wave",variant:"rectangular",className:f.media}),o.createElement(d.Z,null,o.createElement(o.Fragment,null,o.createElement(i.Z,{animation:"wave",height:10,style:{marginBottom:6}}),o.createElement(i.Z,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),o.createElement(i.Z,{animation:"wave",height:10,width:"60%"})))):o.createElement(o.Fragment,null,o.createElement(u.Z,{avatar:o.createElement(i.Z,{animation:"wave",variant:"circular",width:r.selfcommunity.user.avatar.sizeMedium,height:r.selfcommunity.user.avatar.sizeMedium}),title:o.createElement(i.Z,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),subheader:o.createElement(i.Z,{animation:"wave",height:10,width:"40%"})}),o.createElement(d.Z,null,o.createElement(o.Fragment,null,o.createElement(i.Z,{animation:"wave",height:10,style:{marginBottom:6}}),o.createElement(i.Z,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),o.createElement(i.Z,{animation:"wave",height:10,width:"60%",style:{marginBottom:6}})))),o.createElement(h,Object.assign({className:p()(f.root,`${g.B}-${t}`)},n),l)}},37540:(e,t,n)=>{"use strict";n.d(t,{B:()=>a});const a="SCFeedObject"},38509:(e,t,n)=>{"use strict";n.d(t,{Z:()=>an});var a=n(97582),o=n(67294),r=n(90948),l=n(44267),i=n(15861),s=n(25662),c=n(5616),u=n(87918),d=n(78445),m=n(87952),p=n(34386),g=n(68269),f=n(62023),h=n(57922),b=n(12805),v=n(91568),E=n(51575),y=n(86558),O=n(86886),C=n(67720),Z=n(94184),j=n.n(Z),w=n(85050),S=n(85966),N=n(37540);const _={root:`${N.B}-action-vote-root`,divider:`${N.B}-action-vote-divider`,button:`${N.B}-action-vote-button`,inline:`${N.B}-action-vote-inline`,viewAudienceButton:`${N.B}-action-vote-view-audience-button`},k=(0,r.ZP)(c.Z,{name:N.B,slot:"ActionVoteRoot"})((()=>({})));const T=function(e){const{className:t=null,feedObjectId:n=null,feedObject:r=null,feedObjectType:l=null,withAudience:i=!0,withAction:s=!0,inlineAction:c=!1,onVoteAction:u=(()=>null)}=e,d=(0,a._T)(e,["className","feedObjectId","feedObject","feedObjectType","withAudience","withAction","inlineAction","onVoteAction"]);return o.createElement(k,Object.assign({className:j()(_.root,t,{[_.inline]:c})},d),i&&o.createElement(S.Z,{className:_.viewAudienceButton,contributionId:n,contributionType:l,contribution:r,variant:"text",size:"small"}),s&&o.createElement(o.Fragment,null,!c&&i&&o.createElement(C.Z,{className:_.divider}),o.createElement(w.Z,{className:_.button,contributionId:n,contributionType:l,contribution:r,onVote:u})))};var A=n(54490),P=n(86896),x=n(67564),M=n(31498),I=n(41538),D=n(97265),R=n(49794),$=n(37024),B=n(70050),L=n(88078);const F=(0,A.vU)({comments:{id:"ui.feedObject.comment.comments",defaultMessage:"ui.feedObject.comment.comments"},comment:{id:"ui.feedObject.comment.comment",defaultMessage:"ui.feedObject.comment.comment"}}),U={root:`${N.B}-action-comment-root`,divider:`${N.B}-action-comment-divider`,inline:`${N.B}-action-comment-inline`,button:`${N.B}-action-comment-button`,viewAudienceButton:`${N.B}-action-comment-view-audience-button`},V=(0,r.ZP)(c.Z,{name:N.B,slot:"ActionCommentRoot"})((()=>({})));const z=function(e){const{className:t,feedObjectId:n,feedObject:r,feedObjectType:l=R.q.POST,feedObjectTemplate:c=$.r,withAction:u=!0,withAudience:d=!0,inlineAction:m=!1,onViewCommentsAction:g,onCommentAction:f}=e,h=(0,a._T)(e,["className","feedObjectId","feedObject","feedObjectType","feedObjectTemplate","withAction","withAudience","inlineAction","onViewCommentsAction","onCommentAction"]),{obj:b,setObj:v}=(0,M.Z)({id:n,feedObject:r,feedObjectType:l}),E=(0,I.sy)(),y=(0,P.Z)();return o.createElement(V,Object.assign({className:j()(U.root,t,{[U.inline]:m})},h),function(){let e;return d&&(e=b?o.createElement(o.Fragment,null,g?o.createElement(s.Z,{variant:"text",size:"small",onClick:g,color:"inherit"},`${y.formatMessage(F.comments,{total:b.comment_count})}`):o.createElement(o.Fragment,null,c===$.r.DETAIL?o.createElement(i.Z,{variant:"body2"},`${y.formatMessage(F.comments,{total:b.comment_count})}`):o.createElement(s.Z,{variant:"text",size:"small",component:D.Z,to:E.url((0,B.Ig)(b),(0,B.p3)(b)),classes:{root:U.viewAudienceButton}},`${y.formatMessage(F.comments,{total:b.comment_count})}`))):o.createElement(s.Z,{variant:"text",size:"small",disabled:!0,color:"inherit"},o.createElement(L.Z,{animation:"wave",height:18,width:50}))),e}(),function(){let e={};return f||(e={component:D.Z,to:E.url((0,B.Ig)(b),(0,B.p3)(b))}),o.createElement(o.Fragment,null,u&&o.createElement(o.Fragment,null,!m&&d&&o.createElement(C.Z,{className:U.divider}),o.createElement(p.Z,{title:`${y.formatMessage(F.comment)}`},o.createElement(s.Z,Object.assign({onClick:f,className:U.button},e),o.createElement(x.Z,null,"chat_bubble_outline")))))}())};var G=n(44012),H=n(31812),W=n(78462),Y=n(97212),X=n(79558),q=n(24085),K=n(24243),J=n(99960),Q=n(75459),ee=n(39154),te=n(52271),ne=n(37089);const ae=function(e){const{id:t=null,feedObject:n=null,feedObjectType:r=(n?n.type:R.q.POST),open:l=!1,onClose:s=null}=e,c=(0,a._T)(e,["id","feedObject","feedObjectType","open","onClose"]),{obj:u,setObj:d}=(0,M.Z)({id:t,feedObject:n,feedObjectType:r}),[m,p]=(0,o.useState)(Boolean(t&&r||n)),[g,f]=(0,o.useState)([]),[h,b]=(0,o.useState)(t&&r?`${q.Z.ShareUsersList.url({type:r,id:t})}`:n&&r?`${q.Z.ShareUsersList.url({type:r,id:n.id})}`:null);function v(){p(!0),K.Z.request({url:h,method:q.Z.ShareUsersList.method}).then((e=>{const t=e.data;f([...g,...t.results]),p(!1),b(null!==t.next?t.next:null)})).catch((e=>{J.Y.error(Q.J,e)}))}return(0,o.useEffect)((()=>{u&&h&&v()}),[`${u}`]),o.createElement(ee.Z,Object.assign({title:o.createElement(G.Z,{defaultMessage:"ui.feedObject.sharesDialog.title",id:"ui.feedObject.sharesDialog.title"}),onClose:s,open:l},c),m?o.createElement(te.Z,{size:50}):o.createElement(X.Z,{dataLength:g.length,next:v,hasMoreNext:null!==h,loaderNext:o.createElement(te.Z,{size:30}),height:400,endMessage:o.createElement(i.Z,{variant:"body2",align:"center",fontWeight:"bold"},o.createElement(G.Z,{id:"ui.feedObject.sharesDialog.noOtherLikes",defaultMessage:"ui.feedObject.sharesDialog.noOtherLikes"}))},o.createElement(W.Z,null,g.slice(0,4).map(((e,t)=>o.createElement(Y.ZP,{key:e.id},o.createElement(ne.Z,{elevation:0,user:e,key:t})))))))};var oe=n(2734),re=n(61730),le=n(59334),ie=n(25464),se=n(39005),ce=n(18972),ue=n(48885),de=n(57250),me=n(20377),pe=n(26462),ge=n(77488),fe=n(53704),he=n(66380),be=n(85472),ve=n(68787),Ee=n(65580),ye=n(37991),Oe=n(91290);const Ce=(0,A.vU)({shares:{id:"ui.feedObject.share.shares",defaultMessage:"ui.feedObject.share.shares"},share:{id:"ui.feedObject.share.share",defaultMessage:"ui.feedObject.share.share"}}),Ze={root:`${N.B}-action-share-root`,divider:`${N.B}-action-share-divider`,inline:`${N.B}-action-share-inline`,button:`${N.B}-action-share-button`,viewAudienceButton:`${N.B}-action-share-view-audience-button`},je=(0,r.ZP)(c.Z,{name:N.B,slot:"ActionShareRoot"})((()=>({})));const we=function(e){const{className:t=null,feedObjectId:n=null,feedObject:r=null,feedObjectType:l=R.q.POST,withAction:i=!0,withAudience:u=!0,inlineAction:d=!1}=e,m=(0,a._T)(e,["className","feedObjectId","feedObject","feedObjectType","withAction","withAudience","inlineAction"]),g=(0,oe.Z)(),f=(0,re.Z)(g.breakpoints.down("md")),{obj:h,setObj:b}=(0,M.Z)({id:n,feedObject:r,feedObjectType:l}),[v,E]=(0,o.useState)(!1),[y,O]=(0,o.useState)(!1),[Z,w]=(0,o.useState)(null),[S,N]=(0,o.useState)(!1),[_,k]=o.useState(null),T=(0,fe.RM)(),A=(0,I.sy)(),D=(0,o.useContext)(he.Tt),$=be.MX in D.preferences&&D.preferences[be.MX].value,F=be.Yy in D.preferences&&D.preferences[be.Yy].value,U=be.KD in D.preferences&&D.preferences[be.KD].value,V=(0,ve.LD)(),{enqueueSnackbar:z}=(0,me.Ds)(),W=("undefined"!=typeof location&&location.origin?location.origin:"")+A.url((0,B.Ig)(h),(0,B.p3)(h)),Y=(0,o.useMemo)((()=>r.group&&r.group.privacy===pe.f.PUBLIC),[r.group]),X=(0,P.Z)(),ee=e=>{k(e.currentTarget)},te=()=>{k(null)};function ne(){N(!S)}function we(){E(!1),O(!1)}function Se(){b(Object.assign({},h,{share_count:h.share_count+1})),we()}const Ne=(0,o.useMemo)((()=>()=>{let e=h.id;const t=h.medias.filter((e=>e.type===de.TC));return t.length&&(e=t[0].embed.metadata.id),K.Z.request({url:q.Z.ComposerMediaCreate.url(),method:q.Z.ComposerMediaCreate.method,data:{type:de.TC,shared_object:e}}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))}),[h]);function _e(){return o.createElement(c.Z,null,(!r.group||Y)&&o.createElement(o.Fragment,null,o.createElement(ce.Z,{onClick:()=>{return e=!1,void(V.user?Ee.IT(V.user)?z(o.createElement(G.Z,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3}):(E(!0),Ne().then((t=>{w(Object.assign({medias:[t]},e?{categories:h.categories}:{})),O(!0)})).catch((e=>{J.Y.error(Q.J,e),E(!1)}))):T.settings.handleAnonymousAction());var e}},o.createElement(ue.Z,null,o.createElement(x.Z,{fontSize:"small"},"redo")),o.createElement(le.Z,{primary:o.createElement(G.Z,{id:"ui.feedObject.share.shareNow",defaultMessage:"ui.feedObject.share.shareNow"})})),$&&o.createElement(ce.Z,{onClick:()=>window.open(ye.jm+W,"facebook-share-dialog","width=626,height=436")},o.createElement(ue.Z,null,o.createElement(x.Z,{fontSize:"small"},"facebook")),o.createElement(le.Z,{primary:o.createElement(G.Z,{id:"ui.feedObject.share.facebook",defaultMessage:"ui.feedObject.share.facebook"})})),F&&o.createElement(ce.Z,{onClick:()=>window.open(ye.np+W,"twitter-share-dialog","width=626,height=436")},o.createElement(ue.Z,null,o.createElement(x.Z,{fontSize:"small"},"twitter")),o.createElement(le.Z,{primary:o.createElement(G.Z,{id:"ui.feedObject.share.twitter",defaultMessage:"ui.feedObject.share.twitter"})})),U&&o.createElement(ce.Z,{onClick:()=>window.open(ye.nm+W,"linkedin-share-dialog","width=626,height=436")},o.createElement(ue.Z,null,o.createElement(x.Z,{fontSize:"small"},"linkedin")),o.createElement(le.Z,{primary:o.createElement(G.Z,{id:"ui.feedObject.share.linkedin",defaultMessage:"ui.feedObject.share.linkedin"})}))),o.createElement(ce.Z,null,o.createElement(ue.Z,null,o.createElement(x.Z,{fontSize:"small"},"link")),o.createElement(le.Z,{primary:o.createElement(G.Z,{id:"ui.feedObject.share.permanentLink",defaultMessage:"ui.feedObject.share.permanentLink"}),onClick:()=>{(0,ge.TE)(W).then((()=>{z(o.createElement(G.Z,{id:"ui.common.permanentLinkCopied",defaultMessage:"ui.common.permanentLinkCopied"}),{variant:"success",autoHideDuration:3e3})}))}})))}return o.createElement(je,Object.assign({className:j()(Ze.root,t,{[Ze.inline]:d})},m),function(){const e=h.share_count;let t;return u&&(t=h?o.createElement(o.Fragment,null,o.createElement(s.Z,{variant:"text",size:"small",onClick:ne,disabled:e<1,classes:{root:Ze.viewAudienceButton}},`${X.formatMessage(Ce.shares,{total:e})}`),S&&e>0&&o.createElement(ae,{feedObject:h,feedObjectType:h.type,open:S,onClose:ne})):o.createElement(s.Z,{variant:"text",size:"small",disabled:!0,color:"inherit"},o.createElement(L.Z,{animation:"wave",height:18,width:50}))),t}(),o.createElement(o.Fragment,null,i&&o.createElement(o.Fragment,null,!d&&u&&o.createElement(C.Z,{className:Ze.divider}),o.createElement(p.Z,{title:`${X.formatMessage(Ce.share)}`},o.createElement(H.Z,{loading:v,onClick:ee,className:Ze.button},o.createElement(x.Z,null,"share"))),o.createElement(o.Fragment,null,f?o.createElement(se.Z,{open:Boolean(_),onClick:te,onClose:te,onOpen:ee,anchor:"bottom",disableSwipeToOpen:!0},_e()):o.createElement(ie.Z,{anchorEl:_,open:Boolean(_),onClose:te,onClick:te,slotProps:{paper:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"}},_e())),y&&o.createElement(Oe.Z,{open:y,defaultValue:Z,onClose:we,onSuccess:Se,maxWidth:"sm",fullWidth:!0}))))},Se={root:`${N.B}-actions-root`,action:`${N.B}-actions-action`},Ne=(0,r.ZP)(O.ZP,{name:N.B,slot:"ActionsRoot"})((()=>({})));const _e=function(e){const{className:t,feedObject:n,feedObjectId:a=(null==n?void 0:n.id),feedObjectType:r=(null==n?void 0:n.type),feedObjectTemplate:l=$.r.PREVIEW,hideVoteAction:i=!1,hideShareAction:s=!1,hideCommentAction:c=!1,handleExpandActivities:u,VoteActionProps:d={},CommentActionProps:m={},ShareActionProps:p={}}=e,{obj:g}=(0,M.Z)({id:a,feedObject:n,feedObjectType:r});if(!g)return null;const f=function(){let e=4;return s&&c?e=12:(c||c)&&(e=6),e}();return o.createElement(Ne,{container:!0,className:j()(Se.root,t)},!i&&o.createElement(O.ZP,{item:!0,xs:f,className:Se.action},o.createElement(T,Object.assign({feedObjectId:a||g.id,feedObject:g,feedObjectType:r||g.type},d))),!c&&o.createElement(O.ZP,{item:!0,xs:f,className:Se.action},o.createElement(z,Object.assign({feedObject:g,feedObjectType:r,feedObjectTemplate:l,onCommentAction:u},m))),!s&&o.createElement(O.ZP,{item:!0,xs:f,className:Se.action},o.createElement(we,Object.assign({feedObject:g,feedObjectType:r,id:a},p))))};var ke=n(66242),Te=n(81458);const Ae={root:`${N.B}-poll-object-choices-root`,label:`${N.B}-poll-object-choices-label`,vote:`${N.B}-poll-object-choices-vote`,progress:`${N.B}-poll-object-choices-progress`},Pe=(0,r.ZP)(ke.Z,{name:N.B,slot:"PollObjectChoicesRoot"})((()=>({})));function xe(e){var{className:t}=e,n=(0,a._T)(e,["className"]);return o.createElement(c.Z,{className:t},o.createElement(Te.Z,Object.assign({variant:"determinate"},n)),o.createElement(i.Z,{variant:"body2",color:"text.secondary"},`${Math.round(n.value)}%`))}const Me=function(e){const{className:t=null,choiceObj:n=null,feedObject:r=null,vote:l=null,votes:s=null,isVoting:c=null,votable:u=null}=e,d=(0,a._T)(e,["className","choiceObj","feedObject","vote","votes","isVoting","votable"]),m=!r,p=(0,fe.RM)(),g=(0,ve.LD)();return o.createElement(Pe,Object.assign({className:j()(Ae.root,t)},d),o.createElement(i.Z,{className:Ae.label},n.choice),o.createElement(xe,{className:Ae.progress,value:(f=n.vote_count,h=s,0===h?0:100*f/h)}),o.createElement(H.Z,{loading:c===n.id,variant:n.voted?"contained":"outlined",size:"small",disabled:m||null!==c||u,className:Ae.vote,onClick:()=>{g.user?l(n):p.settings.handleAnonymousAction()}},n.voted?o.createElement(x.Z,null,"check"):o.createElement(G.Z,{id:"ui.feedObject.poll.choice.vote",defaultMessage:"ui.feedObject.poll.choice.vote"})));var f,h},Ie=(0,A.vU)({showPoll:{id:"ui.feedObject.poll.showPoll",defaultMessage:"ui.feedObject.poll.showPoll"},hidePoll:{id:"ui.feedObject.poll.hidePoll",defaultMessage:"ui.feedObject.poll.hidePoll"},expDate:{id:"ui.feedObject.poll.expDate",defaultMessage:"ui.feedObject.poll.expDate"},voters:{id:"ui.feedObject.poll.voters",defaultMessage:"ui.feedObject.poll.voters"},votes:{id:"ui.feedObject.poll.votes",defaultMessage:"ui.feedObject.poll.votes"}}),De={root:`${N.B}-poll-object-root`,voters:`${N.B}-poll-object-voters`,votes:`${N.B}-poll-object-votes`,toggleButton:`${N.B}-poll-object-toggle-button`,title:`${N.B}-poll-object-title`,expiration:`${N.B}-poll-object-expiration`,closed:`${N.B}-poll-object-closed`,expandIcon:`${N.B}-poll-object-expand-icon`,collapsedIcon:`${N.B}-poll-object-collapsed-icon`},Re=(0,r.ZP)(ke.Z,{name:N.B,slot:"PollObjectRoot"})((()=>({})));const $e=function(e){const{className:t,feedObject:n,pollObject:r,disabled:c,visible:u=!0,onChange:m,onToggleVisibility:p}=e,g=(0,a._T)(e,["className","feedObject","pollObject","disabled","visible","onChange","onToggleVisibility"]),f=(0,P.Z)(),[b,v]=(0,o.useState)(r),[E,y]=(0,o.useState)(function(){const e=r.choices;let t=0;for(let n=0;n<e.length;n++)t+=e[n].vote_count;return t||0}()),[O,C]=(0,o.useState)(r.choices),[Z,w]=(0,o.useState)(null),[S,N]=(0,o.useState)(!u),_=r.multiple_choices,k=r.closed;function T(e){w(e.id),K.Z.request({url:q.Z.PollVote.url({id:n.id,type:n.type}),method:q.Z.PollVote.method,data:{choice:e.id}}).then((t=>{e.voted?(e=>{const t=[...O].map((t=>Object.assign({},t,{voted:t.id!==e&&t.voted,vote_count:t.id===e&&t.vote_count>0?t.vote_count-1:t.vote_count})));C(t),m(t),y((e=>e-1))})(e.id):(e=>{const t=[...O];let n;_?(n=t.map((t=>Object.assign({},t,{voted:t.id===e||t.voted,vote_count:t.id===e?t.vote_count+1:t.vote_count}))),y((e=>e+1))):(n=t.map((t=>Object.assign({},t,{voted:t.id===e,vote_count:t.id===e?t.vote_count+1:t.vote_count>0&&t.voted?t.vote_count-1:t.vote_count}))),y(n.reduce(((e,t)=>e+t.vote_count),0))),C(n),m(n)})(e.id),w(null)})).catch((e=>{J.Y.error(Q.J,e)}))}const A=(0,o.useMemo)((()=>()=>{p&&p(S),N((e=>!e))}),[N,p]);let M=o.createElement(o.Fragment,null);return r&&(M=o.createElement(o.Fragment,null,o.createElement(d.Z,{title:o.createElement(o.Fragment,null,o.createElement(s.Z,{className:De.toggleButton,onClick:A,"aria-expanded":S,endIcon:o.createElement(x.Z,{className:j()(De.expandIcon,{[De.collapsedIcon]:S})},"arrow_upward")},S?f.formatMessage(Ie.showPoll):f.formatMessage(Ie.hidePoll)))}),o.createElement(h.Z,{in:!S,timeout:"auto",unmountOnExit:!0},o.createElement(l.Z,null,o.createElement(i.Z,{variant:"body1",className:De.title},b.title),b.expiration_at&&Date.parse(b.expiration_at)>=(new Date).getTime()&&o.createElement(i.Z,{variant:"body2",className:De.expiration},`${f.formatMessage(Ie.expDate)}`,`${f.formatDate(Date.parse(b.expiration_at),{year:"numeric",month:"numeric",day:"numeric"})}`),b.closed&&o.createElement(i.Z,{variant:"body2",className:De.closed},o.createElement(G.Z,{id:"ui.feedObject.poll.closed",defaultMessage:"ui.feedObject.poll.closed"})),o.createElement(W.Z,null,O.map(((e,t)=>o.createElement(Y.ZP,{key:t},o.createElement(Me,{elevation:0,choiceObj:e,feedObject:c?null:n,votes:E,vote:T,isVoting:Z,votable:k}))))),_?o.createElement("div",{className:De.votes},o.createElement(x.Z,null,"list"),o.createElement(i.Z,null,`${f.formatMessage(Ie.votes,{total:E})}`)):o.createElement("div",{className:De.voters},o.createElement(x.Z,null,"people_alt"),o.createElement(i.Z,null,`${f.formatMessage(Ie.voters,{total:E})}`)))))),(0,o.useEffect)((()=>{C(r.choices)}),[r.choices]),o.createElement(Re,Object.assign({className:j()(De.root,t)},g),M)};var Be=n(59219),Le=n(74482),Fe=n(69721),Ue=n(22319);const Ve={LOADING_NEXT:"_loading_next",LOADING_PREVIOUS:"_loading_previous",DATA_NEXT_LOADED:"_data_next_loaded",DATA_PREVIOUS_LOADED:"_data_previous_loaded",DATA_RELOAD:"_data_reload",DATA_RELOADED:"_data_reloaded"};function ze(e,t){switch(t.type){case Ve.LOADING_NEXT:return Object.assign(Object.assign({},e),{isLoadingNext:!0,isLoadingPrevious:!1});case Ve.LOADING_PREVIOUS:return Object.assign(Object.assign({},e),{isLoadingNext:!1,isLoadingPrevious:!0});case Ve.DATA_NEXT_LOADED:return Object.assign(Object.assign(Object.assign(Object.assign({},e),{page:t.payload.currentPage,contributors:t.payload.contributors,isLoadingNext:!1,componentLoaded:!0,next:t.payload.next}),t.payload.previous?{previous:t.payload.previous}:{}),t.payload.total?{total:t.payload.total}:{});case Ve.DATA_PREVIOUS_LOADED:return Object.assign(Object.assign({},e),{page:t.payload.currentPage,contributors:t.payload.contributors,isLoadingPrevious:!1,previous:t.payload.previous});case Ve.DATA_RELOAD:return Object.assign(Object.assign({},e),{next:t.payload.next,contributors:[],total:0,previous:null,reload:!0});case Ve.DATA_RELOADED:return Object.assign(Object.assign({},e),{componentLoaded:!1,reload:!1});default:throw new Error(`Unhandled type: ${t.type}`)}}function Ge(e){const{id:t,feedObject:n,feedObjectType:a,offset:r=0,pageSize:l=5,onChangePage:i,cacheStrategy:s=Be.n2.CACHE_FIRST}=e,c=(0,Ue.Z)(),{obj:u,setObj:d}=(0,M.Z)({id:t,feedObject:n,feedObjectType:a}),m=u?u.id:null,p=()=>{const e=r?`&offset=${r}`:"",n=u?u.id:t,o=u?u.type:a;return`${q.Z.FeedObjectContributorsList.url({type:o,id:n})}?limit=${l}${e}`},[g,f]=(0,o.useReducer)(ze,{},(()=>function(e){const t=e.obj?(0,Fe.t9)(e.obj.id,e.obj.type,e.next):null;let n={componentLoaded:!1,contributors:[],total:0,next:e.next,previous:null,isLoadingNext:!1,isLoadingPrevious:!1,page:e.offset/e.pageSize+1,reload:!1};if(t&&Be.ZP.hasKey(t)&&e.cacheStrategy!==Be.n2.NETWORK_ONLY){const e=Be.ZP.get(t);return Object.assign(Object.assign({},n),{total:e.count,next:e.next,previous:e.previous,contributors:e.results})}return n}({obj:u,offset:r,pageSize:l,next:p(),cacheStrategy:s}))),h=e=>{const t=new URLSearchParams(e),n=Object.fromEntries(t.entries());return(n.offset?parseInt(n.offset):0)/l+1},b=(e,t)=>v(e,!1).then((e=>{let n,a=h(g.next);if(t){n=g.contributors.slice(0,g.contributors.length-e.results.length).concat(e.results)}else{let t=g.contributors.slice(e.results.length,g.contributors.length);n=e.results.concat(t)}c.current&&f({type:t?Ve.DATA_NEXT_LOADED:Ve.DATA_PREVIOUS_LOADED,payload:Object.assign(Object.assign({page:a,contributors:n},t?{next:e.next}:{previous:e.previous}),{total:e.count})})})),v=(e,t=!0)=>{const n=(0,Fe.t9)(u.id,u.type,e);return t&&Be.ZP.hasKey(n)&&s!==Be.n2.NETWORK_ONLY?Promise.resolve(Be.ZP.get(n)):K.Z.request({url:e,method:q.Z.Comments.method}).then((e=>e.status>=300?Promise.reject(e):(Be.ZP.set(n,e.data),Promise.resolve(e.data))))};function E(){u&&g.next&&!g.isLoadingNext&&(f({type:Ve.LOADING_NEXT}),v(g.next).then((e=>{if(c.current){let t=h(g.next);f({type:Ve.DATA_NEXT_LOADED,payload:Object.assign({page:t,contributors:[...g.contributors,...e.results],next:e.next,total:e.count,componentLoaded:!0},r&&0===g.contributors.length?{previous:e.previous}:{})}),i&&i(t)}})).catch((e=>{J.Y.error(Le.h,e)})).then((()=>{c.current&&s===Be.n2.STALE_WHILE_REVALIDATE&&b(g.next,!0)})))}return(0,o.useEffect)((()=>{c.current&&g.componentLoaded&&Boolean(u)&&!g.reload&&f({type:Ve.DATA_RELOAD,payload:{next:p()}})}),[m,l,r,c]),(0,o.useEffect)((()=>{c.current&&g.componentLoaded&&g.reload&&!g.isLoadingNext&&!g.isLoadingPrevious&&(f({type:Ve.DATA_RELOADED}),E())}),[g.reload,c]),Object.assign(Object.assign({feedObject:u,setFeedObject:d},g),{pageSize:l,getNextPage:E,getPreviousPage:function(){u&&g.previous&&!g.isLoadingPrevious&&(f({type:Ve.LOADING_PREVIOUS}),v(g.previous).then((e=>{if(c.current){let t=h(g.previous);f({type:Ve.DATA_PREVIOUS_LOADED,payload:{page:t,contributors:[...e.results,...g.contributors],previous:e.previous}}),i&&i(t)}})).catch((e=>{J.Y.error(Le.h,e)})).then((()=>{s===Be.n2.STALE_WHILE_REVALIDATE&&b(g.next,!1)})))}})}var He=n(51107),We=n(59107);const Ye={root:`${N.B}-contributors-skeleton-root`,btnParticipants:`${N.B}-btn-participants`},Xe=(0,r.ZP)(c.Z,{name:N.B,slot:"ContributorsSkeletonRoot"})((()=>({})));function qe(e){const{className:t=null,AvatarGroupSkeletonProps:n={}}=e,r=(0,a._T)(e,["className","AvatarGroupSkeletonProps"]);return o.createElement(Xe,Object.assign({className:j()(Ye.root,t)},r),o.createElement(s.Z,{variant:"text",disabled:!0,classes:{root:Ye.btnParticipants}},o.createElement(G.Z,{id:"ui.feedObject.contributors.participants",defaultMessage:"ui.feedObject.contributors.participants"}),":",o.createElement(We.Z,Object.assign({},e.AvatarGroupSkeletonProps))))}const Ke={root:`${N.B}-contributors-root`,avatarGroup:`${N.B}-contributors-avatarGroup`,btnParticipants:`${N.B}-contributors-btn-participants`},Je=(0,r.ZP)(c.Z,{name:N.B,slot:"ContributorsRoot"})((()=>({})));const Qe=function(e){const{className:t=null,feedObjectId:n=null,feedObject:r=null,feedObjectType:l=null,ContributorsSkeletonProps:u={},cacheStrategy:d=Be.n2.CACHE_FIRST}=e,p=(0,a._T)(e,["className","feedObjectId","feedObject","feedObjectType","ContributorsSkeletonProps","cacheStrategy"]),g=Ge({id:n,feedObject:r,feedObjectType:l,pageSize:10,cacheStrategy:d}),[f,h]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{g.feedObject&&g.getNextPage()}),[g.feedObject]),g.feedObject?o.createElement(Je,Object.assign({className:j()(Ke.root,t)},p),o.createElement(c.Z,null,g.isLoadingNext&&!f?o.createElement(qe,Object.assign({},u)):o.createElement(o.Fragment,null,g.contributors.length>0?o.createElement(o.Fragment,null,o.createElement(s.Z,{variant:"text",onClick:()=>h(!0),classes:{root:Ke.btnParticipants},color:"inherit"},o.createElement(G.Z,{id:"ui.feedObject.contributors.participants",defaultMessage:"ui.feedObject.contributors.participants"}),":",o.createElement(He.Z,Object.assign({},p),g.contributors.map(((e,t)=>o.createElement(m.Z,{alt:e.username,src:e.avatar,key:t}))),[...Array(Math.max(g.total-g.contributors.length,0))].map(((e,t)=>o.createElement(m.Z,{key:t}))))),f&&o.createElement(ee.Z,{title:o.createElement(G.Z,{defaultMessage:"ui.feedObject.contributors.title",id:"ui.feedObject.contributors.title",values:{total:g.total}}),onClose:()=>h(!1),open:f},g.isLoadingNext?o.createElement(te.Z,{size:50}):o.createElement(X.Z,{dataLength:g.contributors.length,next:g.getNextPage(),hasMoreNext:Boolean(g.next),loaderNext:o.createElement(te.Z,{size:30}),height:400,endMessage:o.createElement(i.Z,{variant:"body2",align:"center",fontWeight:"bold"},o.createElement(G.Z,{id:"ui.feedObject.contributors.noOtherContributors",defaultMessage:"ui.feedObject.contributors.noOtherContributors"}))},o.createElement(W.Z,null,g.contributors.map(((e,t)=>o.createElement(Y.ZP,{key:t},o.createElement(ne.Z,{elevation:0,user:e,key:e.id,sx:{m:0},onClick:()=>h(!1)})))))))):null))):null};var et=n(63219),tt=n(52180),nt=n(56581);const at={root:`${N.B}-action-follow-root`,button:`${N.B}-action-follow-button`,iconized:`${N.B}-action-follow-iconized`,followed:`${N.B}-action-follow-followed`},ot=(0,r.ZP)(c.Z,{name:N.B,slot:"ActionFollowRoot"})((()=>({})));const rt=function(e){const{className:t=null,feedObjectId:n=null,feedObject:r=null,feedObjectType:l=R.q.POST,handleFollow:i,iconized:s=!0}=e,c=(0,a._T)(e,["className","feedObjectId","feedObject","feedObjectType","handleFollow","iconized"]),{obj:u,setObj:d}=(0,M.Z)({id:n,feedObject:r,feedObjectType:l}),[m,g]=(0,o.useState)(!1),f=(0,fe.RM)(),h=(0,ve.LD)(),{enqueueSnackbar:b}=(0,me.Ds)(),v=(0,o.useMemo)((()=>()=>K.Z.request({url:q.Z.FollowContribution.url({type:u.type,id:u.id}),method:q.Z.FollowContribution.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[u]);function E(){h.user?(g(!0),v().then((e=>{const t=!u.followed;d(Object.assign({},u,{followed:t})),g(!1),i&&i(t)})).catch((e=>{J.Y.error(Q.J,e),(0,nt.w)(e,h.managers.blockedUsers.isBlocked(u.author),b)||b(o.createElement(G.Z,{id:"ui.common.error.action",defaultMessage:"ui.common.error.action"}),{variant:"error",autoHideDuration:3e3}),g(!1)}))):f.settings.handleAnonymousAction()}return o.createElement(ot,Object.assign({className:j()(at.root,t)},c),function(){let e=o.createElement(G.Z,{id:"ui.feedObject.follow",defaultMessage:"ui.feedObject.follow"});return u.followed&&(e=o.createElement(G.Z,{id:"ui.feedObject.unfollow",defaultMessage:"ui.feedObject.unfollow"})),o.createElement(o.Fragment,null,h.user&&u.author.id!==h.user.id&&!u.deleted&&o.createElement(p.Z,{title:e},o.createElement(H.Z,{className:j()(at.button,{[at.iconized]:s,[at.followed]:u.followed}),loading:m,variant:s?"text":"contained",disabled:m,onClick:E},s?o.createElement(x.Z,null,u.followed?"bookmark_added":"bookmark_border"):e)))}())};var lt=n(63902),it=n(29628),st=n(115),ct=n(20166),ut=n(80317),dt=n(98619);const mt=(0,A.vU)({relevantActivities:{id:"ui.feedObject.activitiesMenu.relevantActivities",defaultMessage:"ui.feedObject.activitiesMenu.relevantActivities"},recentComments:{id:"ui.feedObject.activitiesMenu.recentComments",defaultMessage:"ui.feedObject.activitiesMenu.recentComments"},firstComments:{id:"ui.feedObject.activitiesMenu.firstComments",defaultMessage:"ui.feedObject.activitiesMenu.firstComments"},followedComments:{id:"ui.feedObject.activitiesMenu.followedComments",defaultMessage:"ui.feedObject.activitiesMenu.followedComments"},connectionsComments:{id:"ui.feedObject.activitiesMenu.connectionsComments",defaultMessage:"ui.feedObject.activitiesMenu.connectionsComments"}}),pt={root:`${N.B}-activities-menu-root`,selector:`${N.B}-activities-menu-selector`},gt=(0,r.ZP)(c.Z,{name:N.B,slot:"ActivitiesMenuRoot"})((()=>({})));const ft=function(e){const{className:t=null,selectedActivities:n=null,hideRelevantActivitiesItem:r=!1,onChange:l=null}=e,i=(0,a._T)(e,["className","selectedActivities","hideRelevantActivitiesItem","onChange"]),u=(0,o.useContext)(he.Tt),d=(0,ve.LD)(),m=(0,oe.Z)(),g=(0,re.Z)(m.breakpoints.down("md")),f=u.preferences[be.$0].value,[h,b]=o.useState(null),v=Boolean(h),E=(0,P.Z)(),y=e=>{b(e.currentTarget)},O=()=>{b(null)},C=e=>()=>{l&&l(e)};function Z(){return o.createElement(c.Z,null,!r&&o.createElement(dt.Z,{selected:n===$.F.RELEVANCE_ACTIVITIES,onClick:C($.F.RELEVANCE_ACTIVITIES)},o.createElement(le.Z,{primary:o.createElement("b",null,E.formatMessage(mt.relevantActivities)),secondary:o.createElement(G.Z,{id:"ui.feedObject.activitiesMenu.relevantActivitiesDesc",defaultMessage:"ui.feedObject.activitiesMenu.relevantActivitiesDesc"})})),o.createElement(dt.Z,{selected:n===$.F.RECENT_COMMENTS,onClick:C($.F.RECENT_COMMENTS)},o.createElement(le.Z,{primary:o.createElement("b",null,E.formatMessage(mt.recentComments)),secondary:o.createElement(G.Z,{id:"ui.feedObject.activitiesMenu.recentCommentsDesc",defaultMessage:"ui.feedObject.activitiesMenu.recentCommentsDesc"})})),o.createElement(dt.Z,{selected:n===$.F.FIRST_COMMENTS,onClick:C($.F.FIRST_COMMENTS)},o.createElement(le.Z,{primary:o.createElement("b",null,E.formatMessage(mt.firstComments)),secondary:o.createElement(G.Z,{id:"ui.feedObject.activitiesMenu.firstCommentsDesc",defaultMessage:"ui.feedObject.activitiesMenu.firstCommentsDesc"})})),d.user&&o.createElement(dt.Z,{selected:n===$.F.CONNECTIONS_COMMENTS,onClick:C($.F.CONNECTIONS_COMMENTS)},o.createElement(le.Z,{primary:o.createElement("b",null,f?E.formatMessage(mt.followedComments):E.formatMessage(mt.connectionsComments)),secondary:f?o.createElement(G.Z,{id:"ui.feedObject.activitiesMenu.followedCommentsDesc",defaultMessage:"ui.feedObject.activitiesMenu.followedCommentsDesc"}):o.createElement(G.Z,{id:"ui.feedObject.activitiesMenu.connectionsCommentsDesc",defaultMessage:"ui.feedObject.activitiesMenu.connectionsCommentsDesc"})})))}return o.createElement(gt,Object.assign({className:j()(pt.root,t)},i),o.createElement(c.Z,{className:pt.selector},o.createElement(p.Z,{title:o.createElement(G.Z,{id:"ui.feedObject.activitiesMenu.tooltipTitle",defaultMessage:"ui.feedObject.activitiesMenu.tooltipTitle"})},o.createElement(s.Z,{variant:"text",size:"small",onClick:y},n===$.F.CONNECTIONS_COMMENTS&&f?E.formatMessage(mt.followedComments):E.formatMessage(mt[`${(0,ge.eV)(n)}`]),"\xa0 ",o.createElement(x.Z,null,"expand_more")))),g?o.createElement(se.Z,{open:v,onClose:O,onOpen:y,anchor:"bottom",disableSwipeToOpen:!0},Z()):o.createElement(ie.Z,{anchorEl:h,open:v,onClose:O,onClick:O,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"}},Z()))};var ht,bt;!function(e){e.HOME="home",e.EXPLORE="explore"}(ht||(ht={})),function(e){e.COMMENT="comment",e.VOTE="vote",e.POLLVOTE="pollvote",e.FOLLOW="follow"}(bt||(bt={}));var vt=n(12132),Et=n(68585);const yt=(0,A.vU)({comment:{id:"ui.feedObject.relevantActivities.comment",defaultMessage:"ui.feedObject.relevantActivities.comment"}}),Ot={root:`${N.B}-activity-comment-root`,avatar:`${N.B}-activity-comment-avatar`,username:`${N.B}-activity-comment-username`,showMoreContent:`${N.B}-activity-comment-show-more-content`},Ct=(0,r.ZP)(st.Z,{name:N.B,slot:"ActivityCommentRoot"})((()=>({})));const Zt=function(e){const{className:t=null,activityObject:n=null}=e,r=(0,a._T)(e,["className","activityObject"]),l=(0,I.sy)(),[i,s]=(0,o.useState)(!1),c=(0,P.Z)();return o.createElement(o.Fragment,null,o.createElement(Ct,Object.assign({},r,{className:j()(Ot.root,t),image:o.createElement(D.Z,Object.assign({},!n.author.deleted&&{to:l.url(vt.USER_PROFILE_ROUTE_NAME,n.author)},{onClick:n.author.deleted?()=>s(!0):null}),o.createElement(m.Z,{alt:n.author.username,variant:"circular",src:n.author.avatar,className:Ot.avatar})),primary:o.createElement(o.Fragment,null,c.formatMessage(yt.comment,{username:o.createElement(D.Z,Object.assign({},!n.author.deleted&&{to:l.url(vt.USER_PROFILE_ROUTE_NAME,n.author)},{onClick:n.author.deleted?()=>s(!0):null,className:Ot.username}),n.author.username),link:(...e)=>o.createElement(D.Z,{to:l.url(vt.COMMENT_ROUTE_NAME,(0,B.p3)(n.comment))},e)})),secondary:o.createElement(v.Z,{date:n.active_at})})),i&&o.createElement(Et.Z,{open:i,handleClose:()=>s(!1)}))},jt=(0,A.vU)({vote:{id:"ui.feedObject.relevantActivities.vote",defaultMessage:"ui.feedObject.relevantActivities.vote"}}),wt={root:`${N.B}-activity-vote-up-root`,avatar:`${N.B}-activity-vote-up-avatar`,username:`${N.B}-activity-vote-up-username`},St=(0,r.ZP)(st.Z,{name:N.B,slot:"ActivityVoteUpRoot"})((()=>({})));const Nt=function(e){const{className:t=null,activityObject:n=null}=e,r=(0,a._T)(e,["className","activityObject"]),l=(0,I.sy)(),[i,s]=(0,o.useState)(!1),c=(0,P.Z)();return o.createElement(o.Fragment,null,o.createElement(St,Object.assign({},r,{className:j()(wt.root,t),image:o.createElement(D.Z,Object.assign({},!n.author.deleted&&{to:l.url(vt.USER_PROFILE_ROUTE_NAME,n.author)},{onClick:n.author.deleted?()=>s(!0):null}),o.createElement(m.Z,{alt:n.author.username,variant:"circular",src:n.author.avatar,className:wt.avatar})),primary:o.createElement(o.Fragment,null,c.formatMessage(jt.vote,{username:o.createElement(D.Z,Object.assign({},!n.author.deleted&&{to:l.url(vt.USER_PROFILE_ROUTE_NAME,n.author)},{className:wt.username,onClick:n.author.deleted?()=>s(!0):null}),n.author.username)})),secondary:o.createElement(v.Z,{date:n.active_at})})),i&&o.createElement(Et.Z,{open:i,handleClose:()=>s(!1)}))},_t=(0,A.vU)({follow:{id:"ui.feedObject.relevantActivities.follow",defaultMessage:"ui.feedObject.relevantActivities.follow"}}),kt={root:`${N.B}-activity-follow-root`,avatar:`${N.B}-activity-follow-avatar`,username:`${N.B}-activity-follow-username`},Tt=(0,r.ZP)(st.Z,{name:N.B,slot:"ActivityFollowRoot"})((()=>({})));const At=function(e){const t=(0,it.Z)({props:e,name:N.B}),{className:n=null,activityObject:r=null}=t,l=(0,a._T)(t,["className","activityObject"]),i=(0,I.sy)(),[s,c]=(0,o.useState)(!1),u=(0,P.Z)();return o.createElement(o.Fragment,null,o.createElement(Tt,Object.assign({},l,{className:j()(kt.root,n),image:o.createElement(D.Z,Object.assign({},!r.author.deleted&&{to:i.url(vt.USER_PROFILE_ROUTE_NAME,r.author)},{onClick:r.author.deleted?()=>c(!0):null}),o.createElement(m.Z,{alt:r.author.username,variant:"circular",src:r.author.avatar,className:kt.avatar})),primary:o.createElement(o.Fragment,null,u.formatMessage(_t.follow,{username:o.createElement(D.Z,Object.assign({},!r.author.deleted&&{to:i.url(vt.USER_PROFILE_ROUTE_NAME,r.author)},{onClick:r.author.deleted?()=>c(!0):null,className:kt.username}),r.author.username)})),secondary:o.createElement(v.Z,{date:r.active_at})})),s&&o.createElement(Et.Z,{open:s,handleClose:()=>c(!1)}))},Pt=(0,A.vU)({pollVote:{id:"ui.feedObject.relevantActivities.pollVote",defaultMessage:"ui.feedObject.relevantActivities.pollVote"}}),xt={root:`${N.B}-activity-poll-vote-root`,avatar:`${N.B}-activity-poll-vote-avatar`,username:`${N.B}-activity-poll-vote-username`},Mt=(0,r.ZP)(st.Z,{name:N.B,slot:"ActivityPollVoteRoot"})((()=>({})));const It=function(e){const{className:t=null,activityObject:n=null}=e,r=(0,a._T)(e,["className","activityObject"]),l=(0,I.sy)(),[i,s]=(0,o.useState)(!1),c=(0,P.Z)();return o.createElement(o.Fragment,null,o.createElement(Mt,Object.assign({},r,{className:j()(xt.root,t),image:o.createElement(D.Z,Object.assign({},!n.author.deleted&&{to:l.url(vt.USER_PROFILE_ROUTE_NAME,n.author)},{onClick:n.author.deleted?()=>s(!0):null}),o.createElement(m.Z,{alt:n.author.username,variant:"circular",src:n.author.avatar,className:xt.avatar})),primary:o.createElement(o.Fragment,null,c.formatMessage(Pt.pollVote,{username:o.createElement(D.Z,Object.assign({},!n.author.deleted&&{to:l.url(vt.USER_PROFILE_ROUTE_NAME,n.author)},{onClick:n.author.deleted?()=>s(!0):null,className:xt.username}),n.author.username)})),secondary:o.createElement(v.Z,{date:n.active_at})})),i&&o.createElement(Et.Z,{open:i,handleClose:()=>s(!1)}))},Dt={root:`${N.B}-relevant-activities-root`,activity:`${N.B}-relevant-activities-activity`},Rt=(0,r.ZP)(c.Z,{name:N.B,slot:"RelevantActivitiesRoot"})((()=>({})));const $t=function(e){const{className:t=null,activities:n=[],showMaxRelevantActivities:r=5}=e,l=(0,a._T)(e,["className","activities","showMaxRelevantActivities"]),[s,c]=(0,o.useState)(!1);function u(e,t){return e.type===bt.COMMENT?o.createElement(Zt,{activityObject:e,key:t,elevation:0}):e.type===bt.FOLLOW?o.createElement(At,{activityObject:e,key:t,elevation:0}):e.type===bt.VOTE?o.createElement(Nt,{activityObject:e,key:t,elevation:0}):e.type===bt.POLLVOTE?o.createElement(It,{activityObject:e,key:t,elevation:0}):null}return o.createElement(Rt,Object.assign({className:j()(Dt.root,t)},l),n.length<=0?o.createElement(i.Z,{variant:"body2"},o.createElement(G.Z,{id:"ui.feedObject.relevantActivities.noResults",defaultMessage:"ui.feedObject.relevantActivities.noResults"})):o.createElement(W.Z,null,n.slice(0,r).map(((e,t)=>o.createElement(Y.ZP,{className:Dt.activity,key:t},u(e,t)))),!s&&n.length>r&&o.createElement(dt.Z,{onClick:()=>c((e=>!e))},o.createElement(le.Z,{primary:o.createElement(G.Z,{id:"ui.feedObject.relevantActivities.showOthers",defaultMessage:"ui.feedObject.relevantActivities.showOthers"})}),s?o.createElement(x.Z,null,"expand_less"):o.createElement(x.Z,null,"expand_more")),o.createElement(h.Z,{in:s,timeout:"auto",unmountOnExit:!0},n.slice(r).map(((e,t)=>o.createElement(Y.ZP,{className:Dt.activity,key:t},u(e,t)))))))};var Bt=n(47189),Lt=n(97650);const Ft={root:`${N.B}-activities-root`,activities:`${N.B}-activities`},Ut=(0,r.ZP)(c.Z,{name:N.B,slot:"ActivitiesRoot"})((()=>({})));const Vt=function(e){const{id:t=`feed_object_activities_${e.feedObjectId?e.feedObjectId:e.feedObject?e.feedObject.id:""}`,className:n,feedObjectId:r,feedObject:l,feedObjectType:i=R.q.POST,cacheStrategy:s=Be.n2.CACHE_FIRST,CommentsObjectProps:u={},CommentComponentProps:d={variant:"outlined"},feedObjectActivities:m=[],comments:p=[],onSetSelectedActivities:g,activitiesType:f=$.F.RECENT_COMMENTS}=e,h=(0,a._T)(e,["id","className","feedObjectId","feedObject","feedObjectType","cacheStrategy","CommentsObjectProps","CommentComponentProps","feedObjectActivities","comments","onSetSelectedActivities","activitiesType"]),{ref:b,inView:v}=(0,Lt.YD)({triggerOnce:!0}),[E,y]=(0,o.useState)(f),O=(0,Bt.Z)({id:r,feedObject:l,feedObjectType:i,cacheStrategy:s,pageSize:2,orderBy:E===$.F.CONNECTIONS_COMMENTS?ct.p.CONNECTION_DESC:E===$.F.FIRST_COMMENTS?ct.p.ADDED_AT_ASC:ct.p.ADDED_AT_DESC}),C=O.feedObject?O.feedObject.id:null,Z=Math.min(3,O.feedObject?O.feedObject.comment_count:2),w=m&&m.length>0;function S(){O.getNextPage()}return(0,o.useEffect)((()=>{y(f)}),[f]),(0,o.useEffect)((()=>{C&&!O.comments.length&&v&&O.getNextPage()}),[C,v]),o.createElement(Ut,Object.assign({id:t,className:j()(Ft.root,n)},h,{ref:b}),O.feedObject&&(Boolean(O.feedObject.comment_count)||m&&m.length>0||p.length>0||l&&l.comment_count>0)?o.createElement(c.Z,Object.assign({className:Ft.activities},w?{}:{style:{minHeight:80*Math.min(Z,l.comment_count)+"px"}}),o.createElement(ft,{selectedActivities:E,hideRelevantActivitiesItem:!w,onChange:function(e){g(e),y(e)}}),E===$.F.RELEVANCE_ACTIVITIES?o.createElement($t,{activities:m}):o.createElement(o.Fragment,null,(O.feedObject.comment_count>0||p.length>0)&&o.createElement(ut.Z,Object.assign({feedObject:O.feedObject,comments:O.comments,startComments:p,next:O.next,isLoadingNext:O.isLoadingNext,handleNext:S,totalLoadedComments:O.comments.length+p.length,totalComments:O.feedObject.comment_count,hideAdvertising:!0},u,{cacheStrategy:s,CommentsObjectSkeletonProps:{count:Z},CommentComponentProps:Object.assign(Object.assign(Object.assign(Object.assign({},u.CommentComponentProps?u.CommentComponentProps:{}),{truncateContent:!0}),d),{cacheStrategy:s}),inPlaceLoadMoreContents:!1})))):null)};var zt=n(80366),Gt=n(68456),Ht=n(55218);var Wt=n(22461),Yt=n(70815),Xt=n(26474);const qt="SCFeedObjectMediaPreview",Kt={root:`${qt}-root`},Jt=(0,r.ZP)(c.Z,{name:qt,slot:"Root"})((()=>({}))),Qt=e=>{const t=(0,it.Z)({props:e,name:qt}),{className:n,medias:r,mediaObjectTypes:l=[Wt.Z,Yt.Z,Xt.Z]}=t,i=(0,a._T)(t,["className","medias","mediaObjectTypes"]),{handleMediaClick:s}={handleMediaClick:e=>{K.Z.request({url:q.Z.MediaClickTracker.url({id:e.id}),method:q.Z.MediaClickTracker.method}).catch((e=>{J.Y.error(Le.h,e)}))}};return r.length?o.createElement(Jt,Object.assign({className:j()(n,Kt.root)},i),l.map((e=>{const{displayProps:t={}}=e;return o.createElement("div",{key:e.name},o.createElement(e.displayComponent,Object.assign({medias:r},t,{onMediaClick:s})))}))):null},en=(0,A.vU)({visibleToAll:{id:"ui.feedObject.visibleToAll",defaultMessage:"ui.feedObject.visibleToAll"},visibleToGroup:{id:"ui.feedObject.visibleToGroup",defaultMessage:"ui.feedObject.visibleToGroup"}}),tn={root:`${N.B}-root`,deleted:`${N.B}-deleted`,header:`${N.B}-header`,category:`${N.B}-category`,group:`${N.B}-group`,avatar:`${N.B}-avatar`,username:`${N.B}-username`,activityAt:`${N.B}-activity-at`,tag:`${N.B}-tag`,location:`${N.B}-location`,content:`${N.B}-content`,showMore:`${N.B}-show-more`,error:`${N.B}-error`,titleSection:`${N.B}-title-section`,title:`${N.B}-title`,textSection:`${N.B}-text-section`,text:`${N.B}-text`,snippet:`${N.B}-snippet`,snippetContent:`${N.B}-snippet-content`,mediasSection:`${N.B}-medias-section`,pollsSection:`${N.B}-polls-section`,infoSection:`${N.B}-info-section`,actionsSection:`${N.B}-actions-section`,replyContent:`${N.B}-reply-content`,activitiesSection:`${N.B}-activities-section`,activitiesContent:`${N.B}-activities-content`,followButton:`${N.B}-follow-button`},nn=(0,r.ZP)(lt.Z,{name:N.B,slot:"Root"})((()=>({})));const an=function(e){var t;const n=(0,it.Z)({props:e,name:N.B}),{id:r=`feed_object_${n.feedObjectId?n.feedObjectId:n.feedObject?n.feedObject.id:""}`,className:O=null,feedObjectId:C=null,feedObject:Z=null,feedObjectType:w=null,feedObjectActivities:S=null,cacheStrategy:_=Be.n2.CACHE_FIRST,markRead:k=!1,template:T=$.r.PREVIEW,hideFollowAction:A=!1,summaryExpanded:L=!1,activitiesExpanded:F=!0,activitiesExpandedType:U,hideParticipantsPreview:V=!1,pollVisible:z=!1,FollowButtonProps:H={},FeedObjectSkeletonProps:W={elevation:0},ActionsProps:Y={},CommentObjectReplyComponent:X=zt.Z,CommentObjectReplyComponentProps:ee={WidgetProps:{variant:"outlined"}},CommentComponentProps:te={variant:"outlined"},CommentObjectSkeletonProps:ne={elevation:0,WidgetProps:{variant:"outlined"}},ContributionActionsMenuProps:ae={},FeedObjectMediaPreviewProps:oe={},ActivitiesProps:re={cacheStrategy:_},PollObjectProps:le={elevation:0},ContributorsFeedObjectProps:ie={},onReply:se,onHeightChange:ce,onStateChange:ue}=n,de=(0,a._T)(n,["id","className","feedObjectId","feedObject","feedObjectType","feedObjectActivities","cacheStrategy","markRead","template","hideFollowAction","summaryExpanded","activitiesExpanded","activitiesExpandedType","hideParticipantsPreview","pollVisible","FollowButtonProps","FeedObjectSkeletonProps","ActionsProps","CommentObjectReplyComponent","CommentObjectReplyComponentProps","CommentComponentProps","CommentObjectSkeletonProps","ContributionActionsMenuProps","FeedObjectMediaPreviewProps","ActivitiesProps","PollObjectProps","ContributorsFeedObjectProps","onReply","onHeightChange","onStateChange"]),pe=(0,fe.RM)(),ge=(0,I.sy)(),he=(0,ve.LD)(),{enqueueSnackbar:be}=(0,me.Ds)(),{obj:ye,setObj:Ce,error:Ze}=(0,M.Z)({id:C,feedObject:Z,feedObjectType:w,cacheStrategy:_}),je=ye?ye.id:null,[we,Se]=(0,o.useState)(!1),Ne=()=>ye&&F&&(ye.comment_count>0||S&&S.length>0),[ke,Te]=(0,o.useState)(!1),[Ae,Pe]=(0,o.useState)(Ne()),[xe,Me]=(0,o.useState)([]),[Ie,De]=(0,o.useState)(!1),[Re,Le]=(0,o.useState)(function(){if(U)return U;if(S&&S.length>0)return $.F.RELEVANCE_ACTIVITIES;return $.F.RECENT_COMMENTS}()),[Ue,Ve]=(0,o.useState)(L),ze=(0,P.Z)(),Ge=(0,o.useMemo)((()=>e=>{ue&&e&&ue(e),ce&&ce()}),[ue,ce]),He=e=>{Ce(e),Ge()};(0,o.useEffect)((()=>{const e=Ne();Pe(e),Ge({activitiesExpanded:e,activitiesExpandedType:Re,cacheStrategy:Be.n2.CACHE_FIRST})}),[je,Re]);const We=(0,o.useCallback)((e=>{"poll"in ye&&He(Object.assign({},ye,{poll:Object.assign(Object.assign({},ye.poll),{choices:e})}))}),[ye]),Ye=(0,o.useCallback)((e=>{Ge({pollVisible:e})}),[z,Ge]),Xe=(0,o.useCallback)((()=>{Ve(!Ue),Ge({summaryExpanded:!Ue})}),[Ue,Ge]),qe=(0,o.useCallback)(((e,t,n)=>{be(n?o.createElement(G.Z,{id:"ui.feedObject.flagSent",defaultMessage:"ui.feedObject.flagSent"}):o.createElement(G.Z,{id:"ui.feedObject.flagRemoved",defaultMessage:"ui.feedObject.flagRemoved"}),{autoHideDuration:3e3})}),[]),Ke=(0,o.useCallback)((()=>{He(Object.assign({},ye,{deleted:!1}))}),[ye]),Je=(0,o.useCallback)((()=>{He(Object.assign({},ye,{collapsed:!ye.collapsed}))}),[ye]),at=(0,o.useCallback)((()=>{He(Object.assign({},ye,{deleted:!ye.deleted}))}),[ye]),ot=(0,o.useCallback)((()=>{He(Object.assign({},ye,{suspended:!ye.suspended})),be(ye.suspended?o.createElement(G.Z,{id:"ui.feedObject.notificationsEnabled",defaultMessage:"ui.feedObject.notificationsEnabled"}):o.createElement(G.Z,{id:"ui.feedObject.notificationsDisabled",defaultMessage:"ui.feedObject.notificationsDisabled"}),{autoHideDuration:3e3})}),[ye]),lt=(0,o.useCallback)((()=>{Te((e=>!e))}),[ke]),ct=(0,o.useCallback)((e=>{He(e),Te(!1)}),[ye,ke]),ut=(0,o.useCallback)((e=>{He(Object.assign({},ye,{voted:e.voted,vote_count:e.vote_count,reactions_count:e.reactions_count,reaction:e.reaction}))}),[ye]),dt=(0,o.useCallback)((()=>{if(he.user){const e=!Ae;Pe(e),Ge({activitiesExpanded:e})}else pe.settings.handleAnonymousAction()}),[Ae,he.user,Ge,Re]),mt=(0,o.useCallback)((e=>{He(Object.assign(Object.assign({},ye),{followed:e}))}),[ye]),pt=(0,o.useCallback)((()=>{He(Object.assign(Object.assign({},ye),{comment_count:Math.max(ye.comment_count-1,0)}))}),[ye]),gt=(0,o.useCallback)((e=>{Le(e),Me([]),Ge({activitiesExpandedType:e})}),[ye,Ae]),ft=(0,o.useMemo)((()=>e=>K.Z.request({url:q.Z.NewComment.url({}),method:q.Z.NewComment.method,data:{[`${ye.type}`]:ye.id,text:e}}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[je]),ht=e=>{he.user?Ee.IT(he.user)?be(o.createElement(G.Z,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3}):(De(!0),ft(e).then((e=>{const t=e;t.summary_truncated=!1,Re!==$.F.RECENT_COMMENTS?(Me([]),Le($.F.RECENT_COMMENTS)):Me([t,...xe]),De(!1);const n=Object.assign({},ye,{comment_count:ye.comment_count+1});He(n),Be.ZP.deleteKeysWithPrefix(Fe.NX(ye.id,ye.type)),se&&se(e),Ge({activitiesExpanded:Ae,activitiesExpandedType:$.F.RECENT_COMMENTS})})).catch((e=>{J.Y.error(Q.J,e),(0,nt.w)(e,he.managers.blockedUsers.isBlocked(ye.author),be)||be(o.createElement(G.Z,{id:"ui.common.error.action",defaultMessage:"ui.common.error.action"}),{variant:"error",autoHideDuration:3e3})}))):pe.settings.handleAnonymousAction()},bt=(0,o.useCallback)(((e,t)=>{const n="summary_html"in e?e.summary_html:e.summary,a="summary_truncated"in e?e.summary_truncated:e.html.length>=Ht.zo,r=Ue||t===$.r.DETAIL?(0,B.P3)(e.html,ge.url):(0,B.P3)(n,ge.url);return t===$.r.SHARE?o.createElement(o.Fragment,null,o.createElement(D.Z,{to:ge.url((0,B.Ig)(e),(0,B.p3)(e)),className:tn.text},o.createElement(i.Z,{component:"div",className:tn.text,variant:"body2",gutterBottom:!0,dangerouslySetInnerHTML:{__html:r}})),!Ue&&a&&o.createElement(s.Z,{size:"small",variant:"text",color:"inherit",className:tn.showMore,onClick:Xe},o.createElement(G.Z,{id:"ui.feedObject.content.showMore",defaultMessage:"ui.feedObject.content.showMore"}))):t===$.r.DETAIL?o.createElement(i.Z,{component:"div",gutterBottom:!0,className:tn.text,dangerouslySetInnerHTML:{__html:r}}):o.createElement(i.Z,{component:"div",gutterBottom:!0,className:tn.text},o.createElement(i.Z,{component:"span",dangerouslySetInnerHTML:{__html:r}}),!Ue&&a&&o.createElement(s.Z,{size:"small",variant:"text",color:"inherit",className:tn.showMore,onClick:Xe},o.createElement(G.Z,{id:"ui.feedObject.content.showMore",defaultMessage:"ui.feedObject.content.showMore"})))}),[ye,T,Ue]);let yt;return yt=!ye&&Ze||(null==ye?void 0:ye.deleted)&&!he.user&&!Ee.GJ(he.user)&&!Ee.vJ(he.user)?o.createElement(l.Z,{className:j()(tn.error,tn.content)},o.createElement(G.Z,{id:"ui.feedObject.error",defaultMessage:"ui.feedObject.error"})):T===$.r.PREVIEW||T===$.r.DETAIL||T===$.r.SEARCH?o.createElement(o.Fragment,null,ye?o.createElement(c.Z,{className:j()({[tn.deleted]:ye&&ye.deleted})},ye.categories.length>0&&o.createElement("div",{className:tn.category},o.createElement(o.Fragment,null,ye.group&&o.createElement("div",{className:tn.group},o.createElement(u.Z,{color:"secondary",size:"small",key:ye.group.id,icon:o.createElement(x.Z,null,"groups"),component:D.Z,to:ge.url(vt.GROUP_ROUTE_NAME,ye.group),clickable:!0}))),ye.categories.map((e=>o.createElement(D.Z,{to:ge.url(vt.CATEGORY_ROUTE_NAME,e),key:e.id},o.createElement(i.Z,{variant:"overline"},e.name))))),ye.group&&!ye.categories.length&&o.createElement("div",{className:tn.group},o.createElement(u.Z,{color:"secondary",size:"small",key:ye.group.id,icon:o.createElement(x.Z,null,"groups"),label:ye.group.name,component:D.Z,to:ge.url(vt.GROUP_ROUTE_NAME,ye.group),clickable:!0})),o.createElement(d.Z,{className:tn.header,avatar:o.createElement(D.Z,Object.assign({},!ye.author.deleted&&{to:ge.url(vt.USER_PROFILE_ROUTE_NAME,ye.author)},{onClick:ye.author.deleted?()=>Se(!0):null}),o.createElement(Gt.Z,{hide:!ye.author.community_badge},o.createElement(m.Z,{"aria-label":"recipe",src:ye.author.avatar,className:tn.avatar},ye.author.username))),title:o.createElement(D.Z,Object.assign({},!ye.author.deleted&&{to:ge.url(vt.USER_PROFILE_ROUTE_NAME,ye.author)},{onClick:ye.author.deleted?()=>Se(!0):null,className:tn.username}),ye.author.username),subheader:o.createElement(o.Fragment,null,o.createElement(D.Z,{to:ge.url((0,B.Ig)(ye),(0,B.p3)(ye)),className:tn.activityAt},o.createElement(v.Z,{component:"span",date:ye.added_at})),ye.location&&o.createElement(o.Fragment,null,o.createElement(E.Z,null),o.createElement(c.Z,{className:tn.location},o.createElement(x.Z,null,"add_location_alt"),null===(t=ye.location)||void 0===t?void 0:t.location)),o.createElement(E.Z,null),o.createElement(c.Z,{className:tn.tag},ye.addressing.length>0?o.createElement(y.Z,{tags:ye.addressing,TagChipProps:{disposable:!1,clickable:!1}}):ye.group?o.createElement(p.Z,{title:`${ze.formatMessage(en.visibleToGroup,{group:ye.group.name})}`},o.createElement(x.Z,{color:"disabled",fontSize:"small"},"groups")):o.createElement(p.Z,{title:`${ze.formatMessage(en.visibleToAll)}`},o.createElement(x.Z,{color:"disabled",fontSize:"small"},"public")))),action:o.createElement(tt.Z,Object.assign({feedObject:ye,feedObjectType:w,onEditContribution:lt,onHideContribution:Je,onDeleteContribution:at,onRestoreContribution:Ke,onSuspendNotificationContribution:ot,onFlagContribution:qe},ae))}),o.createElement(l.Z,{classes:{root:tn.content}},o.createElement(c.Z,{className:tn.titleSection},"title"in ye&&o.createElement(o.Fragment,null,T===$.r.DETAIL?o.createElement(i.Z,{variant:"body1",gutterBottom:!0,className:tn.title},ye.title):o.createElement(D.Z,{to:ge.url((0,B.Ig)(ye),(0,B.p3)(ye))},o.createElement(i.Z,{variant:"body1",gutterBottom:!0,className:tn.title},ye.title)))),o.createElement(c.Z,{className:tn.textSection},bt(ye,T)),o.createElement(c.Z,{className:tn.mediasSection},o.createElement(Qt,Object.assign({medias:ye.medias},oe))),o.createElement(c.Z,{className:tn.pollsSection},ye.poll&&o.createElement($e,Object.assign({visible:z||T===$.r.DETAIL||Boolean(ye.type!==R.q.DISCUSSION&&!ye.html&&!ye.medias.length),feedObject:ye,pollObject:ye.poll,onChange:We,onToggleVisibility:Ye},le))),o.createElement(c.Z,{className:tn.infoSection},o.createElement(g.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2},!V&&o.createElement(Qe,Object.assign({feedObject:ye,feedObjectType:ye.type},ie,{cacheStrategy:_})),!A&&o.createElement(rt,Object.assign({feedObject:ye,feedObjectType:ye.type,handleFollow:mt},H))))),o.createElement(f.Z,{className:tn.actionsSection},o.createElement(_e,Object.assign({feedObjectId:C,feedObjectType:w,feedObject:ye,hideCommentAction:T===$.r.DETAIL,handleExpandActivities:T===$.r.PREVIEW?dt:null,VoteActionProps:{onVoteAction:ut}},Y)),(T===$.r.DETAIL||Ae)&&o.createElement(c.Z,{className:tn.replyContent},o.createElement(X,Object.assign({id:`reply-feedObject-${ye.id}`,onReply:ht,editable:!Ie||Boolean(ye),key:Number(Ie)},ee)))),T===$.r.PREVIEW&&(ye.comment_count>0||S&&S.length>0)&&o.createElement(h.Z,{in:Ae,timeout:"auto",classes:{root:tn.activitiesSection}},o.createElement(l.Z,{className:tn.activitiesContent},o.createElement(Vt,Object.assign({feedObject:ye,key:Re,feedObjectActivities:S,activitiesType:Re,onSetSelectedActivities:gt,comments:xe,CommentsObjectProps:{CommentComponentProps:Object.assign({onDelete:pt,truncateContent:!0,CommentsObjectComponentProps:{inPlaceLoadMoreContents:!1}},te),CommentObjectSkeletonProps:ne},cacheStrategy:_},re)))),ke&&o.createElement(Oe.Z,{open:ke,feedObject:ye,onClose:lt,onSuccess:ct,maxWidth:"sm",fullWidth:!0})):o.createElement(b.Z,Object.assign({template:T},W))):T===$.r.SHARE?o.createElement(o.Fragment,null,ye?o.createElement(o.Fragment,null,ye.categories.length>0&&o.createElement("div",{className:tn.category},o.createElement(o.Fragment,null,ye.group&&o.createElement("div",{className:tn.group},o.createElement(u.Z,{color:"secondary",size:"small",key:ye.group.id,icon:o.createElement(x.Z,null,"groups"),component:D.Z,to:ge.url(vt.GROUP_ROUTE_NAME,ye.group),clickable:!0}))),ye.categories.map((e=>o.createElement(D.Z,{to:ge.url(vt.CATEGORY_ROUTE_NAME,e),key:e.id},o.createElement(i.Z,{variant:"overline"},e.name))))),ye.group&&!ye.categories.length&&o.createElement("div",{className:tn.group},o.createElement(u.Z,{color:"secondary",size:"small",key:ye.group.id,icon:o.createElement(x.Z,null,"groups"),label:ye.group.name,component:D.Z,to:ge.url(vt.GROUP_ROUTE_NAME,ye.group),clickable:!0})),o.createElement(d.Z,{classes:{root:tn.header},avatar:o.createElement(D.Z,Object.assign({},!ye.author.deleted&&{to:ge.url(vt.USER_PROFILE_ROUTE_NAME,ye.author)},{onClick:ye.author.deleted?()=>Se(!0):null,className:tn.username}),o.createElement(Gt.Z,{hide:!ye.author.community_badge},o.createElement(m.Z,{"aria-label":"recipe",src:ye.author.avatar,className:tn.avatar},ye.author.username))),title:o.createElement(D.Z,Object.assign({},!ye.author.deleted&&{to:ge.url(vt.USER_PROFILE_ROUTE_NAME,ye.author)},{onClick:ye.author.deleted?()=>Se(!0):null,className:tn.username}),ye.author.username),subheader:o.createElement(D.Z,{to:ge.url((0,B.Ig)(ye),(0,B.p3)(ye)),className:tn.activityAt},o.createElement(v.Z,{date:ye.added_at}))}),o.createElement(l.Z,{classes:{root:tn.content}},o.createElement(c.Z,{className:tn.titleSection},"title"in ye&&o.createElement(D.Z,{to:ge.url((0,B.Ig)(ye),(0,B.p3)(ye))},o.createElement(i.Z,{variant:"body1",gutterBottom:!0,className:tn.title},ye.title))),o.createElement(c.Z,{className:tn.textSection},bt(ye,T)),o.createElement(c.Z,{className:tn.mediasSection},o.createElement(Qt,Object.assign({medias:ye.medias},oe))),o.createElement(c.Z,{className:tn.pollsSection},ye.poll&&o.createElement($e,Object.assign({feedObject:ye,pollObject:ye.poll,onChange:We,visible:Boolean(ye.type!==R.q.DISCUSSION&&!ye.html&&!ye.medias.length)},le))))):o.createElement(b.Z,Object.assign({template:T},W))):o.createElement(o.Fragment,null,ye?o.createElement(st.Z,{elevation:0,className:tn.snippet,image:o.createElement(D.Z,Object.assign({},!ye.author.deleted&&{to:ge.url(vt.USER_PROFILE_ROUTE_NAME,ye.author)},{onClick:ye.author.deleted?()=>Se(!0):null}),o.createElement(Gt.Z,{hide:!ye.author.community_badge},o.createElement(m.Z,{alt:ye.author.username,variant:"circular",src:ye.author.avatar,className:tn.avatar}))),primary:o.createElement(c.Z,null,o.createElement(D.Z,Object.assign({},!ye.author.deleted&&{to:ge.url(vt.USER_PROFILE_ROUTE_NAME,ye.author)},{onClick:ye.author.deleted?()=>Se(!0):null,className:tn.username}),ye.author.username),o.createElement(i.Z,{variant:"body2",className:tn.snippetContent},o.createElement(D.Z,{to:ge.url((0,B.Ig)(ye),(0,B.p3)(ye))},(0,B.cO)(ye)))),disableTypography:!0,secondary:o.createElement(g.Z,{direction:"row",justifyContent:"space-between",spacing:2,alignItems:"center"},o.createElement(D.Z,{to:ge.url((0,B.Ig)(ye),(0,B.p3)(ye)),className:tn.activityAt},o.createElement(v.Z,{component:"span",date:ye.added_at})),o.createElement(s.Z,{component:D.Z,to:ge.url((0,B.Ig)(ye),(0,B.p3)(ye)),variant:"text",color:"secondary",size:"small"},o.createElement(G.Z,{id:"ui.feedObject.comment",defaultMessage:"ui.feedObject.comment"})))}):o.createElement(b.Z,Object.assign({},W))),o.createElement(o.Fragment,null,o.createElement(nn,Object.assign({id:r,className:j()(tn.root,O,`${N.B}-${T}`)},de),ye&&k&&o.createElement(et.Z,{endpoint:q.Z.FeedObjectMarkRead,data:{object:[ye.id]}}),yt),we&&o.createElement(Et.Z,{open:we,handleClose:()=>Se(!1)}))}},88304:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var a=n(97582),o=n(67294),r=n(44012),l=n(77931),i=n(98456),s=n(45185),c=n(24243),u=n(24085),d=n(90948),m=n(23370),p=n.n(m),g=n(11447),f=n.n(g),h=n(29628);const b="SCLocationAutocomplete",v={root:`${b}-root`},E=(0,d.ZP)(s.Z,{name:b,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({minWidth:120})));const y=function(e){const t=(0,h.Z)({props:e,name:b}),{defaultValue:n=null,disabled:s=!1,onChange:d,TextFieldProps:m={variant:"outlined",label:o.createElement(r.Z,{id:"ui.locationAutocomplete.label",defaultMessage:"ui.composer.locations.label"})}}=t,g=(0,a._T)(t,["defaultValue","disabled","onChange","TextFieldProps"]),[y,O]=(0,o.useState)(!1),[C,Z]=(0,o.useState)([]),[j,w]=(0,o.useState)(n),[S,N]=(0,o.useState)("");(0,o.useEffect)((()=>{!y&&S.trim().length>0&&((e=0,t=20)=>{c.Z.request({url:u.Z.ComposerLocalitySearch.url(),method:u.Z.ComposerLocalitySearch.method,params:{offset:e,limit:t,search:S.trim()}}).then((e=>{Z(e.data.results)})).then((()=>O(!1)))})()}),[S]),(0,o.useEffect)((()=>{j&&d&&d(j)}),[j]);const _=(0,o.useMemo)((()=>!j||"string"==typeof j||C.find((e=>j.lat===e.lat&&j.lng===e.lng))?C:[...C,{lat:j.lat,lng:j.lng,full_address:j.location}]),[j,C]);return o.createElement(E,Object.assign({className:v.root,options:_||[],getOptionLabel:e=>(null==e?void 0:e.full_address)||(null==e?void 0:e.location)||"",filterOptions:e=>e,autoComplete:!0,includeInputInList:!0,value:j||null,selectOnFocus:!0,handleHomeEndKeys:!0,disabled:s,noOptionsText:o.createElement(r.Z,{id:"ui.locationAutocomplete.empty",defaultMessage:"ui.locationAutocomplete.empty"}),onChange:(e,t)=>{w(t?{location:t.full_address,lat:t.lat,lng:t.lng}:null),d&&d(t)},onInputChange:(e,t)=>{N(t)},isOptionEqualToValue:(e,t)=>t.lat===e.lat&&t.lng===e.lng,renderInput:e=>o.createElement(l.Z,Object.assign({},e,m,{margin:"dense",InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"location",endAdornment:o.createElement(o.Fragment,null,y?o.createElement(i.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})})),renderOption:(e,t,{inputValue:n})=>{const a=f()(t.full_address,n),r=p()(t.full_address,a);return o.createElement("li",Object.assign({key:`${t.lat}_${t.lng}`},e,{style:{whiteSpace:"break-spaces"}}),r.map(((e,t)=>e.highlight?o.createElement("span",{key:t,style:{fontWeight:700}},e.text):e.text)))}},g))}},59107:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var a=n(97582),o=n(67294),r=n(90948),l=n(51107),i=n(2734),s=n(87952),c=n(88078);const u="SCAvatarGroupSkeleton",d={root:`${u}-root`},m=(0,r.ZP)(l.Z,{name:u,slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({})));function p(e){const{count:t=2}=e,n=(0,a._T)(e,["count"]),r=(0,i.Z)();return o.createElement(m,Object.assign({className:d.root},n),[...Array(t+1)].map(((e,t)=>o.createElement(s.Z,{key:t},o.createElement(c.Z,{variant:"circular",width:r.selfcommunity.user.avatar.sizeSmall,height:r.selfcommunity.user.avatar.sizeSmall})))))}},55218:(e,t,n)=>{"use strict";n.d(t,{EH:()=>a,qZ:()=>o,zo:()=>r});const a="widget_",o=10,r=150},75256:(e,t,n)=>{"use strict";n.d(t,{Fs:()=>a,Qo:()=>o});const a=[600,600],o=[200,200]},57250:(e,t,n)=>{"use strict";n.d(t,{LP:()=>s,MR:()=>a,Rj:()=>l,TC:()=>i,iC:()=>o,oP:()=>r});const a="image",o="video",r="doc",l="url",i="share",s="sc_link"},37991:(e,t,n)=>{"use strict";n.d(t,{jm:()=>a,nm:()=>r,np:()=>o});const a="https://www.facebook.com/sharer.php?u=",o="https://twitter.com/intent/tweet?url=",r="https://www.linkedin.com/sharing/share-offsite/?url="},63219:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var a=n(67294),o=n(24243),r=n(1216),l=n(75256);const i=e=>{const{endpoint:t,params:n={},callback:r,data:l=null}=e,i=()=>{o.Z.request({url:t.url(n),method:t.method,data:l}).then((e=>{r&&r(e)})).catch((()=>null))};return(0,a.useEffect)((()=>{let e;if(t)return e=setTimeout(i),()=>{e&&clearTimeout(e)}}),[]),null},s=e=>a.createElement(r.ZP,{once:!0,offset:l.Qo},a.createElement(i,Object.assign({},e)))},22461:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ee});var a=n(67294),o=n(90948),r=n(97582),l=n(60773);const i="SCMediaFile";var s=n(57250),c=n(93946),u=n(97265),d=n(67564);const m={root:`${i}-lightbox-root`},p=(0,o.ZP)(l.Z,{name:i,slot:"LightboxRoot"})((()=>({})));function g(e){const{medias:t=[],index:n=0,onClose:o,onIndexChange:l}=e,i=(0,r._T)(e,["medias","index","onClose","onIndexChange"]),g=(0,a.useCallback)(((e,t)=>({src:e.image,width:e.image_width,height:e.image_height,key:t})),[]),f=(0,a.useCallback)((e=>t[e.index].type===s.oP?a.createElement(c.Z,{component:u.Z,to:t[e.index].url,target:"_blank",color:"inherit"},a.createElement(d.Z,null,"download")):a.createElement(a.Fragment,null)),[t]);return a.createElement(p,Object.assign({},i,{className:m.root,images:t.map(g),visible:-1!==n,onClose:o,index:n,onIndexChange:l,toolbarRender:f}))}var f=n(5616),h=n(15861),b=n(86886),v=n(94184),E=n.n(v),y=n(97650);const O=e=>e.type===s.MR||e.type===s.oP,C={displayRoot:`${i}-display-root`,background:`${i}-background`,backgroundPortrait:`${i}-background-portrait`,heightOne:`${i}-height-one`,heightHalfOne:`${i}-height-half-one`,heightTwo:`${i}-height-two`,heightThree:`${i}-height-three`,cover:`${i}-cover`,coverText:`${i}-cover-text`,slide:`${i}-slide`,border:`${i}-border`,gallery:`${i}-gallery`,title:`${i}-title`,iconFile:`${i}-icon-file`},Z=(0,o.ZP)(f.Z,{name:i,slot:"DisplayRoot"})((({theme:e})=>({})));var j=n(39005),w=n(25464),S=n(98619),N=n(18972),_=n(2734),k=n(61730),T=n(97212),A=n(98456),P=n(78462),x=n(53704),M=n(44012),I=n(63862),D=n(41567),R=n(24085),$=n(99626);const B=(e,t)=>{const n=(n,o)=>{const{showFileUpload:l,getInternalFileInput:i}=(0,$.uO)(),{id:s,className:c,text:u,children:d,extraProps:m,onClick:p}=n,g=(0,r._T)(n,["id","className","text","children","extraProps","onClick"]),f=(0,a.useRef)();f.current=g;const h=(0,a.useCallback)((e=>{const n=i();n.current.accept=t.accept,t.capture?n.current.capture=t.capture:n.current.removeAttribute("capture"),l(f.current),null==p||p(e)}),[i,l,f,p]);return a.createElement(e,Object.assign({ref:o,onClick:h,id:s,className:c,children:d||u||"Upload"},m))};return(0,$.zD)(n),(0,a.forwardRef)(n)};var L=n(20377);const F={triggerRoot:`${i}-trigger-root`,triggerDrawerRoot:`${i}-trigger-drawer-root`,triggerMenuRoot:`${i}-trigger-menu-root`,paper:`${i}-paper`,item:`${i}-item`},U=(0,o.ZP)(c.Z,{name:i,slot:"TriggerRoot"})((()=>({}))),V=(0,o.ZP)(j.Z,{name:i,slot:"TriggerDrawerRoot"})((()=>({}))),z=(0,o.ZP)(w.Z,{name:i,slot:"TriggerMenuRoot"})((()=>({}))),G=B((0,a.forwardRef)(((e,t)=>a.createElement(S.Z,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:"image/*",capture:"camera"}),H=B((0,a.forwardRef)(((e,t)=>a.createElement(S.Z,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:"image/*"}),W=B((0,a.forwardRef)(((e,t)=>a.createElement(S.Z,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:"application/pdf"}),Y=B((0,a.forwardRef)(((e,t)=>a.createElement(N.Z,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:"image/*"}),X=B((0,a.forwardRef)(((e,t)=>a.createElement(N.Z,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:"application/pdf"});var q=n(16941);const K={previewRoot:`${i}-preview-root`,media:`${i}-media`,delete:`${i}-delete`,title:`${i}-title`},J=(0,o.ZP)(f.Z,{name:i,slot:"PreviewRoot"})((()=>({}))),Q="file_sort",ee={name:"file",displayComponent:e=>{const{className:t="",medias:n=[],maxVisible:o=5,gallery:r=!0,onMediaClick:l=null}=e,[i,s]=(0,a.useState)(-1),{ref:c,inView:u}=(0,y.YD)({triggerOnce:!1}),m=(0,a.useMemo)((()=>n.filter(O)),[n]),p=(e,t=!1)=>{if("object"==typeof e){const n=e.image_thumbnail?e.image_thumbnail.url:e.image?e.image:"/static/frontend_v2/images/image.svg";return t&&e.image?e.image:n}return e},f=(0,a.useCallback)((e=>{!1!==r&&(s(e),l(m[e]))}),[m]),v=e=>{if(!e)return null;let t=null;if(e.type)if("doc"===e.type)t=a.createElement(d.Z,{className:C.iconFile},"picture_as_pdf");else t=a.createElement(d.Z,{className:C.iconFile},"insert_drive_file");return a.createElement(a.Fragment,null,e.title&&a.createElement("div",{className:C.title},a.createElement(h.Z,{variant:"subtitle2"},t," ",e.title)))},j=e=>r?[a.createElement("div",{key:`cover-${e}`,className:E()(C.cover,C.slide)}),a.createElement("div",{key:`cover-text-${e}`,className:E()(C.coverText,C.slide,"animate-text"),style:{fontSize:"100%"}},a.createElement(d.Z,null,"zoom_out_map"))]:null,w=e=>{const t=m.length-(o&&o>5?5:o);return[e&&a.createElement("div",{key:"count",className:C.cover}),e&&a.createElement("div",{key:"count-sub",className:C.coverText,style:{fontSize:"200%"}},a.createElement("p",null,"+",t))]},S=[...m];return o&&m.length>o&&(S.length=o),0===m.length?null:a.createElement(Z,{className:E()(C.displayRoot,t)},[1,3,4].includes(S.length)&&(()=>{const e=m.length>o&&1==o?w(!0):j(0),t=!!m[0].image_mimetype&&m[0].image_mimetype.includes("image/gif"),n=m[0].image_height<m[0].image_width;return a.createElement(b.ZP,{container:!0,style:Object.assign({},m[0].image_thumbnail&&m[0].image_thumbnail.color?{backgroundColor:m[0].image_thumbnail.color}:{})},a.createElement(b.ZP,{item:!0,ref:c,xs:12,classes:{root:E()(C.border,C.heightOne,Object.assign(Object.assign({},t||n?{[C.background]:!0}:{[C.backgroundPortrait]:!0}),{[C.gallery]:r,[C.heightHalfOne]:m.length>1}))},onClick:()=>f(0),style:Object.assign({background:`url(${p(m[0],u&&t)})`},n?{paddingTop:100*m[0].image_height/m[0].image_width+"%"}:{})},e,v(m[0])))})(),S.length>=2&&4!=S.length&&(()=>{const e=m.length>o&&[2,3].includes(+o)?w(!0):j(1),t=[3,4].includes(m.length)||m.length>+o&&[3,4].includes(+o);return a.createElement(b.ZP,{container:!0},a.createElement(b.ZP,{item:!0,xs:6,classes:{root:E()(C.border,C.heightTwo,C.background,{[C.gallery]:r})},onClick:()=>f(t?1:0),style:{background:`url(${p(t?m[1]:m[0])})`}},j(t?1:0),v(m[0])),a.createElement(b.ZP,{item:!0,xs:6,classes:{root:E()(C.border,C.heightTwo,C.background,{[C.gallery]:r})},onClick:()=>f(t?2:1),style:{background:`url(${p(t?m[2]:m[1])})`}},e,v(m[1])))})(),S.length>=4&&(()=>{const e=4==m.length||m.length>+o&&4==+o,t=!o||o>5||m.length>o&&[4,5].includes(+o)?w(!0):j(e?3:4);return a.createElement(b.ZP,{container:!0},a.createElement(b.ZP,{item:!0,xs:4,md:4,classes:{root:E()(C.border,C.heightThree,C.background,{[C.gallery]:r})},onClick:()=>f(e?1:2),style:{background:`url(${p(e?m[1]:m[2])})`}},j(e?1:2),v(m[1])),a.createElement(b.ZP,{item:!0,xs:4,md:4,classes:{root:E()(C.border,C.heightThree,C.background,{[C.gallery]:r})},onClick:()=>f(e?2:3),style:{background:`url(${p(e?m[2]:m[3])})`}},j(e?2:3),v(m[2])),a.createElement(b.ZP,{item:!0,xs:4,md:4,classes:{root:E()(C.border,C.heightThree,C.background,{[C.gallery]:r})},onClick:()=>f(e?3:4),style:{background:`url(${p(e?m[3]:m[4])})`}},t,v(m[3])))})(),-1!==i&&a.createElement(g,{onClose:()=>{s(-1)},index:i,medias:m}))},triggerButton:e=>{var{className:t,onAdd:n=null}=e,o=(0,r._T)(e,["className","onAdd"]);const[l,i]=(0,a.useState)(null),[s,c]=(0,a.useState)(!1),u=(0,x.RM)(),m=(0,_.Z)(),p=(0,k.Z)(m.breakpoints.down("md")),{enqueueSnackbar:g,closeSnackbar:f}=(0,L.Ds)(),h=(0,a.useCallback)((e=>{i(e.currentTarget)}),[]),b=(0,a.useCallback)((()=>{i(null)}),[]),v=(0,a.useCallback)((e=>e.type.startsWith("image/")||"application/pdf"===e.type),[]),y=(0,a.useCallback)((e=>{n&&n(e)}),[n]),O=(0,a.useCallback)((e=>{c(Object.keys(e).length>0)}),[]),C=(0,a.useCallback)(((e,t)=>{const n=g(`${e.name}: ${t}`,{variant:"error",anchorOrigin:{horizontal:"center",vertical:"top"},autoHideDuration:2e3,SnackbarProps:{onClick:()=>{f(n)}}})}),[g]),Z=(0,a.useMemo)((()=>p?[a.createElement(T.ZP,{className:F.item,key:"photo"},a.createElement(G,{inputFieldName:"image"},a.createElement(M.Z,{id:"ui.composer.media.file.photo",defaultMessage:"ui.composer.media.file.photo"}))),a.createElement(T.ZP,{className:F.item,key:"gallery"},a.createElement(H,{inputFieldName:"image"},a.createElement(M.Z,{id:"ui.composer.media.file.gallery",defaultMessage:"ui.composer.media.file.gallery"}))),a.createElement(T.ZP,{className:F.item,key:"document"},a.createElement(W,{inputFieldName:"document"},a.createElement(M.Z,{id:"ui.composer.media.file.document",defaultMessage:"ui.composer.media.file.document"})))]:[a.createElement(Y,{extraProps:{className:F.item},inputFieldName:"image",key:"gallery"},a.createElement(M.Z,{id:"ui.composer.media.file.gallery",defaultMessage:"ui.composer.media.file.gallery"})),a.createElement(X,{extraProps:{className:F.item},key:"document",inputFieldName:"document"},a.createElement(M.Z,{id:"ui.composer.media.file.document",defaultMessage:"ui.composer.media.file.document"}))]),[p,v,y,O,C]);return a.createElement(D.ZP,{destination:{url:`${u.settings.portal}${R.Z.ComposerChunkUploadMedia.url()}`,method:R.Z.ComposerChunkUploadMedia.method},fileFilter:v,chunkSize:204800,multiple:!0},a.createElement(I.Z,{onSuccess:y,onProgress:O,onError:C}),a.createElement(U,Object.assign({className:E()(t,F.triggerRoot)},o,{"aria-label":"add media",disabled:s,onClick:h}),s?a.createElement(A.Z,{size:20}):a.createElement(d.Z,null,"photo_file")),p?a.createElement(V,{onClick:()=>i(null),className:F.triggerDrawerRoot,anchor:"bottom",open:Boolean(l),onClose:b,onOpen:h,PaperProps:{className:F.paper},disableSwipeToOpen:!0},a.createElement(P.Z,null,Z)):a.createElement(z,{onClick:()=>i(null),className:F.triggerMenuRoot,anchorEl:l,open:Boolean(l),onClose:b,PaperProps:{className:F.paper}},Z))},layerComponent:null,previewComponent:a.forwardRef(((e,t)=>{const{className:n,onChange:o,value:l=[]}=e,i=(0,r._T)(e,["className","onChange","value"]),u=(0,_.Z)(),m=(0,k.Z)(u.breakpoints.down("md")),p=(0,a.useMemo)((()=>l.filter(O)),[l]);(0,a.useEffect)((()=>{if(void 0===typeof document)return null;const e=document.getElementById(Q);e&&(e.scrollLeft=e.scrollWidth)}),[p]);const g=(0,a.useCallback)((e=>{o&&o([...l.filter((t=>-1===e.findIndex((e=>e.id===t.id)))),...e])}),[o,l]),b=(0,a.useCallback)((e=>()=>o&&o(l.filter((t=>t.id!==e)))),[o,l]),v=(0,a.useMemo)((()=>p.map((e=>a.createElement(f.Z,{key:e.id,className:K.media,sx:{backgroundImage:`url(${(null==e?void 0:e.image_thumbnail)?e.image_thumbnail.url:e.image})`}},a.createElement(c.Z,{className:K.delete,onClick:b(e.id),size:"small"},a.createElement(d.Z,null,"delete")),e.title&&a.createElement(h.Z,{className:K.title},e.type===s.oP&&a.createElement(d.Z,null,"picture_as_pdf"),e.title))))),[p]);return a.createElement(J,Object.assign({ref:t,className:E()(n,K.previewRoot)},i),p.length>0&&(m?a.createElement(f.Z,{id:Q},v):a.createElement(q.ReactSortable,{id:Q,list:p,setList:g},v)))})),filter:O}},70815:(e,t,n)=>{"use strict";n.d(t,{Z:()=>G});var a=n(97582),o=n(67294),r=n(90948),l=n(1216),i=n(57250),s=n(67742),c=n(5616),u=n(75256),d=n(88078),m=n(94184),p=n.n(m);const g="SCMediaLink",f=e=>e.type===i.Rj&&e.embed&&e.embed.embed_type===i.LP,h={displayRoot:`${g}-display-root`,displayLink:`${g}-link`,displayVideo:`${g}-video`,thumbnail:`${g}-thumbnail`,thumbnailFullWidth:`${g}-thumbnail`,image:`${g}-image`,snippet:`${g}-snippet`,snippetTitle:`${g}-snippet-title`,snippetDescription:`${g}-snippet-description`},b=(0,r.ZP)(c.Z,{name:g,slot:"DisplayRoot"})((({theme:e})=>({}))),v=e=>{const{className:t="",medias:n,fullWidth:r=!1,onMediaClick:m=null}=e,g=(0,a._T)(e,["className","medias","fullWidth","onMediaClick"]),v=e=>{m&&m(e)},E=(0,o.useMemo)((()=>n.filter(f)),[n]);return 0===E.length?null:o.createElement(b,Object.assign({className:p()(t,h.displayRoot)},g),E.map(((e,t)=>e.embed.metadata&&e.embed.metadata.type===i.iC?o.createElement(l.ZP,{className:h.displayVideo,placeholder:o.createElement(d.Z,{variant:"rectangular",height:360,width:"100%"}),key:t,once:!0,offset:u.Fs},o.createElement(s.Z,{url:e.url,width:"100%",key:t,onVideoWatch:()=>v(e)})):o.createElement(o.Fragment,{key:t},((e,t)=>{const n=new URL(e.embed.metadata.url).hostname.replace("www.","");return o.createElement(c.Z,{className:h.displayLink,key:t},e.embed.metadata.images&&e.embed.metadata.images.length>0&&o.createElement(o.Fragment,null,r?o.createElement(c.Z,{className:p()(h.thumbnailFullWidth,h.image),style:{background:`url(${e.image})`,paddingBottom:100/e.image_width/e.image_height+"%"}}):o.createElement(c.Z,{className:p()(h.thumbnail,h.image),style:{background:`url(${e.image})`}})),o.createElement(c.Z,{className:h.snippet},o.createElement("b",{className:h.snippetTitle},e.embed.metadata.title),o.createElement("br",null),o.createElement("p",{className:h.snippetDescription},e.embed.metadata.description),o.createElement("a",{href:e.embed.metadata.url,target:"_blank",onClick:()=>v(e)},n)),o.createElement("div",{style:{clear:"both"}}))})(e,t)))))};var E=n(93946),y=n(67564);const O={triggerRoot:`${g}-trigger-root`},C=(0,r.ZP)(E.Z,{name:g,slot:"TriggerRoot"})((()=>({})));var Z=n(44012),j=n(37645),w=n(15861),S=n(25662),N=n(6514),_=n(16941);const k={previewRoot:`${g}-preview-root`,media:`${g}-media`,video:`${g}-media-video`,delete:`${g}-delete`},T=(0,r.ZP)(c.Z,{name:g,slot:"PreviewRoot"})((()=>({}))),A=o.forwardRef(((e,t)=>{const{className:n,onChange:r,value:l=[]}=e,s=(0,a._T)(e,["className","onChange","value"]),u=(0,o.useMemo)((()=>l.filter(f)),[l]),d=(0,o.useCallback)((e=>{r&&r([...l.filter((t=>-1===e.findIndex((e=>e.id===t.id)))),...e])}),[r,l]),m=(0,o.useCallback)((e=>()=>r&&r(l.filter((t=>t.id!==e)))),[r,l]);return o.createElement(T,Object.assign({ref:t,className:p()(n,k.previewRoot)},s),u.length>0&&o.createElement(_.ReactSortable,{list:u,setList:d},u.map((e=>o.createElement(c.Z,{key:e.id,className:p()(k.media,{[k.video]:e.embed.metadata&&e.embed.metadata.type===i.iC})},o.createElement(v,{medias:[e]}),o.createElement(E.Z,{className:k.delete,onClick:m(e.id),size:"small"},o.createElement(y.Z,null,"delete")))))))}));var P=n(87109),x=n(77931),M=n(24243),I=n(24085),D=n(59488),R=n(79991),$=n(16628),B=n(98456);const L={url:"",urlError:null},F=e=>{const[t,n]=(0,o.useState)(!1),[r,l]=(0,o.useState)(Object.assign({},L)),{url:s,urlError:c}=r,u=o.useRef(s);u.current=s;const d=o.useRef(null),{helperText:m,error:p,onSuccess:g}=e,f=(0,a._T)(e,["helperText","error","onSuccess"]);(0,o.useEffect)((()=>()=>clearTimeout(d.current)),[]);const h=e=>{e&&(e.preventDefault(),e.stopPropagation()),d.current&&clearTimeout(d.current),n(!0),M.Z.request({url:I.Z.ComposerMediaCreate.url(),method:I.Z.ComposerMediaCreate.method,data:{type:i.Rj,url:u.current}}).then((e=>{l(Object.assign({},L)),g&&g(e.data)})).catch((e=>{const t=(0,D.yt)(e);l({urlError:t.urlError?`urlError.${t.urlError.error}`:t.error,url:u.current})})).then((()=>n(!1)))};return o.createElement("form",{method:"post",onSubmit:h},o.createElement(x.Z,Object.assign({value:s,type:"url",onChange:e=>{const t=e.target,n=t.value.startsWith("h")?t.value:`https://${t.value}`;l({url:n,urlError:(0,R.jv)(n)?null:"validationError"})},onPaste:e=>{d.current&&clearTimeout(d.current),d.current=setTimeout((()=>{(0,R.jv)(u.current)&&h(e)}),500)},error:p||Boolean(c),helperText:m||c&&o.createElement(Z.Z,{id:`ui.composer.media.link.add.error.${c}`,defaultMessage:`ui.composer.media.link.add.error.${c}`})||o.createElement(Z.Z,{id:"ui.composer.media.link.add.help",defaultMessage:"ui.composer.media.link.add.help"}),disabled:t},f,{InputProps:{endAdornment:o.createElement(P.Z,{position:"end"},o.createElement($.Z,{in:null===c&&""!==s},o.createElement(E.Z,{size:"small",disabled:t,type:"submit"},t?o.createElement(B.Z,{color:"primary",size:20}):o.createElement(Z.Z,{id:"ui.composer.media.link.add.submit",defaultMessage:"ui.composer.media.link.add.submit"}))))}})))},U={layerRoot:`${g}-layer-root`,title:`${g}-layer-title`,content:`${g}-layer-content`,media:`${g}-media`,delete:`${g}-delete`},V=(0,r.ZP)(c.Z,{name:g,slot:"LayerRoot"})((()=>({}))),z=o.forwardRef(((e,t)=>{const{className:n,onClose:r,onSave:l,defaultValue:i=[]}=e,s=(0,a._T)(e,["className","onClose","onSave","defaultValue"]),[c,u]=(0,o.useState)(i),d=(0,o.useCallback)((()=>l(c)),[c]),m=(0,o.useCallback)((e=>u([...c,e])),[c]),g=(0,o.useCallback)((e=>u(e)),[]);return o.createElement(V,Object.assign({ref:t,className:p()(n,U.layerRoot)},s),o.createElement(j.Z,{className:U.title},o.createElement(E.Z,{onClick:r},o.createElement(y.Z,null,"arrow_back")),o.createElement(w.Z,null,o.createElement(Z.Z,{id:"ui.composer.media.link.layer.title",defaultMessage:"ui.composer.media.link.layer.title"})),o.createElement(S.Z,{size:"small",color:"secondary",variant:"contained",onClick:d},o.createElement(Z.Z,{id:"ui.composer.layer.save",defaultMessage:"ui.composer.layer.save"}))),o.createElement(N.Z,{className:U.content},o.createElement(F,{id:"page",name:"page",label:o.createElement(Z.Z,{id:"ui.composer.media.link.add.label",defaultMessage:"ui.composer.media.link.add.label"}),fullWidth:!0,variant:"outlined",placeholder:"https://",onSuccess:m}),o.createElement(A,{onChange:g,value:c})))})),G={name:"link",displayComponent:v,triggerButton:e=>{var{className:t}=e,n=(0,a._T)(e,["className"]);return o.createElement(C,Object.assign({className:p()(t,O.triggerRoot)},n,{"aria-label":"add link"}),o.createElement(y.Z,null,"link"))},layerComponent:z,previewComponent:A,filter:f}},26474:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var a=n(97582),o=n(67294),r=n(90948),l=n(5616),i=n(38509),s=n(37024),c=n(59219),u=n(94184),d=n.n(u),m=n(57250);const p=e=>e.type===m.TC,g="SCMediaShare",f={displayRoot:`${g}-display-root`,sharePreview:`${g}-share-preview`,sharePlaceholder:`${g}-share-placeholder`},h=(0,r.ZP)(l.Z,{name:g,slot:"DisplayRoot"})((({theme:e})=>({}))),b={name:"share",displayComponent:e=>{var{className:t,medias:n=[],onMediaClick:r=null}=e,u=(0,a._T)(e,["className","medias","onMediaClick"]);const m=(0,o.useMemo)((()=>n.filter(p)),[n]);return 0===m.length?null:o.createElement(h,Object.assign({className:d()(t,f.displayRoot)},u),m.map(((e,t)=>o.createElement(l.Z,{className:f.sharePreview,key:t,onClick:r},o.createElement(i.Z,{feedObjectId:e.embed.metadata.id,feedObjectType:e.embed.metadata.type,variant:"outlined",template:s.r.SHARE,cacheStrategy:c.n2.CACHE_FIRST})))))},triggerButton:null,layerComponent:null,previewComponent:null,filter:p}},8455:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var a=n(97582),o=n(67294),r=n(87918),l=n(94184),i=n.n(l),s=n(90948);const c="SCTagChip",u={ellipsis:`${c}-ellipsis`},d=(0,s.ZP)(r.Z,{name:c,slot:"Root",overridesResolver:(e,t)=>[t.root]})((({theme:e})=>({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",height:25,[`&.${u.ellipsis}`]:{maxWidth:120}})));function m(e){const{tag:t,clickable:n=!0,disposable:r=!0,label:l=null,ellipsis:s=!1,onClick:c=null,onDelete:m=null,className:p=null}=e,g=(0,a._T)(e,["tag","clickable","disposable","label","ellipsis","onClick","onDelete","className"]);return o.createElement(d,Object.assign({className:i()(p,{[u.ellipsis]:s}),sx:{backgroundColor:`${t.color}`,color:e=>e.palette.getContrastText(t.color)}},n&&{onClick:()=>{c&&c(t.id)}},r&&{onDelete:()=>{m&&m(t.id)}},{label:l||t.name},g))}},86558:(e,t,n)=>{"use strict";n.d(t,{Z:()=>j,x:()=>Z});var a=n(97582),o=n(67294),r=n(90948),l=n(23926),i=n(5616),s=n(68269),c=n(15861),u=n(67720),d=n(96514),m=n(90629),p=n(82123),g=n(67564),f=n(8455);const h="SCTags",b=(0,r.ZP)(i.Z,{name:`${h}`,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({cursor:"pointer"}))),v={paper:`${h}-paper`},E=(0,r.ZP)(p.Z,{name:`${h}Popper`,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({zIndex:2,[`& .${v.paper}`]:{padding:"10px 5px"}}))),y=(0,r.ZP)(s.Z,{name:`${h}List`,slot:"Root",overridesResolver:(e,t)=>t.root})({}),O=(0,r.ZP)(s.Z,{name:`${h}Stack`,slot:"Root",overridesResolver:(e,t)=>t.root})({flexWrap:"wrap",justifyContent:"flex-start",alignItems:"flex-start","& > div:not(style)+:not(style)":{margin:0}}),C=(0,r.ZP)(i.Z,{name:`${h}ItemList`,slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({padding:e.spacing(.2),textAlign:"center",color:e.palette.text.secondary})));var Z;function j(e){const{tags:t=[],title:n=null,type:r=Z.POPPER,onOpen:i=null,onClose:s=null,onClickTag:p=null,TagChipProps:h={}}=e,j=(0,a._T)(e,["tags","title","type","onOpen","onClose","onClickTag","TagChipProps"]),[w,S]=(0,o.useState)(!1);let N=(0,o.useRef)(null);function _(){N.current&&N.current.contains(event.target)||(S(!1),j.onClose&&j.onClose())}function k(){return o.createElement(o.Fragment,null,n&&o.createElement(o.Fragment,null,o.createElement(c.Z,{sx:{padding:1,fontWeight:600}},n),o.createElement(u.Z,null)))}const T=(0,o.useRef)(w);return o.useEffect((()=>{!0===T.current&&!1===w&&N.current.focus(),T.current=w}),[w]),o.createElement(o.Fragment,null,t.length&&o.createElement(o.Fragment,null,r===Z.POPPER?o.createElement(b,Object.assign({},j),o.createElement(g.Z,{ref:N,fontSize:"small",onClick:function(){S((e=>!e)),j.onOpen&&j.onOpen(!w)},"aria-haspopup":"true"},"label"),o.createElement(E,{open:w,anchorEl:N.current,transition:!0,placement:"bottom-start",modifiers:[{name:"preventOverflow",enabled:!0}]},(e=>{var{TransitionProps:n,placement:r}=e,i=(0,a._T)(e,["TransitionProps","placement"]);return o.createElement(d.Z,Object.assign({},n,{style:{transformOrigin:"bottom"===r?"center top":"center bottom"}}),o.createElement(m.Z,{variant:"outlined",className:v.paper},o.createElement(l.d,{onClickAway:_},o.createElement(o.Fragment,null,k(),o.createElement(O,Object.assign({spacing:2},i),t.map((e=>o.createElement(C,{key:e.id},o.createElement(f.Z,Object.assign({tag:e,onClick:p},h))))))))))}))):o.createElement(y,null,k(),o.createElement(O,{spacing:1,direction:j.direction?j.direction:"column"},t.map((e=>o.createElement(C,{key:e.id},o.createElement(f.Z,Object.assign({tag:e,onClick:p},h)))))))))}!function(e){e.LIST="list",e.POPPER="popper"}(Z||(Z={}))},37024:(e,t,n)=>{"use strict";var a,o;n.d(t,{F:()=>o,r:()=>a}),function(e){e.SNIPPET="snippet",e.PREVIEW="preview",e.DETAIL="detail",e.SEARCH="search",e.SHARE="share"}(a||(a={})),function(e){e.RELEVANCE_ACTIVITIES="relevant_activities",e.RECENT_COMMENTS="recent_comments",e.FIRST_COMMENTS="first_comments",e.CONNECTIONS_COMMENTS="connections_comments"}(o||(o={}))},11447:function(e){var t,n;e.exports=(t={772:(e,t,n)=>{const a=n(826).remove,o=/[.*+?^${}()|[\]\\]/g,r=/[a-z0-9_]/i,l=/\s+/;e.exports=function(e,t,n){var i,s;s={insideWords:!1,findAllOccurrences:!1,requireMatchAll:!1},i=(i=n)||{},Object.keys(i).forEach((e=>{s[e]=!!i[e]})),n=s;const c=Array.from(e).map((e=>a(e)));let u=c.join("");return(t=a(t)).trim().split(l).filter((e=>e.length>0)).reduce(((e,t)=>{const a=t.length,l=!n.insideWords&&r.test(t[0])?"\\b":"",i=new RegExp(l+t.replace(o,"\\$&"),"i");let s,d;if(s=i.exec(u),n.requireMatchAll&&null===s)return u="",[];for(;s;){d=s.index;const t=a-c.slice(d,d+a).join("").length,o=d-c.slice(0,d).join("").length,r=[d+o,d+a+o+t];if(r[0]!==r[1]&&e.push(r),u=u.slice(0,d)+new Array(a+1).join(" ")+u.slice(d+a),!n.findAllOccurrences)break;s=i.exec(u)}return e}),[]).sort(((e,t)=>e[0]-t[0]))}},826:e=>{var t={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\u1ea4":"A","\u1eae":"A","\u1eb2":"A","\u1eb4":"A","\u1eb6":"A","\xc6":"AE","\u1ea6":"A","\u1eb0":"A","\u0202":"A","\xc7":"C","\u1e08":"C","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\u1ebe":"E","\u1e16":"E","\u1ec0":"E","\u1e14":"E","\u1e1c":"E","\u0206":"E","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\u1e2e":"I","\u020a":"I","\xd0":"D","\xd1":"N","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\u1ed0":"O","\u1e4c":"O","\u1e52":"O","\u020e":"O","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xdd":"Y","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\u1ea5":"a","\u1eaf":"a","\u1eb3":"a","\u1eb5":"a","\u1eb7":"a","\xe6":"ae","\u1ea7":"a","\u1eb1":"a","\u0203":"a","\xe7":"c","\u1e09":"c","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\u1ebf":"e","\u1e17":"e","\u1ec1":"e","\u1e15":"e","\u1e1d":"e","\u0207":"e","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\u1e2f":"i","\u020b":"i","\xf0":"d","\xf1":"n","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\u1ed1":"o","\u1e4d":"o","\u1e53":"o","\u020f":"o","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xfd":"y","\xff":"y","\u0100":"A","\u0101":"a","\u0102":"A","\u0103":"a","\u0104":"A","\u0105":"a","\u0106":"C","\u0107":"c","\u0108":"C","\u0109":"c","\u010a":"C","\u010b":"c","\u010c":"C","\u010d":"c","C\u0306":"C","c\u0306":"c","\u010e":"D","\u010f":"d","\u0110":"D","\u0111":"d","\u0112":"E","\u0113":"e","\u0114":"E","\u0115":"e","\u0116":"E","\u0117":"e","\u0118":"E","\u0119":"e","\u011a":"E","\u011b":"e","\u011c":"G","\u01f4":"G","\u011d":"g","\u01f5":"g","\u011e":"G","\u011f":"g","\u0120":"G","\u0121":"g","\u0122":"G","\u0123":"g","\u0124":"H","\u0125":"h","\u0126":"H","\u0127":"h","\u1e2a":"H","\u1e2b":"h","\u0128":"I","\u0129":"i","\u012a":"I","\u012b":"i","\u012c":"I","\u012d":"i","\u012e":"I","\u012f":"i","\u0130":"I","\u0131":"i","\u0132":"IJ","\u0133":"ij","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u1e30":"K","\u1e31":"k","K\u0306":"K","k\u0306":"k","\u0139":"L","\u013a":"l","\u013b":"L","\u013c":"l","\u013d":"L","\u013e":"l","\u013f":"L","\u0140":"l","\u0141":"l","\u0142":"l","\u1e3e":"M","\u1e3f":"m","M\u0306":"M","m\u0306":"m","\u0143":"N","\u0144":"n","\u0145":"N","\u0146":"n","\u0147":"N","\u0148":"n","\u0149":"n","N\u0306":"N","n\u0306":"n","\u014c":"O","\u014d":"o","\u014e":"O","\u014f":"o","\u0150":"O","\u0151":"o","\u0152":"OE","\u0153":"oe","P\u0306":"P","p\u0306":"p","\u0154":"R","\u0155":"r","\u0156":"R","\u0157":"r","\u0158":"R","\u0159":"r","R\u0306":"R","r\u0306":"r","\u0212":"R","\u0213":"r","\u015a":"S","\u015b":"s","\u015c":"S","\u015d":"s","\u015e":"S","\u0218":"S","\u0219":"s","\u015f":"s","\u0160":"S","\u0161":"s","\u0162":"T","\u0163":"t","\u021b":"t","\u021a":"T","\u0164":"T","\u0165":"t","\u0166":"T","\u0167":"t","T\u0306":"T","t\u0306":"t","\u0168":"U","\u0169":"u","\u016a":"U","\u016b":"u","\u016c":"U","\u016d":"u","\u016e":"U","\u016f":"u","\u0170":"U","\u0171":"u","\u0172":"U","\u0173":"u","\u0216":"U","\u0217":"u","V\u0306":"V","v\u0306":"v","\u0174":"W","\u0175":"w","\u1e82":"W","\u1e83":"w","X\u0306":"X","x\u0306":"x","\u0176":"Y","\u0177":"y","\u0178":"Y","Y\u0306":"Y","y\u0306":"y","\u0179":"Z","\u017a":"z","\u017b":"Z","\u017c":"z","\u017d":"Z","\u017e":"z","\u017f":"s","\u0192":"f","\u01a0":"O","\u01a1":"o","\u01af":"U","\u01b0":"u","\u01cd":"A","\u01ce":"a","\u01cf":"I","\u01d0":"i","\u01d1":"O","\u01d2":"o","\u01d3":"U","\u01d4":"u","\u01d5":"U","\u01d6":"u","\u01d7":"U","\u01d8":"u","\u01d9":"U","\u01da":"u","\u01db":"U","\u01dc":"u","\u1ee8":"U","\u1ee9":"u","\u1e78":"U","\u1e79":"u","\u01fa":"A","\u01fb":"a","\u01fc":"AE","\u01fd":"ae","\u01fe":"O","\u01ff":"o","\xde":"TH","\xfe":"th","\u1e54":"P","\u1e55":"p","\u1e64":"S","\u1e65":"s","X\u0301":"X","x\u0301":"x","\u0403":"\u0413","\u0453":"\u0433","\u040c":"\u041a","\u045c":"\u043a","A\u030b":"A","a\u030b":"a","E\u030b":"E","e\u030b":"e","I\u030b":"I","i\u030b":"i","\u01f8":"N","\u01f9":"n","\u1ed2":"O","\u1ed3":"o","\u1e50":"O","\u1e51":"o","\u1eea":"U","\u1eeb":"u","\u1e80":"W","\u1e81":"w","\u1ef2":"Y","\u1ef3":"y","\u0200":"A","\u0201":"a","\u0204":"E","\u0205":"e","\u0208":"I","\u0209":"i","\u020c":"O","\u020d":"o","\u0210":"R","\u0211":"r","\u0214":"U","\u0215":"u","B\u030c":"B","b\u030c":"b","\u010c\u0323":"C","\u010d\u0323":"c","\xca\u030c":"E","\xea\u030c":"e","F\u030c":"F","f\u030c":"f","\u01e6":"G","\u01e7":"g","\u021e":"H","\u021f":"h","J\u030c":"J","\u01f0":"j","\u01e8":"K","\u01e9":"k","M\u030c":"M","m\u030c":"m","P\u030c":"P","p\u030c":"p","Q\u030c":"Q","q\u030c":"q","\u0158\u0329":"R","\u0159\u0329":"r","\u1e66":"S","\u1e67":"s","V\u030c":"V","v\u030c":"v","W\u030c":"W","w\u030c":"w","X\u030c":"X","x\u030c":"x","Y\u030c":"Y","y\u030c":"y","A\u0327":"A","a\u0327":"a","B\u0327":"B","b\u0327":"b","\u1e10":"D","\u1e11":"d","\u0228":"E","\u0229":"e","\u0190\u0327":"E","\u025b\u0327":"e","\u1e28":"H","\u1e29":"h","I\u0327":"I","i\u0327":"i","\u0197\u0327":"I","\u0268\u0327":"i","M\u0327":"M","m\u0327":"m","O\u0327":"O","o\u0327":"o","Q\u0327":"Q","q\u0327":"q","U\u0327":"U","u\u0327":"u","X\u0327":"X","x\u0327":"x","Z\u0327":"Z","z\u0327":"z"},n=Object.keys(t).join("|"),a=new RegExp(n,"g"),o=new RegExp(n,""),r=function(e){return e.replace(a,(function(e){return t[e]}))};e.exports=r,e.exports.has=function(e){return!!e.match(o)},e.exports.remove=r}},n={},function e(a){var o=n[a];if(void 0!==o)return o.exports;var r=n[a]={exports:{}};return t[a](r,r.exports,e),r.exports}(772))},23370:function(e){var t,n;e.exports=(t={705:e=>{e.exports=function(e,t){const n=[];return 0===t.length?n.push({text:e,highlight:!1}):t[0][0]>0&&n.push({text:e.slice(0,t[0][0]),highlight:!1}),t.forEach(((a,o)=>{const r=a[0],l=a[1];n.push({text:e.slice(r,l),highlight:!0}),o===t.length-1?l<e.length&&n.push({text:e.slice(l,e.length),highlight:!1}):l<t[o+1][0]&&n.push({text:e.slice(l,t[o+1][0]),highlight:!1})})),n}}},n={},function e(a){var o=n[a];if(void 0!==o)return o.exports;var r=n[a]={exports:{}};return t[a](r,r.exports,e),r.exports}(705))},1216:(e,t,n)=>{"use strict";var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(67294),r=d(o),l=d(n(45697)),i=n(54081),s=d(n(38315)),c=d(n(38282)),u=d(n(40821));function d(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=0,h=0,b=0,v=0,E="data-lazyload-listened",y=[],O=[],C=!1;try{var Z=Object.defineProperty({},"passive",{get:function(){C=!0}});window.addEventListener("test",null,Z)}catch(A){}var j=!!C&&{capture:!1,passive:!0},w=function(e){var t=e.ref;if(t instanceof HTMLElement){var n=(0,s.default)(t),a=e.props.overflow&&n!==t.ownerDocument&&n!==document&&n!==document.documentElement?function(e,t){var n=e.ref,a=void 0,o=void 0,r=void 0,l=void 0;try{var i=t.getBoundingClientRect();a=i.top,o=i.left,r=i.height,l=i.width}catch(A){a=f,o=h,r=v,l=b}var s=window.innerHeight||document.documentElement.clientHeight,c=window.innerWidth||document.documentElement.clientWidth,u=Math.max(a,0),d=Math.max(o,0),m=Math.min(s,a+r)-u,p=Math.min(c,o+l)-d,g=void 0,E=void 0,y=void 0,O=void 0;try{var C=n.getBoundingClientRect();g=C.top,E=C.left,y=C.height,O=C.width}catch(A){g=f,E=h,y=v,O=b}var Z=g-u,j=E-d,w=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return Z-w[0]<=m&&Z+y+w[1]>=0&&j-w[0]<=p&&j+O+w[1]>=0}(e,n):function(e){var t=e.ref;if(!(t.offsetWidth||t.offsetHeight||t.getClientRects().length))return!1;var n=void 0,a=void 0;try{var o=t.getBoundingClientRect();n=o.top,a=o.height}catch(A){n=f,a=v}var r=window.innerHeight||document.documentElement.clientHeight,l=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return n-l[0]<=r&&n+a+l[1]>=0}(e);a?e.visible||(e.props.once&&O.push(e),e.visible=!0,e.forceUpdate()):e.props.once&&e.visible||(e.visible=!1,e.props.unmountIfInvisible&&e.forceUpdate())}},S=function(){O.forEach((function(e){var t=y.indexOf(e);-1!==t&&y.splice(t,1)})),O=[]},N=function(){for(var e=0;e<y.length;++e){var t=y[e];w(t)}S()},_=void 0,k=null,T=function(e){function t(e){m(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.visible=!1,n.setRef=n.setRef.bind(n),n}return g(t,e),a(t,[{key:"componentDidMount",value:function(){var e=window,t=this.props.scrollContainer;t&&"string"==typeof t&&(e=e.document.querySelector(t));var n=void 0!==this.props.debounce&&"throttle"===_||"debounce"===_&&void 0===this.props.debounce;if(n&&((0,i.off)(e,"scroll",k,j),(0,i.off)(window,"resize",k,j),k=null),k||(void 0!==this.props.debounce?(k=(0,c.default)(N,"number"==typeof this.props.debounce?this.props.debounce:300),_="debounce"):void 0!==this.props.throttle?(k=(0,u.default)(N,"number"==typeof this.props.throttle?this.props.throttle:300),_="throttle"):k=N),this.props.overflow){var a=(0,s.default)(this.ref);if(a&&"function"==typeof a.getAttribute){var o=+a.getAttribute(E)+1;1===o&&a.addEventListener("scroll",k,j),a.setAttribute(E,o)}}else if(0===y.length||n){var r=this.props,l=r.scroll,d=r.resize;l&&(0,i.on)(e,"scroll",k,j),d&&(0,i.on)(window,"resize",k,j)}y.push(this),w(this)}},{key:"shouldComponentUpdate",value:function(){return this.visible}},{key:"componentWillUnmount",value:function(){if(this.props.overflow){var e=(0,s.default)(this.ref);if(e&&"function"==typeof e.getAttribute){var t=+e.getAttribute(E)-1;0===t?(e.removeEventListener("scroll",k,j),e.removeAttribute(E)):e.setAttribute(E,t)}}var n=y.indexOf(this);-1!==n&&y.splice(n,1),0===y.length&&"undefined"!=typeof window&&((0,i.off)(window,"resize",k,j),(0,i.off)(window,"scroll",k,j))}},{key:"setRef",value:function(e){e&&(this.ref=e)}},{key:"render",value:function(){var e=this.props,t=e.height,n=e.children,a=e.placeholder,o=e.className,l=e.classNamePrefix,i=e.style;return r.default.createElement("div",{className:l+"-wrapper "+o,ref:this.setRef,style:i},this.visible?n:a||r.default.createElement("div",{style:{height:t},className:l+"-placeholder"}))}}]),t}(o.Component);T.propTypes={className:l.default.string,classNamePrefix:l.default.string,once:l.default.bool,height:l.default.oneOfType([l.default.number,l.default.string]),offset:l.default.oneOfType([l.default.number,l.default.arrayOf(l.default.number)]),overflow:l.default.bool,resize:l.default.bool,scroll:l.default.bool,children:l.default.node,throttle:l.default.oneOfType([l.default.number,l.default.bool]),debounce:l.default.oneOfType([l.default.number,l.default.bool]),placeholder:l.default.node,scrollContainer:l.default.oneOfType([l.default.string,l.default.object]),unmountIfInvisible:l.default.bool,style:l.default.object},T.defaultProps={className:"",classNamePrefix:"lazyload",once:!1,offset:0,overflow:!1,resize:!1,scroll:!0,unmountIfInvisible:!1};t.ZP=T},38282:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var a=void 0,o=void 0,r=void 0,l=void 0,i=void 0,s=function s(){var c=+new Date-l;c<t&&c>=0?a=setTimeout(s,t-c):(a=null,n||(i=e.apply(r,o),a||(r=null,o=null)))};return function(){r=this,o=arguments,l=+new Date;var c=n&&!a;return a||(a=setTimeout(s,t)),c&&(i=e.apply(r,o),r=null,o=null),i}}},54081:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.on=function(e,t,n,a){a=a||!1,e.addEventListener?e.addEventListener(t,n,a):e.attachEvent&&e.attachEvent("on"+t,(function(t){n.call(e,t||window.event)}))},t.off=function(e,t,n,a){a=a||!1,e.removeEventListener?e.removeEventListener(t,n,a):e.detachEvent&&e.detachEvent("on"+t,n)}},38315:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!(e instanceof HTMLElement))return document.documentElement;for(var t="absolute"===e.style.position,n=/(scroll|auto)/,a=e;a;){if(!a.parentNode)return e.ownerDocument||document.documentElement;var o=window.getComputedStyle(a),r=o.position,l=o.overflow,i=o["overflow-x"],s=o["overflow-y"];if("static"===r&&t)a=a.parentNode;else{if(n.test(l)&&n.test(i)&&n.test(s))return a;a=a.parentNode}}return e.ownerDocument||e.documentElement||document.documentElement}},40821:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var a,o;return t||(t=250),function(){var r=n||this,l=+new Date,i=arguments;a&&l<a+t?(clearTimeout(o),o=setTimeout((function(){a=l,e.apply(r,i)}),t)):(a=l,e.apply(r,i))}}},16941:(e,t,n)=>{var a=n(51474),o=n(64045),r=n(67294),l=n(36038);function i(e){return e&&e.__esModule?e.default:e}function s(e,t,n,a){Object.defineProperty(e,t,{get:n,set:a,enumerable:!0,configurable:!0})}function c(e){null!==e.parentElement&&e.parentElement.removeChild(e)}function u(e){e.forEach((e=>c(e.element)))}function d(e){e.forEach((e=>{!function(e,t,n){const a=e.children[n]||null;e.insertBefore(t,a)}(e.parentElement,e.element,e.oldIndex)}))}function m(e,t){const n=h(e),a={parentElement:e.from};let o=[];switch(n){case"normal":o=[{element:e.item,newIndex:e.newIndex,oldIndex:e.oldIndex,parentElement:e.from}];break;case"swap":o=[{element:e.item,oldIndex:e.oldIndex,newIndex:e.newIndex,...a},{element:e.swapItem,oldIndex:e.newIndex,newIndex:e.oldIndex,...a}];break;case"multidrag":o=e.oldIndicies.map(((t,n)=>({element:t.multiDragElement,oldIndex:t.index,newIndex:e.newIndicies[n].index,...a})))}const r=function(e,t){const n=e.map((e=>({...e,item:t[e.oldIndex]}))).sort(((e,t)=>e.oldIndex-t.oldIndex));return n}(o,t);return r}function p(e,t){return f(e,g(e,t))}function g(e,t){const n=[...t];return e.concat().reverse().forEach((e=>n.splice(e.oldIndex,1))),n}function f(e,t,n,a){const o=[...t];return e.forEach((e=>{const t=a&&n&&a(e.item,n);o.splice(e.newIndex,0,t||e.item)})),o}function h(e){return e.oldIndicies&&e.oldIndicies.length>0?"multidrag":e.swapItem?"swap":"normal"}function b(e){const{list:t,setList:n,children:a,tag:o,style:r,className:l,clone:i,onAdd:s,onChange:c,onChoose:u,onClone:d,onEnd:m,onFilter:p,onRemove:g,onSort:f,onStart:h,onUnchoose:b,onUpdate:v,onMove:E,onSpill:y,onSelect:O,onDeselect:C,...Z}=e;return Z}s(e.exports,"Sortable",(()=>$882b6d93070905b3$re_export$Sortable)),s(e.exports,"Direction",(()=>$882b6d93070905b3$re_export$Direction)),s(e.exports,"DOMRect",(()=>$882b6d93070905b3$re_export$DOMRect)),s(e.exports,"GroupOptions",(()=>$882b6d93070905b3$re_export$GroupOptions)),s(e.exports,"MoveEvent",(()=>$882b6d93070905b3$re_export$MoveEvent)),s(e.exports,"Options",(()=>$882b6d93070905b3$re_export$Options)),s(e.exports,"PullResult",(()=>$882b6d93070905b3$re_export$PullResult)),s(e.exports,"PutResult",(()=>$882b6d93070905b3$re_export$PutResult)),s(e.exports,"SortableEvent",(()=>$882b6d93070905b3$re_export$SortableEvent)),s(e.exports,"SortableOptions",(()=>$882b6d93070905b3$re_export$SortableOptions)),s(e.exports,"Utils",(()=>$882b6d93070905b3$re_export$Utils)),s(e.exports,"ReactSortable",(()=>E));const v={dragging:null};class E extends r.Component{static defaultProps={clone:e=>e};constructor(e){super(e),this.ref=(0,r.createRef)();const t=[...e.list].map((e=>Object.assign(e,{chosen:!1,selected:!1})));e.setList(t,this.sortable,v),i(l)(!e.plugins,'\nPlugins prop is no longer supported.\nInstead, mount it with "Sortable.mount(new MultiDrag())"\nPlease read the updated README.md at https://github.com/SortableJS/react-sortablejs.\n      ')}componentDidMount(){if(null===this.ref.current)return;const e=this.makeOptions();i(a).create(this.ref.current,e)}componentDidUpdate(e){e.disabled!==this.props.disabled&&this.sortable&&this.sortable.option("disabled",this.props.disabled)}render(){const{tag:e,style:t,className:n,id:a}=this.props,o={style:t,className:n,id:a},l=e&&null!==e?e:"div";return(0,r.createElement)(l,{ref:this.ref,...o},this.getChildren())}getChildren(){const{children:e,dataIdAttr:t,selectedClass:n="sortable-selected",chosenClass:a="sortable-chosen",dragClass:l="sortable-drag",fallbackClass:s="sortable-falback",ghostClass:c="sortable-ghost",swapClass:u="sortable-swap-highlight",filter:d="sortable-filter",list:m}=this.props;if(!e||null==e)return null;const p=t||"data-id";return r.Children.map(e,((e,t)=>{if(void 0===e)return;const l=m[t]||{},{className:s}=e.props,c="string"==typeof d&&{[d.replace(".","")]:!!l.filtered},u=i(o)(s,{[n]:l.selected,[a]:l.chosen,...c});return(0,r.cloneElement)(e,{[p]:e.key,className:u})}))}get sortable(){const e=this.ref.current;if(null===e)return null;const t=Object.keys(e).find((e=>e.includes("Sortable")));return t?e[t]:null}makeOptions(){const e=b(this.props);["onAdd","onChoose","onDeselect","onEnd","onRemove","onSelect","onSpill","onStart","onUnchoose","onUpdate"].forEach((t=>e[t]=this.prepareOnHandlerPropAndDOM(t))),["onChange","onClone","onFilter","onSort"].forEach((t=>e[t]=this.prepareOnHandlerProp(t)));return{...e,onMove:(e,t)=>{const{onMove:n}=this.props,a=e.willInsertAfter||-1;if(!n)return a;const o=n(e,t,this.sortable,v);return void 0!==o&&o}}}prepareOnHandlerPropAndDOM(e){return t=>{this.callOnHandlerProp(t,e),this[e](t)}}prepareOnHandlerProp(e){return t=>{this.callOnHandlerProp(t,e)}}callOnHandlerProp(e,t){const n=this.props[t];n&&n(e,this.sortable,v)}onAdd(e){const{list:t,setList:n,clone:a}=this.props,o=m(e,[...v.dragging.props.list]);u(o);n(f(o,t,e,a).map((e=>Object.assign(e,{selected:!1}))),this.sortable,v)}onRemove(e){const{list:t,setList:n}=this.props,a=h(e),o=m(e,t);d(o);let r=[...t];if("clone"!==e.pullMode)r=g(o,r);else{let t=o;switch(a){case"multidrag":t=o.map(((t,n)=>({...t,element:e.clones[n]})));break;case"normal":t=o.map((t=>({...t,element:e.clone})));break;default:i(l)(!0,`mode "${a}" cannot clone. Please remove "props.clone" from <ReactSortable/> when using the "${a}" plugin`)}u(t),o.forEach((t=>{const n=t.oldIndex,a=this.props.clone(t.item,e);r.splice(n,1,a)}))}r=r.map((e=>Object.assign(e,{selected:!1}))),n(r,this.sortable,v)}onUpdate(e){const{list:t,setList:n}=this.props,a=m(e,t);u(a),d(a);return n(p(a,t),this.sortable,v)}onStart(){v.dragging=this}onEnd(){v.dragging=null}onChoose(e){const{list:t,setList:n}=this.props;n(t.map(((t,n)=>{let a=t;return n===e.oldIndex&&(a=Object.assign(t,{chosen:!0})),a})),this.sortable,v)}onUnchoose(e){const{list:t,setList:n}=this.props;n(t.map(((t,n)=>{let a=t;return n===e.oldIndex&&(a=Object.assign(a,{chosen:!1})),a})),this.sortable,v)}onSpill(e){const{removeOnSpill:t,revertOnSpill:n}=this.props;t&&!n&&c(e.item)}onSelect(e){const{list:t,setList:n}=this.props,a=t.map((e=>Object.assign(e,{selected:!1})));e.newIndicies.forEach((t=>{const n=t.index;if(-1===n)return console.log(`"${e.type}" had indice of "${t.index}", which is probably -1 and doesn't usually happen here.`),void console.log(e);a[n].selected=!0})),n(a,this.sortable,v)}onDeselect(e){const{list:t,setList:n}=this.props,a=t.map((e=>Object.assign(e,{selected:!1})));e.newIndicies.forEach((e=>{const t=e.index;-1!==t&&(a[t].selected=!0)})),n(a,this.sortable,v)}}var y,O;y=e.exports,O={},Object.keys(O).forEach((function(e){"default"===e||"__esModule"===e||y.hasOwnProperty(e)||Object.defineProperty(y,e,{enumerable:!0,get:function(){return O[e]}})}))},64045:(e,t)=>{var n;!function(){"use strict";var a={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n)){if(n.length){var l=o.apply(null,n);l&&e.push(l)}}else if("object"===r)if(n.toString===Object.prototype.toString)for(var i in n)a.call(n,i)&&n[i]&&e.push(i);else e.push(n.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},36038:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var a=!0,o="Invariant failed";function r(e,t){if(!e){if(a)throw new Error(o);var n="function"==typeof t?t():t;throw new Error(n?o+": "+n:o)}}},51474:(e,t,n)=>{"use strict";function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i.apply(this,arguments)}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function c(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}n.r(t),n.d(t,{MultiDrag:()=>Ct,Sortable:()=>Ve,Swap:()=>dt,default:()=>wt});function d(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var m=d(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),p=d(/Edge/i),g=d(/firefox/i),f=d(/safari/i)&&!d(/chrome/i)&&!d(/android/i),h=d(/iP(ad|od|hone)/i),b=d(/chrome/i)&&d(/android/i),v={capture:!1,passive:!1};function E(e,t,n){e.addEventListener(t,n,!m&&v)}function y(e,t,n){e.removeEventListener(t,n,!m&&v)}function O(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(n){return!1}return!1}}function C(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Z(e,t,n,a){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&O(e,t):O(e,t))||a&&e===n)return e;if(e===n)break}while(e=C(e))}return null}var j,w=/\s+/g;function S(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var a=(" "+e.className+" ").replace(w," ").replace(" "+t+" "," ");e.className=(a+(n?" "+t:"")).replace(w," ")}}function N(e,t,n){var a=e&&e.style;if(a){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in a||-1!==t.indexOf("webkit")||(t="-webkit-"+t),a[t]=n+("string"==typeof n?"":"px")}}function _(e,t){var n="";if("string"==typeof e)n=e;else do{var a=N(e,"transform");a&&"none"!==a&&(n=a+" "+n)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function k(e,t,n){if(e){var a=e.getElementsByTagName(t),o=0,r=a.length;if(n)for(;o<r;o++)n(a[o],o);return a}return[]}function T(){var e=document.scrollingElement;return e||document.documentElement}function A(e,t,n,a,o){if(e.getBoundingClientRect||e===window){var r,l,i,s,c,u,d;if(e!==window&&e.parentNode&&e!==T()?(l=(r=e.getBoundingClientRect()).top,i=r.left,s=r.bottom,c=r.right,u=r.height,d=r.width):(l=0,i=0,s=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(o=o||e.parentNode,!m))do{if(o&&o.getBoundingClientRect&&("none"!==N(o,"transform")||n&&"static"!==N(o,"position"))){var p=o.getBoundingClientRect();l-=p.top+parseInt(N(o,"border-top-width")),i-=p.left+parseInt(N(o,"border-left-width")),s=l+r.height,c=i+r.width;break}}while(o=o.parentNode);if(a&&e!==window){var g=_(o||e),f=g&&g.a,h=g&&g.d;g&&(s=(l/=h)+(u/=h),c=(i/=f)+(d/=f))}return{top:l,left:i,bottom:s,right:c,width:d,height:u}}}function P(e,t,n){for(var a=R(e,!0),o=A(e)[t];a;){var r=A(a)[n];if(!("top"===n||"left"===n?o>=r:o<=r))return a;if(a===T())break;a=R(a,!1)}return!1}function x(e,t,n,a){for(var o=0,r=0,l=e.children;r<l.length;){if("none"!==l[r].style.display&&l[r]!==Ve.ghost&&(a||l[r]!==Ve.dragged)&&Z(l[r],n.draggable,e,!1)){if(o===t)return l[r];o++}r++}return null}function M(e,t){for(var n=e.lastElementChild;n&&(n===Ve.ghost||"none"===N(n,"display")||t&&!O(n,t));)n=n.previousElementSibling;return n||null}function I(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Ve.clone||t&&!O(e,t)||n++;return n}function D(e){var t=0,n=0,a=T();if(e)do{var o=_(e),r=o.a,l=o.d;t+=e.scrollLeft*r,n+=e.scrollTop*l}while(e!==a&&(e=e.parentNode));return[t,n]}function R(e,t){if(!e||!e.getBoundingClientRect)return T();var n=e,a=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=N(n);if(n.clientWidth<n.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!n.getBoundingClientRect||n===document.body)return T();if(a||t)return n;a=!0}}}while(n=n.parentNode);return T()}function $(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function B(e,t){return function(){if(!j){var n=arguments;1===n.length?e.call(this,n[0]):e.apply(this,n),j=setTimeout((function(){j=void 0}),t)}}}function L(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function F(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function U(e,t){N(e,"position","absolute"),N(e,"top",t.top),N(e,"left",t.left),N(e,"width",t.width),N(e,"height",t.height)}function V(e){N(e,"position",""),N(e,"top",""),N(e,"left",""),N(e,"width",""),N(e,"height","")}var z="Sortable"+(new Date).getTime();function G(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==N(e,"display")&&e!==Ve.ghost){t.push({target:e,rect:A(e)});var n=o({},t[t.length-1].rect);if(e.thisAnimationDuration){var a=_(e,!0);a&&(n.top-=a.f,n.left-=a.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var a in t)if(t.hasOwnProperty(a)&&t[a]===e[n][a])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var a=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof n&&n());var o=!1,r=0;t.forEach((function(e){var t=0,n=e.target,l=n.fromRect,i=A(n),s=n.prevFromRect,c=n.prevToRect,u=e.rect,d=_(n,!0);d&&(i.top-=d.f,i.left-=d.e),n.toRect=i,n.thisAnimationDuration&&$(s,i)&&!$(l,i)&&(u.top-i.top)/(u.left-i.left)==(l.top-i.top)/(l.left-i.left)&&(t=function(e,t,n,a){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*a.animation}(u,s,c,a.options)),$(i,l)||(n.prevFromRect=l,n.prevToRect=i,t||(t=a.options.animation),a.animate(n,u,i,t)),t&&(o=!0,r=Math.max(r,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),o?e=setTimeout((function(){"function"==typeof n&&n()}),r):"function"==typeof n&&n(),t=[]},animate:function(e,t,n,a){if(a){N(e,"transition",""),N(e,"transform","");var o=_(this.el),r=o&&o.a,l=o&&o.d,i=(t.left-n.left)/(r||1),s=(t.top-n.top)/(l||1);e.animatingX=!!i,e.animatingY=!!s,N(e,"transform","translate3d("+i+"px,"+s+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),N(e,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),N(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){N(e,"transition",""),N(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),a)}}}}var H=[],W={initializeByDefault:!0},Y={mount:function(e){for(var t in W)W.hasOwnProperty(t)&&!(t in e)&&(e[t]=W[t]);H.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),H.push(e)},pluginEvent:function(e,t,n){var a=this;this.eventCanceled=!1,n.cancel=function(){a.eventCanceled=!0};var r=e+"Global";H.forEach((function(a){t[a.pluginName]&&(t[a.pluginName][r]&&t[a.pluginName][r](o({sortable:t},n)),t.options[a.pluginName]&&t[a.pluginName][e]&&t[a.pluginName][e](o({sortable:t},n)))}))},initializePlugins:function(e,t,n,a){for(var o in H.forEach((function(a){var o=a.pluginName;if(e.options[o]||a.initializeByDefault){var r=new a(e,t,e.options);r.sortable=e,r.options=e.options,e[o]=r,i(n,r.defaults)}})),e.options)if(e.options.hasOwnProperty(o)){var r=this.modifyOption(e,o,e.options[o]);void 0!==r&&(e.options[o]=r)}},getEventProperties:function(e,t){var n={};return H.forEach((function(a){"function"==typeof a.eventProperties&&i(n,a.eventProperties.call(t[a.pluginName],e))})),n},modifyOption:function(e,t,n){var a;return H.forEach((function(o){e[o.pluginName]&&o.optionListeners&&"function"==typeof o.optionListeners[t]&&(a=o.optionListeners[t].call(e[o.pluginName],n))})),a}};function X(e){var t=e.sortable,n=e.rootEl,a=e.name,r=e.targetEl,l=e.cloneEl,i=e.toEl,s=e.fromEl,c=e.oldIndex,u=e.newIndex,d=e.oldDraggableIndex,g=e.newDraggableIndex,f=e.originalEvent,h=e.putSortable,b=e.extraEventProperties;if(t=t||n&&n[z]){var v,E=t.options,y="on"+a.charAt(0).toUpperCase()+a.substr(1);!window.CustomEvent||m||p?(v=document.createEvent("Event")).initEvent(a,!0,!0):v=new CustomEvent(a,{bubbles:!0,cancelable:!0}),v.to=i||n,v.from=s||n,v.item=r||n,v.clone=l,v.oldIndex=c,v.newIndex=u,v.oldDraggableIndex=d,v.newDraggableIndex=g,v.originalEvent=f,v.pullMode=h?h.lastPutMode:void 0;var O=o(o({},b),Y.getEventProperties(a,t));for(var C in O)v[C]=O[C];n&&n.dispatchEvent(v),E[y]&&E[y].call(t,v)}}var q=["evt"],K=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.evt,r=s(n,q);Y.pluginEvent.bind(Ve)(e,t,o({dragEl:Q,parentEl:ee,ghostEl:te,rootEl:ne,nextEl:ae,lastDownEl:oe,cloneEl:re,cloneHidden:le,dragStarted:Ee,putSortable:me,activeSortable:Ve.active,originalEvent:a,oldIndex:ie,oldDraggableIndex:ce,newIndex:se,newDraggableIndex:ue,hideGhostForTarget:Be,unhideGhostForTarget:Le,cloneNowHidden:function(){le=!0},cloneNowShown:function(){le=!1},dispatchSortableEvent:function(e){J({sortable:t,name:e,originalEvent:a})}},r))};function J(e){X(o({putSortable:me,cloneEl:re,targetEl:Q,rootEl:ne,oldIndex:ie,oldDraggableIndex:ce,newIndex:se,newDraggableIndex:ue},e))}var Q,ee,te,ne,ae,oe,re,le,ie,se,ce,ue,de,me,pe,ge,fe,he,be,ve,Ee,ye,Oe,Ce,Ze,je=!1,we=!1,Se=[],Ne=!1,_e=!1,ke=[],Te=!1,Ae=[],Pe="undefined"!=typeof document,xe=h,Me=p||m?"cssFloat":"float",Ie=Pe&&!b&&!h&&"draggable"in document.createElement("div"),De=function(){if(Pe){if(m)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Re=function(e,t){var n=N(e),a=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=x(e,0,t),r=x(e,1,t),l=o&&N(o),i=r&&N(r),s=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+A(o).width,c=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+A(r).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&l.float&&"none"!==l.float){var u="left"===l.float?"left":"right";return!r||"both"!==i.clear&&i.clear!==u?"horizontal":"vertical"}return o&&("block"===l.display||"flex"===l.display||"table"===l.display||"grid"===l.display||s>=a&&"none"===n[Me]||r&&"none"===n[Me]&&s+c>a)?"vertical":"horizontal"},$e=function(e){function t(e,n){return function(a,o,r,l){var i=a.options.group.name&&o.options.group.name&&a.options.group.name===o.options.group.name;if(null==e&&(n||i))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(a,o,r,l),n)(a,o,r,l);var s=(n?a:o).options.group.name;return!0===e||"string"==typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var n={},a=e.group;a&&"object"==r(a)||(a={name:a}),n.name=a.name,n.checkPull=t(a.pull,!0),n.checkPut=t(a.put),n.revertClone=a.revertClone,e.group=n},Be=function(){!De&&te&&N(te,"display","none")},Le=function(){!De&&te&&N(te,"display","")};Pe&&!b&&document.addEventListener("click",(function(e){if(we)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),we=!1,!1}),!0);var Fe=function(e){if(Q){e=e.touches?e.touches[0]:e;var t=(o=e.clientX,r=e.clientY,Se.some((function(e){var t=e[z].options.emptyInsertThreshold;if(t&&!M(e)){var n=A(e),a=o>=n.left-t&&o<=n.right+t,i=r>=n.top-t&&r<=n.bottom+t;return a&&i?l=e:void 0}})),l);if(t){var n={};for(var a in e)e.hasOwnProperty(a)&&(n[a]=e[a]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[z]._onDragOver(n)}}var o,r,l},Ue=function(e){Q&&Q.parentNode[z]._isOutsideThisEl(e.target)};function Ve(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=i({},t),e[z]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Re(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Ve.supportPointer&&"PointerEvent"in window&&!f,emptyInsertThreshold:5};for(var a in Y.initializePlugins(this,e,n),n)!(a in t)&&(t[a]=n[a]);for(var o in $e(t),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&Ie,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?E(e,"pointerdown",this._onTapStart):(E(e,"mousedown",this._onTapStart),E(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(E(e,"dragover",this),E(e,"dragenter",this)),Se.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),i(this,G())}function ze(e,t,n,a,o,r,l,i){var s,c,u=e[z],d=u.options.onMove;return!window.CustomEvent||m||p?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=t,s.from=e,s.dragged=n,s.draggedRect=a,s.related=o||t,s.relatedRect=r||A(t),s.willInsertAfter=i,s.originalEvent=l,e.dispatchEvent(s),d&&(c=d.call(u,s,l)),c}function Ge(e){e.draggable=!1}function He(){Te=!1}function We(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,a=0;n--;)a+=t.charCodeAt(n);return a.toString(36)}function Ye(e){return setTimeout(e,0)}function Xe(e){return clearTimeout(e)}Ve.prototype={constructor:Ve,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(ye=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,Q):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,a=this.options,o=a.preventOnFilter,r=e.type,l=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,i=(l||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||i,c=a.filter;if(function(e){Ae.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var a=t[n];a.checked&&Ae.push(a)}}(n),!Q&&!(/mousedown|pointerdown/.test(r)&&0!==e.button||a.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!f||!i||"SELECT"!==i.tagName.toUpperCase())&&!((i=Z(i,a.draggable,n,!1))&&i.animated||oe===i)){if(ie=I(i),ce=I(i,a.draggable),"function"==typeof c){if(c.call(this,e,i,this))return J({sortable:t,rootEl:s,name:"filter",targetEl:i,toEl:n,fromEl:n}),K("filter",t,{evt:e}),void(o&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(a){if(a=Z(s,a.trim(),n,!1))return J({sortable:t,rootEl:a,name:"filter",targetEl:i,fromEl:n,toEl:n}),K("filter",t,{evt:e}),!0}))))return void(o&&e.cancelable&&e.preventDefault());a.handle&&!Z(s,a.handle,n,!1)||this._prepareDragStart(e,l,i)}}},_prepareDragStart:function(e,t,n){var a,o=this,r=o.el,l=o.options,i=r.ownerDocument;if(n&&!Q&&n.parentNode===r){var s=A(n);if(ne=r,ee=(Q=n).parentNode,ae=Q.nextSibling,oe=n,de=l.group,Ve.dragged=Q,pe={target:Q,clientX:(t||e).clientX,clientY:(t||e).clientY},be=pe.clientX-s.left,ve=pe.clientY-s.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,Q.style["will-change"]="all",a=function(){K("delayEnded",o,{evt:e}),Ve.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!g&&o.nativeDraggable&&(Q.draggable=!0),o._triggerDragStart(e,t),J({sortable:o,name:"choose",originalEvent:e}),S(Q,l.chosenClass,!0))},l.ignore.split(",").forEach((function(e){k(Q,e.trim(),Ge)})),E(i,"dragover",Fe),E(i,"mousemove",Fe),E(i,"touchmove",Fe),E(i,"mouseup",o._onDrop),E(i,"touchend",o._onDrop),E(i,"touchcancel",o._onDrop),g&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Q.draggable=!0),K("delayStart",this,{evt:e}),!l.delay||l.delayOnTouchOnly&&!t||this.nativeDraggable&&(p||m))a();else{if(Ve.eventCanceled)return void this._onDrop();E(i,"mouseup",o._disableDelayedDrag),E(i,"touchend",o._disableDelayedDrag),E(i,"touchcancel",o._disableDelayedDrag),E(i,"mousemove",o._delayedDragTouchMoveHandler),E(i,"touchmove",o._delayedDragTouchMoveHandler),l.supportPointer&&E(i,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(a,l.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Q&&Ge(Q),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;y(e,"mouseup",this._disableDelayedDrag),y(e,"touchend",this._disableDelayedDrag),y(e,"touchcancel",this._disableDelayedDrag),y(e,"mousemove",this._delayedDragTouchMoveHandler),y(e,"touchmove",this._delayedDragTouchMoveHandler),y(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?E(document,"pointermove",this._onTouchMove):E(document,t?"touchmove":"mousemove",this._onTouchMove):(E(Q,"dragend",this),E(ne,"dragstart",this._onDragStart));try{document.selection?Ye((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(e,t){if(je=!1,ne&&Q){K("dragStarted",this,{evt:t}),this.nativeDraggable&&E(document,"dragover",Ue);var n=this.options;!e&&S(Q,n.dragClass,!1),S(Q,n.ghostClass,!0),Ve.active=this,e&&this._appendGhost(),J({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ge){this._lastX=ge.clientX,this._lastY=ge.clientY,Be();for(var e=document.elementFromPoint(ge.clientX,ge.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ge.clientX,ge.clientY))!==t;)t=e;if(Q.parentNode[z]._isOutsideThisEl(e),t)do{if(t[z]){if(t[z]._onDragOver({clientX:ge.clientX,clientY:ge.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Le()}},_onTouchMove:function(e){if(pe){var t=this.options,n=t.fallbackTolerance,a=t.fallbackOffset,o=e.touches?e.touches[0]:e,r=te&&_(te,!0),l=te&&r&&r.a,i=te&&r&&r.d,s=xe&&Ze&&D(Ze),c=(o.clientX-pe.clientX+a.x)/(l||1)+(s?s[0]-ke[0]:0)/(l||1),u=(o.clientY-pe.clientY+a.y)/(i||1)+(s?s[1]-ke[1]:0)/(i||1);if(!Ve.active&&!je){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(te){r?(r.e+=c-(fe||0),r.f+=u-(he||0)):r={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");N(te,"webkitTransform",d),N(te,"mozTransform",d),N(te,"msTransform",d),N(te,"transform",d),fe=c,he=u,ge=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!te){var e=this.options.fallbackOnBody?document.body:ne,t=A(Q,!0,xe,!0,e),n=this.options;if(xe){for(Ze=e;"static"===N(Ze,"position")&&"none"===N(Ze,"transform")&&Ze!==document;)Ze=Ze.parentNode;Ze!==document.body&&Ze!==document.documentElement?(Ze===document&&(Ze=T()),t.top+=Ze.scrollTop,t.left+=Ze.scrollLeft):Ze=T(),ke=D(Ze)}S(te=Q.cloneNode(!0),n.ghostClass,!1),S(te,n.fallbackClass,!0),S(te,n.dragClass,!0),N(te,"transition",""),N(te,"transform",""),N(te,"box-sizing","border-box"),N(te,"margin",0),N(te,"top",t.top),N(te,"left",t.left),N(te,"width",t.width),N(te,"height",t.height),N(te,"opacity","0.8"),N(te,"position",xe?"absolute":"fixed"),N(te,"zIndex","100000"),N(te,"pointerEvents","none"),Ve.ghost=te,e.appendChild(te),N(te,"transform-origin",be/parseInt(te.style.width)*100+"% "+ve/parseInt(te.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,a=e.dataTransfer,o=n.options;K("dragStart",this,{evt:e}),Ve.eventCanceled?this._onDrop():(K("setupClone",this),Ve.eventCanceled||((re=F(Q)).removeAttribute("id"),re.draggable=!1,re.style["will-change"]="",this._hideClone(),S(re,this.options.chosenClass,!1),Ve.clone=re),n.cloneId=Ye((function(){K("clone",n),Ve.eventCanceled||(n.options.removeCloneOnHide||ne.insertBefore(re,Q),n._hideClone(),J({sortable:n,name:"clone"}))})),!t&&S(Q,o.dragClass,!0),t?(we=!0,n._loopId=setInterval(n._emulateDragOver,50)):(y(document,"mouseup",n._onDrop),y(document,"touchend",n._onDrop),y(document,"touchcancel",n._onDrop),a&&(a.effectAllowed="move",o.setData&&o.setData.call(n,a,Q)),E(document,"drop",n),N(Q,"transform","translateZ(0)")),je=!0,n._dragStartId=Ye(n._dragStarted.bind(n,t,e)),E(document,"selectstart",n),Ee=!0,f&&N(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,a,r,l=this.el,i=e.target,s=this.options,c=s.group,u=Ve.active,d=de===c,m=s.sort,p=me||u,g=this,f=!1;if(!Te){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),i=Z(i,s.draggable,l,!0),$("dragOver"),Ve.eventCanceled)return f;if(Q.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||g._ignoreWhileAnimating===i)return F(!1);if(we=!1,u&&!s.disabled&&(d?m||(a=ee!==ne):me===this||(this.lastPutMode=de.checkPull(this,u,Q,e))&&c.checkPut(this,u,Q,e))){if(r="vertical"===this._getDirection(e,i),t=A(Q),$("dragOverValid"),Ve.eventCanceled)return f;if(a)return ee=ne,B(),this._hideClone(),$("revert"),Ve.eventCanceled||(ae?ne.insertBefore(Q,ae):ne.appendChild(Q)),F(!0);var h=M(l,s.draggable);if(!h||function(e,t,n){var a=A(M(n.el,n.options.draggable)),o=10;return t?e.clientX>a.right+o||e.clientX<=a.right&&e.clientY>a.bottom&&e.clientX>=a.left:e.clientX>a.right&&e.clientY>a.top||e.clientX<=a.right&&e.clientY>a.bottom+o}(e,r,this)&&!h.animated){if(h===Q)return F(!1);if(h&&l===e.target&&(i=h),i&&(n=A(i)),!1!==ze(ne,l,Q,t,i,n,e,!!i))return B(),h&&h.nextSibling?l.insertBefore(Q,h.nextSibling):l.appendChild(Q),ee=l,U(),F(!0)}else if(h&&function(e,t,n){var a=A(x(n.el,0,n.options,!0)),o=10;return t?e.clientX<a.left-o||e.clientY<a.top&&e.clientX<a.right:e.clientY<a.top-o||e.clientY<a.bottom&&e.clientX<a.left}(e,r,this)){var b=x(l,0,s,!0);if(b===Q)return F(!1);if(n=A(i=b),!1!==ze(ne,l,Q,t,i,n,e,!1))return B(),l.insertBefore(Q,b),ee=l,U(),F(!0)}else if(i.parentNode===l){n=A(i);var v,E,y,O=Q.parentNode!==l,C=!function(e,t,n){var a=n?e.left:e.top,o=n?e.right:e.bottom,r=n?e.width:e.height,l=n?t.left:t.top,i=n?t.right:t.bottom,s=n?t.width:t.height;return a===l||o===i||a+r/2===l+s/2}(Q.animated&&Q.toRect||t,i.animated&&i.toRect||n,r),j=r?"top":"left",w=P(i,"top","top")||P(Q,"top","top"),_=w?w.scrollTop:void 0;if(ye!==i&&(E=n[j],Ne=!1,_e=!C&&s.invertSwap||O),v=function(e,t,n,a,o,r,l,i){var s=a?e.clientY:e.clientX,c=a?n.height:n.width,u=a?n.top:n.left,d=a?n.bottom:n.right,m=!1;if(!l)if(i&&Ce<c*o){if(!Ne&&(1===Oe?s>u+c*r/2:s<d-c*r/2)&&(Ne=!0),Ne)m=!0;else if(1===Oe?s<u+Ce:s>d-Ce)return-Oe}else if(s>u+c*(1-o)/2&&s<d-c*(1-o)/2)return function(e){return I(Q)<I(e)?1:-1}(t);if((m=m||l)&&(s<u+c*r/2||s>d-c*r/2))return s>u+c/2?1:-1;return 0}(e,i,n,r,C?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,_e,ye===i),0!==v){var k=I(Q);do{k-=v,y=ee.children[k]}while(y&&("none"===N(y,"display")||y===te))}if(0===v||y===i)return F(!1);ye=i,Oe=v;var T=i.nextElementSibling,D=!1,R=ze(ne,l,Q,t,i,n,e,D=1===v);if(!1!==R)return 1!==R&&-1!==R||(D=1===R),Te=!0,setTimeout(He,30),B(),D&&!T?l.appendChild(Q):i.parentNode.insertBefore(Q,D?T:i),w&&L(w,0,_-w.scrollTop),ee=Q.parentNode,void 0===E||_e||(Ce=Math.abs(E-A(i)[j])),U(),F(!0)}if(l.contains(Q))return F(!1)}return!1}function $(s,c){K(s,g,o({evt:e,isOwner:d,axis:r?"vertical":"horizontal",revert:a,dragRect:t,targetRect:n,canSort:m,fromSortable:p,target:i,completed:F,onMove:function(n,a){return ze(ne,l,Q,t,n,A(n),e,a)},changed:U},c))}function B(){$("dragOverAnimationCapture"),g.captureAnimationState(),g!==p&&p.captureAnimationState()}function F(t){return $("dragOverCompleted",{insertion:t}),t&&(d?u._hideClone():u._showClone(g),g!==p&&(S(Q,me?me.options.ghostClass:u.options.ghostClass,!1),S(Q,s.ghostClass,!0)),me!==g&&g!==Ve.active?me=g:g===Ve.active&&me&&(me=null),p===g&&(g._ignoreWhileAnimating=i),g.animateAll((function(){$("dragOverAnimationComplete"),g._ignoreWhileAnimating=null})),g!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(i===Q&&!Q.animated||i===l&&!i.animated)&&(ye=null),s.dragoverBubble||e.rootEl||i===document||(Q.parentNode[z]._isOutsideThisEl(e.target),!t&&Fe(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),f=!0}function U(){se=I(Q),ue=I(Q,s.draggable),J({sortable:g,name:"change",toEl:l,newIndex:se,newDraggableIndex:ue,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){y(document,"mousemove",this._onTouchMove),y(document,"touchmove",this._onTouchMove),y(document,"pointermove",this._onTouchMove),y(document,"dragover",Fe),y(document,"mousemove",Fe),y(document,"touchmove",Fe)},_offUpEvents:function(){var e=this.el.ownerDocument;y(e,"mouseup",this._onDrop),y(e,"touchend",this._onDrop),y(e,"pointerup",this._onDrop),y(e,"touchcancel",this._onDrop),y(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;se=I(Q),ue=I(Q,n.draggable),K("drop",this,{evt:e}),ee=Q&&Q.parentNode,se=I(Q),ue=I(Q,n.draggable),Ve.eventCanceled||(je=!1,_e=!1,Ne=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Xe(this.cloneId),Xe(this._dragStartId),this.nativeDraggable&&(y(document,"drop",this),y(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),f&&N(document.body,"user-select",""),N(Q,"transform",""),e&&(Ee&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),te&&te.parentNode&&te.parentNode.removeChild(te),(ne===ee||me&&"clone"!==me.lastPutMode)&&re&&re.parentNode&&re.parentNode.removeChild(re),Q&&(this.nativeDraggable&&y(Q,"dragend",this),Ge(Q),Q.style["will-change"]="",Ee&&!je&&S(Q,me?me.options.ghostClass:this.options.ghostClass,!1),S(Q,this.options.chosenClass,!1),J({sortable:this,name:"unchoose",toEl:ee,newIndex:null,newDraggableIndex:null,originalEvent:e}),ne!==ee?(se>=0&&(J({rootEl:ee,name:"add",toEl:ee,fromEl:ne,originalEvent:e}),J({sortable:this,name:"remove",toEl:ee,originalEvent:e}),J({rootEl:ee,name:"sort",toEl:ee,fromEl:ne,originalEvent:e}),J({sortable:this,name:"sort",toEl:ee,originalEvent:e})),me&&me.save()):se!==ie&&se>=0&&(J({sortable:this,name:"update",toEl:ee,originalEvent:e}),J({sortable:this,name:"sort",toEl:ee,originalEvent:e})),Ve.active&&(null!=se&&-1!==se||(se=ie,ue=ce),J({sortable:this,name:"end",toEl:ee,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){K("nulling",this),ne=Q=ee=te=ae=re=oe=le=pe=ge=Ee=se=ue=ie=ce=ye=Oe=me=de=Ve.dragged=Ve.ghost=Ve.clone=Ve.active=null,Ae.forEach((function(e){e.checked=!0})),Ae.length=fe=he=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Q&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,a=0,o=n.length,r=this.options;a<o;a++)Z(e=n[a],r.draggable,this.el,!1)&&t.push(e.getAttribute(r.dataIdAttr)||We(e));return t},sort:function(e,t){var n={},a=this.el;this.toArray().forEach((function(e,t){var o=a.children[t];Z(o,this.options.draggable,a,!1)&&(n[e]=o)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(a.removeChild(n[e]),a.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Z(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var a=Y.modifyOption(this,e,t);n[e]=void 0!==a?a:t,"group"===e&&$e(n)},destroy:function(){K("destroy",this);var e=this.el;e[z]=null,y(e,"mousedown",this._onTapStart),y(e,"touchstart",this._onTapStart),y(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(y(e,"dragover",this),y(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Se.splice(Se.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!le){if(K("hideClone",this),Ve.eventCanceled)return;N(re,"display","none"),this.options.removeCloneOnHide&&re.parentNode&&re.parentNode.removeChild(re),le=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(le){if(K("showClone",this),Ve.eventCanceled)return;Q.parentNode!=ne||this.options.group.revertClone?ae?ne.insertBefore(re,ae):ne.appendChild(re):ne.insertBefore(re,Q),this.options.group.revertClone&&this.animate(Q,re),N(re,"display",""),le=!1}}else this._hideClone()}},Pe&&E(document,"touchmove",(function(e){(Ve.active||je)&&e.cancelable&&e.preventDefault()})),Ve.utils={on:E,off:y,css:N,find:k,is:function(e,t){return!!Z(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:B,closest:Z,toggleClass:S,clone:F,index:I,nextTick:Ye,cancelNextTick:Xe,detectDirection:Re,getChild:x},Ve.get=function(e){return e[z]},Ve.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Ve.utils=o(o({},Ve.utils),e.utils)),Y.mount(e)}))},Ve.create=function(e,t){return new Ve(e,t)},Ve.version="1.15.0";var qe,Ke,Je,Qe,et,tt,nt=[],at=!1;function ot(){nt.forEach((function(e){clearInterval(e.pid)})),nt=[]}function rt(){clearInterval(tt)}var lt,it=B((function(e,t,n,a){if(t.scroll){var o,r=(e.touches?e.touches[0]:e).clientX,l=(e.touches?e.touches[0]:e).clientY,i=t.scrollSensitivity,s=t.scrollSpeed,c=T(),u=!1;Ke!==n&&(Ke=n,ot(),qe=t.scroll,o=t.scrollFn,!0===qe&&(qe=R(n,!0)));var d=0,m=qe;do{var p=m,g=A(p),f=g.top,h=g.bottom,b=g.left,v=g.right,E=g.width,y=g.height,O=void 0,C=void 0,Z=p.scrollWidth,j=p.scrollHeight,w=N(p),S=p.scrollLeft,_=p.scrollTop;p===c?(O=E<Z&&("auto"===w.overflowX||"scroll"===w.overflowX||"visible"===w.overflowX),C=y<j&&("auto"===w.overflowY||"scroll"===w.overflowY||"visible"===w.overflowY)):(O=E<Z&&("auto"===w.overflowX||"scroll"===w.overflowX),C=y<j&&("auto"===w.overflowY||"scroll"===w.overflowY));var k=O&&(Math.abs(v-r)<=i&&S+E<Z)-(Math.abs(b-r)<=i&&!!S),P=C&&(Math.abs(h-l)<=i&&_+y<j)-(Math.abs(f-l)<=i&&!!_);if(!nt[d])for(var x=0;x<=d;x++)nt[x]||(nt[x]={});nt[d].vx==k&&nt[d].vy==P&&nt[d].el===p||(nt[d].el=p,nt[d].vx=k,nt[d].vy=P,clearInterval(nt[d].pid),0==k&&0==P||(u=!0,nt[d].pid=setInterval(function(){a&&0===this.layer&&Ve.active._onTouchMove(et);var t=nt[this.layer].vy?nt[this.layer].vy*s:0,n=nt[this.layer].vx?nt[this.layer].vx*s:0;"function"==typeof o&&"continue"!==o.call(Ve.dragged.parentNode[z],n,t,e,et,nt[this.layer].el)||L(nt[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&m!==c&&(m=R(m,!1)));at=u}}),30),st=function(e){var t=e.originalEvent,n=e.putSortable,a=e.dragEl,o=e.activeSortable,r=e.dispatchSortableEvent,l=e.hideGhostForTarget,i=e.unhideGhostForTarget;if(t){var s=n||o;l();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(c.clientX,c.clientY);i(),s&&!s.el.contains(u)&&(r("spill"),this.onSpill({dragEl:a,putSortable:n}))}};function ct(){}function ut(){}function dt(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(e){var t=e.dragEl;lt=t},dragOverValid:function(e){var t=e.completed,n=e.target,a=e.onMove,o=e.activeSortable,r=e.changed,l=e.cancel;if(o.options.swap){var i=this.sortable.el,s=this.options;if(n&&n!==i){var c=lt;!1!==a(n)?(S(n,s.swapClass,!0),lt=n):lt=null,c&&c!==lt&&S(c,s.swapClass,!1)}r(),t(!0),l()}},drop:function(e){var t=e.activeSortable,n=e.putSortable,a=e.dragEl,o=n||this.sortable,r=this.options;lt&&S(lt,r.swapClass,!1),lt&&(r.swap||n&&n.options.swap)&&a!==lt&&(o.captureAnimationState(),o!==t&&t.captureAnimationState(),function(e,t){var n,a,o=e.parentNode,r=t.parentNode;if(!o||!r||o.isEqualNode(t)||r.isEqualNode(e))return;n=I(e),a=I(t),o.isEqualNode(r)&&n<a&&a++;o.insertBefore(t,o.children[n]),r.insertBefore(e,r.children[a])}(a,lt),o.animateAll(),o!==t&&t.animateAll())},nulling:function(){lt=null}},i(e,{pluginName:"swap",eventProperties:function(){return{swapItem:lt}}})}ct.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var a=x(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(t,a):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:st},i(ct,{pluginName:"revertOnSpill"}),ut.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:st},i(ut,{pluginName:"removeOnSpill"});var mt,pt,gt,ft,ht,bt=[],vt=[],Et=!1,yt=!1,Ot=!1;function Ct(){function e(e){for(var t in this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this));e.options.avoidImplicitDeselect||(e.options.supportPointer?E(document,"pointerup",this._deselectMultiDrag):(E(document,"mouseup",this._deselectMultiDrag),E(document,"touchend",this._deselectMultiDrag))),E(document,"keydown",this._checkKeyDown),E(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:!1,setData:function(t,n){var a="";bt.length&&pt===e?bt.forEach((function(e,t){a+=(t?", ":"")+e.textContent})):a=n.textContent,t.setData("Text",a)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){var t=e.dragEl;gt=t},delayEnded:function(){this.isMultiDrag=~bt.indexOf(gt)},setupClone:function(e){var t=e.sortable,n=e.cancel;if(this.isMultiDrag){for(var a=0;a<bt.length;a++)vt.push(F(bt[a])),vt[a].sortableIndex=bt[a].sortableIndex,vt[a].draggable=!1,vt[a].style["will-change"]="",S(vt[a],this.options.selectedClass,!1),bt[a]===gt&&S(vt[a],this.options.chosenClass,!1);t._hideClone(),n()}},clone:function(e){var t=e.sortable,n=e.rootEl,a=e.dispatchSortableEvent,o=e.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||bt.length&&pt===t&&(Zt(!0,n),a("clone"),o()))},showClone:function(e){var t=e.cloneNowShown,n=e.rootEl,a=e.cancel;this.isMultiDrag&&(Zt(!1,n),vt.forEach((function(e){N(e,"display","")})),t(),ht=!1,a())},hideClone:function(e){var t=this,n=(e.sortable,e.cloneNowHidden),a=e.cancel;this.isMultiDrag&&(vt.forEach((function(e){N(e,"display","none"),t.options.removeCloneOnHide&&e.parentNode&&e.parentNode.removeChild(e)})),n(),ht=!0,a())},dragStartGlobal:function(e){e.sortable;!this.isMultiDrag&&pt&&pt.multiDrag._deselectMultiDrag(),bt.forEach((function(e){e.sortableIndex=I(e)})),bt=bt.sort((function(e,t){return e.sortableIndex-t.sortableIndex})),Ot=!0},dragStarted:function(e){var t=this,n=e.sortable;if(this.isMultiDrag){if(this.options.sort&&(n.captureAnimationState(),this.options.animation)){bt.forEach((function(e){e!==gt&&N(e,"position","absolute")}));var a=A(gt,!1,!0,!0);bt.forEach((function(e){e!==gt&&U(e,a)})),yt=!0,Et=!0}n.animateAll((function(){yt=!1,Et=!1,t.options.animation&&bt.forEach((function(e){V(e)})),t.options.sort&&jt()}))}},dragOver:function(e){var t=e.target,n=e.completed,a=e.cancel;yt&&~bt.indexOf(t)&&(n(!1),a())},revert:function(e){var t=e.fromSortable,n=e.rootEl,a=e.sortable,o=e.dragRect;bt.length>1&&(bt.forEach((function(e){a.addAnimationState({target:e,rect:yt?A(e):o}),V(e),e.fromRect=o,t.removeAnimationState(e)})),yt=!1,function(e,t){bt.forEach((function(n,a){var o=t.children[n.sortableIndex+(e?Number(a):0)];o?t.insertBefore(n,o):t.appendChild(n)}))}(!this.options.removeCloneOnHide,n))},dragOverCompleted:function(e){var t=e.sortable,n=e.isOwner,a=e.insertion,o=e.activeSortable,r=e.parentEl,l=e.putSortable,i=this.options;if(a){if(n&&o._hideClone(),Et=!1,i.animation&&bt.length>1&&(yt||!n&&!o.options.sort&&!l)){var s=A(gt,!1,!0,!0);bt.forEach((function(e){e!==gt&&(U(e,s),r.appendChild(e))})),yt=!0}if(!n)if(yt||jt(),bt.length>1){var c=ht;o._showClone(t),o.options.animation&&!ht&&c&&vt.forEach((function(e){o.addAnimationState({target:e,rect:ft}),e.fromRect=ft,e.thisAnimationDuration=null}))}else o._showClone(t)}},dragOverAnimationCapture:function(e){var t=e.dragRect,n=e.isOwner,a=e.activeSortable;if(bt.forEach((function(e){e.thisAnimationDuration=null})),a.options.animation&&!n&&a.multiDrag.isMultiDrag){ft=i({},t);var o=_(gt,!0);ft.top-=o.f,ft.left-=o.e}},dragOverAnimationComplete:function(){yt&&(yt=!1,jt())},drop:function(e){var t=e.originalEvent,n=e.rootEl,a=e.parentEl,o=e.sortable,r=e.dispatchSortableEvent,l=e.oldIndex,i=e.putSortable,s=i||this.sortable;if(t){var c=this.options,u=a.children;if(!Ot)if(c.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),S(gt,c.selectedClass,!~bt.indexOf(gt)),~bt.indexOf(gt))bt.splice(bt.indexOf(gt),1),mt=null,X({sortable:o,rootEl:n,name:"deselect",targetEl:gt,originalEvent:t});else{if(bt.push(gt),X({sortable:o,rootEl:n,name:"select",targetEl:gt,originalEvent:t}),t.shiftKey&&mt&&o.el.contains(mt)){var d,m,p=I(mt),g=I(gt);if(~p&&~g&&p!==g)for(g>p?(m=p,d=g):(m=g,d=p+1);m<d;m++)~bt.indexOf(u[m])||(S(u[m],c.selectedClass,!0),bt.push(u[m]),X({sortable:o,rootEl:n,name:"select",targetEl:u[m],originalEvent:t}))}else mt=gt;pt=s}if(Ot&&this.isMultiDrag){if(yt=!1,(a[z].options.sort||a!==n)&&bt.length>1){var f=A(gt),h=I(gt,":not(."+this.options.selectedClass+")");if(!Et&&c.animation&&(gt.thisAnimationDuration=null),s.captureAnimationState(),!Et&&(c.animation&&(gt.fromRect=f,bt.forEach((function(e){if(e.thisAnimationDuration=null,e!==gt){var t=yt?A(e):f;e.fromRect=t,s.addAnimationState({target:e,rect:t})}}))),jt(),bt.forEach((function(e){u[h]?a.insertBefore(e,u[h]):a.appendChild(e),h++})),l===I(gt))){var b=!1;bt.forEach((function(e){e.sortableIndex===I(e)||(b=!0)})),b&&r("update")}bt.forEach((function(e){V(e)})),s.animateAll()}pt=s}(n===a||i&&"clone"!==i.lastPutMode)&&vt.forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))}},nullingGlobal:function(){this.isMultiDrag=Ot=!1,vt.length=0},destroyGlobal:function(){this._deselectMultiDrag(),y(document,"pointerup",this._deselectMultiDrag),y(document,"mouseup",this._deselectMultiDrag),y(document,"touchend",this._deselectMultiDrag),y(document,"keydown",this._checkKeyDown),y(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if(!(void 0!==Ot&&Ot||pt!==this.sortable||e&&Z(e.target,this.options.draggable,this.sortable.el,!1)||e&&0!==e.button))for(;bt.length;){var t=bt[0];S(t,this.options.selectedClass,!1),bt.shift(),X({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:t,originalEvent:e})}},_checkKeyDown:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},i(e,{pluginName:"multiDrag",utils:{select:function(e){var t=e.parentNode[z];t&&t.options.multiDrag&&!~bt.indexOf(e)&&(pt&&pt!==t&&(pt.multiDrag._deselectMultiDrag(),pt=t),S(e,t.options.selectedClass,!0),bt.push(e))},deselect:function(e){var t=e.parentNode[z],n=bt.indexOf(e);t&&t.options.multiDrag&&~n&&(S(e,t.options.selectedClass,!1),bt.splice(n,1))}},eventProperties:function(){var e=this,t=[],n=[];return bt.forEach((function(a){var o;t.push({multiDragElement:a,index:a.sortableIndex}),o=yt&&a!==gt?-1:yt?I(a,":not(."+e.options.selectedClass+")"):I(a),n.push({multiDragElement:a,index:o})})),{items:c(bt),clones:[].concat(vt),oldIndicies:t,newIndicies:n}},optionListeners:{multiDragKey:function(e){return"ctrl"===(e=e.toLowerCase())?e="Control":e.length>1&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e}}})}function Zt(e,t){vt.forEach((function(n,a){var o=t.children[n.sortableIndex+(e?Number(a):0)];o?t.insertBefore(n,o):t.appendChild(n)}))}function jt(){bt.forEach((function(e){e!==gt&&e.parentNode&&e.parentNode.removeChild(e)}))}Ve.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?E(document,"dragover",this._handleAutoScroll):this.options.supportPointer?E(document,"pointermove",this._handleFallbackAutoScroll):t.touches?E(document,"touchmove",this._handleFallbackAutoScroll):E(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?y(document,"dragover",this._handleAutoScroll):(y(document,"pointermove",this._handleFallbackAutoScroll),y(document,"touchmove",this._handleFallbackAutoScroll),y(document,"mousemove",this._handleFallbackAutoScroll)),rt(),ot(),clearTimeout(j),j=void 0},nulling:function(){et=Ke=qe=at=tt=Je=Qe=null,nt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,a=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,r=document.elementFromPoint(a,o);if(et=e,t||this.options.forceAutoScrollFallback||p||m||f){it(e,this.options,r,t);var l=R(r,!0);!at||tt&&a===Je&&o===Qe||(tt&&rt(),tt=setInterval((function(){var r=R(document.elementFromPoint(a,o),!0);r!==l&&(l=r,ot()),it(e,n.options,r,t)}),10),Je=a,Qe=o)}else{if(!this.options.bubbleScroll||R(r,!0)===T())return void ot();it(e,this.options,R(r,!1),!1)}}},i(e,{pluginName:"scroll",initializeByDefault:!0})}),Ve.mount(ut,ct);const wt=Ve}}]);