/*! For license information please see 980f07c6.3d9e760b.js.LICENSE.txt */
(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[19530],{313:(e,t,s)=>{"use strict";s.d(t,{A:()=>g});var n=s(74848),o=s(86857),i=s(26763),a=s(11848),r=s(25292),c=s(28820),l=s(6229);const d={root:`${l.H}-skeleton-root`,list:`${l.H}-list`},u=(0,a.Ay)(o.A,{name:l.H,slot:"SkeletonRoot"})((()=>({})));function g(e){return(0,n.jsx)(u,Object.assign({className:d.root},e,{children:(0,n.jsx)(r.A,{children:(0,n.jsx)(c.A,Object.assign({className:d.list},{children:[...Array(4)].map(((e,t)=>(0,n.jsx)(i.A,{elevation:0},t)))}))})}))}},6229:(e,t,s)=>{"use strict";s.d(t,{H:()=>n});const n="SCCategoryTrendingFeedWidget"},7080:(e,t,s)=>{"use strict";s.d(t,{A:()=>K});var n=s(31635),o=s(74848),i=s(96540),a=s(11848),r=s(44675),c=s(90508),l=s(25292),d=s(47859),u=s(28820),g=s(36870),p=s(42942),m=s(86857),y=s(27202),A=s(13550),j=s(29368),h=s(28692),x=s(94520),f=s(55157),b=s(15906),O=s(84497),_=s(26763),S=s(58065),v=s(95754),N=s(19546),C=s.n(N),E=s(29251),T=s(43749),I=s(313),L=s(79197),k=s(9063),F=s(86354),R=s(2877),H=s(75753),P=s(20411),w=s(3338),M=s(65846),U=s(3341),D=s(88352),$=s(45949),W=s(6229);const X={root:`${W.H}-root`,title:`${W.H}-title`,noResults:`${W.H}-no-results`,showMore:`${W.H}-show-more`,dialogRoot:`${W.H}-dialog-root`,endMessage:`${W.H}-end-message`},z=(0,a.Ay)(m.A,{name:W.H,slot:"Root"})((()=>({}))),Q=(0,a.Ay)(E.A,{name:W.H,slot:"DialogRoot"})((()=>({})));const K=function(e){const t=(0,L.A)({props:e,name:W.H}),{className:s=null,categoryId:a=null,autoHide:m=null,limit:N=3,FeedObjectProps:E={template:v.a.SNIPPET},cacheStrategy:K=h.So.CACHE_FIRST,onHeightChange:V,onStateChange:B,DialogProps:G={}}=t,q=(0,n.__rest)(t,["className","categoryId","autoHide","limit","FeedObjectProps","cacheStrategy","onHeightChange","onStateChange","DialogProps"]),[J,Y]=(0,i.useReducer)($.r6,{isLoadingNext:!1,next:null,cacheKey:F.j3(F.hl,a),cacheStrategy:K,visibleItems:N},$.Ox),[Z,ee]=(0,i.useState)(!1),te=(0,R.X1)(),se=(0,H.Sw)(),ne=(0,P.I$)(),oe=(0,i.useMemo)((()=>w.g4 in se.preferences&&se.preferences[w.g4].value),[se]),ie=(0,r.A)(),ae=(0,c.A)(ie.breakpoints.down("md")),{scCategory:re}=(0,M.A)({id:a}),ce=re?re.id:null,le=(0,i.useMemo)((()=>()=>{J.initialized||J.isLoadingNext||(Y({type:$.Qd.LOADING_NEXT}),y.A.getCategoryTrendingFeed(ce,{limit:N}).then((e=>{Y({type:$.Qd.LOAD_NEXT_SUCCESS,payload:Object.assign(Object.assign({},e),{initialized:!0})})})).catch((e=>{Y({type:$.Qd.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),x.V.error(b.d,e)})))}),[ce,J.isLoadingNext,J.initialized,N,Y]);(0,i.useEffect)((()=>{var e;let t;if(void 0!==te.user&&ce&&(oe||!oe&&(null===(e=te.user)||void 0===e?void 0:e.id)))return t=setTimeout(le),()=>{t&&clearTimeout(t)}}),[ce,te.user,oe]),(0,i.useEffect)((()=>{Z&&J.next&&J.results.length===N&&J.initialized&&(Y({type:$.Qd.LOADING_NEXT}),y.A.getCategoryTrendingFeed(ce,{offset:N,limit:10}).then((e=>{Y({type:$.Qd.LOAD_NEXT_SUCCESS,payload:Object.assign(Object.assign({},e),{initialized:!0})})})).catch((e=>{Y({type:$.Qd.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),x.V.error(b.d,e)})))}),[Z,N,J.next,J.results.length,J.initialized,ce]),(0,i.useEffect)((()=>{V&&V()}),[J.results]),(0,i.useEffect)((()=>{(oe||te.user)&&(0,f.F)(ce)&&K===h.So.NETWORK_ONLY&&B&&B({cacheStrategy:h.So.CACHE_FIRST})}),[oe,K,ce,te.user]);const de=(0,i.useMemo)((()=>()=>{Y({type:$.Qd.LOADING_NEXT}),A.A.request({url:J.next,method:j.A.CategoryTrendingFeed.method}).then((e=>{Y({type:$.Qd.LOAD_NEXT_SUCCESS,payload:e.data})}))}),[Y,J.next]),ue=()=>{ee((e=>!e))};if(!oe&&!te.user||m&&!J.count&&J.initialized)return(0,o.jsx)(k.A,{});if(!J.initialized)return(0,o.jsx)(I.A,{});const ge=(0,o.jsxs)(l.A,{children:[(0,o.jsx)(d.A,Object.assign({className:X.title,variant:"h5"},{children:(0,o.jsx)(S.A,{id:"ui.categoryTrendingFeedWidget.title",defaultMessage:"ui.categoryTrendingFeedWidget.title"})})),J.count?(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(u.A,{children:J.results.slice(0,J.visibleItems).map((e=>(0,o.jsx)(g.Ay,{children:(0,o.jsx)(O.A,Object.assign({elevation:0,feedObject:e[e.type]},E))},e[e.type].id)))}),J.count>J.visibleItems&&(0,o.jsx)(p.A,Object.assign({className:X.showMore},ae?{onClick:ue}:{component:U.A,to:ne.url(D.CATEGORY_TRENDING_FEED_ROUTE_NAME,re)},{children:(0,o.jsx)(S.A,{id:"ui.categoryTrendingFeedWidget.button.showAll",defaultMessage:"ui.categoryTrendingFeedWidget.button.showAll"})}))]}):(0,o.jsx)(d.A,Object.assign({className:X.noResults,variant:"body2"},{children:(0,o.jsx)(S.A,{id:"ui.categoryTrendingFeedWidget.noResults",defaultMessage:"ui.categoryTrendingFeedWidget.noResults"})})),Z&&(0,o.jsx)(Q,Object.assign({className:X.dialogRoot,title:(0,o.jsx)(S.A,{defaultMessage:"ui.categoryTrendingFeedWidget.title",id:"ui.categoryTrendingFeedWidget.title",values:{total:J.count}}),onClose:ue,open:Z},G,{children:(0,o.jsx)(T.A,Object.assign({dataLength:J.results.length,next:de,hasMoreNext:Boolean(J.next),loaderNext:(0,o.jsx)(_.A,Object.assign({elevation:0},E)),height:ae?"100%":400,endMessage:(0,o.jsx)(d.A,Object.assign({className:X.endMessage},{children:(0,o.jsx)(S.A,{id:"ui.categoryTrendingFeedWidget.noMoreResults",defaultMessage:"ui.categoryTrendingFeedWidget.noMoreResults"})}))},{children:(0,o.jsx)(u.A,{children:J.results.map((e=>(0,o.jsx)(g.Ay,{children:(0,o.jsx)(O.A,Object.assign({elevation:0,feedObject:e[e.type]},E))},e[e.type].id)))})}))}))]});return(0,o.jsx)(z,Object.assign({className:C()(X.root,s)},q,{children:ge}))}},13327:(e,t)=>{var s;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var s=arguments[t];s&&(e=a(e,i(s)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var s in e)n.call(e,s)&&e[s]&&(t=a(t,s));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0===(s=function(){return o}.apply(t,[]))||(e.exports=s)}()},17955:(e,t,s)=>{"use strict";s.d(t,{A:()=>g});var n=s(74848),o=s(11848),i=s(25292),a=s(71194),r=s(73785),c=s(86857),l=s(43955);const d={root:`${l.H}-skeleton-root`,content:`${l.H}-content`,input:`${l.H}-input`,avatar:`${l.H}-avatar`},u=(0,o.Ay)(c.A,{name:l.H,slot:"SkeletonRoot"})((()=>({})));function g(){return(0,n.jsx)(u,Object.assign({className:d.root},{children:(0,n.jsxs)(i.A,Object.assign({className:d.content},{children:[(0,n.jsx)(a.A,Object.assign({className:d.input},{children:(0,n.jsx)(r.A,{animation:"wave",variant:"text"})})),(0,n.jsx)(a.A,Object.assign({className:d.avatar},{children:(0,n.jsx)(r.A,{className:d.avatar,animation:"wave",variant:"circular"})}))]}))}))}},36175:(e,t,s)=>{"use strict";s.d(t,{F:()=>n});const n={user:{username:"beatrice",password:"Password!!Beatrice2021",client_id:"XJjPE54IBBjhibs0Rf0wZ969cZNPq6WjC02FrkaM",grant_type:"password"},portal:"https://internal.selfcommunity.io/mkg2zxd0"}},37180:(e,t,s)=>{"use strict";s.d(t,{A:()=>p});var n=s(96540),o=s(36175),i=s(75251);function a(e,t){void 0===e&&(e=""),void 0===t&&(t={});const s=Object.keys(t).map((e=>encodeURIComponent(e)+"="+encodeURIComponent(t[e]))).join("&");return fetch(e,{method:"POST",headers:{accept:"application/json","content-type":"application/x-www-form-urlencoded"},body:s})}function r(){if((0,i.A)()){const e={refresh_token:JSON.parse(window.localStorage.getItem("token")).refresh_token,client_id:o.F.user.client_id,grant_type:"refresh_token"};return a(`${o.F.portal}/oauth/token/`,e).then((e=>e.json())).then((e=>({accessToken:e.access_token,refreshToken:e.refresh_token,tokenType:e.token_type,expiresIn:e.expires_in}))).catch((e=>Promise.reject(e)))}}function c(){const e=(0,i.A)(),[t,s]=(0,n.useState)(e?JSON.parse(window.localStorage.getItem("token")):"");return(0,n.useEffect)((()=>{e&&(!t||1e3*t.expiresIn<Date.now()?a(`${o.F.portal}/oauth/token/`,o.F.user).then((e=>e.json())).then((e=>({accessToken:e.access_token,refreshToken:e.refresh_token,tokenType:e.token_type,expiresIn:e.expires_in}))).catch((e=>e)).then((e=>{s(e)})):e&&s(JSON.parse(window.localStorage.getItem("token"))))}),[e]),(0,n.useEffect)((()=>{e&&window.localStorage.setItem("token",JSON.stringify(t))}),[e,t]),t}var l=s(45284),d=s(28554),u=s(73906),g=s(74848);function p(e){let{children:t}=e;const s=c(),n={portal:o.F.portal,locale:{default:"en"},session:{type:"OAuth",clientId:o.F.user.client_id,authToken:s,handleRefreshToken:r},theme:d.Ay,handleAnonymousAction:()=>{alert("Anonymous action")}};return(0,g.jsx)(u.A,{children:()=>(0,g.jsx)(l.Ay,{conf:n,children:t})})}},43955:(e,t,s)=>{"use strict";s.d(t,{H:()=>n});const n="SCInlineComposerWidget"},45949:(e,t,s)=>{"use strict";s.d(t,{Ox:()=>a,Qd:()=>o,r6:()=>i});var n=s(28692);const o={LOADING_NEXT:"_loading_next",LOADING_PREVIOUS:"_loading_previous",LOAD_NEXT_SUCCESS:"_load_next_success",LOAD_PREVIOUS_SUCCESS:"_load_previous_success",LOAD_NEXT_FAILURE:"_load_next_failure",LOAD_PREVIOUS_FAILURE:"_load_previous_failure",SET_RESULTS:"_set_results",SET_VISIBLE_ITEMS:"_set_visible_items",INITIALIZE:"_initialize",RESET:"_reset"};function i(e,t){var s;let i=Object.assign({},e);switch(t.type){case o.LOADING_NEXT:i=Object.assign(Object.assign({},e),{isLoadingNext:!0,errorLoadNext:null});break;case o.LOADING_PREVIOUS:i=Object.assign(Object.assign({},e),{isLoadingPrevious:!0,errorLoadPrevious:null});break;case o.LOAD_NEXT_SUCCESS:i=Object.assign(Object.assign({},e),{isLoadingNext:!1,count:t.payload.count,next:t.payload.next?t.payload.next:null,results:[...e.results,...t.payload.results],errorLoadNext:null,initialized:(null===(s=t.payload)||void 0===s?void 0:s.initialized)||!0});break;case o.LOAD_PREVIOUS_SUCCESS:i=Object.assign(Object.assign({},e),{isLoadingPrevious:!1,count:t.payload.count,previous:t.payload.previous?t.payload.previous:null,results:[...t.payload.results,...e.results],errorPreviousNext:null});break;case o.SET_RESULTS:i=Object.assign(Object.assign(Object.assign({},e),{results:[...t.payload.results]}),t.payload.count?{count:t.payload.count}:{});break;case o.SET_VISIBLE_ITEMS:i=Object.assign(Object.assign({},e),{visibleItems:t.payload.visibleItems});break;case o.LOAD_NEXT_FAILURE:i=Object.assign(Object.assign({},e),{isLoadingNext:!1,errorLoadNext:t.payload.error});break;case o.LOAD_PREVIOUS_FAILURE:i=Object.assign(Object.assign({},e),{isLoadingNext:!1,errorLoadPrevious:t.payload.error});break;case o.RESET:i={isLoadingNext:!1,next:null,results:[],count:0,errorLoadNext:null,initialized:!1};break;case o.INITIALIZE:i={cacheKey:t.payload.cacheKey?t.payload.cacheKey:null,count:t.payload.count?t.payload.count:0,results:t.payload.results?t.payload.results:[],next:t.payload.next?t.payload.next:null,previous:t.payload.previous?t.payload.previous:null,isLoadingNext:!!t.payload.isLoadingNext&&t.payload.isLoadingNext,isLoadingPrevious:!!t.payload.isLoadingPrevious&&t.payload.isLoadingPrevious,visibleItems:t.payload.visibleItems?t.payload.visibleItems:null,initialized:!1}}return n.Ay.set(i.cacheKey,i),i}function a(e){let t={cacheKey:e.cacheKey?e.cacheKey:null,count:e.count?e.count:0,results:e.results?e.results:[],next:e.next?e.next:null,previous:e.previous?e.previous:null,isLoadingNext:!!e.isLoadingNext&&e.isLoadingNext,isLoadingPrevious:!!e.isLoadingPrevious&&e.isLoadingPrevious,visibleItems:e.visibleItems?e.visibleItems:null,initialized:!1};if(t.cacheKey&&n.Ay.hasKey(t.cacheKey)&&e.cacheStrategy!==n.So.NETWORK_ONLY){const e=n.Ay.get(t.cacheKey);return Object.assign(Object.assign({},t),e)}return t}},46703:(e,t,s)=>{"use strict";s.d(t,{A:()=>m});var n=s(74848),o=s(96540),i=s(11848),a=s(57106),r=s(50444),c=s(17955),l=s(26763),d=s(95754),u=s(49071);const g={root:`${u.H}-skeleton-root`},p=(0,i.Ay)(a.A,{name:u.H,slot:"SkeletonRoot"})((()=>({})));function m(){return(0,n.jsxs)(p,Object.assign({className:g.root,sidebar:(0,n.jsxs)(o.Fragment,{children:[(0,n.jsx)(r.A,{sx:{mb:2}}),(0,n.jsx)(r.A,{sx:{mb:2}})]})},{children:[(0,n.jsx)(c.A,{}),Array.from({length:5}).map(((e,t)=>(0,n.jsx)(l.A,{template:d.a.DETAIL},t)))]}))}},49071:(e,t,s)=>{"use strict";s.d(t,{H:()=>n});const n="SCCategoryFeedTemplate"},51525:(e,t,s)=>{"use strict";s.d(t,{A:()=>p});var n=s(74848),o=s(86857),i=s(41219),a=s(11848),r=s(25292),c=s(28820),l=s(36870),d=s(78673);const u={root:`${d.H}-skeleton-root`,list:`${d.H}-list`},g=(0,a.Ay)(o.A,{name:d.H,slot:"SkeletonRoot"})((()=>({})));function p(e){return(0,n.jsx)(g,Object.assign({className:u.root},e,{children:(0,n.jsx)(r.A,{children:(0,n.jsx)(c.A,Object.assign({className:u.list},{children:[...Array(4)].map(((e,t)=>(0,n.jsx)(l.Ay,{children:(0,n.jsx)(i.A,{elevation:0})},t)))}))})}))}},53919:(e,t,s)=>{"use strict";s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>c,metadata:()=>n,toc:()=>u});const n=JSON.parse('{"id":"sdk/community-js/react-templates/Components/CategoryFeed","title":"Category Feed","description":"The Category Feed template renders the category feed.","source":"@site/docs/sdk/community-js/react-templates/Components/CategoryFeed.mdx","sourceDirName":"sdk/community-js/react-templates/Components","slug":"/sdk/community-js/react-templates/Components/CategoryFeed","permalink":"/docs/sdk/community-js/react-templates/Components/CategoryFeed","draft":false,"unlisted":false,"editUrl":"https://github.com/selfcommunity/developers-doc/tree/main/docs/sdk/community-js/react-templates/Components/CategoryFeed.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_label":"Category Feed","sidebar_position":1,"title":"Category Feed"},"sidebar":"sdkSidebar","previous":{"title":"Category","permalink":"/docs/sdk/community-js/react-templates/Components/Category"},"next":{"title":"Explore Feed","permalink":"/docs/sdk/community-js/react-templates/Components/ExploreFeed"}}');var o=s(74848),i=s(28453),a=s(37180),r=s(88736);const c={sidebar_label:"Category Feed",sidebar_position:1,title:"Category Feed"},l=void 0,d={},u=[{value:"Usage",id:"usage",level:4}];function g(e){const t={blockquote:"blockquote",code:"code",h4:"h4",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsx)(t.p,{children:"The Category Feed template renders the category feed."}),"\n"]}),"\n","\n",(0,o.jsx)(a.A,{children:(0,o.jsx)(r.A,{categoryId:3})}),"\n",(0,o.jsx)(t.h4,{id:"usage",children:"Usage"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-jsx",children:" import React from 'react';\n import {SCContextProvider} from '@selfcommunity/react-core';\n import {CategoryFeed} from '@selfcommunity/react-templates';\n\n function App() {\n   const conf = {\n     portal: '<community-path>',\n     session: {\n       type: 'OAuth',\n       token: '<community-token>',\n       refreshToken: '<community-refresh-token>',\n       refreshTokenEndpoint: '<community-refresh-endpoint>',\n     },\n   };\n   return (\n     <SCContextProvider conf={conf}><CategoryFeed/></SCContextProvider>\n   );\n }\n"})})]})}function p(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(g,{...e})}):g(e)}},55157:(e,t,s)=>{"use strict";function n(e){return!isNaN(e)&&parseInt(String(Number(e)))==e&&!isNaN(parseInt(String(e),10))}s.d(t,{F:()=>n})},62969:(e,t,s)=>{"use strict";s.d(t,{A:()=>W});var n=s(31635),o=s(74848),i=s(96540),a=s(11848),r=s(44675),c=s(90508),l=s(25292),d=s(47859),u=s(28820),g=s(36870),p=s(42942),m=s(86857),y=s(27202),A=s(13550),j=s(29368),h=s(86354),x=s(2877),f=s(75753),b=s(3338),O=s(65846),_=s(58065),S=s(16799),v=s(41219),N=s(19546),C=s.n(N),E=s(29251),T=s(43749),I=s(51525),L=s(79197),k=s(9063),F=s(28692),R=s(94520),H=s(55157),P=s(45949),w=s(15906),M=s(78673);const U={root:`${M.H}-root`,title:`${M.H}-title`,noResults:`${M.H}-no-results`,showMore:`${M.H}-show-more`,dialogRoot:`${M.H}-dialog-root`,endMessage:`${M.H}-end-message`},D=(0,a.Ay)(m.A,{name:M.H,slot:"Root"})((()=>({}))),$=(0,a.Ay)(E.A,{name:M.H,slot:"DialogRoot"})((()=>({})));const W=function(e){const t=(0,L.A)({props:e,name:M.H}),{className:s=null,categoryId:a=null,autoHide:m=null,limit:N=3,UserProps:E={},cacheStrategy:W=F.So.CACHE_FIRST,onHeightChange:X,onStateChange:z,DialogProps:Q={}}=t,K=(0,n.__rest)(t,["className","categoryId","autoHide","limit","UserProps","cacheStrategy","onHeightChange","onStateChange","DialogProps"]),[V,B]=(0,i.useReducer)(P.r6,{isLoadingNext:!1,next:null,cacheKey:h.j3(h.ih,a),cacheStrategy:W,visibleItems:N},P.Ox),[G,q]=(0,i.useState)(!1),J=(0,x.X1)(),Y=(0,f.Sw)(),Z=(0,i.useMemo)((()=>b.g4 in Y.preferences&&Y.preferences[b.g4].value),[Y]),ee=(0,r.A)(),te=(0,c.A)(ee.breakpoints.down("md")),{scCategory:se}=(0,O.A)({id:a}),ne=se?se.id:null,oe=(0,i.useMemo)((()=>()=>{V.initialized||V.isLoadingNext||(B({type:P.Qd.LOADING_NEXT}),y.A.getCategoryTrendingFollowers(ne,{limit:N}).then((e=>{B({type:P.Qd.LOAD_NEXT_SUCCESS,payload:Object.assign(Object.assign({},e),{initialized:!0})})})).catch((e=>{B({type:P.Qd.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),R.V.error(w.d,e)})))}),[ne,V.isLoadingNext,V.initialized,N,B]);(0,i.useEffect)((()=>{var e;let t;if(void 0!==J.user&&ne&&(Z||!Z&&(null===(e=J.user)||void 0===e?void 0:e.id)))return t=setTimeout(oe),()=>{t&&clearTimeout(t)}}),[ne,J.user,Z]),(0,i.useEffect)((()=>{G&&V.next&&V.results.length===N&&V.initialized&&(B({type:P.Qd.LOADING_NEXT}),y.A.getCategoryTrendingFollowers(ne,{offset:N,limit:10}).then((e=>{B({type:P.Qd.LOAD_NEXT_SUCCESS,payload:e})})).catch((e=>{B({type:P.Qd.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),R.V.error(w.d,e)})))}),[G,N,V.next,V.initialized,V.results.length,ne]),(0,i.useEffect)((()=>{X&&X()}),[V.results]),(0,i.useEffect)((()=>{(Z||J.user)&&(0,H.F)(ne)&&W===F.So.NETWORK_ONLY&&z&&z({cacheStrategy:F.So.CACHE_FIRST})}),[Z,W,ne,J.user]);const ie=(0,i.useMemo)((()=>()=>{B({type:P.Qd.LOADING_NEXT}),A.A.request({url:V.next,method:j.A.CategoryTrendingPeople.method}).then((e=>{B({type:P.Qd.LOAD_NEXT_SUCCESS,payload:e.data})}))}),[B,V.next]),ae=()=>{q((e=>!e))};if(!Z&&!J.user||m&&!V.count&&V.initialized)return(0,o.jsx)(k.A,{});if(!V.initialized)return(0,o.jsx)(I.A,{});const re=(0,o.jsxs)(l.A,{children:[(0,o.jsx)(d.A,Object.assign({className:U.title,variant:"h5"},{children:(0,o.jsx)(_.A,{id:"ui.categoryTrendingUsersWidget.title",defaultMessage:"ui.categoryTrendingUsersWidget.title"})})),V.count?(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(u.A,{children:V.results.slice(0,V.visibleItems).map((e=>(0,o.jsx)(g.Ay,{children:(0,o.jsx)(S.A,Object.assign({elevation:0,user:e},E))},e.id)))}),V.count>V.visibleItems&&(0,o.jsx)(p.A,Object.assign({className:U.showMore,onClick:ae},{children:(0,o.jsx)(_.A,{id:"ui.categoryTrendingUsersWidget.button.showAll",defaultMessage:"ui.categoryTrendingUsersWidget.button.showAll"})}))]}):(0,o.jsx)(d.A,Object.assign({className:U.noResults,variant:"body2"},{children:(0,o.jsx)(_.A,{id:"ui.categoryTrendingUsersWidget.noResults",defaultMessage:"ui.categoryTrendingUsersWidget.noResults"})})),G&&(0,o.jsx)($,Object.assign({className:U.dialogRoot,title:(0,o.jsx)(_.A,{defaultMessage:"ui.categoryTrendingUsersWidget.title",id:"ui.categoryTrendingUsersWidget.title",values:{total:V.count}}),onClose:ae,open:G},Q,{children:(0,o.jsx)(T.A,Object.assign({dataLength:V.results.length,next:ie,hasMoreNext:Boolean(V.next),loaderNext:(0,o.jsx)(v.A,Object.assign({elevation:0},E)),height:te?"100%":400,endMessage:(0,o.jsx)(d.A,Object.assign({className:U.endMessage},{children:(0,o.jsx)(_.A,{id:"ui.categoryTrendingUsersWidget.noMoreResults",defaultMessage:"ui.categoryTrendingUsersWidget.noMoreResults"})}))},{children:(0,o.jsx)(u.A,{children:V.results.map((e=>(0,o.jsx)(g.Ay,{children:(0,o.jsx)(S.A,Object.assign({elevation:0,user:e},E))},e.id)))})}))}))]});return(0,o.jsx)(D,Object.assign({className:C()(U.root,s)},K,{children:re}))}},65846:(e,t,s)=>{"use strict";s.d(t,{A:()=>p});var n=s(96540),o=s(42269),i=s(13550),a=s(29368),r=s(28692),c=s(27375),l=s(94520),d=s(86354),u=s(85573),g=s(2877);function p({id:e=null,category:t=null,cacheStrategy:s=r.So.CACHE_FIRST}){const p=t?t.id:e,m=(0,g.X1)(),y=m.user?m.user.id:null,A=(0,d.fL)(p),j=y?t:(0,c.$i)(t,["followed"]),[h,x]=(0,n.useState)(s!==r.So.NETWORK_ONLY?r.Ay.get(A,j):null),[f,b]=(0,n.useState)(null),O=(0,n.useMemo)((()=>()=>i.A.request({url:a.A.Category.url({id:p}),method:a.A.Category.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[p]);return(0,n.useEffect)((()=>{p&&(!h||h&&p!==h.id)&&O().then((e=>{const t=y?e:(0,c.$i)(e,["followed"]);x(t),r.Ay.set(A,t)})).catch((t=>{r.Ay.delete(A),b(`Category with id ${e} not found`),l.V.error(o.K,`Category with id ${e} not found`),l.V.error(o.K,t.message)}))}),[p]),(0,u.ho)((()=>{if(t){const e=y?t:(0,c.$i)(t,["followed"]);x(e),r.Ay.set(A,e)}}),[t]),{scCategory:h,setSCCategory:x,error:f}}},78673:(e,t,s)=>{"use strict";s.d(t,{H:()=>n});const n="SCCategoryTrendingUsersWidget"},88736:(e,t,s)=>{"use strict";s.d(t,{A:()=>F});var n=s(74848),o=s(96540),i=s(11848),a=s(47207),r=s(62969),c=s(7080),l=s(74531),d=s(84497),u=s(26763),g=s(95754),p=s(93371),m=s(29368),y=s(20411),A=s(2877),j=s(65846),h=s(3341),x=s(88352),f=s(44817),b=s(97100),O=s(92922),_=s(46703),S=s(79197),v=s(13327),N=s.n(v),C=s(58065),E=s(18590),T=s(49071);const I={root:`${T.H}-root`},L=(0,i.Ay)(a.A,{name:T.H,slot:"Root"})((()=>({}))),k=[{type:"widget",component:r.A,componentProps:{},column:"right",position:0},{type:"widget",component:c.A,componentProps:{},column:"right",position:1}];const F=function(e){const t=(0,S.A)({props:e,name:T.H}),{id:s="category_feed",className:i,category:a,categoryId:r,widgets:c=k,FeedObjectProps:v={},FeedSidebarProps:F=null,FeedProps:R={}}=t,H=(0,y.I$)(),P=(0,A.X1)(),{enqueueSnackbar:w}=(0,E.dh)(),M=(0,o.useRef)(),{scCategory:U}=(0,j.A)({id:r,category:a}),D=(0,o.useMemo)((()=>c.map((e=>U?Object.assign(Object.assign({},e),{componentProps:Object.assign(Object.assign({},e.componentProps),{categoryId:U.id})}):e))),[c,U]);return U?(0,n.jsx)(L,Object.assign({id:s,className:N()(I.root,i),ref:M,endpoint:Object.assign(Object.assign({},m.A.CategoryFeed),{url:()=>m.A.CategoryFeed.url({id:U.id})}),widgets:D,ItemComponent:d.A,itemPropsGenerator:(e,t)=>({feedObject:t[t.type],feedObjectType:t.type,feedObjectActivities:t.activities?t.activities:null,markRead:e?!t.seen_by_id.includes(e.id):null}),itemIdGenerator:e=>e[e.type].id,ItemProps:v,ItemSkeleton:u.A,ItemSkeletonProps:{template:g.a.PREVIEW},FeedSidebarProps:F,HeaderComponent:(0,n.jsx)(n.Fragment,{children:(U.content_only_staff&&f.Xl(P.user)||!U.content_only_staff)&&(0,n.jsx)(p.A,{onSuccess:e=>{if(-1===e.categories.findIndex((e=>e.id===U.id)))return void w((0,n.jsx)(C.A,{id:"ui.composerIconButton.composer.success",defaultMessage:"ui.composerIconButton.composer.success"}),{action:t=>(0,n.jsx)(h.A,Object.assign({to:H.url(x[`${e.type.toUpperCase()}_ROUTE_NAME`],l.kB(e))},{children:(0,n.jsx)(C.A,{id:"ui.composerIconButton.composer.viewContribute",defaultMessage:"ui.composerIconButton.composer.viewContribute"})})),variant:"success",autoHideDuration:7e3});const t={type:e.type,[e.type]:e,seen_by_id:[],has_boost:!1};M&&M.current&&M.current.addFeedData(t,!0)},defaultValue:{categories:[U]},feedType:b.i.CATEGORY})}),CustomAdvProps:{categoriesId:[U.id]},enabledCustomAdvPositions:[O.Q.POSITION_FEED_SIDEBAR,O.Q.POSITION_FEED,O.Q.POSITION_BELOW_TOPBAR]},R)):(0,n.jsx)(_.A,{})}},93371:(e,t,s)=>{"use strict";s.d(t,{A:()=>L});var n=s(31635),o=s(74848),i=s(96540),a=s(97100),r=s(45284),c=s(2877),l=s(20411),d=s(75753),u=s(3338),g=s(44817),p=s(3341),m=s(88352),y=s(11848),A=s(25292),j=s(71194),h=s(42942),x=s(27365),f=s(58065),b=s(18590),O=s(86857),_=s(79197),S=s(41707),v=s(35488),N=s(13470),C=s(43955),E=s(9063);const T={root:`${C.H}-root`,content:`${C.H}-content`,input:`${C.H}-input`,avatar:`${C.H}-avatar`},I=(0,y.Ay)(O.A,{name:C.H,slot:"Root"})((()=>({})));const L=function(e){const t=(0,_.A)({props:e,name:C.H}),{mediaObjectTypes:s=[v.A,N.A],defaultValue:y,onSuccess:O=null,label:L,feedType:k=a.i.HOME}=t,F=(0,n.__rest)(t,["mediaObjectTypes","defaultValue","onSuccess","label","feedType"]),R=(0,r.J_)(),H=(0,c.X1)(),P=(0,l.I$)(),{enqueueSnackbar:w}=(0,b.dh)(),M=(0,d.Sw)(),U=(0,i.useMemo)((()=>M.preferences[u.FP].value),[M.preferences]),[D,$]=(0,i.useState)(!1),W=(0,i.useCallback)((()=>{H.user?g.lT(H.user)?w((0,o.jsx)(f.A,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3}):$(!0):R.settings.handleAnonymousAction()}),[H.user,R.settings]),X=(0,i.useCallback)((()=>{$(!1)}),[]);return!g.Xl(H.user)&&U?(0,o.jsx)(E.A,{}):(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(I,Object.assign({className:T.root},F,{children:(0,o.jsxs)(A.A,Object.assign({className:T.content},{children:[(0,o.jsx)(j.A,Object.assign({className:T.input},{children:(0,o.jsx)(h.A,Object.assign({variant:"text",disableFocusRipple:!0,disableRipple:!0,disableElevation:!0,onClick:W,fullWidth:!0,color:"inherit"},{children:null!=L?L:(0,o.jsx)(f.A,{id:"ui.inlineComposerWidget.label",defaultMessage:"ui.inlineComposerWidget.label"})}))})),(0,o.jsx)(j.A,Object.assign({className:T.avatar},{children:H.user?(0,o.jsx)(p.A,Object.assign({to:P.url(m.USER_PROFILE_ROUTE_NAME,H.user)},{children:(0,o.jsx)(x.A,{alt:H.user.username,variant:"circular",src:H.user.avatar})})):(0,o.jsx)(x.A,{variant:"circular"})}))]}))})),D&&(0,o.jsx)(S.A,{open:D,mediaObjectTypes:s,defaultValue:y,fullWidth:!0,onClose:X,onSuccess:e=>{O?O(e):w((0,o.jsx)(f.A,{id:"ui.inlineComposerWidget.success",defaultMessage:"ui.inlineComposerWidget.success"}),{variant:"success",autoHideDuration:3e3}),$(!1)},feedType:k})]})}}}]);