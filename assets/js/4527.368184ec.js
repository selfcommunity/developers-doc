(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[4527],{2783:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var o=s(74848),n=s(96540),a=s(13550),i=s(98669);const r=[-100,-100];var l=s(40094);const c=e=>{const{endpoint:t,params:s={},callback:i,data:r=null}=e,{ref:c,inView:d}=(0,l.Wx)({threshold:.1}),u=(0,n.useRef)(!1);return(0,n.useEffect)((()=>{d?u.current=!0:u.current&&t&&!d&&a.A.request({url:t.url(s),method:t.method,data:r}).then((e=>{i&&i(e)})).catch((()=>null))}),[d]),(0,o.jsx)("div",{ref:c})},d=e=>(0,o.jsx)(i.Ay,Object.assign({once:!0,offset:r},{children:(0,o.jsx)(c,Object.assign({},e))}))},4527:(e,t,s)=>{"use strict";s.d(t,{A:()=>f});var o=s(31635),n=s(74848),a=s(96540),i=s(84497),r=s(95754),l=s(28692),c=s(19546),d=s.n(c),u=s(11848),m=s(71194),p=s(19249);const g=e=>e.type===p.cJ||e.type===p.zG,h="SCMediaShare";var b=s(49441),j=s(65953);const A={displayRoot:`${h}-display-root`,sharePreview:`${h}-share-preview`,sharePlaceholder:`${h}-share-placeholder`},v=(0,u.Ay)(m.A,{name:h,slot:"DisplayRoot"})((()=>({}))),f={name:"share",displayComponent:e=>{var{className:t,medias:s=[]}=e,c=(0,o.__rest)(e,["className","medias"]);const u=(0,a.useMemo)((()=>s.filter(g)),[s]);return 0===u.length?null:(0,n.jsx)(v,Object.assign({className:d()(t,A.displayRoot)},c,{children:u.map(((e,t)=>(0,n.jsx)(m.A,Object.assign({className:A.sharePreview},{children:e.type===p.zG||e.embed&&e.embed.embed_type===p.TY?(0,n.jsx)(j.A,{event:e.embed.metadata,template:b.T.DETAIL,variant:"outlined",square:!0,hideEventParticipants:!0,hideEventPlanner:!0,actions:(0,n.jsx)(n.Fragment,{})}):(0,n.jsx)(i.A,{feedObjectId:e.embed.metadata.id,feedObjectType:e.embed.metadata.type,variant:"outlined",template:r.a.SHARE,cacheStrategy:l.So.CACHE_FIRST})}),t)))}))},triggerButton:null,layerComponent:null,previewComponent:null,filter:g}},8934:(e,t,s)=>{"use strict";s.d(t,{R:()=>b});var o=s(72739),n=s(27482),a=s(96540),i=s(59145),r=s(42942),l=s(11848),c=s(3541),d=s(99370),u=s(46062),m=s(2880),p=s(74848);const g=["align","className","selected","typographyClassName","value","variant","width"],h=(0,l.Ay)(r.A,{name:"MuiPickersToolbarButton",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:0,minWidth:16,textTransform:"none"}),b=a.forwardRef((function(e,t){const s=(0,c.A)({props:e,name:"MuiPickersToolbarButton"}),{align:a,className:r,selected:l,typographyClassName:b,value:j,variant:A,width:v}=s,f=(0,n.A)(s,g),x=(e=>{const{classes:t}=e;return(0,d.A)({root:["root"]},m.B,t)})(s);return(0,p.jsx)(h,(0,o.A)({variant:"text",ref:t,className:(0,i.A)(r,x.root)},v?{sx:{width:v}}:{},f,{children:(0,p.jsx)(u.k,{align:a,className:b,variant:A,value:j,selected:l})}))}))},9149:function(e){var t,s;e.exports=(t={705:e=>{e.exports=function(e,t){const s=[];return 0===t.length?s.push({text:e,highlight:!1}):t[0][0]>0&&s.push({text:e.slice(0,t[0][0]),highlight:!1}),t.forEach(((o,n)=>{const a=o[0],i=o[1];s.push({text:e.slice(a,i),highlight:!0}),n===t.length-1?i<e.length&&s.push({text:e.slice(i,e.length),highlight:!1}):i<t[n+1][0]&&s.push({text:e.slice(i,t[n+1][0]),highlight:!1})})),s}}},s={},function e(o){var n=s[o];if(void 0!==n)return n.exports;var a=s[o]={exports:{}};return t[o](a,a.exports,e),a.exports}(705))},13470:(e,t,s)=>{"use strict";s.d(t,{A:()=>B});var o=s(31635),n=s(74848),a=s(96540),i=s(19249),r=s(87631),l=s(19546),c=s.n(l);const d="SCMediaLink";var u=s(11848),m=s(71194),p=s(3246);const g=e=>e.type===i.E4&&e.embed&&e.embed.embed_type===i.Yc,h={displayRoot:`${d}-display-root`,displayLink:`${d}-link`,displayHtmlWrap:`${d}-html-wrap`,displayHtml:`${d}-html`,displayHtmlPlaceholder:`${d}-html-placeholder`,displayHtmlLoading:`${d}-html-loading`,displayVideo:`${d}-video`,thumbnail:`${d}-thumbnail`,thumbnailFullWidth:`${d}-thumbnail`,image:`${d}-image`,snippet:`${d}-snippet`,snippetTitle:`${d}-snippet-title`,snippetDescription:`${d}-snippet-description`},b=(0,u.Ay)(m.A,{name:d,slot:"DisplayRoot"})((({theme:e})=>({}))),j=e=>{const{className:t="",medias:s,fullWidth:l=!1,onMediaClick:d=null}=e,u=(0,o.__rest)(e,["className","medias","fullWidth","onMediaClick"]),p=e=>{d&&d(e)},j=(0,a.useMemo)((()=>s.filter(g)),[s]),A=(e,t)=>{const s=new URL(e.embed.metadata.url).hostname.replace("www.","");return(0,n.jsxs)(m.A,Object.assign({className:h.displayLink},{children:[e.embed.metadata.images&&e.embed.metadata.images.length>0&&(0,n.jsx)(n.Fragment,{children:l?(0,n.jsx)(m.A,{className:c()(h.thumbnailFullWidth,h.image),style:{background:`url(${e.image})`,paddingBottom:100/e.image_width/e.image_height+"%"}}):(0,n.jsx)(m.A,{className:c()(h.thumbnail,h.image),style:{background:`url(${e.image})`}})}),(0,n.jsxs)(m.A,Object.assign({className:h.snippet},{children:[(0,n.jsx)("b",Object.assign({className:h.snippetTitle},{children:e.embed.metadata.title})),(0,n.jsx)("br",{}),(0,n.jsx)("p",Object.assign({className:h.snippetDescription},{children:e.embed.metadata.description})),(0,n.jsx)("a",Object.assign({href:e.embed.metadata.url,target:"_blank",onClick:()=>p(e)},{children:s}))]})),(0,n.jsx)("div",{style:{clear:"both"}})]}),t)};return 0===j.length?null:(0,n.jsx)(b,Object.assign({className:c()(t,h.displayRoot)},u,{children:j.map(((e,t)=>e.embed.metadata&&e.embed.metadata.type===i.m6?(0,n.jsx)(r.A,{url:e.url,width:"100%",height:360,onVideoWatch:()=>p(e)},t):(0,n.jsx)(a.Fragment,{children:A(e,t)},t)))}))};var A=s(4671),v=s(40059);const f={triggerRoot:`${d}-trigger-root`},x=(0,u.Ay)(A.A,{name:d,slot:"TriggerRoot"})((()=>({})));var O=s(58065),y=s(46831),C=s(47859),E=s(42942),N=s(28968),w=s(15901);const T={previewRoot:`${d}-preview-root`,media:`${d}-media`,video:`${d}-media-video`,delete:`${d}-delete`},k=(0,u.Ay)(m.A,{name:d,slot:"PreviewRoot"})((()=>({}))),S=a.forwardRef(((e,t)=>{const{className:s,onChange:r,value:l=[]}=e,d=(0,o.__rest)(e,["className","onChange","value"]),u=(0,a.useMemo)((()=>l.filter(g)),[l]),p=(0,a.useCallback)((e=>{r&&r([...l.filter((t=>-1===e.findIndex((e=>e.id===t.id)))),...e])}),[r,l]),h=(0,a.useCallback)((e=>()=>r&&r(l.filter((t=>t.id!==e)))),[r,l]);return(0,n.jsx)(k,Object.assign({ref:t,className:c()(s,T.previewRoot)},d,{children:u.length>0&&(0,n.jsx)(w.ReactSortable,Object.assign({list:u,setList:p},{children:u.map((e=>(0,n.jsxs)(m.A,Object.assign({className:c()(T.media,{[T.video]:e.embed.metadata&&e.embed.metadata.type===i.m6})},{children:[(0,n.jsx)(j,{medias:[e]}),(0,n.jsx)(A.A,Object.assign({className:T.delete,onClick:h(e.id),size:"small"},{children:(0,n.jsx)(v.A,{children:"delete"})}))]}),e.id)))}))}))}));var _=s(43581),M=s(206),R=s(20973),P=s(13550),I=s(29368),$=s(24760),D=s(44467);const L={url:"",urlError:null},V=e=>{var t,s;const[r,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(Object.assign({},L)),{url:u,urlError:m}=c,g=a.useRef(u);g.current=u;const h=a.useRef(null),{helperText:b,error:j,onSuccess:v}=e,f=(0,o.__rest)(e,["helperText","error","onSuccess"]);(0,a.useEffect)((()=>()=>clearTimeout(h.current)),[]);const x=e=>{e&&(e.preventDefault(),e.stopPropagation()),h.current&&clearTimeout(h.current),l(!0),P.A.request({url:I.A.ComposerMediaCreate.url(),method:I.A.ComposerMediaCreate.method,data:{type:i.E4,url:g.current}}).then((e=>{d(Object.assign({},L)),v&&v(e.data)})).catch((e=>{const t=(0,$.zl)(e);d({urlError:t.urlError?`urlError.${t.urlError.error}`:t.error,url:g.current})})).then((()=>l(!1)))};return(0,n.jsx)("form",Object.assign({method:"post",onSubmit:x},{children:(0,n.jsx)(_.A,Object.assign({value:u,type:"url",onChange:e=>{const t=e.target,s=t.value.startsWith("h")?t.value:`https://${t.value}`;d({url:s,urlError:(0,D.AY)(s)?null:"validationError"})},onPaste:e=>{h.current&&clearTimeout(h.current),h.current=setTimeout((()=>{(0,D.AY)(g.current)&&x(e)}),500)},error:j||Boolean(m),helperText:b||m&&(0,n.jsx)(O.A,{id:`ui.composer.media.link.add.error.${m}`,defaultMessage:`ui.composer.media.link.add.error.${m}`})||(0,n.jsx)(O.A,{id:"ui.composer.media.link.add.help",defaultMessage:"ui.composer.media.link.add.help"}),disabled:r},f,{InputProps:Object.assign(Object.assign({},f.InputProps),{endAdornment:(0,n.jsx)(n.Fragment,{children:""===u&&(null===(t=f.InputProps)||void 0===t?void 0:t.endAdornment)?null===(s=f.InputProps)||void 0===s?void 0:s.endAdornment:(0,n.jsx)(M.A,Object.assign({position:"end"},{children:(0,n.jsx)(R.A,Object.assign({in:null===m&&""!==u},{children:(0,n.jsx)(A.A,Object.assign({size:"small",disabled:r,type:"submit"},{children:r?(0,n.jsx)(p.A,{color:"primary",size:20}):(0,n.jsx)(O.A,{id:"ui.composer.media.link.add.submit",defaultMessage:"ui.composer.media.link.add.submit"})}))}))}))})})}))}))},F={layerRoot:`${d}-layer-root`,title:`${d}-layer-title`,content:`${d}-layer-content`,media:`${d}-media`,delete:`${d}-delete`},H=(0,u.Ay)(m.A,{name:d,slot:"LayerRoot"})((()=>({}))),U=a.forwardRef(((e,t)=>{const{className:s,onClose:i,onSave:r,defaultValue:l=[]}=e,d=(0,o.__rest)(e,["className","onClose","onSave","defaultValue"]),[u,m]=(0,a.useState)(l),p=(0,a.useCallback)((()=>r(u)),[u]),g=(0,a.useCallback)((e=>m([...u,e])),[u]),h=(0,a.useCallback)((e=>m(e)),[]);return(0,n.jsxs)(H,Object.assign({ref:t,className:c()(s,F.layerRoot)},d,{children:[(0,n.jsxs)(y.A,Object.assign({className:F.title},{children:[(0,n.jsx)(A.A,Object.assign({onClick:i},{children:(0,n.jsx)(v.A,{children:"arrow_back"})})),(0,n.jsx)(C.A,{children:(0,n.jsx)(O.A,{id:"ui.composer.media.link.layer.title",defaultMessage:"ui.composer.media.link.layer.title"})}),(0,n.jsx)(E.A,Object.assign({size:"small",color:"secondary",variant:"contained",onClick:p},{children:(0,n.jsx)(O.A,{id:"ui.composer.layer.save",defaultMessage:"ui.composer.layer.save"})}))]})),(0,n.jsxs)(N.A,Object.assign({className:F.content},{children:[(0,n.jsx)(V,{id:"page",name:"page",label:(0,n.jsx)(O.A,{id:"ui.composer.media.link.add.label",defaultMessage:"ui.composer.media.link.add.label"}),fullWidth:!0,variant:"outlined",placeholder:"https://",onSuccess:g}),(0,n.jsx)(S,{onChange:h,value:u})]}))]}))})),B={name:"link",displayComponent:j,triggerButton:e=>{var{className:t}=e,s=(0,o.__rest)(e,["className"]);return(0,n.jsx)(x,Object.assign({className:c()(t,f.triggerRoot)},s,{"aria-label":"add link"},{children:(0,n.jsx)(v.A,{children:"link"})}))},layerComponent:U,previewComponent:S,filter:g}},21676:(e,t,s)=>{"use strict";s.d(t,{A:()=>m});var o=s(31635),n=s(74848),a=s(11848),i=s(44744),r=s(19546),l=s.n(r);const c="SCTagChip",d={ellipsis:`${c}-ellipsis`},u=(0,a.Ay)(i.A,{name:c,slot:"Root",overridesResolver:(e,t)=>[t.root]})((({theme:e})=>({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",height:25,[`&.${d.ellipsis}`]:{maxWidth:120}})));function m(e){const{tag:t,clickable:s=!0,disposable:a=!0,label:i=null,ellipsis:r=!1,onClick:c=null,onDelete:m=null,className:p=null}=e,g=(0,o.__rest)(e,["tag","clickable","disposable","label","ellipsis","onClick","onDelete","className"]);return(0,n.jsx)(u,Object.assign({className:l()(p,{[d.ellipsis]:r}),sx:{backgroundColor:`${t.color}`,color:e=>e.palette.getContrastText(t.color)}},s&&{onClick:()=>{c&&c(t.id)}},a&&{onDelete:()=>{m&&m(t.id)}},{label:i||t.name},g))}},22426:(e,t,s)=>{"use strict";s.d(t,{A:()=>x});var o=s(31635),n=s(74848),a=s(96540),i=s(58065),r=s(11848),l=s(5696),c=s(43581),d=s(3246),u=s(13550),m=s(29368),p=s(9149),g=s.n(p),h=s(61183),b=s.n(h),j=s(79197);const A="SCLocationAutocomplete",v={root:`${A}-root`},f=(0,r.Ay)(l.A,{name:A,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({minWidth:120})));const x=function(e){const t=(0,j.A)({props:e,name:A}),{defaultValue:s=null,disabled:r=!1,onChange:l,TextFieldProps:p={variant:"outlined",label:(0,n.jsx)(i.A,{id:"ui.locationAutocomplete.label",defaultMessage:"ui.composer.locations.label"})}}=t,h=(0,o.__rest)(t,["defaultValue","disabled","onChange","TextFieldProps"]),[x,O]=(0,a.useState)(!1),[y,C]=(0,a.useState)([]),[E,N]=(0,a.useState)(s),[w,T]=(0,a.useState)("");(0,a.useEffect)((()=>{!x&&w.trim().length>0&&((e=0,t=20)=>{u.A.request({url:m.A.ComposerLocalitySearch.url(),method:m.A.ComposerLocalitySearch.method,params:{offset:e,limit:t,search:w.trim()}}).then((e=>{C(e.data.results)})).then((()=>O(!1)))})()}),[w]),(0,a.useEffect)((()=>{E&&l&&l(E)}),[E]);const k=(0,a.useMemo)((()=>!E||"string"==typeof E||y.find((e=>E.lat===e.lat&&E.lng===e.lng))?y:[...y,{lat:E.lat,lng:E.lng,full_address:E.location}]),[E,y]);return(0,n.jsx)(f,Object.assign({className:v.root,options:k||[],getOptionLabel:e=>(null==e?void 0:e.full_address)||(null==e?void 0:e.location)||"",filterOptions:e=>e,autoComplete:!0,includeInputInList:!0,value:E||null,selectOnFocus:!0,handleHomeEndKeys:!0,disabled:r,noOptionsText:(0,n.jsx)(i.A,{id:"ui.locationAutocomplete.empty",defaultMessage:"ui.locationAutocomplete.empty"}),onChange:(e,t)=>{N(t?{location:t.full_address,lat:t.lat,lng:t.lng}:null),l&&l(t)},onInputChange:(e,t)=>{T(t)},isOptionEqualToValue:(e,t)=>t.lat===e.lat&&t.lng===e.lng,renderInput:e=>(0,n.jsx)(c.A,Object.assign({},e,p,{margin:"dense",InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"location",endAdornment:(0,n.jsxs)(a.Fragment,{children:[x?(0,n.jsx)(d.A,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})})),renderOption:(e,t,{inputValue:s})=>{const o=b()(t.full_address,s),a=g()(t.full_address,o);return(0,n.jsx)("li",Object.assign({},e,{style:{whiteSpace:"break-spaces"}},{children:a.map(((e,t)=>e.highlight?(0,n.jsx)("span",Object.assign({style:{fontWeight:700}},{children:e.text}),t):e.text))}),`${t.lat}_${t.lng}`)}},h))}},24971:(e,t,s)=>{"use strict";s.d(t,{A:()=>ro});var o=s(31635),n=s(74848),a=s(96540),i=s(79236),r=s(83426),l=s(97100),c=s(13550),d=s(29368),u=s(24760),m=s(75753),p=s(2877),g=s(3338),h=s(44817),b=s(58065),j=s(20973),A=s(11848),v=s(77037),f=s(48875),x=s(44675),O=s(90508),y=s(80766),C=s(69981),E=s(46831),N=s(4671),w=s(40059),T=s(28968),k=s(71194),S=s(15993);const _="discussion",M="post",R="poll",P=160;var I=s(19249),$=s(58662),D=s(9149),L=s.n(D),V=s(61183),F=s.n(V),H=s(47859),U=s(42942),B=s(68857),G=s(6786),z=s(5696),W=s(43581),q=s(21676),Y=s(19546),K=s.n(Y);const X="SCComposer",Z=370,J=210;var Q=s(27365),ee=s(3246),te=s(42269),se=s(28692),oe=s(94520),ne=s(86354);const ae={groups:[],isLoading:!0},ie=e=>{const{cacheStrategy:t=se.So.CACHE_FIRST}=e||{},s=(0,ne.v$)(),n=t!==se.So.NETWORK_ONLY?(e=>{if(!e)return null;const t=e.map((e=>{const t=(0,ne.I$)(e);return se.Ay.get(t)}));return t.filter((e=>!e)).length>0?null:t})(se.Ay.get(s,null)):null,[i,r]=(0,a.useState)(null!==n?{groups:n,isLoading:!1}:ae),l=(e=d.A.GetUserGroups.url())=>(0,o.__awaiter)(void 0,void 0,void 0,(function*(){const t=(yield c.A.request({url:e,method:d.A.GetUserGroups.method})).data;return t.next?t.results.concat(yield l(t.next)):t.results}));return(0,a.useEffect)((()=>{t===se.So.CACHE_FIRST&&n||l().then((e=>{r({groups:e,isLoading:!1}),se.Ay.set(s,e.map((e=>{const t=(0,ne.I$)(e.id);return se.Ay.set(t,e),e.id})))})).catch((e=>{console.log(e),oe.V.error(te.K,"Unable to retrieve groups")}))}),[]),i};var re=s(79197);const le="SCGroupAutocomplete",ce={root:`${le}-root`},de=(0,A.Ay)(z.A,{name:le,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({}))),ue=e=>{const t=(0,re.A)({props:e,name:le}),{onChange:s,defaultValue:i=null,disabled:r=!1,TextFieldProps:l={variant:"outlined",label:(0,n.jsx)(b.A,{id:"ui.groupAutocomplete.label",defaultMessage:"ui.groupAutocomplete.label"})}}=t,c=(0,o.__rest)(t,["onChange","defaultValue","disabled","TextFieldProps"]),[d,u]=(0,a.useState)(!1),[m,p]=(0,a.useState)("string"==typeof i?null:i),{groups:g,isLoading:h}=ie();(0,a.useEffect)((()=>{null!==m&&s&&s(m)}),[m]),(0,a.useEffect)((()=>{h||"string"!=typeof i||p(g.find((e=>e.id===Number(i))))}),[h]);return(0,n.jsx)(de,Object.assign({className:ce.root,open:d,onOpen:()=>{u(!0)},onClose:()=>{u(!1)},options:g||[],getOptionLabel:e=>e.name||"",value:m,selectOnFocus:!0,clearOnBlur:!0,blurOnSelect:!0,handleHomeEndKeys:!0,clearIcon:null,disabled:r||h,noOptionsText:(0,n.jsx)(b.A,{id:"ui.groupAutocomplete.empty",defaultMessage:"ui.groupAutocomplete.empty"}),onChange:(e,t)=>{p(t)},isOptionEqualToValue:(e,t)=>t.id===e.id,renderOption:(e,t,{inputValue:s})=>{const o=F()(t.name,s),i=L()(t.name,o);return(0,n.jsxs)(k.A,Object.assign({component:"li"},e,{children:[(0,n.jsx)(Q.A,{alt:t.name,src:t.image_small,sx:{marginRight:1}}),(0,n.jsx)(a.Fragment,{children:i.map(((e,t)=>(0,n.jsx)(H.A,Object.assign({sx:{fontWeight:e.highlight?700:400,marginRight:.2}},{children:e.text}),t)))})]}))},renderInput:e=>(0,n.jsx)(W.A,Object.assign({},e,l,{margin:"dense",InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"groups",endAdornment:(0,n.jsxs)(a.Fragment,{children:[h?(0,n.jsx)(ee.A,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},c))},me={events:[],isLoading:!0},pe=e=>{const{cacheStrategy:t=se.So.CACHE_FIRST}=e||{},s=(0,ne.cn)(),n=t!==se.So.NETWORK_ONLY?(e=>{if(!e)return null;const t=e.map((e=>{const t=(0,ne.fq)(e);return se.Ay.get(t)}));return t.filter((e=>!e)).length>0?null:t})(se.Ay.get(s,null)):null,[i,r]=(0,a.useState)(null!==n?{events:n,isLoading:!1}:me),l=(e=d.A.GetUserEvents.url())=>(0,o.__awaiter)(void 0,void 0,void 0,(function*(){const t=(yield c.A.request({url:e,method:d.A.GetUserEvents.method})).data;return t.next?t.results.concat(yield l(t.next)):t.results}));return(0,a.useEffect)((()=>{t===se.So.CACHE_FIRST&&n||l().then((e=>{r({events:e,isLoading:!1}),se.Ay.set(s,e.map((e=>{const t=(0,ne.fq)(e.id);return se.Ay.set(t,e),e.id})))})).catch((e=>{console.log(e),oe.V.error(te.K,"Unable to retrieve events")}))}),[]),i},ge="SCEventAutocomplete",he={root:`${ge}-root`},be=(0,A.Ay)(z.A,{name:ge,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({}))),je=e=>{const t=(0,re.A)({props:e,name:ge}),{onChange:s,defaultValue:i=null,disabled:r=!1,TextFieldProps:l={variant:"outlined",label:(0,n.jsx)(b.A,{id:"ui.eventAutocomplete.label",defaultMessage:"ui.eventAutocomplete.label"})}}=t,c=(0,o.__rest)(t,["onChange","defaultValue","disabled","TextFieldProps"]),[d,u]=(0,a.useState)(!1),[m,p]=(0,a.useState)("string"==typeof i?null:i),{events:g,isLoading:h}=pe();(0,a.useEffect)((()=>{null!==m&&s&&s(m)}),[m]),(0,a.useEffect)((()=>{h||"string"!=typeof i||p(g.find((e=>e.id===Number(i))))}),[h]);return(0,n.jsx)(be,Object.assign({className:he.root,open:d,onOpen:()=>{u(!0)},onClose:()=>{u(!1)},options:g||[],getOptionLabel:e=>e.name||"",value:m,selectOnFocus:!0,clearOnBlur:!0,blurOnSelect:!0,handleHomeEndKeys:!0,clearIcon:null,disabled:r||h,noOptionsText:(0,n.jsx)(b.A,{id:"ui.eventAutocomplete.empty",defaultMessage:"ui.eventAutocomplete.empty"}),onChange:(e,t)=>{p(t)},isOptionEqualToValue:(e,t)=>t.id===e.id,renderOption:(e,t,{inputValue:s})=>{const o=F()(t.name,s),i=L()(t.name,o);return(0,n.jsxs)(k.A,Object.assign({component:"li"},e,{children:[(0,n.jsx)(Q.A,{alt:t.name,src:t.image_small,sx:{marginRight:1}}),(0,n.jsx)(a.Fragment,{children:i.map(((e,t)=>(0,n.jsx)(H.A,Object.assign({sx:{fontWeight:e.highlight?700:400,marginRight:.2}},{children:e.text}),t)))})]}))},renderInput:e=>(0,n.jsx)(W.A,Object.assign({},e,l,{margin:"dense",InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"events",endAdornment:(0,n.jsxs)(a.Fragment,{children:[h?(0,n.jsx)(ee.A,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},c))};var Ae=s(44744);const ve=e=>{const{search:t="",exclude:s=""}=e||{},[n,i]=(0,a.useState)({users:[],isLoading:!1}),r=(e=d.A.UserAutocomplete.url(),t,s)=>(0,o.__awaiter)(void 0,void 0,void 0,(function*(){const o=(yield c.A.request({url:e,method:d.A.UserAutocomplete.method,params:Object.assign({search:t},s&&{exclude:s})})).data;return o.next?o.results.concat(yield r(o.next,t,s)):o.results}));return(0,a.useEffect)((()=>{t&&r(void 0,t,s).then((e=>{i({users:e,isLoading:!1})})).catch((e=>{console.error(e),oe.V.error(te.K,"Unable to retrieve users"),i((e=>Object.assign(Object.assign({},e),{isLoading:!1})))}))}),[t,s]),n};var fe=s(72081);const xe="SCUserAutocomplete",Oe={root:`${xe}-root`,autocompleteRoot:`${xe}-autocompleteRoot`,info:`${xe}-info`},ye=(0,A.Ay)(k.A,{name:xe,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({}))),Ce=(0,A.Ay)(z.A,{name:xe,slot:"AutocompleteRoot",overridesResolver:(e,t)=>t.autocompleteRoot})((()=>({}))),Ee=e=>{const t=(0,re.A)({props:e,name:xe}),{onChange:s,defaultValue:i=null,disabled:r=!1,TextFieldProps:l={variant:"outlined",label:(0,n.jsx)(b.A,{id:"ui.userAutocomplete.label",defaultMessage:"ui.userAutocomplete.label"})}}=t,c=(0,o.__rest)(t,["onChange","defaultValue","disabled","TextFieldProps"]),[d,u]=(0,a.useState)(!1),[m,p]=(0,a.useState)(""),[g,h]=(0,a.useState)(Array.isArray(i)?i:i?[i]:[]),[j,A]=(0,a.useState)(""),v=(0,a.useMemo)((()=>g.map((e=>"object"==typeof e?e.id:null)).filter(Boolean).join(",")),[g]),{users:f,isLoading:x}=ve({search:(null==m?void 0:m.length)>=3?m:"",exclude:v}),O=f.filter((e=>!v.includes(e.id)));(0,a.useEffect)((()=>{null==s||s(g),A(g.map((e=>"object"==typeof e?e.username:e)).join("\n"))}),[g]);const y=(0,a.useCallback)((()=>{O.length>0&&u(!0)}),[O]),C=(0,a.useCallback)(((e,t)=>{const s=t.inputValue.toLowerCase();return e.filter((e=>{var t,o;const n=null===(t=e.username)||void 0===t?void 0:t.toLowerCase().includes(s),a=null===(o=e.real_name)||void 0===o?void 0:o.toLowerCase().includes(s);return n||a}))}),[]);return(0,n.jsxs)(ye,Object.assign({className:Oe.root},{children:[(0,n.jsx)(Ce,Object.assign({multiple:!0,className:Oe.autocompleteRoot,open:d,onOpen:y,onClose:()=>{u(!1)},options:O||[],filterOptions:C,getOptionLabel:e=>e.username||"",value:g,inputValue:m,onInputChange:(e,t)=>{p(t)},selectOnFocus:!0,clearOnBlur:!0,blurOnSelect:!0,handleHomeEndKeys:!0,clearIcon:null,disabled:r||x,noOptionsText:(0,n.jsx)(b.A,{id:"ui.userAutocomplete.empty",defaultMessage:"ui.userAutocomplete.empty"}),onChange:(e,t)=>{h(t)},isOptionEqualToValue:(e,t)=>!!e&&t.id===e.id,renderTags:(e,t)=>e.map(((e,s)=>{const o="string"==typeof e?e:e.username,a="string"==typeof e?"":e.avatar,i="string"==typeof e?`fallback-${e}`:e.id;return(0,n.jsx)(Ae.A,Object.assign({avatar:(0,n.jsx)(Q.A,{src:a}),label:o},t({index:s})),i)})),renderOption:(e,t,{inputValue:s})=>{const o=F()(t.username,s),i=L()(t.username,o);return(0,n.jsxs)(k.A,Object.assign({component:"li"},e,{children:[(0,n.jsx)(Q.A,{alt:t.username,src:t.avatar,sx:{marginRight:1}}),(0,n.jsx)(a.Fragment,{children:i.map(((e,t)=>(0,n.jsx)(H.A,{children:e.text},t)))})]}))},renderInput:e=>(0,n.jsx)(W.A,Object.assign({},e,l,{margin:"dense",InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"off",endAdornment:O.length>0?(0,n.jsxs)(a.Fragment,{children:[x&&(0,n.jsx)(ee.A,{color:"inherit",size:20}),e.InputProps.endAdornment]}):null})}))},c)),(0,n.jsx)(H.A,Object.assign({variant:"body2",color:"primary",className:Oe.info},{children:(0,n.jsx)(b.A,{id:"ui.userAutocomplete.textarea.info",defaultMessage:"ui.userAutocomplete.textarea.info",values:{icon:(...e)=>(0,n.jsx)(w.A,{children:e})}})})),(0,n.jsx)(W.A,{label:(0,n.jsx)(b.A,{id:"ui.userAutocomplete.textarea.label",defaultMessage:"ui.userAutocomplete.textarea.label"}),multiline:!0,minRows:4,fullWidth:!0,margin:"normal",value:j,onChange:e=>(0,o.__awaiter)(void 0,void 0,void 0,(function*(){const t=Array.from(new Set(e.target.value.split(/\s|,|\n/).map((e=>e.trim())).filter(Boolean)));try{if(t.length>0){const e=yield fe.A.matchUsernames(t),s=new Set(e.map((e=>e.username))),o=e.filter((e=>s.has(e.username)));h(o),A(o.map((e=>e.username)).join("\n"))}else h([]),A("")}catch(s){console.error("Failed fetching matching usernames",s),h([]),A("")}}))})]}))};var Ne;!function(e){e.AUDIENCE_ALL="all",e.AUDIENCE_TAG="tag",e.AUDIENCE_GROUP="group",e.AUDIENCE_EVENT="event",e.AUDIENCE_USERS="users"}(Ne||(Ne={}));const we={root:`${X}-layer-audience-root`,title:`${X}-layer-title`,content:`${X}-layer-content`,message:`${X}-layer-audience-message`,autocomplete:`${X}-layer-audience-autocomplete`},Te=(0,A.Ay)(k.A,{name:X,slot:"LayerAudienceRoot"})((()=>({}))),ke=a.forwardRef(((e,t)=>{var s;const{className:r,onClose:l,onSave:u,defaultValue:h=(Ne.AUDIENCE_TAG||Ne.AUDIENCE_USERS?[]:null),TextFieldProps:j={variant:"outlined",label:(0,n.jsx)(b.A,{id:"ui.composer.layer.audience.tags.label",defaultMessage:"ui.composer.layer.audience.tags.label"})}}=e,A=(0,o.__rest)(e,["className","onClose","onSave","defaultValue","TextFieldProps"]),[v,f]=(0,a.useState)(!1),[x,O]=(0,a.useState)(h||void 0),{scAddressingTags:y}=function({fetch:e=!1}){const[t,s]=(0,a.useState)([]),[o,n]=(0,a.useState)(!1),r=(0,p.X1)(),l=(0,m.Sw)(),u=(0,a.useMemo)((()=>()=>c.A.request({url:d.A.ComposerAddressingTagList.url(),method:d.A.ComposerAddressingTagList.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[]);return(0,a.useEffect)((()=>{!o&&e&&r.user&&l.features.includes(i.q.TAGGING)&&u().then((e=>{n(!0),s(e)}))}),[o,e,r.user,l.features]),{scAddressingTags:t}}({fetch:v}),{preferences:C,features:k}=(0,m.Sw)(),S=(0,a.useMemo)((()=>C&&k&&k.includes(i.q.TAGGING)&&k.includes(i.q.GROUPING)&&g.pS in C&&C[g.pS].value),[C,k]),_=(0,a.useMemo)((()=>C&&k&&k.includes(i.q.TAGGING)&&g.sv in C&&C[g.sv].value),[C,k]),M=(0,a.useMemo)((()=>C&&k&&k.includes(i.q.TAGGING)&&g.O in C&&C[g.O].value),[C,k]),R=(0,a.useMemo)((()=>C&&k&&k.includes(i.q.TAGGING)&&g.Yx in C&&C[g.Yx].value),[C,k]),[P,I]=(0,a.useState)(null===h||0===h.length?R?Ne.AUDIENCE_TAG:Ne.AUDIENCE_ALL:Object.prototype.hasOwnProperty.call(h,"recurring")?Ne.AUDIENCE_EVENT:Object.prototype.hasOwnProperty.call(h,"managed_by")?Ne.AUDIENCE_GROUP:Array.isArray(h)&&h.length>0&&void 0!==(null===(s=h[0])||void 0===s?void 0:s.username)?Ne.AUDIENCE_USERS:Ne.AUDIENCE_TAG),$=(0,a.useCallback)((()=>{P===Ne.AUDIENCE_GROUP||P===Ne.AUDIENCE_EVENT?u(x):u((null==x?void 0:x.length)&&(null==x?void 0:x.length)>0?x:null)}),[P,x,u]),D=(0,a.useCallback)(((e,t)=>O(t)),[]),V=(0,a.useCallback)((e=>O(e)),[]),Y=(0,a.useCallback)((e=>O(e)),[]),X=(0,a.useCallback)((e=>O(e)),[]),Z=(0,a.useCallback)(((e,t)=>I(t)),[]),J=(0,a.useCallback)((()=>f(!0)),[]),Q=(0,a.useCallback)((()=>f(!1)),[]),ee=e=>{if(e===Ne.AUDIENCE_ALL)return!1;if(!x||Array.isArray(x)&&0===x.length)return!1;return e!==(Array.isArray(x)?x.some((e=>"color"in e))?Ne.AUDIENCE_TAG:Ne.AUDIENCE_USERS:"recurring"in x?Ne.AUDIENCE_EVENT:"managed_by"in x?Ne.AUDIENCE_GROUP:Ne.AUDIENCE_USERS)};return(0,n.jsxs)(Te,Object.assign({ref:t,className:K()(r,we.root)},A,{children:[(0,n.jsxs)(E.A,Object.assign({className:we.title},{children:[(0,n.jsx)(N.A,Object.assign({onClick:l},{children:(0,n.jsx)(w.A,{children:"arrow_back"})})),(0,n.jsx)(H.A,{children:(0,n.jsx)(b.A,{id:"ui.composer.layer.audience.title",defaultMessage:"ui.composer.layer.audience.title"})}),(0,n.jsx)(U.A,Object.assign({size:"small",color:"secondary",variant:"contained",onClick:$},{children:(0,n.jsx)(b.A,{id:"ui.composer.layer.save",defaultMessage:"ui.composer.layer.save"})}))]})),(0,n.jsxs)(T.A,Object.assign({className:we.content},{children:[(0,n.jsxs)(B.A,Object.assign({value:P,onChange:Z,"aria-label":"audience type"},{children:[!R&&(0,n.jsx)(G.A,{value:Ne.AUDIENCE_ALL,icon:(0,n.jsx)(w.A,{children:"public"}),label:(0,n.jsx)(b.A,{id:"ui.composer.layer.audience.all",defaultMessage:"ui.composer.layer.audience.all"})}),_&&(0,n.jsx)(G.A,{disabled:ee(Ne.AUDIENCE_EVENT),value:Ne.AUDIENCE_EVENT,icon:(0,n.jsx)(w.A,{children:"CalendarIcon"}),label:(0,n.jsx)(b.A,{id:"ui.composer.layer.audience.event",defaultMessage:"ui.composer.layer.audience.event"})}),S&&(0,n.jsx)(G.A,{disabled:ee(Ne.AUDIENCE_GROUP),value:Ne.AUDIENCE_GROUP,icon:(0,n.jsx)(w.A,{children:"groups"}),label:(0,n.jsx)(b.A,{id:"ui.composer.layer.audience.group",defaultMessage:"ui.composer.layer.audience.group"})}),(0,n.jsx)(G.A,{disabled:ee(Ne.AUDIENCE_TAG),value:Ne.AUDIENCE_TAG,icon:(0,n.jsx)(w.A,{children:"label"}),label:(0,n.jsx)(b.A,{id:"ui.composer.layer.audience.tag",defaultMessage:"ui.composer.layer.audience.tag"})}),M&&(0,n.jsx)(G.A,{disabled:ee(Ne.AUDIENCE_USERS),value:Ne.AUDIENCE_USERS,icon:(0,n.jsx)(w.A,{children:"people_alt"}),label:(0,n.jsx)(b.A,{id:"ui.composer.layer.audience.users",defaultMessage:"ui.composer.layer.audience.users"})})]})),(0,n.jsxs)(H.A,Object.assign({className:we.message},{children:[P===Ne.AUDIENCE_ALL&&!R&&(0,n.jsx)(b.A,{id:"ui.composer.layer.audience.all.message",defaultMessage:"ui.composer.layer.audience.all.message"}),P===Ne.AUDIENCE_EVENT&&(0,n.jsx)(b.A,{id:"ui.composer.layer.audience.event.message",defaultMessage:"ui.composer.layer.audience.event.message"}),P===Ne.AUDIENCE_GROUP&&(0,n.jsx)(b.A,{id:"ui.composer.layer.audience.group.message",defaultMessage:"ui.composer.layer.audience.group.message"}),P===Ne.AUDIENCE_TAG&&(0,n.jsx)(b.A,{id:"ui.composer.layer.audience.tag.message",defaultMessage:"ui.composer.layer.audience.tag.message"}),P===Ne.AUDIENCE_USERS&&(0,n.jsx)(b.A,{id:"ui.composer.layer.audience.users.message",defaultMessage:"ui.composer.layer.audience.users.message"})]})),P===Ne.AUDIENCE_TAG&&(0,n.jsx)(z.A,{className:we.autocomplete,open:v,onOpen:J,onClose:Q,multiple:!0,options:y||[],getOptionLabel:e=>e.name||"",value:x,selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,clearIcon:null,noOptionsText:(0,n.jsx)(b.A,{id:"ui.composer.layer.audience.tags.empty",defaultMessage:"ui.composer.layer.audience.tags.empty"}),onChange:D,isOptionEqualToValue:(e,t)=>t.id===e.id,renderTags:(e,t)=>e.map(((e,s)=>(0,n.jsx)(q.A,Object.assign({tag:e},t({index:s})),e.id))),renderOption:(e,t,{selected:s,inputValue:o})=>{const i=F()(t.name,o),r=L()(t.name,i);return(0,n.jsx)("li",Object.assign({},e,{children:(0,n.jsx)(q.A,{disposable:!1,tag:t,label:(0,n.jsx)(a.Fragment,{children:r.map(((e,t)=>(0,n.jsx)("span",Object.assign({style:{fontWeight:e.highlight?700:400}},{children:e.text}),t)))})},t.id)}))},renderInput:e=>(0,n.jsx)(W.A,Object.assign({},e,j,{InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"addressing",endAdornment:(0,n.jsx)(a.Fragment,{children:e.InputProps.endAdornment})})}))}),P===Ne.AUDIENCE_USERS&&(0,n.jsx)(Ee,{onChange:X,defaultValue:x}),P===Ne.AUDIENCE_GROUP&&(0,n.jsx)(ue,{onChange:Y,defaultValue:x}),P===Ne.AUDIENCE_EVENT&&(0,n.jsx)(je,{onChange:V,defaultValue:x})]}))]}))}));var Se=s(60921),_e=s(5448),Me=s(23922),Re=s(81455),Pe=s(206),Ie=s(18653),$e=s(71543),De=s(56071),Le=s(18011),Ve=s(27885),Fe=s(6442),He=s(15901),Ue=s(75737),Be=s(90760),Ge=s(43940),ze=s(71660),We=s(34887),qe=s(1806);const Ye={en:We.A,it:ze.A},Ke={root:`${X}-content-poll-root`,generalError:`${X}-general-error`,title:`${X}-content-poll-title`,choices:`${X}-content-poll-choices`,choiceNew:`${X}-content-poll-choice-new`,metadata:`${X}-content-poll-metadata`},Xe=(0,A.Ay)(k.A,{name:X,slot:"ContentPollRoot"})((({theme:e})=>({}))),Ze=(0,Ve.YK)({choicePlaceholder:{id:"ui.composer.content.poll.choice.placeholder",defaultMessage:"ui.composer.content.poll.choice.placeholder"}}),Je=(0,a.forwardRef)(((e,t)=>{var{children:s}=e,a=(0,o.__rest)(e,["children"]);return(0,n.jsx)(Re.A,Object.assign({direction:"column",ref:t},a,{children:s}))})),Qe={choice:""},et={title:"",multiple_choices:!1,expiration_at:null,choices:[Object.assign({},Qe),Object.assign({},Qe)]},tt=e=>{const t=(0,re.A)({props:e,name:X}),{className:s=null,value:o={poll:Object.assign({},et)},error:i={},disabled:r,onChange:l}=t,{titleError:c=null,categoriesError:d=null,addressingError:u=null,error:m=null}=Object.assign({},i),p=(0,a.useMemo)((()=>o.poll?o.poll:Object.assign({},et)),[o,et]),g=(0,Fe.A)(),h=(0,a.useCallback)((e=>{l(Object.assign(Object.assign({},o),{poll:Object.assign(Object.assign({},p),{title:e.target.value})}))}),[o,p]),j=(0,a.useCallback)((e=>{l(Object.assign(Object.assign({},o),{poll:Object.assign(Object.assign({},p),{choices:e})}))}),[o,p]),A=(0,a.useCallback)((e=>t=>{const s=[...p.choices];s[e].choice=t.target.value,l(Object.assign(Object.assign({},o),{poll:Object.assign(Object.assign({},p),{choices:s})}))}),[o,p]),v=(0,a.useCallback)((()=>{l(Object.assign(Object.assign({},o),{poll:Object.assign(Object.assign({},p),{choices:[...p.choices,Object.assign({},Qe)]})}))}),[o,p]),f=(0,a.useCallback)((e=>t=>{const s=[...p.choices];s.splice(e,1),l(Object.assign(Object.assign({},o),{poll:Object.assign(Object.assign({},p),{choices:s})}))}),[o,p]),x=(0,a.useCallback)((e=>{l(Object.assign(Object.assign({},o),{poll:Object.assign(Object.assign({},p),{multiple_choices:e.target.checked})}))}),[o,p]),O=(0,a.useCallback)((e=>{l(Object.assign(Object.assign({},o),{poll:Object.assign(Object.assign({},p),{expiration_at:e})}))}),[o,p]),y=(0,a.useMemo)((()=>{const e=new Date;return e.setDate(e.getDate()+2),e}),[]);return(0,n.jsxs)(Xe,Object.assign({className:K()(Ke.root,s)},{children:[(m||d||u)&&(0,n.jsxs)(H.A,Object.assign({className:Ke.generalError},{children:[m&&(0,n.jsx)(b.A,{id:`ui.composer.content.poll.error.${m}`,defaultMessage:`ui.composer.content.poll.error.${m}`}),d&&d,(0,n.jsx)("br",{}),u&&u]})),(0,n.jsx)(k.A,Object.assign({className:Ke.title},{children:(0,n.jsx)(W.A,{autoFocus:!0,disabled:r,label:(0,n.jsx)(b.A,{id:"ui.composer.content.poll.title",defaultMessage:"ui.composer.content.poll.title"}),variant:"outlined",value:p.title,onChange:h,fullWidth:!0,error:Boolean(c),helperText:c&&c,InputProps:{endAdornment:(0,n.jsx)(H.A,Object.assign({variant:"body2"},{children:160-p.title.length}))}})})),(0,n.jsx)(k.A,Object.assign({className:Ke.choices},{children:(0,n.jsx)(He.ReactSortable,Object.assign({list:[...p.choices],setList:j,tag:Je},{children:p.choices.map(((e,t)=>(0,n.jsx)(W.A,{placeholder:g.formatMessage(Ze.choicePlaceholder),value:e.choice,onChange:A(t),variant:"outlined",disabled:r,InputProps:{startAdornment:(0,n.jsx)(Pe.A,Object.assign({position:"start"},{children:(0,n.jsx)(w.A,{children:"drag"})})),endAdornment:(0,n.jsx)(Pe.A,Object.assign({position:"end"},{children:(0,n.jsx)(Ie.A,Object.assign({title:p.choices.length<=2?(0,n.jsx)(b.A,{id:"ui.composer.content.poll.choice.delete.disabled",defaultMessage:"ui.composer.content.poll.choice.delete.disabled"}):(0,n.jsx)(b.A,{id:"ui.composer.content.poll.choice.delete",defaultMessage:"ui.composer.content.poll.choice.delete"})},{children:(0,n.jsx)("span",{children:(0,n.jsx)(N.A,Object.assign({onClick:f(t),disabled:p.choices.length<=2,edge:"end"},{children:(0,n.jsx)(w.A,{children:"delete"})}))})}))}))}},t)))}))})),(0,n.jsx)(k.A,Object.assign({className:Ke.choiceNew},{children:(0,n.jsxs)(U.A,Object.assign({color:"inherit",variant:"text",onClick:v},{children:[(0,n.jsx)(w.A,{children:"add"}),(0,n.jsx)(b.A,{id:"ui.composer.content.poll.choice.add",defaultMessage:"ui.composer.choice.add"})]}))})),(0,n.jsx)($e.A,{}),(0,n.jsxs)(Re.A,Object.assign({className:Ke.metadata},{children:[(0,n.jsx)(De.A,{control:(0,n.jsx)(Le.A,{checked:p.multiple_choices,onChange:x}),label:(0,n.jsx)(b.A,{id:"ui.composer.content.poll.multiple",defaultMessage:"ui.composer.content.poll.multiple"})}),(0,n.jsx)(Ue.$,Object.assign({dateAdapter:Ge.h,adapterLocale:Ye[g.locale]},{children:(0,n.jsx)(Be.l,{disabled:r,label:(0,n.jsx)(b.A,{id:"ui.composer.content.poll.expiration",defaultMessage:"ui.composer.content.poll.expiration"}),value:"string"==typeof p.expiration_at?(0,qe.A)(p.expiration_at):p.expiration_at,onChange:O,slotProps:{textField:{variant:"outlined"}},minDate:y})}))]}))]}))};var st=s(18590),ot=s(37116),nt=s(7751),at=s(33676);const it={root:`${X}-typeswitch-root`},rt=(0,A.Ay)(nt.A,{name:X,slot:"TypeSwitchButtonGroupRoot"})((()=>({})));const lt=function(e){const{preferences:t}=(0,m.Sw)(),s=(0,p.X1)(),i=(0,a.useMemo)((()=>t[g.jh].value||h.Xl(s.user)||h.HY(s.user)),[t,s.user]),r=(0,a.useMemo)((()=>t[g.am].value),[t]),l=(0,a.useMemo)((()=>t[g.o_].value),[t]),{className:c,onChange:d,value:u}=e,j=(0,o.__rest)(e,["className","onChange","value"]);(0,a.useEffect)((()=>{null===u&&d&&d(r?M:_)}),[u]);const A=(0,a.useCallback)(((e,t)=>{d&&d(t)}),[d]);return(0,n.jsxs)(rt,Object.assign({className:K()(it.root,c),onChange:A,exclusive:!0,value:u},j,{children:[r&&(0,n.jsx)(at.A,Object.assign({value:M},{children:(0,n.jsx)(b.A,{id:"ui.composer.typeSwitch.post",defaultMessage:"ui.composer.typeSwitch.post"})})),l&&(0,n.jsx)(at.A,Object.assign({value:_},{children:(0,n.jsx)(b.A,{id:"ui.composer.typeSwitch.discussion",defaultMessage:"ui.composer.typeSwitch.discussion"})})),r&&i&&(0,n.jsx)(at.A,Object.assign({value:R},{children:(0,n.jsx)(b.A,{id:"ui.composer.typeSwitch.poll",defaultMessage:"ui.composer.typeSwitch.poll"})}))]}))};var ct=s(75260);const dt={root:`${X}-content-post-root`,generalError:`${X}-general-error`,medias:`${X}-content-post-medias`,editor:`${X}-content-post-editor`},ut=(0,A.Ay)(k.A,{name:X,slot:"ContentPostRoot"})((({theme:e})=>({}))),mt={categories:[],medias:[],html:"",addressing:[],recipients:[],event:null,group:null},pt=e=>{const{className:t=null,value:s=Object.assign({},mt),error:o={},disabled:i=!1,onChange:r,EditorProps:l={}}=e,{categoriesError:c=null,addressingError:d=null,error:u=null}=Object.assign({},o),m=(0,a.useRef)();(0,a.useEffect)((()=>{m&&m.current&&m.current.focus()}),[m]);const p=(0,a.useCallback)((e=>{r(Object.assign(Object.assign({},s),{html:e}))}),[s]);return(0,n.jsxs)(ut,Object.assign({className:K()(dt.root,t)},{children:[(u||c||d)&&(0,n.jsxs)(H.A,Object.assign({className:dt.generalError},{children:[u&&(0,n.jsx)(b.A,{id:`ui.composer.error.${u}`,defaultMessage:`ui.composer.error.${u}`}),c&&c,(0,n.jsx)("br",{}),d&&d]})),(0,n.jsx)(ct.A,Object.assign({ref:m},l,{editable:!i,className:dt.editor,onChange:p,defaultValue:s.html}))]}))};var gt=s(71113);const ht={root:`${X}-layer-category-root`,title:`${X}-layer-title`,content:`${X}-layer-content`},bt=(0,A.Ay)(k.A,{name:X,slot:"LayerCategoryRoot"})((()=>({}))),jt=a.forwardRef(((e,t)=>{const{className:s,onClose:i,onSave:r,defaultValue:l=[]}=e,c=(0,o.__rest)(e,["className","onClose","onSave","defaultValue"]),[d,u]=(0,a.useState)(l),m=(0,p.X1)(),g=(0,a.useCallback)((()=>r(d)),[d,r]),j=(0,a.useCallback)((e=>u(e)),[]);return(0,n.jsxs)(bt,Object.assign({ref:t,className:K()(s,ht.root)},c,{children:[(0,n.jsxs)(E.A,Object.assign({className:ht.title},{children:[(0,n.jsx)(N.A,Object.assign({onClick:i},{children:(0,n.jsx)(w.A,{children:"arrow_back"})})),(0,n.jsx)(H.A,{children:(0,n.jsx)(b.A,{id:"ui.composer.layer.category.title",defaultMessage:"ui.composer.layer.category.title"})}),(0,n.jsx)(U.A,Object.assign({size:"small",color:"secondary",variant:"contained",onClick:g},{children:(0,n.jsx)(b.A,{id:"ui.composer.layer.save",defaultMessage:"ui.composer.layer.save"})}))]})),(0,n.jsx)(T.A,Object.assign({className:ht.content},{children:(0,n.jsx)(gt.A,Object.assign({multiple:!0,onChange:j,defaultValue:l},!h.Xl(m.user)&&{endpointQueryParams:{can_create_content:!0}}))}))]}))}));var At=s(22426);const vt={root:`${X}-layer-location-root`,title:`${X}-layer-title`,content:`${X}-layer-content`},ft=(0,A.Ay)(k.A,{name:X,slot:"LayerLocationRoot"})((()=>({}))),xt=a.forwardRef(((e,t)=>{const{className:s,onClose:i,onSave:r,defaultValue:l=null}=e,c=(0,o.__rest)(e,["className","onClose","onSave","defaultValue"]),[d,u]=(0,a.useState)(l),m=(0,a.useCallback)((()=>r(d)),[d,r]),p=(0,a.useCallback)((e=>u(e)),[]);return(0,n.jsxs)(ft,Object.assign({ref:t,className:K()(s,vt.root)},c,{children:[(0,n.jsxs)(E.A,Object.assign({className:vt.title},{children:[(0,n.jsx)(N.A,Object.assign({onClick:i},{children:(0,n.jsx)(w.A,{children:"arrow_back"})})),(0,n.jsx)(H.A,{children:(0,n.jsx)(b.A,{id:"ui.composer.layer.location.title",defaultMessage:"ui.composer.layer.location.title"})}),(0,n.jsx)(U.A,Object.assign({size:"small",color:"secondary",variant:"contained",onClick:m},{children:(0,n.jsx)(b.A,{id:"ui.composer.layer.save",defaultMessage:"ui.composer.layer.save"})}))]})),(0,n.jsx)(T.A,Object.assign({className:vt.content},{children:(0,n.jsx)(At.A,{onChange:p,defaultValue:d||""})}))]}))}));var Ot=s(53545);const yt={root:`${X}-content-discussion-root`,generalError:`${X}-general-error`,title:`${X}-content-discussion-title`,medias:`${X}-content-discussion-medias`,editor:`${X}-content-discussion-editor`},Ct=(0,A.Ay)(k.A,{name:X,slot:"ContentDiscussionRoot"})((({theme:e})=>({}))),Et={title:"",categories:[],group:null,event:null,medias:[],html:"",addressing:[],recipients:[]},Nt=e=>{const{className:t=null,value:s=Object.assign({},Et),defaultInitialMaxHeightContentEditor:o=Z,defaultExtraSpaceContentEditor:i=J,isContentSwitchButtonVisible:r=!0,error:l={},disabled:c=!1,onChange:d,EditorProps:u={}}=e,{titleError:m=null,categoriesError:p=null,addressingError:g=null,error:h=null}=Object.assign({},l),j=(0,a.useRef)(null),[A,v]=(0,a.useState)(o+(r?0:45)),f=(0,Fe.A)(),y=(0,x.A)(),C=(0,O.A)(y.breakpoints.down("md")),E=(0,a.useMemo)((()=>(0,Me.O)()),[]),N=(0,a.useCallback)((e=>{d(Object.assign(Object.assign({},s),{title:e.target.value}))}),[s]),w=(0,a.useCallback)((e=>{("Enter"===e.key||s.title.length>P&&["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Delete","Backspace","Shift","Home","End"].indexOf(e.key)<0)&&e.preventDefault()}),[s]),T=(0,a.useCallback)((e=>{d(Object.assign(Object.assign({},s),{html:e}))}),[s]),S=(0,a.useCallback)((()=>{if(j.current)if(C){const e=j.current.getBoundingClientRect(),t=i+e.height+(E?30:0)-(r?0:45);v(`calc(100vh - ${t}px)`)}else v(Z+(r?0:45)+"px")}),[C,j.current,v,E,r]);return(0,a.useEffect)((()=>{S()}),[s,r,S,C]),(0,n.jsxs)(Ct,Object.assign({className:K()(yt.root,t)},{children:[(h||p||g)&&(0,n.jsxs)(H.A,Object.assign({className:yt.generalError},{children:[h&&(0,n.jsx)(b.A,{id:`ui.composer.error.${h}`,defaultMessage:`ui.composer.error.${h}`}),p&&p,(0,n.jsx)("br",{}),g&&g]})),(0,n.jsx)(W.A,{className:yt.title,ref:j,placeholder:f.formatMessage({id:"ui.composer.content.discussion.title.label",defaultMessage:"ui.composer.content.discussion.title.label"}),autoFocus:!0,fullWidth:!0,variant:"outlined",value:s.title,onChange:N,onKeyDown:w,multiline:!0,InputProps:{endAdornment:(0,n.jsx)(H.A,Object.assign({variant:"body2"},{children:P-s.title.length}))},error:Boolean(m),helperText:m,disabled:c}),(0,n.jsx)(k.A,Object.assign({sx:{[`& .${Ot.H}-content`]:{maxHeight:`${A} !important`}}},{children:(0,n.jsx)(ct.A,Object.assign({},u,{editable:!c,className:yt.editor,onChange:T,defaultValue:s.html}))}))]}))};var wt=s(35488),Tt=s(13470),kt=s(4527);const St={root:`${X}-attributes-root`},_t=(0,A.Ay)(k.A,{name:X,slot:"AttributesRoot"})((()=>({}))),Mt=e=>{var t,s,o,i,r;const{className:l=null,value:c=null,onChange:d=null,onClick:u=null}=e,m=(0,a.useCallback)((e=>()=>{d&&d(Object.assign(Object.assign({},c),{categories:c.categories.filter((t=>t.id!==e))}))}),[c,d]),p=(0,a.useCallback)((()=>{u&&u("categories")}),[u]),g=(0,a.useCallback)((()=>{d&&d(Object.assign(Object.assign({},c),{event:null}))}),[c,d]),h=(0,a.useCallback)((()=>{u&&u("event")}),[u]),b=(0,a.useCallback)((()=>{d&&d(Object.assign(Object.assign({},c),{group:null}))}),[c,d]),j=(0,a.useCallback)((()=>{u&&u("group")}),[u]),A=(0,a.useCallback)((e=>()=>{d&&d(Object.assign(Object.assign({},c),{addressing:c.addressing.filter((t=>t.id!==e))}))}),[c,d]),v=(0,a.useCallback)((()=>{u&&u("addressing")}),[u]),f=(0,a.useCallback)((()=>{d&&d(Object.assign(Object.assign({},c),{location:null}))}),[c,d]),x=(0,a.useCallback)((()=>{u&&u("location")}),[u]),O=(0,a.useCallback)((e=>()=>{(null==c?void 0:c.recipients)&&d&&d(Object.assign(Object.assign({},c),{recipients:c.recipients.filter((t=>"object"==typeof t?t.id!==e:t!==e))}))}),[c,d]),y=(0,a.useCallback)((()=>{u&&u("recipients")}),[u]);return(0,n.jsxs)(_t,Object.assign({className:K()(St.root,l)},{children:[(null===(t=null==c?void 0:c.categories)||void 0===t?void 0:t.length)>0&&(null==c?void 0:c.categories.map((e=>(0,n.jsx)(Ae.A,{label:e.name,onDelete:m(e.id),icon:(0,n.jsx)(w.A,{children:"category"}),onClick:p},e.id)))),(null==c?void 0:c.group)&&(0,n.jsx)(Ae.A,{label:null==c?void 0:c.group.name,onDelete:b,icon:(0,n.jsx)(w.A,{children:"groups"}),onClick:j,disabled:!(null===(s=null==c?void 0:c.group)||void 0===s?void 0:s.subscription_status)},null==c?void 0:c.group.id),(null==c?void 0:c.event)&&(0,n.jsx)(Ae.A,{label:null==c?void 0:c.event.name,onDelete:g,icon:(0,n.jsx)(w.A,{children:"CalendarIcon"}),onClick:h,disabled:!(null===(o=null==c?void 0:c.event)||void 0===o?void 0:o.subscription_status)},null==c?void 0:c.event.id),(null===(i=null==c?void 0:c.addressing)||void 0===i?void 0:i.length)>0&&(null==c?void 0:c.addressing.map((e=>(0,n.jsx)(q.A,{tag:e,onDelete:A(e.id),icon:(0,n.jsx)(w.A,{children:"label"}),onClick:v},e.id)))),(0,n.jsx)(n.Fragment,{children:(null===(r=null==c?void 0:c.recipients)||void 0===r?void 0:r.length)>0&&(0,n.jsxs)(n.Fragment,{children:[c.recipients.slice(0,3).map((e=>(0,n.jsx)(Ae.A,{label:"object"==typeof e?e.username:e,icon:(0,n.jsx)(w.A,{children:"people_alt"}),onClick:y,onDelete:O("object"==typeof e?e.id:e)},"object"==typeof e?e.id:e))),c.recipients.length>3&&(0,n.jsx)(Ae.A,{label:"+"+(c.recipients.length-3),onClick:y})]})}),(null==c?void 0:c.location)&&(0,n.jsx)(Ae.A,{icon:(0,n.jsx)(w.A,{children:"add_location_alt"}),label:null==c?void 0:c.location.location,onDelete:f,onClick:x})]}))};var Rt=s(73785);const Pt={root:`${X}-skeleton-root`,title:`${X}-title`,avatar:`${X}-avatar`,content:`${X}-content`,actions:`${X}-actions`},It=(0,A.Ay)(k.A,{name:X,slot:"SkeletonRoot"})((()=>({})));function $t(){return(0,n.jsx)(It,Object.assign({className:Pt.root},{children:(0,n.jsx)(Rt.A,{sx:{height:190},animation:"wave",variant:"rectangular"})}))}var Dt=s(28820),Lt=s(36870),Vt=s(37211),Ft=s(82241);const Ht={root:`${X}-layer-close-root`,title:`${X}-layer-title`,content:`${X}-layer-content`},Ut=(0,A.Ay)(k.A,{name:X,slot:"LayerCloseRoot"})((()=>({}))),Bt=a.forwardRef(((e,t)=>{const{className:s,onClose:a,onSave:i,defaultValue:r=[]}=e,l=(0,o.__rest)(e,["className","onClose","onSave","defaultValue"]);return(0,n.jsxs)(Ut,Object.assign({ref:t,className:K()(s,Ht.root)},l,{children:[(0,n.jsxs)(E.A,Object.assign({className:Ht.title},{children:[(0,n.jsx)(N.A,Object.assign({onClick:a},{children:(0,n.jsx)(w.A,{children:"arrow_back"})})),(0,n.jsx)(H.A,{children:(0,n.jsx)(b.A,{id:"ui.composer.layer.close.title",defaultMessage:"ui.composer.layer.close.title"})})]})),(0,n.jsxs)(T.A,Object.assign({className:Ht.content},{children:[(0,n.jsx)(H.A,{children:(0,n.jsx)(b.A,{id:"ui.composer.layer.close.text",defaultMessage:"ui.composer.layer.close.text"})}),(0,n.jsxs)(Dt.A,{children:[(0,n.jsx)(Lt.Ay,{children:(0,n.jsx)(Vt.A,Object.assign({onClick:a},{children:(0,n.jsx)(Ft.A,{primary:(0,n.jsx)(b.A,{id:"ui.composer.layer.close.no",defaultMessage:"ui.composer.layer.close.no"})})}))}),(0,n.jsx)(Lt.Ay,{children:(0,n.jsx)(Vt.A,Object.assign({onClick:i},{children:(0,n.jsx)(Ft.A,{primary:(0,n.jsx)(b.A,{id:"ui.composer.layer.close.yes",defaultMessage:"ui.composer.layer.close.yes"})})}))})]})]}))]}))}));var Gt=s(49993);const zt=function(e){return(0,n.jsx)(Gt.A,Object.assign({},e,{onTouchMove:e=>{e.preventDefault()},style:{touchAction:"none"}}))};var Wt=!1;if("undefined"!=typeof window){var qt={get passive(){Wt=!0}};window.addEventListener("testPassive",null,qt),window.removeEventListener("testPassive",null,qt)}var Yt="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),Kt=[],Xt=!1,Zt=void 0,Jt=void 0,Qt=void 0,es=function(e){return Kt.some((function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))}))},ts=function(e){var t=e||window.event;return!!es(t.target)||(t.touches.length>1||(t.preventDefault&&t.preventDefault(),!1))},ss=function(){void 0!==Qt&&(document.body.style.paddingRight=Qt,Qt=void 0),void 0!==Zt&&(document.body.style.overflow=Zt,Zt=void 0)},os=function(){if(void 0!==Jt){var e=-parseInt(document.body.style.top,10),t=-parseInt(document.body.style.left,10);document.body.style.position=Jt.position,document.body.style.top=Jt.top,document.body.style.left=Jt.left,window.scrollTo(t,e),Jt=void 0}},ns=s(72739),as=s(5556),is=s.n(as),rs=s(3541),ls=s(82452),cs=s(23887),ds=s(59145),us=s(6533),ms=s(99370),ps=s(40293),gs=s(80675),hs=s(93932);function bs(e){return(0,gs.A)("MuiDateTimePickerTabs",e)}(0,hs.A)("MuiDateTimePickerTabs",["root"]);const js=e=>(0,cs.sC)(e)?"date":"time",As=(0,A.Ay)(B.A,{name:"MuiDateTimePickerTabs",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({boxShadow:`0 -1px 0 0 inset ${(e.vars||e).palette.divider}`,"&:last-child":{boxShadow:`0 1px 0 0 inset ${(e.vars||e).palette.divider}`,[`& .${us.A.indicator}`]:{bottom:"auto",top:0}}}))),vs=function(e){const t=(0,rs.A)({props:e,name:"MuiDateTimePickerTabs"}),{dateIcon:s=(0,n.jsx)(ps.Z5,{}),onViewChange:o,timeIcon:i=(0,n.jsx)(ps.b1,{}),view:r,hidden:l="undefined"==typeof window||window.innerHeight<667,className:c,sx:d}=t,u=(0,ls.Nq)(),m=(e=>{const{classes:t}=e;return(0,ms.A)({root:["root"]},bs,t)})(t);return l?null:(0,n.jsxs)(As,{ownerState:t,variant:"fullWidth",value:js(r),onChange:(e,t)=>{o("date"===t?"day":"hours")},className:(0,ds.A)(c,m.root),sx:d,children:[(0,n.jsx)(G.A,{value:"date","aria-label":u.dateTableLabel,icon:(0,n.jsx)(a.Fragment,{children:s})}),(0,n.jsx)(G.A,{value:"time","aria-label":u.timeTableLabel,icon:(0,n.jsx)(a.Fragment,{children:i})})]})};var fs=s(27482),xs=s(46062),Os=s(6498),ys=s(8934);function Cs(e){return(0,gs.A)("MuiDateTimePickerToolbar",e)}const Es=(0,hs.A)("MuiDateTimePickerToolbar",["root","dateContainer","timeContainer","timeDigitsContainer","separator","timeLabelReverse","ampmSelection","ampmLandscape","ampmLabel"]);var Ns=s(50117),ws=s(31886);const Ts=["ampm","ampmInClock","value","onChange","view","isLandscape","onViewChange","toolbarFormat","toolbarPlaceholder","views","disabled","readOnly","toolbarVariant"],ks=e=>{const{classes:t,theme:s,isLandscape:o}=e,n={root:["root"],dateContainer:["dateContainer"],timeContainer:["timeContainer","rtl"===s.direction&&"timeLabelReverse"],timeDigitsContainer:["timeDigitsContainer","rtl"===s.direction&&"timeLabelReverse"],separator:["separator"],ampmSelection:["ampmSelection",o&&"ampmLandscape"],ampmLabel:["ampmLabel"]};return(0,ms.A)(n,Cs,t)},Ss=(0,A.Ay)(Os.Z,{name:"MuiDateTimePickerToolbar",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e,ownerState:t})=>({paddingLeft:"desktop"!==t.toolbarVariant||t.isLandscape?16:24,paddingRight:"desktop"!==t.toolbarVariant||t.isLandscape?16:0,borderBottom:"desktop"===t.toolbarVariant?`1px solid ${(e.vars||e).palette.divider}`:void 0,borderRight:"desktop"===t.toolbarVariant&&t.isLandscape?`1px solid ${(e.vars||e).palette.divider}`:void 0,justifyContent:"space-around",position:"relative"})));Ss.propTypes={as:is().elementType,classes:is().object,className:is().string,isLandscape:is().bool.isRequired,isMobileKeyboardViewOpen:is().bool,landscapeDirection:is().oneOf(["column","row"]),ownerState:is().object.isRequired,sx:is().oneOfType([is().arrayOf(is().oneOfType([is().func,is().object,is().bool])),is().func,is().object]),toggleMobileKeyboardView:is().func,toolbarTitle:is().node,viewType:is().oneOf(["date","time"])};const _s=(0,A.Ay)("div",{name:"MuiDateTimePickerToolbar",slot:"DateContainer",overridesResolver:(e,t)=>t.dateContainer})({display:"flex",flexDirection:"column",alignItems:"flex-start"}),Ms=(0,A.Ay)("div",{name:"MuiDateTimePickerToolbar",slot:"TimeContainer",overridesResolver:(e,t)=>t.timeContainer})((({theme:e,ownerState:t})=>{const s=t.isLandscape&&"desktop"!==t.toolbarVariant?"column":"row";return(0,ns.A)({display:"flex",flexDirection:s},"desktop"===t.toolbarVariant&&(0,ns.A)({},!t.isLandscape&&{gap:9,marginRight:4,alignSelf:"flex-end"}),"rtl"===e.direction&&{flexDirection:`${s}-reverse`})})),Rs=(0,A.Ay)("div",{name:"MuiDateTimePickerToolbar",slot:"TimeDigitsContainer",overridesResolver:(e,t)=>t.timeDigitsContainer})((({theme:e,ownerState:t})=>(0,ns.A)({display:"flex"},"desktop"===t.toolbarVariant&&{gap:1.5},"rtl"===e.direction&&{flexDirection:"row-reverse"})));Ms.propTypes={as:is().elementType,ownerState:is().object.isRequired,sx:is().oneOfType([is().arrayOf(is().oneOfType([is().func,is().object,is().bool])),is().func,is().object])};const Ps=(0,A.Ay)(xs.k,{name:"MuiDateTimePickerToolbar",slot:"Separator",overridesResolver:(e,t)=>t.separator})((({ownerState:e})=>({margin:"desktop"===e.toolbarVariant?0:"0 4px 0 2px",cursor:"default"}))),Is=(0,A.Ay)("div",{name:"MuiDateTimePickerToolbar",slot:"AmPmSelection",overridesResolver:(e,t)=>[{[`.${Es.ampmLabel}`]:t.ampmLabel},{[`&.${Es.ampmLandscape}`]:t.ampmLandscape},t.ampmSelection]})((({ownerState:e})=>(0,ns.A)({display:"flex",flexDirection:"column",marginRight:"auto",marginLeft:12},e.isLandscape&&{margin:"4px 0 auto",flexDirection:"row",justifyContent:"space-around",width:"100%"},{[`& .${Es.ampmLabel}`]:{fontSize:17}})));function $s(e){const t=(0,rs.A)({props:e,name:"MuiDateTimePickerToolbar"}),{ampm:s,ampmInClock:o,value:i,onChange:r,view:l,isLandscape:c,onViewChange:d,toolbarFormat:u,toolbarPlaceholder:m="\u2013\u2013",views:p,disabled:g,readOnly:h,toolbarVariant:b="mobile"}=t,j=(0,fs.A)(t,Ts),A=t,v=(0,ls.hc)(),{meridiemMode:f,handleMeridiemChange:O}=(0,Ns.r7)(i,s,r),y=Boolean(s&&!o),C="desktop"===b,E=(0,ls.Nq)(),N=(0,x.A)(),w=ks((0,ns.A)({},A,{theme:N})),T=a.useMemo((()=>i?u?v.formatByString(i,u):v.format(i,"shortDate"):m),[i,u,m,v]);return(0,n.jsxs)(Ss,(0,ns.A)({toolbarTitle:E.dateTimePickerToolbarTitle,isLandscape:c,className:w.root},j,{ownerState:A,children:[(0,n.jsxs)(_s,{className:w.dateContainer,ownerState:A,children:[p.includes("year")&&(0,n.jsx)(ys.R,{tabIndex:-1,variant:"subtitle1",onClick:()=>d("year"),selected:"year"===l,value:i?v.format(i,"year"):"\u2013"}),p.includes("day")&&(0,n.jsx)(ys.R,{tabIndex:-1,variant:C?"h5":"h4",onClick:()=>d("day"),selected:"day"===l,value:T})]}),(0,n.jsxs)(Ms,{className:w.timeContainer,ownerState:A,children:[(0,n.jsxs)(Rs,{className:w.timeDigitsContainer,ownerState:A,children:[p.includes("hours")&&(0,n.jsx)(ys.R,{variant:C?"h5":"h3",width:C&&!c?ws.aG:void 0,onClick:()=>d("hours"),selected:"hours"===l,value:i?(k=i,s?v.format(k,"hours12h"):v.format(k,"hours24h")):"--"}),p.includes("minutes")&&(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)(Ps,{variant:C?"h5":"h3",value:":",className:w.separator,ownerState:A}),(0,n.jsx)(ys.R,{variant:C?"h5":"h3",width:C&&!c?ws.aG:void 0,onClick:()=>d("minutes"),selected:"minutes"===l,value:i?v.format(i,"minutes"):"--"})]}),p.includes("seconds")&&(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)(Ps,{variant:C?"h5":"h3",value:":",className:w.separator,ownerState:A}),(0,n.jsx)(ys.R,{variant:C?"h5":"h3",width:C&&!c?ws.aG:void 0,onClick:()=>d("seconds"),selected:"seconds"===l,value:i?v.format(i,"seconds"):"--"})]})]}),y&&!C&&(0,n.jsxs)(Is,{className:w.ampmSelection,ownerState:A,children:[(0,n.jsx)(ys.R,{variant:"subtitle2",selected:"am"===f,typographyClassName:w.ampmLabel,value:(0,cs._S)(v,"am"),onClick:h?void 0:()=>O("am"),disabled:g}),(0,n.jsx)(ys.R,{variant:"subtitle2",selected:"pm"===f,typographyClassName:w.ampmLabel,value:(0,cs._S)(v,"pm"),onClick:h?void 0:()=>O("pm"),disabled:g})]}),s&&C&&(0,n.jsx)(ys.R,{variant:"h5",onClick:()=>d("meridiem"),selected:"meridiem"===l,value:i&&f?(0,cs._S)(v,f):"--",width:ws.aG})]})]}));var k}var Ds=s(34469),Ls=s(60831);var Vs=s(72324),Fs=s(421),Hs=s(16566),Us=s(17566),Bs=s(5639);const Gs=["props","ref"],zs=(0,A.Ay)(Bs.CJ)((({theme:e})=>({overflow:"hidden",minWidth:ws.eX,backgroundColor:(e.vars||e).palette.background.paper})));var Ws=s(64741),qs=s(71724);const Ys=({props:e,value:t,adapter:s})=>{const o=(0,Ws.Z)({adapter:s,value:t,props:e});return null!==o?o:(0,qs.i)({adapter:s,value:t,props:e})},Ks=a.forwardRef((function(e,t){var s,o,i,r,l;const c=function(e,t){var s,o,n,i,r,l,c,d,u,m,p;const g=(0,ls.hc)(),h=(0,ls.Yg)(),b=(0,rs.A)({props:e,name:t}),j=null!=(s=b.ampm)?s:g.is12HourCycleInCurrentLocale(),A=a.useMemo((()=>{var e;return null==(null==(e=b.localeText)?void 0:e.toolbarTitle)?b.localeText:(0,ns.A)({},b.localeText,{dateTimePickerToolbarTitle:b.localeText.toolbarTitle})}),[b.localeText]),v=null!=(o=b.slots)?o:(0,Ls.p)(b.components),f=null!=(n=b.slotProps)?n:b.componentsProps;return(0,ns.A)({},b,(0,Ds.R)({views:b.views,openTo:b.openTo,defaultViews:["year","day","hours","minutes"],defaultOpenTo:"day"}),{ampm:j,localeText:A,orientation:null!=(i=b.orientation)?i:"portrait",disableIgnoringDatePartForTimeValidation:null!=(r=b.disableIgnoringDatePartForTimeValidation)?r:Boolean(b.minDateTime||b.maxDateTime||b.disablePast||b.disableFuture),disableFuture:null!=(l=b.disableFuture)&&l,disablePast:null!=(c=b.disablePast)&&c,minDate:(0,cs.IP)(g,null!=(d=b.minDateTime)?d:b.minDate,h.minDate),maxDate:(0,cs.IP)(g,null!=(u=b.maxDateTime)?u:b.maxDate,h.maxDate),minTime:null!=(m=b.minDateTime)?m:b.minTime,maxTime:null!=(p=b.maxDateTime)?p:b.maxTime,slots:(0,ns.A)({toolbar:$s,tabs:vs},v),slotProps:(0,ns.A)({},f,{toolbar:(0,ns.A)({ampm:j},null==f?void 0:f.toolbar)})})}(e,"MuiStaticDateTimePicker"),d=null!=(s=c.displayStaticWrapperAs)?s:"mobile",u=null!=(o=c.ampmInClock)?o:"desktop"===d,m=(0,ns.A)({day:Fs.W,month:Fs.W,year:Fs.W,hours:Vs.Zo,minutes:Vs.Zo,seconds:Vs.Zo},c.viewRenderers),p=(0,ns.A)({},c,{viewRenderers:m,displayStaticWrapperAs:d,ampmInClock:u,yearsPerRow:null!=(i=c.yearsPerRow)?i:"mobile"===d?3:4,slotProps:(0,ns.A)({},c.slotProps,{tabs:(0,ns.A)({hidden:"desktop"===d},null==(r=c.slotProps)?void 0:r.tabs),toolbar:(0,ns.A)({hidden:"desktop"===d,ampmInClock:u},null==(l=c.slotProps)?void 0:l.toolbar)})}),{renderPicker:g}=(e=>{var t;let{props:s,ref:o}=e,a=(0,fs.A)(e,Gs);const{localeText:i,slots:r,slotProps:l,className:c,sx:d,displayStaticWrapperAs:u,autoFocus:m}=s,{layoutProps:p,renderCurrentView:g}=(0,Us.k)((0,ns.A)({},a,{props:s,autoFocusView:null!=m&&m,additionalViewProps:{},wrapperVariant:u})),h=null!=(t=null==r?void 0:r.layout)?t:zs;return{renderPicker:()=>{var e,t,s;return(0,n.jsx)(Ue.$,{localeText:i,children:(0,n.jsx)(h,(0,ns.A)({},p,null==l?void 0:l.layout,{slots:r,slotProps:l,sx:[...Array.isArray(d)?d:[d],...Array.isArray(null==l||null==(e=l.layout)?void 0:e.sx)?l.layout.sx:[null==l||null==(t=l.layout)?void 0:t.sx]],className:(0,ds.A)(c,null==l||null==(s=l.layout)?void 0:s.className),ref:o,children:g()}))})}}})({props:p,valueManager:Hs.W,valueType:"date-time",validator:Ys,ref:t});return g()}));Ks.propTypes={ampm:is().bool,ampmInClock:is().bool,autoFocus:is().bool,className:is().string,components:is().object,componentsProps:is().object,dayOfWeekFormatter:is().func,defaultCalendarMonth:is().any,defaultValue:is().any,disabled:is().bool,disableFuture:is().bool,disableHighlightToday:is().bool,disableIgnoringDatePartForTimeValidation:is().bool,disablePast:is().bool,displayStaticWrapperAs:is().oneOf(["desktop","mobile"]),displayWeekNumber:is().bool,fixedWeekNumber:is().number,loading:is().bool,localeText:is().object,maxDate:is().any,maxDateTime:is().any,maxTime:is().any,minDate:is().any,minDateTime:is().any,minTime:is().any,minutesStep:is().number,monthsPerRow:is().oneOf([3,4]),onAccept:is().func,onChange:is().func,onClose:is().func,onError:is().func,onMonthChange:is().func,onViewChange:is().func,onYearChange:is().func,openTo:is().oneOf(["day","hours","minutes","month","seconds","year"]),orientation:is().oneOf(["landscape","portrait"]),readOnly:is().bool,reduceAnimations:is().bool,referenceDate:is().any,renderLoading:is().func,shouldDisableClock:is().func,shouldDisableDate:is().func,shouldDisableMonth:is().func,shouldDisableTime:is().func,shouldDisableYear:is().func,showDaysOutsideCurrentMonth:is().bool,slotProps:is().object,slots:is().object,sx:is().oneOfType([is().arrayOf(is().oneOfType([is().func,is().object,is().bool])),is().func,is().object]),timezone:is().string,value:is().any,view:is().oneOf(["day","hours","minutes","month","seconds","year"]),viewRenderers:is().shape({day:is().func,hours:is().func,minutes:is().func,month:is().func,seconds:is().func,year:is().func}),views:is().arrayOf(is().oneOf(["day","hours","minutes","month","seconds","year"]).isRequired),yearsPerRow:is().oneOf([3,4])};var Xs=s(45284),Zs=s(49873);const Js={root:`${X}-layer-scheduled-root`,title:`${X}-layer-title`,content:`${X}-layer-content`,message:`${X}-layer-scheduled-message`,picker:`${X}-layer-scheduled-picker`,toolbar:`${X}-layer-scheduled-toolbar`},Qs=(0,A.Ay)(k.A,{name:X,slot:"LayerScheduledRoot"})((()=>({}))),eo=a.forwardRef(((e,t)=>{const{className:s,onClose:i,onSave:r,defaultValue:l=null}=e,c=(0,o.__rest)(e,["className","onClose","onSave","defaultValue"]),d="it"===(0,Xs.J_)().settings.locale.default?ze.A:We.A,[u,m]=(0,a.useState)(l?"string"==typeof l?(0,qe.A)(l):l:null),p=(0,a.useCallback)((e=>{e&&(m(e),r(e))}),[r]);return(0,n.jsxs)(Qs,Object.assign({ref:t,className:K()(s,Js.root)},c,{children:[(0,n.jsxs)(E.A,Object.assign({className:Js.title},{children:[(0,n.jsx)(N.A,Object.assign({onClick:i},{children:(0,n.jsx)(w.A,{children:"arrow_back"})})),(0,n.jsx)(H.A,{children:(0,n.jsx)(b.A,{id:"ui.composer.layer.scheduled.title",defaultMessage:"Programma la Pubblicazione"})}),(0,n.jsx)(U.A,Object.assign({size:"small",color:"secondary",variant:"contained",onClick:()=>r(u),disabled:!u},{children:(0,n.jsx)(b.A,{id:"ui.composer.layer.scheduled.submit",defaultMessage:"Attiva Programmazione"})}))]})),(0,n.jsxs)(T.A,Object.assign({className:Js.content},{children:[(0,n.jsx)(H.A,Object.assign({className:Js.message},{children:(0,n.jsx)(b.A,{id:"ui.composer.layer.scheduled.message",defaultMessage:"ui.composer.audience.scheduled.message"})})),(0,n.jsx)(Ue.$,Object.assign({dateAdapter:Ge.h,adapterLocale:d},{children:(0,n.jsx)(Ks,{className:Js.picker,disablePast:!0,value:u,onChange:e=>m(e),onAccept:p,slots:{toolbar:e=>{const{value:t}=e;if(!t)return null;const s=(0,Se.ZH)((0,Zs.A)(t,"EEEE",{locale:d})),o=(0,Zs.A)(t,"d MMMM yyyy \u2022 HH:mm",{locale:d});return(0,n.jsx)(H.A,Object.assign({variant:"h4"},{children:`${s} ${o}`}))},tabs:e=>(0,n.jsx)(vs,Object.assign({},e)),actionBar:()=>null},slotProps:{tabs:{hidden:!1}}})}))]}))]}))})),to=(0,a.forwardRef)((function(e,t){return(0,n.jsx)(j.A,Object.assign({ref:t},e))})),so={root:`${X}-root`,ios:`${X}-ios`,title:`${X}-title`,types:`${X}-types`,content:`${X}-content`,attributes:`${X}-attributes`,medias:`${X}-medias`,actions:`${X}-actions`,selectedAction:`${X}-selected-action`,actionSelectedIcon:`${X}-action-selected-icon`,layerTransitionRoot:`${X}-layer-transition-root`},oo=(0,A.Ay)(v.A,{name:X,slot:"Root"})((()=>({}))),no=(0,A.Ay)(f.A,{name:X,slot:"LayerTransitionRoot"})((()=>({}))),ao={id:null,type:null,title:"",titleError:null,html:"",htmlError:null,categories:[],categoriesError:null,group:null,event:null,groupsError:null,addressing:null,addressingError:null,recipients:[],medias:[],poll:null,location:null,scheduled_at:null,error:null},io=(e,t)=>{switch(t.type){case"reset":return Object.assign(Object.assign({},ao),{key:(0,Se.yT)()});case"resetEventFeed":return Object.assign(Object.assign({},ao),{event:e.event,key:(0,Se.yT)()});case"resetGroupFeed":return Object.assign(Object.assign({},ao),{group:e.group,key:(0,Se.yT)()});case"resetCategoryFeed":return Object.assign(Object.assign({},ao),{categories:e.categories,key:(0,Se.yT)()});case"multiple":return Object.assign(Object.assign({},e),t.value);default:return Object.assign(Object.assign({},e),{[t.type]:t.value})}};const ro=function(e){const t=(0,re.A)({props:e,name:X}),{feedObjectId:s=null,feedObjectType:j=null,feedObject:A=null,defaultValue:v={},mediaObjectTypes:f=[wt.A,Tt.A,kt.A],EditorProps:_={},onClose:M=null,onSuccess:D=null,feedType:L}=t,V=(0,o.__rest)(t,["feedObjectId","feedObjectType","feedObject","defaultValue","mediaObjectTypes","EditorProps","onClose","onSuccess","feedType"]),{preferences:F,features:H}=(0,m.Sw)(),U=(0,p.X1)(),{enqueueSnackbar:B}=(0,st.dh)(),G=(0,x.A)(),z=(0,O.A)(G.breakpoints.down("md"),{noSsr:(0,_e.Nh)()}),[W,q]=(0,a.useState)(!1),[Y,Z]=(0,a.useState)(),[J,Q]=(0,a.useReducer)(io,Object.assign(Object.assign(Object.assign({},ao),v),{key:(0,Se.yT)()})),{key:ee,id:te,type:se,title:oe,titleError:ne,html:ae,categories:ie,categoriesError:le,event:ce,group:de,addressing:ue,addressingError:me,recipients:pe,audience:ge,medias:he,poll:be,pollError:je,location:Ae,scheduled_at:ve,error:fe}=J,xe=(0,a.useMemo)((()=>F&&g.od in F&&F[g.od].value),[F]),Oe=(0,a.useMemo)((()=>F&&g.Yx in F&&F[g.Yx].value),[F]),ye=(0,a.useMemo)((()=>F&&g.uc in F&&F[g.uc].value),[F]),Ce=(0,a.useMemo)((()=>F&&H&&H.includes(i.q.TAGGING)&&g.O in F&&F[g.O].value),[F,H]),Ee=e=>{e.type===r.Z.POST||(e.type,r.Z.DISCUSSION),A.author.id===U.user.id?(Q({type:"multiple",value:{id:e.id,type:e.poll?R:A.type,title:e.title,html:e.html,categories:e.categories,event:e.event,group:e.group,addressing:e.addressing,recipients:e.recipients,medias:e.medias,poll:e.poll,location:e.location,scheduled_at:e.scheduled_at}}),Te(!1)):Pe(!0)},Ne=(0,a.useMemo)((()=>Boolean(s&&j||A)),[s,j,A]),[we,Te]=(0,a.useState)(Ne),[Re,Pe]=(0,a.useState)(!1),Ie=(0,a.useRef)(),$e=(0,a.useRef)(!1),De=(0,a.useRef)(null),Le=(0,a.useRef)({medias:he});Le.current={medias:he};const Ve=(0,a.useMemo)((()=>be&&be.title.length>0&&be.title.length<P&&be.choices.length>=2),[be]),Fe=(0,a.useMemo)((()=>!we&&(se===r.Z.DISCUSSION&&oe.length>0&&oe.length<P||se===r.Z.POST&&((0,Se.QZ)(ae).length>0||he.length>0||Ve)||se===R&&Ve)&&(!Oe||ue&&ue.length>0||pe&&pe.length>0)&&(!ye||ie&&ie.length>0)),[we,se,oe,ae,he,Ve,ue,pe,Oe,ie,ye]),He=(0,a.useMemo)((()=>(0,Me.O)()),[]);(0,a.useEffect)((()=>{Ne&&(null===A?(Te(!0),c.A.request({url:d.A.FeedObject.url({type:j,id:s}),method:d.A.FeedObject.method}).then((e=>{Ee(e.data)})).catch((()=>{Pe(!0)})).then((()=>Te(!1)))):Ee(A))}),[Ne]),(0,a.useEffect)((()=>{if(!$e.current&&Fe){$e.current=!0;const e=e=>(e.preventDefault(),"");window.onbeforeunload=e}else $e.current&&!Fe&&($e.current=!1,window.onbeforeunload=null)}),[J,Fe]),(0,a.useEffect)((()=>{if(!Ie.current||!He)return;const e=e=>{De.current=e.touches[0].clientY},t=e=>{const t=e.touches[0].clientY,s=t-De.current;De.current=t,s>0&&Ie.current.focus()};return Ie.current.addEventListener("touchstart",e),Ie.current.addEventListener("touchmove",t),()=>{var s,o;null===(s=Ie.current)||void 0===s||s.removeEventListener("touchstart",e),null===(o=Ie.current)||void 0===o||o.removeEventListener("touchmove",t)}}),[Ie.current,He]);const Ue=(0,a.useCallback)((e=>Z(e)),[]),Be=(0,a.useCallback)((()=>Z(null)),[]),Ge=(0,a.useCallback)((e=>{Q({type:"type",value:e})}),[]),ze=e=>{var t,s;return Oe&&!(null===(t=e.addressing)||void 0===t?void 0:t.length)&&!(null===(s=e.recipients)||void 0===s?void 0:s.length)?Ce?(0,n.jsx)(b.A,{id:"ui.composer.addressingRecipients.error.missing",defaultMessage:"ui.composer.addressingRecipients.error.missing"}):(0,n.jsx)(b.A,{id:"ui.composer.addressing.error.missing",defaultMessage:"ui.composer.addressing.error.missing"}):null},We=(0,a.useCallback)((e=>{Q({type:"multiple",value:Object.assign(Object.assign({},e),{pollError:e.poll.title.length>P?{titleError:(0,n.jsx)(b.A,{id:"ui.composer.title.error.maxlength",defaultMessage:"ui.composer.title.error.maxlength"})}:null,addressingError:ze(e)})})}),[]),qe=(0,a.useCallback)((e=>{Q({type:"multiple",value:Object.assign(Object.assign({},e),{titleError:e.title.length>P?(0,n.jsx)(b.A,{id:"ui.composer.title.error.maxlength",defaultMessage:"ui.composer.title.error.maxlength"}):null,addressingError:ze(e),categoriesError:ye&&0===e.categories.length?(0,n.jsx)(b.A,{id:"ui.composer.categories.error.missing",defaultMessage:"ui.composer.categories.error.missing"}):null})})}),[]),Ye=(0,a.useCallback)((e=>{Q({type:"multiple",value:Object.assign(Object.assign({},e),{addressingError:ze(e),categoriesError:ye&&0===e.categories.length?(0,n.jsx)(b.A,{id:"ui.composer.categories.error.missing",defaultMessage:"ui.composer.categories.error.missing"}):null})})}),[]),Ke=(0,a.useCallback)((e=>{Q({type:"multiple",value:{categories:e,categoriesError:!ye||e&&0!==e.length?null:(0,n.jsx)(b.A,{id:"ui.composer.categories.error.missing",defaultMessage:"ui.composer.categories.error.missing"})}}),Z(null)}),[]),Xe=(0,a.useCallback)((()=>Ue({name:"category",Component:jt,ComponentProps:{onClose:Be,onSave:Ke,defaultValue:ie}})),[Ue,Be,Ke,ie]),Ze=(0,a.useCallback)((e=>{de||e&&Object.prototype.hasOwnProperty.call(e,"emotional_image_position")?Q({type:"group",value:e}):ce||e&&Object.prototype.hasOwnProperty.call(e,"recurring")?Q({type:"event",value:e}):e&&Array.isArray(e)&&e.some((e=>"object"==typeof e&&!("color"in e)))||null===e&&Array.isArray(pe)&&pe.length>0?Q({type:"multiple",value:{recipients:e,addressing:[],addressingError:Oe&&!e?(0,n.jsx)(b.A,{id:"ui.composer.addressing.error.missing",defaultMessage:"ui.composer.addressing.error.missing"}):null}}):Q({type:"multiple",value:{addressing:e,recipients:[],addressingError:Oe&&!e?(0,n.jsx)(b.A,{id:"ui.composer.addressing.error.missing",defaultMessage:"ui.composer.addressing.error.missing"}):null}}),Z(null)}),[de,ce,pe]),Je=(0,a.useCallback)((()=>{const e=de||ue&&Object.prototype.hasOwnProperty.call(ue,"emotional_image_position")?de:ce||ue&&Object.prototype.hasOwnProperty.call(ue,"recurring")?ce:Array.isArray(pe)&&pe.some((e=>"object"==typeof e&&null!==e&&!("color"in e)))?pe:ue;Ue({name:"audience",Component:ke,ComponentProps:{onClose:Be,onSave:Ze,defaultValue:e}})}),[Ue,Be,Ze,ue,ce,de,pe]),Qe=(0,a.useCallback)((e=>{Q({type:"location",value:e}),Z(null)}),[]),et=(0,a.useCallback)((()=>Ue({name:"location",Component:xt,ComponentProps:{onClose:Be,onSave:Qe,defaultValue:Ae}})),[Ue,Be,Qe,Ae]),nt=(0,a.useCallback)((e=>{Q({type:"scheduled_at",value:e}),Z(null)}),[]),at=(0,a.useCallback)((()=>Ue({name:"scheduled_at",Component:eo,ComponentProps:{onClose:Be,onSave:nt,defaultValue:ve}})),[Ue,Be,nt,ve]),it=(0,a.useCallback)((e=>{const t=[...e];Q({type:"medias",value:[...e]}),Le.current.medias=t,Z(null)}),[]),rt=(0,a.useCallback)((e=>{const t=[...Le.current.medias,e];Q({type:"medias",value:t}),Le.current.medias=t}),[]),ct=(0,a.useCallback)((e=>t=>{e.layerComponent&&Ue({name:e.name,Component:e.layerComponent,ComponentProps:{onClose:Be,onSave:it,defaultValue:he}})}),[Ue,Be,it,he]),dt=(0,a.useCallback)((e=>{Q({type:"multiple",value:Object.assign(Object.assign({},e),{addressingError:ze(e),categoriesError:ye&&0===e.categories.length?(0,n.jsx)(b.A,{id:"ui.composer.categories.error.missing",defaultMessage:"ui.composer.categories.error.missing"}):null})})}),[]),ut=(0,a.useCallback)((e=>{switch(e){case"categories":Xe();break;case"addressing":case"recipients":Je();break;case"location":et();break;case"scheduled_at":at()}}),[Xe,Je,et,at]),mt=(0,a.useCallback)((e=>{if(e.preventDefault(),e.stopPropagation(),h.lT(U.user))return void B((0,n.jsx)(b.A,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3});const t=[...ie.map((e=>e.id)),...(0,ot.F)(ae)],s={title:oe,text:ae,medias:he.map((e=>e.id)),categories:t.filter(((e,s)=>t.indexOf(e)===s))};(F[g.jh].value||h.Xl(U.user)||h.HY(U.user))&&Ve&&(s.poll=be),F[g.wW].value&&Ae&&(s.location=Ae),F[g.od].value&&ve&&(s.scheduled_at=ve),H.includes(i.q.TAGGING)&&null!==ue&&(s.addressing=ue.map((e=>e.id))),H.includes(i.q.TAGGING)&&null!==pe&&(s.recipients=pe.map((e=>"string"==typeof e?e:e.username))),H.includes(i.q.TAGGING)&&H.includes(i.q.GROUPING)&&F[g.pS].value&&null!==de&&(s.group=de.id),H.includes(i.q.TAGGING)&&H.includes(i.q.EVENT)&&F[g.sv].value&&null!==ce&&(s.event=ce.id),q(!0);const o=se===R?r.Z.POST:se;let a=d.A.Composer.url({type:o}),m=d.A.Composer.method;Ne&&(a=d.A.ComposerEdit.url({type:j||o,id:te}),m=d.A.ComposerEdit.method),c.A.request({url:a,method:m,data:s}).then((e=>{D(e.data),$e.current&&(window.onbeforeunload=null),L&&L===l.i.CATEGORY?Q({type:"resetCategoryFeed"}):L===l.i.EVENT?Q({type:"resetEventFeed"}):L===l.i.GROUP?Q({type:"resetGroupFeed"}):Q({type:"reset"})})).catch((e=>{Q({type:"multiple",value:(0,u.zl)(e)})})).then((()=>q(!1)))}),[U.user,j,te,se,oe,ae,ie,ce,de,ue,pe,ge,he,be,Ae,ve,Ve]),gt=(0,a.useCallback)(((e,t)=>{$e.current&&(window.onbeforeunload=null),t&&Fe?Ue({name:"close",Component:Bt,ComponentProps:{onClose:Be,onSave:()=>{M&&M(e),Z(null),L&&L===l.i.CATEGORY?Q({type:"resetCategoryFeed"}):L===l.i.EVENT?Q({type:"resetEventFeed"}):L===l.i.GROUP?Q({type:"resetGroupFeed"}):Q({type:"reset"})}}}):(Yt&&(Kt.forEach((function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null})),Xt&&(document.removeEventListener("touchmove",ts,Wt?{passive:!1}:void 0),Xt=!1),-1),Yt?os():ss(),Kt=[],M&&M(e),Z(null),Q({type:"reset"}))}),[M,Fe,Be]),ht=(0,a.useCallback)((e=>{Fe?Ue({name:"close",Component:Bt,ComponentProps:{onClose:Be,onSave:gt}}):gt(e)}),[Fe,Ue,Be,gt]),bt=(0,a.useMemo)((()=>-1!==he.findIndex((e=>e.type===I.cJ))),[he]),At=(0,a.useMemo)((()=>{if(Ne&&we)return(0,n.jsx)($t,{});if(Ne&&Re)return(0,n.jsxs)(y.A,Object.assign({severity:"error",onClose:gt},{children:[(0,n.jsx)(C.A,{children:(0,n.jsx)(b.A,{id:"ui.composer.edit.error.title",defaultMessage:"ui.composer.edit.error.title"})}),(0,n.jsx)(b.A,{id:"ui.composer.edit.error.content",defaultMessage:"ui.composer.edit.error.content"})]}));switch(se){case R:return(0,n.jsx)(tt,{onChange:We,value:{html:ae,event:ce,group:de,addressing:ue,recipients:pe,medias:he,poll:be,location:Ae,scheduled_at:ve},error:{pollError:je,categoriesError:le,addressingError:me},disabled:W},ee);case r.Z.DISCUSSION:return(0,n.jsx)(Nt,{value:{title:oe,html:ae,categories:ie,event:ce,group:de,addressing:ue,recipients:pe,medias:he,poll:be,location:Ae,scheduled_at:ve},error:{titleError:ne,categoriesError:le,addressingError:me,error:fe},onChange:qe,disabled:W,isContentSwitchButtonVisible:!Fe&&!Ne,EditorProps:Object.assign({toolbar:!0,uploadImage:!0},_)},ee);default:return(0,n.jsx)(pt,{value:{html:ae,categories:ie,event:ce,group:de,addressing:ue,recipients:pe,medias:he,poll:be,location:Ae,scheduled_at:ve},error:{error:fe,categoriesError:le,addressingError:me},onChange:Ye,disabled:W,EditorProps:Object.assign({toolbar:!1,uploadImage:!1},_)},ee)}}),[ee,se,oe,ae,ie,ce,de,ue,pe,he,be,je,Ae,ve,fe,We,Ye,W,Fe,Ne]);return U.user||U.loading&&open?(0,n.jsxs)(oo,Object.assign({ref:Ie,TransitionComponent:to,slots:{backdrop:zt},onClose:gt},V,{disableEscapeKeyDown:!0,className:K()(so.root,{[so.ios]:He}),scroll:"body",fullScreen:z,tabIndex:-1},{children:[(0,n.jsxs)("form",Object.assign({onSubmit:mt,method:"post"},{children:[(0,n.jsxs)(E.A,Object.assign({className:so.title},{children:[(0,n.jsx)(N.A,Object.assign({onClick:ht},{children:(0,n.jsx)(w.A,{children:"close"})})),(0,n.jsx)($.A,Object.assign({size:"small",type:"submit",color:"secondary",variant:"contained",disabled:!Fe,loading:W},{children:xe&&!ve?(0,n.jsx)(b.A,{id:"ui.composer.submit.now",defaultMessage:"ui.composer.submit.now"}):(0,n.jsx)(b.A,{id:"ui.composer.submit",defaultMessage:"ui.composer.submit"})}))]})),(0,n.jsxs)(T.A,Object.assign({className:so.content},{children:[(0,n.jsx)(Mt,{value:{categories:ie,event:ce,group:de,addressing:ue,recipients:pe,location:Ae},className:so.attributes,onChange:dt,onClick:ut}),At,he&&he.length>0&&(0,n.jsx)(k.A,Object.assign({className:so.medias},{children:f.map((e=>e.previewComponent?(0,n.jsx)(e.previewComponent,{value:he,onChange:it},e.name):e.displayComponent?(0,n.jsx)(e.displayComponent,{medias:he},e.name):void 0))}))]})),!Fe&&!Ne&&(0,n.jsx)(lt,{className:so.types,onChange:Ge,size:"small",value:se}),(0,n.jsxs)(S.A,Object.assign({className:so.actions},{children:[f.filter((e=>null!==e.triggerButton)).map((e=>{const t=e.layerComponent?{onClick:ct(e)}:{onAdd:rt};return(0,n.jsx)(e.triggerButton,Object.assign({disabled:W||bt,color:he.filter(e.filter).length>0?"primary":"default"},t),e.name)})),(0,n.jsx)(N.A,Object.assign({disabled:W,onClick:Xe,color:0!==(null==ie?void 0:ie.length)?"primary":"default"},{children:(0,n.jsx)(w.A,{children:"category"})})),(0,n.jsx)(N.A,Object.assign({color:de||ce||null!==ue&&(null==ue?void 0:ue.length)>0||null!==pe&&(null==pe?void 0:pe.length)>0?"primary":"default",disabled:W||!H.includes(i.q.TAGGING)||Boolean(null==A?void 0:A.group)||Boolean(null==A?void 0:A.event),onClick:Je},{children:de?(0,n.jsx)(w.A,{children:"groups"}):ce?(0,n.jsx)(w.A,{children:"CalendarIcon"}):null===ue||0===(null==ue?void 0:ue.length)?Oe?(0,n.jsx)(w.A,{children:"label"}):(0,n.jsx)(w.A,{children:"public"}):(0,n.jsx)(w.A,{children:"label"})})),F[g.wW].value&&(0,n.jsx)(N.A,Object.assign({disabled:W,onClick:et,color:null!==Ae?"primary":"default"},{children:(0,n.jsx)(w.A,{children:"add_location_alt"})})),F[g.od].value&&(0,n.jsx)(N.A,Object.assign({disabled:W||Boolean(null==A?void 0:A.scheduled_at)&&Boolean(!(null==A?void 0:A.draft)),onClick:at,color:null!==ve?"primary":"default"},{children:(0,n.jsxs)(k.A,Object.assign({className:so.selectedAction},{children:[(0,n.jsx)(w.A,{children:"access_time"}),null!==ve&&(0,n.jsx)(w.A,Object.assign({color:"primary",className:so.actionSelectedIcon},{children:"fiber_manual_record"}))]}))}))]}))]})),Y&&(0,n.jsx)(no,Object.assign({className:so.layerTransitionRoot,in:!0,container:Ie.current,direction:"left"},{children:(0,n.jsx)(Y.Component,Object.assign({},Y.ComponentProps))}))]})):null}},26763:(e,t,s)=>{"use strict";s.d(t,{A:()=>A});var o=s(31635),n=s(74848),a=s(96540),i=s(86857),r=s(95754),l=s(11848),c=s(44675),d=s(34069),u=s(73785),m=s(25292),p=s(19546),g=s.n(p),h=s(92699);const b={root:`${h.H}-skeleton-root`,media:`${h.H}-media`},j=(0,l.Ay)(i.A,{name:h.H,slot:"SkeletonRoot"})((()=>({})));function A(e){const{template:t=r.a.SNIPPET}=e,s=(0,o.__rest)(e,["template"]),i=(0,c.A)();let l;return l=t===r.a.PREVIEW||t===r.a.DETAIL||t===r.a.SEARCH?(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)(d.A,{avatar:(0,n.jsx)(u.A,{animation:"wave",variant:"circular",width:i.selfcommunity.user.avatar.sizeMedium,height:i.selfcommunity.user.avatar.sizeMedium}),title:(0,n.jsx)(u.A,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),subheader:(0,n.jsx)(u.A,{animation:"wave",height:10,width:"40%"})}),(0,n.jsx)(u.A,{animation:"wave",variant:"rectangular",className:b.media}),(0,n.jsx)(m.A,{children:(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)(u.A,{animation:"wave",height:10,style:{marginBottom:6}}),(0,n.jsx)(u.A,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),(0,n.jsx)(u.A,{animation:"wave",height:10,width:"60%"})]})})]}):(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)(d.A,{avatar:(0,n.jsx)(u.A,{animation:"wave",variant:"circular",width:i.selfcommunity.user.avatar.sizeMedium,height:i.selfcommunity.user.avatar.sizeMedium}),title:(0,n.jsx)(u.A,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),subheader:(0,n.jsx)(u.A,{animation:"wave",height:10,width:"40%"})}),(0,n.jsx)(m.A,{children:(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)(u.A,{animation:"wave",height:10,style:{marginBottom:6}}),(0,n.jsx)(u.A,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),(0,n.jsx)(u.A,{animation:"wave",height:10,width:"60%",style:{marginBottom:6}})]})})]}),(0,n.jsx)(j,Object.assign({className:g()(b.root,`${h.H}-${t}`)},s,{children:l}))}},35488:(e,t,s)=>{"use strict";s.d(t,{A:()=>Z});var o=s(31635),n=s(74848),a=s(11848),i=s(75933),r=s(40059),l=s(47859),c=s(1489),d=s(19546),u=s.n(d),m=s(96540),p=s(40094),g=s(38427),h=s(31494);const b={root:`${h.H}-lightbox-root`},j=(0,a.Ay)(g.A,{name:h.H,slot:"LightboxRoot"})((()=>({})));function A(e){const{medias:t=[],index:s=0,toolbarButtons:a,onClose:i,onIndexChange:r}=e,l=(0,o.__rest)(e,["medias","index","toolbarButtons","onClose","onIndexChange"]),c=(0,m.useCallback)(((e,t)=>({src:e.image,width:e.image_width,height:e.image_height,key:t})),[]);return(0,n.jsx)(j,Object.assign({},l,{className:b.root,images:t.map(c),visible:-1!==s,onClose:i,index:s,onIndexChange:r,toolbarButtons:a}))}var v=s(22860),f=s(73259),x=s(79671),O=s(13550),y=s(94520),C=s(15906);const E={displayRoot:`${v.H}-display-root`,background:`${v.H}-background`,backgroundPortrait:`${v.H}-background-portrait`,heightOne:`${v.H}-height-one`,heightHalfOne:`${v.H}-height-half-one`,heightTwo:`${v.H}-height-two`,heightThree:`${v.H}-height-three`,cover:`${v.H}-cover`,coverText:`${v.H}-cover-text`,slide:`${v.H}-slide`,border:`${v.H}-border`,gallery:`${v.H}-gallery`,title:`${v.H}-title`,iconFile:`${v.H}-icon-file`,docsWrapper:`${v.H}-docs-wrapper`},N=(0,a.Ay)(i.A,{name:v.H,slot:"DisplayRoot"})((()=>({})));var w=s(4671),T=s(50236),k=s(51372),S=s(44675),_=s(90508),M=s(37211),R=s(25911),P=s(36870),I=s(3246),$=s(28820),D=s(45284),L=s(75753),V=s(3338),F=s(58065),H=s(86691),U=s(56545),B=s(29368),G=s(12341);const z=(e,t)=>{const s=(s,a)=>{const{showFileUpload:i,getInternalFileInput:r}=(0,G.Bx)(),{id:l,className:c,text:d,children:u,extraProps:p,onClick:g}=s,h=(0,o.__rest)(s,["id","className","text","children","extraProps","onClick"]),b=(0,m.useRef)();b.current=h;const j=(0,m.useCallback)((e=>{const s=r();s.current.accept=t.accept,t.capture?s.current.capture=t.capture:s.current.removeAttribute("capture"),i(b.current),null==g||g(e)}),[r,i,b,g]);return(0,n.jsx)(e,Object.assign({ref:a,onClick:j,id:l,className:c,children:u||d||"Upload"},p))};return(0,G.QB)(s),(0,m.forwardRef)(s)};var W=s(18590);const q={triggerRoot:`${v.H}-trigger-root`,triggerDrawerRoot:`${v.H}-trigger-drawer-root`,triggerMenuRoot:`${v.H}-trigger-menu-root`,paper:`${v.H}-paper`,item:`${v.H}-item`},Y=(0,a.Ay)(w.A,{name:v.H,slot:"TriggerRoot"})((()=>({}))),K=(0,a.Ay)(T.A,{name:v.H,slot:"TriggerDrawerRoot"})((()=>({}))),X=(0,a.Ay)(k.A,{name:v.H,slot:"TriggerMenuRoot"})((()=>({})));const Z={name:"file",displayComponent:e=>{const{className:t="",medias:s=[],maxVisible:a=5,gallery:d=!0,onMediaClick:g=null}=e,[h,b]=(0,m.useState)(-1),[j,v]=(0,m.useState)(void 0),{ref:w,inView:T}=(0,p.Wx)({triggerOnce:!1}),k=(0,m.useMemo)((()=>s.filter(x.S)),[s]),S=(0,m.useMemo)((()=>s.filter(x.t)),[s]),_=(e,t=!1)=>{if("object"==typeof e){const s=e.image_thumbnail?e.image_thumbnail.url:e.image?e.image:"/static/frontend_v2/images/image.svg";return t&&e.image?e.image:s}return e},M=(0,m.useCallback)((e=>{!1!==d&&(b(e),g(k[e]))}),[d,b,k,g]),R=e=>{if(!e)return null;let t=null;if(e.type)if("doc"===e.type)t=(0,n.jsx)(r.A,Object.assign({className:E.iconFile},{children:"picture_as_pdf"}));else t=(0,n.jsx)(r.A,Object.assign({className:E.iconFile},{children:"insert_drive_file"}));return(0,n.jsx)(m.Fragment,{children:e.title&&(0,n.jsx)("div",Object.assign({className:E.title},{children:(0,n.jsxs)(l.A,Object.assign({variant:"subtitle2"},{children:[t," ",e.title]}))}))})},P=e=>d?[(0,n.jsx)("div",{className:u()(E.cover,E.slide)},`cover-${e}`),(0,n.jsx)("div",Object.assign({className:u()(E.coverText,E.slide,"animate-text"),style:{fontSize:"100%"}},{children:(0,n.jsx)(r.A,{children:"zoom_out_map"})}),`cover-text-${e}`)]:null,I=e=>{const t=k.length-(a&&a>5?5:a);return[e&&(0,n.jsx)("div",{className:E.cover},"count"),e&&(0,n.jsx)("div",Object.assign({className:E.coverText,style:{fontSize:"200%"}},{children:(0,n.jsxs)("p",{children:["+",t]})}),"count-sub")]},$=(0,m.useCallback)((e=>(0,o.__awaiter)(void 0,void 0,void 0,(function*(){try{const t=yield O.A.request({url:S[e].url,responseType:"blob"}),s=new Blob([t.data],{type:"application/pdf"}),o=window.URL.createObjectURL(s),n=document.createElement("a");n.href=o,n.download=S[e].title,n.click(),window.URL.revokeObjectURL(o),null==g||g(S[e])}catch(t){y.V.error(C.d,t)}}))),[g]),D=[...k];return a&&k.length>a&&(D.length=a),0===s.length?null:(0,n.jsxs)(N,Object.assign({className:u()(E.displayRoot,t)},{children:[[1,3,4].includes(D.length)&&(()=>{const e=k.length>a&&1==a?I(!0):P(0),t=!!k[0].image_mimetype&&k[0].image_mimetype.includes("image/gif"),s=k[0].image_height<k[0].image_width;return(0,n.jsx)(c.Ay,Object.assign({container:!0,style:Object.assign({},k[0].image_thumbnail&&k[0].image_thumbnail.color?{backgroundColor:k[0].image_thumbnail.color}:{})},{children:(0,n.jsxs)(c.Ay,Object.assign({item:!0,ref:w,xs:12,classes:{root:u()(E.border,E.heightOne,Object.assign(Object.assign({},t||s?{[E.background]:!0}:{[E.backgroundPortrait]:!0}),{[E.gallery]:d,[E.heightHalfOne]:k.length>1}))},onClick:()=>M(0),style:Object.assign({background:`url(${_(k[0],T&&t)})`},s?{paddingTop:100*k[0].image_height/k[0].image_width+"%"}:{})},{children:[e,R(k[0])]}))}))})(),D.length>=2&&D.length<4&&(()=>{const e=k.length>a&&[2,3].includes(+a)?I(!0):P(1),t=[3,4].includes(k.length)||k.length>+a&&[3,4].includes(+a);return(0,n.jsxs)(c.Ay,Object.assign({container:!0},{children:[(0,n.jsxs)(c.Ay,Object.assign({item:!0,xs:6,classes:{root:u()(E.border,E.heightTwo,E.background,{[E.gallery]:d})},onClick:()=>M(t?1:0),style:{background:`url(${_(t?k[1]:k[0])})`}},{children:[P(t?1:0),R(k[0])]})),(0,n.jsxs)(c.Ay,Object.assign({item:!0,xs:6,classes:{root:u()(E.border,E.heightTwo,E.background,{[E.gallery]:d})},onClick:()=>M(t?2:1),style:{background:`url(${_(t?k[2]:k[1])})`}},{children:[e,R(k[1])]}))]}))})(),D.length>=4&&(()=>{const e=4==k.length||k.length>+a&&4==+a,t=!a||a>5||k.length>a&&[4,5].includes(+a)?I(!0):P(e?3:4);return(0,n.jsxs)(c.Ay,Object.assign({container:!0},{children:[(0,n.jsxs)(c.Ay,Object.assign({item:!0,xs:4,md:4,classes:{root:u()(E.border,E.heightThree,E.background,{[E.gallery]:d})},onClick:()=>M(e?1:2),style:{background:`url(${_(e?k[1]:k[2])})`}},{children:[P(e?1:2),R(k[1])]})),(0,n.jsxs)(c.Ay,Object.assign({item:!0,xs:4,md:4,classes:{root:u()(E.border,E.heightThree,E.background,{[E.gallery]:d})},onClick:()=>M(e?2:3),style:{background:`url(${_(e?k[2]:k[3])})`}},{children:[P(e?2:3),R(k[2])]})),(0,n.jsxs)(c.Ay,Object.assign({item:!0,xs:4,md:4,classes:{root:u()(E.border,E.heightThree,E.background,{[E.gallery]:d})},onClick:()=>M(e?3:4),style:{background:`url(${_(e?k[3]:k[4])})`}},{children:[t,R(k[3])]}))]}))})(),-1!==h&&(0,n.jsx)(A,{onClose:()=>{b(-1),v(void 0)},index:h,medias:k,toolbarButtons:j}),(0,n.jsx)(i.A,Object.assign({className:E.docsWrapper},{children:S.map(((e,t)=>(0,n.jsx)(f.A,{document:e,index:t,handleDownload:$,onMediaClick:g},e.id)))}))]}))},triggerButton:e=>{var{className:t,onAdd:s=null}=e,a=(0,o.__rest)(e,["className","onAdd"]);const[i,l]=(0,m.useState)(null),[c,d]=(0,m.useState)(!1),p=(0,D.J_)(),{preferences:g}=(0,L.Sw)(),h=(0,S.A)(),b=(0,_.A)(h.breakpoints.down("md")),{enqueueSnackbar:j,closeSnackbar:A}=(0,W.dh)(),v=(0,m.useMemo)((()=>g&&V.BF in g&&g[V.BF].value),[g]),f=(0,m.useMemo)((()=>v.split(",")),[v]),{imageMimeTypes:x,documentMimeTypes:O}=(0,m.useMemo)((()=>f.reduce(((e,t)=>e=t.startsWith("image/")?Object.assign(Object.assign({},e),{imageMimeTypes:e.imageMimeTypes.concat(`${t},`)}):Object.assign(Object.assign({},e),{documentMimeTypes:e.documentMimeTypes.concat(`${t},`)})),{imageMimeTypes:"",documentMimeTypes:""})),[f]),y=(0,m.useMemo)((()=>x.substring(0,x.length-1)),[x]),C=(0,m.useMemo)((()=>O.substring(0,O.length-1)),[O]),E=z((0,m.forwardRef)(((e,t)=>(0,n.jsx)(M.A,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:y,capture:"camera"}),N=z((0,m.forwardRef)(((e,t)=>(0,n.jsx)(M.A,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:y}),w=z((0,m.forwardRef)(((e,t)=>(0,n.jsx)(M.A,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:C}),T=z((0,m.forwardRef)(((e,t)=>(0,n.jsx)(R.A,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:y}),k=z((0,m.forwardRef)(((e,t)=>(0,n.jsx)(R.A,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:C}),G=(0,m.useCallback)((e=>{l(e.currentTarget)}),[]),Z=(0,m.useCallback)((()=>{l(null)}),[]),J=(0,m.useCallback)((e=>{if(v.includes(e.type))return!0;const t=j((0,n.jsx)(F.A,{id:"ui.composer.media.file.error",defaultMessage:"ui.composer.media.file.error"}),{variant:"error",anchorOrigin:{horizontal:"center",vertical:"top"},autoHideDuration:5e3,SnackbarProps:{onClick:()=>{A(t)}}});return!1}),[v]),Q=(0,m.useCallback)((e=>{s&&s(e)}),[s]),ee=(0,m.useCallback)((e=>{d(Object.keys(e).length>0)}),[]),te=(0,m.useCallback)(((e,t)=>{const s=j(`${e.name}: ${t}`,{variant:"error",anchorOrigin:{horizontal:"center",vertical:"top"},autoHideDuration:2e3,SnackbarProps:{onClick:()=>{A(s)}}})}),[j]),se=(0,m.useMemo)((()=>b?[(0,n.jsx)(P.Ay,Object.assign({className:q.item},{children:(0,n.jsx)(E,Object.assign({inputFieldName:"image"},{children:(0,n.jsx)(F.A,{id:"ui.composer.media.file.photo",defaultMessage:"ui.composer.media.file.photo"})}))}),"photo"),(0,n.jsx)(P.Ay,Object.assign({className:q.item},{children:(0,n.jsx)(N,Object.assign({inputFieldName:"image"},{children:(0,n.jsx)(F.A,{id:"ui.composer.media.file.gallery",defaultMessage:"ui.composer.media.file.gallery"})}))}),"gallery"),(0,n.jsx)(P.Ay,Object.assign({className:q.item},{children:(0,n.jsx)(w,Object.assign({inputFieldName:"document"},{children:(0,n.jsx)(F.A,{id:"ui.composer.media.file.document",defaultMessage:"ui.composer.media.file.document"})}))}),"document")]:[(0,n.jsx)(T,Object.assign({extraProps:{className:q.item},inputFieldName:"image"},{children:(0,n.jsx)(F.A,{id:"ui.composer.media.file.gallery",defaultMessage:"ui.composer.media.file.gallery"})}),"gallery"),(0,n.jsx)(k,Object.assign({extraProps:{className:q.item},inputFieldName:"document"},{children:(0,n.jsx)(F.A,{id:"ui.composer.media.file.document",defaultMessage:"ui.composer.media.file.document"})}),"document")]),[b,J,Q,ee,te]);return(0,n.jsxs)(U.Ay,Object.assign({destination:{url:`${p.settings.portal}${B.A.ComposerChunkUploadMedia.url()}`,method:B.A.ComposerChunkUploadMedia.method},fileFilter:J,chunkSize:204800,multiple:!0},{children:[(0,n.jsx)(H.A,{onSuccess:Q,onProgress:ee,onError:te}),(0,n.jsx)(Y,Object.assign({className:u()(t,q.triggerRoot)},a,{"aria-label":"add media",disabled:c,onClick:G},{children:c?(0,n.jsx)(I.A,{size:20}):(0,n.jsx)(r.A,{children:"photo_file"})})),b?(0,n.jsx)(K,Object.assign({onClick:()=>l(null),className:q.triggerDrawerRoot,anchor:"bottom",open:Boolean(i),onClose:Z,onOpen:G,PaperProps:{className:q.paper},disableSwipeToOpen:!0},{children:(0,n.jsx)($.A,{children:se})})):(0,n.jsx)(X,Object.assign({onClick:()=>l(null),className:q.triggerMenuRoot,anchorEl:i,open:Boolean(i),onClose:Z,PaperProps:{className:q.paper}},{children:se}))]}))},layerComponent:null,previewComponent:s(29858).A,filter:x.S}},37211:(e,t,s)=>{"use strict";s.d(t,{A:()=>f});var o=s(85486),n=s(59703),a=s(96540),i=s(54533),r=s(75659),l=s(56950),c=s(11848),d=s(39770),u=s(25669),m=s(49433),p=s(2778),g=s(96852),h=s(32850),b=s(22927),j=s(74848);const A=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],v=(0,c.Ay)(m.A,{shouldForwardProp:e=>(0,d.A)(e)||"classes"===e,name:"MuiListItemButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.dense&&t.dense,"flex-start"===s.alignItems&&t.alignItemsFlexStart,s.divider&&t.divider,!s.disableGutters&&t.gutters]}})((({theme:e,ownerState:t})=>(0,n.A)({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${b.A.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,l.X4)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${b.A.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,l.X4)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${b.A.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,l.X4)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,l.X4)(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${b.A.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${b.A.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},"flex-start"===t.alignItems&&{alignItems:"flex-start"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.dense&&{paddingTop:4,paddingBottom:4}))),f=a.forwardRef((function(e,t){const s=(0,u.b)({props:e,name:"MuiListItemButton"}),{alignItems:l="center",autoFocus:c=!1,component:d="div",children:m,dense:f=!1,disableGutters:x=!1,divider:O=!1,focusVisibleClassName:y,selected:C=!1,className:E}=s,N=(0,o.A)(s,A),w=a.useContext(h.A),T=a.useMemo((()=>({dense:f||w.dense||!1,alignItems:l,disableGutters:x})),[l,w.dense,f,x]),k=a.useRef(null);(0,p.A)((()=>{c&&k.current&&k.current.focus()}),[c]);const S=(0,n.A)({},s,{alignItems:l,dense:T.dense,disableGutters:x,divider:O,selected:C}),_=(e=>{const{alignItems:t,classes:s,dense:o,disabled:a,disableGutters:i,divider:l,selected:c}=e,d={root:["root",o&&"dense",!i&&"gutters",l&&"divider",a&&"disabled","flex-start"===t&&"alignItemsFlexStart",c&&"selected"]},u=(0,r.A)(d,b.Y,s);return(0,n.A)({},s,u)})(S),M=(0,g.A)(k,t);return(0,j.jsx)(h.A.Provider,{value:T,children:(0,j.jsx)(v,(0,n.A)({ref:M,href:N.href||N.to,component:(N.href||N.to)&&"div"===d?"button":d,focusVisibleClassName:(0,i.A)(_.focusVisible,y),ownerState:S,className:(0,i.A)(_.root,E)},N,{classes:_,children:m}))})}))},46062:(e,t,s)=>{"use strict";s.d(t,{k:()=>j});var o=s(72739),n=s(27482),a=s(96540),i=s(59145),r=s(47859),l=s(11848),c=s(3541),d=s(99370),u=s(80675);function m(e){return(0,u.A)("MuiPickersToolbarText",e)}const p=(0,s(93932).A)("MuiPickersToolbarText",["root","selected"]);var g=s(74848);const h=["className","selected","value"],b=(0,l.Ay)(r.A,{name:"MuiPickersToolbarText",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`&.${p.selected}`]:t.selected}]})((({theme:e})=>({transition:e.transitions.create("color"),color:(e.vars||e).palette.text.secondary,[`&.${p.selected}`]:{color:(e.vars||e).palette.text.primary}}))),j=a.forwardRef((function(e,t){const s=(0,c.A)({props:e,name:"MuiPickersToolbarText"}),{className:a,value:r}=s,l=(0,n.A)(s,h),u=(e=>{const{classes:t,selected:s}=e,o={root:["root",s&&"selected"]};return(0,d.A)(o,m,t)})(s);return(0,g.jsx)(b,(0,o.A)({ref:t,className:(0,i.A)(a,u.root),component:"span"},l,{children:r}))}))},61183:function(e){var t,s;e.exports=(t={772:(e,t,s)=>{const o=s(826).remove,n=/[.*+?^${}()|[\]\\]/g,a=/[a-z0-9_]/i,i=/\s+/;e.exports=function(e,t,s){var r,l;l={insideWords:!1,findAllOccurrences:!1,requireMatchAll:!1},r=(r=s)||{},Object.keys(r).forEach((e=>{l[e]=!!r[e]})),s=l;const c=Array.from(e).map((e=>o(e)));let d=c.join("");return(t=o(t)).trim().split(i).filter((e=>e.length>0)).reduce(((e,t)=>{const o=t.length,i=!s.insideWords&&a.test(t[0])?"\\b":"",r=new RegExp(i+t.replace(n,"\\$&"),"i");let l,u;if(l=r.exec(d),s.requireMatchAll&&null===l)return d="",[];for(;l;){u=l.index;const t=o-c.slice(u,u+o).join("").length,n=u-c.slice(0,u).join("").length,a=[u+n,u+o+n+t];if(a[0]!==a[1]&&e.push(a),d=d.slice(0,u)+new Array(o+1).join(" ")+d.slice(u+o),!s.findAllOccurrences)break;l=r.exec(d)}return e}),[]).sort(((e,t)=>e[0]-t[0]))}},826:e=>{var t={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\u1ea4":"A","\u1eae":"A","\u1eb2":"A","\u1eb4":"A","\u1eb6":"A","\xc6":"AE","\u1ea6":"A","\u1eb0":"A","\u0202":"A","\xc7":"C","\u1e08":"C","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\u1ebe":"E","\u1e16":"E","\u1ec0":"E","\u1e14":"E","\u1e1c":"E","\u0206":"E","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\u1e2e":"I","\u020a":"I","\xd0":"D","\xd1":"N","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\u1ed0":"O","\u1e4c":"O","\u1e52":"O","\u020e":"O","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xdd":"Y","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\u1ea5":"a","\u1eaf":"a","\u1eb3":"a","\u1eb5":"a","\u1eb7":"a","\xe6":"ae","\u1ea7":"a","\u1eb1":"a","\u0203":"a","\xe7":"c","\u1e09":"c","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\u1ebf":"e","\u1e17":"e","\u1ec1":"e","\u1e15":"e","\u1e1d":"e","\u0207":"e","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\u1e2f":"i","\u020b":"i","\xf0":"d","\xf1":"n","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\u1ed1":"o","\u1e4d":"o","\u1e53":"o","\u020f":"o","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xfd":"y","\xff":"y","\u0100":"A","\u0101":"a","\u0102":"A","\u0103":"a","\u0104":"A","\u0105":"a","\u0106":"C","\u0107":"c","\u0108":"C","\u0109":"c","\u010a":"C","\u010b":"c","\u010c":"C","\u010d":"c","C\u0306":"C","c\u0306":"c","\u010e":"D","\u010f":"d","\u0110":"D","\u0111":"d","\u0112":"E","\u0113":"e","\u0114":"E","\u0115":"e","\u0116":"E","\u0117":"e","\u0118":"E","\u0119":"e","\u011a":"E","\u011b":"e","\u011c":"G","\u01f4":"G","\u011d":"g","\u01f5":"g","\u011e":"G","\u011f":"g","\u0120":"G","\u0121":"g","\u0122":"G","\u0123":"g","\u0124":"H","\u0125":"h","\u0126":"H","\u0127":"h","\u1e2a":"H","\u1e2b":"h","\u0128":"I","\u0129":"i","\u012a":"I","\u012b":"i","\u012c":"I","\u012d":"i","\u012e":"I","\u012f":"i","\u0130":"I","\u0131":"i","\u0132":"IJ","\u0133":"ij","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u1e30":"K","\u1e31":"k","K\u0306":"K","k\u0306":"k","\u0139":"L","\u013a":"l","\u013b":"L","\u013c":"l","\u013d":"L","\u013e":"l","\u013f":"L","\u0140":"l","\u0141":"l","\u0142":"l","\u1e3e":"M","\u1e3f":"m","M\u0306":"M","m\u0306":"m","\u0143":"N","\u0144":"n","\u0145":"N","\u0146":"n","\u0147":"N","\u0148":"n","\u0149":"n","N\u0306":"N","n\u0306":"n","\u014c":"O","\u014d":"o","\u014e":"O","\u014f":"o","\u0150":"O","\u0151":"o","\u0152":"OE","\u0153":"oe","P\u0306":"P","p\u0306":"p","\u0154":"R","\u0155":"r","\u0156":"R","\u0157":"r","\u0158":"R","\u0159":"r","R\u0306":"R","r\u0306":"r","\u0212":"R","\u0213":"r","\u015a":"S","\u015b":"s","\u015c":"S","\u015d":"s","\u015e":"S","\u0218":"S","\u0219":"s","\u015f":"s","\u0160":"S","\u0161":"s","\u0162":"T","\u0163":"t","\u021b":"t","\u021a":"T","\u0164":"T","\u0165":"t","\u0166":"T","\u0167":"t","T\u0306":"T","t\u0306":"t","\u0168":"U","\u0169":"u","\u016a":"U","\u016b":"u","\u016c":"U","\u016d":"u","\u016e":"U","\u016f":"u","\u0170":"U","\u0171":"u","\u0172":"U","\u0173":"u","\u0216":"U","\u0217":"u","V\u0306":"V","v\u0306":"v","\u0174":"W","\u0175":"w","\u1e82":"W","\u1e83":"w","X\u0306":"X","x\u0306":"x","\u0176":"Y","\u0177":"y","\u0178":"Y","Y\u0306":"Y","y\u0306":"y","\u0179":"Z","\u017a":"z","\u017b":"Z","\u017c":"z","\u017d":"Z","\u017e":"z","\u017f":"s","\u0192":"f","\u01a0":"O","\u01a1":"o","\u01af":"U","\u01b0":"u","\u01cd":"A","\u01ce":"a","\u01cf":"I","\u01d0":"i","\u01d1":"O","\u01d2":"o","\u01d3":"U","\u01d4":"u","\u01d5":"U","\u01d6":"u","\u01d7":"U","\u01d8":"u","\u01d9":"U","\u01da":"u","\u01db":"U","\u01dc":"u","\u1ee8":"U","\u1ee9":"u","\u1e78":"U","\u1e79":"u","\u01fa":"A","\u01fb":"a","\u01fc":"AE","\u01fd":"ae","\u01fe":"O","\u01ff":"o","\xde":"TH","\xfe":"th","\u1e54":"P","\u1e55":"p","\u1e64":"S","\u1e65":"s","X\u0301":"X","x\u0301":"x","\u0403":"\u0413","\u0453":"\u0433","\u040c":"\u041a","\u045c":"\u043a","A\u030b":"A","a\u030b":"a","E\u030b":"E","e\u030b":"e","I\u030b":"I","i\u030b":"i","\u01f8":"N","\u01f9":"n","\u1ed2":"O","\u1ed3":"o","\u1e50":"O","\u1e51":"o","\u1eea":"U","\u1eeb":"u","\u1e80":"W","\u1e81":"w","\u1ef2":"Y","\u1ef3":"y","\u0200":"A","\u0201":"a","\u0204":"E","\u0205":"e","\u0208":"I","\u0209":"i","\u020c":"O","\u020d":"o","\u0210":"R","\u0211":"r","\u0214":"U","\u0215":"u","B\u030c":"B","b\u030c":"b","\u010c\u0323":"C","\u010d\u0323":"c","\xca\u030c":"E","\xea\u030c":"e","F\u030c":"F","f\u030c":"f","\u01e6":"G","\u01e7":"g","\u021e":"H","\u021f":"h","J\u030c":"J","\u01f0":"j","\u01e8":"K","\u01e9":"k","M\u030c":"M","m\u030c":"m","P\u030c":"P","p\u030c":"p","Q\u030c":"Q","q\u030c":"q","\u0158\u0329":"R","\u0159\u0329":"r","\u1e66":"S","\u1e67":"s","V\u030c":"V","v\u030c":"v","W\u030c":"W","w\u030c":"w","X\u030c":"X","x\u030c":"x","Y\u030c":"Y","y\u030c":"y","A\u0327":"A","a\u0327":"a","B\u0327":"B","b\u0327":"b","\u1e10":"D","\u1e11":"d","\u0228":"E","\u0229":"e","\u0190\u0327":"E","\u025b\u0327":"e","\u1e28":"H","\u1e29":"h","I\u0327":"I","i\u0327":"i","\u0197\u0327":"I","\u0268\u0327":"i","M\u0327":"M","m\u0327":"m","O\u0327":"O","o\u0327":"o","Q\u0327":"Q","q\u0327":"q","U\u0327":"U","u\u0327":"u","X\u0327":"X","x\u0327":"x","Z\u0327":"Z","z\u0327":"z"},s=Object.keys(t).join("|"),o=new RegExp(s,"g"),n=new RegExp(s,""),a=function(e){return e.replace(o,(function(e){return t[e]}))};e.exports=a,e.exports.has=function(e){return!!e.match(n)},e.exports.remove=a}},s={},function e(o){var n=s[o];if(void 0!==n)return n.exports;var a=s[o]={exports:{}};return t[o](a,a.exports,e),a.exports}(772))},71113:(e,t,s)=>{"use strict";s.d(t,{A:()=>O});var o=s(31635),n=s(74848),a=s(96540),i=s(58065),r=s(9149),l=s.n(r),c=s(61183),d=s.n(c),u=s(11848),m=s(5696),p=s(44744),g=s(18011),h=s(43581),b=s(3246),j=s(83258),A=s(79197);const v="SCCategoryAutocomplete",f={root:`${v}-root`},x=(0,u.Ay)(m.A,{name:v,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({}))),O=e=>{const t=(0,A.A)({props:e,name:v}),{onChange:s,multiple:r=!1,defaultValue:c=(r?[]:null),limitCountCategories:u=0,checkboxSelect:m=!1,disabled:O=!1,endpointQueryParams:y={},TextFieldProps:C={variant:"outlined",label:(0,n.jsx)(i.A,{id:"ui.categoryAutocomplete.label",defaultMessage:"ui.categoryAutocomplete.label"})}}=t,E=(0,o.__rest)(t,["onChange","multiple","defaultValue","limitCountCategories","checkboxSelect","disabled","endpointQueryParams","TextFieldProps"]),[N,w]=(0,a.useState)(!1),[T,k]=(0,a.useState)("string"==typeof c?null:c),{categories:S,isLoading:_}=(0,j.A)({endpointQueryParams:y});(0,a.useEffect)((()=>{null!==T&&(null==s||s(T))}),[T]),(0,a.useEffect)((()=>{_||"string"!=typeof c||k(r?S.filter((e=>e.id===Number(c))):S.find((e=>e.id===Number(c))))}),[_]);return(0,n.jsx)(x,Object.assign({className:f.root,multiple:r,open:N,onOpen:()=>{w(!0)},onClose:()=>{w(!1)},filterSelectedOptions:!m,disableCloseOnSelect:m,options:S||[],getOptionLabel:e=>e.name||"",value:T,selectOnFocus:!0,clearOnBlur:!0,blurOnSelect:!0,handleHomeEndKeys:!0,clearIcon:null,disabled:O||_,noOptionsText:(0,n.jsx)(i.A,{id:"ui.categoryAutocomplete.empty",defaultMessage:"ui.categoryAutocomplete.empty"}),onChange:(e,t)=>{let s=null;if(r&&u>0){const[...e]=t;s=e.slice(-1*u)}else s=t;k(s)},isOptionEqualToValue:(e,t)=>t.id===e.id,renderTags:(e,t)=>e.map(((e,s)=>(0,n.jsx)(p.A,Object.assign({id:e.id,label:e.name,color:e.color},t({index:s})),e.id))),renderOption:(e,t,{selected:s,inputValue:o})=>{const i=d()(t.name,o),r=l()(t.name,i);return(0,n.jsxs)("li",Object.assign({},e,{children:[m&&(0,n.jsx)(g.A,{style:{marginRight:8},checked:s}),(0,n.jsx)(p.A,{label:(0,n.jsx)(a.Fragment,{children:r.map(((e,t)=>(0,n.jsx)("span",Object.assign({style:{fontWeight:e.highlight?700:400}},{children:e.text}),t)))})})]}))},renderInput:e=>(0,n.jsx)(h.A,Object.assign({},e,C,{margin:"dense",InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"categories",endAdornment:(0,n.jsxs)(a.Fragment,{children:[_?(0,n.jsx)(b.A,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},E))}},71724:(e,t,s)=>{"use strict";s.d(t,{i:()=>n});var o=s(95878);const n=({adapter:e,value:t,props:s})=>{if(null===t)return null;const{minTime:n,maxTime:a,minutesStep:i,shouldDisableClock:r,shouldDisableTime:l,disableIgnoringDatePartForTimeValidation:c=!1,disablePast:d,disableFuture:u,timezone:m}=s,p=e.utils.dateWithTimezone(void 0,m),g=(0,o.iF)(c,e.utils);switch(!0){case!e.utils.isValid(t):return"invalidDate";case Boolean(n&&g(n,t)):return"minTime";case Boolean(a&&g(t,a)):return"maxTime";case Boolean(u&&e.utils.isAfter(t,p)):return"disableFuture";case Boolean(d&&e.utils.isBefore(t,p)):return"disablePast";case Boolean(l&&l(t,"hours")):return"shouldDisableTime-hours";case Boolean(l&&l(t,"minutes")):return"shouldDisableTime-minutes";case Boolean(l&&l(t,"seconds")):return"shouldDisableTime-seconds";case Boolean(r&&r(e.utils.getHours(t),"hours")):return"shouldDisableClock-hours";case Boolean(r&&r(e.utils.getMinutes(t),"minutes")):return"shouldDisableClock-minutes";case Boolean(r&&r(e.utils.getSeconds(t),"seconds")):return"shouldDisableClock-seconds";case Boolean(i&&e.utils.getMinutes(t)%i!=0):return"minutesStep";default:return null}}},72324:(e,t,s)=>{"use strict";s.d(t,{Zo:()=>ce});var o=s(96540),n=s(72739),a=s(27482),i=s(59145),r=s(11848),l=s(3541),c=s(99370),d=s(75372),u=s(82452),m=s(35892),p=s(95878),g=s(93703),h=s(50117),b=s(81593),j=s(80675),A=s(93932);function v(e){return(0,j.A)("MuiTimeClock",e)}(0,A.A)("MuiTimeClock",["root","arrowSwitcher"]);var f=s(4671),x=s(47859),O=s(73936);const y=220,C=36,E={x:y/2,y:y/2},N=E.x-E.x,w=0-E.y,T=(e,t,s)=>{const o=t-E.x,n=s-E.y,a=Math.atan2(N,w)-Math.atan2(o,n);let i=a*(180/Math.PI);i=Math.round(i/e)*e,i%=360;const r=o**2+n**2;return{value:Math.floor(i/e)||0,distance:Math.sqrt(r)}};function k(e){return(0,j.A)("MuiClockPointer",e)}(0,A.A)("MuiClockPointer",["root","thumb"]);var S=s(74848);const _=["className","hasSelected","isInner","type","viewValue"],M=e=>{const{classes:t}=e;return(0,c.A)({root:["root"],thumb:["thumb"]},k,t)},R=(0,r.Ay)("div",{name:"MuiClockPointer",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e,ownerState:t})=>(0,n.A)({width:2,backgroundColor:(e.vars||e).palette.primary.main,position:"absolute",left:"calc(50% - 1px)",bottom:"50%",transformOrigin:"center bottom 0px"},t.shouldAnimate&&{transition:e.transitions.create(["transform","height"])}))),P=(0,r.Ay)("div",{name:"MuiClockPointer",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})((({theme:e,ownerState:t})=>(0,n.A)({width:4,height:4,backgroundColor:(e.vars||e).palette.primary.contrastText,borderRadius:"50%",position:"absolute",top:-21,left:"calc(50% - 18px)",border:`16px solid ${(e.vars||e).palette.primary.main}`,boxSizing:"content-box"},t.hasSelected&&{backgroundColor:(e.vars||e).palette.primary.main})));function I(e){const t=(0,l.A)({props:e,name:"MuiClockPointer"}),{className:s,isInner:r,type:c,viewValue:d}=t,u=(0,a.A)(t,_),m=o.useRef(c);o.useEffect((()=>{m.current=c}),[c]);const p=(0,n.A)({},t,{shouldAnimate:m.current!==c}),g=M(p);return(0,S.jsx)(R,(0,n.A)({style:(()=>{let e=360/("hours"===c?12:60)*d;return"hours"===c&&d>12&&(e-=360),{height:Math.round((r?.26:.4)*y),transform:`rotateZ(${e}deg)`}})(),className:(0,i.A)(s,g.root),ownerState:p},u,{children:(0,S.jsx)(P,{ownerState:p,className:g.thumb})}))}function $(e){return(0,j.A)("MuiClock",e)}(0,A.A)("MuiClock",["root","clock","wrapper","squareMask","pin","amButton","pmButton","meridiemText"]);var D=s(23887);const L=(0,r.Ay)("div",{name:"MuiClock",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({display:"flex",justifyContent:"center",alignItems:"center",margin:e.spacing(2)}))),V=(0,r.Ay)("div",{name:"MuiClock",slot:"Clock",overridesResolver:(e,t)=>t.clock})({backgroundColor:"rgba(0,0,0,.07)",borderRadius:"50%",height:220,width:220,flexShrink:0,position:"relative",pointerEvents:"none"}),F=(0,r.Ay)("div",{name:"MuiClock",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})({"&:focus":{outline:"none"}}),H=(0,r.Ay)("div",{name:"MuiClock",slot:"SquareMask",overridesResolver:(e,t)=>t.squareMask})((({ownerState:e})=>(0,n.A)({width:"100%",height:"100%",position:"absolute",pointerEvents:"auto",outline:0,touchAction:"none",userSelect:"none"},e.disabled?{}:{"@media (pointer: fine)":{cursor:"pointer",borderRadius:"50%"},"&:active":{cursor:"move"}}))),U=(0,r.Ay)("div",{name:"MuiClock",slot:"Pin",overridesResolver:(e,t)=>t.pin})((({theme:e})=>({width:6,height:6,borderRadius:"50%",backgroundColor:(e.vars||e).palette.primary.main,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}))),B=(0,r.Ay)(f.A,{name:"MuiClock",slot:"AmButton",overridesResolver:(e,t)=>t.amButton})((({theme:e,ownerState:t})=>(0,n.A)({zIndex:1,position:"absolute",bottom:8,left:8,paddingLeft:4,paddingRight:4,width:C},"am"===t.meridiemMode&&{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:hover":{backgroundColor:(e.vars||e).palette.primary.light}}))),G=(0,r.Ay)(f.A,{name:"MuiClock",slot:"PmButton",overridesResolver:(e,t)=>t.pmButton})((({theme:e,ownerState:t})=>(0,n.A)({zIndex:1,position:"absolute",bottom:8,right:8,paddingLeft:4,paddingRight:4,width:C},"pm"===t.meridiemMode&&{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:hover":{backgroundColor:(e.vars||e).palette.primary.light}}))),z=(0,r.Ay)(x.A,{name:"MuiClock",slot:"meridiemText",overridesResolver:(e,t)=>t.meridiemText})({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"});function W(e){const t=(0,l.A)({props:e,name:"MuiClock"}),{ampm:s,ampmInClock:n,autoFocus:a,children:r,value:d,handleMeridiemChange:m,isTimeDisabled:p,meridiemMode:g,minutesStep:h=1,onChange:b,selectedId:j,type:A,viewValue:v,disabled:f,readOnly:x,className:E}=t,N=t,w=(0,u.hc)(),k=(0,u.Nq)(),_=o.useRef(!1),M=(e=>{const{classes:t}=e;return(0,c.A)({root:["root"],clock:["clock"],wrapper:["wrapper"],squareMask:["squareMask"],pin:["pin"],amButton:["amButton"],pmButton:["pmButton"],meridiemText:["meridiemText"]},$,t)})(N),R=p(v,A),P=!s&&"hours"===A&&(v<1||v>12),W=(e,t)=>{f||x||p(e,A)||b(e,t)},q=(e,t)=>{let{offsetX:o,offsetY:n}=e;if(void 0===o){const t=e.target.getBoundingClientRect();o=e.changedTouches[0].clientX-t.left,n=e.changedTouches[0].clientY-t.top}const a="seconds"===A||"minutes"===A?((e,t,s=1)=>{const o=6*s;let{value:n}=T(o,e,t);return n=n*s%60,n})(o,n,h):((e,t,s)=>{const{value:o,distance:n}=T(30,e,t);let a=o||12;return s?a%=12:n<y/2-C&&(a+=12,a%=24),a})(o,n,Boolean(s));W(a,t)},Y=o.useMemo((()=>"hours"===A||v%5==0),[A,v]),K="minutes"===A?h:1,X=o.useRef(null);(0,O.A)((()=>{a&&X.current.focus()}),[a]);return(0,S.jsxs)(L,{className:(0,i.A)(E,M.root),children:[(0,S.jsxs)(V,{className:M.clock,children:[(0,S.jsx)(H,{onTouchMove:e=>{_.current=!0,q(e,"shallow")},onTouchEnd:e=>{_.current&&(q(e,"finish"),_.current=!1)},onMouseUp:e=>{_.current&&(_.current=!1),q(e.nativeEvent,"finish")},onMouseMove:e=>{e.buttons>0&&q(e.nativeEvent,"shallow")},ownerState:{disabled:f},className:M.squareMask}),!R&&(0,S.jsxs)(o.Fragment,{children:[(0,S.jsx)(U,{className:M.pin}),null!=d&&(0,S.jsx)(I,{type:A,viewValue:v,isInner:P,hasSelected:Y})]}),(0,S.jsx)(F,{"aria-activedescendant":j,"aria-label":k.clockLabelText(A,d,w),ref:X,role:"listbox",onKeyDown:e=>{if(!_.current)switch(e.key){case"Home":W(0,"partial"),e.preventDefault();break;case"End":W("minutes"===A?59:23,"partial"),e.preventDefault();break;case"ArrowUp":W(v+K,"partial"),e.preventDefault();break;case"ArrowDown":W(v-K,"partial"),e.preventDefault()}},tabIndex:0,className:M.wrapper,children:r})]}),s&&n&&(0,S.jsxs)(o.Fragment,{children:[(0,S.jsx)(B,{onClick:x?void 0:()=>m("am"),disabled:f||null===g,ownerState:N,className:M.amButton,title:(0,D._S)(w,"am"),children:(0,S.jsx)(z,{variant:"caption",className:M.meridiemText,children:(0,D._S)(w,"am")})}),(0,S.jsx)(G,{disabled:f||null===g,onClick:x?void 0:()=>m("pm"),ownerState:N,className:M.pmButton,title:(0,D._S)(w,"pm"),children:(0,S.jsx)(z,{variant:"caption",className:M.meridiemText,children:(0,D._S)(w,"pm")})})]})]})}function q(e){return(0,j.A)("MuiClockNumber",e)}const Y=(0,A.A)("MuiClockNumber",["root","selected","disabled"]),K=["className","disabled","index","inner","label","selected"],X=(0,r.Ay)("span",{name:"MuiClockNumber",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`&.${Y.disabled}`]:t.disabled},{[`&.${Y.selected}`]:t.selected}]})((({theme:e,ownerState:t})=>(0,n.A)({height:C,width:C,position:"absolute",left:"calc((100% - 36px) / 2)",display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",color:(e.vars||e).palette.text.primary,fontFamily:e.typography.fontFamily,"&:focused":{backgroundColor:(e.vars||e).palette.background.paper},[`&.${Y.selected}`]:{color:(e.vars||e).palette.primary.contrastText},[`&.${Y.disabled}`]:{pointerEvents:"none",color:(e.vars||e).palette.text.disabled}},t.inner&&(0,n.A)({},e.typography.body2,{color:(e.vars||e).palette.text.secondary}))));function Z(e){const t=(0,l.A)({props:e,name:"MuiClockNumber"}),{className:s,disabled:o,index:r,inner:d,label:u,selected:m}=t,p=(0,a.A)(t,K),g=t,h=(e=>{const{classes:t,selected:s,disabled:o}=e,n={root:["root",s&&"selected",o&&"disabled"]};return(0,c.A)(n,q,t)})(g),b=r%12/12*Math.PI*2-Math.PI/2,j=(y-C-2)/2*(d?.65:1),A=Math.round(Math.cos(b)*j),v=Math.round(Math.sin(b)*j);return(0,S.jsx)(X,(0,n.A)({className:(0,i.A)(s,h.root),"aria-disabled":!!o||void 0,"aria-selected":!!m||void 0,role:"option",style:{transform:`translate(${A}px, ${v+(y-C)/2}px`},ownerState:g},p,{children:u}))}const J=({ampm:e,value:t,getClockNumberText:s,isDisabled:o,selectedId:n,utils:a})=>{const i=t?a.getHours(t):null,r=[],l=e?12:23,c=t=>null!==i&&(e?12===t?12===i||0===i:i===t||i-12===t:i===t);for(let d=e?1:0;d<=l;d+=1){let t=d.toString();0===d&&(t="00");const i=!e&&(0===d||d>12);t=a.formatNumber(t);const l=c(d);r.push((0,S.jsx)(Z,{id:l?n:void 0,index:d,inner:i,selected:l,disabled:o(d),label:t,"aria-label":s(t)},d))}return r},Q=({utils:e,value:t,isDisabled:s,getClockNumberText:o,selectedId:n})=>{const a=e.formatNumber;return[[5,a("05")],[10,a("10")],[15,a("15")],[20,a("20")],[25,a("25")],[30,a("30")],[35,a("35")],[40,a("40")],[45,a("45")],[50,a("50")],[55,a("55")],[0,a("00")]].map((([e,a],i)=>{const r=e===t;return(0,S.jsx)(Z,{label:a,id:r?n:void 0,index:i+1,inner:!1,disabled:s(e),selected:r,"aria-label":o(a)},e)}))};var ee=s(33059),te=s(16566),se=s(60831),oe=s(78401);const ne=["ampm","ampmInClock","autoFocus","components","componentsProps","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableClock","shouldDisableTime","showViewSwitcher","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","disabled","readOnly","timezone"],ae=(0,r.Ay)(b.I,{name:"MuiTimeClock",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"column",position:"relative"}),ie=(0,r.Ay)(m.Y,{name:"MuiTimeClock",slot:"ArrowSwitcher",overridesResolver:(e,t)=>t.arrowSwitcher})({position:"absolute",right:12,top:15}),re=["hours","minutes"],le=o.forwardRef((function(e,t){const s=(0,u.hc)(),r=(0,l.A)({props:e,name:"MuiTimeClock"}),{ampm:m=s.is12HourCycleInCurrentLocale(),ampmInClock:b=!1,autoFocus:j,components:A,componentsProps:f,slots:x,slotProps:O,value:y,defaultValue:C,referenceDate:E,disableIgnoringDatePartForTimeValidation:N=!1,maxTime:w,minTime:T,disableFuture:k,disablePast:_,minutesStep:M=1,shouldDisableClock:R,shouldDisableTime:P,showViewSwitcher:I,onChange:$,view:L,views:V=re,openTo:F,onViewChange:H,focusedView:U,onFocusedViewChange:B,className:G,disabled:z,readOnly:q,timezone:Y}=r,K=(0,a.A)(r,ne),X=null!=x?x:(0,se.p)(A),Z=null!=O?O:f,{value:le,handleValueChange:ce,timezone:de}=(0,ee.Y)({name:"TimeClock",timezone:Y,value:y,defaultValue:C,onChange:$,valueManager:te.W}),ue=(({value:e,referenceDate:t,utils:s,props:n,timezone:a})=>{const i=o.useMemo((()=>te.W.getInitialReferenceValue({value:e,utils:s,props:n,referenceDate:t,granularity:oe.yX.day,timezone:a,getTodayDate:()=>(0,D.ak)(s,a,"date")})),[]);return null!=e?e:i})({value:le,referenceDate:E,utils:s,props:r,timezone:de}),me=(0,u.Nq)(),pe=(0,u.cB)(de),{view:ge,setView:he,previousView:be,nextView:je,setValueAndGoToNextView:Ae}=(0,g.o)({view:L,views:V,openTo:F,onViewChange:H,onChange:ce,focusedView:U,onFocusedViewChange:B}),{meridiemMode:ve,handleMeridiemChange:fe}=(0,h.r7)(ue,m,Ae),xe=o.useCallback(((e,t)=>{const o=(0,p.iF)(N,s),n="hours"===t||"minutes"===t&&V.includes("seconds"),a=({start:e,end:t})=>(!T||!o(T,t))&&((!w||!o(e,w))&&((!k||!o(e,pe))&&(!_||!o(pe,n?t:e)))),i=(e,o=1)=>{if(e%o!=0)return!1;if(null!=R&&R(e,t))return!1;if(P)switch(t){case"hours":return!P(s.setHours(ue,e),"hours");case"minutes":return!P(s.setMinutes(ue,e),"minutes");case"seconds":return!P(s.setSeconds(ue,e),"seconds");default:return!1}return!0};switch(t){case"hours":{const t=(0,p.gY)(e,ve,m),o=s.setHours(ue,t);return!a({start:s.setSeconds(s.setMinutes(o,0),0),end:s.setSeconds(s.setMinutes(o,59),59)})||!i(t)}case"minutes":{const t=s.setMinutes(ue,e);return!a({start:s.setSeconds(t,0),end:s.setSeconds(t,59)})||!i(e,M)}case"seconds":{const t=s.setSeconds(ue,e);return!a({start:t,end:t})||!i(e)}default:throw new Error("not supported")}}),[m,ue,N,w,ve,T,M,R,P,s,k,_,pe,V]),Oe=(0,d.A)(),ye=o.useMemo((()=>{switch(ge){case"hours":{const e=(e,t)=>{const o=(0,p.gY)(e,ve,m);Ae(s.setHours(ue,o),t)};return{onChange:e,viewValue:s.getHours(ue),children:J({value:le,utils:s,ampm:m,onChange:e,getClockNumberText:me.hoursClockNumberText,isDisabled:e=>z||xe(e,"hours"),selectedId:Oe})}}case"minutes":{const e=s.getMinutes(ue),t=(e,t)=>{Ae(s.setMinutes(ue,e),t)};return{viewValue:e,onChange:t,children:Q({utils:s,value:e,onChange:t,getClockNumberText:me.minutesClockNumberText,isDisabled:e=>z||xe(e,"minutes"),selectedId:Oe})}}case"seconds":{const e=s.getSeconds(ue),t=(e,t)=>{Ae(s.setSeconds(ue,e),t)};return{viewValue:e,onChange:t,children:Q({utils:s,value:e,onChange:t,getClockNumberText:me.secondsClockNumberText,isDisabled:e=>z||xe(e,"seconds"),selectedId:Oe})}}default:throw new Error("You must provide the type for ClockView")}}),[ge,s,le,m,me.hoursClockNumberText,me.minutesClockNumberText,me.secondsClockNumberText,ve,Ae,ue,xe,Oe,z]),Ce=r,Ee=(e=>{const{classes:t}=e;return(0,c.A)({root:["root"],arrowSwitcher:["arrowSwitcher"]},v,t)})(Ce);return(0,S.jsxs)(ae,(0,n.A)({ref:t,className:(0,i.A)(Ee.root,G),ownerState:Ce},K,{children:[(0,S.jsx)(W,(0,n.A)({autoFocus:null!=j?j:!!U,ampmInClock:b&&V.includes("hours"),value:le,type:ge,ampm:m,minutesStep:M,isTimeDisabled:xe,meridiemMode:ve,handleMeridiemChange:fe,selectedId:Oe,disabled:z,readOnly:q},ye)),I&&(0,S.jsx)(ie,{className:Ee.arrowSwitcher,slots:X,slotProps:Z,onGoToPrevious:()=>he(be),isPreviousDisabled:!be,previousLabel:me.openPreviousView,onGoToNext:()=>he(je),isNextDisabled:!je,nextLabel:me.openNextView,ownerState:Ce})]}))})),ce=({view:e,onViewChange:t,focusedView:s,onFocusedViewChange:o,views:n,value:a,defaultValue:i,referenceDate:r,onChange:l,className:c,classes:d,disableFuture:u,disablePast:m,minTime:g,maxTime:h,shouldDisableTime:b,shouldDisableClock:j,minutesStep:A,ampm:v,ampmInClock:f,components:x,componentsProps:O,slots:y,slotProps:C,readOnly:E,disabled:N,sx:w,autoFocus:T,showViewSwitcher:k,disableIgnoringDatePartForTimeValidation:_,timezone:M})=>(0,S.jsx)(le,{view:e,onViewChange:t,focusedView:s&&(0,p.hW)(s)?s:null,onFocusedViewChange:o,views:n.filter(p.hW),value:a,defaultValue:i,referenceDate:r,onChange:l,className:c,classes:d,disableFuture:u,disablePast:m,minTime:g,maxTime:h,shouldDisableTime:b,shouldDisableClock:j,minutesStep:A,ampm:v,ampmInClock:f,components:x,componentsProps:O,slots:y,slotProps:C,readOnly:E,disabled:N,sx:w,autoFocus:T,showViewSwitcher:k,disableIgnoringDatePartForTimeValidation:_,timezone:M})},74859:(e,t,s)=>{"use strict";s.d(t,{A:()=>E,z:()=>C});var o=s(31635),n=s(74848),a=s(96540),i=s(11848),r=s(71194),l=s(1136),c=s(75933),d=s(47859),u=s(71543),m=s(40059),p=s(87467),g=s(57416),h=s(1275),b=s(21676);const j="SCTags",A=(0,i.Ay)(r.A,{name:`${j}`,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({cursor:"pointer"}))),v={paper:`${j}-paper`},f=(0,i.Ay)(l.A,{name:`${j}Popper`,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({zIndex:2,[`& .${v.paper}`]:{padding:"10px 5px"}}))),x=(0,i.Ay)(c.A,{name:`${j}List`,slot:"Root",overridesResolver:(e,t)=>t.root})({}),O=(0,i.Ay)(c.A,{name:`${j}Stack`,slot:"Root",overridesResolver:(e,t)=>t.root})({flexWrap:"wrap",justifyContent:"flex-start",alignItems:"flex-start","& > div:not(style)+:not(style)":{margin:0}}),y=(0,i.Ay)(r.A,{name:`${j}ItemList`,slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({padding:e.spacing(.2),textAlign:"center",color:e.palette.text.secondary})));var C;function E(e){const{tags:t=[],title:s=null,type:i=C.POPPER,onOpen:r=null,onClose:l=null,onClickTag:c=null,TagChipProps:j={}}=e,E=(0,o.__rest)(e,["tags","title","type","onOpen","onClose","onClickTag","TagChipProps"]),[N,w]=(0,a.useState)(!1);let T=(0,a.useRef)(null);function k(){T.current&&T.current.contains(event.target)||(w(!1),E.onClose&&E.onClose())}function S(){return(0,n.jsx)(n.Fragment,{children:s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.A,Object.assign({sx:{padding:1,fontWeight:600}},{children:s})),(0,n.jsx)(u.A,{})]})})}const _=(0,a.useRef)(N);return a.useEffect((()=>{!0===_.current&&!1===N&&T.current.focus(),_.current=N}),[N]),(0,n.jsx)(n.Fragment,{children:t.length&&t.filter((e=>e.visible)).length>0&&(0,n.jsx)(a.Fragment,{children:i===C.POPPER?(0,n.jsxs)(A,Object.assign({},E,{children:[(0,n.jsx)(m.A,Object.assign({ref:T,fontSize:"small",onClick:function(){w((e=>!e)),E.onOpen&&E.onOpen(!N)},"aria-haspopup":"true"},{children:"label"})),(0,n.jsx)(f,Object.assign({open:N,anchorEl:T.current,transition:!0,placement:"bottom-start",modifiers:[{name:"preventOverflow",enabled:!0}]},{children:e=>{var{TransitionProps:s,placement:a}=e,i=(0,o.__rest)(e,["TransitionProps","placement"]);return(0,n.jsx)(p.A,Object.assign({},s,{style:{transformOrigin:"bottom"===a?"center top":"center bottom"}},{children:(0,n.jsx)(g.A,Object.assign({variant:"outlined",className:v.paper},{children:(0,n.jsx)(h.x,Object.assign({onClickAway:k},{children:(0,n.jsxs)(n.Fragment,{children:[S(),(0,n.jsx)(O,Object.assign({spacing:2},i,{children:t.filter((e=>e.visible)).map((e=>(0,n.jsx)(y,{children:(0,n.jsx)(b.A,Object.assign({tag:e,onClick:c},j))},e.id)))}))]})}))}))}))}}))]})):(0,n.jsxs)(x,{children:[S(),(0,n.jsx)(O,Object.assign({spacing:1,direction:E.direction?E.direction:"column"},{children:t.filter((e=>e.visible)).map((e=>(0,n.jsx)(y,{children:(0,n.jsx)(b.A,Object.assign({tag:e,onClick:c},j))},e.id)))}))]})})})}!function(e){e.LIST="list",e.POPPER="popper"}(C||(C={}))},77334:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!(e instanceof HTMLElement))return document.documentElement;for(var t="absolute"===e.style.position,s=/(scroll|auto)/,o=e;o;){if(!o.parentNode)return e.ownerDocument||document.documentElement;var n=window.getComputedStyle(o),a=n.position,i=n.overflow,r=n["overflow-x"],l=n["overflow-y"];if("static"===a&&t)o=o.parentNode;else{if(s.test(i)&&s.test(r)&&s.test(l))return o;o=o.parentNode}}return e.ownerDocument||e.documentElement||document.documentElement}},83258:(e,t,s)=>{"use strict";s.d(t,{A:()=>m});var o=s(31635),n=s(96540),a=s(42269),i=s(29368),r=s(27202),l=s(28692),c=s(94520),d=s(86354);const u={categories:[],isLoading:!0},m=e=>{const{cacheStrategy:t=l.So.CACHE_FIRST,endpointQueryParams:s={}}=e||{},m=(0,d.hI)(),p=t!==l.So.NETWORK_ONLY?((e,t)=>{if(!e)return null;const s=e.map((e=>{const t=(0,d.fL)(e);return l.Ay.get(t)}));return s.filter((e=>!e)).length>0?null:(null==t?void 0:t.can_create_content)?s.filter((e=>!e.content_only_staff)):s})(l.Ay.get(m,null),s):null,[g,h]=(0,n.useState)(null!==p?{categories:p,isLoading:!1}:u),b=(e=i.A.CategoryList.url())=>(0,o.__awaiter)(void 0,void 0,void 0,(function*(){const t=yield r.A.getAllCategories(Object.assign({active:!0},s),{url:e});return t.next?t.results.concat(yield b(t.next)):t.results}));return(0,n.useEffect)((()=>{t===l.So.CACHE_FIRST&&p||b().then((e=>{h({categories:e,isLoading:!1}),l.Ay.set(m,e.map((e=>{const t=(0,d.fL)(e.id);return l.Ay.set(t,e),e.id})))})).catch((e=>{console.log(e),c.V.error(a.K,"Unable to retrieve categories")}))}),[]),g}},84497:(e,t,s)=>{"use strict";s.d(t,{A:()=>os});var o=s(31635),n=s(74848),a=s(96540),i=s(11848),r=s(47859),l=s(42942),c=s(25292),d=s(71194),u=s(44744),m=s(40059),p=s(34069),g=s(27365),h=s(18653),b=s(75933),j=s(25430),A=s(17809),v=s(26763),f=s(6836),x=s(12486),O=s(74859),y=s(1489),C=s(71543),E=s(19546),N=s.n(E),w=s(42606),T=s(57473),k=s(92699);const S={root:`${k.H}-action-vote-root`,divider:`${k.H}-action-vote-divider`,button:`${k.H}-action-vote-button`,inline:`${k.H}-action-vote-inline`,viewAudienceButton:`${k.H}-action-vote-view-audience-button`},_=(0,i.Ay)(d.A,{name:k.H,slot:"ActionVoteRoot"})((()=>({})));const M=function(e){const{className:t=null,feedObjectId:s=null,feedObject:i=null,feedObjectType:r=null,withAudience:l=!0,withAction:c=!0,inlineAction:d=!1,onVoteAction:u=(()=>null)}=e,m=(0,o.__rest)(e,["className","feedObjectId","feedObject","feedObjectType","withAudience","withAction","inlineAction","onVoteAction"]);return(0,n.jsxs)(_,Object.assign({className:N()(S.root,t,{[S.inline]:d})},m,{children:[l&&(0,n.jsx)(T.A,{className:S.viewAudienceButton,contributionId:s,contributionType:r,contribution:i,variant:"text",size:"small"}),c&&(0,n.jsxs)(a.Fragment,{children:[!d&&l&&(0,n.jsx)(C.A,{className:S.divider}),(0,n.jsx)(w.A,{className:S.button,contributionId:s,contributionType:r,contribution:i,onVote:u})]})]}))};var R=s(27885),P=s(6442),I=s(73785),$=s(77577),D=s(20411),L=s(3341),V=s(83426),F=s(95754),H=s(74531);const U=(0,R.YK)({comments:{id:"ui.feedObject.comment.comments",defaultMessage:"ui.feedObject.comment.comments"},comment:{id:"ui.feedObject.comment.comment",defaultMessage:"ui.feedObject.comment.comment"}}),B={root:`${k.H}-action-comment-root`,divider:`${k.H}-action-comment-divider`,inline:`${k.H}-action-comment-inline`,button:`${k.H}-action-comment-button`,viewAudienceButton:`${k.H}-action-comment-view-audience-button`},G=(0,i.Ay)(d.A,{name:k.H,slot:"ActionCommentRoot"})((()=>({})));const z=function(e){const{className:t,feedObjectId:s,feedObject:i,feedObjectType:c=V.Z.POST,feedObjectTemplate:d=F.a,withAction:u=!0,withAudience:p=!0,inlineAction:g=!1,onViewCommentsAction:b,onCommentAction:j}=e,A=(0,o.__rest)(e,["className","feedObjectId","feedObject","feedObjectType","feedObjectTemplate","withAction","withAudience","inlineAction","onViewCommentsAction","onCommentAction"]),{obj:v,setObj:f}=(0,$.A)({id:s,feedObject:i,feedObjectType:c}),x=(0,D.I$)(),O=(0,P.A)();return(0,n.jsxs)(G,Object.assign({className:N()(B.root,t,{[B.inline]:g})},A,{children:[function(){let e;return p&&(e=v?(0,n.jsx)(n.Fragment,{children:b?(0,n.jsx)(l.A,Object.assign({variant:"text",size:"small",onClick:b,color:"inherit"},{children:`${O.formatMessage(U.comments,{total:v.comment_count})}`})):(0,n.jsx)(n.Fragment,{children:d===F.a.DETAIL?(0,n.jsx)(r.A,Object.assign({variant:"body2"},{children:`${O.formatMessage(U.comments,{total:v.comment_count})}`})):(0,n.jsx)(l.A,Object.assign({variant:"text",size:"small",component:L.A,to:x.url((0,H.lg)(v),(0,H.kB)(v)),classes:{root:B.viewAudienceButton}},{children:`${O.formatMessage(U.comments,{total:v.comment_count})}`}))})}):(0,n.jsx)(l.A,Object.assign({variant:"text",size:"small",disabled:!0,color:"inherit"},{children:(0,n.jsx)(I.A,{animation:"wave",height:18,width:50})}))),e}(),function(){let e={};return j||(e={component:L.A,to:x.url((0,H.lg)(v),(0,H.kB)(v))}),(0,n.jsx)(n.Fragment,{children:u&&(0,n.jsxs)(a.Fragment,{children:[!g&&p&&(0,n.jsx)(C.A,{className:B.divider}),(0,n.jsx)(h.A,Object.assign({title:`${O.formatMessage(U.comment)}`},{children:(0,n.jsx)(l.A,Object.assign({onClick:j,className:B.button},e,{children:(0,n.jsx)(m.A,{children:"chat_bubble_outline"})}))}))]})})}()]}))};var W=s(58065),q=s(58662),Y=s(28820),K=s(36870),X=s(43749),Z=s(29368),J=s(13550),Q=s(94520),ee=s(15906),te=s(29251),se=s(46248),oe=s(16799);const ne=function(e){const{id:t=null,feedObject:s=null,feedObjectType:i=(s?s.type:V.Z.POST),open:l=!1,onClose:c=null}=e,d=(0,o.__rest)(e,["id","feedObject","feedObjectType","open","onClose"]),{obj:u,setObj:m}=(0,$.A)({id:t,feedObject:s,feedObjectType:i}),[p,g]=(0,a.useState)(Boolean(t&&i||s)),[h,b]=(0,a.useState)([]),[j,A]=(0,a.useState)(t&&i?`${Z.A.ShareUsersList.url({type:i,id:t})}`:s&&i?`${Z.A.ShareUsersList.url({type:i,id:s.id})}`:null);function v(){g(!0),J.A.request({url:j,method:Z.A.ShareUsersList.method}).then((e=>{const t=e.data;b([...h,...t.results]),g(!1),A(null!==t.next?t.next:null)})).catch((e=>{Q.V.error(ee.d,e)}))}return(0,a.useEffect)((()=>{u&&j&&v()}),[`${u}`]),(0,n.jsx)(te.A,Object.assign({title:(0,n.jsx)(W.A,{defaultMessage:"ui.feedObject.sharesDialog.title",id:"ui.feedObject.sharesDialog.title"}),onClose:c,open:l},d,{children:p?(0,n.jsx)(se.A,{size:50}):(0,n.jsx)(X.A,Object.assign({dataLength:h.length,next:v,hasMoreNext:null!==j,loaderNext:(0,n.jsx)(se.A,{size:30}),height:400,endMessage:(0,n.jsx)(r.A,Object.assign({variant:"body2",align:"center",fontWeight:"bold"},{children:(0,n.jsx)(W.A,{id:"ui.feedObject.sharesDialog.noOtherLikes",defaultMessage:"ui.feedObject.sharesDialog.noOtherLikes"})}))},{children:(0,n.jsx)(Y.A,{children:h.slice(0,4).map(((e,t)=>(0,n.jsx)(K.Ay,{children:(0,n.jsx)(oe.A,{elevation:0,user:e},t)},e.id)))})}))}))};var ae=s(44675),ie=s(90508),re=s(25911),le=s(57873),ce=s(82241),de=s(51372),ue=s(50236),me=s(19249),pe=s(18590),ge=s(40221),he=s(60921),be=s(45284),je=s(75753),Ae=s(3338),ve=s(2877),fe=s(44817),xe=s(89757),Oe=s(24971);const ye=(0,R.YK)({shares:{id:"ui.feedObject.share.shares",defaultMessage:"ui.feedObject.share.shares"},share:{id:"ui.feedObject.share.share",defaultMessage:"ui.feedObject.share.share"}}),Ce={root:`${k.H}-action-share-root`,divider:`${k.H}-action-share-divider`,inline:`${k.H}-action-share-inline`,button:`${k.H}-action-share-button`,viewAudienceButton:`${k.H}-action-share-view-audience-button`},Ee=(0,i.Ay)(d.A,{name:k.H,slot:"ActionShareRoot"})((()=>({})));const Ne=function(e){const{className:t=null,feedObjectId:s=null,feedObject:i=null,feedObjectType:r=V.Z.POST,withAction:c=!0,withAudience:u=!0,inlineAction:p=!1}=e,g=(0,o.__rest)(e,["className","feedObjectId","feedObject","feedObjectType","withAction","withAudience","inlineAction"]),b=(0,ae.A)(),j=(0,ie.A)(b.breakpoints.down("md")),{obj:A,setObj:v}=(0,$.A)({id:s,feedObject:i,feedObjectType:r}),[f,x]=(0,a.useState)(!1),[O,y]=(0,a.useState)(!1),[E,w]=(0,a.useState)(null),[T,k]=(0,a.useState)(!1),[S,_]=a.useState(null),M=(0,be.J_)(),R=(0,D.I$)(),L=(0,a.useContext)(je.ql),F=Ae.gS in L.preferences&&L.preferences[Ae.gS].value,U=Ae.FY in L.preferences&&L.preferences[Ae.FY].value,B=Ae.AF in L.preferences&&L.preferences[Ae.AF].value,G=(0,ve.X1)(),{enqueueSnackbar:z}=(0,pe.dh)(),Y=("undefined"!=typeof location&&location.origin?location.origin:"")+R.url((0,H.lg)(A),(0,H.kB)(A)),K=(0,a.useMemo)((()=>i.group&&i.group.privacy===ge.A.PUBLIC),[i.group]),X=(0,a.useMemo)((()=>!L.preferences[Ae.FP].value||fe.Xl(G.user)),[L,G.user]),te=(0,a.useMemo)((()=>L.preferences[Ae.g4].value),[L]),se=(0,P.A)(),oe=e=>{_(e.currentTarget)},Ne=()=>{_(null)};function we(){k(!T)}function Te(){x(!1),y(!1)}function ke(){v(Object.assign({},A,{share_count:A.share_count+1})),Te()}const Se=(0,a.useMemo)((()=>()=>{let e=A.id;const t=A.medias.filter((e=>e.type===me.cJ));t.length&&(e=t[0].embed.metadata.id);const s=A.medias.some((e=>{var t;return(null===(t=e.embed)||void 0===t?void 0:t.embed_type)===me.TY}));return J.A.request({url:Z.A.ComposerMediaCreate.url(),method:Z.A.ComposerMediaCreate.method,data:{type:me.cJ,[s?"event_object":"shared_object"]:e}}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))}),[A]);function _e(){return(0,n.jsxs)(d.A,{children:[(!i.group||K)&&(0,n.jsxs)(n.Fragment,{children:[X&&(0,n.jsxs)(re.A,Object.assign({onClick:()=>{return e=!1,void(G.user?fe.lT(G.user)?z((0,n.jsx)(W.A,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3}):(x(!0),Se().then((t=>{w(Object.assign({medias:[t]},e?{categories:A.categories}:{})),y(!0)})).catch((e=>{Q.V.error(ee.d,e),x(!1)}))):M.settings.handleAnonymousAction());var e}},{children:[(0,n.jsx)(le.A,{children:(0,n.jsx)(m.A,{children:"redo"})}),(0,n.jsx)(ce.A,{primary:(0,n.jsx)(W.A,{id:"ui.feedObject.share.shareNow",defaultMessage:"ui.feedObject.share.shareNow"})})]})),(0,n.jsx)(n.Fragment,{children:te&&(0,n.jsxs)(n.Fragment,{children:[F&&(0,n.jsxs)(re.A,Object.assign({onClick:()=>window.open(xe.$L+Y,"facebook-share-dialog","width=626,height=436")},{children:[(0,n.jsx)(le.A,{children:(0,n.jsx)(m.A,{children:"facebook"})}),(0,n.jsx)(ce.A,{primary:(0,n.jsx)(W.A,{id:"ui.feedObject.share.facebook",defaultMessage:"ui.feedObject.share.facebook"})})]})),U&&(0,n.jsxs)(re.A,Object.assign({onClick:()=>window.open(xe.vM+Y,"x-share-dialog","width=626,height=436")},{children:[(0,n.jsx)(le.A,{children:(0,n.jsx)(m.A,{children:"twitter"})}),(0,n.jsx)(ce.A,{primary:(0,n.jsx)(W.A,{id:"ui.feedObject.share.x",defaultMessage:"ui.feedObject.share.x"})})]})),B&&(0,n.jsxs)(re.A,Object.assign({onClick:()=>window.open(xe.HW+Y,"linkedin-share-dialog","width=626,height=436")},{children:[(0,n.jsx)(le.A,{children:(0,n.jsx)(m.A,{children:"linkedin"})}),(0,n.jsx)(ce.A,{primary:(0,n.jsx)(W.A,{id:"ui.feedObject.share.linkedin",defaultMessage:"ui.feedObject.share.linkedin"})})]}))]})})]}),(0,n.jsxs)(re.A,{children:[(0,n.jsx)(le.A,{children:(0,n.jsx)(m.A,{children:"link"})}),(0,n.jsx)(ce.A,{primary:(0,n.jsx)(W.A,{id:"ui.feedObject.share.permanentLink",defaultMessage:"ui.feedObject.share.permanentLink"}),onClick:()=>{(0,he.eM)(Y).then((()=>{z((0,n.jsx)(W.A,{id:"ui.common.permanentLinkCopied",defaultMessage:"ui.common.permanentLinkCopied"}),{variant:"success",autoHideDuration:3e3})}))}})]})]})}return(0,n.jsxs)(Ee,Object.assign({className:N()(Ce.root,t,{[Ce.inline]:p})},g,{children:[function(){const e=A.share_count;let t;return u&&(t=A?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.A,Object.assign({variant:"text",size:"small",onClick:we,disabled:e<1,classes:{root:Ce.viewAudienceButton}},{children:`${se.formatMessage(ye.shares,{total:e})}`})),T&&e>0&&(0,n.jsx)(ne,{feedObject:A,feedObjectType:A.type,open:T,onClose:we})]}):(0,n.jsx)(l.A,Object.assign({variant:"text",size:"small",disabled:!0,color:"inherit"},{children:(0,n.jsx)(I.A,{animation:"wave",height:18,width:50})}))),t}(),(0,n.jsx)(a.Fragment,{children:c&&(0,n.jsxs)(a.Fragment,{children:[!p&&u&&(0,n.jsx)(C.A,{className:Ce.divider}),(0,n.jsx)(h.A,Object.assign({title:`${se.formatMessage(ye.share)}`},{children:(0,n.jsx)(q.A,Object.assign({loading:f,onClick:oe,className:Ce.button},{children:(0,n.jsx)(m.A,{children:"share"})}))})),Boolean(S)&&(0,n.jsx)(n.Fragment,{children:j?(0,n.jsx)(ue.A,Object.assign({open:!0,onClick:Ne,onClose:Ne,onOpen:oe,anchor:"bottom",disableSwipeToOpen:!0},{children:_e()})):(0,n.jsx)(de.A,Object.assign({anchorEl:S,open:!0,onClose:Ne,onClick:Ne,slotProps:{paper:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"}},{children:_e()}))}),O&&(0,n.jsx)(Oe.A,{open:!0,defaultValue:E,onClose:Te,onSuccess:ke,maxWidth:"sm",fullWidth:!0})]})})]}))},we={root:`${k.H}-actions-root`,action:`${k.H}-actions-action`},Te=(0,i.Ay)(y.Ay,{name:k.H,slot:"ActionsRoot"})((()=>({})));const ke=function(e){const{className:t,feedObject:s,feedObjectId:o=(null==s?void 0:s.id),feedObjectType:a=(null==s?void 0:s.type),feedObjectTemplate:i=F.a.PREVIEW,hideVoteAction:r=!1,hideShareAction:l=!1,hideCommentAction:c=!1,handleExpandActivities:d,VoteActionProps:u={},CommentActionProps:m={},ShareActionProps:p={}}=e,{obj:g}=(0,$.A)({id:o,feedObject:s,feedObjectType:a});if(!g)return null;const h=function(){let e=4;return l&&c?e=12:(c||c)&&(e=6),e}();return(0,n.jsxs)(Te,Object.assign({container:!0,className:N()(we.root,t)},{children:[!r&&(0,n.jsx)(y.Ay,Object.assign({item:!0,xs:h,className:we.action},{children:(0,n.jsx)(M,Object.assign({feedObjectId:o||g.id,feedObject:g,feedObjectType:a||g.type},u))})),!c&&(0,n.jsx)(y.Ay,Object.assign({item:!0,xs:h,className:we.action},{children:(0,n.jsx)(z,Object.assign({feedObject:g,feedObjectType:a,feedObjectTemplate:i,onCommentAction:d},m))})),!l&&(0,n.jsx)(y.Ay,Object.assign({item:!0,xs:h,className:we.action},{children:(0,n.jsx)(Ne,Object.assign({feedObject:g,feedObjectType:a,id:o},p))}))]}))};var Se=s(57156),_e=s(33623);const Me={root:`${k.H}-poll-object-choices-root`,label:`${k.H}-poll-object-choices-label`,vote:`${k.H}-poll-object-choices-vote`,progress:`${k.H}-poll-object-choices-progress`},Re=(0,i.Ay)(Se.A,{name:k.H,slot:"PollObjectChoicesRoot"})((()=>({})));function Pe(e){var{className:t}=e,s=(0,o.__rest)(e,["className"]);return(0,n.jsxs)(d.A,Object.assign({className:t},{children:[(0,n.jsx)(_e.A,Object.assign({variant:"determinate"},s)),(0,n.jsx)(r.A,Object.assign({variant:"body2",color:"text.secondary"},{children:`${Math.round(s.value)}%`}))]}))}const Ie=function(e){const{className:t=null,choiceObj:s=null,feedObject:a=null,vote:i=null,votes:l=null,isVoting:c=null,votable:d=null}=e,u=(0,o.__rest)(e,["className","choiceObj","feedObject","vote","votes","isVoting","votable"]),p=!a,g=(0,be.J_)(),h=(0,ve.X1)();return(0,n.jsxs)(Re,Object.assign({className:N()(Me.root,t)},u,{children:[(0,n.jsx)(r.A,Object.assign({className:Me.label},{children:s.choice})),(0,n.jsx)(Pe,{className:Me.progress,value:(b=s.vote_count,j=l,0===j?0:100*b/j)}),(0,n.jsx)(q.A,Object.assign({loading:c===s.id,variant:s.voted?"contained":"outlined",size:"small",disabled:p||null!==c||d||a.draft,className:Me.vote,onClick:()=>{h.user?i(s):g.settings.handleAnonymousAction()}},{children:s.voted?(0,n.jsx)(m.A,{children:"check"}):(0,n.jsx)(W.A,{id:"ui.feedObject.poll.choice.vote",defaultMessage:"ui.feedObject.poll.choice.vote"})}))]}));var b,j},$e=(0,R.YK)({showPoll:{id:"ui.feedObject.poll.showPoll",defaultMessage:"ui.feedObject.poll.showPoll"},hidePoll:{id:"ui.feedObject.poll.hidePoll",defaultMessage:"ui.feedObject.poll.hidePoll"},expDate:{id:"ui.feedObject.poll.expDate",defaultMessage:"ui.feedObject.poll.expDate"},voters:{id:"ui.feedObject.poll.voters",defaultMessage:"ui.feedObject.poll.voters"},votes:{id:"ui.feedObject.poll.votes",defaultMessage:"ui.feedObject.poll.votes"}}),De={root:`${k.H}-poll-object-root`,voters:`${k.H}-poll-object-voters`,votes:`${k.H}-poll-object-votes`,toggleButton:`${k.H}-poll-object-toggle-button`,title:`${k.H}-poll-object-title`,expiration:`${k.H}-poll-object-expiration`,closed:`${k.H}-poll-object-closed`,expandIcon:`${k.H}-poll-object-expand-icon`,collapsedIcon:`${k.H}-poll-object-collapsed-icon`},Le=(0,i.Ay)(Se.A,{name:k.H,slot:"PollObjectRoot"})((()=>({})));const Ve=function(e){const{className:t,feedObject:s,pollObject:i,disabled:d,visible:u=!0,onChange:g,onToggleVisibility:h}=e,b=(0,o.__rest)(e,["className","feedObject","pollObject","disabled","visible","onChange","onToggleVisibility"]),j=(0,P.A)(),[v,f]=(0,a.useState)(i),[x,O]=(0,a.useState)(function(){const e=i.choices;let t=0;for(let s=0;s<e.length;s++)t+=e[s].vote_count;return t||0}()),[y,C]=(0,a.useState)(i.choices),[E,w]=(0,a.useState)(null),[T,k]=(0,a.useState)(!u),S=i.multiple_choices,_=i.closed;function M(e){w(e.id),J.A.request({url:Z.A.PollVote.url({id:s.id,type:s.type}),method:Z.A.PollVote.method,data:{choice:e.id}}).then((t=>{e.voted?(e=>{const t=[...y].map((t=>Object.assign({},t,{voted:t.id!==e&&t.voted,vote_count:t.id===e&&t.vote_count>0?t.vote_count-1:t.vote_count})));C(t),g(t),O((e=>e-1))})(e.id):(e=>{const t=[...y];let s;S?(s=t.map((t=>Object.assign({},t,{voted:t.id===e||t.voted,vote_count:t.id===e?t.vote_count+1:t.vote_count}))),O((e=>e+1))):(s=t.map((t=>Object.assign({},t,{voted:t.id===e,vote_count:t.id===e?t.vote_count+1:t.vote_count>0&&t.voted?t.vote_count-1:t.vote_count}))),O(s.reduce(((e,t)=>e+t.vote_count),0))),C(s),g(s)})(e.id),w(null)})).catch((e=>{Q.V.error(ee.d,e)}))}const R=(0,a.useMemo)((()=>()=>{h&&h(T),k((e=>!e))}),[k,h]);let I=(0,n.jsx)(n.Fragment,{});return i&&(I=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.A,{title:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(l.A,Object.assign({className:De.toggleButton,onClick:R,"aria-expanded":T,endIcon:(0,n.jsx)(m.A,Object.assign({className:N()(De.expandIcon,{[De.collapsedIcon]:T})},{children:"arrow_upward"}))},{children:T?j.formatMessage($e.showPoll):j.formatMessage($e.hidePoll)}))})}),(0,n.jsx)(A.A,Object.assign({in:!T,timeout:"auto",unmountOnExit:!0},{children:(0,n.jsxs)(c.A,{children:[(0,n.jsx)(r.A,Object.assign({variant:"body1",className:De.title},{children:v.title})),v.expiration_at&&Date.parse(v.expiration_at)>=(new Date).getTime()&&(0,n.jsxs)(r.A,Object.assign({variant:"body2",className:De.expiration},{children:[`${j.formatMessage($e.expDate)}`,`${j.formatDate(Date.parse(v.expiration_at),{year:"numeric",month:"numeric",day:"numeric"})}`]})),v.closed&&(0,n.jsx)(r.A,Object.assign({variant:"body2",className:De.closed},{children:(0,n.jsx)(W.A,{id:"ui.feedObject.poll.closed",defaultMessage:"ui.feedObject.poll.closed"})})),(0,n.jsx)(Y.A,{children:y.map(((e,t)=>(0,n.jsx)(K.Ay,{children:(0,n.jsx)(Ie,{elevation:0,choiceObj:e,feedObject:d?null:s,votes:x,vote:M,isVoting:E,votable:_})},t)))}),!s.draft&&(0,n.jsx)(n.Fragment,{children:S?(0,n.jsxs)("div",Object.assign({className:De.votes},{children:[(0,n.jsx)(m.A,{children:"list"}),(0,n.jsx)(r.A,{children:`${j.formatMessage($e.votes,{total:x})}`})]})):(0,n.jsxs)("div",Object.assign({className:De.voters},{children:[(0,n.jsx)(m.A,{children:"people_alt"}),(0,n.jsx)(r.A,{children:`${j.formatMessage($e.voters,{total:x})}`})]}))})]})}))]})),(0,a.useEffect)((()=>{C(i.choices)}),[i.choices]),(0,n.jsx)(Le,Object.assign({className:N()(De.root,t)},b,{children:I}))};var Fe=s(28692),He=s(42269),Ue=s(86354),Be=s(39840);const Ge={LOADING_NEXT:"_loading_next",LOADING_PREVIOUS:"_loading_previous",DATA_NEXT_LOADED:"_data_next_loaded",DATA_PREVIOUS_LOADED:"_data_previous_loaded",DATA_RELOAD:"_data_reload",DATA_RELOADED:"_data_reloaded"};function ze(e,t){switch(t.type){case Ge.LOADING_NEXT:return Object.assign(Object.assign({},e),{isLoadingNext:!0,isLoadingPrevious:!1});case Ge.LOADING_PREVIOUS:return Object.assign(Object.assign({},e),{isLoadingNext:!1,isLoadingPrevious:!0});case Ge.DATA_NEXT_LOADED:return Object.assign(Object.assign(Object.assign(Object.assign({},e),{page:t.payload.currentPage,contributors:t.payload.contributors,isLoadingNext:!1,componentLoaded:!0,next:t.payload.next}),t.payload.previous?{previous:t.payload.previous}:{}),t.payload.total?{total:t.payload.total}:{});case Ge.DATA_PREVIOUS_LOADED:return Object.assign(Object.assign({},e),{page:t.payload.currentPage,contributors:t.payload.contributors,isLoadingPrevious:!1,previous:t.payload.previous});case Ge.DATA_RELOAD:return Object.assign(Object.assign({},e),{next:t.payload.next,contributors:[],total:0,previous:null,reload:!0});case Ge.DATA_RELOADED:return Object.assign(Object.assign({},e),{componentLoaded:!1,reload:!1});default:throw new Error(`Unhandled type: ${t.type}`)}}function We(e){const{id:t,feedObject:s,feedObjectType:o,offset:n=0,pageSize:i=5,onChangePage:r,cacheStrategy:l=Fe.So.CACHE_FIRST}=e,c=(0,Be.A)(),{obj:d,setObj:u}=(0,$.A)({id:t,feedObject:s,feedObjectType:o}),m=d?d.id:null,p=()=>{const e=n?`&offset=${n}`:"",s=d?d.id:t,a=d?d.type:o;return`${Z.A.FeedObjectContributorsList.url({type:a,id:s})}?limit=${i}${e}`},[g,h]=(0,a.useReducer)(ze,{},(()=>function(e){const t=e.obj?(0,Ue.OQ)(e.obj.id,e.obj.type,e.next):null;let s={componentLoaded:!1,contributors:[],total:0,next:e.next,previous:null,isLoadingNext:!1,isLoadingPrevious:!1,page:e.offset/e.pageSize+1,reload:!1};if(t&&Fe.Ay.hasKey(t)&&e.cacheStrategy!==Fe.So.NETWORK_ONLY){const e=Fe.Ay.get(t);return Object.assign(Object.assign({},s),{total:e.count,next:e.next,previous:e.previous,contributors:e.results})}return s}({obj:d,offset:n,pageSize:i,next:p(),cacheStrategy:l}))),b=e=>{const t=new URLSearchParams(e),s=Object.fromEntries(t.entries());return(s.offset?parseInt(s.offset):0)/i+1},j=(e,t)=>A(e,!1).then((e=>{let s,o=b(g.next);if(t){s=g.contributors.slice(0,g.contributors.length-e.results.length).concat(e.results)}else{let t=g.contributors.slice(e.results.length,g.contributors.length);s=e.results.concat(t)}c.current&&h({type:t?Ge.DATA_NEXT_LOADED:Ge.DATA_PREVIOUS_LOADED,payload:Object.assign(Object.assign({page:o,contributors:s},t?{next:e.next}:{previous:e.previous}),{total:e.count})})})),A=(e,t=!0)=>{const s=(0,Ue.OQ)(d.id,d.type,e);return t&&Fe.Ay.hasKey(s)&&l!==Fe.So.NETWORK_ONLY?Promise.resolve(Fe.Ay.get(s)):J.A.request({url:e,method:Z.A.Comments.method}).then((e=>e.status>=300?Promise.reject(e):(Fe.Ay.set(s,e.data),Promise.resolve(e.data))))};function v(){d&&g.next&&!g.isLoadingNext&&(h({type:Ge.LOADING_NEXT}),A(g.next).then((e=>{if(c.current){let t=b(g.next);h({type:Ge.DATA_NEXT_LOADED,payload:Object.assign({page:t,contributors:[...g.contributors,...e.results],next:e.next,total:e.count,componentLoaded:!0},n&&0===g.contributors.length?{previous:e.previous}:{})}),r&&r(t)}})).catch((e=>{Q.V.error(He.K,e)})).then((()=>{c.current&&l===Fe.So.STALE_WHILE_REVALIDATE&&j(g.next,!0)})))}return(0,a.useEffect)((()=>{c.current&&g.componentLoaded&&Boolean(d)&&!g.reload&&h({type:Ge.DATA_RELOAD,payload:{next:p()}})}),[m,i,n,c]),(0,a.useEffect)((()=>{c.current&&g.componentLoaded&&g.reload&&!g.isLoadingNext&&!g.isLoadingPrevious&&(h({type:Ge.DATA_RELOADED}),v())}),[g.reload,c]),Object.assign(Object.assign({feedObject:d,setFeedObject:u},g),{pageSize:i,getNextPage:v,getPreviousPage:function(){d&&g.previous&&!g.isLoadingPrevious&&(h({type:Ge.LOADING_PREVIOUS}),A(g.previous).then((e=>{if(c.current){let t=b(g.previous);h({type:Ge.DATA_PREVIOUS_LOADED,payload:{page:t,contributors:[...e.results,...g.contributors],previous:e.previous}}),r&&r(t)}})).catch((e=>{Q.V.error(He.K,e)})).then((()=>{l===Fe.So.STALE_WHILE_REVALIDATE&&j(g.next,!1)})))}})}var qe=s(25441),Ye=s(43029);const Ke={root:`${k.H}-contributors-skeleton-root`,btnParticipants:`${k.H}-btn-participants`},Xe=(0,i.Ay)(d.A,{name:k.H,slot:"ContributorsSkeletonRoot"})((()=>({})));function Ze(e){const{className:t=null,AvatarGroupSkeletonProps:s={}}=e,a=(0,o.__rest)(e,["className","AvatarGroupSkeletonProps"]);return(0,n.jsx)(Xe,Object.assign({className:N()(Ke.root,t)},a,{children:(0,n.jsxs)(l.A,Object.assign({variant:"text",disabled:!0,classes:{root:Ke.btnParticipants}},{children:[(0,n.jsx)(W.A,{id:"ui.feedObject.contributors.participants",defaultMessage:"ui.feedObject.contributors.participants"}),":",(0,n.jsx)(Ye.A,Object.assign({},e.AvatarGroupSkeletonProps))]}))}))}const Je={root:`${k.H}-contributors-root`,avatarGroup:`${k.H}-contributors-avatarGroup`,btnParticipants:`${k.H}-contributors-btn-participants`},Qe=(0,i.Ay)(d.A,{name:k.H,slot:"ContributorsRoot"})((()=>({})));const et=function(e){const{className:t=null,feedObjectId:s=null,feedObject:i=null,feedObjectType:c=null,ContributorsSkeletonProps:u={},cacheStrategy:m=Fe.So.CACHE_FIRST}=e,p=(0,o.__rest)(e,["className","feedObjectId","feedObject","feedObjectType","ContributorsSkeletonProps","cacheStrategy"]),h=We({id:s,feedObject:i,feedObjectType:c,pageSize:10,cacheStrategy:m}),[b,j]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{h.feedObject&&h.getNextPage()}),[h.feedObject]),h.feedObject?(0,n.jsx)(Qe,Object.assign({className:N()(Je.root,t)},p,{children:(0,n.jsx)(d.A,{children:h.isLoadingNext&&!b?(0,n.jsx)(Ze,Object.assign({},u)):(0,n.jsx)(n.Fragment,{children:h.contributors.length>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.A,Object.assign({variant:"text",onClick:()=>j(!0),classes:{root:Je.btnParticipants},color:"inherit"},{children:[(0,n.jsx)(W.A,{id:"ui.feedObject.contributors.participants",defaultMessage:"ui.feedObject.contributors.participants"}),":",(0,n.jsxs)(qe.A,Object.assign({},p,{children:[h.contributors.map(((e,t)=>(0,n.jsx)(g.A,{alt:e.username,src:e.avatar},t))),[...Array(Math.max(h.total-h.contributors.length,0))].map(((e,t)=>(0,n.jsx)(g.A,{},t)))]}))]})),b&&(0,n.jsx)(te.A,Object.assign({title:(0,n.jsx)(W.A,{defaultMessage:"ui.feedObject.contributors.title",id:"ui.feedObject.contributors.title",values:{total:h.total}}),onClose:()=>j(!1),open:b},{children:h.isLoadingNext?(0,n.jsx)(se.A,{size:50}):(0,n.jsx)(X.A,Object.assign({dataLength:h.contributors.length,next:h.getNextPage(),hasMoreNext:Boolean(h.next),loaderNext:(0,n.jsx)(se.A,{size:30}),height:400,endMessage:(0,n.jsx)(r.A,Object.assign({variant:"body2",align:"center",fontWeight:"bold"},{children:(0,n.jsx)(W.A,{id:"ui.feedObject.contributors.noOtherContributors",defaultMessage:"ui.feedObject.contributors.noOtherContributors"})}))},{children:(0,n.jsx)(Y.A,{children:h.contributors.map(((e,t)=>(0,n.jsx)(K.Ay,{children:(0,n.jsx)(oe.A,{elevation:0,user:e,sx:{m:0},onClick:()=>j(!1)},e.id)},t)))})}))}))]}):null})})})):null};var tt=s(2783),st=s(18895),ot=s(37978);const nt={root:`${k.H}-action-follow-root`,button:`${k.H}-action-follow-button`,iconized:`${k.H}-action-follow-iconized`,followed:`${k.H}-action-follow-followed`},at=(0,i.Ay)(d.A,{name:k.H,slot:"ActionFollowRoot"})((()=>({})));const it=function(e){const{className:t=null,feedObjectId:s=null,feedObject:i=null,feedObjectType:r=V.Z.POST,handleFollow:l,iconized:c=!0}=e,d=(0,o.__rest)(e,["className","feedObjectId","feedObject","feedObjectType","handleFollow","iconized"]),{obj:u,setObj:p}=(0,$.A)({id:s,feedObject:i,feedObjectType:r}),[g,b]=(0,a.useState)(!1),j=(0,be.J_)(),A=(0,ve.X1)(),{enqueueSnackbar:v}=(0,pe.dh)(),f=(0,a.useMemo)((()=>()=>J.A.request({url:Z.A.FollowContribution.url({type:u.type,id:u.id}),method:Z.A.FollowContribution.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[u]);function x(){A.user?(b(!0),f().then((e=>{const t=!u.followed;p(Object.assign({},u,{followed:t})),b(!1),l&&l(t)})).catch((e=>{Q.V.error(ee.d,e),(0,ot.c)(e,A.managers.blockedUsers.isBlocked(u.author),v)||v((0,n.jsx)(W.A,{id:"ui.common.error.action",defaultMessage:"ui.common.error.action"}),{variant:"error",autoHideDuration:3e3}),b(!1)}))):j.settings.handleAnonymousAction()}return(0,n.jsx)(at,Object.assign({className:N()(nt.root,t)},d,{children:function(){let e=(0,n.jsx)(W.A,{id:"ui.feedObject.follow",defaultMessage:"ui.feedObject.follow"});return u.followed&&(e=(0,n.jsx)(W.A,{id:"ui.feedObject.unfollow",defaultMessage:"ui.feedObject.unfollow"})),(0,n.jsx)(a.Fragment,{children:A.user&&u.author.id!==A.user.id&&!u.deleted&&(0,n.jsx)(h.A,Object.assign({title:e},{children:(0,n.jsx)(q.A,Object.assign({className:N()(nt.button,{[nt.iconized]:c,[nt.followed]:u.followed}),loading:g,variant:c?"text":"contained",disabled:g,onClick:x},{children:c?(0,n.jsx)(m.A,{children:u.followed?"bookmark_added":"bookmark_border"}):e}))}))})}()}))};var rt=s(86857),lt=s(79197),ct=s(52959),dt=s(56323),ut=s(58871),mt=s(37211);const pt=(0,R.YK)({relevantActivities:{id:"ui.feedObject.activitiesMenu.relevantActivities",defaultMessage:"ui.feedObject.activitiesMenu.relevantActivities"},recentComments:{id:"ui.feedObject.activitiesMenu.recentComments",defaultMessage:"ui.feedObject.activitiesMenu.recentComments"},firstComments:{id:"ui.feedObject.activitiesMenu.firstComments",defaultMessage:"ui.feedObject.activitiesMenu.firstComments"},followedComments:{id:"ui.feedObject.activitiesMenu.followedComments",defaultMessage:"ui.feedObject.activitiesMenu.followedComments"},connectionsComments:{id:"ui.feedObject.activitiesMenu.connectionsComments",defaultMessage:"ui.feedObject.activitiesMenu.connectionsComments"}}),gt={root:`${k.H}-activities-menu-root`,selector:`${k.H}-activities-menu-selector`},ht=(0,i.Ay)(d.A,{name:k.H,slot:"ActivitiesMenuRoot"})((()=>({})));const bt=function(e){const{className:t=null,selectedActivities:s=null,hideRelevantActivitiesItem:i=!1,onChange:r=null}=e,c=(0,o.__rest)(e,["className","selectedActivities","hideRelevantActivitiesItem","onChange"]),u=(0,a.useContext)(je.ql),p=(0,ve.X1)(),g=(0,ae.A)(),b=(0,ie.A)(g.breakpoints.down("md")),j=u.preferences[Ae.mw].value,A=u.preferences[Ae.HT].value,[v,f]=a.useState(null),x=Boolean(v),O=(0,P.A)(),y=e=>{f(e.currentTarget)},C=()=>{f(null)},E=e=>()=>{r&&r(e)};function w(){return(0,n.jsxs)(d.A,{children:[!i&&(0,n.jsx)(mt.A,Object.assign({selected:s===F.x.RELEVANCE_ACTIVITIES,onClick:E(F.x.RELEVANCE_ACTIVITIES)},{children:(0,n.jsx)(ce.A,{primary:(0,n.jsx)("b",{children:O.formatMessage(pt.relevantActivities)}),secondary:(0,n.jsx)(W.A,{id:"ui.feedObject.activitiesMenu.relevantActivitiesDesc",defaultMessage:"ui.feedObject.activitiesMenu.relevantActivitiesDesc"})})})),(0,n.jsx)(mt.A,Object.assign({selected:s===F.x.RECENT_COMMENTS,onClick:E(F.x.RECENT_COMMENTS)},{children:(0,n.jsx)(ce.A,{primary:(0,n.jsx)("b",{children:O.formatMessage(pt.recentComments)}),secondary:(0,n.jsx)(W.A,{id:"ui.feedObject.activitiesMenu.recentCommentsDesc",defaultMessage:"ui.feedObject.activitiesMenu.recentCommentsDesc"})})})),(0,n.jsx)(mt.A,Object.assign({selected:s===F.x.FIRST_COMMENTS,onClick:E(F.x.FIRST_COMMENTS)},{children:(0,n.jsx)(ce.A,{primary:(0,n.jsx)("b",{children:O.formatMessage(pt.firstComments)}),secondary:(0,n.jsx)(W.A,{id:"ui.feedObject.activitiesMenu.firstCommentsDesc",defaultMessage:"ui.feedObject.activitiesMenu.firstCommentsDesc"})})})),p.user&&(0,n.jsx)(mt.A,Object.assign({selected:s===F.x.CONNECTIONS_COMMENTS,onClick:E(F.x.CONNECTIONS_COMMENTS)},{children:(j||A)&&(0,n.jsx)(ce.A,{primary:(0,n.jsx)("b",{children:j?O.formatMessage(pt.followedComments):O.formatMessage(pt.connectionsComments)}),secondary:j?(0,n.jsx)(W.A,{id:"ui.feedObject.activitiesMenu.followedCommentsDesc",defaultMessage:"ui.feedObject.activitiesMenu.followedCommentsDesc"}):(0,n.jsx)(W.A,{id:"ui.feedObject.activitiesMenu.connectionsCommentsDesc",defaultMessage:"ui.feedObject.activitiesMenu.connectionsCommentsDesc"})})}))]})}return(0,n.jsxs)(ht,Object.assign({className:N()(gt.root,t)},c,{children:[(0,n.jsx)(d.A,Object.assign({className:gt.selector},{children:(0,n.jsx)(h.A,Object.assign({title:(0,n.jsx)(W.A,{id:"ui.feedObject.activitiesMenu.tooltipTitle",defaultMessage:"ui.feedObject.activitiesMenu.tooltipTitle"})},{children:(0,n.jsxs)(l.A,Object.assign({variant:"text",size:"small",onClick:y},{children:[s===F.x.CONNECTIONS_COMMENTS&&j?O.formatMessage(pt.followedComments):O.formatMessage(pt[`${(0,he.xQ)(s)}`]),"\xa0 ",(0,n.jsx)(m.A,{children:"expand_more"})]}))}))})),x&&(0,n.jsx)(n.Fragment,{children:b?(0,n.jsx)(ue.A,Object.assign({open:!0,onClose:C,onOpen:y,anchor:"bottom",disableSwipeToOpen:!0},{children:w()})):(0,n.jsx)(de.A,Object.assign({anchorEl:v,open:!0,onClose:C,onClick:C,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"}},{children:w()}))})]}))};var jt=s(97100),At=s(88352),vt=s(91765);const ft=(0,R.YK)({comment:{id:"ui.feedObject.relevantActivities.comment",defaultMessage:"ui.feedObject.relevantActivities.comment"}}),xt={root:`${k.H}-activity-comment-root`,avatar:`${k.H}-activity-comment-avatar`,username:`${k.H}-activity-comment-username`,showMoreContent:`${k.H}-activity-comment-show-more-content`},Ot=(0,i.Ay)(ct.A,{name:k.H,slot:"ActivityCommentRoot"})((()=>({})));const yt=function(e){const{className:t=null,activityObject:s=null}=e,i=(0,o.__rest)(e,["className","activityObject"]),r=(0,D.I$)(),[l,c]=(0,a.useState)(!1),d=(0,P.A)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Ot,Object.assign({},i,{className:N()(xt.root,t),image:(0,n.jsx)(L.A,Object.assign({},!s.author.deleted&&{to:r.url(At.USER_PROFILE_ROUTE_NAME,s.author)},{onClick:s.author.deleted?()=>c(!0):null},{children:(0,n.jsx)(g.A,{alt:s.author.username,variant:"circular",src:s.author.avatar,className:xt.avatar})})),primary:(0,n.jsx)(n.Fragment,{children:d.formatMessage(ft.comment,{username:(0,n.jsx)(L.A,Object.assign({},!s.author.deleted&&{to:r.url(At.USER_PROFILE_ROUTE_NAME,s.author)},{onClick:s.author.deleted?()=>c(!0):null,className:xt.username},{children:s.author.username})),link:(...e)=>(0,n.jsx)(L.A,Object.assign({to:r.url(At.COMMENT_ROUTE_NAME,(0,H.kB)(s.comment))},{children:e}))})}),secondary:(0,n.jsx)(f.A,{date:s.active_at})})),l&&(0,n.jsx)(vt.A,{open:l,handleClose:()=>c(!1)})]})},Ct=(0,R.YK)({vote:{id:"ui.feedObject.relevantActivities.vote",defaultMessage:"ui.feedObject.relevantActivities.vote"}}),Et={root:`${k.H}-activity-vote-up-root`,avatar:`${k.H}-activity-vote-up-avatar`,username:`${k.H}-activity-vote-up-username`},Nt=(0,i.Ay)(ct.A,{name:k.H,slot:"ActivityVoteUpRoot"})((()=>({})));const wt=function(e){const{className:t=null,activityObject:s=null}=e,i=(0,o.__rest)(e,["className","activityObject"]),r=(0,D.I$)(),[l,c]=(0,a.useState)(!1),d=(0,P.A)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Nt,Object.assign({},i,{className:N()(Et.root,t),image:(0,n.jsx)(L.A,Object.assign({},!s.author.deleted&&{to:r.url(At.USER_PROFILE_ROUTE_NAME,s.author)},{onClick:s.author.deleted?()=>c(!0):null},{children:(0,n.jsx)(g.A,{alt:s.author.username,variant:"circular",src:s.author.avatar,className:Et.avatar})})),primary:(0,n.jsx)(n.Fragment,{children:d.formatMessage(Ct.vote,{username:(0,n.jsx)(L.A,Object.assign({},!s.author.deleted&&{to:r.url(At.USER_PROFILE_ROUTE_NAME,s.author)},{className:Et.username,onClick:s.author.deleted?()=>c(!0):null},{children:s.author.username}))})}),secondary:(0,n.jsx)(f.A,{date:s.active_at})})),l&&(0,n.jsx)(vt.A,{open:l,handleClose:()=>c(!1)})]})},Tt=(0,R.YK)({follow:{id:"ui.feedObject.relevantActivities.follow",defaultMessage:"ui.feedObject.relevantActivities.follow"}}),kt={root:`${k.H}-activity-follow-root`,avatar:`${k.H}-activity-follow-avatar`,username:`${k.H}-activity-follow-username`},St=(0,i.Ay)(ct.A,{name:k.H,slot:"ActivityFollowRoot"})((()=>({})));const _t=function(e){const t=(0,lt.A)({props:e,name:k.H}),{className:s=null,activityObject:i=null}=t,r=(0,o.__rest)(t,["className","activityObject"]),l=(0,D.I$)(),[c,d]=(0,a.useState)(!1),u=(0,P.A)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(St,Object.assign({},r,{className:N()(kt.root,s),image:(0,n.jsx)(L.A,Object.assign({},!i.author.deleted&&{to:l.url(At.USER_PROFILE_ROUTE_NAME,i.author)},{onClick:i.author.deleted?()=>d(!0):null},{children:(0,n.jsx)(g.A,{alt:i.author.username,variant:"circular",src:i.author.avatar,className:kt.avatar})})),primary:(0,n.jsx)(n.Fragment,{children:u.formatMessage(Tt.follow,{username:(0,n.jsx)(L.A,Object.assign({},!i.author.deleted&&{to:l.url(At.USER_PROFILE_ROUTE_NAME,i.author)},{onClick:i.author.deleted?()=>d(!0):null,className:kt.username},{children:i.author.username}))})}),secondary:(0,n.jsx)(f.A,{date:i.active_at})})),c&&(0,n.jsx)(vt.A,{open:c,handleClose:()=>d(!1)})]})},Mt=(0,R.YK)({pollVote:{id:"ui.feedObject.relevantActivities.pollVote",defaultMessage:"ui.feedObject.relevantActivities.pollVote"}}),Rt={root:`${k.H}-activity-poll-vote-root`,avatar:`${k.H}-activity-poll-vote-avatar`,username:`${k.H}-activity-poll-vote-username`},Pt=(0,i.Ay)(ct.A,{name:k.H,slot:"ActivityPollVoteRoot"})((()=>({})));const It=function(e){const{className:t=null,activityObject:s=null}=e,i=(0,o.__rest)(e,["className","activityObject"]),r=(0,D.I$)(),[l,c]=(0,a.useState)(!1),d=(0,P.A)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Pt,Object.assign({},i,{className:N()(Rt.root,t),image:(0,n.jsx)(L.A,Object.assign({},!s.author.deleted&&{to:r.url(At.USER_PROFILE_ROUTE_NAME,s.author)},{onClick:s.author.deleted?()=>c(!0):null},{children:(0,n.jsx)(g.A,{alt:s.author.username,variant:"circular",src:s.author.avatar,className:Rt.avatar})})),primary:(0,n.jsx)(n.Fragment,{children:d.formatMessage(Mt.pollVote,{username:(0,n.jsx)(L.A,Object.assign({},!s.author.deleted&&{to:r.url(At.USER_PROFILE_ROUTE_NAME,s.author)},{onClick:s.author.deleted?()=>c(!0):null,className:Rt.username},{children:s.author.username}))})}),secondary:(0,n.jsx)(f.A,{date:s.active_at})})),l&&(0,n.jsx)(vt.A,{open:l,handleClose:()=>c(!1)})]})},$t={root:`${k.H}-relevant-activities-root`,activity:`${k.H}-relevant-activities-activity`},Dt=(0,i.Ay)(d.A,{name:k.H,slot:"RelevantActivitiesRoot"})((()=>({})));const Lt=function(e){const{className:t=null,activities:s=[],showMaxRelevantActivities:i=5}=e,l=(0,o.__rest)(e,["className","activities","showMaxRelevantActivities"]),[c,d]=(0,a.useState)(!1);function u(e,t){return e.type===jt.j.COMMENT?(0,n.jsx)(yt,{activityObject:e,elevation:0},t):e.type===jt.j.FOLLOW?(0,n.jsx)(_t,{activityObject:e,elevation:0},t):e.type===jt.j.VOTE?(0,n.jsx)(wt,{activityObject:e,elevation:0},t):e.type===jt.j.POLLVOTE?(0,n.jsx)(It,{activityObject:e,elevation:0},t):null}return(0,n.jsx)(Dt,Object.assign({className:N()($t.root,t)},l,{children:s.length<=0?(0,n.jsx)(r.A,Object.assign({variant:"body2"},{children:(0,n.jsx)(W.A,{id:"ui.feedObject.relevantActivities.noResults",defaultMessage:"ui.feedObject.relevantActivities.noResults"})})):(0,n.jsxs)(Y.A,{children:[s.slice(0,i).map(((e,t)=>(0,n.jsx)(K.Ay,Object.assign({className:$t.activity},{children:u(e,t)}),t))),!c&&s.length>i&&(0,n.jsxs)(mt.A,Object.assign({onClick:()=>d((e=>!e))},{children:[(0,n.jsx)(ce.A,{primary:(0,n.jsx)(W.A,{id:"ui.feedObject.relevantActivities.showOthers",defaultMessage:"ui.feedObject.relevantActivities.showOthers"})}),c?(0,n.jsx)(m.A,{children:"expand_less"}):(0,n.jsx)(m.A,{children:"expand_more"})]})),(0,n.jsx)(A.A,Object.assign({in:c,timeout:"auto",unmountOnExit:!0},{children:s.slice(i).map(((e,t)=>(0,n.jsx)(K.Ay,Object.assign({className:$t.activity},{children:u(e,t)}),t)))}))]})}))};var Vt=s(54262),Ft=s(40094);const Ht={root:`${k.H}-activities-root`,activities:`${k.H}-activities`},Ut=(0,i.Ay)(d.A,{name:k.H,slot:"ActivitiesRoot"})((()=>({})));const Bt=function(e){const{id:t=`feed_object_activities_${e.feedObjectId?e.feedObjectId:e.feedObject?e.feedObject.id:""}`,className:s,feedObjectId:i,feedObject:r,feedObjectType:l=V.Z.POST,cacheStrategy:c=Fe.So.CACHE_FIRST,CommentsObjectProps:u={},CommentComponentProps:m={variant:"outlined"},feedObjectActivities:p=[],comments:g=[],onSetSelectedActivities:h,activitiesType:b=F.x.RECENT_COMMENTS}=e,j=(0,o.__rest)(e,["id","className","feedObjectId","feedObject","feedObjectType","cacheStrategy","CommentsObjectProps","CommentComponentProps","feedObjectActivities","comments","onSetSelectedActivities","activitiesType"]),{ref:A,inView:v}=(0,Ft.Wx)({triggerOnce:!0}),[f,x]=(0,a.useState)(b),O=(0,Vt.A)({id:i,feedObject:r,feedObjectType:l,cacheStrategy:c,pageSize:1,orderBy:f===F.x.CONNECTIONS_COMMENTS?dt.e.CONNECTION_DESC:f===F.x.FIRST_COMMENTS?dt.e.ADDED_AT_ASC:dt.e.ADDED_AT_DESC}),y=O.feedObject?O.feedObject.id:null,C=Math.min(2,O.feedObject?O.feedObject.comment_count:2),E=p&&p.length>0;function w(){O.getNextPage()}return(0,a.useEffect)((()=>{x(b)}),[b]),(0,a.useEffect)((()=>{y&&!O.comments.length&&v&&O.getNextPage()}),[y,v]),(0,n.jsx)(Ut,Object.assign({id:t,className:N()(Ht.root,s)},j,{ref:A},{children:O.feedObject&&(Boolean(O.feedObject.comment_count)||p&&p.length>0||g.length>0||r&&r.comment_count>0)?(0,n.jsxs)(d.A,Object.assign({className:Ht.activities},E?{}:{style:{minHeight:80*Math.min(C,null==r?void 0:r.comment_count)+"px"}},{children:[(0,n.jsx)(bt,{selectedActivities:f,hideRelevantActivitiesItem:!E,onChange:function(e){h(e),x(e)}}),f===F.x.RELEVANCE_ACTIVITIES?(0,n.jsx)(Lt,{activities:p}):(0,n.jsx)(n.Fragment,{children:(O.feedObject.comment_count>0||g.length>0)&&(0,n.jsx)(ut.A,Object.assign({feedObject:O.feedObject,comments:O.comments,startComments:g,next:O.next,isLoadingNext:O.isLoadingNext,handleNext:w,totalLoadedComments:O.comments.length+g.length,totalComments:O.feedObject.comment_count,hideAdvertising:!0},u,{cacheStrategy:c,CommentsObjectSkeletonProps:{count:C},CommentComponentProps:Object.assign(Object.assign(Object.assign(Object.assign({},u.CommentComponentProps?u.CommentComponentProps:{}),{truncateContent:!0}),m),{cacheStrategy:c}),inPlaceLoadMoreContents:!1}))})]})):null}))};var Gt=s(86955),zt=s(89333),Wt=s(99769);var qt=s(35488),Yt=s(13470),Kt=s(4527);const Xt="SCFeedObjectMediaPreview",Zt={root:`${Xt}-root`},Jt=(0,i.Ay)(d.A,{name:Xt,slot:"Root"})((()=>({}))),Qt=e=>{const t=(0,lt.A)({props:e,name:Xt}),{className:s,medias:a,mediaObjectTypes:i=[qt.A,Yt.A,Kt.A]}=t,r=(0,o.__rest)(t,["className","medias","mediaObjectTypes"]),{handleMediaClick:l}={handleMediaClick:e=>{J.A.request({url:Z.A.MediaClickTracker.url({id:e.id}),method:Z.A.MediaClickTracker.method}).catch((e=>{Q.V.error(He.K,e)}))}};return a.length?(0,n.jsx)(Jt,Object.assign({className:N()(s,Zt.root)},r,{children:i.map((e=>{const{displayProps:t={}}=e;return(0,n.jsx)("div",{children:(0,n.jsx)(e.displayComponent,Object.assign({medias:a},t,{onMediaClick:l}))},e.name)}))})):null},es=(0,R.YK)({visibleToAll:{id:"ui.feedObject.visibleToAll",defaultMessage:"ui.feedObject.visibleToAll"},visibleToGroup:{id:"ui.feedObject.visibleToGroup",defaultMessage:"ui.feedObject.visibleToGroup"},visibleToRecipients:{id:"ui.feedObject.visibleToRecipients",defaultMessage:"ui.feedObject.visibleToRecipients"}}),ts={root:`${k.H}-root`,deleted:`${k.H}-deleted`,header:`${k.H}-header`,category:`${k.H}-category`,event:`${k.H}-event`,group:`${k.H}-group`,avatar:`${k.H}-avatar`,username:`${k.H}-username`,activityAt:`${k.H}-activity-at`,tag:`${k.H}-tag`,location:`${k.H}-location`,content:`${k.H}-content`,showMore:`${k.H}-show-more`,error:`${k.H}-error`,titleSection:`${k.H}-title-section`,title:`${k.H}-title`,textSection:`${k.H}-text-section`,text:`${k.H}-text`,snippet:`${k.H}-snippet`,snippetContent:`${k.H}-snippet-content`,mediasSection:`${k.H}-medias-section`,pollsSection:`${k.H}-polls-section`,infoSection:`${k.H}-info-section`,actionsSection:`${k.H}-actions-section`,replyContent:`${k.H}-reply-content`,activitiesSection:`${k.H}-activities-section`,activitiesContent:`${k.H}-activities-content`,followButton:`${k.H}-follow-button`,vote:`${k.H}-vote`,new:`${k.H}-new`},ss=(0,i.Ay)(rt.A,{name:k.H,slot:"Root"})((()=>({})));const os=function(e){var t,s,i,y,C,E,w,T,S;const _=(0,lt.A)({props:e,name:k.H}),{id:R=`feed_object_${_.feedObjectId?_.feedObjectId:_.feedObject?_.feedObject.id:""}`,className:I=null,feedObjectId:U=null,feedObject:B=null,feedObjectType:G=null,feedObjectActivities:z=null,cacheStrategy:q=Fe.So.CACHE_FIRST,markRead:Y=!1,template:K=F.a.PREVIEW,hideFollowAction:X=!1,summaryExpanded:te=!1,activitiesExpanded:se=!0,activitiesExpandedType:oe,hideParticipantsPreview:ne=!1,pollVisible:ae=!0,FollowButtonProps:ie={},FeedObjectSkeletonProps:re={elevation:0},ActionsProps:le={},CommentObjectReplyComponent:ce=Gt.A,CommentObjectReplyComponentProps:de={WidgetProps:{variant:"outlined"}},CommentComponentProps:ue={variant:"outlined"},CommentObjectSkeletonProps:ge={elevation:0,WidgetProps:{variant:"outlined"}},ContributionActionsMenuProps:he={},FeedObjectMediaPreviewProps:xe={},ActivitiesProps:ye={cacheStrategy:q},PollObjectProps:Ce={elevation:0},ContributorsFeedObjectProps:Ee={},onReply:Ne,onHeightChange:we,onStateChange:Te}=_,Se=(0,o.__rest)(_,["id","className","feedObjectId","feedObject","feedObjectType","feedObjectActivities","cacheStrategy","markRead","template","hideFollowAction","summaryExpanded","activitiesExpanded","activitiesExpandedType","hideParticipantsPreview","pollVisible","FollowButtonProps","FeedObjectSkeletonProps","ActionsProps","CommentObjectReplyComponent","CommentObjectReplyComponentProps","CommentComponentProps","CommentObjectSkeletonProps","ContributionActionsMenuProps","FeedObjectMediaPreviewProps","ActivitiesProps","PollObjectProps","ContributorsFeedObjectProps","onReply","onHeightChange","onStateChange"]),_e=(0,be.J_)(),Me=(0,D.I$)(),Re=(0,ve.X1)(),{enqueueSnackbar:Pe}=(0,pe.dh)(),{preferences:Ie}=(0,je.Sw)(),$e=Ae.b8 in Ie&&Ie[Ae.b8].value,De=Ae.Nh in Ie&&Ie[Ae.Nh].value,{obj:Le,setObj:He,error:Be}=(0,$.A)({id:U,feedObject:B,feedObjectType:G,cacheStrategy:q}),Ge=Le?Le.id:null,[ze,We]=(0,a.useState)(!1),qe=()=>Le&&se&&(Le.comment_count>0||z&&z.length>0),[Ye,Ke]=(0,a.useState)(!1),[Xe,Ze]=(0,a.useState)(qe()),[Je,Qe]=(0,a.useState)([]),[nt,at]=(0,a.useState)(!1),[rt,dt]=(0,a.useState)(function(){if(oe)return oe;if(z&&z.length>0)return F.x.RELEVANCE_ACTIVITIES;return F.x.RECENT_COMMENTS}()),[ut,mt]=(0,a.useState)(te),pt=(0,a.useMemo)((()=>{var e;return(null==Le?void 0:Le.medias.length)>0&&(null===(e=Le.medias[0].embed)||void 0===e?void 0:e.embed_type)===me.TY}),[null==Le?void 0:Le.medias]),gt=(0,a.useMemo)((()=>{var e,t,s,o;return X||pt&&!1===(null===(o=null===(s=null===(t=null===(e=null==Le?void 0:Le.medias)||void 0===e?void 0:e[0])||void 0===t?void 0:t.embed)||void 0===s?void 0:s.metadata)||void 0===o?void 0:o.active)}),[X,pt,Le]),ht=(0,P.A)(),bt=(0,a.useMemo)((()=>e=>{Te&&e&&Te(e),we&&we()}),[Te,we]),jt=e=>{He(e),bt()};(0,a.useEffect)((()=>{const e=qe();Ze(e),bt({activitiesExpanded:e,activitiesExpandedType:rt,cacheStrategy:Fe.So.CACHE_FIRST})}),[Ge,rt]);const ft=(0,a.useCallback)((e=>{"poll"in Le&&jt(Object.assign({},Le,{poll:Object.assign(Object.assign({},Le.poll),{choices:e})}))}),[Le]),xt=(0,a.useCallback)((e=>{bt({pollVisible:e})}),[ae,bt]),Ot=(0,a.useCallback)((()=>{mt(!ut),bt({summaryExpanded:!ut})}),[ut,bt]),yt=(0,a.useCallback)((()=>{bt({markRead:!1})}),[ut,bt]),Ct=(0,a.useCallback)(((e,t,s)=>{Pe(s?(0,n.jsx)(W.A,{id:"ui.feedObject.flagSent",defaultMessage:"ui.feedObject.flagSent"}):(0,n.jsx)(W.A,{id:"ui.feedObject.flagRemoved",defaultMessage:"ui.feedObject.flagRemoved"}),{autoHideDuration:3e3})}),[]),Et=(0,a.useCallback)((()=>{jt(Object.assign({},Le,{deleted:!1}))}),[Le]),Nt=(0,a.useCallback)((()=>{jt(Object.assign({},Le,{collapsed:!Le.collapsed}))}),[Le]),wt=(0,a.useCallback)((()=>{jt(Object.assign({},Le,{deleted:!Le.deleted}))}),[Le]),Tt=(0,a.useCallback)((()=>{jt(Object.assign({},Le,{suspended:!Le.suspended})),Pe(Le.suspended?(0,n.jsx)(W.A,{id:"ui.feedObject.notificationsEnabled",defaultMessage:"ui.feedObject.notificationsEnabled"}):(0,n.jsx)(W.A,{id:"ui.feedObject.notificationsDisabled",defaultMessage:"ui.feedObject.notificationsDisabled"}),{autoHideDuration:3e3})}),[Le]),kt=(0,a.useCallback)((()=>{Ke((e=>!e))}),[Ye]),St=(0,a.useCallback)((e=>{jt(e),Ke(!1)}),[Le,Ye]),_t=(0,a.useCallback)((e=>{jt(Object.assign({},Le,{voted:e.voted,vote_count:e.vote_count,reactions_count:e.reactions_count,reaction:e.reaction}))}),[Le]),Mt=(0,a.useCallback)((()=>{if(Re.user){const e=!Xe;Ze(e),bt({activitiesExpanded:e})}else _e.settings.handleAnonymousAction()}),[Xe,Re.user,bt,rt]),Rt=(0,a.useCallback)((e=>{jt(Object.assign(Object.assign({},Le),{followed:e}))}),[Le]),Pt=(0,a.useCallback)((()=>{jt(Object.assign(Object.assign({},Le),{comment_count:Math.max(Le.comment_count-1,0)}))}),[Le]),It=(0,a.useCallback)((e=>{dt(e),Qe([]),bt({activitiesExpandedType:e})}),[Le,Xe]),$t=(0,a.useMemo)((()=>e=>J.A.request({url:Z.A.NewComment.url({}),method:Z.A.NewComment.method,data:{[`${Le.type}`]:Le.id,text:e}}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[Ge]),Dt=e=>{Re.user?fe.lT(Re.user)?Pe((0,n.jsx)(W.A,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3}):(at(!0),$t(e).then((e=>{const t=e;t.summary_truncated=!1,rt!==F.x.RECENT_COMMENTS?(Qe([]),dt(F.x.RECENT_COMMENTS)):Qe([t,...Je]),at(!1);const s=Object.assign({},Le,{comment_count:Le.comment_count+1});jt(s),Fe.Ay.deleteKeysWithPrefix(Ue.MI(Le.id,Le.type)),Ne&&Ne(e),bt({activitiesExpanded:Xe,activitiesExpandedType:F.x.RECENT_COMMENTS})})).catch((e=>{Q.V.error(ee.d,e),(0,ot.c)(e,Re.managers.blockedUsers.isBlocked(Le.author),Pe)||Pe((0,n.jsx)(W.A,{id:"ui.common.error.action",defaultMessage:"ui.common.error.action"}),{variant:"error",autoHideDuration:3e3})}))):_e.settings.handleAnonymousAction()},Lt=(0,a.useCallback)(((e,t)=>{const s="summary_html"in e?e.summary_html:e.summary,o="summary_truncated"in e?e.summary_truncated:e.html.length>=Wt.b4,a=ut||t===F.a.DETAIL?(0,H.MZ)(e.html,Me.url):(0,H.MZ)(s,Me.url);return t===F.a.SHARE?(0,n.jsxs)(L.A,Object.assign({to:Me.url((0,H.lg)(e),(0,H.kB)(e)),className:ts.text},{children:[(0,n.jsx)(r.A,{component:"span",className:ts.text,variant:"body2",gutterBottom:!0,dangerouslySetInnerHTML:{__html:a}}),!ut&&o&&(0,n.jsx)(l.A,Object.assign({size:"small",variant:"text",color:"inherit",className:ts.showMore,onClick:Ot},{children:(0,n.jsx)(W.A,{id:"ui.feedObject.content.showMore",defaultMessage:"ui.feedObject.content.showMore"})}))]})):t===F.a.DETAIL?(0,n.jsx)(r.A,{component:"div",gutterBottom:!0,className:ts.text,dangerouslySetInnerHTML:{__html:a}}):(0,n.jsxs)(r.A,Object.assign({component:"div",gutterBottom:!0,className:ts.text},{children:[(0,n.jsx)(r.A,{component:"span",dangerouslySetInnerHTML:{__html:a}}),!ut&&o&&(0,n.jsx)(l.A,Object.assign({size:"small",variant:"text",color:"inherit",className:ts.showMore,onClick:Ot},{children:(0,n.jsx)(W.A,{id:"ui.feedObject.content.showMore",defaultMessage:"ui.feedObject.content.showMore"})}))]}))}),[Le,K,ut]);let Vt;return Vt=!Le&&Be||(null==Le?void 0:Le.deleted)&&!Re.user&&!fe.qc(Re.user)&&!fe.Cy(Re.user)?(0,n.jsx)(c.A,Object.assign({className:N()(ts.error,ts.content)},{children:(0,n.jsx)(W.A,{id:"ui.feedObject.error",defaultMessage:"ui.feedObject.error"})})):K===F.a.PREVIEW||K===F.a.DETAIL||K===F.a.SEARCH?(0,n.jsx)(a.Fragment,{children:Le?(0,n.jsxs)(d.A,Object.assign({className:N()({[ts.deleted]:Le&&Le.deleted})},{children:[Le.categories.length>0&&(0,n.jsxs)("div",Object.assign({className:ts.category},{children:[(0,n.jsxs)(n.Fragment,{children:[Le.group&&(0,n.jsx)(u.A,{className:ts.group,color:"secondary",size:"small",icon:(0,n.jsx)(m.A,{children:"groups"}),component:L.A,to:Me.url(At.GROUP_ROUTE_NAME,Le.group),clickable:!0},Le.group.id),Le.event&&(0,n.jsx)(u.A,{className:ts.event,color:"secondary",size:"small",label:Le.event.name,icon:(0,n.jsx)(m.A,{children:"CalendarIcon"}),component:L.A,to:Me.url(At.EVENT_ROUTE_NAME,Le.event),clickable:!0},Le.event.id)]}),Le.categories.map((e=>(0,n.jsx)(L.A,Object.assign({to:Me.url(At.CATEGORY_ROUTE_NAME,e)},{children:(0,n.jsx)(r.A,Object.assign({variant:"overline"},{children:e.name}))}),e.id)))]})),Le.group&&!Le.categories.length&&(0,n.jsx)("div",Object.assign({className:ts.group},{children:(0,n.jsx)(u.A,{color:"secondary",size:"small",icon:(0,n.jsx)(m.A,{children:"groups"}),label:Le.group.name,component:L.A,to:Me.url(At.GROUP_ROUTE_NAME,Le.group),clickable:!0},Le.group.id)})),Le.event&&!Le.categories.length&&(0,n.jsx)(u.A,{className:ts.event,color:"secondary",size:"small",icon:(0,n.jsx)(m.A,{children:"CalendarIcon"}),label:Le.event.name,component:L.A,to:Me.url(At.EVENT_ROUTE_NAME,Le.event),clickable:!0},Le.event.id),(0,n.jsx)(p.A,{className:ts.header,avatar:(0,n.jsx)(L.A,Object.assign({},!Le.author.deleted&&{to:Me.url(At.USER_PROFILE_ROUTE_NAME,Le.author)},{onClick:Le.author.deleted?()=>We(!0):null},{children:(0,n.jsx)(zt.A,Object.assign({hide:!Le.author.community_badge},{children:(0,n.jsx)(g.A,Object.assign({"aria-label":"recipe",src:Le.author.avatar,className:ts.avatar},{children:Le.author.username}))}))})),title:(0,n.jsx)(L.A,Object.assign({},!Le.author.deleted&&{to:Me.url(At.USER_PROFILE_ROUTE_NAME,Le.author)},{onClick:Le.author.deleted?()=>We(!0):null,className:ts.username},{children:Le.author.username})),subheader:(0,n.jsxs)(n.Fragment,{children:[Re.user&&Y&&(0,n.jsx)("span",Object.assign({className:ts.new},{children:"NEW"})),(0,n.jsx)(L.A,Object.assign({to:Me.url((0,H.lg)(Le),(0,H.kB)(Le)),className:ts.activityAt},{children:(0,n.jsx)(f.A,{component:"span",date:Le.added_at})})),Le.location&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.A,{}),(0,n.jsxs)(d.A,Object.assign({className:ts.location},{children:[(0,n.jsx)(m.A,{children:"add_location_alt"}),null===(t=Le.location)||void 0===t?void 0:t.location]}))]}),((null!==(s=Le.addressing)&&void 0!==s?s:[]).filter((e=>e.visible)).length>0||(null==Le?void 0:Le.group))&&(0,n.jsx)(x.A,{}),(0,n.jsx)(d.A,Object.assign({className:ts.tag},{children:Le.addressing.length>0?(0,n.jsx)(O.A,{tags:Le.addressing,TagChipProps:{disposable:!1,clickable:!1}}):Le.group?(0,n.jsx)(h.A,Object.assign({title:`${ht.formatMessage(es.visibleToGroup,{group:Le.group.name})}`},{children:(0,n.jsx)(m.A,Object.assign({color:"disabled",fontSize:"small"},{children:"groups"}))})):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.A,{}),(null===(i=Le.recipients)||void 0===i?void 0:i.length)>0?(0,n.jsx)(h.A,Object.assign({title:`${ht.formatMessage(es.visibleToRecipients)}`},{children:(0,n.jsx)(m.A,Object.assign({color:"disabled",fontSize:"small"},{children:"private"}))})):(0,n.jsx)(h.A,Object.assign({title:`${ht.formatMessage(es.visibleToAll)}`},{children:(0,n.jsx)(m.A,Object.assign({color:"disabled",fontSize:"small"},{children:"public"}))}))]})}))]}),action:(0,n.jsx)(st.A,Object.assign({feedObject:Le,feedObjectType:G,onEditContribution:kt,onHideContribution:Nt,onDeleteContribution:wt,onRestoreContribution:Et,onSuspendNotificationContribution:Tt,onFlagContribution:Ct},he))}),(0,n.jsxs)(c.A,Object.assign({classes:{root:ts.content}},{children:[(0,n.jsx)(d.A,Object.assign({className:ts.titleSection},{children:"title"in Le&&(0,n.jsx)(n.Fragment,{children:K===F.a.DETAIL?(0,n.jsx)(r.A,Object.assign({variant:"body1",gutterBottom:!0,className:ts.title},{children:Le.title})):(0,n.jsx)(L.A,Object.assign({to:Me.url((0,H.lg)(Le),(0,H.kB)(Le))},{children:(0,n.jsx)(r.A,Object.assign({variant:"body1",gutterBottom:!0,className:ts.title},{children:Le.title}))}))})})),(0,n.jsx)(d.A,Object.assign({className:ts.textSection},{children:Lt(Le,K)})),(0,n.jsx)(d.A,Object.assign({className:ts.mediasSection},{children:(0,n.jsx)(Qt,Object.assign({medias:Le.medias},xe))})),(0,n.jsx)(d.A,Object.assign({className:ts.pollsSection},{children:Le.poll&&(0,n.jsx)(Ve,Object.assign({visible:ae||K===F.a.DETAIL||Boolean(Le.type!==V.Z.DISCUSSION&&!Le.html&&!Le.medias.length),feedObject:Le,pollObject:Le.poll,onChange:ft,onToggleVisibility:xt},Ce))})),!Le.draft&&(0,n.jsx)(d.A,Object.assign({className:ts.infoSection},{children:(0,n.jsxs)(b.A,Object.assign({direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2},{children:[De||$e?!ne&&(0,n.jsx)(et,Object.assign({feedObject:Le,feedObjectType:Le.type},Ee,{cacheStrategy:q})):(0,n.jsx)(M,{feedObjectId:U||(null==B?void 0:B.id),feedObjectType:G,feedObject:Le,inlineAction:!0,onVoteAction:_t,className:ts.vote}),!gt&&(0,n.jsx)(it,Object.assign({feedObject:Le,feedObjectType:Le.type,handleFollow:Rt},ie))]}))}))]})),(0,n.jsxs)(j.A,Object.assign({className:ts.actionsSection},{children:[(0,n.jsx)(ke,Object.assign({feedObjectId:U,feedObjectType:G,feedObject:Le,hideVoteAction:!$e&&!De,hideCommentAction:!De||K===F.a.DETAIL||pt&&!(null===(C=null===(y=null==Le?void 0:Le.medias[0].embed)||void 0===y?void 0:y.metadata)||void 0===C?void 0:C.active),hideShareAction:!$e,handleExpandActivities:K===F.a.PREVIEW?Mt:null,VoteActionProps:{onVoteAction:_t}},le)),De&&(K===F.a.DETAIL&&(!pt||(null===(S=null===(T=null===(w=null===(E=null==Le?void 0:Le.medias)||void 0===E?void 0:E[0])||void 0===w?void 0:w.embed)||void 0===T?void 0:T.metadata)||void 0===S?void 0:S.active))||Xe)&&(0,n.jsx)(d.A,Object.assign({className:ts.replyContent},{children:(0,n.jsx)(ce,Object.assign({id:`reply-feedObject-${Le.id}`,onReply:Dt,editable:!nt||Boolean(Le)},de),Number(nt))}))]})),De&&K===F.a.PREVIEW&&(Le.comment_count>0||z&&z.length>0)&&(0,n.jsx)(A.A,Object.assign({in:Xe,timeout:"auto",classes:{root:ts.activitiesSection}},{children:(0,n.jsx)(c.A,Object.assign({className:ts.activitiesContent},{children:(0,n.jsx)(Bt,Object.assign({feedObject:Le,feedObjectActivities:z,activitiesType:rt,onSetSelectedActivities:It,comments:Je,CommentsObjectProps:{CommentComponentProps:Object.assign({onDelete:Pt,truncateContent:!0,CommentsObjectComponentProps:{inPlaceLoadMoreContents:!1}},ue),CommentObjectSkeletonProps:ge},cacheStrategy:q},ye),rt)}))})),Ye&&(0,n.jsx)(Oe.A,{open:Ye,feedObject:Le,onClose:kt,onSuccess:St,maxWidth:"sm",fullWidth:!0})]})):(0,n.jsx)(v.A,Object.assign({template:K},re))}):K===F.a.SHARE?(0,n.jsx)(a.Fragment,{children:Le?(0,n.jsxs)(a.Fragment,{children:[Le.categories.length>0&&(0,n.jsxs)("div",Object.assign({className:ts.category},{children:[(0,n.jsxs)(n.Fragment,{children:[Le.group&&(0,n.jsx)("div",Object.assign({className:ts.group},{children:(0,n.jsx)(u.A,{color:"secondary",size:"small",icon:(0,n.jsx)(m.A,{children:"groups"}),component:L.A,to:Me.url(At.GROUP_ROUTE_NAME,Le.group),clickable:!0},Le.group.id)})),Le.event&&(0,n.jsx)(u.A,{className:ts.event,color:"secondary",size:"small",icon:(0,n.jsx)(m.A,{children:"CalendarIcon"}),component:L.A,to:Me.url(At.EVENT_ROUTE_NAME,Le.event),clickable:!0},Le.event.id)]}),Le.categories.map((e=>(0,n.jsx)(L.A,Object.assign({to:Me.url(At.CATEGORY_ROUTE_NAME,e)},{children:(0,n.jsx)(r.A,Object.assign({variant:"overline"},{children:e.name}))}),e.id)))]})),Le.group&&!Le.categories.length&&(0,n.jsx)("div",Object.assign({className:ts.group},{children:(0,n.jsx)(u.A,{color:"secondary",size:"small",icon:(0,n.jsx)(m.A,{children:"groups"}),label:Le.group.name,component:L.A,to:Me.url(At.GROUP_ROUTE_NAME,Le.group),clickable:!0},Le.group.id)})),Le.event&&!Le.categories.length&&(0,n.jsx)("div",Object.assign({className:ts.event},{children:(0,n.jsx)(u.A,{color:"secondary",size:"small",icon:(0,n.jsx)(m.A,{children:"groups"}),label:Le.event.name,component:L.A,to:Me.url(At.EVENT_ROUTE_NAME,Le.event),clickable:!0},Le.event.id)})),(0,n.jsx)(p.A,{classes:{root:ts.header},avatar:(0,n.jsx)(L.A,Object.assign({},!Le.author.deleted&&{to:Me.url(At.USER_PROFILE_ROUTE_NAME,Le.author)},{onClick:Le.author.deleted?()=>We(!0):null,className:ts.username},{children:(0,n.jsx)(zt.A,Object.assign({hide:!Le.author.community_badge},{children:(0,n.jsx)(g.A,Object.assign({"aria-label":"recipe",src:Le.author.avatar,className:ts.avatar},{children:Le.author.username}))}))})),title:(0,n.jsx)(L.A,Object.assign({},!Le.author.deleted&&{to:Me.url(At.USER_PROFILE_ROUTE_NAME,Le.author)},{onClick:Le.author.deleted?()=>We(!0):null,className:ts.username},{children:Le.author.username})),subheader:(0,n.jsx)(L.A,Object.assign({to:Me.url((0,H.lg)(Le),(0,H.kB)(Le)),className:ts.activityAt},{children:(0,n.jsx)(f.A,{date:Le.added_at})}))}),(0,n.jsxs)(c.A,Object.assign({classes:{root:ts.content}},{children:[(0,n.jsx)(d.A,Object.assign({className:ts.titleSection},{children:"title"in Le&&(0,n.jsx)(L.A,Object.assign({to:Me.url((0,H.lg)(Le),(0,H.kB)(Le))},{children:(0,n.jsx)(r.A,Object.assign({variant:"body1",gutterBottom:!0,className:ts.title},{children:Le.title}))}))})),(0,n.jsx)(d.A,Object.assign({className:ts.textSection},{children:Lt(Le,K)})),(0,n.jsx)(d.A,Object.assign({className:ts.mediasSection},{children:(0,n.jsx)(Qt,Object.assign({medias:Le.medias},xe))})),(0,n.jsx)(d.A,Object.assign({className:ts.pollsSection},{children:Le.poll&&(0,n.jsx)(Ve,Object.assign({feedObject:Le,pollObject:Le.poll,onChange:ft,visible:Boolean(Le.type!==V.Z.DISCUSSION&&!Le.html&&!Le.medias.length)},Ce))}))]}))]}):(0,n.jsx)(v.A,Object.assign({template:K},re))}):(0,n.jsx)(a.Fragment,{children:Le?(0,n.jsx)(ct.A,{elevation:0,className:ts.snippet,image:(0,n.jsx)(L.A,Object.assign({},!Le.author.deleted&&{to:Me.url(At.USER_PROFILE_ROUTE_NAME,Le.author)},{onClick:Le.author.deleted?()=>We(!0):null},{children:(0,n.jsx)(zt.A,Object.assign({hide:!Le.author.community_badge},{children:(0,n.jsx)(g.A,{alt:Le.author.username,variant:"circular",src:Le.author.avatar,className:ts.avatar})}))})),primary:(0,n.jsxs)(d.A,{children:[(0,n.jsx)(L.A,Object.assign({},!Le.author.deleted&&{to:Me.url(At.USER_PROFILE_ROUTE_NAME,Le.author)},{onClick:Le.author.deleted?()=>We(!0):null,className:ts.username},{children:Le.author.username})),(0,n.jsx)(r.A,Object.assign({variant:"body2",className:ts.snippetContent},{children:(0,n.jsx)(L.A,Object.assign({to:Me.url((0,H.lg)(Le),(0,H.kB)(Le))},{children:(0,H.cO)(Le)}))}))]}),disableTypography:!0,secondary:(0,n.jsxs)(b.A,Object.assign({direction:"row",justifyContent:"space-between",spacing:2,alignItems:"center"},{children:[(0,n.jsx)(L.A,Object.assign({to:Me.url((0,H.lg)(Le),(0,H.kB)(Le)),className:ts.activityAt},{children:(0,n.jsx)(f.A,{component:"span",date:Le.added_at})})),De&&(0,n.jsx)(l.A,Object.assign({component:L.A,to:Me.url((0,H.lg)(Le),(0,H.kB)(Le)),variant:"text",color:"secondary",size:"small"},{children:(0,n.jsx)(W.A,{id:"ui.feedObject.comment",defaultMessage:"ui.feedObject.comment"})}))]}))}):(0,n.jsx)(v.A,Object.assign({},re))}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(ss,Object.assign({id:R,className:N()(ts.root,I,`${k.H}-${K}`)},Se,{children:[Re.user&&Le&&Y&&(0,n.jsx)(tt.A,{endpoint:Z.A.FeedObjectMarkRead,data:{object:[Le.id]},callback:yt}),Vt]})),ze&&(0,n.jsx)(vt.A,{open:ze,handleClose:()=>We(!1)})]})}},84567:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){var o,n;return t||(t=250),function(){var a=s||this,i=+new Date,r=arguments;o&&i<o+t?(clearTimeout(n),n=setTimeout((function(){o=i,e.apply(a,r)}),t)):(o=i,e.apply(a,r))}}},88579:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.on=function(e,t,s,o){o=o||!1,e.addEventListener?e.addEventListener(t,s,o):e.attachEvent&&e.attachEvent("on"+t,(function(t){s.call(e,t||window.event)}))},t.off=function(e,t,s,o){o=o||!1,e.removeEventListener?e.removeEventListener(t,s,o):e.detachEvent&&e.detachEvent("on"+t,s)}},92699:(e,t,s)=>{"use strict";s.d(t,{H:()=>o});const o="SCFeedObject"},93428:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){var o=void 0,n=void 0,a=void 0,i=void 0,r=void 0,l=function l(){var c=+new Date-i;c<t&&c>=0?o=setTimeout(l,t-c):(o=null,s||(r=e.apply(a,n),o||(a=null,n=null)))};return function(){a=this,n=arguments,i=+new Date;var c=s&&!o;return o||(o=setTimeout(l,t)),c&&(r=e.apply(a,n),a=null,n=null),r}}},95754:(e,t,s)=>{"use strict";var o,n;s.d(t,{a:()=>o,x:()=>n}),function(e){e.SNIPPET="snippet",e.PREVIEW="preview",e.DETAIL="detail",e.SEARCH="search",e.SHARE="share"}(o||(o={})),function(e){e.RELEVANCE_ACTIVITIES="relevant_activities",e.RECENT_COMMENTS="recent_comments",e.FIRST_COMMENTS="first_comments",e.CONNECTIONS_COMMENTS="connections_comments"}(n||(n={}))},97100:(e,t,s)=>{"use strict";var o,n;s.d(t,{i:()=>o,j:()=>n}),function(e){e.HOME="home",e.EXPLORE="explore",e.CATEGORY="category",e.GROUP="group",e.EVENT="event"}(o||(o={})),function(e){e.COMMENT="comment",e.VOTE="vote",e.POLLVOTE="pollvote",e.FOLLOW="follow"}(n||(n={}))},98669:(e,t,s)=>{"use strict";var o=function(){function e(e,t){for(var s=0;s<t.length;s++){var o=t[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,s,o){return s&&e(t.prototype,s),o&&e(t,o),t}}(),n=s(96540),a=u(n),i=u(s(5556)),r=s(88579),l=u(s(77334)),c=u(s(93428)),d=u(s(84567));function u(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=0,b=0,j=0,A=0,v="data-lazyload-listened",f=[],x=[],O=!1;try{var y=Object.defineProperty({},"passive",{get:function(){O=!0}});window.addEventListener("test",null,y)}catch(_){}var C=!!O&&{capture:!1,passive:!0},E=function(e){var t=e.ref;if(t instanceof HTMLElement){var s=(0,l.default)(t),o=e.props.overflow&&s!==t.ownerDocument&&s!==document&&s!==document.documentElement?function(e,t){var s=e.ref,o=void 0,n=void 0,a=void 0,i=void 0;try{var r=t.getBoundingClientRect();o=r.top,n=r.left,a=r.height,i=r.width}catch(_){o=h,n=b,a=A,i=j}var l=window.innerHeight||document.documentElement.clientHeight,c=window.innerWidth||document.documentElement.clientWidth,d=Math.max(o,0),u=Math.max(n,0),m=Math.min(l,o+a)-d,p=Math.min(c,n+i)-u,g=void 0,v=void 0,f=void 0,x=void 0;try{var O=s.getBoundingClientRect();g=O.top,v=O.left,f=O.height,x=O.width}catch(_){g=h,v=b,f=A,x=j}var y=g-d,C=v-u,E=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return y-E[0]<=m&&y+f+E[1]>=0&&C-E[0]<=p&&C+x+E[1]>=0}(e,s):function(e){var t=e.ref;if(!(t.offsetWidth||t.offsetHeight||t.getClientRects().length))return!1;var s=void 0,o=void 0;try{var n=t.getBoundingClientRect();s=n.top,o=n.height}catch(_){s=h,o=A}var a=window.innerHeight||document.documentElement.clientHeight,i=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return s-i[0]<=a&&s+o+i[1]>=0}(e);o?e.visible||(e.props.once&&x.push(e),e.visible=!0,e.forceUpdate()):e.props.once&&e.visible||(e.visible=!1,e.props.unmountIfInvisible&&e.forceUpdate())}},N=function(){x.forEach((function(e){var t=f.indexOf(e);-1!==t&&f.splice(t,1)})),x=[]},w=function(){for(var e=0;e<f.length;++e){var t=f[e];E(t)}N()},T=void 0,k=null,S=function(e){function t(e){m(this,t);var s=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.visible=!1,s.setRef=s.setRef.bind(s),s}return g(t,e),o(t,[{key:"componentDidMount",value:function(){var e=window,t=this.props.scrollContainer;t&&"string"==typeof t&&(e=e.document.querySelector(t));var s=void 0!==this.props.debounce&&"throttle"===T||"debounce"===T&&void 0===this.props.debounce;if(s&&((0,r.off)(e,"scroll",k,C),(0,r.off)(window,"resize",k,C),k=null),k||(void 0!==this.props.debounce?(k=(0,c.default)(w,"number"==typeof this.props.debounce?this.props.debounce:300),T="debounce"):void 0!==this.props.throttle?(k=(0,d.default)(w,"number"==typeof this.props.throttle?this.props.throttle:300),T="throttle"):k=w),this.props.overflow){var o=(0,l.default)(this.ref);if(o&&"function"==typeof o.getAttribute){var n=+o.getAttribute(v)+1;1===n&&o.addEventListener("scroll",k,C),o.setAttribute(v,n)}}else if(0===f.length||s){var a=this.props,i=a.scroll,u=a.resize;i&&(0,r.on)(e,"scroll",k,C),u&&(0,r.on)(window,"resize",k,C)}f.push(this),E(this)}},{key:"shouldComponentUpdate",value:function(){return this.visible}},{key:"componentWillUnmount",value:function(){if(this.props.overflow){var e=(0,l.default)(this.ref);if(e&&"function"==typeof e.getAttribute){var t=+e.getAttribute(v)-1;0===t?(e.removeEventListener("scroll",k,C),e.removeAttribute(v)):e.setAttribute(v,t)}}var s=f.indexOf(this);-1!==s&&f.splice(s,1),0===f.length&&"undefined"!=typeof window&&((0,r.off)(window,"resize",k,C),(0,r.off)(window,"scroll",k,C))}},{key:"setRef",value:function(e){e&&(this.ref=e)}},{key:"render",value:function(){var e=this.props,t=e.height,s=e.children,o=e.placeholder,n=e.className,i=e.classNamePrefix,r=e.style;return a.default.createElement("div",{className:i+"-wrapper "+n,ref:this.setRef,style:r},this.visible?s:o||a.default.createElement("div",{style:{height:t},className:i+"-placeholder"}))}}]),t}(n.Component);S.propTypes={className:i.default.string,classNamePrefix:i.default.string,once:i.default.bool,height:i.default.oneOfType([i.default.number,i.default.string]),offset:i.default.oneOfType([i.default.number,i.default.arrayOf(i.default.number)]),overflow:i.default.bool,resize:i.default.bool,scroll:i.default.bool,children:i.default.node,throttle:i.default.oneOfType([i.default.number,i.default.bool]),debounce:i.default.oneOfType([i.default.number,i.default.bool]),placeholder:i.default.node,scrollContainer:i.default.oneOfType([i.default.string,i.default.object]),unmountIfInvisible:i.default.bool,style:i.default.object},S.defaultProps={className:"",classNamePrefix:"lazyload",once:!1,offset:0,overflow:!1,resize:!1,scroll:!0,unmountIfInvisible:!1};t.Ay=S},99769:(e,t,s)=>{"use strict";s.d(t,{b4:()=>a,gt:()=>n,wE:()=>o});const o="widget_",n=10,a=150}}]);