"use strict";(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[93090],{6025:(e,t,o)=>{o.d(t,{A:()=>g});var r=o(59703),s=o(85486),a=o(31523),i=o(2879),n=o(56677),l=o(3369);const c=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],d=["component","slots","slotProps"],u=["component"];function g(e,t){const{className:o,elementType:g,ownerState:h,externalForwardedProps:m,getSlotOwnerState:p,internalForwardedProps:_}=t,C=(0,s.A)(t,c),{component:A,slots:f={[e]:void 0},slotProps:y={[e]:void 0}}=m,v=(0,s.A)(m,d),j=f[e]||g,w=(0,n.A)(y[e],h),b=(0,l.A)((0,r.A)({className:o},C,{externalForwardedProps:"root"===e?v:void 0,externalSlotProps:w})),{props:{component:x},internalRef:S}=b,E=(0,s.A)(b.props,u),O=(0,a.A)(S,null==w?void 0:w.ref,t.ref),P=p?p(E):{},T=(0,r.A)({},h,P),k="root"===e?x||A:x,N=(0,i.A)(j,(0,r.A)({},"root"===e&&!A&&!f[e]&&_,"root"!==e&&!f[e]&&_,E,k&&{as:k},{ref:O}),T);return Object.keys(P).forEach((e=>{delete N[e]})),[j,N]}},9063:(e,t,o)=>{o.d(t,{A:()=>a});var r=o(74848);const s=(0,o(11848).Ay)("div",{name:"SCHiddenPlaceholder",slot:"Root",overridesResolver:(e,t)=>[t.root]})((()=>({height:1,width:"100%",display:"none"})));function a(e){return(0,r.jsx)(s,Object.assign({},e))}},25292:(e,t,o)=>{o.d(t,{A:()=>_});var r=o(59703),s=o(85486),a=o(96540),i=o(54533),n=o(75659),l=o(11848),c=o(25669),d=o(38413),u=o(31609);function g(e){return(0,u.Ay)("MuiCardContent",e)}(0,d.A)("MuiCardContent",["root"]);var h=o(74848);const m=["className","component"],p=(0,l.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),_=a.forwardRef((function(e,t){const o=(0,c.b)({props:e,name:"MuiCardContent"}),{className:a,component:l="div"}=o,d=(0,s.A)(o,m),u=(0,r.A)({},o,{component:l}),_=(e=>{const{classes:t}=e;return(0,n.A)({root:["root"]},g,t)})(u);return(0,h.jsx)(p,(0,r.A)({as:l,className:(0,i.A)(_.root,a),ownerState:u,ref:t},d))}))},25879:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"sdk/community-js/react-ui/Components/CategoriesPopular","title":"Categories Popular Widget","description":"The Categories Popular Widget renders a list of popular categories.","source":"@site/docs/sdk/community-js/react-ui/Components/CategoriesPopular.mdx","sourceDirName":"sdk/community-js/react-ui/Components","slug":"/sdk/community-js/react-ui/Components/CategoriesPopular","permalink":"/docs/sdk/community-js/react-ui/Components/CategoriesPopular","draft":false,"unlisted":false,"editUrl":"https://github.com/selfcommunity/developers-doc/tree/main/docs/sdk/community-js/react-ui/Components/CategoriesPopular.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_label":"Categories Popular Widget","sidebar_position":1,"title":"Categories Popular Widget"},"sidebar":"sdkSidebar","previous":{"title":"Categories","permalink":"/docs/sdk/community-js/react-ui/Components/Categories"},"next":{"title":"Categories Suggestion Widget","permalink":"/docs/sdk/community-js/react-ui/Components/CategoriesSuggestion"}}');var s=o(74848),a=o(28453),i=o(37180),n=o(91959);const l={sidebar_label:"Categories Popular Widget",sidebar_position:1,title:"Categories Popular Widget"},c=void 0,d={},u=[{value:"Usage",id:"usage",level:4}];function g(e){const t={blockquote:"blockquote",code:"code",h4:"h4",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsxs)(t.p,{children:["The Categories Popular Widget renders a list of popular categories.",(0,s.jsx)("br",{}),"\nThis list is composed of items containing category's image, title, info and a follow button, that allows users to follow/unfollow a category.",(0,s.jsx)("br",{}),'\nThe categories are shown in an orderly manner: few items are shown in the main card while the others can be displayed in a modal card by clicking on the "show all" button.']}),"\n"]}),"\n","\n",(0,s.jsx)(i.A,{children:(0,s.jsx)(n.A,{})}),"\n",(0,s.jsx)(t.h4,{id:"usage",children:"Usage"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-jsx",children:" import React from 'react';\n import {SCContextProvider} from '@selfcommunity/react-core';\n import {CategoriesPopularWidget} from '@selfcommunity/react-ui';\n\n function App() {\n   const conf = {\n     portal: '<community-path>',\n     session: {\n       type: 'OAuth',\n       token: '<community-token>',\n       refreshToken: '<community-refresh-token>',\n       refreshTokenEndpoint: '<community-refresh-endpoint>',\n     },\n   };\n   return (\n     <SCContextProvider conf={conf}><CategoriesPopularWidget /></SCContextProvider>\n   );\n }\n"})})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(g,{...e})}):g(e)}},27202:(e,t,o)=>{o.d(t,{A:()=>n});var r=o(31635),s=o(29368),a=o(40462);class i{static getAllCategories(e,t){return(0,a.A)(Object.assign(Object.assign({},t),{params:e,url:s.A.CategoryList.url({}),method:s.A.CategoryList.method}))}static searchCategory(e,t){return(0,a.A)(Object.assign(Object.assign({},t),{params:e,url:s.A.SearchCategory.url({}),method:s.A.SearchCategory.method}))}static createCategory(e,t){return(0,a.A)(Object.assign({url:s.A.CreateCategory.url({}),method:s.A.CreateCategory.method,data:e},t))}static getSpecificCategory(e,t){return(0,a.A)(Object.assign({url:s.A.Category.url({id:e}),method:s.A.Category.method},t))}static updateASpecificCategory(e,t,o){return(0,a.A)(Object.assign({url:s.A.UpdateCategory.url({id:e}),method:s.A.UpdateCategory.method,data:t},o))}static patchASpecificCategory(e,t,o){return(0,a.A)(Object.assign({url:s.A.PatchCategory.url({id:e}),method:s.A.PatchCategory.method,data:t},o))}static deleteASpecificCategory(e,t){return(0,a.A)(Object.assign({url:s.A.DeleteCategory.url({id:e}),method:s.A.DeleteCategory.method},t))}static getCategoryAudience(e,t){return(0,a.A)(Object.assign({url:s.A.CategoryAudience.url({id:e}),method:s.A.CategoryAudience.method},t))}static getCategoryFollowers(e,t,o){return(0,a.A)(Object.assign({url:s.A.CategoryFollowers.url({id:e}),method:s.A.CategoryFollowers.method,params:t},o))}static getCategoryFeed(e,t,o){return(0,a.A)(Object.assign({url:s.A.CategoryFeed.url({id:e}),method:s.A.CategoryFeed.method,params:t},o))}static getCategoryTrendingFeed(e,t,o){return(0,a.A)(Object.assign(Object.assign({},o),{params:t,url:s.A.CategoryTrendingFeed.url({id:e}),method:s.A.CategoryTrendingFeed.method}))}static getCategoryTrendingFollowers(e,t,o){return(0,a.A)(Object.assign({url:s.A.CategoryTrendingPeople.url({id:e}),method:s.A.CategoryTrendingPeople.method,params:t},o))}static followCategory(e,t){return(0,a.A)(Object.assign({url:s.A.FollowCategory.url({id:e}),method:s.A.FollowCategory.method},t))}static checkCategoryIsFollowed(e,t){return(0,a.A)(Object.assign({url:s.A.CheckCategoryIsFollowed.url({id:e}),method:s.A.CheckCategoryIsFollowed.method},t))}static getFollowedCategories(e,t){return(0,a.A)(Object.assign(Object.assign({},t),{params:e,url:s.A.CategoriesFollowed.url({}),method:s.A.CategoriesFollowed.method}))}static getPopularCategories(e,t){return(0,a.A)(Object.assign(Object.assign({},t),{params:e,url:s.A.PopularCategories.url({}),method:s.A.PopularCategories.method}))}}class n{static getAllCategories(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return i.getAllCategories(e,t)}))}static searchCategory(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return i.searchCategory(e,t)}))}static createCategory(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return i.createCategory(e,t)}))}static getSpecificCategory(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return i.getSpecificCategory(e,t)}))}static updateASpecificCategory(e,t,o){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return i.updateASpecificCategory(e,t,o)}))}static patchASpecificCategory(e,t,o){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return i.patchASpecificCategory(e,t,o)}))}static deleteASpecificCategory(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return i.deleteASpecificCategory(e,t)}))}static getCategoryAudience(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return i.getCategoryAudience(e,t)}))}static getCategoryFollowers(e,t,o){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return i.getCategoryFollowers(e,t,o)}))}static getCategoryFeed(e,t,o){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return i.getCategoryFeed(e,t,o)}))}static getCategoryTrendingFeed(e,t,o){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return i.getCategoryTrendingFeed(e,t,o)}))}static getCategoryTrendingFollowers(e,t,o){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return i.getCategoryTrendingFollowers(e,t,o)}))}static followCategory(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return i.followCategory(e,t)}))}static checkCategoryIsFollowed(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return i.checkCategoryIsFollowed(e,t)}))}static getFollowedCategories(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return i.getFollowedCategories(e,t)}))}static getPopularCategories(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return i.getPopularCategories(e,t)}))}}},28692:(e,t,o)=>{o.d(t,{Ay:()=>s,So:()=>r});var r;!function(e){e.CACHE_FIRST="Cache-first",e.NETWORK_ONLY="Network-only",e.STALE_WHILE_REVALIDATE="Stale-While-Revalidate"}(r||(r={}));const s=new class{constructor(e=1e4){this.values=new Map,this.maxEntries=e,this.ssr="undefined"==typeof window,this.ssr||(window.__viewSCCache=this.values)}get(e,t,o={noSsr:!0}){let r;return this.values.has(e)?(r=this.values.get(e),this.values.delete(e),this.values.set(e,r)):t&&(r=t,(!this.ssr||!o.noSsr)&&this.values.set(e,r)),r}set(e,t,o={noSsr:!0}){if(!this.ssr||!o.noSsr){if(this.values.size>=this.maxEntries){const e=this.values.keys().next().value;this.values.delete(e)}this.values.set(e,t)}}hasKey(e){return this.values.has(e)}delete(e){this.values.has(e)&&this.values.delete(e)}deleteKeys(e){e.forEach((e=>{this.values.has(e)&&this.values.delete(e)}))}deleteKeysWithPrefix(e){this.values.forEach(((t,o)=>{o.startsWith(e)&&this.values.delete(o)}))}clean(){this.values=new Map}evaluate(){console.log(this.values)}}},29251:(e,t,o)=>{o.d(t,{A:()=>j});var r=o(31635),s=o(74848),a=o(19546),i=o.n(a),n=o(11848),l=o(46831),c=o(44675),d=o(90508),u=o(4671),g=o(40059),h=o(77037),m=o(28968),p=o(15993),_=o(5448);const C="SCBaseDialog",A={root:`${C}-root`,titleRoot:`${C}-title-root`},f=(0,n.Ay)(l.A,{name:C,slot:"Root",overridesResolver:(e,t)=>t.titleRoot})((({theme:e})=>({}))),y=({children:e=null,onClose:t=null})=>{const o=(0,c.A)(),r=(0,d.A)(o.breakpoints.down("md"),{noSsr:(0,_.Nh)()});return(0,s.jsxs)(f,Object.assign({className:A.titleRoot},{children:[(0,s.jsx)("span",{children:e}),t?(0,s.jsx)(u.A,Object.assign({"aria-label":"close",onClick:t},{children:(0,s.jsx)(g.A,{children:r?"arrow_back":"close"})})):null]}))},v=(0,n.Ay)(h.A,{name:C,slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({})));const j=function(e){const t=(0,c.A)(),o=(0,d.A)(t.breakpoints.down("md"),{noSsr:(0,_.Nh)()}),a=o,{className:n="",title:l="",subtitle:u=null,DialogContentProps:g={dividers:!o},open:h=!1,onClose:C=null,actions:f=null,children:j,maxWidth:w="sm",scroll:b="body"}=e,x=(0,r.__rest)(e,["className","title","subtitle","DialogContentProps","open","onClose","actions","children","maxWidth","scroll"]);return(0,s.jsxs)(v,Object.assign({className:i()(A.root,n),fullScreen:a,fullWidth:!0,open:h,onClose:C,maxWidth:w,scroll:b},x,{children:[(0,s.jsx)(y,Object.assign({onClose:C},{children:l})),u&&u,(0,s.jsx)(m.A,Object.assign({},g,{children:j})),f&&(0,s.jsx)(p.A,{children:f})]}))}},36175:(e,t,o)=>{o.d(t,{F:()=>r});const r={user:{username:"beatrice",password:"Password!!Beatrice2021",client_id:"XJjPE54IBBjhibs0Rf0wZ969cZNPq6WjC02FrkaM",grant_type:"password"},portal:"https://internal.selfcommunity.io/mkg2zxd0"}},37180:(e,t,o)=>{o.d(t,{A:()=>h});var r=o(96540),s=o(36175),a=o(75251);function i(e,t){void 0===e&&(e=""),void 0===t&&(t={});const o=Object.keys(t).map((e=>encodeURIComponent(e)+"="+encodeURIComponent(t[e]))).join("&");return fetch(e,{method:"POST",headers:{accept:"application/json","content-type":"application/x-www-form-urlencoded"},body:o})}function n(){if((0,a.A)()){const e={refresh_token:JSON.parse(window.localStorage.getItem("token")).refresh_token,client_id:s.F.user.client_id,grant_type:"refresh_token"};return i(`${s.F.portal}/oauth/token/`,e).then((e=>e.json())).then((e=>({accessToken:e.access_token,refreshToken:e.refresh_token,tokenType:e.token_type,expiresIn:e.expires_in}))).catch((e=>Promise.reject(e)))}}function l(){const e=(0,a.A)(),[t,o]=(0,r.useState)(e?JSON.parse(window.localStorage.getItem("token")):"");return(0,r.useEffect)((()=>{e&&(!t||1e3*t.expiresIn<Date.now()?i(`${s.F.portal}/oauth/token/`,s.F.user).then((e=>e.json())).then((e=>({accessToken:e.access_token,refreshToken:e.refresh_token,tokenType:e.token_type,expiresIn:e.expires_in}))).catch((e=>e)).then((e=>{o(e)})):e&&o(JSON.parse(window.localStorage.getItem("token"))))}),[e]),(0,r.useEffect)((()=>{e&&window.localStorage.setItem("token",JSON.stringify(t))}),[e,t]),t}var c=o(45284),d=o(28554),u=o(73906),g=o(74848);function h(e){let{children:t}=e;const o=l(),r={portal:s.F.portal,locale:{default:"en"},session:{type:"OAuth",clientId:s.F.user.client_id,authToken:o,handleRefreshToken:n},theme:d.Ay,handleAnonymousAction:()=>{alert("Anonymous action")}};return(0,g.jsx)(u.A,{children:()=>(0,g.jsx)(c.Ay,{conf:r,children:t})})}},71194:(e,t,o)=>{o.d(t,{A:()=>f});var r=o(59703),s=o(85486),a=o(96540),i=o(54533),n=o(11659),l=o(13168),c=o(99918),d=o(75131),u=o(74848);const g=["className","component"];var h=o(79071),m=o(58964),p=o(58312);const _=(0,o(38413).A)("MuiBox",["root"]),C=(0,m.A)(),A=function(e={}){const{themeId:t,defaultTheme:o,defaultClassName:h="MuiBox-root",generateClassName:m}=e,p=(0,n.default)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(l.A);return a.forwardRef((function(e,a){const n=(0,d.A)(o),l=(0,c.A)(e),{className:_,component:C="div"}=l,A=(0,s.A)(l,g);return(0,u.jsx)(p,(0,r.A)({as:C,ref:a,className:(0,i.A)(_,m?m(h):h),theme:t&&n[t]||n},A))}))}({themeId:p.A,defaultTheme:C,defaultClassName:_.root,generateClassName:h.A.generate}),f=A},86354:(e,t,o)=>{o.d(t,{$M:()=>U,$l:()=>i,B4:()=>W,Gb:()=>E,I$:()=>m,Jl:()=>j,MI:()=>n,Mt:()=>x,N$:()=>z,N7:()=>I,NH:()=>S,OO:()=>_,OQ:()=>A,QO:()=>y,SB:()=>T,SP:()=>b,T4:()=>h,Vm:()=>k,WG:()=>d,ar:()=>s,cn:()=>g,fL:()=>c,fq:()=>u,g8:()=>q,gN:()=>f,hI:()=>l,hl:()=>$,ih:()=>L,io:()=>N,iu:()=>R,j$:()=>w,j3:()=>Q,lG:()=>r,lV:()=>M,n7:()=>v,oF:()=>F,ss:()=>O,v$:()=>p,vJ:()=>D,zM:()=>B,zp:()=>P});const r=(e,t)=>`_fo_${t}_${e}`,s=e=>`_co_${e}`,a="_cos_",i=(e,t,o)=>`${a}${t}_${e}_${o}`,n=(e,t)=>`${a}${t}_${e}`,l=()=>"_cas_",c=e=>`_ca_${e}`,d=e=>`_crs_${e}`,u=e=>`_evt_${e}`,g=()=>"_evts_",h=e=>`_liveStream_${e}`,m=e=>`_grp_${e}`,p=()=>"_grps_",_=e=>`_inc_${e}`,C="_contr_",A=(e,t,o)=>`${C}${t}_${e}_${o}`,f=()=>"_bcms_",y=(e,t)=>`_feed_${e}_${t}`,v=e=>`_feed_st_${e}`,j=e=>`_virtualized_scroll_st_${e}`,w=e=>`_feed_spos_${e}`,b=e=>`_adv_${e}`,x=()=>"_pmss_",S=e=>`_pms_${e}`,E="_cFolWidget_",O="_cSugWidget_",P="_cPopWidget_",T="_uFolWidget_",k="_uFoldWidget_",N="_uCreCoursesWidget_",R="_uUserLives_",F="_uConWidget_",W="_uConReqWidget_",M="_uConReqSentWidget_",$="_fTrendWidget_",I="_rFeedWidget_",L="_pTrendWidget_",D="_pSugWidget_",B="_iListWidget_",U="_iSugWidget_",z="_pSugWidget_",q="_gSubWidget_",Q=(e,t=void 0)=>`${e}${void 0!==t?t:""}`},88454:(e,t,o)=>{var r,s,a,i;o.d(t,{Gl:()=>s,wW:()=>a,xq:()=>i,yt:()=>r}),function(e){e.COURSE="course",e.GROUP="group",e.EVENT="event",e.CATEGORY="category"}(r||(r={})),function(e){e.CREATE="create",e.EDIT="edit",e.DELETE="delete",e.UPDATE="update",e.MEMBERS="members",e.ADD_MEMBER="members.add_member",e.INVITE_MEMBER="members.invite_member",e.REMOVE_MEMBER="members.remove_member"}(s||(s={})),function(e){e.CREATE="create",e.EDIT="edit",e.DELETE="delete",e.ADD_MEMBER="members.add_member",e.INVITE_MEMBER="members.invite_member",e.REMOVE_MEMBER="members.remove_member",e.REJECT_MEMBER="members.reject_member"}(a||(a={})),function(e){e.EDIT="edit"}(i||(i={}))},91959:(e,t,o)=>{o.d(t,{A:()=>H});var r=o(31635),s=o(74848),a=o(96540),i=o(11848),n=o(44675),l=o(90508),c=o(25292),d=o(47859),u=o(28820),g=o(36870),h=o(42942),m=o(27202),p=o(13550),_=o(29368),C=o(28692),A=o(94520),f=o(21810);const y="SCCategoriesPopularWidget",v={root:`${y}-skeleton-root`},j=(0,i.Ay)(f.A,{name:y,slot:"SkeletonRoot"})((()=>({})));function w(e){return(0,s.jsx)(j,Object.assign({className:v.root},e))}var b=o(15906),x=o(58065),S=o(54374),E=o(44806),O=o(19546),P=o.n(O),T=o(29251),k=o(43749),N=o(86857),R=o(79197),F=o(9063),W=o(2877),M=o(75753),$=o(3338),I=o(86354),L=o(45949),D=o(23224),B=o.n(D),U=o(88454);const z={root:`${y}-root`,title:`${y}-title`,noResults:`${y}-no-results`,showMore:`${y}-show-more`,dialogRoot:`${y}-dialog-root`,endMessage:`${y}-end-message`},q=(0,i.Ay)(N.A,{name:y,slot:"Root"})((()=>({}))),Q=(0,i.Ay)(T.A,{name:y,slot:"DialogRoot"})((()=>({})));const H=function(e){const t=(0,R.A)({props:e,name:y}),{autoHide:o=!0,limit:i=3,className:f,CategoryProps:v={},cacheStrategy:j=C.So.CACHE_FIRST,onHeightChange:O,onStateChange:T,DialogProps:N={},categoryId:D}=t,H=(0,r.__rest)(t,["autoHide","limit","className","CategoryProps","cacheStrategy","onHeightChange","onStateChange","DialogProps","categoryId"]),V=(0,a.useContext)(W.T6),G=(0,a.useContext)(M.ql),J=(0,a.useMemo)((()=>$.g4 in G.preferences&&G.preferences[$.g4].value),[G]),[X,K]=(0,a.useReducer)(L.r6,{isLoadingNext:!1,next:null,cacheKey:I.j3(I.zp),cacheStrategy:j,visibleItems:i},L.Ox),[Y,Z]=(0,a.useState)(!1),ee=(0,n.A)(),te=(0,l.A)(ee.breakpoints.down("md")),oe=(0,a.useRef)(null),re=(0,a.useMemo)((()=>()=>{X.initialized||X.isLoadingNext||(K({type:L.Qd.LOADING_NEXT}),m.A.getPopularCategories({limit:i}).then((e=>{K({type:L.Qd.LOAD_NEXT_SUCCESS,payload:Object.assign(Object.assign({},e),{initialized:!0})})})).catch((e=>{K({type:L.Qd.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),A.V.error(b.d,e)})))}),[X.isLoadingNext,X.initialized,i,K]),se=(0,a.useCallback)(((e,t)=>{const o=[...X.results].map((e=>e.id===t.id?Object.assign(Object.assign({},e),t):e));K({type:L.Qd.SET_RESULTS,payload:{results:o}})}),[K,X.results]);(0,a.useEffect)((()=>(oe.current=B().subscribe(`${U.yt.CATEGORY}.${U.xq.EDIT}`,se),()=>{oe.current&&B().unsubscribe(oe.current)})),[se]),(0,a.useEffect)((()=>{var e;let t;if(void 0!==V.user&&(J||!J&&(null===(e=V.user)||void 0===e?void 0:e.id)))return t=setTimeout(re),()=>{t&&clearTimeout(t)}}),[V.user,J]),(0,a.useEffect)((()=>{Y&&X.next&&X.initialized&&X.results.length===i&&m.A.getPopularCategories({offset:i,limit:10}).then((e=>{K({type:L.Qd.LOAD_NEXT_SUCCESS,payload:e})})).catch((e=>{K({type:L.Qd.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),A.V.error(b.d,e)}))}),[Y,i,X.next,X.initialized,X.results.length]),(0,a.useEffect)((()=>{O&&O()}),[X.results]),(0,a.useEffect)((()=>{(J||V.user)&&j===C.So.NETWORK_ONLY&&T&&T({cacheStrategy:C.So.CACHE_FIRST})}),[J,j,V.user]);const ae=(0,a.useMemo)((()=>()=>{K({type:L.Qd.LOADING_NEXT}),p.A.request({url:X.next,method:_.A.PopularCategories.method}).then((e=>{K({type:L.Qd.LOAD_NEXT_SUCCESS,payload:e.data})}))}),[K,X.next,X.isLoadingNext,X.initialized]),ie=e=>{const t=[...X.results],o=t.findIndex((t=>t.id===e.id));-1!==o&&(e.followed?(t[o].followers_counter=e.followers_counter-1,t[o].followed=!e.followed):(t[o].followers_counter=e.followers_counter+1,t[o].followed=!e.followed),K({type:L.Qd.SET_RESULTS,payload:{results:t}}))},ne=()=>{Z((e=>!e))};if(!J&&!V.user||X.initialized&&o&&!X.count)return(0,s.jsx)(F.A,{});if(!X.initialized)return(0,s.jsx)(w,{});const le=(0,s.jsxs)(c.A,{children:[(0,s.jsx)(d.A,Object.assign({className:z.title,variant:"h5"},{children:(0,s.jsx)(x.A,{id:"ui.categoriesPopularWidget.title",defaultMessage:"ui.categoriesPopularWidget.title"})})),X.count?(0,s.jsxs)(a.Fragment,{children:[(0,s.jsx)(u.A,{children:X.results.slice(0,X.visibleItems).map((e=>(0,s.jsx)(g.Ay,{children:(0,s.jsx)(S.A,Object.assign({elevation:0,category:e,categoryFollowButtonProps:{onFollow:ie}},v))},e.id)))}),X.count>X.visibleItems&&(0,s.jsx)(h.A,Object.assign({className:z.showMore,onClick:ne},{children:(0,s.jsx)(x.A,{id:"ui.categoriesPopularWidget.button.showAll",defaultMessage:"ui.categoriesPopularWidget.button.showAll"})}))]}):(0,s.jsx)(d.A,Object.assign({className:z.noResults,variant:"body2"},{children:(0,s.jsx)(x.A,{id:"ui.categoriesPopularWidget.noResults",defaultMessage:"ui.categoriesPopularWidget.noResults"})})),Y&&(0,s.jsx)(Q,Object.assign({className:z.dialogRoot,title:(0,s.jsx)(x.A,{defaultMessage:"ui.categoriesPopularWidget.title",id:"ui.categoriesPopularWidget.title"}),onClose:ne,open:Y},N,{children:(0,s.jsx)(k.A,Object.assign({dataLength:X.results.length,next:ae,hasMoreNext:Boolean(X.next),loaderNext:(0,s.jsx)(E.A,Object.assign({elevation:0},v)),height:te?"100%":400,endMessage:(0,s.jsx)(d.A,Object.assign({className:z.endMessage},{children:(0,s.jsx)(x.A,{id:"ui.categoriesPopularWidget.noMoreResults",defaultMessage:"ui.categoriesPopularWidget.noMoreResults"})}))},{children:(0,s.jsx)(u.A,{children:X.results.map((e=>(0,s.jsx)(g.Ay,{children:(0,s.jsx)(S.A,Object.assign({elevation:0,category:e},v,{categoryFollowButtonProps:{onFollow:ie}}))},e.id)))})}))}))]});return(0,s.jsx)(q,Object.assign({className:P()(z.root,f)},H,{children:le}))}}}]);