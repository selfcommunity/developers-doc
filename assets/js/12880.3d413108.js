(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[12880],{87109:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var r=n(80102),o=n(83117),i=n(67294),s=n(63961),l=n(58510),a=n(98216),c=n(15861),u=n(47167),d=n(74423),f=n(90948),h=n(1977),g=n(8027);function p(e){return(0,g.ZP)("MuiInputAdornment",e)}const m=(0,h.Z)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var _,y=n(71657),v=n(85893);const x=["children","className","component","disablePointerEvents","disableTypography","position","variant"],b=(0,f.ZP)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${(0,a.Z)(n.position)}`],!0===n.disablePointerEvents&&t.disablePointerEvents,t[n.variant]]}})((({theme:e,ownerState:t})=>(0,o.Z)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active},"filled"===t.variant&&{[`&.${m.positionStart}&:not(.${m.hiddenLabel})`]:{marginTop:16}},"start"===t.position&&{marginRight:8},"end"===t.position&&{marginLeft:8},!0===t.disablePointerEvents&&{pointerEvents:"none"}))),C=i.forwardRef((function(e,t){const n=(0,y.Z)({props:e,name:"MuiInputAdornment"}),{children:f,className:h,component:g="div",disablePointerEvents:m=!1,disableTypography:C=!1,position:S,variant:w}=n,k=(0,r.Z)(n,x),E=(0,d.Z)()||{};let T=w;w&&E.variant,E&&!T&&(T=E.variant);const N=(0,o.Z)({},n,{hiddenLabel:E.hiddenLabel,size:E.size,disablePointerEvents:m,position:S,variant:T}),O=(e=>{const{classes:t,disablePointerEvents:n,hiddenLabel:r,position:o,size:i,variant:s}=e,c={root:["root",n&&"disablePointerEvents",o&&`position${(0,a.Z)(o)}`,s,r&&"hiddenLabel",i&&`size${(0,a.Z)(i)}`]};return(0,l.Z)(c,p,t)})(N);return(0,v.jsx)(u.Z.Provider,{value:null,children:(0,v.jsx)(b,(0,o.Z)({as:g,ownerState:N,className:(0,s.Z)(O.root,h),ref:t},k,{children:"string"!=typeof f||C?(0,v.jsxs)(i.Fragment,{children:["start"===S?_||(_=(0,v.jsx)("span",{className:"notranslate",children:"\u200b"})):null,f]}):(0,v.jsx)(c.Z,{color:"text.secondary",children:f})}))})}))},47120:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var r=n(80102),o=n(83117),i=n(67294),s=n(63961),l=n(62236),a=n(58510),c=n(41796),u=n(49990),d=n(98216),f=n(71657),h=n(90948),g=n(73138),p=n(32163),m=n(30362);function _(e,t){return void 0!==t&&void 0!==e&&(Array.isArray(t)?t.indexOf(e)>=0:e===t)}var y=n(85893);const v=["value"],x=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],b=(0,h.ZP)(u.Z,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`size${(0,d.Z)(n.size)}`]]}})((({theme:e,ownerState:t})=>{let n,r="standard"===t.color?e.palette.text.primary:e.palette[t.color].main;return e.vars&&(r="standard"===t.color?e.vars.palette.text.primary:e.vars.palette[t.color].main,n="standard"===t.color?e.vars.palette.text.primaryChannel:e.vars.palette[t.color].mainChannel),(0,o.Z)({},e.typography.button,{borderRadius:(e.vars||e).shape.borderRadius,padding:11,border:`1px solid ${(e.vars||e).palette.divider}`,color:(e.vars||e).palette.action.active},t.fullWidth&&{width:"100%"},{[`&.${g.Z.disabled}`]:{color:(e.vars||e).palette.action.disabled,border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,c.Fq)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${g.Z.selected}`]:{color:r,backgroundColor:e.vars?`rgba(${n} / ${e.vars.palette.action.selectedOpacity})`:(0,c.Fq)(r,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${n} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,c.Fq)(r,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${n} / ${e.vars.palette.action.selectedOpacity})`:(0,c.Fq)(r,e.palette.action.selectedOpacity)}}}},"small"===t.size&&{padding:7,fontSize:e.typography.pxToRem(13)},"large"===t.size&&{padding:15,fontSize:e.typography.pxToRem(15)})})),C=i.forwardRef((function(e,t){const n=i.useContext(p.Z),{value:c}=n,u=(0,r.Z)(n,v),h=i.useContext(m.Z),C=(0,l.Z)((0,o.Z)({},u,{selected:_(e.value,c)}),e),S=(0,f.Z)({props:C,name:"MuiToggleButton"}),{children:w,className:k,color:E="standard",disabled:T=!1,disableFocusRipple:N=!1,fullWidth:O=!1,onChange:P,onClick:L,selected:A,size:D="medium",value:M}=S,F=(0,r.Z)(S,x),B=(0,o.Z)({},S,{color:E,disabled:T,disableFocusRipple:N,fullWidth:O,size:D}),I=(e=>{const{classes:t,fullWidth:n,selected:r,disabled:o,size:i,color:s}=e,l={root:["root",r&&"selected",o&&"disabled",n&&"fullWidth",`size${(0,d.Z)(i)}`,s]};return(0,a.Z)(l,g.a,t)})(B),R=h||"";return(0,y.jsx)(b,(0,o.Z)({className:(0,s.Z)(u.className,I.root,k,R),disabled:T,focusRipple:!N,ref:t,onClick:e=>{L&&(L(e,M),e.defaultPrevented)||P&&P(e,M)},onChange:P,value:M,ownerState:B,"aria-pressed":A},F,{children:w}))}))},73138:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s,a:()=>i});var r=n(1977),o=n(8027);function i(e){return(0,o.ZP)("MuiToggleButton",e)}const s=(0,r.Z)("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"])},67416:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n(80102),o=n(83117),i=n(67294),s=(n(76607),n(63961)),l=n(58510);var a=n(90948),c=n(71657),u=n(98216),d=n(1977),f=n(8027);function h(e){return(0,f.ZP)("MuiToggleButtonGroup",e)}const g=(0,d.Z)("MuiToggleButtonGroup",["root","selected","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]);var p=n(32163),m=n(30362),_=n(73138),y=n(85893);const v=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],x=(0,a.ZP)("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${g.grouped}`]:t.grouped},{[`& .${g.grouped}`]:t[`grouped${(0,u.Z)(n.orientation)}`]},{[`& .${g.firstButton}`]:t.firstButton},{[`& .${g.lastButton}`]:t.lastButton},{[`& .${g.middleButton}`]:t.middleButton},t.root,"vertical"===n.orientation&&t.vertical,n.fullWidth&&t.fullWidth]}})((({ownerState:e,theme:t})=>(0,o.Z)({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},"vertical"===e.orientation&&{flexDirection:"column"},e.fullWidth&&{width:"100%"},{[`& .${g.grouped}`]:(0,o.Z)({},"horizontal"===e.orientation?{[`&.${g.selected} + .${g.grouped}.${g.selected}`]:{borderLeft:0,marginLeft:0}}:{[`&.${g.selected} + .${g.grouped}.${g.selected}`]:{borderTop:0,marginTop:0}})},"horizontal"===e.orientation?{[`& .${g.firstButton},& .${g.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${g.lastButton},& .${g.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}}:{[`& .${g.firstButton},& .${g.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${g.lastButton},& .${g.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0}},"horizontal"===e.orientation?{[`& .${g.lastButton}.${_.Z.disabled},& .${g.middleButton}.${_.Z.disabled}`]:{borderLeft:"1px solid transparent"}}:{[`& .${g.lastButton}.${_.Z.disabled},& .${g.middleButton}.${_.Z.disabled}`]:{borderTop:"1px solid transparent"}}))),b=i.forwardRef((function(e,t){const n=(0,c.Z)({props:e,name:"MuiToggleButtonGroup"}),{children:a,className:d,color:f="standard",disabled:g=!1,exclusive:_=!1,fullWidth:b=!1,onChange:C,orientation:S="horizontal",size:w="medium",value:k}=n,E=(0,r.Z)(n,v),T=(0,o.Z)({},n,{disabled:g,fullWidth:b,orientation:S,size:w}),N=(e=>{const{classes:t,orientation:n,fullWidth:r,disabled:o}=e,i={root:["root","vertical"===n&&"vertical",r&&"fullWidth"],grouped:["grouped",`grouped${(0,u.Z)(n)}`,o&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return(0,l.Z)(i,h,t)})(T),O=i.useCallback(((e,t)=>{if(!C)return;const n=k&&k.indexOf(t);let r;k&&n>=0?(r=k.slice(),r.splice(n,1)):r=k?k.concat(t):[t],C(e,r)}),[C,k]),P=i.useCallback(((e,t)=>{C&&C(e,k===t?null:t)}),[C,k]),L=i.useMemo((()=>({className:N.grouped,onChange:_?P:O,value:k,size:w,fullWidth:b,color:f,disabled:g})),[N.grouped,_,P,O,k,w,b,f,g]),A=function(e){return i.Children.toArray(e).filter((e=>i.isValidElement(e)))}(a),D=A.length,M=e=>{const t=0===e,n=e===D-1;return t&&n?"":t?N.firstButton:n?N.lastButton:N.middleButton};return(0,y.jsx)(x,(0,o.Z)({role:"group",className:(0,s.Z)(N.root,d),ref:t,ownerState:T},E,{children:(0,y.jsx)(p.Z.Provider,{value:L,children:A.map(((e,t)=>(0,y.jsx)(m.Z.Provider,{value:M(t),children:e},t)))})}))}))},30362:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(67294).createContext(void 0)},32163:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(67294).createContext({})},12880:(e,t,n)=>{"use strict";n.d(t,{Z:()=>so});var r=n(67294),o=n(90948),i=n(44012),s=n(5616),l=n(68269),a=n(94184),c=n.n(a),u=n(29628),d=n(61084);var f=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}((function(e){const t=new URLSearchParams;t.append("code",e);for(let n=1;n<arguments.length;n++)t.append("v",arguments[n]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}));const h="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,g=h&&"documentMode"in document?document.documentMode:null,p=(h&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),h&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),!(!h||!("InputEvent"in window)||g)&&new window.InputEvent("input"),h&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),h&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&window.MSStream,h&&/Android/.test(navigator.userAgent),h&&/^(?=.*Chrome).*/i.test(navigator.userAgent));h&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent);function m(...e){const t=[];for(const n of e)if(n&&"string"==typeof n)for(const[e]of n.matchAll(/\S+/g))t.push(e);return t}function _(...e){return()=>{e.forEach((e=>e()))}}function y(e,...t){const n=m(...t);n.length>0&&e.classList.add(...n)}function v(e,...t){const n=m(...t);n.length>0&&e.classList.remove(...n)}function x(e,t){let n=e;for(;null!=n;){if(n instanceof t)return n;n=n.getParent()}return null}function b(e){const t=C(e,(e=>(0,d.F7)(e)&&!e.isInline()));return(0,d.F7)(t)||f(4,e.__key),t}const C=(e,t)=>{let n=e;for(;n!==(0,d.Gv)()&&null!=n;){if(t(n))return n;n=n.getParent()}return null};function S(e){const t=(0,d.dL)()||(0,d.DN)();if((0,d.OP)(t)){const{focus:n}=t,r=n.getNode(),o=n.offset;if((0,d._v)(r)){const t=r.getChildAtIndex(o);null==t?r.append(e):t.insertBefore(e),e.selectNext()}else{let t,n;(0,d.Gg)(r)?(t=r.getParentOrThrow(),n=r.getIndexWithinParent(),o>0&&(n+=1,r.splitText(o))):(t=r,n=o);const[,i]=(0,d.z9)(t,n);i.insertBefore(e),i.selectStart()}}else{if(null!=t){const n=t.getNodes();n[n.length-1].getTopLevelElementOrThrow().insertAfter(e)}else(0,d.Gv)().append(e);const n=(0,d.BE)();e.insertAfter(n),n.select()}return e.getLatest()}function w(e,t){return null!==e&&Object.getPrototypeOf(e).constructor.name===t.name}const k=new Set(["http:","https:","mailto:","sms:","tel:"]);class E extends d.HX{static getType(){return"link"}static clone(e){return new E(e.__url,{rel:e.__rel,target:e.__target,title:e.__title},e.__key)}constructor(e,t={},n){super(n);const{target:r=null,rel:o=null,title:i=null}=t;this.__url=e,this.__target=r,this.__rel=o,this.__title=i}createDOM(e){const t=document.createElement("a");return t.href=this.sanitizeUrl(this.__url),null!==this.__target&&(t.target=this.__target),null!==this.__rel&&(t.rel=this.__rel),null!==this.__title&&(t.title=this.__title),y(t,e.theme.link),t}updateDOM(e,t,n){const r=this.__url,o=this.__target,i=this.__rel,s=this.__title;return r!==e.__url&&(t.href=r),o!==e.__target&&(o?t.target=o:t.removeAttribute("target")),i!==e.__rel&&(i?t.rel=i:t.removeAttribute("rel")),s!==e.__title&&(s?t.title=s:t.removeAttribute("title")),!1}static importDOM(){return{a:e=>({conversion:T,priority:1})}}static importJSON(e){const t=N(e.url,{rel:e.rel,target:e.target,title:e.title});return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}sanitizeUrl(e){try{const t=new URL(e);if(!k.has(t.protocol))return"about:blank"}catch(t){return e}return e}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),type:"link",url:this.getURL(),version:1}}getURL(){return this.getLatest().__url}setURL(e){this.getWritable().__url=e}getTarget(){return this.getLatest().__target}setTarget(e){this.getWritable().__target=e}getRel(){return this.getLatest().__rel}setRel(e){this.getWritable().__rel=e}getTitle(){return this.getLatest().__title}setTitle(e){this.getWritable().__title=e}insertNewAfter(e,t=!0){const n=N(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(n,t),n}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,t,n){if(!(0,d.OP)(t))return!1;const r=t.anchor.getNode(),o=t.focus.getNode();return this.isParentOf(r)&&this.isParentOf(o)&&t.getTextContent().length>0}}function T(e){let t=null;if((0,d.bg)(e)){const n=e.textContent;(null!==n&&""!==n||e.children.length>0)&&(t=N(e.getAttribute("href")||"",{rel:e.getAttribute("rel"),target:e.getAttribute("target"),title:e.getAttribute("title")}))}return{node:t}}function N(e,t){return(0,d.U2)(new E(e,t))}function O(e){return e instanceof E}class P extends E{static getType(){return"autolink"}static clone(e){return new P(e.__url,{rel:e.__rel,target:e.__target,title:e.__title},e.__key)}static importJSON(e){const t=L(e.url,{rel:e.rel,target:e.target,title:e.title});return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),type:"autolink",version:1}}insertNewAfter(e,t=!0){const n=this.getParentOrThrow().insertNewAfter(e,t);if((0,d.F7)(n)){const e=L(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return n.append(e),e}return null}}function L(e,t){return(0,d.U2)(new P(e,t))}function A(e){return e instanceof P}const D=(0,d.fA)("TOGGLE_LINK_COMMAND");function M(e,t={}){const{target:n,title:r}=t,o=void 0===t.rel?"noreferrer":t.rel,i=(0,d.dL)();if(!(0,d.OP)(i))return;const s=i.extract();if(null===e)s.forEach((e=>{const t=e.getParent();if(O(t)){const e=t.getChildren();for(let n=0;n<e.length;n++)t.insertBefore(e[n]);t.remove()}}));else{if(1===s.length){const t=function(e,t){let n=e;for(;null!==n&&null!==n.getParent()&&!t(n);)n=n.getParentOrThrow();return t(n)?n:null}(s[0],O);if(null!==t)return t.setURL(e),void 0!==n&&t.setTarget(n),null!==o&&t.setRel(o),void(void 0!==r&&t.setTitle(r))}let t=null,i=null;s.forEach((s=>{const l=s.getParent();if(l!==i&&null!==l&&(!(0,d.F7)(s)||s.isInline())){if(O(l))return i=l,l.setURL(e),void 0!==n&&l.setTarget(n),null!==o&&i.setRel(o),void(void 0!==r&&i.setTitle(r));if(l.is(t)||(t=l,i=N(e,{rel:o,target:n,title:r}),O(l)?null===s.getPreviousSibling()?l.insertBefore(i):l.insertAfter(i):s.insertBefore(i)),O(s)){if(s.is(i))return;if(null!==i){const e=s.getChildren();for(let t=0;t<e.length;t++)i.append(e[t])}s.remove()}else null!==i&&i.append(s)}}))}}var F=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}((function(e){const t=new URLSearchParams;t.append("code",e);for(let n=1;n<arguments.length;n++)t.append("v",arguments[n]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}));function B(e){let t=e.getParent();se(t)||F(40);let n=t;for(;null!==n;)n=n.getParent(),se(n)&&(t=n);return t}function I(e){let t=[];const n=e.getChildren().filter(Q);for(let r=0;r<n.length;r++){const e=n[r],o=e.getFirstChild();se(o)?t=t.concat(I(o)):t.push(e)}return t}function R(e){return Q(e)&&se(e.getFirstChild())}function z(e){return Y().append(e)}function $(e,t){return Q(e)&&(0===t.length||1===t.length&&e.is(t[0])&&0===e.getChildrenSize())}function W(e,t){e.update((()=>{const e=(0,d.dL)();if(null!==e){const n=e.getNodes();if((0,d.OP)(e)){const r=e.getStartEndPoints();null===r&&F(143);const[o]=r,i=o.getNode(),s=i.getParent();if($(i,n)){const e=ie(t);if((0,d._v)(s)){i.replace(e);const t=Y();(0,d.F7)(i)&&(t.setFormat(i.getFormatType()),t.setIndent(i.getIndent())),e.append(t)}else if(Q(i)){const t=i.getParentOrThrow();Z(e,t.getChildren()),t.replace(e)}return}}const r=new Set;for(let e=0;e<n.length;e++){const o=n[e];if(!(0,d.F7)(o)||!o.isEmpty()||Q(o)||r.has(o.getKey())){if((0,d.H2)(o)){let e=o.getParent();for(;null!=e;){const n=e.getKey();if(se(e)){if(!r.has(n)){const o=ie(t);Z(o,e.getChildren()),e.replace(o),r.add(n)}break}{const o=e.getParent();if((0,d._v)(o)&&!r.has(n)){r.add(n),K(e,t);break}e=o}}}}else K(o,t)}}}))}function Z(e,t){e.splice(e.getChildrenSize(),0,t)}function K(e,t){if(se(e))return e;const n=e.getPreviousSibling(),r=e.getNextSibling(),o=Y();if(o.setFormat(e.getFormatType()),o.setIndent(e.getIndent()),Z(o,e.getChildren()),se(n)&&t===n.getListType())return n.append(o),e.remove(),se(r)&&t===r.getListType()&&(Z(n,r.getChildren()),r.remove()),n;if(se(r)&&t===r.getListType())return r.getFirstChildOrThrow().insertBefore(o),e.remove(),r;{const n=ie(t);return n.append(o),e.replace(n),n}}function U(e,t){const n=e.getLastChild(),r=t.getFirstChild();n&&r&&R(n)&&R(r)&&(U(n.getFirstChild(),r.getFirstChild()),r.remove());const o=t.getChildren();o.length>0&&e.append(...o),t.remove()}function j(e){const t=new Set;if(R(e)||t.has(e.getKey()))return;const n=e.getParent(),r=e.getNextSibling(),o=e.getPreviousSibling();if(R(r)&&R(o)){const n=o.getFirstChild();if(se(n)){n.append(e);const o=r.getFirstChild();se(o)&&(Z(n,o.getChildren()),r.remove(),t.add(r.getKey()))}}else if(R(r)){const t=r.getFirstChild();if(se(t)){const n=t.getFirstChild();null!==n&&n.insertBefore(e)}}else if(R(o)){const t=o.getFirstChild();se(t)&&t.append(e)}else if(se(n)){const t=Y(),i=ie(n.getListType());t.append(i),i.append(e),o?o.insertAfter(t):r?r.insertBefore(t):n.append(t)}}function V(e){if(R(e))return;const t=e.getParent(),n=t?t.getParent():void 0;if(se(n?n.getParent():void 0)&&Q(n)&&se(t)){const r=t?t.getFirstChild():void 0,o=t?t.getLastChild():void 0;if(e.is(r))n.insertBefore(e),t.isEmpty()&&n.remove();else if(e.is(o))n.insertAfter(e),t.isEmpty()&&n.remove();else{const r=t.getListType(),o=Y(),i=ie(r);o.append(i),e.getPreviousSiblings().forEach((e=>i.append(e)));const s=Y(),l=ie(r);s.append(l),Z(l,e.getNextSiblings()),n.insertBefore(o),n.insertAfter(s),n.replace(e)}}}function J(...e){const t=[];for(const n of e)if(n&&"string"==typeof n)for(const[e]of n.matchAll(/\S+/g))t.push(e);return t}class H extends d.HX{static getType(){return"listitem"}static clone(e){return new H(e.__value,e.__checked,e.__key)}constructor(e,t,n){super(n),this.__value=void 0===e?1:e,this.__checked=t}createDOM(e){const t=document.createElement("li"),n=this.getParent();return se(n)&&"check"===n.getListType()&&q(t,this,null),t.value=this.__value,G(t,e.theme,this),t}updateDOM(e,t,n){const r=this.getParent();return se(r)&&"check"===r.getListType()&&q(t,this,e),t.value=this.__value,G(t,n.theme,this),!1}static transform(){return e=>{if(Q(e)||F(144),null==e.__checked)return;const t=e.getParent();se(t)&&"check"!==t.getListType()&&null!=e.getChecked()&&e.setChecked(void 0)}}static importDOM(){return{li:e=>({conversion:X,priority:0})}}static importJSON(e){const t=Y();return t.setChecked(e.checked),t.setValue(e.value),t.setFormat(e.format),t.setDirection(e.direction),t}exportDOM(e){const t=this.createDOM(e._config);return t.style.textAlign=this.getFormatType(),{element:t}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),type:"listitem",value:this.getValue(),version:1}}append(...e){for(let t=0;t<e.length;t++){const n=e[t];if((0,d.F7)(n)&&this.canMergeWith(n)){const e=n.getChildren();this.append(...e),n.remove()}else super.append(n)}return this}replace(e,t){if(Q(e))return super.replace(e);this.setIndent(0);const n=this.getParentOrThrow();if(!se(n))return e;if(n.__first===this.getKey())n.insertBefore(e);else if(n.__last===this.getKey())n.insertAfter(e);else{const t=ie(n.getListType());let r=this.getNextSibling();for(;r;){const e=r;r=r.getNextSibling(),t.append(e)}n.insertAfter(e),e.insertAfter(t)}return t&&((0,d.F7)(e)||F(139),this.getChildren().forEach((t=>{e.append(t)}))),this.remove(),0===n.getChildrenSize()&&n.remove(),e}insertAfter(e,t=!0){const n=this.getParentOrThrow();if(se(n)||F(39),Q(e))return super.insertAfter(e,t);const r=this.getNextSiblings();if(n.insertAfter(e,t),0!==r.length){const o=ie(n.getListType());r.forEach((e=>o.append(e))),e.insertAfter(o,t)}return e}remove(e){const t=this.getPreviousSibling(),n=this.getNextSibling();super.remove(e),t&&n&&R(t)&&R(n)&&(U(t.getFirstChild(),n.getFirstChild()),n.remove())}insertNewAfter(e,t=!0){const n=Y(null==this.__checked&&void 0);return this.insertAfter(n,t),n}collapseAtStart(e){const t=(0,d.BE)();this.getChildren().forEach((e=>t.append(e)));const n=this.getParentOrThrow(),r=n.getParentOrThrow(),o=Q(r);if(1===n.getChildrenSize())if(o)n.remove(),r.select();else{n.insertBefore(t),n.remove();const r=e.anchor,o=e.focus,i=t.getKey();"element"===r.type&&r.getNode().is(this)&&r.set(i,r.offset,"element"),"element"===o.type&&o.getNode().is(this)&&o.set(i,o.offset,"element")}else n.insertBefore(t),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(e){this.getWritable().__value=e}getChecked(){return this.getLatest().__checked}setChecked(e){this.getWritable().__checked=e}toggleChecked(){this.setChecked(!this.__checked)}getIndent(){const e=this.getParent();if(null===e)return this.getLatest().__indent;let t=e.getParentOrThrow(),n=0;for(;Q(t);)t=t.getParentOrThrow().getParentOrThrow(),n++;return n}setIndent(e){"number"==typeof e&&e>-1||F(117);let t=this.getIndent();for(;t!==e;)t<e?(j(this),t++):(V(this),t--);return this}canInsertAfter(e){return Q(e)}canReplaceWith(e){return Q(e)}canMergeWith(e){return(0,d.Rl)(e)||Q(e)}extractWithChild(e,t){if(!(0,d.OP)(t))return!1;const n=t.anchor.getNode(),r=t.focus.getNode();return this.isParentOf(n)&&this.isParentOf(r)&&this.getTextContent().length===t.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return ie("bullet")}}function G(e,t,n){const r=[],o=[],i=t.list,s=i?i.listitem:void 0;let l;if(i&&i.nested&&(l=i.nested.listitem),void 0!==s&&r.push(...J(s)),i){const e=n.getParent(),t=se(e)&&"check"===e.getListType(),s=n.getChecked();t&&!s||o.push(i.listitemUnchecked),t&&s||o.push(i.listitemChecked),t&&r.push(s?i.listitemChecked:i.listitemUnchecked)}if(void 0!==l){const e=J(l);n.getChildren().some((e=>se(e)))?r.push(...e):o.push(...e)}o.length>0&&v(e,...o),r.length>0&&y(e,...r)}function q(e,t,n,r){se(t.getFirstChild())?(e.removeAttribute("role"),e.removeAttribute("tabIndex"),e.removeAttribute("aria-checked")):(e.setAttribute("role","checkbox"),e.setAttribute("tabIndex","-1"),n&&t.__checked===n.__checked||e.setAttribute("aria-checked",t.getChecked()?"true":"false"))}function X(e){return{node:Y((0,d.Re)(e)&&"true"===e.getAttribute("aria-checked"))}}function Y(e){return(0,d.U2)(new H(void 0,e))}function Q(e){return e instanceof H}class ee extends d.HX{static getType(){return"list"}static clone(e){const t=e.__listType||oe[e.__tag];return new ee(t,e.__start,e.__key)}constructor(e,t,n){super(n);const r=oe[e]||e;this.__listType=r,this.__tag="number"===r?"ol":"ul",this.__start=t}getTag(){return this.__tag}setListType(e){const t=this.getWritable();t.__listType=e,t.__tag="number"===e?"ol":"ul"}getListType(){return this.__listType}getStart(){return this.__start}createDOM(e,t){const n=this.__tag,r=document.createElement(n);return 1!==this.__start&&r.setAttribute("start",String(this.__start)),r.__lexicalListType=this.__listType,te(r,e.theme,this),r}updateDOM(e,t,n){return e.__tag!==this.__tag||(te(t,n.theme,this),!1)}static transform(){return e=>{se(e)||F(163),function(e){const t=e.getNextSibling();se(t)&&e.getListType()===t.getListType()&&U(e,t)}(e),function(e){const t="check"!==e.getListType();let n=e.getStart();for(const r of e.getChildren())Q(r)&&(r.getValue()!==n&&r.setValue(n),t&&null!=r.getChecked()&&r.setChecked(void 0),se(r.getFirstChild())||n++)}(e)}}static importDOM(){return{ol:e=>({conversion:re,priority:0}),ul:e=>({conversion:re,priority:0})}}static importJSON(e){const t=ie(e.listType,e.start);return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportDOM(e){const{element:t}=super.exportDOM(e);return t&&(0,d.Re)(t)&&(1!==this.__start&&t.setAttribute("start",String(this.__start)),"check"===this.__listType&&t.setAttribute("__lexicalListType","check")),{element:t}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag(),type:"list",version:1}}canBeEmpty(){return!1}canIndent(){return!1}append(...e){for(let t=0;t<e.length;t++){const n=e[t];if(Q(n))super.append(n);else{const e=Y();if(se(n))e.append(n);else if((0,d.F7)(n)){const t=(0,d.MX)(n.getTextContent());e.append(t)}else e.append(n);super.append(e)}}return this}extractWithChild(e){return Q(e)}}function te(e,t,n){const r=[],o=[],i=t.list;if(void 0!==i){const e=i[`${n.__tag}Depth`]||[],t=function(e){let t=1,n=e.getParent();for(;null!=n;){if(Q(n)){const e=n.getParent();if(se(e)){t++,n=e.getParent();continue}F(40)}return t}return t}(n)-1,s=t%e.length,l=e[s],a=i[n.__tag];let c;const u=i.nested,d=i.checklist;if(void 0!==u&&u.list&&(c=u.list),void 0!==a&&r.push(a),void 0!==d&&"check"===n.__listType&&r.push(d),void 0!==l){r.push(...J(l));for(let t=0;t<e.length;t++)t!==s&&o.push(n.__tag+t)}if(void 0!==c){const e=J(c);t>1?r.push(...e):o.push(...e)}}o.length>0&&v(e,...o),r.length>0&&y(e,...r)}function ne(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];if(Q(r)){t.push(r);const e=r.getChildren();e.length>1&&e.forEach((e=>{se(e)&&t.push(z(e))}))}else t.push(z(r))}return t}function re(e){const t=e.nodeName.toLowerCase();let n=null;return"ol"===t?n=ie("number",e.start):"ul"===t&&(n=(0,d.Re)(e)&&"check"===e.getAttribute("__lexicallisttype")?ie("check"):ie("bullet")),{after:ne,node:n}}const oe={ol:"number",ul:"bullet"};function ie(e,t=1){return(0,d.U2)(new ee(e,t))}function se(e){return e instanceof ee}const le=(0,d.fA)("INSERT_UNORDERED_LIST_COMMAND"),ae=(0,d.fA)("INSERT_ORDERED_LIST_COMMAND"),ce=((0,d.fA)("INSERT_CHECK_LIST_COMMAND"),(0,d.fA)("REMOVE_LIST_COMMAND"));var ue=n(10261);function de(e,t){const n=t.body?t.body.childNodes:[];let r=[];const o=[];for(let i=0;i<n.length;i++){const t=n[i];if(!ge.has(t.nodeName)){const n=pe(t,e,o,!1);null!==n&&(r=r.concat(n))}}return function(e){for(const t of e)t.getNextSibling()instanceof d.RG&&t.insertAfter((0,d.T)());for(const t of e){const e=t.getChildren();for(const n of e)t.insertBefore(n);t.remove()}}(o),r}function fe(e,t){if("undefined"==typeof document||"undefined"==typeof window&&void 0===global.window)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const n=document.createElement("div"),r=(0,d.Gv)().getChildren();for(let o=0;o<r.length;o++)he(e,r[o],n,t);return n.innerHTML}function he(e,t,n,r=null){let o=null===r||t.isSelected(r);const i=(0,d.F7)(t)&&t.excludeFromCopy("html");let s=t;if(null!==r){let e=(0,ue.B3)(t);e=(0,d.Gg)(e)&&null!==r?(0,ue.bA)(r,e):e,s=e}const l=(0,d.F7)(s)?s.getChildren():[],a=e._nodes.get(s.getType());let c;c=a&&void 0!==a.exportDOM?a.exportDOM(e,s):s.exportDOM(e);const{element:u,after:f}=c;if(!u)return!1;const h=document.createDocumentFragment();for(let g=0;g<l.length;g++){const n=l[g],i=he(e,n,h,r);!o&&(0,d.F7)(t)&&i&&t.extractWithChild(n,r,"html")&&(o=!0)}if(o&&!i){if((0,d.Re)(u)&&u.append(h),n.append(u),f){const e=f.call(s,u);e&&u.replaceWith(e)}}else n.append(h);return o}const ge=new Set(["STYLE","SCRIPT"]);function pe(e,t,n,r,o=new Map,i){let s=[];if(ge.has(e.nodeName))return s;let l=null;const a=function(e,t){const{nodeName:n}=e,r=t._htmlConversions.get(n.toLowerCase());let o=null;if(void 0!==r)for(const i of r){const t=i(e);null!==t&&(null===o||(o.priority||0)<(t.priority||0))&&(o=t)}return null!==o?o.conversion:null}(e,t),c=a?a(e):null;let u=null;if(null!==c){u=c.after;const t=c.node;if(l=Array.isArray(t)?t[t.length-1]:t,null!==l){for(const[,e]of o)if(l=e(l,i),!l)break;l&&s.push(...Array.isArray(t)?t:[l])}null!=c.forChild&&o.set(e.nodeName,c.forChild)}const f=e.childNodes;let h=[];const g=(null==l||!(0,d._v)(l))&&(null!=l&&(0,d.ek)(l)||r);for(let d=0;d<f.length;d++)h.push(...pe(f[d],t,n,g,new Map(o),l));return null!=u&&(h=u(h)),(0,d.lv)(e)&&(h=function(e,t,n){const r=e.style.textAlign,o=[];let i=[];for(let s=0;s<t.length;s++){const e=t[s];if((0,d.ek)(e))e.setFormat(r),o.push(e);else if(i.push(e),s===t.length-1||s<t.length-1&&(0,d.ek)(t[s+1])){const e=n();e.setFormat(r),e.append(...i),o.push(e),i=[]}}return o}(e,h,g?()=>{const e=new d.RG;return n.push(e),e}:d.BE)),null==l?s=s.concat(h):(0,d.F7)(l)&&l.append(...h),s}var me=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}((function(e){const t=new URLSearchParams;t.append("code",e);for(let n=1;n<arguments.length;n++)t.append("v",arguments[n]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}));const _e="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,ye=e=>_e?(e||window).getSelection():null;function ve(e){const t=(0,d.dL)();return null==t&&me(166),(0,d.OP)(t)&&t.isCollapsed()||0===t.getNodes().length?null:JSON.stringify(function(e,t){const n=[],r=(0,d.Gv)().getChildren();for(let o=0;o<r.length;o++)Ce(e,t,r[o],n);return{namespace:e._config.namespace,nodes:n}}(e,t))}function xe(e,t,n){const r=e.getData("application/x-lexical-editor");if(r)try{const e=JSON.parse(r);if(e.namespace===n._config.namespace&&Array.isArray(e.nodes))return be(n,function(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n],o=(0,d.oC)(r);(0,d.Gg)(o)&&(0,ue.vV)(o),t.push(o)}return t}(e.nodes),t)}catch(e){}const o=e.getData("text/html");if(o)try{return be(n,de(n,(new DOMParser).parseFromString(o,"text/html")),t)}catch(e){}const i=e.getData("text/plain")||e.getData("text/uri-list");if(null!=i)if((0,d.OP)(t)){const e=i.split(/(\r?\n|\t)/);""===e[e.length-1]&&e.pop();for(let t=0;t<e.length;t++){const n=(0,d.dL)();if((0,d.OP)(n)){const r=e[t];"\n"===r||"\r\n"===r?n.insertParagraph():"\t"===r?n.insertNodes([(0,d.S3)()]):n.insertText(r)}}}else t.insertRawText(i)}function be(e,t,n){e.dispatchCommand(d.zr,{nodes:t,selection:n})||n.insertNodes(t)}function Ce(e,t,n,r=[]){let o=null===t||n.isSelected(t);const i=(0,d.F7)(n)&&n.excludeFromCopy("html");let s=n;if(null!==t){let e=(0,ue.B3)(n);e=(0,d.Gg)(e)&&null!==t?(0,ue.bA)(t,e):e,s=e}const l=(0,d.F7)(s)?s.getChildren():[],a=function(e){const t=e.exportJSON(),n=e.constructor;if(t.type!==n.getType()&&me(58,n.name),(0,d.F7)(e)){const e=t.children;Array.isArray(e)||me(59,n.name)}return t}(s);if((0,d.Gg)(s)){const e=s.__text;e.length>0?a.text=e:o=!1}for(let c=0;c<l.length;c++){const r=l[c],i=Ce(e,t,r,a.children);!o&&(0,d.F7)(n)&&i&&n.extractWithChild(r,t,"clone")&&(o=!0)}if(o&&!i)r.push(a);else if(Array.isArray(a.children))for(let c=0;c<a.children.length;c++){const e=a.children[c];r.push(e)}return o}let Se=null;async function we(e,t){if(null!==Se)return!1;if(null!==t)return new Promise(((n,r)=>{e.update((()=>{n(ke(e,t))}))}));const n=e.getRootElement(),r=null==e._window?window.document:e._window.document,o=ye(e._window);if(null===n||null===o)return!1;const i=r.createElement("span");i.style.cssText="position: fixed; top: -1000px;",i.append(r.createTextNode("#")),n.append(i);const s=new Range;return s.setStart(i,0),s.setEnd(i,1),o.removeAllRanges(),o.addRange(s),new Promise(((t,n)=>{const o=e.registerCommand(d.LV,(n=>(w(n,ClipboardEvent)&&(o(),null!==Se&&(window.clearTimeout(Se),Se=null),t(ke(e,n))),!0)),d.jw);Se=window.setTimeout((()=>{o(),Se=null,t(!1)}),50),r.execCommand("copy"),i.remove()}))}function ke(e,t){const n=ye(e._window);if(!n)return!1;const r=n.anchorNode,o=n.focusNode;if(null!==r&&null!==o&&!(0,d.af)(e,r,o))return!1;t.preventDefault();const i=t.clipboardData,s=(0,d.dL)();if(null===i||null===s)return!1;const l=function(e){const t=(0,d.dL)();return null==t&&me(166),(0,d.OP)(t)&&t.isCollapsed()||0===t.getNodes().length?"":fe(e,t)}(e),a=ve(e);let c="";return null!==s&&(c=s.getTextContent()),null!==l&&i.setData("text/html",l),null!==a&&i.setData("application/x-lexical-editor",a),i.setData("text/plain",c),!0}function Ee(e,t){if(void 0!==document.caretRangeFromPoint){const n=document.caretRangeFromPoint(e,t);return null===n?null:{node:n.startContainer,offset:n.startOffset}}if("undefined"!==document.caretPositionFromPoint){const n=document.caretPositionFromPoint(e,t);return null===n?null:{node:n.offsetNode,offset:n.offset}}return null}const Te="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,Ne=Te&&"documentMode"in document?document.documentMode:null,Oe=!(!Te||!("InputEvent"in window)||Ne)&&"getTargetRanges"in new window.InputEvent("input"),Pe=Te&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Le=Te&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Ae=Te&&/^(?=.*Chrome).*/i.test(navigator.userAgent),De=Te&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!Ae,Me=(0,d.fA)("DRAG_DROP_PASTE_FILE");class Fe extends d.HX{static getType(){return"quote"}static clone(e){return new Fe(e.__key)}constructor(e){super(e)}createDOM(e){const t=document.createElement("blockquote");return y(t,e.theme.quote),t}updateDOM(e,t){return!1}static importDOM(){return{blockquote:e=>({conversion:$e,priority:0})}}exportDOM(e){const{element:t}=super.exportDOM(e);if(t&&(0,d.Re)(t)){this.isEmpty()&&t.append(document.createElement("br"));const e=this.getFormatType();t.style.textAlign=e;const n=this.getDirection();n&&(t.dir=n)}return{element:t}}static importJSON(e){const t=Be();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),type:"quote"}}insertNewAfter(e,t){const n=(0,d.BE)(),r=this.getDirection();return n.setDirection(r),this.insertAfter(n,t),n}collapseAtStart(){const e=(0,d.BE)();return this.getChildren().forEach((t=>e.append(t))),this.replace(e),!0}}function Be(){return(0,d.U2)(new Fe)}class Ie extends d.HX{static getType(){return"heading"}static clone(e){return new Ie(e.__tag,e.__key)}constructor(e,t){super(t),this.__tag=e}getTag(){return this.__tag}createDOM(e){const t=this.__tag,n=document.createElement(t),r=e.theme.heading;if(void 0!==r){y(n,r[t])}return n}updateDOM(e,t){return!1}static importDOM(){return{h1:e=>({conversion:ze,priority:0}),h2:e=>({conversion:ze,priority:0}),h3:e=>({conversion:ze,priority:0}),h4:e=>({conversion:ze,priority:0}),h5:e=>({conversion:ze,priority:0}),h6:e=>({conversion:ze,priority:0}),p:e=>{const t=e.firstChild;return null!==t&&Re(t)?{conversion:()=>({node:null}),priority:3}:null},span:e=>Re(e)?{conversion:e=>({node:We("h1")}),priority:3}:null}}exportDOM(e){const{element:t}=super.exportDOM(e);if(t&&(0,d.Re)(t)){this.isEmpty()&&t.append(document.createElement("br"));const e=this.getFormatType();t.style.textAlign=e;const n=this.getDirection();n&&(t.dir=n)}return{element:t}}static importJSON(e){const t=We(e.tag);return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),tag:this.getTag(),type:"heading",version:1}}insertNewAfter(e,t=!0){const n=e?e.anchor.offset:0,r=n!==this.getTextContentSize()&&e?We(this.getTag()):(0,d.BE)(),o=this.getDirection();if(r.setDirection(o),this.insertAfter(r,t),0===n&&!this.isEmpty()&&e){const e=(0,d.BE)();e.select(),this.replace(e,!0)}return r}collapseAtStart(){const e=this.isEmpty()?(0,d.BE)():We(this.getTag());return this.getChildren().forEach((t=>e.append(t))),this.replace(e),!0}extractWithChild(){return!0}}function Re(e){return"span"===e.nodeName.toLowerCase()&&"26pt"===e.style.fontSize}function ze(e){const t=e.nodeName.toLowerCase();let n=null;return"h1"!==t&&"h2"!==t&&"h3"!==t&&"h4"!==t&&"h5"!==t&&"h6"!==t||(n=We(t),null!==e.style&&n.setFormat(e.style.textAlign)),{node:n}}function $e(e){const t=Be();return null!==e.style&&t.setFormat(e.style.textAlign),{node:t}}function We(e){return(0,d.U2)(new Ie(e))}function Ze(e){return e instanceof Ie}function Ke(e){let t=null;if(w(e,DragEvent)?t=e.dataTransfer:w(e,ClipboardEvent)&&(t=e.clipboardData),null===t)return[!1,[],!1];const n=t.types,r=n.includes("Files"),o=n.includes("text/html")||n.includes("text/plain");return[r,Array.from(t.files),o]}function Ue(e){const t=(0,d.dL)();if(!(0,d.OP)(t))return!1;const n=new Set,r=t.getNodes();for(let o=0;o<r.length;o++){const t=r[o],i=t.getKey();if(n.has(i))continue;const s=C(t,(e=>(0,d.F7)(e)&&!e.isInline()));if(null===s)continue;const l=s.getKey();s.canIndent()&&!n.has(l)&&(n.add(l),e(s))}return n.size>0}function je(e){const t=(0,d.Xo)(e);return(0,d.k$)(t)}var Ve=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}((function(e){const t=new URLSearchParams;t.append("code",e);for(let n=1;n<arguments.length;n++)t.append("v",arguments[n]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}));const Je=(0,r.createContext)(null);function He(){const e=(0,r.useContext)(Je);return null==e&&Ve(8),e}function Ge(e,t){return e.getEditorState().read((()=>{const e=(0,d.gI)(t);return null!==e&&e.isSelected()}))}function qe(e){const[t]=He(),[n,o]=(0,r.useState)((()=>Ge(t,e)));return(0,r.useEffect)((()=>{let n=!0;const r=t.registerUpdateListener((()=>{n&&o(Ge(t,e))}));return()=>{n=!1,r()}}),[t,e]),[n,(0,r.useCallback)((n=>{t.update((()=>{let t=(0,d.dL)();(0,d.iO)(t)||(t=(0,d.h5)(),(0,d.oq)(t)),(0,d.iO)(t)&&(n?t.add(e):t.delete(e))}))}),[t,e]),(0,r.useCallback)((()=>{t.update((()=>{const e=(0,d.dL)();(0,d.iO)(e)&&e.clear()}))}),[t])]}const Xe=new Set;function Ye({altText:e,className:t,imageRef:n,src:o,width:i,height:s,maxWidth:l}){return function(e){if(!Xe.has(e))throw new Promise((t=>{const n=new Image;n.src=e,n.onload=()=>{Xe.add(e),t()}}))}(o),r.createElement("img",{className:t,src:o,alt:e,ref:n,style:{height:`${s}${"inherit"===s?"":"px"}`,maxWidth:l,width:`${i}${"inherit"===i?"":"px"}`}})}function Qe({src:e,altText:t,nodeKey:n,maxWidth:o}){const i=(0,r.useRef)(null),s=(0,r.useRef)(null),[l,a,c]=qe(n),[u]=He(),f=(0,r.useRef)(null),h=(0,r.useCallback)((e=>{if(l&&(0,d.iO)((0,d.dL)())){e.preventDefault();const t=(0,d.gI)(n);(function(e){return"image"===e.getType()})(t)&&t.remove(),a(!1)}return!1}),[l,n,a]),g=(0,r.useCallback)((e=>{const t=(0,d.dL)(),n=s.current;return!(!l||!(0,d.iO)(t)||1!==t.getNodes().length||null===n||n===document.activeElement)&&(e.preventDefault(),n.focus(),!0)}),[l]),p=(0,r.useCallback)((e=>s.current===e.target&&((0,d.oq)(null),u.update((()=>{a(!0);const e=u.getRootElement();null!==e&&e.focus()})),!0)),[u,a]);return(0,r.useEffect)((()=>{const e=_(u.registerCommand(d.oj,((e,t)=>(f.current=t,!1)),d.KB),u.registerCommand(d.Kr,(e=>{const t=e;return t.target===i.current&&(t.shiftKey?a(!l):(c(),a(!0)),!0)}),d.KB),u.registerCommand(d.MK,h,d.KB),u.registerCommand(d.aR,h,d.KB),u.registerCommand(d.XN,g,d.KB),u.registerCommand(d.Zq,p,d.KB));return()=>{e()}}),[c,u,l,n,h,g,p,a]),r.createElement(r.Suspense,{fallback:null},r.createElement(Ye,{className:l?"selected":null,src:e,altText:t,imageRef:i,maxWidth:o}))}function et(e){if(e instanceof HTMLImageElement){const{alt:t,src:n}=e;return{node:nt({altText:t,src:n,maxWidth:"100%"})}}return null}class tt extends d.Ij{constructor(e,t,n,r){super(r),this.__src=e,this.__altText=t,this.__maxWidth=n}static getType(){return"image"}static clone(e){return new tt(e.__src,e.__altText,e.__maxWidth,e.__key)}setWidthAndHeight(e,t){const n=this.getWritable();n.__width=e,n.__height=t}createDOM(e){const t=document.createElement("div"),n=e.theme.image;return void 0!==n&&(t.className=n),t}updateDOM(){return!1}static importDOM(){const e=d.R2.importDOM();return Object.assign({img:e=>({conversion:et,priority:0})},e)}exportDOM(){const e=document.createElement("img");return e.setAttribute("src",this.__src),e.setAttribute("alt",this.__altText),e.setAttribute("style",`max-width: ${this.__maxWidth}px;`),{element:e}}decorate(){return r.createElement(Qe,{src:this.__src,altText:this.__altText,maxWidth:this.__maxWidth,nodeKey:this.getKey()})}static importJSON(e){const{altText:t,maxWidth:n,src:r}=e;return nt({altText:t,src:r,maxWidth:n})}exportJSON(){return{altText:this.getAltText(),maxWidth:this.__maxWidth,src:this.getSrc(),type:"image",version:1}}}function nt({src:e,altText:t,maxWidth:n}){return new tt(e,t,n)}function rt(e){return{node:it({avatar:"",bio:"",date_joined:void 0,description:"",gender:"",location:"",real_name:"",reputation:0,role:"",status:"",tags:void 0,website:"",id:e.getAttribute("id"),ext_id:e.getAttribute("ext_id"),username:e.innerText.replace("@","")})}}class ot extends d.R2{constructor(e,t,n){super(null!=t?t:`@${e.username}`,n),this.__user=e}static getType(){return"mention"}static clone(e){return new ot(e.__user,e.__text,e.__key)}createDOM(e){const t=document.createElement("mention");return t.setAttribute("id",`${this.__user.id}`),t.setAttribute("ext-id",`${this.__user.ext_id}`),t.innerText=this.__text,t}updateDOM(e,t,n){const r=t.firstChild;return null===r||(super.updateDOM(e,r,n),!1)}static importDOM(){const e=d.R2.importDOM();return Object.assign({mention:e=>({conversion:rt,priority:0})},e)}exportDOM(){const e=document.createElement("mention");return e.setAttribute("id",`${this.__user.id}`),e.setAttribute("ext-id",`${this.__user.ext_id}`),e.textContent=`@${this.__user.username}`,{element:e}}isTextEntity(){return!0}static importJSON(e){const{user:t}=e;return it(t)}exportJSON(){return Object.assign(Object.assign({},super.exportJSON()),{user:this.__user,type:"mention",version:1})}}function it(e){const t=new ot(e);return t.setMode("segmented").toggleDirectionless(),t}const st=(0,d.fA)("INSERT_HORIZONTAL_RULE_COMMAND");function lt({nodeKey:e}){const[t]=He(),[n,o,i]=qe(e),s=(0,r.useCallback)((t=>{if(n&&(0,d.iO)((0,d.dL)())){t.preventDefault();const n=(0,d.gI)(e);if(function(e){return e instanceof at}(n))return n.remove(),!0}return!1}),[n,e]);return(0,r.useEffect)((()=>_(t.registerCommand(d.Kr,(r=>{const s=t.getElementByKey(e);return r.target===s&&(r.shiftKey||i(),o(!n),!0)}),d.KB),t.registerCommand(d.MK,s,d.KB),t.registerCommand(d.aR,s,d.KB))),[i,t,n,e,s,o]),(0,r.useEffect)((()=>{const r=t.getElementByKey(e);null!==r&&(r.className=n?"selected":"")}),[t,n,e]),null}class at extends d.Ij{static getType(){return"horizontalrule"}static clone(e){return new at(e.__key)}static importJSON(e){return ut()}static importDOM(){return{hr:()=>({conversion:ct,priority:0})}}exportJSON(){return{type:"horizontalrule",version:1}}exportDOM(){return{element:document.createElement("hr")}}createDOM(){return document.createElement("hr")}getTextContent(){return"\n"}isInline(){return!1}updateDOM(){return!1}decorate(){return r.createElement(lt,{nodeKey:this.__key})}}function ct(){return{node:ut()}}function ut(){return(0,d.U2)(new at)}const dt=[at,Ie,ee,H,Fe,d.R2,P,E,tt,ot],ft="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,ht=ft?r.useLayoutEffect:r.useEffect,gt={tag:"history-merge"};function pt({initialConfig:e,children:t}){const n=(0,r.useMemo)((()=>{const{theme:t,namespace:n,editor__DEPRECATED:r,nodes:o,onError:i,editorState:s,html:l}=e,a=function(e,t){let n=null;return null!=e&&(n=e[1]),{getTheme:function(){return null!=t?t:null!=n?n.getTheme():null}}}(null,t);let c=r||null;if(null===c){const r=(0,d.Jh)({editable:e.editable,html:l,namespace:n,nodes:o,onError:e=>i(e,r),theme:t});!function(e,t){if(null!==t)if(void 0===t)e.update((()=>{const t=(0,d.Gv)();if(t.isEmpty()){const n=(0,d.BE)();t.append(n);const r=ft?document.activeElement:null;(null!==(0,d.dL)()||null!==r&&r===e.getRootElement())&&n.select()}}),gt);else if(null!==t)switch(typeof t){case"string":{const n=e.parseEditorState(t);e.setEditorState(n,gt);break}case"object":e.setEditorState(t,gt);break;case"function":e.update((()=>{(0,d.Gv)().isEmpty()&&t(e)}),gt)}}(r,s),c=r}return[c,a]}),[]);return ht((()=>{const t=e.editable,[r]=n;r.setEditable(void 0===t||t)}),[]),r.createElement(Je.Provider,{value:n},t)}function mt(){return mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mt.apply(this,arguments)}const _t="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect;function yt({ariaActiveDescendant:e,ariaAutoComplete:t,ariaControls:n,ariaDescribedBy:o,ariaExpanded:i,ariaLabel:s,ariaLabelledBy:l,ariaMultiline:a,ariaOwns:c,ariaRequired:u,autoCapitalize:d,className:f,id:h,role:g="textbox",spellCheck:p=!0,style:m,tabIndex:_,"data-testid":y,...v}){const[x]=He(),[b,C]=(0,r.useState)(!1),S=(0,r.useCallback)((e=>{e&&e.ownerDocument&&e.ownerDocument.defaultView&&x.setRootElement(e)}),[x]);return _t((()=>(C(x.isEditable()),x.registerEditableListener((e=>{C(e)})))),[x]),r.createElement("div",mt({},v,{"aria-activedescendant":b?e:void 0,"aria-autocomplete":b?t:"none","aria-controls":b?n:void 0,"aria-describedby":o,"aria-expanded":b&&"combobox"===g?!!i:void 0,"aria-label":s,"aria-labelledby":l,"aria-multiline":a,"aria-owns":b?c:void 0,"aria-readonly":!b||void 0,"aria-required":u,autoCapitalize:d,className:f,contentEditable:b,"data-testid":y,id:h,ref:S,role:g,spellCheck:p,style:m,tabIndex:_}))}const vt=0,xt=1,bt=2,Ct=0,St=1,wt=2,kt=3,Et=4;function Tt(e,t){let n=Date.now(),r=Ct;return(o,i,s,l,a,c)=>{const u=Date.now();if(c.has("historic"))return r=Ct,n=u,bt;const f=function(e,t,n,r,o){if(null===e||0===n.size&&0===r.size&&!o)return Ct;const i=t._selection,s=e._selection;if(o)return St;if(!((0,d.OP)(i)&&(0,d.OP)(s)&&s.isCollapsed()&&i.isCollapsed()))return Ct;const l=function(e,t,n){const r=e._nodeMap,o=[];for(const i of t){const e=r.get(i);void 0!==e&&o.push(e)}for(const[i,s]of n){if(!s)continue;const e=r.get(i);void 0===e||(0,d.wd)(e)||o.push(e)}return o}(t,n,r);if(0===l.length)return Ct;if(l.length>1){const n=t._nodeMap,r=n.get(i.anchor.key),o=n.get(s.anchor.key);return r&&o&&!e._nodeMap.has(r.__key)&&(0,d.Gg)(r)&&1===r.__text.length&&1===i.anchor.offset?wt:Ct}const a=l[0],c=e._nodeMap.get(a.__key);if(!(0,d.Gg)(c)||!(0,d.Gg)(a)||c.__mode!==a.__mode)return Ct;const u=c.__text,f=a.__text;if(u===f)return Ct;const h=i.anchor,g=s.anchor;if(h.key!==g.key||"text"!==h.type)return Ct;const p=h.offset,m=g.offset,_=f.length-u.length;return 1===_&&m===p-1?wt:-1===_&&m===p+1?kt:-1===_&&m===p?Et:Ct}(o,i,l,a,e.isComposing()),h=(()=>{const h=null===s||s.editor===e,g=c.has("history-push");if(!g&&h&&c.has("history-merge"))return vt;if(null===o)return xt;const p=i._selection;return l.size>0||a.size>0?!1===g&&f!==Ct&&f===r&&u<n+t&&h||1===l.size&&function(e,t,n){const r=t._nodeMap.get(e),o=n._nodeMap.get(e),i=t._selection,s=n._selection;let l=!1;return(0,d.OP)(i)&&(0,d.OP)(s)&&(l="element"===i.anchor.type&&"element"===i.focus.type&&"text"===s.anchor.type&&"text"===s.focus.type),!(l||!(0,d.Gg)(r)||!(0,d.Gg)(o))&&r.__type===o.__type&&r.__text===o.__text&&r.__mode===o.__mode&&r.__detail===o.__detail&&r.__style===o.__style&&r.__format===o.__format&&r.__parent===o.__parent}(Array.from(l)[0],o,i)?vt:xt:null!==p?vt:bt})();return n=u,r=f,h}}function Nt(e){e.undoStack=[],e.redoStack=[],e.current=null}function Ot({externalHistoryState:e}){const[t]=He();return function(e,t,n=1e3){const o=(0,r.useMemo)((()=>t||{current:null,redoStack:[],undoStack:[]}),[t]);(0,r.useEffect)((()=>function(e,t,n){const r=Tt(e,n),o=_(e.registerCommand(d.$l,(()=>(function(e,t){const n=t.redoStack,r=t.undoStack;if(0!==r.length){const o=t.current,i=r.pop();null!==o&&(n.push(o),e.dispatchCommand(d.r0,!0)),0===r.length&&e.dispatchCommand(d.yn,!1),t.current=i||null,i&&i.editor.setEditorState(i.editorState,{tag:"historic"})}}(e,t),!0)),d.VN),e.registerCommand(d.zq,(()=>(function(e,t){const n=t.redoStack,r=t.undoStack;if(0!==n.length){const o=t.current;null!==o&&(r.push(o),e.dispatchCommand(d.yn,!0));const i=n.pop();0===n.length&&e.dispatchCommand(d.r0,!1),t.current=i||null,i&&i.editor.setEditorState(i.editorState,{tag:"historic"})}}(e,t),!0)),d.VN),e.registerCommand(d.BM,(()=>(Nt(t),!1)),d.VN),e.registerCommand(d.Nr,(()=>(Nt(t),e.dispatchCommand(d.r0,!1),e.dispatchCommand(d.yn,!1),!0)),d.VN),e.registerUpdateListener((({editorState:n,prevEditorState:o,dirtyLeaves:i,dirtyElements:s,tags:l})=>{const a=t.current,c=t.redoStack,u=t.undoStack,f=null===a?null:a.editorState;if(null!==a&&n===f)return;const h=r(o,n,a,i,s,l);if(h===xt)0!==c.length&&(t.redoStack=[],e.dispatchCommand(d.r0,!1)),null!==a&&(u.push({...a}),e.dispatchCommand(d.yn,!0));else if(h===bt)return;t.current={editor:e,editorState:n}})));return o}(e,o,n)),[n,e,o])}(t,e),null}const Pt="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect;function Lt(e){return{initialValueFn:()=>e.isEditable(),subscribe:t=>e.registerEditableListener(t)}}var At=n(73935);const Dt="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;const Mt=()=>{const[e]=He(),[t,n]=(0,r.useState)(!1);return(0,r.useEffect)((()=>e.registerCommand(d.Gq,(()=>(n(!1),!1)),d.KB)),[]),(0,r.useEffect)((()=>e.registerCommand(d.m$,(()=>(n(!0),!1)),d.KB)),[]),t};function Ft(e,t=!0){if(e)return!1;let n=(0,d.Gv)().getTextContent();return t&&(n=n.trim()),""===n}function Bt(e){return()=>function(e){if(!Ft(e,!1))return!1;const t=(0,d.Gv)().getChildren(),n=t.length;if(n>1)return!1;for(let r=0;r<n;r++){const e=t[r];if((0,d.k$)(e))return!1;if((0,d.F7)(e)){if(!(0,d.Rl)(e))return!1;if(0!==e.__indent)return!1;const t=e.getChildren(),n=t.length;for(let e=0;e<n;e++){const e=t[r];if(!(0,d.Gg)(e))return!1}}}return!0}(e)}!function(e){e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")&&e.default}((function(e){const t=new URLSearchParams;t.append("code",e);for(let n=1;n<arguments.length;n++)t.append("v",arguments[n]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}));function It(e){return e.getEditorState().read(Bt(e.isComposing()))}function Rt(e){Dt((()=>_(function(e){return _(e.registerCommand(d.Kr,(e=>{const t=(0,d.dL)();return!!(0,d.iO)(t)&&(t.clear(),!0)}),0),e.registerCommand(d.Mt,(e=>{const t=(0,d.dL)();return!!(0,d.OP)(t)&&(t.deleteCharacter(e),!0)}),d.VN),e.registerCommand(d.cj,(e=>{const t=(0,d.dL)();return!!(0,d.OP)(t)&&(t.deleteWord(e),!0)}),d.VN),e.registerCommand(d.n2,(e=>{const t=(0,d.dL)();return!!(0,d.OP)(t)&&(t.deleteLine(e),!0)}),d.VN),e.registerCommand(d.yF,(t=>{const n=(0,d.dL)();if("string"==typeof t)null!==n&&n.insertText(t);else{if(null===n)return!1;const r=t.dataTransfer;if(null!=r)xe(r,n,e);else if((0,d.OP)(n)){const e=t.data;return e&&n.insertText(e),!0}}return!0}),d.VN),e.registerCommand(d.RJ,(()=>{const e=(0,d.dL)();return!!(0,d.OP)(e)&&(e.removeText(),!0)}),d.VN),e.registerCommand(d.Ew,(e=>{const t=(0,d.dL)();return!!(0,d.OP)(t)&&(t.formatText(e),!0)}),d.VN),e.registerCommand(d.RO,(e=>{const t=(0,d.dL)();if(!(0,d.OP)(t)&&!(0,d.iO)(t))return!1;const n=t.getNodes();for(const r of n){const t=C(r,(e=>(0,d.F7)(e)&&!e.isInline()));null!==t&&t.setFormat(e)}return!0}),d.VN),e.registerCommand(d.WH,(e=>{const t=(0,d.dL)();return!!(0,d.OP)(t)&&(t.insertLineBreak(e),!0)}),d.VN),e.registerCommand(d.K0,(()=>{const e=(0,d.dL)();return!!(0,d.OP)(e)&&(e.insertParagraph(),!0)}),d.VN),e.registerCommand(d.cA,(()=>((0,d.od)([(0,d.S3)()]),!0)),d.VN),e.registerCommand(d.PU,(()=>Ue((e=>{const t=e.getIndent();e.setIndent(t+1)}))),d.VN),e.registerCommand(d.cz,(()=>Ue((e=>{const t=e.getIndent();t>0&&e.setIndent(t-1)}))),d.VN),e.registerCommand(d._0,(e=>{const t=(0,d.dL)();if((0,d.iO)(t)&&!je(e.target)){const e=t.getNodes();if(e.length>0)return e[0].selectPrevious(),!0}else if((0,d.OP)(t)){const n=(0,d.fL)(t.focus,!0);if(!e.shiftKey&&(0,d.k$)(n)&&!n.isIsolated()&&!n.isInline())return n.selectPrevious(),e.preventDefault(),!0}return!1}),d.VN),e.registerCommand(d.Zb,(e=>{const t=(0,d.dL)();if((0,d.iO)(t)){const e=t.getNodes();if(e.length>0)return e[0].selectNext(0,0),!0}else if((0,d.OP)(t)){if(function(e){const t=e.focus;return"root"===t.key&&t.offset===(0,d.Gv)().getChildrenSize()}(t))return e.preventDefault(),!0;const n=(0,d.fL)(t.focus,!1);if(!e.shiftKey&&(0,d.k$)(n)&&!n.isIsolated()&&!n.isInline())return n.selectNext(),e.preventDefault(),!0}return!1}),d.VN),e.registerCommand(d.u$,(e=>{const t=(0,d.dL)();if((0,d.iO)(t)){const n=t.getNodes();if(n.length>0)return e.preventDefault(),n[0].selectPrevious(),!0}if(!(0,d.OP)(t))return!1;if((0,ue.pi)(t,!0)){const n=e.shiftKey;return e.preventDefault(),(0,ue.i0)(t,n,!0),!0}return!1}),d.VN),e.registerCommand(d.Nm,(e=>{const t=(0,d.dL)();if((0,d.iO)(t)&&!je(e.target)){const n=t.getNodes();if(n.length>0)return e.preventDefault(),n[0].selectNext(0,0),!0}if(!(0,d.OP)(t))return!1;const n=e.shiftKey;return!!(0,ue.pi)(t,!1)&&(e.preventDefault(),(0,ue.i0)(t,n,!1),!0)}),d.VN),e.registerCommand(d.aR,(t=>{if(je(t.target))return!1;const n=(0,d.dL)();if(!(0,d.OP)(n))return!1;t.preventDefault();const{anchor:r}=n,o=r.getNode();return n.isCollapsed()&&0===r.offset&&!(0,d.wd)(o)&&b(o).getIndent()>0?e.dispatchCommand(d.cz,void 0):e.dispatchCommand(d.Mt,!0)}),d.VN),e.registerCommand(d.MK,(t=>{if(je(t.target))return!1;const n=(0,d.dL)();return!!(0,d.OP)(n)&&(t.preventDefault(),e.dispatchCommand(d.Mt,!1))}),d.VN),e.registerCommand(d.XN,(t=>{const n=(0,d.dL)();if(!(0,d.OP)(n))return!1;if(null!==t){if((Le||Pe||De)&&Oe)return!1;if(t.preventDefault(),t.shiftKey)return e.dispatchCommand(d.WH,!1)}return e.dispatchCommand(d.K0,void 0)}),d.VN),e.registerCommand(d.Zq,(()=>{const t=(0,d.dL)();return!!(0,d.OP)(t)&&(e.blur(),!0)}),d.VN),e.registerCommand(d.zD,(t=>{const[,n]=Ke(t);if(n.length>0){const r=Ee(t.clientX,t.clientY);if(null!==r){const{offset:t,node:o}=r,i=(0,d.Xo)(o);if(null!==i){const e=(0,d.vN)();if((0,d.Gg)(i))e.anchor.set(i.getKey(),t,"text"),e.focus.set(i.getKey(),t,"text");else{const t=i.getParentOrThrow().getKey(),n=i.getIndexWithinParent()+1;e.anchor.set(t,n,"element"),e.focus.set(t,n,"element")}const n=(0,d.S9)(e);(0,d.oq)(n)}e.dispatchCommand(Me,n)}return t.preventDefault(),!0}const r=(0,d.dL)();return!!(0,d.OP)(r)}),d.VN),e.registerCommand(d.XI,(e=>{const[t]=Ke(e),n=(0,d.dL)();return!(t&&!(0,d.OP)(n))}),d.VN),e.registerCommand(d.kE,(e=>{const[t]=Ke(e),n=(0,d.dL)();if(t&&!(0,d.OP)(n))return!1;const r=Ee(e.clientX,e.clientY);if(null!==r){const t=(0,d.Xo)(r.node);(0,d.k$)(t)&&e.preventDefault()}return!0}),d.VN),e.registerCommand(d.Hr,(()=>((0,d.UL)(),!0)),d.VN),e.registerCommand(d.LV,(t=>(we(e,w(t,ClipboardEvent)?t:null),!0)),d.VN),e.registerCommand(d.dR,(t=>(async function(e,t){await we(t,w(e,ClipboardEvent)?e:null),t.update((()=>{const e=(0,d.dL)();(0,d.OP)(e)?e.removeText():(0,d.iO)(e)&&e.getNodes().forEach((e=>e.remove()))}))}(t,e),!0)),d.VN),e.registerCommand(d.A1,(t=>{const[,n,r]=Ke(t);return n.length>0&&!r?(e.dispatchCommand(Me,n),!0):!(0,d.GA)(t.target)&&null!==(0,d.dL)()&&(function(e,t){e.preventDefault(),t.update((()=>{const n=(0,d.dL)(),r=w(e,InputEvent)||w(e,KeyboardEvent)?null:e.clipboardData;null!=r&&null!==n&&xe(r,n,t)}),{tag:"paste"})}(t,e),!0)}),d.VN))}(e),function(e){const t=window.location.origin,n=n=>{if(n.origin!==t)return;const r=e.getRootElement();if(document.activeElement!==r)return;const o=n.data;if("string"==typeof o){let t;try{t=JSON.parse(o)}catch(i){return}if(t&&"nuanria_messaging"===t.protocol&&"request"===t.type){const r=t.payload;if(r&&"makeChanges"===r.functionId){const t=r.args;if(t){const[r,o,i,s,l,a]=t;e.update((()=>{const e=(0,d.dL)();if((0,d.OP)(e)){const t=e.anchor;let a=t.getNode(),c=0,u=0;if((0,d.Gg)(a)&&r>=0&&o>=0&&(c=r,u=r+o,e.setTextNodeRange(a,c,a,u)),c===u&&""===i||(e.insertRawText(i),a=t.getNode()),(0,d.Gg)(a)){c=s,u=s+l;const t=a.getTextContentSize();c=c>t?t:c,u=u>t?t:u,e.setTextNodeRange(a,c,a,u)}n.stopImmediatePropagation()}}))}}}}};return window.addEventListener("message",n,!0),()=>{window.removeEventListener("message",n,!0)}}(e))),[e])}function zt({contentEditable:e,placeholder:t,ErrorBoundary:n}){const[o]=He(),i=function(e,t){const[n,o]=(0,r.useState)((()=>e.getDecorators()));return Dt((()=>e.registerDecoratorListener((e=>{(0,At.flushSync)((()=>{o(e)}))}))),[e]),(0,r.useEffect)((()=>{o(e.getDecorators())}),[e]),(0,r.useMemo)((()=>{const o=[],i=Object.keys(n);for(let s=0;s<i.length;s++){const l=i[s],a=r.createElement(t,{onError:t=>e._onError(t)},r.createElement(r.Suspense,{fallback:null},n[l])),c=e.getElementByKey(l);null!==c&&o.push((0,At.createPortal)(a,c,l))}return o}),[t,n,e])}(o,n);return Rt(o),r.createElement(r.Fragment,null,e,r.createElement($t,{content:t}),i)}function $t({content:e}){const[t]=He(),n=function(e){const[t,n]=(0,r.useState)((()=>It(e)));return Dt((()=>{function t(){const t=It(e);n(t)}return t(),_(e.registerUpdateListener((()=>{t()})),e.registerEditableListener((()=>{t()})))}),[e]),t}(t),o=function(e){const[t]=He(),n=(0,r.useMemo)((()=>e(t)),[t,e]),o=(0,r.useRef)(n.initialValueFn()),[i,s]=(0,r.useState)(o.current);return Pt((()=>{const{initialValueFn:e,subscribe:t}=n,r=e();return o.current!==r&&(o.current=r,s(r)),t((e=>{o.current=e,s(e)}))}),[n,e]),i}(Lt),i=Mt();return!n||i?null:"function"==typeof e?e(o):e}function Wt(e,t){return Wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wt(e,t)}var Zt={error:null},Kt=function(e){var t,n;function o(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).state=Zt,t.resetErrorBoundary=function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];null==t.props.onReset||(e=t.props).onReset.apply(e,r),t.reset()},t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,Wt(t,n),o.getDerivedStateFromError=function(e){return{error:e}};var i=o.prototype;return i.reset=function(){this.setState(Zt)},i.componentDidCatch=function(e,t){var n,r;null==(n=(r=this.props).onError)||n.call(r,e,t)},i.componentDidUpdate=function(e,t){var n,r,o,i,s=this.state.error,l=this.props.resetKeys;null!==s&&null!==t.error&&(void 0===(o=e.resetKeys)&&(o=[]),void 0===(i=l)&&(i=[]),o.length!==i.length||o.some((function(e,t){return!Object.is(e,i[t])})))&&(null==(n=(r=this.props).onResetKeysChange)||n.call(r,e.resetKeys,l),this.reset())},i.render=function(){var e=this.state.error,t=this.props,n=t.fallbackRender,o=t.FallbackComponent,i=t.fallback;if(null!==e){var s={error:e,resetErrorBoundary:this.resetErrorBoundary};if(r.isValidElement(i))return i;if("function"==typeof n)return n(s);if(o)return r.createElement(o,s);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},o}(r.Component);function Ut({children:e,onError:t}){return r.createElement(Kt,{fallback:r.createElement("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"}},"An error was thrown."),onError:t},e)}function jt(){const[e]=He();return(0,r.useEffect)((()=>e.registerCommand(st,(e=>{const t=(0,d.dL)();if(!(0,d.OP)(t))return!1;if(null!==t.focus.getNode()){S(ut())}return!0}),d.VN)),[e]),null}var Vt=n(97582),Jt=n(93946),Ht=n(98456),Gt=n(67564),qt=n(41567),Xt=n(24085),Yt=n(53704),Qt=n(68787),en=n(63862),tn=n(50635),nn=n(20377);const rn="SCEditor",on=(0,d.fA)(),sn=(0,tn.xR)((0,r.forwardRef)(((e,t)=>{var{progress:n=null}=e,o=(0,Vt._T)(e,["progress"]);return r.createElement(Jt.Z,Object.assign({},o,{"aria-label":"upload image",ref:t}),n?r.createElement(Ht.Z,{variant:"determinate",value:n,size:"1rem"}):r.createElement(Gt.Z,{color:"inherit"},"image"))})));const ln={root:`${rn}-image-plugin-root`},an=(0,o.ZP)((function({editor:e,className:t=""}){const n=(0,Yt.RM)(),o=(0,Qt.LD)(),[i,s]=(0,r.useState)({}),{enqueueSnackbar:l}=(0,nn.Ds)();return o.user?r.createElement(qt.ZP,{destination:{url:`${n.settings.portal}${Xt.Z.ComposerChunkUploadMedia.url()}`,headers:Object.assign({},n.settings.session&&n.settings.session.authToken&&{Authorization:`Bearer ${n.settings.session.authToken.accessToken}`}),method:Xt.Z.ComposerChunkUploadMedia.method},chunkSize:204800,multiple:!0,accept:"image/*",fileFilter:(e,t,n)=>e.type.startsWith("image/")},r.createElement(en.Z,{type:"eimage",onSuccess:t=>{const n={altText:t.title,src:t.image,width:t.image_width,height:t.image_height};e.focus(),e.dispatchCommand(on,n)},onProgress:e=>{s(Object.assign({},e))},onError:(e,t)=>{l(t,{variant:"error",autoHideDuration:3e3})}}),r.createElement(sn,{className:t,extraProps:{disabled:0!==Object.keys(i).length,progress:0!==Object.keys(i).length?Object.values(i)[0].completed:null}})):null}),{name:rn,slot:"ImagePluginRoot"})((()=>({})));function cn(){const[e]=He();return(0,r.useEffect)((()=>{if(e.hasNodes([tt]))return e.registerCommand(on,(e=>(S(nt({src:e.src,altText:e.altText,maxWidth:"100%",width:e.width,height:e.height})),!0)),d.VN)}),[e]),e.hasNodes([tt])?r.createElement(an,{editor:e,className:ln.root}):null}var un=n(2734),dn=n(61730),fn=n(14564),hn=n(16628),gn=n(44465);const pn={root:`${rn}-emoji-plugin-root`},mn=(0,o.ZP)((function({editor:e,className:t=""}){const n=(0,un.Z)(),o=(0,dn.Z)(n.breakpoints.down("md")),[i,s]=(0,r.useState)(!1);return o?null:r.createElement(r.Fragment,null,r.createElement(Jt.Z,{className:t,onClick:e=>{s(e.currentTarget)}},r.createElement(Gt.Z,null,"sentiment_satisfied_alt")),r.createElement(fn.ZP,{open:Boolean(i),anchorEl:i,onClose:()=>s(null),TransitionComponent:hn.Z,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"left"},sx:e=>({zIndex:e.zIndex.tooltip})},r.createElement(gn.Z,{onEmojiClick:(t,n)=>{e.focus(),e.dispatchCommand(d.yF,t.emoji)}})))}),{name:rn,slot:"EmojiPluginRoot"})((()=>({})));function _n(){const[e]=He();return r.createElement(mn,{editor:e,className:pn.root})}const yn=function({defaultValue:e}){const[t]=He();return(0,r.useEffect)((()=>{e&&t.update((()=>{const n=(new DOMParser).parseFromString(e,"text/html"),r=de(t,n),o=(0,d.Gv)();if(r.length<=1){const e=(0,d.BE)();r.forEach((t=>e.append(t))),o.getFirstChild().replace(e).selectEnd()}else o.getFirstChild().remove(),r.forEach((e=>o.append(e))),o.selectEnd()}))}),[]),null},vn="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect;function xn({ignoreHistoryMergeTagChange:e=!0,ignoreSelectionChange:t=!1,onChange:n}){const[r]=He();return vn((()=>{if(n)return r.registerUpdateListener((({editorState:o,dirtyElements:i,dirtyLeaves:s,prevEditorState:l,tags:a})=>{t&&0===i.size&&0===s.size||e&&a.has("history-merge")||l.isEmpty()||n(o,r,a)}))}),[r,e,t,n]),null}const bn=e=>{const{onChange:t}=e;return r.createElement(xn,{onChange:(e,n)=>{e.read((()=>{const e=fe(n);t(e)}))}})};var Cn=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}((function(e){const t=new URLSearchParams;t.append("code",e);for(let n=1;n<arguments.length;n++)t.append("v",arguments[n]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}));function Sn(e,t){for(let n=0;n<t.length;n++){const r=t[n](e);if(r)return r}return null}const wn=/[.,;\s]/;function kn(e){return wn.test(e)}function En(e){return kn(e[e.length-1])}function Tn(e){return kn(e[0])}function Nn(e){let t=e.getPreviousSibling();return(0,d.F7)(t)&&(t=t.getLastDescendant()),null===t||(0,d.A3)(t)||(0,d.Gg)(t)&&En(t.getTextContent())}function On(e){let t=e.getNextSibling();return(0,d.F7)(t)&&(t=t.getFirstDescendant()),null===t||(0,d.A3)(t)||(0,d.Gg)(t)&&Tn(t.getTextContent())}function Pn(e,t,n,r){return!!(e>0?kn(n[e-1]):Nn(r[0]))&&(t<n.length?kn(n[t]):On(r[r.length-1]))}function Ln(e,t,n){const r=[],o=[],i=[];let s=0,l=0;const a=[...e];for(;a.length>0;){const e=a[0],c=e.getTextContent().length,u=l;l+c<=t?(r.push(e),s+=c):u>=n?i.push(e):o.push(e),l+=c,a.shift()}return[s,r,o,i]}function An(e,t,n,r){const o=L(r.url,r.attributes);if(1===e.length){let i,s=e[0];0===t?[i,s]=s.splitText(n):[,i,s]=s.splitText(t,n);const l=(0,d.MX)(r.text);return l.setFormat(i.getFormat()),l.setDetail(i.getDetail()),l.setStyle(i.getStyle()),o.append(l),i.replace(o),s}if(e.length>1){const r=e[0];let i,s=r.getTextContent().length;0===t?i=r:[,i]=r.splitText(t);const l=[];let a;for(let t=1;t<e.length;t++){const r=e[t],o=r.getTextContent().length,i=s;if(i<n)if(s+o<=n)l.push(r);else{const[e,t]=r.splitText(n-i);l.push(e),a=t}s+=o}const c=(0,d.dL)(),u=c?c.getNodes().find(d.Gg):void 0,f=(0,d.MX)(i.getTextContent());return f.setFormat(i.getFormat()),f.setDetail(i.getDetail()),f.setStyle(i.getStyle()),o.append(f,...l),u&&u===i&&((0,d.OP)(c)?f.select(c.anchor.offset,c.focus.offset):(0,d.iO)(c)&&f.select(0,f.getTextContent().length)),i.replace(o),a}}function Dn(e,t,n){const r=e.getChildren(),o=r.length;for(let a=0;a<o;a++){const t=r[a];if(!(0,d.Gg)(t)||!t.isSimpleText())return Mn(e),void n(null,e.getURL())}const i=e.getTextContent(),s=Sn(i,t);if(null===s||s.text!==i)return Mn(e),void n(null,e.getURL());if(!Nn(e)||!On(e))return Mn(e),void n(null,e.getURL());const l=e.getURL();if(l!==s.url&&(e.setURL(s.url),n(s.url,l)),s.attributes){const t=e.getRel();t!==s.attributes.rel&&(e.setRel(s.attributes.rel||null),n(s.attributes.rel||null,t));const r=e.getTarget();r!==s.attributes.target&&(e.setTarget(s.attributes.target||null),n(s.attributes.target||null,r))}}function Mn(e){const t=e.getChildren();for(let n=t.length-1;n>=0;n--)e.insertAfter(t[n]);return e.remove(),t.map((e=>e.getLatest()))}function Fn({matchers:e,onChange:t}){const[n]=He();return function(e,t,n){(0,r.useEffect)((()=>{e.hasNodes([P])||Cn(77);const r=(e,t)=>{n&&n(e,t)};return _(e.registerNodeTransform(d.R2,(e=>{const n=e.getParentOrThrow(),o=e.getPreviousSibling();if(A(n))Dn(n,t,r);else if(!O(n)){if(e.isSimpleText()&&(Tn(e.getTextContent())||!A(o))){const n=function(e){const t=[e];let n=e.getNextSibling();for(;null!==n&&(0,d.Gg)(n)&&n.isSimpleText()&&(t.push(n),!/[\s]/.test(n.getTextContent()));)n=n.getNextSibling();return t}(e);!function(e,t,n){let r=[...e];const o=r.map((e=>e.getTextContent())).join("");let i,s=o,l=0;for(;(i=Sn(s,t))&&null!==i;){const e=i.index,t=e+i.length;if(Pn(l+e,l+t,o,r)){const[o,,s,a]=Ln(r,l+e,l+t),c=An(s,l+e-o,l+t-o,i);r=c?[c,...a]:a,n(i.url,null),l=0}else l+=t;s=s.substring(t)}}(n,t,r)}!function(e,t,n){const r=e.getPreviousSibling(),o=e.getNextSibling(),i=e.getTextContent();A(r)&&!Tn(i)&&(r.append(e),Dn(r,t,n),n(null,r.getURL())),A(o)&&!En(i)&&(Mn(o),Dn(o,t,n),n(null,o.getURL()))}(e,t,r)}})))}),[e,t,n])}(n,e,t),null}const Bn=/((https?:\/\/(www\.)?)|(www\.))[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,In=/(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/,Rn=[e=>{const t=Bn.exec(e);return t&&{index:t.index,length:t[0].length,text:t[0],url:t[0]}},e=>{const t=In.exec(e);return t&&{index:t.index,length:t[0].length,text:t[0],url:`mailto:${t[0]}`}}];function zn(){return r.createElement(Fn,{matchers:Rn})}var $n=n(24243),Wn=n(87952),Zn=n(78385),Kn=n(23926);const Un="\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'\"~=<>_:;",jn=Un,Vn=new RegExp("(^|[^#])((?:"+("\\b[A-Z][^\\s"+Un+"]")+"{1,})$)"),Jn=jn,Hn=["@","\\uff20"].join(""),Gn="[^"+Hn+Jn+"\\s]",qn=new RegExp("(^|\\s|\\()(["+Hn+"]((?:"+Gn+("(?:\\.[ |$]| |["+Jn+"]|)")+"){0,75}))$"),Xn=new RegExp("(^|\\s|\\()(["+Hn+"]((?:"+Gn+"){0,50}))$");function Yn(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return n.top>r.top&&n.top<r.bottom}function Qn(e,t,n,o){const[i]=He();(0,r.useEffect)((()=>{if(null!=t&&null!=e){const e=i.getRootElement(),r=null!=e?function(e,t){let n=getComputedStyle(e);const r="absolute"===n.position,o=t?/(auto|scroll|hidden)/:/(auto|scroll)/;if("fixed"===n.position)return document.body;for(let i=e;i=i.parentElement;)if(n=getComputedStyle(i),(!r||"static"!==n.position)&&o.test(n.overflow+n.overflowY+n.overflowX))return i;return document.body}(e,!1):document.body;let s=!1,l=Yn(t,r);const a=function(){s||(window.requestAnimationFrame((function(){n(),s=!1})),s=!0);const e=Yn(t,r);e!==l&&(l=e,null!=o&&o(e))},c=new ResizeObserver(n);return window.addEventListener("resize",n),document.addEventListener("scroll",a,{capture:!0,passive:!0}),c.observe(t),()=>{c.unobserve(t),window.removeEventListener("resize",n),document.removeEventListener("scroll",a,!0)}}}),[t,i,o,n,e])}const er=new Map;function tr({index:e,isHovered:t,isSelected:n,onClick:o,onMouseEnter:i,onMouseLeave:s,result:l}){const a=(0,r.useRef)(null);return r.createElement("li",{key:l.id,tabIndex:-1,className:c()("item",{selected:n,hovered:t}),ref:a,role:"option","aria-selected":n,id:"typeahead-item-"+e,onMouseEnter:i,onMouseLeave:s,onClick:o},r.createElement(Wn.Z,{alt:l.username,src:l.avatar})," ",l.username)}function nr(e){const t=function(e,t){let n=qn.exec(e);if(null===n&&(n=Xn.exec(e)),null!==n){const e=n[1],r=n[3];if(r.length>=t)return{leadOffset:n.index+e.length,matchingString:r,replaceableString:n[2]}}return null}(e,1);return null===t?function(e,t){const n=Vn.exec(e);if(null!==n){const e=n[1],r=n[2];if(null!=r&&r.length>=t)return{leadOffset:n.index+e.length,matchingString:r,replaceableString:r}}return null}(e,3):t}const rr={root:`${rn}-mention-plugin-root`},or=(0,o.ZP)((function({close:e,editor:t,resolution:n,className:o=""}){const i=(0,r.useRef)(null),s=n.match,l=function(e){const[t,n]=(0,r.useState)(null);return(0,r.useEffect)((()=>{const t=er.get(e);null!==t&&(void 0===t?(er.set(e,null),$n.Z.request({url:Xt.Z.UserSearch.url(),method:Xt.Z.UserSearch.method,params:{user:e,limit:5}}).then((t=>{er.set(e,t.data.results),n(t.data.results)}))):n(t))}),[e]),t}(s.matchingString),[a,c]=(0,r.useState)(null),[u,f]=(0,r.useState)(null),h=(0,r.useCallback)((n=>{if(n=n||a,null===l||null===n)return;const r=l[n];e(),function(e,t,n){e.update((()=>{const e=(0,d.dL)();if(!(0,d.OP)(e)||!e.isCollapsed())return;const r=e.anchor;if("text"!==r.type)return;const o=r.getNode();if(!o.isSimpleText())return;const i=r.offset,s=o.getTextContent().slice(0,i),l=n.replaceableString.length,a=i-function(e,t,n){let r=n;for(let o=r;o<=t.length;o++)e.substr(-o)===t.substr(0,o)&&(r=o);return r}(s,t.username,l);if(a<0)return;let c;0===a?[c]=o.splitText(i):[,c]=o.splitText(a,i);const u=it(t);c.replace(u),u.select()}))}(t,r,s)}),[e,s,t,l,a]),g=(0,r.useCallback)((e=>{const n=t.getRootElement();null!==n&&(n.setAttribute("aria-activedescendant","typeahead-item-"+e),c(e))}),[t]);return(0,r.useEffect)((()=>()=>{const e=t.getRootElement();null!==e&&e.removeAttribute("aria-activedescendant")}),[t]),Dt((()=>{null===l?c(null):null===a&&g(0)}),[l,a,g]),(0,r.useEffect)((()=>_(t.registerCommand(d.Zb,(e=>{const t=e;return null!==l&&null!==a&&a<4&&a!==l.length-1&&(g(a+1),t.preventDefault(),t.stopImmediatePropagation()),!0}),d.KB),t.registerCommand(d._0,(e=>{const t=e;return null!==l&&null!==a&&0!==a&&(g(a-1),t.preventDefault(),t.stopImmediatePropagation()),!0}),d.KB),t.registerCommand(d.Zq,(t=>{const n=t;return null!==l&&null!==a&&(n.preventDefault(),n.stopImmediatePropagation(),e(),!0)}),d.KB),t.registerCommand(d.dB,(e=>{const t=e;return null!==l&&null!==a&&(t.preventDefault(),t.stopImmediatePropagation(),h(),!0)}),d.KB),t.registerCommand(d.XN,(e=>null!==l&&null!==a&&(null!==e&&(e.preventDefault(),e.stopImmediatePropagation()),h(),!0)),d.KB))),[h,e,t,l,a,g]),null===l?null:r.createElement("div",{className:o,"aria-label":"Suggested mentions",ref:i,role:"listbox"},r.createElement("ul",null,l.slice(0,5).map(((e,t)=>r.createElement(tr,{index:t,isHovered:t===u,isSelected:t===a,onClick:()=>{h(t)},onMouseEnter:()=>{f(t)},onMouseLeave:()=>{f(null)},key:e.id,result:e})))))}),{name:rn,slot:"MentionPluginRoot"})((()=>({})));function ir(e,t=null){const[n,o]=(0,r.useState)(null),i=function(e,t,n){const[o,i]=(0,r.useState)(null),[s]=He(),l=(0,r.useCallback)((()=>{const t=s.getRootElement(),r=o,l=r.firstChild;if(null!==t&&null!==e){const{left:o,top:s,width:a,height:c}=e.range.getBoundingClientRect();if(r.style.top=`${s+window.scrollY}px`,r.style.left=`${o+window.scrollX}px`,r.style.height=`${c}px`,r.style.width=`${a}px`,null!==l){const e=l.getBoundingClientRect(),n=e.height,i=e.width,a=t.getBoundingClientRect();o+i>a.right&&(r.style.left=`${a.right-i+window.scrollX}px`);const u=10;(s+n>window.innerHeight||s+n>a.bottom)&&s-a.top>n&&(r.style.top=s-n+window.scrollY-(c+u)+"px")}r.isConnected||(null!=n&&(r.className=n),r.setAttribute("aria-label","Typeahead menu"),r.setAttribute("id","typeahead-menu"),r.setAttribute("role","listbox"),r.style.display="block",r.style.position="absolute",document.body.append(r)),i(r),t.setAttribute("aria-controls","typeahead-menu")}}),[o,s,e,n]);(0,r.useEffect)((()=>{e&&!o&&i(document.createElement("div"))}),[e]),(0,r.useEffect)((()=>{const t=s.getRootElement();if(null!==e&&o)return l(),()=>{null!==t&&t.removeAttribute("aria-controls");const e=o;null!==e&&e.isConnected&&e.remove()}}),[o,s,l,e]);const a=(0,r.useCallback)((n=>{null!==e&&(n||t(null))}),[e,t]);return Qn(e,o,l,a),o}(n,o,t);(0,r.useEffect)((()=>{if(!e.hasNodes([ot]))throw new Error("MentionsPlugin: MentionNode not registered on editor")}),[e]),(0,r.useEffect)((()=>{let t=document.createRange(),n=null;const r=e.registerUpdateListener((({prevEditorState:r})=>{if(r.isEmpty())return;const i=t,s=function(e){let t=null;return e.getEditorState().read((()=>{const e=(0,d.dL)();(0,d.OP)(e)&&(t=function(e){const t=e.anchor;if("text"!==t.type)return null;const n=t.getNode();if(!n.isSimpleText())return null;const r=t.offset;return n.getTextContent().slice(0,r)}(e))})),t}(e);if(s===n||null===i)return;if(n=s,null===s)return;const l=nr(s);if(null!==l&&!function(e,t){return 0===t&&e.getEditorState().read((()=>{const e=(0,d.dL)();if((0,d.OP)(e)){const t=e.anchor.getNode().getPreviousSibling();return(0,d.Gg)(t)&&t.isTextEntity()}return!1}))}(e,l.leadOffset)){const e=function(e,t){const n=window.getSelection();if(null===n||!n.isCollapsed)return!1;const r=n.anchorNode,o=e.leadOffset,i=n.anchorOffset;if(null==r||null==i)return!1;try{t.setStart(r,o),t.setEnd(r,i)}catch(s){return!1}return!0}(l,i);if(null!==e)return void o({match:l,range:i})}o(null)}));return()=>{t=null,r()}}),[e]);const s=(0,r.useCallback)((()=>{o(null)}),[n]);return null===n||null===e?null:i?r.createElement(Kn.d,{onClickAway:s},r.createElement(Zn.h,{container:i},r.createElement(or,{close:s,resolution:n,editor:e,className:rr.root}))):null}function sr(){const[e]=He();return ir(e)}function lr({validateUrl:e}){const[t]=He();return(0,r.useEffect)((()=>{if(!t.hasNodes([E]))throw new Error("LinkPlugin: LinkNode not registered on editor");return _(t.registerCommand(D,(t=>{if(null===t)return M(t),!0;if("string"==typeof t)return!(void 0!==e&&!e(t)||(M(t),0));{const{url:e,target:n,rel:r,title:o}=t;return M(e,{rel:r,target:n,title:o}),!0}}),d.KB),void 0!==e?t.registerCommand(d.A1,(n=>{const r=(0,d.dL)();if(!(0,d.OP)(r)||r.isCollapsed()||!w(n,ClipboardEvent))return!1;const o=n;if(null===o.clipboardData)return!1;const i=o.clipboardData.getData("text");return!!e(i)&&!r.getNodes().some((e=>(0,d.F7)(e)))&&(t.dispatchCommand(D,i),n.preventDefault(),!0)}),d.KB):()=>{})}),[t,e]),null}const ar=(0,r.forwardRef)(((e,t)=>{const[n]=He();return(0,r.useImperativeHandle)(t,(()=>({focus:()=>{n.focus()}}))),null}));class cr extends d.Ij{constructor(e,t){super(t),this.__format=e||""}exportJSON(){return{format:this.__format||"",type:"decorator-block",version:1}}canIndent(){return!1}createDOM(){return document.createElement("div")}updateDOM(){return!1}setFormat(e){this.getWritable().__format=e}isInline(){return!1}}const ur=/^(\d+(?:\.\d+)?)px$/,dr=0,fr=1;class hr extends d.HX{static getType(){return"tablecell"}static clone(e){const t=new hr(e.__headerState,e.__colSpan,e.__width,e.__key);return t.__rowSpan=e.__rowSpan,t.__backgroundColor=e.__backgroundColor,t}static importDOM(){return{td:e=>({conversion:gr,priority:0}),th:e=>({conversion:gr,priority:0})}}static importJSON(e){const t=e.colSpan||1,n=e.rowSpan||1,r=pr(e.headerState,t,e.width||void 0);return r.__rowSpan=n,r.__backgroundColor=e.backgroundColor||null,r}constructor(e=dr,t=1,n,r){super(r),this.__colSpan=t,this.__rowSpan=1,this.__headerState=e,this.__width=n,this.__backgroundColor=null}createDOM(e){const t=document.createElement(this.getTag());return this.__width&&(t.style.width=`${this.__width}px`),this.__colSpan>1&&(t.colSpan=this.__colSpan),this.__rowSpan>1&&(t.rowSpan=this.__rowSpan),null!==this.__backgroundColor&&(t.style.backgroundColor=this.__backgroundColor),y(t,e.theme.tableCell,this.hasHeader()&&e.theme.tableCellHeader),t}exportDOM(e){const{element:t}=super.exportDOM(e);if(t){const e=t,n=700,r=this.getParentOrThrow().getChildrenSize();e.style.border="1px solid black",this.__colSpan>1&&(e.colSpan=this.__colSpan),this.__rowSpan>1&&(e.rowSpan=this.__rowSpan),e.style.width=`${this.getWidth()||Math.max(90,n/r)}px`,e.style.verticalAlign="top",e.style.textAlign="start";const o=this.getBackgroundColor();null!==o?e.style.backgroundColor=o:this.hasHeader()&&(e.style.backgroundColor="#f2f3f5")}return{element:t}}exportJSON(){return{...super.exportJSON(),backgroundColor:this.getBackgroundColor(),colSpan:this.__colSpan,headerState:this.__headerState,rowSpan:this.__rowSpan,type:"tablecell",width:this.getWidth()}}getColSpan(){return this.__colSpan}setColSpan(e){return this.getWritable().__colSpan=e,this}getRowSpan(){return this.__rowSpan}setRowSpan(e){return this.getWritable().__rowSpan=e,this}getTag(){return this.hasHeader()?"th":"td"}setHeaderStyles(e){return this.getWritable().__headerState=e,this.__headerState}getHeaderStyles(){return this.getLatest().__headerState}setWidth(e){return this.getWritable().__width=e,this.__width}getWidth(){return this.getLatest().__width}getBackgroundColor(){return this.getLatest().__backgroundColor}setBackgroundColor(e){this.getWritable().__backgroundColor=e}toggleHeaderStyle(e){const t=this.getWritable();return(t.__headerState&e)===e?t.__headerState-=e:t.__headerState+=e,t}hasHeaderState(e){return(this.getHeaderStyles()&e)===e}hasHeader(){return this.getLatest().__headerState!==dr}updateDOM(e){return e.__headerState!==this.__headerState||e.__width!==this.__width||e.__colSpan!==this.__colSpan||e.__rowSpan!==this.__rowSpan||e.__backgroundColor!==this.__backgroundColor}isShadowRoot(){return!0}collapseAtStart(){return!0}canBeEmpty(){return!1}canIndent(){return!1}}function gr(e){const t=e,n=e.nodeName.toLowerCase();let r;ur.test(t.style.width)&&(r=parseFloat(t.style.width));const o=pr("th"===n?fr:dr,t.colSpan,r);o.__rowSpan=t.rowSpan;const i=t.style.backgroundColor;""!==i&&(o.__backgroundColor=i);const s=t.style,l=s.textDecoration.split(" "),a="700"===s.fontWeight||"bold"===s.fontWeight,c=l.includes("line-through"),u="italic"===s.fontStyle,f=l.includes("underline");return{after:e=>(0===e.length&&e.push((0,d.BE)()),e),forChild:(e,t)=>{if(mr(t)&&!(0,d.F7)(e)){const t=(0,d.BE)();return(0,d.A3)(e)&&"\n"===e.getTextContent()?null:((0,d.Gg)(e)&&(a&&e.toggleFormat("bold"),c&&e.toggleFormat("strikethrough"),u&&e.toggleFormat("italic"),f&&e.toggleFormat("underline")),t.append(e),t)}return e},node:o}}function pr(e,t=1,n){return(0,d.U2)(new hr(e,t,n))}function mr(e){return e instanceof hr}(0,d.fA)("INSERT_TABLE_COMMAND");class _r extends d.HX{static getType(){return"tablerow"}static clone(e){return new _r(e.__height,e.__key)}static importDOM(){return{tr:e=>({conversion:yr,priority:0})}}static importJSON(e){return vr(e.height)}constructor(e,t){super(t),this.__height=e}exportJSON(){return{...super.exportJSON(),...this.getHeight()&&{height:this.getHeight()},type:"tablerow",version:1}}createDOM(e){const t=document.createElement("tr");return this.__height&&(t.style.height=`${this.__height}px`),y(t,e.theme.tableRow),t}isShadowRoot(){return!0}setHeight(e){return this.getWritable().__height=e,this.__height}getHeight(){return this.getLatest().__height}updateDOM(e){return e.__height!==this.__height}canBeEmpty(){return!1}canIndent(){return!1}}function yr(e){const t=e;let n;return ur.test(t.style.height)&&(n=parseFloat(t.style.height)),{node:vr(n)}}function vr(e){return(0,d.U2)(new _r(e))}function xr(e){return e instanceof _r}var br=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}((function(e){const t=new URLSearchParams;t.append("code",e);for(let n=1;n<arguments.length;n++)t.append("v",arguments[n]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}));"undefined"!=typeof window&&void 0!==window.document&&window.document.createElement;function Cr(e,t,n){const[r,o,i]=function(e,t,n){const r=[];let o=null,i=null;function s(e,s,l){const a={cell:l,startColumn:s,startRow:e},c=l.__rowSpan,u=l.__colSpan;for(let t=0;t<c;t++){void 0===r[e+t]&&(r[e+t]=[]);for(let n=0;n<u;n++)r[e+t][s+n]=a}null!==t&&t.is(l)&&(o=a),null!==n&&n.is(l)&&(i=a)}function l(e,t){return void 0===r[e]||void 0===r[e][t]}const a=e.getChildren();for(let c=0;c<a.length;c++){const e=a[c];xr(e)||br(146);const t=e.getChildren();let n=0;for(const r of t){for(mr(r)||br(147);!l(c,n);)n++;s(c,n,r),n+=r.__colSpan}}return[r,o,i]}(e,t,n);return null===o&&br(110),null===i&&br(111),[r,o,i]}function Sr(e){let t;if(e instanceof hr)t=e;else if("__type"in e){const n=C(e,mr);mr(n)||br(148),t=n}else{const n=C(e.getNode(),mr);mr(n)||br(148),t=n}const n=t.getParent();xr(n)||br(149);const r=n.getParent();return Lr(r)||br(150),[t,n,r]}function wr(e){const[t,,n]=Sr(e),r=n.getChildren(),o=r.length,i=r[0].getChildren().length,s=new Array(o);for(let l=0;l<o;l++)s[l]=new Array(i);for(let l=0;l<o;l++){const e=r[l].getChildren();let n=0;for(let r=0;r<e.length;r++){for(;s[l][n];)n++;const o=e[r],i=o.__rowSpan||1,a=o.__colSpan||1;for(let e=0;e<i;e++)for(let t=0;t<a;t++)s[l+e][n+t]=o;if(t===o)return{colSpan:a,columnIndex:n,rowIndex:l,rowSpan:i};n+=a}}return null}class kr{constructor(e,t,n){this.anchor=t,this.focus=n,t._selection=this,n._selection=this,this._cachedNodes=null,this.dirty=!1,this.tableKey=e}getStartEndPoints(){return[this.anchor,this.focus]}isBackward(){return this.focus.isBefore(this.anchor)}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return!!Er(e)&&this.tableKey===e.tableKey&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)}set(e,t,n){this.dirty=!0,this.tableKey=e,this.anchor.key=t,this.focus.key=n,this._cachedNodes=null}clone(){return new kr(this.tableKey,this.anchor,this.focus)}isCollapsed(){return!1}extract(){return this.getNodes()}insertRawText(e){}insertText(){}insertNodes(e){const t=this.focus.getNode();(0,d.F7)(t)||br(151),(0,d.S9)(t.select(0,t.getChildrenSize())).insertNodes(e)}getShape(){const e=(0,d.gI)(this.anchor.key);mr(e)||br(152);const t=wr(e);null===t&&br(153);const n=(0,d.gI)(this.focus.key);mr(n)||br(154);const r=wr(n);null===r&&br(155);const o=Math.min(t.columnIndex,r.columnIndex),i=Math.max(t.columnIndex,r.columnIndex),s=Math.min(t.rowIndex,r.rowIndex),l=Math.max(t.rowIndex,r.rowIndex);return{fromX:Math.min(o,i),fromY:Math.min(s,l),toX:Math.max(o,i),toY:Math.max(s,l)}}getNodes(){const e=this._cachedNodes;if(null!==e)return e;const t=this.anchor.getNode(),n=this.focus.getNode(),r=C(t,mr),o=C(n,mr);mr(r)||br(152),mr(o)||br(154);const i=r.getParent();xr(i)||br(156);const s=i.getParent();Lr(s)||br(157);const l=o.getParents()[1];if(l!==s){if(s.isParentOf(o)){const e=l.getParent();null==e&&br(159),this.set(this.tableKey,o.getKey(),e.getKey())}else{const e=s.getParent();null==e&&br(158),this.set(this.tableKey,e.getKey(),o.getKey())}return this.getNodes()}const[a,c,u]=Cr(s,r,o);let f=Math.min(c.startColumn,u.startColumn),h=Math.min(c.startRow,u.startRow),g=Math.max(c.startColumn+c.cell.__colSpan-1,u.startColumn+u.cell.__colSpan-1),p=Math.max(c.startRow+c.cell.__rowSpan-1,u.startRow+u.cell.__rowSpan-1),m=f,_=h,y=f,v=h;function x(e){const{cell:t,startColumn:n,startRow:r}=e;f=Math.min(f,n),h=Math.min(h,r),g=Math.max(g,n+t.__colSpan-1),p=Math.max(p,r+t.__rowSpan-1)}for(;f<m||h<_||g>y||p>v;){if(f<m){const e=v-_,t=m-1;for(let n=0;n<=e;n++)x(a[_+n][t]);m=t}if(h<_){const e=y-m,t=_-1;for(let n=0;n<=e;n++)x(a[t][m+n]);_=t}if(g>y){const e=v-_,t=y+1;for(let n=0;n<=e;n++)x(a[_+n][t]);y=t}if(p>v){const e=y-m,t=v+1;for(let n=0;n<=e;n++)x(a[t][m+n]);v=t}}const b=[s];let S=null;for(let d=h;d<=p;d++)for(let e=f;e<=g;e++){const{cell:t}=a[d][e],n=t.getParent();xr(n)||br(160),n!==S&&b.push(n),b.push(t,...Tr(t)),S=n}return(0,d._$)()||(this._cachedNodes=b),b}getTextContent(){const e=this.getNodes();let t="";for(let n=0;n<e.length;n++)t+=e[n].getTextContent();return t}}function Er(e){return e instanceof kr}function Tr(e){const t=[],n=[e];for(;n.length>0;){const r=n.pop();void 0===r&&br(112),(0,d.F7)(r)&&n.unshift(...r.getChildren()),r!==e&&t.push(r)}return t}class Nr extends d.HX{static getType(){return"table"}static clone(e){return new Nr(e.__key)}static importDOM(){return{table:e=>({conversion:Or,priority:1})}}static importJSON(e){return Pr()}constructor(e){super(e)}exportJSON(){return{...super.exportJSON(),type:"table",version:1}}createDOM(e,t){const n=document.createElement("table");return y(n,e.theme.table),n}updateDOM(){return!1}exportDOM(e){return{...super.exportDOM(e),after:e=>{if(e){const t=e.cloneNode(),n=document.createElement("colgroup"),r=document.createElement("tbody");(0,d.Re)(e)&&r.append(...e.children);const o=this.getFirstChildOrThrow();if(!xr(o))throw new Error("Expected to find row node.");const i=o.getChildrenSize();for(let e=0;e<i;e++){const e=document.createElement("col");n.append(e)}return t.replaceChildren(n,r),t}}}}canBeEmpty(){return!1}isShadowRoot(){return!0}getCordsFromCellNode(e,t){const{rows:n,domRows:r}=t;for(let o=0;o<n;o++){const t=r[o];if(null==t)continue;const n=t.findIndex((t=>{if(!t)return;const{elem:n}=t;return(0,d.Xo)(n)===e}));if(-1!==n)return{x:n,y:o}}throw new Error("Cell not found in table.")}getDOMCellFromCords(e,t,n){const{domRows:r}=n,o=r[t];if(null==o)return null;const i=o[e];return null==i?null:i}getDOMCellFromCordsOrThrow(e,t,n){const r=this.getDOMCellFromCords(e,t,n);if(!r)throw new Error("Cell not found at cords.");return r}getCellNodeFromCords(e,t,n){const r=this.getDOMCellFromCords(e,t,n);if(null==r)return null;const o=(0,d.Xo)(r.elem);return mr(o)?o:null}getCellNodeFromCordsOrThrow(e,t,n){const r=this.getCellNodeFromCords(e,t,n);if(!r)throw new Error("Node at cords not TableCellNode.");return r}canSelectBefore(){return!0}canIndent(){return!1}}function Or(e){return{node:Pr()}}function Pr(){return(0,d.U2)(new Nr)}function Lr(e){return e instanceof Nr}var Ar=n(94631),Dr=n(34386),Mr=n(25464),Fr=n(18972),Br=n(67416),Ir=n(47120);const Rr={h1:"format_heading_1",h2:"format_heading_2",h3:"format_heading_3",bullet:"format_list_bulleted",number:"format_list_numbered",quote:"format_quote",paragraph:"format_paragraph"},zr=["bold","underline","italic","strikethrough","subscript","superscript"],$r=["left","right","center","justify"];function Wr({className:e="",editor:t,blockType:n,disabled:o=!1}){const[s,l]=r.useState(null),a=e=>r=>{switch(e){case"bullet":"bullet"!==n?t.dispatchCommand(le,void 0):t.dispatchCommand(ce,void 0);break;case"number":"number"!==n?t.dispatchCommand(ae,void 0):t.dispatchCommand(ce,void 0);break;case"paragraph":t.update((()=>{const e=(0,d.dL)();((0,d.OP)(e)||Er(e))&&(0,ue.Hz)(e,(()=>(0,d.BE)()))}));break;case"quote":"quote"!==n&&t.update((()=>{const e=(0,d.dL)();((0,d.OP)(e)||Er(e))&&(0,ue.Hz)(e,(()=>Be()))}));break;default:n!==(o=e)&&t.update((()=>{const e=(0,d.dL)();((0,d.OP)(e)||Er(e))&&(0,ue.Hz)(e,(()=>We(o)))}))}var o;l(null)};return r.createElement(r.Fragment,null,r.createElement(Jt.Z,{className:e,disabled:o,onClick:e=>{l(e.currentTarget)}},r.createElement(Dr.Z,{title:r.createElement(i.Z,{id:"ui.editor.toolbarPlugin.blockType",defaultMessage:"ui.editor.toolbarPlugin.blockType"})},r.createElement(r.Fragment,null,r.createElement(Gt.Z,null,Rr[n]),r.createElement(Gt.Z,null,s?"expand_less":"expand_more")))),r.createElement(Mr.Z,{anchorEl:s,open:Boolean(s),onClose:()=>{l(null)}},Object.keys(Rr).map((e=>r.createElement(Fr.Z,{key:e,onClick:a(e)},r.createElement(Gt.Z,null,Rr[e]))))))}const Zr={root:`${rn}-toolbar-plugin-root`,blockFormat:`${rn}-block-format`},Kr=(0,o.ZP)(s.Z,{name:rn,slot:"ToolbarPluginRoot"})((()=>({})));function Ur(e){const t=(0,u.Z)({props:e,name:rn}),{uploadImage:n=!1}=t,[o]=He(),[s,l]=(0,r.useState)(o),[a,c]=(0,r.useState)("paragraph"),[f,h]=(0,r.useState)("root"),[g,p]=(0,r.useState)(null),[m,y]=(0,r.useState)(!1),[v,S]=(0,r.useState)((()=>o.isEditable())),[w,k]=(0,r.useState)([]),[E,T]=(0,r.useState)($r[0]),N=(0,r.useCallback)((()=>{const e=(0,d.dL)();if((0,d.OP)(e)){const t=e.anchor.getNode();let n="root"===t.getKey()?t:C(t,(e=>{const t=e.getParent();return null!==t&&(0,d._v)(t)}));null===n&&(n=t.getTopLevelElementOrThrow());const r=n.getKey(),o=s.getElementByKey(r);k(zr.filter((t=>e.hasFormat(t)))),T($r.find((e=>n.getFormatType()===e))||$r[0]);const i=(0,Ar.P)(e);O(i.getParent())||O(i)?y(!0):y(!1);if(Lr(C(i,Lr))?h("table"):h("root"),null!==o)if(p(r),se(n)){const e=x(t,ee),r=e?e.getListType():n.getListType();c(r)}else{const e=Ze(n)?n.getTag():n.getType();e in Rr&&c(e)}}}),[s]);(0,r.useEffect)((()=>o.registerCommand(d.oj,((e,t)=>(N(),l(t),!1)),d.jw)),[o,N]),(0,r.useEffect)((()=>_(o.registerEditableListener((e=>{S(e)})),s.registerUpdateListener((({editorState:e})=>{e.read((()=>{N()}))})))),[N,s,o]);const P=(0,r.useCallback)((()=>{s.update((()=>{const e=(0,d.dL)();if((0,d.OP)(e)){const t=e.anchor,n=e.focus,r=e.getNodes();if(t.key===n.key&&t.offset===n.offset)return;r.forEach(((e,o)=>{(0,d.Gg)(e)?(0===o&&0!==t.offset&&(e=e.splitText(t.offset)[1]||e),o===r.length-1&&(e=e.splitText(n.offset)[0]||e),""!==e.__style&&e.setStyle(""),0!==e.__format&&(e.setFormat(0),b(e).setFormat(""))):Ze(e)||function(e){return e instanceof Fe}(e)?e.replace((0,d.BE)(),!0):function(e){return e instanceof cr}(e)&&e.setFormat("")}))}}))}),[s]),L=(0,r.useCallback)((()=>{m?o.dispatchCommand(D,null):o.dispatchCommand(D,"https://")}),[o,m]);return r.createElement(Kr,{className:Zr.root},a in Rr&&s===o&&r.createElement(Wr,{className:Zr.blockFormat,disabled:!v,blockType:a,editor:o}),r.createElement(Jt.Z,{disabled:!v,onClick:()=>{s.dispatchCommand(d.RO,$r[($r.findIndex((e=>E===e))+1)%$r.length])}},r.createElement(Dr.Z,{title:r.createElement(i.Z,{id:`ui.editor.toolbarPlugin.${E}`,defaultMessage:`ui.editor.toolbarPlugin.${E}`})},r.createElement(Gt.Z,null,`format_align_${E}`))),r.createElement(Br.Z,{value:w},zr.map((e=>r.createElement(Ir.Z,{key:e,value:e,disabled:!v,onClick:()=>{s.dispatchCommand(d.Ew,e)}},r.createElement(Dr.Z,{title:r.createElement(i.Z,{id:`ui.editor.toolbarPlugin.${e}`,defaultMessage:`ui.editor.toolbarPlugin.${e}`})},r.createElement(Gt.Z,null,`format_${e}`)))))),r.createElement(Jt.Z,{disabled:!v,onClick:P},r.createElement(Dr.Z,{title:r.createElement(i.Z,{id:"ui.editor.toolbarPlugin.clear",defaultMessage:"ui.editor.toolbarPlugin.clear"})},r.createElement(Gt.Z,null,"format_clear"))),r.createElement(Jt.Z,{disabled:!v,onClick:()=>{s.dispatchCommand(st,void 0)}},r.createElement(Dr.Z,{title:r.createElement(i.Z,{id:"ui.editor.toolbarPlugin.horizontalRule",defaultMessage:"ui.editor.toolbarPlugin.horizontalRule"})},r.createElement(Gt.Z,null,"format_horizontal_rule"))),n&&r.createElement(cn,null),r.createElement(Jt.Z,{disabled:!v,onClick:L},r.createElement(Dr.Z,{title:r.createElement(i.Z,{id:"ui.editor.toolbarPlugin.link",defaultMessage:"ui.editor.toolbarPlugin.link"})},r.createElement(Gt.Z,null,"format_link"))),r.createElement(_n,null))}function jr(){const[e]=He();return(0,r.useEffect)((()=>{if(!e.hasNodes([ee,H]))throw new Error("ListPlugin: ListNode and/or ListItemNode not registered on editor")}),[e]),function(e){(0,r.useEffect)((()=>_(e.registerCommand(ae,(()=>(W(e,"number"),!0)),d.KB),e.registerCommand(le,(()=>(W(e,"bullet"),!0)),d.KB),e.registerCommand(ce,(()=>(function(e){e.update((()=>{const e=(0,d.dL)();if((0,d.OP)(e)){const t=new Set,n=e.getNodes(),r=e.anchor.getNode();if($(r,n))t.add(B(r));else for(let e=0;e<n.length;e++){const r=n[e];if((0,d.H2)(r)){const e=x(r,H);null!=e&&t.add(B(e))}}for(const o of t){let t=o;const n=I(o);for(const r of n){const n=(0,d.BE)();Z(n,r.getChildren()),t.insertAfter(n),t=n,r.__key===e.anchor.key&&e.anchor.set(n.getKey(),0,"element"),r.__key===e.focus.key&&e.focus.set(n.getKey(),0,"element"),r.remove()}o.remove()}}}))}(e),!0)),d.KB),e.registerCommand(d.K0,(()=>!!function(){const e=(0,d.dL)();if(!(0,d.OP)(e)||!e.isCollapsed())return!1;const t=e.anchor.getNode();if(!Q(t)||0!==t.getChildrenSize())return!1;const n=B(t),r=t.getParent();se(r)||F(40);const o=r.getParent();let i;if((0,d._v)(o))i=(0,d.BE)(),n.insertAfter(i);else{if(!Q(o))return!1;i=Y(),o.insertAfter(i)}i.select();const s=t.getNextSiblings();if(s.length>0){const e=ie(r.getListType());if((0,d.Rl)(i))i.insertAfter(e);else{const t=Y();t.append(e),i.insertAfter(t)}s.forEach((t=>{t.remove(),e.append(t)}))}return function(e){let t=e;for(;null==t.getNextSibling()&&null==t.getPreviousSibling();){const e=t.getParent();if(null==e||!Q(t)&&!se(t))break;t=e}t.remove()}(t),!0}()),d.KB))),[e])}(e),null}var Vr=n(79991),Jr=n(82123),Hr=n(90629),Gr=n(77931),qr=n(87109);const Xr={root:`${rn}-floating-link-plugin-root`},Yr=(0,o.ZP)(Jr.Z,{name:rn,slot:"FloatingLinkPluginRoot"})((()=>({})));function Qr({editor:e,isLink:t,setIsLink:n}){const[o,i]=(0,r.useState)(null),[s,l]=(0,r.useState)(""),[a,c]=(0,r.useState)(null),[u,f]=(0,r.useState)(null),h=(0,r.useCallback)((()=>{var t;const n=(0,d.dL)();if((0,d.OP)(n)){const e=(0,Ar.P)(n),t=e.getParent();O(t)?l(t.getURL()):O(e)?l(e.getURL()):l("")}const r=window.getSelection(),o=document.activeElement,s=e.getRootElement();return null!==n&&null!==r&&null!==s&&s.contains(r.anchorNode)&&e.isEditable()?(i(null===(t=r.focusNode)||void 0===t?void 0:t.parentElement),f(n)):o||(i(null),f(null),l("")),!0}),[e]);(0,r.useEffect)((()=>{s!=a&&c(null)}),[s]),(0,r.useEffect)((()=>_(e.registerUpdateListener((({editorState:e})=>{e.read((()=>{h()}))})),e.registerCommand(d.oj,(()=>(h(),!0)),d.KB),e.registerCommand(d.Zq,(()=>!!t&&(n(!1),!0)),d.Eo))),[e,h,n,t]),(0,r.useEffect)((()=>{e.getEditorState().read((()=>{h()}))}),[e,h]);return t&&s!==a?r.createElement(Yr,{className:Xr.root,open:Boolean(o),anchorEl:o,placement:"right"},r.createElement(Hr.Z,null,r.createElement(Gr.Z,{size:"small",value:s,variant:"outlined",onChange:e=>{l(e.target.value)},InputProps:{endAdornment:r.createElement(qr.Z,{position:"end"},r.createElement(Jt.Z,{size:"small",tabIndex:0,onClick:()=>{n(!1)}},r.createElement(Gt.Z,null,"close")),r.createElement(Jt.Z,{size:"small",tabIndex:1,onClick:()=>{null!==u&&""!==s&&(c(s),e.dispatchCommand(D,(0,Vr.jv)(s)?s:"https://"))}},r.createElement(Gt.Z,null,"check")))}}))):null}const eo=()=>{const[e]=He();return function(e){const[t,n]=(0,r.useState)(e),[o,i]=(0,r.useState)(!1),s=(0,r.useCallback)((()=>{const e=(0,d.dL)();if((0,d.OP)(e)){const t=(0,Ar.P)(e),n=C(t,O),r=C(t,A);i(null!=n&&null==r)}}),[]);return(0,r.useEffect)((()=>_(e.registerUpdateListener((({editorState:e})=>{e.read((()=>{s()}))})),e.registerCommand(d.oj,((e,t)=>(s(),n(t),!1)),d.jw))),[e,s]),r.createElement(Qr,{editor:t,isLink:o,setIsLink:i})}(e)},to=({onBlur:e})=>{const[t]=He();return(0,r.useEffect)((()=>t.registerCommand(d.Gq,(t=>(e&&e(t),!0)),d.VN)),[]),null},no=({onFocus:e})=>{const[t]=He();return(0,r.useEffect)((()=>t.registerCommand(d.m$,(t=>(e&&e(t),!0)),d.VN)),[]),null},ro={root:`${rn}-root`,focused:`${rn}-focused`,toolbar:`${rn}-toolbar`,content:`${rn}-content`,placeholder:`${rn}-placeholder`,actions:`${rn}-actions`},oo=(0,o.ZP)(s.Z,{name:rn,slot:"Root",overridesResolver:(e,t)=>[t.root,e.className.includes(ro.toolbar)&&t.toolbar]})((({theme:e})=>({}))),io={heading:{h1:`${rn}-h1`,h2:`${rn}-h2`,h3:`${rn}-h3`,h4:`${rn}-h4`,h5:`${rn}-h5`,h6:`${rn}-h6`},link:`${rn}-link`,list:{listitem:`${rn}-listItem`,nested:{listitem:`${rn}-nestedListItem`},olDepth:[`${rn}-ol1`,`${rn}-ol2`,`${rn}-ol3`,`${rn}-ol4`,`${rn}-ol5`],ul:`${rn}-ul`},ltr:`${rn}-ltr`,paragraph:`${rn}-paragraph`,image:`${rn}-image`,quote:`${rn}-quote`,rtl:`${rn}-rtl`,text:{bold:`${rn}-textBold`,italic:`${rn}-textItalic`,strikethrough:`${rn}-textStrikethrough`,subscript:`${rn}-textSubscript`,superscript:`${rn}-textSuperscript`,underline:`${rn}-textUnderline`,underlineStrikethrough:`${rn}-textUnderlineStrikethrough`}},so=(0,r.forwardRef)(((e,t)=>{const n=(0,u.Z)({props:e,name:rn}),{id:o="editor",className:a=null,defaultValue:d="",toolbar:f=!1,uploadImage:h=!1,editable:g=!0,onChange:p=null,onFocus:m=null,onBlur:_=null}=n,y=(0,r.useRef)(),[v,x]=(0,r.useState)(!1),b=(e,t)=>{console.log(e)},C=(0,r.useCallback)((e=>{x(!0),m&&m(e)}),[m]),S=(0,r.useCallback)((e=>{x(!1),_&&_(e)}),[_]);(0,r.useImperativeHandle)(t,(()=>({focus:()=>{y.current.focus()}})));const w=(0,r.useMemo)((()=>({namespace:"LexicalEditor",editable:g,onError:b,nodes:[...dt],theme:io})),[g]);return r.createElement(oo,{id:o,className:c()(ro.root,a,{[ro.toolbar]:f,[ro.focused]:v})},r.createElement(pt,{initialConfig:w},f?r.createElement(r.Fragment,null,r.createElement(Ur,{uploadImage:h}),r.createElement(jr,null),r.createElement(jt,null)):r.createElement(l.Z,{className:ro.actions,direction:"row"},h&&r.createElement(cn,null),r.createElement(_n,null)),r.createElement(zt,{contentEditable:r.createElement(yt,{className:ro.content}),placeholder:r.createElement(s.Z,{className:ro.placeholder,onClick:()=>{y.current.focus()}},r.createElement(i.Z,{id:"ui.editor.placeholder",defaultMessage:"ui.editor.placeholder"})),ErrorBoundary:Ut}),r.createElement(yn,{defaultValue:d}),r.createElement(Ot,null),r.createElement(bn,{onChange:e=>{p&&p(e)}}),r.createElement(to,{onBlur:S}),r.createElement(no,{onFocus:C}),r.createElement(zn,null),r.createElement(sr,null),r.createElement(lr,null),r.createElement(eo,null),r.createElement(ar,{ref:y})))}))},63862:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(97582),o=n(41567),i=n(24243),s=n(24085),l=n(53704),a=n(68787),c=n(26580),u=n(8322),d=n.n(u);var f=n(67294),h=n(86896),g=n(21459);const p=e=>new Promise(((t,n)=>{const r=new FileReader;r.onload=e=>{let n=new Image;n.onload=function(e){let r=document.createElement("canvas"),o=1920,i=n.width,s=n.height;i>s?i>o&&(s*=o/i,i=o):s>o&&(i*=o/s,s=o),r.width=i,r.height=s,r.getContext("2d").drawImage(n,0,0,i,s),t((e=>{let t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);let n=e.split(",")[0].split(":")[1].split(";")[0],r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return new Blob([r],{type:n})})(r.toDataURL("image/jpeg")))},n.src=e.target.result},r.onerror=n,r.readAsDataURL(e)}));var m=n(99960),_=n(75459);const y=e=>{const{type:t=null,onSuccess:n=null,onProgress:u=null,onError:y=null}=e,v=(0,f.useRef)(!0),x=f.useRef({chunks:{},setChunk:null,setChunks:null}),[b,C]=(0,f.useState)({});x.current={chunks:b,setChunk:e=>{const t=Object.assign(Object.assign({},x.current.chunks),{[e.id]:Object.assign(Object.assign({},x.current.chunks[e.id]),e)});C(t),x.current.chunks=t},setChunks:e=>{C(e),x.current.chunks=e}};const S=(0,l.RM)(),{refreshSession:w}=(0,a.LD)(),k=(0,h.Z)();return(0,f.useEffect)((()=>{v.current?v.current=!1:u&&u(b)}),[b]),(0,c.J0)((e=>{if(e.file.type.startsWith("image/")){const t=new FileReader;t.onload=t=>{x.current.setChunk({id:e.id,image:t.target.result})},t.readAsDataURL(e.file)}x.current.setChunk({id:e.id,upload_id:null,completed:0,name:e.file.name})})),(0,c.UT)((e=>{x.current.setChunk({id:e.id,completed:e.completed})})),(0,o.h_)((e=>{((e,t,n)=>{t=t||2097152;let r=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,o=Math.ceil(e.size/t),i=0,s=new(d().ArrayBuffer),l=new FileReader;function a(){let n=i*t,o=n+t>=e.size?e.size:n+t;l.readAsArrayBuffer(r.call(e,n,o))}l.onload=function(e){s.append(e.target.result),i++,i<o?a():n(s.end())},l.onerror=function(){console.warn("oops, something went wrong.")},a()})(e.file,2142880,(t=>{const r=new FormData;r.append("upload_id",x.current.chunks[e.id].upload_id),r.append("type",x.current.chunks[e.id].type),r.append("md5",t),i.Z.request({url:s.Z.ComposerChunkUploadMediaComplete.url(),method:s.Z.ComposerChunkUploadMediaComplete.method,data:r,headers:{"Content-Type":"multipart/form-data"}}).then((t=>{setTimeout((()=>{const r=Object.assign({},x.current.chunks);delete r[e.id],x.current.setChunks(r),n(t.data)}),0)})).catch((t=>{console.log(t),y(Object.assign({},x.current.chunks[e.id]),k.formatMessage(g.Z.fileUploadErrorGeneric));const n=Object.assign({},x.current.chunks);delete n[e.id],x.current.setChunks(n)}))}))})),(0,o.A9)((e=>{y(Object.assign({},x.current.chunks[e.id]),k.formatMessage(g.Z.fileUploadErrorGeneric));const t=Object.assign({},x.current.chunks);delete t[e.id],x.current.setChunks(t)})),(0,o.cM)((e=>{const n={url:`${S.settings.portal}${s.Z.ComposerChunkUploadMedia.url()}`,sendOptions:{paramName:"image",method:s.Z.ComposerChunkUploadMedia.method,formatServerResponse:(e,t,n)=>(0,r.mG)(void 0,void 0,void 0,(function*(){return 401===t&&(yield w()),Promise.resolve(JSON.parse(e))}))}};return x.current.chunks[e.item.id].upload_id?n.sendOptions.params={upload_id:x.current.chunks[e.item.id].upload_id}:x.current.setChunk({id:e.item.id,type:t||e.sendOptions.paramName}),n})),(0,o.Rx)((e=>(0,r.mG)(void 0,void 0,void 0,(function*(){const t=yield e.uploadData.response.data;x.current.setChunk({id:e.item.id,upload_id:t.upload_id})})))),(0,o.fc)((({items:e,options:t})=>(0,r.mG)(void 0,void 0,void 0,(function*(){const n=["JWT","OAuth"].includes(S.settings.session.type)?{headers:{Authorization:`Bearer ${S.settings.session.authToken.accessToken}`}}:{};return 0==e.length?Promise.resolve({options:t,destination:n}):new Promise((o=>{Promise.all(e.map((e=>(0,r.mG)(void 0,void 0,void 0,(function*(){return Object.assign(Object.assign({},e),{file:e.file.type.startsWith("image/")&&"image/gif"!==e.file.type?yield p(e.file):e.file})}))))).then((e=>{o({items:e,options:{inputFieldName:t.inputFieldName,destination:n}})})).catch((e=>{m.Y.error(e,_.J),o({options:{inputFieldName:t.inputFieldName,destination:n}})}))}))})))),null}},94631:(e,t,n)=>{"use strict";n.d(t,{E:()=>i,P:()=>o});var r=n(10261);function o(e){const t=e.anchor,n=e.focus,o=e.anchor.getNode(),i=e.focus.getNode();if(o===i)return o;return e.isBackward()?(0,r.P4)(n)?o:i:(0,r.P4)(t)?o:i}function i(e){return Array.from(e.matchAll(/<hashtag id="(?<id>[0-9]+)">#(?<name>[^<>]+)<\/hashtag>/g)).map((e=>e.groups.id))}},8322:e=>{e.exports=function(e){"use strict";var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(e,t){var n=e[0],r=e[1],o=e[2],i=e[3];r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&o)+t[1]-389564586|0)<<12|i>>>20)+n|0)&n|~i&r)+t[2]+606105819|0)<<17|o>>>15)+i|0)&i|~o&n)+t[3]-1044525330|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&o)+t[5]+1200080426|0)<<12|i>>>20)+n|0)&n|~i&r)+t[6]-1473231341|0)<<17|o>>>15)+i|0)&i|~o&n)+t[7]-45705983|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&o)+t[9]-1958414417|0)<<12|i>>>20)+n|0)&n|~i&r)+t[10]-42063|0)<<17|o>>>15)+i|0)&i|~o&n)+t[11]-1990404162|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&o)+t[13]-40341101|0)<<12|i>>>20)+n|0)&n|~i&r)+t[14]-1502002290|0)<<17|o>>>15)+i|0)&i|~o&n)+t[15]+1236535329|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[1]-165796510|0)<<5|n>>>27)+r|0)&o|r&~o)+t[6]-1069501632|0)<<9|i>>>23)+n|0)&r|n&~r)+t[11]+643717713|0)<<14|o>>>18)+i|0)&n|i&~n)+t[0]-373897302|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[5]-701558691|0)<<5|n>>>27)+r|0)&o|r&~o)+t[10]+38016083|0)<<9|i>>>23)+n|0)&r|n&~r)+t[15]-660478335|0)<<14|o>>>18)+i|0)&n|i&~n)+t[4]-405537848|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[9]+568446438|0)<<5|n>>>27)+r|0)&o|r&~o)+t[14]-1019803690|0)<<9|i>>>23)+n|0)&r|n&~r)+t[3]-187363961|0)<<14|o>>>18)+i|0)&n|i&~n)+t[8]+1163531501|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[13]-1444681467|0)<<5|n>>>27)+r|0)&o|r&~o)+t[2]-51403784|0)<<9|i>>>23)+n|0)&r|n&~r)+t[7]+1735328473|0)<<14|o>>>18)+i|0)&n|i&~n)+t[12]-1926607734|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[5]-378558|0)<<4|n>>>28)+r|0)^r^o)+t[8]-2022574463|0)<<11|i>>>21)+n|0)^n^r)+t[11]+1839030562|0)<<16|o>>>16)+i|0)^i^n)+t[14]-35309556|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[1]-1530992060|0)<<4|n>>>28)+r|0)^r^o)+t[4]+1272893353|0)<<11|i>>>21)+n|0)^n^r)+t[7]-155497632|0)<<16|o>>>16)+i|0)^i^n)+t[10]-1094730640|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[13]+681279174|0)<<4|n>>>28)+r|0)^r^o)+t[0]-358537222|0)<<11|i>>>21)+n|0)^n^r)+t[3]-722521979|0)<<16|o>>>16)+i|0)^i^n)+t[6]+76029189|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[9]-640364487|0)<<4|n>>>28)+r|0)^r^o)+t[12]-421815835|0)<<11|i>>>21)+n|0)^n^r)+t[15]+530742520|0)<<16|o>>>16)+i|0)^i^n)+t[2]-995338651|0)<<23|r>>>9)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[0]-198630844|0)<<6|n>>>26)+r|0)|~o))+t[7]+1126891415|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[14]-1416354905|0)<<15|o>>>17)+i|0)|~n))+t[5]-57434055|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[12]+1700485571|0)<<6|n>>>26)+r|0)|~o))+t[3]-1894986606|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[10]-1051523|0)<<15|o>>>17)+i|0)|~n))+t[1]-2054922799|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[8]+1873313359|0)<<6|n>>>26)+r|0)|~o))+t[15]-30611744|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[6]-1560198380|0)<<15|o>>>17)+i|0)|~n))+t[13]+1309151649|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[4]-145523070|0)<<6|n>>>26)+r|0)|~o))+t[11]-1120210379|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[2]+718787259|0)<<15|o>>>17)+i|0)|~n))+t[9]-343485551|0)<<21|r>>>11)+o|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=o+e[2]|0,e[3]=i+e[3]|0}function r(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function o(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function i(e){var t,o,i,s,l,a,c=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=c;t+=64)n(u,r(e.substring(t-64,t)));for(o=(e=e.substring(t-64)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<o;t+=1)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(n(u,i),t=0;t<16;t+=1)i[t]=0;return s=(s=8*c).toString(16).match(/(.*?)(.{0,8})$/),l=parseInt(s[2],16),a=parseInt(s[1],16)||0,i[14]=l,i[15]=a,n(u,i),u}function s(e){var t,r,i,s,l,a,c=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=c;t+=64)n(u,o(e.subarray(t-64,t)));for(r=(e=t-64<c?e.subarray(t-64):new Uint8Array(0)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)i[t>>2]|=e[t]<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(n(u,i),t=0;t<16;t+=1)i[t]=0;return s=(s=8*c).toString(16).match(/(.*?)(.{0,8})$/),l=parseInt(s[2],16),a=parseInt(s[1],16)||0,i[14]=l,i[15]=a,n(u,i),u}function l(e){var n,r="";for(n=0;n<4;n+=1)r+=t[e>>8*n+4&15]+t[e>>8*n&15];return r}function a(e){var t;for(t=0;t<e.length;t+=1)e[t]=l(e[t]);return e.join("")}function c(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function u(e,t){var n,r=e.length,o=new ArrayBuffer(r),i=new Uint8Array(o);for(n=0;n<r;n+=1)i[n]=e.charCodeAt(n);return t?i:o}function d(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function f(e,t,n){var r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e)),r.set(new Uint8Array(t),e.byteLength),n?r:r.buffer}function h(e){var t,n=[],r=e.length;for(t=0;t<r-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function g(){this.reset()}return a(i("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(n,r){var o,i,s,l,a=this.byteLength,c=t(n,a),u=a;return r!==e&&(u=t(r,a)),c>u?new ArrayBuffer(0):(o=u-c,i=new ArrayBuffer(o),s=new Uint8Array(i),l=new Uint8Array(this,c,o),s.set(l),i)}}(),g.prototype.append=function(e){return this.appendBinary(c(e)),this},g.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,o=this._buff.length;for(t=64;t<=o;t+=64)n(this._hash,r(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},g.prototype.end=function(e){var t,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<o;t+=1)i[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(i,o),n=a(this._hash),e&&(n=h(n)),this.reset(),n},g.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},g.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},g.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},g.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},g.prototype._finish=function(e,t){var r,o,i,s=t;if(e[s>>2]|=128<<(s%4<<3),s>55)for(n(this._hash,e),s=0;s<16;s+=1)e[s]=0;r=(r=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(r[2],16),i=parseInt(r[1],16)||0,e[14]=o,e[15]=i,n(this._hash,e)},g.hash=function(e,t){return g.hashBinary(c(e),t)},g.hashBinary=function(e,t){var n=a(i(e));return t?h(n):n},g.ArrayBuffer=function(){this.reset()},g.ArrayBuffer.prototype.append=function(e){var t,r=f(this._buff.buffer,e,!0),i=r.length;for(this._length+=e.byteLength,t=64;t<=i;t+=64)n(this._hash,o(r.subarray(t-64,t)));return this._buff=t-64<i?new Uint8Array(r.buffer.slice(t-64)):new Uint8Array(0),this},g.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<o;t+=1)i[t>>2]|=r[t]<<(t%4<<3);return this._finish(i,o),n=a(this._hash),e&&(n=h(n)),this.reset(),n},g.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},g.ArrayBuffer.prototype.getState=function(){var e=g.prototype.getState.call(this);return e.buff=d(e.buff),e},g.ArrayBuffer.prototype.setState=function(e){return e.buff=u(e.buff,!0),g.prototype.setState.call(this,e)},g.ArrayBuffer.prototype.destroy=g.prototype.destroy,g.ArrayBuffer.prototype._finish=g.prototype._finish,g.ArrayBuffer.hash=function(e,t){var n=a(s(new Uint8Array(e)));return t?h(n):n},g}()},10261:(e,t,n)=>{"use strict";n.d(t,{B3:()=>l,Hz:()=>d,P4:()=>c,bA:()=>a,i0:()=>h,pi:()=>f,vV:()=>u});var r=n(61084);var o=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}((function(e){const t=new URLSearchParams;t.append("code",e);for(let n=1;n<arguments.length;n++)t.append("v",arguments[n]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}));const i=new Map;function s(e){const t={},n=e.split(";");for(const r of n)if(""!==r){const[e,n]=r.split(/:([^]+)/);e&&n&&(t[e.trim()]=n.trim())}return t}function l(e){const t=e.constructor.clone(e);return t.__parent=e.__parent,t.__next=e.__next,t.__prev=e.__prev,(0,r.F7)(e)&&(0,r.F7)(t)?(o=e,(n=t).__first=o.__first,n.__last=o.__last,n.__size=o.__size,n.__format=o.__format,n.__indent=o.__indent,n.__dir=o.__dir,n):(0,r.Gg)(e)&&(0,r.Gg)(t)?function(e,t){return e.__format=t.__format,e.__style=t.__style,e.__mode=t.__mode,e.__detail=t.__detail,e}(t,e):(0,r.Rl)(e)&&(0,r.Rl)(t)?function(e,t){return e.__textFormat=t.__textFormat,e}(t,e):t;var n,o}function a(e,t){const n=e.getStartEndPoints();if(t.isSelected(e)&&!t.isSegmented()&&!t.isToken()&&null!==n){const[o,i]=n,s=e.isBackward(),l=o.getNode(),a=i.getNode(),c=t.is(l),u=t.is(a);if(c||u){const[n,o]=(0,r.cs)(e),i=l.is(a),c=t.is(s?a:l),u=t.is(s?l:a);let d,f=0;return i?(f=n>o?o:n,d=n>o?n:o):c?(f=s?o:n,d=void 0):u&&(f=0,d=s?n:o),t.__text=t.__text.slice(f,d),t}}return t}function c(e){if("text"===e.type)return e.offset===e.getNode().getTextContentSize();const t=e.getNode();return(0,r.F7)(t)||o(177),e.offset===t.getChildrenSize()}function u(e){const t=e.getStyle(),n=s(t);i.set(t,n)}function d(e,t){if(null===e)return;const n=e.getStartEndPoints(),i=n?n[0]:null;if(null!==i&&"root"===i.key){const e=t(),n=(0,r.Gv)(),o=n.getFirstChild();return void(o?o.replace(e,!0):n.append(e))}const s=e.getNodes(),l=null!==i&&function(e,t){let n=e;for(;null!==n&&null!==n.getParent()&&!t(n);)n=n.getParentOrThrow();return t(n)?n:null}(i.getNode(),g);l&&-1===s.indexOf(l)&&s.push(l);for(let a=0;a<s.length;a++){const e=s[a];if(!g(e))continue;(0,r.F7)(e)||o(178);const n=t();n.setFormat(e.getFormatType()),n.setIndent(e.getIndent()),e.replace(n,!0)}}function f(e,t){const n=(0,r.fL)(e.focus,t);return(0,r.k$)(n)&&!n.isIsolated()||(0,r.F7)(n)&&!n.isInline()&&!n.canBeEmpty()}function h(e,t,n){const o=function(e){const t=e.anchor.getNode();return"rtl"===((0,r.wd)(t)?t:t.getParentOrThrow()).getDirection()}(e);!function(e,t,n,r){e.modify(t?"extend":"move",n,r)}(e,t,n?!o:o,"character")}function g(e){if((0,r.k$)(e))return!1;if(!(0,r.F7)(e)||(0,r._v)(e))return!1;const t=e.getFirstChild(),n=null===t||(0,r.A3)(t)||(0,r.Gg)(t)||t.isInline();return!e.isInline()&&!1!==e.canBeEmpty()&&n}},61084:(e,t,n)=>{"use strict";function r(e){return{}}n.d(t,{$l:()=>m,A1:()=>d,A3:()=>hr,BE:()=>Vo,BM:()=>Z,DN:()=>no,Eo:()=>qo,Ew:()=>p,F7:()=>Bo,GA:()=>Ye,Gg:()=>Lr,Gq:()=>J,Gv:()=>mt,H2:()=>it,HX:()=>Fo,Hr:()=>W,Ij:()=>Do,Jh:()=>Qo,K0:()=>c,KB:()=>Go,Kr:()=>s,LV:()=>z,MK:()=>O,MX:()=>Pr,Mt:()=>l,Nm:()=>v,Nr:()=>K,OP:()=>$r,PU:()=>A,R2:()=>br,RG:()=>Ko,RJ:()=>f,RO:()=>F,Re:()=>en,Rl:()=>Jo,S3:()=>Dr,S9:()=>He,T:()=>fr,U2:()=>Jt,UL:()=>Mt,VN:()=>Ho,WH:()=>a,XI:()=>B,XN:()=>k,Xo:()=>ht,Zb:()=>w,Zq:()=>N,_$:()=>_o,_0:()=>S,_v:()=>Vt,aR:()=>T,af:()=>Qe,bg:()=>Qt,cA:()=>L,cj:()=>h,cs:()=>Ur,cz:()=>D,dB:()=>P,dL:()=>to,dR:()=>$,ek:()=>qr,fA:()=>r,fL:()=>Rt,gI:()=>dt,h5:()=>Qr,iO:()=>Zr,jw:()=>Xo,k$:()=>Mo,kE:()=>I,lv:()=>nn,m$:()=>V,n2:()=>g,oC:()=>wo,od:()=>lo,oj:()=>o,oq:()=>yt,r0:()=>U,u$:()=>b,vN:()=>Yr,wd:()=>zo,yF:()=>u,yn:()=>j,z9:()=>Yt,zD:()=>M,zq:()=>_,zr:()=>i});const o={},i={},s={},l={},a={},c={},u={},d={},f={},h={},g={},p={},m={},_={},y={},v={},x={},b={},C={},S={},w={},k={},E={},T={},N={},O={},P={},L={},A={},D={},M={},F={},B={},I={},R={},z={},$={},W={},Z={},K={},U={},j={},V={},J={},H={};var G=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}((function(e){const t=new URLSearchParams;t.append("code",e);for(let n=1;n<arguments.length;n++)t.append("v",arguments[n]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}));const q="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,X=q&&"documentMode"in document?document.documentMode:null,Y=q&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),Q=q&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),ee=!(!q||!("InputEvent"in window)||X)&&"getTargetRanges"in new window.InputEvent("input"),te=q&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),ne=q&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,re=q&&/Android/.test(navigator.userAgent),oe=q&&/^(?=.*Chrome).*/i.test(navigator.userAgent),ie=q&&re&&oe,se=q&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!oe,le=1,ae=3,ce=0,ue=1,de=2,fe=4,he=8,ge=3|fe|he|240,pe=1,me=2,_e=3,ye=4,ve=5,xe=6,be=te||ne||se?"\xa0":"\u200b",Ce="\n\n",Se=Q?"\xa0":be,we="\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc",ke="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff",Ee=new RegExp("^[^"+ke+"]*["+we+"]"),Te=new RegExp("^[^"+we+"]*["+ke+"]"),Ne={bold:1,code:16,highlight:128,italic:2,strikethrough:fe,subscript:32,superscript:64,underline:he},Oe={directionless:1,unmergeable:2},Pe={center:me,end:xe,justify:ye,left:pe,right:_e,start:ve},Le={[me]:"center",[xe]:"end",[ye]:"justify",[pe]:"left",[_e]:"right",[ve]:"start"},Ae={normal:0,segmented:2,token:1},De={0:"normal",2:"segmented",1:"token"};function Me(...e){const t=[];for(const n of e)if(n&&"string"==typeof n)for(const[e]of n.matchAll(/\S+/g))t.push(e);return t}const Fe=100;let Be=!1,Ie=0;function Re(e){Ie=e.timeStamp}function ze(e,t,n){return t.__lexicalLineBreak===e||void 0!==e[`__lexicalKey_${n._key}`]}function $e(e,t,n){const r=Xt(n._window);let o=null,i=null;null!==r&&r.anchorNode===e&&(o=r.anchorOffset,i=r.focusOffset);const s=e.nodeValue;null!==s&&Et(t,s,o,i,!1)}function We(e,t,n){if($r(e)){const t=e.anchor.getNode();if(t.is(n)&&e.format!==t.getFormat())return!1}return t.nodeType===ae&&n.isAttached()}function Ze(e,t,n){Be=!0;const r=performance.now()-Ie>Fe;try{Ao(e,(()=>{const o=to()||function(e){return e.getEditorState().read((()=>{const e=to();return null!==e?e.clone():null}))}(e),i=new Map,s=e.getRootElement(),l=e._editorState,a=e._blockCursorElement;let c=!1,u="";for(let n=0;n<t.length;n++){const d=t[n],f=d.type,h=d.target;let g=ht(h,l);if(!(null===g&&h!==s||Mo(g)))if("characterData"===f)r&&Lr(g)&&We(o,h,g)&&$e(h,g,e);else if("childList"===f){c=!0;const t=d.addedNodes;for(let o=0;o<t.length;o++){const n=t[o],r=ft(n),i=n.parentNode;if(null!=i&&n!==a&&null===r&&("BR"!==n.nodeName||!ze(n,i,e))){if(Q){const e=n.innerText||n.nodeValue;e&&(u+=e)}i.removeChild(n)}}const n=d.removedNodes,r=n.length;if(r>0){let t=0;for(let o=0;o<r;o++){const r=n[o];("BR"===r.nodeName&&ze(r,h,e)||a===r)&&(h.appendChild(r),t++)}r!==t&&(h===s&&(g=_t(l)),i.set(h,g))}}}if(i.size>0)for(const[t,n]of i)if(Bo(n)){const r=n.getChildrenKeys();let o=t.firstChild;for(let n=0;n<r.length;n++){const i=r[n],s=e.getElementByKey(i);null!==s&&(null==o?(t.appendChild(s),o=s):o!==s&&t.replaceChild(s,o),o=o.nextSibling)}}else Lr(n)&&n.markDirty();const d=n.takeRecords();if(d.length>0){for(let t=0;t<d.length;t++){const n=d[t],r=n.addedNodes,o=n.target;for(let t=0;t<r.length;t++){const n=r[t],i=n.parentNode;null==i||"BR"!==n.nodeName||ze(n,o,e)||i.removeChild(n)}}n.takeRecords()}null!==o&&(c&&(o.dirty=!0,yt(o)),Q&&zt(e)&&o.insertRawText(u))}))}finally{Be=!1}}function Ke(e){const t=e._observer;null!==t&&Ze(e,t.takeRecords(),t)}function Ue(e){!function(e){0===Ie&&jt(e).addEventListener("textInput",Re,!0)}(e),e._observer=new MutationObserver(((t,n)=>{Ze(e,t,n)}))}function je(e,t){const n=e.__mode,r=e.__format,o=e.__style,i=t.__mode,s=t.__format,l=t.__style;return!(null!==n&&n!==i||null!==r&&r!==s||null!==o&&o!==l)}function Ve(e,t){const n=e.mergeWithSibling(t),r=bo()._normalizedNodes;return r.add(e.__key),r.add(t.__key),n}function Je(e){let t,n,r=e;if(""!==r.__text||!r.isSimpleText()||r.isUnmergeable()){for(;null!==(t=r.getPreviousSibling())&&Lr(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(""!==t.__text){if(je(t,r)){r=Ve(t,r);break}break}t.remove()}for(;null!==(n=r.getNextSibling())&&Lr(n)&&n.isSimpleText()&&!n.isUnmergeable();){if(""!==n.__text){if(je(r,n)){r=Ve(r,n);break}break}n.remove()}}else r.remove()}function He(e){return Ge(e.anchor),Ge(e.focus),e}function Ge(e){for(;"element"===e.type;){const t=e.getNode(),n=e.offset;let r,o;if(n===t.getChildrenSize()?(r=t.getChildAtIndex(n-1),o=!0):(r=t.getChildAtIndex(n),o=!1),Lr(r)){e.set(r.__key,o?r.getTextContentSize():0,"text");break}if(!Bo(r))break;e.set(r.__key,o?r.getChildrenSize():0,"element")}}let qe=1;const Xe="function"==typeof queueMicrotask?queueMicrotask:e=>{Promise.resolve().then(e)};function Ye(e){const t=document.activeElement;if(null===t)return!1;const n=t.nodeName;return Mo(ht(e))&&("INPUT"===n||"TEXTAREA"===n||"true"===t.contentEditable&&null==t.__lexicalEditor)}function Qe(e,t,n){const r=e.getRootElement();try{return null!==r&&r.contains(t)&&r.contains(n)&&null!==t&&!Ye(t)&&et(t)===e}catch(e){return!1}}function et(e){let t=e;for(;null!=t;){const e=t.__lexicalEditor;if(null!=e)return e;t=Kt(t)}return null}function tt(e){return e.isToken()||e.isSegmented()}function nt(e){return e.nodeType===ae}function rt(e){let t=e;for(;null!=t;){if(nt(t))return t;t=t.firstChild}return null}function ot(e,t,n){const r=Ne[t];if(null!==n&&(e&r)==(n&r))return e;let o=e^r;return"subscript"===t?o&=~Ne.superscript:"superscript"===t&&(o&=~Ne.subscript),o}function it(e){return Lr(e)||hr(e)||Mo(e)}function st(e,t){if(null!=t)return void(e.__key=t);yo(),vo();const n=bo(),r=xo(),o=""+qe++;r._nodeMap.set(o,e),Bo(e)?n._dirtyElements.set(o,!0):n._dirtyLeaves.add(o),n._cloneNotNeeded.add(o),n._dirtyType=ue,e.__key=o}function lt(e){const t=e.getParent();if(null!==t){const n=e.getWritable(),r=t.getWritable(),o=e.getPreviousSibling(),i=e.getNextSibling();if(null===o)if(null!==i){const e=i.getWritable();r.__first=i.__key,e.__prev=null}else r.__first=null;else{const e=o.getWritable();if(null!==i){const t=i.getWritable();t.__prev=e.__key,e.__next=t.__key}else e.__next=null;n.__prev=null}if(null===i)if(null!==o){const e=o.getWritable();r.__last=o.__key,e.__next=null}else r.__last=null;else{const e=i.getWritable();if(null!==o){const t=o.getWritable();t.__next=e.__key,e.__prev=t.__key}else e.__prev=null;n.__next=null}r.__size--,n.__parent=null}}function at(e){vo();const t=e.getLatest(),n=t.__parent,r=xo(),o=bo(),i=r._nodeMap,s=o._dirtyElements;null!==n&&function(e,t,n){let r=e;for(;null!==r;){if(n.has(r))return;const e=t.get(r);if(void 0===e)break;n.set(r,!1),r=e.__parent}}(n,i,s);const l=t.__key;o._dirtyType=ue,Bo(e)?s.set(l,!0):o._dirtyLeaves.add(l)}function ct(e){yo();const t=bo(),n=t._compositionKey;if(e!==n){if(t._compositionKey=e,null!==n){const e=dt(n);null!==e&&e.getWritable()}if(null!==e){const t=dt(e);null!==t&&t.getWritable()}}}function ut(){return _o()?null:bo()._compositionKey}function dt(e,t){const n=(t||xo())._nodeMap.get(e);return void 0===n?null:n}function ft(e,t){const n=e[`__lexicalKey_${bo()._key}`];return void 0!==n?dt(n,t):null}function ht(e,t){let n=e;for(;null!=n;){const e=ft(n,t);if(null!==e)return e;n=Kt(n)}return null}function gt(e){const t=e._decorators,n=Object.assign({},t);return e._pendingDecorators=n,n}function pt(e){return e.read((()=>mt().getTextContent()))}function mt(){return _t(xo())}function _t(e){return e._nodeMap.get("root")}function yt(e){yo();const t=xo();null!==e&&(e.dirty=!0,e.setCachedNodes(null)),t._selection=e}function vt(e){const t=bo(),n=function(e,t){let n=e;for(;null!=n;){const e=n[`__lexicalKey_${t._key}`];if(void 0!==e)return e;n=Kt(n)}return null}(e,t);return null===n?e===t.getRootElement()?dt("root"):null:dt(n)}function xt(e,t){return t?e.getTextContentSize():0}function bt(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function Ct(e){const t=[];let n=e;for(;null!==n;)t.push(n),n=n._parentEditor;return t}function St(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)}function wt(e){return e.nodeType===ae?e.nodeValue:null}function kt(e,t,n){const r=Xt(t._window);if(null===r)return;const o=r.anchorNode;let{anchorOffset:i,focusOffset:s}=r;if(null!==o){let t=wt(o);const r=ht(o);if(null!==t&&Lr(r)){if(t===be&&n){const e=n.length;t=n,i=e,s=e}null!==t&&Et(r,t,i,s,e)}}}function Et(e,t,n,r,o){let i=e;if(i.isAttached()&&(o||!i.isDirty())){const s=i.isComposing();let l=t;(s||o)&&t[t.length-1]===be&&(l=t.slice(0,-1));const a=i.getTextContent();if(o||l!==a){if(""===l){if(ct(null),te||ne||se)i.remove();else{const e=bo();setTimeout((()=>{e.update((()=>{i.isAttached()&&i.remove()}))}),20)}return}const t=i.getParent(),o=no(),a=i.getTextContentSize(),c=ut(),u=i.getKey();if(i.isToken()||null!==c&&u===c&&!s||$r(o)&&(null!==t&&!t.canInsertTextBefore()&&0===o.anchor.offset||o.anchor.key===e.__key&&0===o.anchor.offset&&!i.canInsertTextBefore()&&!s||o.focus.key===e.__key&&o.focus.offset===a&&!i.canInsertTextAfter()&&!s))return void i.markDirty();const d=to();if(!$r(d)||null===n||null===r)return void i.setTextContent(l);if(d.setTextNodeRange(i,n,i,r),i.isSegmented()){const e=Pr(i.getTextContent());i.replace(e),i=e}i.setTextContent(l)}}}function Tt(e){return"ArrowLeft"===e}function Nt(e){return"ArrowRight"===e}function Ot(e,t){return Y?e:t}function Pt(e){return"Enter"===e}function Lt(e){return"Backspace"===e}function At(e){return"Delete"===e}function Dt(e,t,n){return"KeyA"===e&&Ot(t,n)}function Mt(){const e=mt();yt(He(e.select(0,e.getChildrenSize())))}function Ft(e,t){void 0===e.__lexicalClassNameCache&&(e.__lexicalClassNameCache={});const n=e.__lexicalClassNameCache,r=n[t];if(void 0!==r)return r;const o=e[t];if("string"==typeof o){const e=Me(o);return n[t]=e,e}return o}function Bt(e,t,n,r,o){if(0===n.size)return;const i=r.__type,s=r.__key,l=t.get(i);void 0===l&&G(33,i);const a=l.klass;let c=e.get(a);void 0===c&&(c=new Map,e.set(a,c));const u=c.get(s),d="destroyed"===u&&"created"===o;(void 0===u||d)&&c.set(s,d?"updated":o)}function It(e,t,n){const r=e.getParent();let o=n,i=e;return null!==r&&(t&&0===n?(o=i.getIndexWithinParent(),i=r):t||n!==i.getChildrenSize()||(o=i.getIndexWithinParent()+1,i=r)),i.getChildAtIndex(t?o-1:o)}function Rt(e,t){const n=e.offset;if("element"===e.type)return It(e.getNode(),t,n);{const r=e.getNode();if(t&&0===n||!t&&n===r.getTextContentSize()){const e=t?r.getPreviousSibling():r.getNextSibling();return null===e?It(r.getParentOrThrow(),t,r.getIndexWithinParent()+(t?0:1)):e}}return null}function zt(e){const t=jt(e).event,n=t&&t.inputType;return"insertFromPaste"===n||"insertFromPasteAsQuotation"===n}function $t(e,t,n){return Oo(e,t,n)}function Wt(e){return!zo(e)&&!e.isLastChild()&&!e.isInline()}function Zt(e,t){const n=e._keyToDOMMap.get(t);return void 0===n&&G(75,t),n}function Kt(e){const t=e.assignedSlot||e.parentElement;return null!==t&&11===t.nodeType?t.host:t}function Ut(e,t){let n=e.getParent();for(;null!==n;){if(n.is(t))return!0;n=n.getParent()}return!1}function jt(e){const t=e._window;return null===t&&G(78),t}function Vt(e){return zo(e)||Bo(e)&&e.isShadowRoot()}function Jt(e){const t=bo(),n=e.constructor.getType(),r=t._nodes.get(n);void 0===r&&G(97);const o=r.replace;if(null!==o){const t=o(e);return t instanceof e.constructor||G(98),t}return e}function Ht(e,t){!zo(e.getParent())||Bo(t)||Mo(t)||G(99)}function Gt(e){return(Mo(e)||Bo(e)&&!e.canBeEmpty())&&!e.isInline()}function qt(e,t,n){n.style.removeProperty("caret-color"),t._blockCursorElement=null;const r=e.parentElement;null!==r&&r.removeChild(e)}function Xt(e){return q?(e||window).getSelection():null}function Yt(e,t){let n=e.getChildAtIndex(t);null==n&&(n=e),Vt(e)&&G(102);const r=e=>{const t=e.getParentOrThrow(),o=Vt(t),i=e!==n||o?function(e){const t=e.constructor.clone(e);return st(t,null),t}(e):e;if(o)return Bo(e)&&Bo(i)||G(133),e.insertAfter(i),[e,i,i];{const[n,o,s]=r(t),l=e.getNextSiblings();return s.append(i,...l),[n,o,i]}},[o,i]=r(n);return[o,i]}function Qt(e){return en(e)&&"A"===e.tagName}function en(e){return 1===e.nodeType}function tn(e){const t=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return null!==e.nodeName.match(t)}function nn(e){const t=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return null!==e.nodeName.match(t)}function rn(e){if(zo(e)||Mo(e)&&!e.isInline())return!0;if(!Bo(e)||Vt(e))return!1;const t=e.getFirstChild(),n=null===t||hr(t)||Lr(t)||t.isInline();return!e.isInline()&&!1!==e.canBeEmpty()&&n}function on(e,t){let n=e;for(;null!==n&&null!==n.getParent()&&!t(n);)n=n.getParentOrThrow();return t(n)?n:null}function sn(e,t,n,r,o,i){let s=e.getFirstChild();for(;null!==s;){const e=s.__key;s.__parent===t&&(Bo(s)&&sn(s,e,n,r,o,i),n.has(e)||i.delete(e),o.push(e)),s=s.getNextSibling()}}let ln,an,cn,un,dn,fn,hn,gn,pn,mn,_n="",yn="",vn=null,xn="",bn=!1,Cn=!1,Sn=null;function wn(e,t){const n=hn.get(e);if(null!==t){const n=zn(e);n.parentNode===t&&t.removeChild(n)}if(gn.has(e)||an._keyToDOMMap.delete(e),Bo(n)){const e=Fn(n,hn);kn(e,0,e.length-1,null)}void 0!==n&&Bt(mn,cn,un,n,"destroyed")}function kn(e,t,n,r){let o=t;for(;o<=n;++o){const t=e[o];void 0!==t&&wn(t,r)}}function En(e,t){e.setProperty("text-align",t)}const Tn="40px";function Nn(e,t){const n=ln.theme.indent;if("string"==typeof n){const r=e.classList.contains(n);t>0&&!r?e.classList.add(n):t<1&&r&&e.classList.remove(n)}const r=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||Tn;e.style.setProperty("padding-inline-start",0===t?"":`calc(${t} * ${r})`)}function On(e,t){const n=e.style;0===t?En(n,""):t===pe?En(n,"left"):t===me?En(n,"center"):t===_e?En(n,"right"):t===ye?En(n,"justify"):t===ve?En(n,"start"):t===xe&&En(n,"end")}function Pn(e,t,n){const r=gn.get(e);void 0===r&&G(60);const o=r.createDOM(ln,an);if(function(e,t,n){const r=n._keyToDOMMap;t["__lexicalKey_"+n._key]=e,r.set(e,t)}(e,o,an),Lr(r)?o.setAttribute("data-lexical-text","true"):Mo(r)&&o.setAttribute("data-lexical-decorator","true"),Bo(r)){const e=r.__indent,t=r.__size;if(0!==e&&Nn(o,e),0!==t){const e=t-1;!function(e,t,n,r){const o=yn;yn="",Ln(e,n,0,t,r,null),Mn(n,r),yn=o}(Fn(r,gn),e,r,o)}const n=r.__format;0!==n&&On(o,n),r.isInline()||Dn(null,r,o),Wt(r)&&(_n+=Ce,xn+=Ce)}else{const t=r.getTextContent();if(Mo(r)){const t=r.decorate(an,ln);null!==t&&In(e,t),o.contentEditable="false"}else Lr(r)&&(r.isDirectionless()||(yn+=t));_n+=t,xn+=t}if(null!==t)if(null!=n)t.insertBefore(o,n);else{const e=t.__lexicalLineBreak;null!=e?t.insertBefore(o,e):t.appendChild(o)}return Bt(mn,cn,un,r,"created"),o}function Ln(e,t,n,r,o,i){const s=_n;_n="";let l=n;for(;l<=r;++l){Pn(e[l],o,i);const t=gn.get(e[l]);null!==t&&null===vn&&Lr(t)&&(vn=t.getFormat())}Wt(t)&&(_n+=Ce),o.__lexicalTextContent=_n,_n=s+_n}function An(e,t){const n=t.get(e);return hr(n)||Mo(n)&&n.isInline()}function Dn(e,t,n){const r=null!==e&&(0===e.__size||An(e.__last,hn)),o=0===t.__size||An(t.__last,gn);if(r){if(!o){const e=n.__lexicalLineBreak;null!=e&&n.removeChild(e),n.__lexicalLineBreak=null}}else if(o){const e=document.createElement("br");n.__lexicalLineBreak=e,n.appendChild(e)}}function Mn(e,t){const n=t.__lexicalDirTextContent,r=t.__lexicalDir;if(n!==yn||r!==Sn){const n=""===yn,i=n?Sn:(o=yn,Ee.test(o)?"rtl":Te.test(o)?"ltr":null);if(i!==r){const o=t.classList,s=ln.theme;let l=null!==r?s[r]:void 0,a=null!==i?s[i]:void 0;if(void 0!==l){if("string"==typeof l){const e=Me(l);l=s[r]=e}o.remove(...l)}if(null===i||n&&"ltr"===i)t.removeAttribute("dir");else{if(void 0!==a){if("string"==typeof a){const e=Me(a);a=s[i]=e}void 0!==a&&o.add(...a)}t.dir=i}Cn||(e.getWritable().__dir=i)}Sn=i,t.__lexicalDirTextContent=yn,t.__lexicalDir=i}var o}function Fn(e,t){const n=[];let r=e.__first;for(;null!==r;){const e=t.get(r);void 0===e&&G(101),n.push(r),r=e.__next}return n}function Bn(e,t){const n=hn.get(e);let r=gn.get(e);void 0!==n&&void 0!==r||G(61);const o=bn||fn.has(e)||dn.has(e),i=Zt(an,e);if(n===r&&!o){if(Bo(n)){const e=i.__lexicalTextContent;void 0!==e&&(_n+=e,xn+=e);const t=i.__lexicalDirTextContent;void 0!==t&&(yn+=t)}else{const e=n.getTextContent();Lr(n)&&!n.isDirectionless()&&(yn+=e),xn+=e,_n+=e}return i}if(n!==r&&o&&Bt(mn,cn,un,r,"updated"),r.updateDOM(n,i,ln)){const n=Pn(e,null,null);return null===t&&G(62),t.replaceChild(n,i),wn(e,null),n}if(Bo(n)&&Bo(r)){const e=r.__indent;e!==n.__indent&&Nn(i,e);const t=r.__format;t!==n.__format&&On(i,t),o&&(function(e,t,n){const r=yn;var o;yn="",vn=null,function(e,t,n){const r=_n,o=e.__size,i=t.__size;if(_n="",1===o&&1===i){const r=e.__first,o=t.__first;if(r===o)Bn(r,n);else{const e=zn(r),t=Pn(o,null,null);n.replaceChild(t,e),wn(r,null)}const i=gn.get(o);null===vn&&Lr(i)&&(vn=i.getFormat())}else{const r=Fn(e,hn),s=Fn(t,gn);if(0===o)0!==i&&Ln(s,t,0,i-1,n,null);else if(0===i){if(0!==o){const e=null==n.__lexicalLineBreak;kn(r,0,o-1,e?null:n),e&&(n.textContent="")}}else!function(e,t,n,r,o,i){const s=r-1,l=o-1;let a,c,u=i.firstChild,d=0,f=0;for(;d<=s&&f<=l;){const e=t[d],r=n[f];if(e===r)u=Rn(Bn(r,i)),d++,f++;else{void 0===a&&(a=new Set(t)),void 0===c&&(c=new Set(n));const o=c.has(e),s=a.has(r);if(o)if(s){const e=Zt(an,r);e===u?u=Rn(Bn(r,i)):(null!=u?i.insertBefore(e,u):i.appendChild(e),Bn(r,i)),d++,f++}else Pn(r,i,u),f++;else u=Rn(zn(e)),wn(e,i),d++}const o=gn.get(r);null!==o&&null===vn&&Lr(o)&&(vn=o.getFormat())}const h=d>s,g=f>l;if(h&&!g){const t=n[l+1];Ln(n,e,f,l,i,void 0===t?null:an.getElementByKey(t))}else g&&!h&&kn(t,d,s,i)}(t,r,s,o,i,n)}Wt(t)&&(_n+=Ce),n.__lexicalTextContent=_n,_n=r+_n}(e,t,n),Mn(t,n),Jo(o=t)&&null!=vn&&vn!==o.__textFormat&&o.setTextFormat(vn),yn=r,vn=null}(n,r,i),zo(r)||r.isInline()||Dn(n,r,i)),Wt(r)&&(_n+=Ce,xn+=Ce)}else{const t=r.getTextContent();if(Mo(r)){const t=r.decorate(an,ln);null!==t&&In(e,t)}else Lr(r)&&!r.isDirectionless()&&(yn+=t);_n+=t,xn+=t}if(!Cn&&zo(r)&&r.__cachedText!==xn){const e=r.getWritable();e.__cachedText=xn,r=e}return i}function In(e,t){let n=an._pendingDecorators;const r=an._decorators;if(null===n){if(r[e]===t)return;n=gt(an)}n[e]=t}function Rn(e){let t=e.nextSibling;return null!==t&&t===an._blockCursorElement&&(t=t.nextSibling),t}function zn(e){const t=pn.get(e);return void 0===t&&G(75,e),t}const $n=Object.freeze({}),Wn=[["keydown",function(e,t){if(Zn=e.timeStamp,Kn=e.code,t.isComposing())return;const{code:n,shiftKey:r,ctrlKey:o,metaKey:i,altKey:s}=e;$t(t,y,e)||(!function(e,t,n,r){return Nt(e)&&!t&&!r&&!n}(n,o,s,i)?!function(e,t,n,r,o){return Nt(e)&&!r&&!n&&(t||o)}(n,o,r,s,i)?!function(e,t,n,r){return Tt(e)&&!t&&!r&&!n}(n,o,s,i)?!function(e,t,n,r,o){return Tt(e)&&!r&&!n&&(t||o)}(n,o,r,s,i)?!function(e,t,n){return function(e){return"ArrowUp"===e}(e)&&!t&&!n}(n,o,i)?!function(e,t,n){return function(e){return"ArrowDown"===e}(e)&&!t&&!n}(n,o,i)?!function(e,t){return Pt(e)&&t}(n,r)?!function(e){return"Space"===e}(n)?!function(e,t){return Y&&t&&"KeyO"===e}(n,o)?!function(e,t){return Pt(e)&&!t}(n,r)?!function(e,t,n,r){return Y?!t&&!n&&(Lt(e)||"KeyH"===e&&r):!(r||t||n)&&Lt(e)}(n,s,i,o)?!function(e){return"Escape"===e}(n)?!function(e,t,n,r,o){return Y?!(n||r||o)&&(At(e)||"KeyD"===e&&t):!(t||r||o)&&At(e)}(n,o,r,s,i)?!function(e,t,n){return Lt(e)&&(Y?t:n)}(n,s,o)?!function(e,t,n){return At(e)&&(Y?t:n)}(n,s,o)?!function(e,t){return Y&&t&&Lt(e)}(n,i)?!function(e,t){return Y&&t&&At(e)}(n,i)?!function(e,t,n,r){return"KeyB"===e&&!t&&Ot(n,r)}(n,s,i,o)?!function(e,t,n,r){return"KeyU"===e&&!t&&Ot(n,r)}(n,s,i,o)?!function(e,t,n,r){return"KeyI"===e&&!t&&Ot(n,r)}(n,s,i,o)?!function(e,t,n,r){return"Tab"===e&&!t&&!n&&!r}(n,s,o,i)?!function(e,t,n,r){return"KeyZ"===e&&!t&&Ot(n,r)}(n,r,i,o)?!function(e,t,n,r){return Y?"KeyZ"===e&&n&&t:"KeyY"===e&&r||"KeyZ"===e&&r&&t}(n,r,i,o)?Zr(t._editorState._selection)?function(e,t,n,r){return!t&&"KeyC"===e&&(Y?n:r)}(n,r,i,o)?(e.preventDefault(),$t(t,z,e)):function(e,t,n,r){return!t&&"KeyX"===e&&(Y?n:r)}(n,r,i,o)?(e.preventDefault(),$t(t,$,e)):Dt(n,i,o)&&(e.preventDefault(),$t(t,W,e)):!Q&&Dt(n,i,o)&&(e.preventDefault(),$t(t,W,e)):(e.preventDefault(),$t(t,_,void 0)):(e.preventDefault(),$t(t,m,void 0)):$t(t,P,e):(e.preventDefault(),$t(t,p,"italic")):(e.preventDefault(),$t(t,p,"underline")):(e.preventDefault(),$t(t,p,"bold")):(e.preventDefault(),$t(t,g,!1)):(e.preventDefault(),$t(t,g,!0)):(e.preventDefault(),$t(t,h,!1)):(e.preventDefault(),$t(t,h,!0)):At(n)?$t(t,O,e):(e.preventDefault(),$t(t,l,!1)):$t(t,N,e):Lt(n)?$t(t,T,e):(e.preventDefault(),$t(t,l,!0)):(Gn=!1,$t(t,k,e)):(e.preventDefault(),Gn=!0,$t(t,a,!0)):$t(t,E,e):(Gn=!0,$t(t,k,e)):$t(t,w,e):$t(t,S,e):$t(t,C,e):$t(t,b,e):$t(t,x,e):$t(t,v,e),function(e,t,n,r){return e||t||n||r}(o,r,s,i)&&$t(t,H,e))}],["pointerdown",function(e,t){const n=e.target,r=e.pointerType;n instanceof Node&&"touch"!==r&&Ao(t,(()=>{Mo(ht(n))||(Hn=!0)}))}],["compositionstart",function(e,t){Ao(t,(()=>{const n=to();if($r(n)&&!t.isComposing()){const r=n.anchor,o=n.anchor.getNode();ct(r.key),(e.timeStamp<Zn+30||"element"===r.type||!n.isCollapsed()||o.getFormat()!==n.format||Lr(o)&&o.getStyle()!==n.style)&&$t(t,u,Se)}}))}],["compositionend",function(e,t){Q?qn=!0:Ao(t,(()=>{nr(t,e.data)}))}],["input",function(e,t){e.stopPropagation(),Ao(t,(()=>{const n=to(),r=e.data,o=tr(e);if(null!=r&&$r(n)&&Yn(n,o,r,e.timeStamp,!1)){qn&&(nr(t,r),qn=!1);const o=n.anchor.getNode(),i=Xt(t._window);if(null===i)return;const s=n.isBackward(),l=s?n.anchor.offset:n.focus.offset,a=s?n.focus.offset:n.anchor.offset;ee&&!n.isCollapsed()&&Lr(o)&&null!==i.anchorNode&&o.getTextContent().slice(0,l)+r+o.getTextContent().slice(l+a)===wt(i.anchorNode)||$t(t,u,r);const c=r.length;Q&&c>1&&"insertCompositionText"===e.inputType&&!t.isComposing()&&(n.anchor.offset-=c),te||ne||se||!t.isComposing()||(Zn=0,ct(null))}else kt(!1,t,null!==r?r:void 0),qn&&(nr(t,r||void 0),qn=!1);yo(),Ke(bo())})),jn=null}],["click",function(e,t){Ao(t,(()=>{const n=to(),r=Xt(t._window),o=no();if(r)if($r(n)){const t=n.anchor,i=t.getNode();"element"===t.type&&0===t.offset&&n.isCollapsed()&&!zo(i)&&1===mt().getChildrenSize()&&i.getTopLevelElementOrThrow().isEmpty()&&null!==o&&n.is(o)?(r.removeAllRanges(),n.dirty=!0):3!==e.detail||n.isCollapsed()||i!==n.focus.getNode()&&(Bo(i)?i.select(0):i.getParentOrThrow().select(0))}else if("touch"===e.pointerType){const n=r.anchorNode;if(null!==n){const i=n.nodeType;i!==le&&i!==ae||yt(eo(o,r,t,e))}}$t(t,s,e)}))}],["cut",$n],["copy",$n],["dragstart",$n],["dragover",$n],["dragend",$n],["paste",$n],["focus",$n],["blur",$n],["drop",$n]];ee&&Wn.push(["beforeinput",(e,t)=>function(e,t){const n=e.inputType,r=tr(e);"deleteCompositionText"===n||Q&&zt(t)||"insertCompositionText"!==n&&Ao(t,(()=>{const o=to();if("deleteContentBackward"===n){if(null===o){const e=no();if(!$r(e))return;yt(e.clone())}if($r(o)){const n=o.anchor.key===o.focus.key;if(i=e.timeStamp,"Delete"===Kn&&i<Zn+30&&t.isComposing()&&n){if(ct(null),Zn=0,setTimeout((()=>{Ao(t,(()=>{ct(null)}))}),30),$r(o)){const e=o.anchor.getNode();e.markDirty(),o.format=e.getFormat(),Lr(e)||G(142),o.style=e.getStyle()}}else{ct(null),e.preventDefault();const r=o.anchor.getNode().getTextContent(),i=0===o.anchor.offset&&o.focus.offset===r.length;ie&&n&&!i||$t(t,l,!0)}return}}var i;if(!$r(o))return;const s=e.data;null!==jn&&kt(!1,t,jn),o.dirty&&null===jn||!o.isCollapsed()||zo(o.anchor.getNode())||null===r||o.applyDOMRange(r),jn=null;const y=o.anchor,v=o.focus,x=y.getNode(),b=v.getNode();if("insertText"!==n&&"insertTranspose"!==n)switch(e.preventDefault(),n){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":$t(t,u,e);break;case"insertFromComposition":ct(null),$t(t,u,e);break;case"insertLineBreak":ct(null),$t(t,a,!1);break;case"insertParagraph":ct(null),Gn&&!ne?(Gn=!1,$t(t,a,!1)):$t(t,c,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":$t(t,d,e);break;case"deleteByComposition":(function(e,t){return e!==t||Bo(e)||Bo(t)||!e.isToken()||!t.isToken()})(x,b)&&$t(t,f,e);break;case"deleteByDrag":case"deleteByCut":$t(t,f,e);break;case"deleteContent":$t(t,l,!1);break;case"deleteWordBackward":$t(t,h,!0);break;case"deleteWordForward":$t(t,h,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":$t(t,g,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":$t(t,g,!1);break;case"formatStrikeThrough":$t(t,p,"strikethrough");break;case"formatBold":$t(t,p,"bold");break;case"formatItalic":$t(t,p,"italic");break;case"formatUnderline":$t(t,p,"underline");break;case"historyUndo":$t(t,m,void 0);break;case"historyRedo":$t(t,_,void 0)}else{if("\n"===s)e.preventDefault(),$t(t,a,!1);else if(s===Ce)e.preventDefault(),$t(t,c,void 0);else if(null==s&&e.dataTransfer){const t=e.dataTransfer.getData("text/plain");e.preventDefault(),o.insertRawText(t)}else null!=s&&Yn(o,r,s,e.timeStamp,!0)?(e.preventDefault(),$t(t,u,s)):jn=s;Un=e.timeStamp}}))}(e,t)]);let Zn=0,Kn=null,Un=0,jn=null;const Vn=new WeakMap;let Jn=!1,Hn=!1,Gn=!1,qn=!1,Xn=[0,"",0,"root",0];function Yn(e,t,n,r,o){const i=e.anchor,s=e.focus,l=i.getNode(),a=bo(),c=Xt(a._window),u=null!==c?c.anchorNode:null,d=i.key,f=a.getElementByKey(d),h=n.length;return d!==s.key||!Lr(l)||(!o&&(!ee||Un<r+50)||l.isDirty()&&h<2||bt(n))&&i.offset!==s.offset&&!l.isComposing()||tt(l)||l.isDirty()&&h>1||(o||!ee)&&null!==f&&!l.isComposing()&&u!==rt(f)||null!==c&&null!==t&&(!t.collapsed||t.startContainer!==c.anchorNode||t.startOffset!==c.anchorOffset)||l.getFormat()!==e.format||l.getStyle()!==e.style||function(e,t){if(t.isSegmented())return!0;if(!e.isCollapsed())return!1;const n=e.anchor.offset,r=t.getParentOrThrow(),o=t.isToken();return 0===n?!t.canInsertTextBefore()||!r.canInsertTextBefore()&&!t.isComposing()||o||function(e){const t=e.getPreviousSibling();return(Lr(t)||Bo(t)&&t.isInline())&&!t.canInsertTextAfter()}(t):n===t.getTextContentSize()&&(!t.canInsertTextAfter()||!r.canInsertTextAfter()&&!t.isComposing()||o)}(e,l)}function Qn(e,t){return null!==e&&null!==e.nodeValue&&e.nodeType===ae&&0!==t&&t!==e.nodeValue.length}function er(e,t,n){const{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:l}=e;Jn&&(Jn=!1,Qn(r,i)&&Qn(s,l))||Ao(t,(()=>{if(!n)return void yt(null);if(!Qe(t,r,s))return;const a=to();if($r(a)){const n=a.anchor,r=n.getNode();if(a.isCollapsed()){"Range"===e.type&&e.anchorNode===e.focusNode&&(a.dirty=!0);const o=jt(t).event,i=o?o.timeStamp:performance.now(),[s,l,c,u,d]=Xn,f=mt(),h=!1===t.isComposing()&&""===f.getTextContent();if(i<d+200&&n.offset===c&&n.key===u)a.format=s,a.style=l;else if("text"===n.type)Lr(r)||G(141),a.format=r.getFormat(),a.style=r.getStyle();else if("element"===n.type&&!h){const e=n.getNode();e instanceof Uo&&0===e.getChildrenSize()?a.format=e.getTextFormat():a.format=0,a.style=""}}else{const e=n.key,t=a.focus.key,r=a.getNodes(),o=r.length,s=a.isBackward(),c=s?l:i,u=s?i:l,d=s?t:e,f=s?e:t;let h=ge,g=!1;for(let n=0;n<o;n++){const e=r[n],t=e.getTextContentSize();if(Lr(e)&&0!==t&&!(0===n&&e.__key===d&&c===t||n===o-1&&e.__key===f&&0===u)&&(g=!0,h&=e.getFormat(),0===h))break}a.format=g?h:0}}$t(t,o,void 0)}))}function tr(e){if(!e.getTargetRanges)return null;const t=e.getTargetRanges();return 0===t.length?null:t[0]}function nr(e,t){const n=e._compositionKey;if(ct(null),null!==n&&null!=t){if(""===t){const t=dt(n),r=rt(e.getElementByKey(n));return void(null!==r&&null!==r.nodeValue&&Lr(t)&&Et(t,r.nodeValue,null,null,!0))}if("\n"===t[t.length-1]){const t=to();if($r(t)){const n=t.focus;return t.anchor.set(n.key,n.offset,n.type),void $t(e,k,null)}}}kt(!0,e,t)}function rr(e){let t=e.__lexicalEventHandles;return void 0===t&&(t=[],e.__lexicalEventHandles=t),t}const or=new Map;function ir(e){const t=e.target,n=Xt(null==t?null:9===t.nodeType?t.defaultView:t.ownerDocument.defaultView);if(null===n)return;const r=et(n.anchorNode);if(null===r)return;Hn&&(Hn=!1,Ao(r,(()=>{const t=no(),o=n.anchorNode;if(null===o)return;const i=o.nodeType;i!==le&&i!==ae||yt(eo(t,n,r,e))})));const o=Ct(r),i=o[o.length-1],s=i._key,l=or.get(s),a=l||i;a!==r&&er(n,a,!1),er(n,r,!0),r!==i?or.set(s,r):l&&or.delete(s)}function sr(e){e._lexicalHandled=!0}function lr(e){return!0===e._lexicalHandled}function ar(e,t,n){yo();const r=e.__key,o=e.getParent();if(null===o)return;const i=function(e){const t=to();if(!$r(t)||!Bo(e))return t;const{anchor:n,focus:r}=t,o=n.getNode(),i=r.getNode();return Ut(o,e)&&n.set(e.__key,0,"element"),Ut(i,e)&&r.set(e.__key,0,"element"),t}(e);let s=!1;if($r(i)&&t){const t=i.anchor,n=i.focus;t.key===r&&(io(t,e,o,e.getPreviousSibling(),e.getNextSibling()),s=!0),n.key===r&&(io(n,e,o,e.getPreviousSibling(),e.getNextSibling()),s=!0)}else Zr(i)&&t&&e.isSelected()&&e.selectPrevious();if($r(i)&&t&&!s){const t=e.getIndexWithinParent();lt(e),ro(i,o,t,-1)}else lt(e);n||Vt(o)||o.canBeEmpty()||!o.isEmpty()||ar(o,t),t&&zo(o)&&o.isEmpty()&&o.selectEnd()}class cr{static getType(){G(64,this.name)}static clone(e){G(65,this.name)}constructor(e){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,st(this,e)}getType(){return this.__type}isInline(){G(137,this.constructor.name)}isAttached(){let e=this.__key;for(;null!==e;){if("root"===e)return!0;const t=dt(e);if(null===t)break;e=t.__parent}return!1}isSelected(e){const t=e||to();if(null==t)return!1;const n=t.getNodes().some((e=>e.__key===this.__key));return(Lr(this)||!$r(t)||"element"!==t.anchor.type||"element"!==t.focus.type||t.anchor.key!==t.focus.key||t.anchor.offset!==t.focus.offset)&&n}getKey(){return this.__key}getIndexWithinParent(){const e=this.getParent();if(null===e)return-1;let t=e.getFirstChild(),n=0;for(;null!==t;){if(this.is(t))return n;n++,t=t.getNextSibling()}return-1}getParent(){const e=this.getLatest().__parent;return null===e?null:dt(e)}getParentOrThrow(){const e=this.getParent();return null===e&&G(66,this.__key),e}getTopLevelElement(){let e=this;for(;null!==e;){const t=e.getParent();if(Vt(t))return Bo(e)||G(138),e;e=t}return null}getTopLevelElementOrThrow(){const e=this.getTopLevelElement();return null===e&&G(67,this.__key),e}getParents(){const e=[];let t=this.getParent();for(;null!==t;)e.push(t),t=t.getParent();return e}getParentKeys(){const e=[];let t=this.getParent();for(;null!==t;)e.push(t.__key),t=t.getParent();return e}getPreviousSibling(){const e=this.getLatest().__prev;return null===e?null:dt(e)}getPreviousSiblings(){const e=[],t=this.getParent();if(null===t)return e;let n=t.getFirstChild();for(;null!==n&&!n.is(this);)e.push(n),n=n.getNextSibling();return e}getNextSibling(){const e=this.getLatest().__next;return null===e?null:dt(e)}getNextSiblings(){const e=[];let t=this.getNextSibling();for(;null!==t;)e.push(t),t=t.getNextSibling();return e}getCommonAncestor(e){const t=this.getParents(),n=e.getParents();Bo(this)&&t.unshift(this),Bo(e)&&n.unshift(e);const r=t.length,o=n.length;if(0===r||0===o||t[r-1]!==n[o-1])return null;const i=new Set(n);for(let s=0;s<r;s++){const e=t[s];if(i.has(e))return e}return null}is(e){return null!=e&&this.__key===e.__key}isBefore(e){if(this===e)return!1;if(e.isParentOf(this))return!0;if(this.isParentOf(e))return!1;const t=this.getCommonAncestor(e);let n=0,r=0,o=this;for(;;){const e=o.getParentOrThrow();if(e===t){n=o.getIndexWithinParent();break}o=e}for(o=e;;){const e=o.getParentOrThrow();if(e===t){r=o.getIndexWithinParent();break}o=e}return n<r}isParentOf(e){const t=this.__key;if(t===e.__key)return!1;let n=e;for(;null!==n;){if(n.__key===t)return!0;n=n.getParent()}return!1}getNodesBetween(e){const t=this.isBefore(e),n=[],r=new Set;let o=this;for(;null!==o;){const i=o.__key;if(r.has(i)||(r.add(i),n.push(o)),o===e)break;const s=Bo(o)?t?o.getFirstChild():o.getLastChild():null;if(null!==s){o=s;continue}const l=t?o.getNextSibling():o.getPreviousSibling();if(null!==l){o=l;continue}const a=o.getParentOrThrow();if(r.has(a.__key)||n.push(a),a===e)break;let c=null,u=a;do{if(null===u&&G(68),c=t?u.getNextSibling():u.getPreviousSibling(),u=u.getParent(),null===u)break;null!==c||r.has(u.__key)||n.push(u)}while(null===c);o=c}return t||n.reverse(),n}isDirty(){const e=bo()._dirtyLeaves;return null!==e&&e.has(this.__key)}getLatest(){const e=dt(this.__key);return null===e&&G(113),e}getWritable(){yo();const e=xo(),t=bo(),n=e._nodeMap,r=this.__key,o=this.getLatest(),i=o.__parent,s=t._cloneNotNeeded,l=to();if(null!==l&&l.setCachedNodes(null),s.has(r))return at(o),o;const a=o.constructor.clone(o);return a.__parent=i,a.__next=o.__next,a.__prev=o.__prev,Bo(o)&&Bo(a)?(Jo(o)&&Jo(a)&&(a.__textFormat=o.__textFormat),a.__first=o.__first,a.__last=o.__last,a.__size=o.__size,a.__indent=o.__indent,a.__format=o.__format,a.__dir=o.__dir):Lr(o)&&Lr(a)&&(a.__format=o.__format,a.__style=o.__style,a.__mode=o.__mode,a.__detail=o.__detail),s.add(r),a.__key=r,at(a),n.set(r,a),a}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(e,t){G(70)}updateDOM(e,t,n){G(71)}exportDOM(e){return{element:this.createDOM(e._config,e)}}exportJSON(){G(72)}static importJSON(e){G(18,this.name)}static transform(){return null}remove(e){ar(this,!0,e)}replace(e,t){yo();let n=to();null!==n&&(n=n.clone()),Ht(this,e);const r=this.getLatest(),o=this.__key,i=e.__key,s=e.getWritable(),l=this.getParentOrThrow().getWritable(),a=l.__size;lt(s);const c=r.getPreviousSibling(),u=r.getNextSibling(),d=r.__prev,f=r.__next,h=r.__parent;if(ar(r,!1,!0),null===c?l.__first=i:c.getWritable().__next=i,s.__prev=d,null===u?l.__last=i:u.getWritable().__prev=i,s.__next=f,s.__parent=h,l.__size=a,t&&(Bo(this)&&Bo(s)||G(139),this.getChildren().forEach((e=>{s.append(e)}))),$r(n)){yt(n);const e=n.anchor,t=n.focus;e.key===o&&Ir(e,s),t.key===o&&Ir(t,s)}return ut()===o&&ct(i),s}insertAfter(e,t=!0){yo(),Ht(this,e);const n=this.getWritable(),r=e.getWritable(),o=r.getParent(),i=to();let s=!1,l=!1;if(null!==o){const t=e.getIndexWithinParent();if(lt(r),$r(i)){const e=o.__key,n=i.anchor,r=i.focus;s="element"===n.type&&n.key===e&&n.offset===t+1,l="element"===r.type&&r.key===e&&r.offset===t+1}}const a=this.getNextSibling(),c=this.getParentOrThrow().getWritable(),u=r.__key,d=n.__next;if(null===a?c.__last=u:a.getWritable().__prev=u,c.__size++,n.__next=u,r.__next=d,r.__prev=n.__key,r.__parent=n.__parent,t&&$r(i)){const e=this.getIndexWithinParent();ro(i,c,e+1);const t=c.__key;s&&i.anchor.set(t,e+2,"element"),l&&i.focus.set(t,e+2,"element")}return e}insertBefore(e,t=!0){yo(),Ht(this,e);const n=this.getWritable(),r=e.getWritable(),o=r.__key;lt(r);const i=this.getPreviousSibling(),s=this.getParentOrThrow().getWritable(),l=n.__prev,a=this.getIndexWithinParent();null===i?s.__first=o:i.getWritable().__next=o,s.__size++,n.__prev=o,r.__prev=l,r.__next=n.__key,r.__parent=n.__parent;const c=to();return t&&$r(c)&&ro(c,this.getParentOrThrow(),a),e}isParentRequired(){return!1}createParentElementNode(){return Vo()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(e,t){yo();const n=this.getPreviousSibling(),r=this.getParentOrThrow();if(null===n)return r.select(0,0);if(Bo(n))return n.select();if(!Lr(n)){const e=n.getIndexWithinParent()+1;return r.select(e,e)}return n.select(e,t)}selectNext(e,t){yo();const n=this.getNextSibling(),r=this.getParentOrThrow();if(null===n)return r.select();if(Bo(n))return n.select(0,0);if(!Lr(n)){const e=n.getIndexWithinParent();return r.select(e,e)}return n.select(e,t)}markDirty(){this.getWritable()}}class ur extends cr{static getType(){return"linebreak"}static clone(e){return new ur(e.__key)}constructor(e){super(e)}getTextContent(){return"\n"}createDOM(){return document.createElement("br")}updateDOM(){return!1}static importDOM(){return{br:e=>function(e){const t=e.parentElement;if(null!==t){const n=t.firstChild;if(n===e||n.nextSibling===e&&gr(n)){const n=t.lastChild;if(n===e||n.previousSibling===e&&gr(n))return!0}}return!1}(e)?null:{conversion:dr,priority:0}}}static importJSON(e){return fr()}exportJSON(){return{type:"linebreak",version:1}}}function dr(e){return{node:fr()}}function fr(){return Jt(new ur)}function hr(e){return e instanceof ur}function gr(e){return e.nodeType===ae&&/^( |\t|\r?\n)+$/.test(e.textContent||"")}function pr(e,t){return 16&t?"code":128&t?"mark":32&t?"sub":64&t?"sup":null}function mr(e,t){return 1&t?"strong":2&t?"em":"span"}function _r(e,t,n,r,o){const i=r.classList;let s=Ft(o,"base");void 0!==s&&i.add(...s),s=Ft(o,"underlineStrikethrough");let l=!1;const a=t&he&&t&fe;void 0!==s&&(n&he&&n&fe?(l=!0,a||i.add(...s)):a&&i.remove(...s));for(const c in Ne){const e=Ne[c];if(s=Ft(o,c),void 0!==s)if(n&e){if(l&&("underline"===c||"strikethrough"===c)){t&e&&i.remove(...s);continue}t&e&&(!a||"underline"!==c)&&"strikethrough"!==c||i.add(...s)}else t&e&&i.remove(...s)}}function yr(e,t,n){const r=t.firstChild,o=n.isComposing(),i=e+(o?be:"");if(null==r)t.textContent=i;else{const e=r.nodeValue;if(e!==i)if(o||Q){const[t,n,o]=function(e,t){const n=e.length,r=t.length;let o=0,i=0;for(;o<n&&o<r&&e[o]===t[o];)o++;for(;i+o<n&&i+o<r&&e[n-i-1]===t[r-i-1];)i++;return[o,n-o-i,t.slice(o,r-i)]}(e,i);0!==n&&r.deleteData(t,n),r.insertData(t,o)}else r.nodeValue=i}}function vr(e,t,n,r,o,i){yr(o,e,t);const s=i.theme.text;void 0!==s&&_r(0,0,r,e,s)}function xr(e,t){const n=document.createElement(t);return n.appendChild(e),n}class br extends cr{static getType(){return"text"}static clone(e){return new br(e.__text,e.__key)}constructor(e,t){super(t),this.__text=e,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const e=this.getLatest();return De[e.__mode]}getStyle(){return this.getLatest().__style}isToken(){return 1===this.getLatest().__mode}isComposing(){return this.__key===ut()}isSegmented(){return 2===this.getLatest().__mode}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(e){const t=Ne[e];return!!(this.getFormat()&t)}isSimpleText(){return"text"===this.__type&&0===this.__mode}getTextContent(){return this.getLatest().__text}getFormatFlags(e,t){return ot(this.getLatest().__format,e,t)}canHaveFormat(){return!0}createDOM(e,t){const n=this.__format,r=pr(0,n),o=mr(0,n),i=null===r?o:r,s=document.createElement(i);let l=s;this.hasFormat("code")&&s.setAttribute("spellcheck","false"),null!==r&&(l=document.createElement(o),s.appendChild(l)),vr(l,this,0,n,this.__text,e);const a=this.__style;return""!==a&&(s.style.cssText=a),s}updateDOM(e,t,n){const r=this.__text,o=e.__format,i=this.__format,s=pr(0,o),l=pr(0,i),a=mr(0,o),c=mr(0,i);if((null===s?a:s)!==(null===l?c:l))return!0;if(s===l&&a!==c){const e=t.firstChild;null==e&&G(48);const o=document.createElement(c);return vr(o,this,0,i,r,n),t.replaceChild(o,e),!1}let u=t;null!==l&&null!==s&&(u=t.firstChild,null==u&&G(49)),yr(r,u,this);const d=n.theme.text;void 0!==d&&o!==i&&_r(0,o,i,u,d);const f=e.__style,h=this.__style;return f!==h&&(t.style.cssText=h),!1}static importDOM(){return{"#text":()=>({conversion:Er,priority:0}),b:()=>({conversion:Sr,priority:0}),code:()=>({conversion:Or,priority:0}),em:()=>({conversion:Or,priority:0}),i:()=>({conversion:Or,priority:0}),s:()=>({conversion:Or,priority:0}),span:()=>({conversion:Cr,priority:0}),strong:()=>({conversion:Or,priority:0}),sub:()=>({conversion:Or,priority:0}),sup:()=>({conversion:Or,priority:0}),u:()=>({conversion:Or,priority:0})}}static importJSON(e){const t=Pr(e.text);return t.setFormat(e.format),t.setDetail(e.detail),t.setMode(e.mode),t.setStyle(e.style),t}exportDOM(e){let{element:t}=super.exportDOM(e);return null!==t&&en(t)||G(132),t.style.whiteSpace="pre-wrap",this.hasFormat("bold")&&(t=xr(t,"b")),this.hasFormat("italic")&&(t=xr(t,"i")),this.hasFormat("strikethrough")&&(t=xr(t,"s")),this.hasFormat("underline")&&(t=xr(t,"u")),{element:t}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),type:"text",version:1}}selectionTransform(e,t){}setFormat(e){const t=this.getWritable();return t.__format="string"==typeof e?Ne[e]:e,t}setDetail(e){const t=this.getWritable();return t.__detail="string"==typeof e?Oe[e]:e,t}setStyle(e){const t=this.getWritable();return t.__style=e,t}toggleFormat(e){const t=ot(this.getFormat(),e,null);return this.setFormat(t)}toggleDirectionless(){const e=this.getWritable();return e.__detail^=1,e}toggleUnmergeable(){const e=this.getWritable();return e.__detail^=2,e}setMode(e){const t=Ae[e];if(this.__mode===t)return this;const n=this.getWritable();return n.__mode=t,n}setTextContent(e){if(this.__text===e)return this;const t=this.getWritable();return t.__text=e,t}select(e,t){yo();let n=e,r=t;const o=to(),i=this.getTextContent(),s=this.__key;if("string"==typeof i){const e=i.length;void 0===n&&(n=e),void 0===r&&(r=e)}else n=0,r=0;if(!$r(o))return Xr(s,n,s,r,"text","text");{const e=ut();e!==o.anchor.key&&e!==o.focus.key||ct(s),o.setTextNodeRange(this,n,this,r)}return o}selectStart(){return this.select(0,0)}selectEnd(){const e=this.getTextContentSize();return this.select(e,e)}spliceText(e,t,n,r){const o=this.getWritable(),i=o.__text,s=n.length;let l=e;l<0&&(l=s+l,l<0&&(l=0));const a=to();if(r&&$r(a)){const t=e+s;a.setTextNodeRange(o,t,o,t)}const c=i.slice(0,l)+n+i.slice(l+t);return o.__text=c,o}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...e){yo();const t=this.getLatest(),n=t.getTextContent(),r=t.__key,o=ut(),i=new Set(e),s=[],l=n.length;let a="";for(let C=0;C<l;C++)""!==a&&i.has(C)&&(s.push(a),a=""),a+=n[C];""!==a&&s.push(a);const c=s.length;if(0===c)return[];if(s[0]===n)return[t];const u=s[0],d=t.getParentOrThrow();let f;const h=t.getFormat(),g=t.getStyle(),p=t.__detail;let m=!1;t.isSegmented()?(f=Pr(u),f.__format=h,f.__style=g,f.__detail=p,m=!0):(f=t.getWritable(),f.__text=u);const _=to(),y=[f];let v=u.length;for(let C=1;C<c;C++){const e=s[C],t=e.length,n=Pr(e).getWritable();n.__format=h,n.__style=g,n.__detail=p;const i=n.__key,l=v+t;if($r(_)){const e=_.anchor,t=_.focus;e.key===r&&"text"===e.type&&e.offset>v&&e.offset<=l&&(e.key=i,e.offset-=v,_.dirty=!0),t.key===r&&"text"===t.type&&t.offset>v&&t.offset<=l&&(t.key=i,t.offset-=v,_.dirty=!0)}o===r&&ct(i),v=l,y.push(n)}!function(e){const t=e.getPreviousSibling(),n=e.getNextSibling();null!==t&&at(t),null!==n&&at(n)}(this);const x=d.getWritable(),b=this.getIndexWithinParent();return m?(x.splice(b,0,y),this.remove()):x.splice(b,1,y),$r(_)&&ro(_,d,b,c-1),y}mergeWithSibling(e){const t=e===this.getPreviousSibling();t||e===this.getNextSibling()||G(50);const n=this.__key,r=e.__key,o=this.__text,i=o.length;ut()===r&&ct(n);const s=to();if($r(s)){const o=s.anchor,l=s.focus;null!==o&&o.key===r&&(so(o,t,n,e,i),s.dirty=!0),null!==l&&l.key===r&&(so(l,t,n,e,i),s.dirty=!0)}const l=e.__text,a=t?l+o:o+l;this.setTextContent(a);const c=this.getWritable();return e.remove(),c}isTextEntity(){return!1}}function Cr(e){const t=e.style,n=t.fontWeight,r=t.textDecoration.split(" "),o="700"===n||"bold"===n,i=r.includes("line-through"),s="italic"===t.fontStyle,l=r.includes("underline"),a=t.verticalAlign;return{forChild:e=>Lr(e)?(o&&e.toggleFormat("bold"),i&&e.toggleFormat("strikethrough"),s&&e.toggleFormat("italic"),l&&e.toggleFormat("underline"),"sub"===a&&e.toggleFormat("subscript"),"super"===a&&e.toggleFormat("superscript"),e):e,node:null}}function Sr(e){const t="normal"===e.style.fontWeight;return{forChild:e=>(Lr(e)&&!t&&e.toggleFormat("bold"),e),node:null}}const wr=new WeakMap;function kr(e){return"PRE"===e.nodeName||e.nodeType===le&&void 0!==e.style&&void 0!==e.style.whiteSpace&&e.style.whiteSpace.startsWith("pre")}function Er(e){const t=e;null===e.parentElement&&G(129);let n=t.textContent||"";if(null!==function(e){let t,n=e.parentNode;const r=[e];for(;null!==n&&void 0===(t=wr.get(n))&&!kr(n);)r.push(n),n=n.parentNode;const o=void 0===t?n:t;for(let i=0;i<r.length;i++)wr.set(r[i],o);return o}(t)){const e=n.split(/(\r?\n|\t)/),t=[],r=e.length;for(let n=0;n<r;n++){const r=e[n];"\n"===r||"\r\n"===r?t.push(fr()):"\t"===r?t.push(Dr()):""!==r&&t.push(Pr(r))}return{node:t}}if(n=n.replace(/\r/g,"").replace(/[ \t\n]+/g," "),""===n)return{node:null};if(" "===n[0]){let e=t,r=!0;for(;null!==e&&null!==(e=Tr(e,!1));){const t=e.textContent||"";if(t.length>0){/[ \t\n]$/.test(t)&&(n=n.slice(1)),r=!1;break}}r&&(n=n.slice(1))}if(" "===n[n.length-1]){let e=t,r=!0;for(;null!==e&&null!==(e=Tr(e,!0));)if((e.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){r=!1;break}r&&(n=n.slice(0,n.length-1))}return""===n?{node:null}:{node:Pr(n)}}function Tr(e,t){let n=e;for(;;){let e;for(;null===(e=t?n.nextSibling:n.previousSibling);){const e=n.parentElement;if(null===e)return null;n=e}if(n=e,n.nodeType===le){const e=n.style.display;if(""===e&&!tn(n)||""!==e&&!e.startsWith("inline"))return null}let r=n;for(;null!==(r=t?n.firstChild:n.lastChild);)n=r;if(n.nodeType===ae)return n;if("BR"===n.nodeName)return null}}const Nr={code:"code",em:"italic",i:"italic",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function Or(e){const t=Nr[e.nodeName.toLowerCase()];return void 0===t?{node:null}:{forChild:e=>(Lr(e)&&!e.hasFormat(t)&&e.toggleFormat(t),e),node:null}}function Pr(e=""){return Jt(new br(e))}function Lr(e){return e instanceof br}class Ar extends br{static getType(){return"tab"}static clone(e){const t=new Ar(e.__key);return t.__text=e.__text,t.__format=e.__format,t.__style=e.__style,t}constructor(e){super("\t",e),this.__detail=2}static importDOM(){return null}static importJSON(e){const t=Dr();return t.setFormat(e.format),t.setStyle(e.style),t}exportJSON(){return{...super.exportJSON(),type:"tab",version:1}}setTextContent(e){G(126)}setDetail(e){G(127)}setMode(e){G(128)}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function Dr(){return Jt(new Ar)}class Mr{constructor(e,t,n){this._selection=null,this.key=e,this.offset=t,this.type=n}is(e){return this.key===e.key&&this.offset===e.offset&&this.type===e.type}isBefore(e){let t=this.getNode(),n=e.getNode();const r=this.offset,o=e.offset;if(Bo(t)){const e=t.getDescendantByIndex(r);t=null!=e?e:t}if(Bo(n)){const e=n.getDescendantByIndex(o);n=null!=e?e:n}return t===n?r<o:t.isBefore(n)}getNode(){const e=dt(this.key);return null===e&&G(20),e}set(e,t,n){const r=this._selection,o=this.key;this.key=e,this.offset=t,this.type=n,_o()||(ut()===o&&ct(e),null!==r&&(r.setCachedNodes(null),r.dirty=!0))}}function Fr(e,t,n){return new Mr(e,t,n)}function Br(e,t){let n=t.__key,r=e.offset,o="element";if(Lr(t)){o="text";const e=t.getTextContentSize();r>e&&(r=e)}else if(!Bo(t)){const e=t.getNextSibling();if(Lr(e))n=e.__key,r=0,o="text";else{const e=t.getParent();e&&(n=e.__key,r=t.getIndexWithinParent()+1)}}e.set(n,r,o)}function Ir(e,t){if(Bo(t)){const n=t.getLastDescendant();Bo(n)||Lr(n)?Br(e,n):Br(e,t)}else Br(e,t)}function Rr(e,t,n,r){e.key=t,e.offset=n,e.type=r}class zr{constructor(e){this._cachedNodes=null,this._nodes=e,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){if(!Zr(e))return!1;const t=this._nodes,n=e._nodes;return t.size===n.size&&Array.from(t).every((e=>n.has(e)))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(e){this.dirty=!0,this._nodes.add(e),this._cachedNodes=null}delete(e){this.dirty=!0,this._nodes.delete(e),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(e){return this._nodes.has(e)}clone(){return new zr(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(e){}insertText(){}insertNodes(e){const t=this.getNodes(),n=t.length,r=t[n-1];let o;if(Lr(r))o=r.select();else{const e=r.getIndexWithinParent()+1;o=r.getParentOrThrow().select(e,e)}o.insertNodes(e);for(let i=0;i<n;i++)t[i].remove()}getNodes(){const e=this._cachedNodes;if(null!==e)return e;const t=this._nodes,n=[];for(const r of t){const e=dt(r);null!==e&&n.push(e)}return _o()||(this._cachedNodes=n),n}getTextContent(){const e=this.getNodes();let t="";for(let n=0;n<e.length;n++)t+=e[n].getTextContent();return t}}function $r(e){return e instanceof Wr}class Wr{constructor(e,t,n,r){this.anchor=e,this.focus=t,e._selection=this,t._selection=this,this._cachedNodes=null,this.format=n,this.style=r,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return!!$r(e)&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)&&this.format===e.format&&this.style===e.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const e=this._cachedNodes;if(null!==e)return e;const t=this.anchor,n=this.focus,r=t.isBefore(n),o=r?t:n,i=r?n:t;let s=o.getNode(),l=i.getNode();const a=o.offset,c=i.offset;if(Bo(s)){const e=s.getDescendantByIndex(a);s=null!=e?e:s}if(Bo(l)){let e=l.getDescendantByIndex(c);null!==e&&e!==s&&l.getChildAtIndex(c)===e&&(e=e.getPreviousSibling()),l=null!=e?e:l}let u;return u=s.is(l)?Bo(s)&&s.getChildrenSize()>0?[]:[s]:s.getNodesBetween(l),_o()||(this._cachedNodes=u),u}setTextNodeRange(e,t,n,r){Rr(this.anchor,e.__key,t,"text"),Rr(this.focus,n.__key,r,"text"),this._cachedNodes=null,this.dirty=!0}getTextContent(){const e=this.getNodes();if(0===e.length)return"";const t=e[0],n=e[e.length-1],r=this.anchor,o=this.focus,i=r.isBefore(o),[s,l]=Ur(this);let a="",c=!0;for(let u=0;u<e.length;u++){const d=e[u];if(Bo(d)&&!d.isInline())c||(a+="\n"),c=!d.isEmpty();else if(c=!1,Lr(d)){let e=d.getTextContent();d===t?d===n?"element"===r.type&&"element"===o.type&&o.offset!==r.offset||(e=s<l?e.slice(s,l):e.slice(l,s)):e=i?e.slice(s):e.slice(l):d===n&&(e=i?e.slice(0,l):e.slice(0,s)),a+=e}else!Mo(d)&&!hr(d)||d===n&&this.isCollapsed()||(a+=d.getTextContent())}return a}applyDOMRange(e){const t=bo(),n=t.getEditorState()._selection,r=Gr(e.startContainer,e.startOffset,e.endContainer,e.endOffset,t,n);if(null===r)return;const[o,i]=r;Rr(this.anchor,o.key,o.offset,o.type),Rr(this.focus,i.key,i.offset,i.type),this._cachedNodes=null}clone(){const e=this.anchor,t=this.focus;return new Wr(Fr(e.key,e.offset,e.type),Fr(t.key,t.offset,t.type),this.format,this.style)}toggleFormat(e){this.format=ot(this.format,e,null),this.dirty=!0}setStyle(e){this.style=e,this.dirty=!0}hasFormat(e){const t=Ne[e];return!!(this.format&t)}insertRawText(e){const t=e.split(/(\r?\n|\t)/),n=[],r=t.length;for(let o=0;o<r;o++){const e=t[o];"\n"===e||"\r\n"===e?n.push(fr()):"\t"===e?n.push(Dr()):n.push(Pr(e))}this.insertNodes(n)}insertText(e){const t=this.anchor,n=this.focus,r=this.format,o=this.style;let i=t,s=n;!this.isCollapsed()&&n.isBefore(t)&&(i=n,s=t),"element"===i.type&&function(e,t,n,r){const o=e.getNode(),i=o.getChildAtIndex(e.offset),s=Pr(),l=zo(o)?Vo().append(s):s;s.setFormat(n),s.setStyle(r),null===i?o.append(l):i.insertBefore(l),e.is(t)&&t.set(s.__key,0,"text"),e.set(s.__key,0,"text")}(i,s,r,o);const l=i.offset;let a=s.offset;const c=this.getNodes(),u=c.length;let d=c[0];Lr(d)||G(26);const f=d.getTextContent().length,h=d.getParentOrThrow();let g=c[u-1];if(1===u&&"element"===s.type&&(a=f,s.set(i.key,a,"text")),this.isCollapsed()&&l===f&&(d.isSegmented()||d.isToken()||!d.canInsertTextAfter()||!h.canInsertTextAfter()&&null===d.getNextSibling())){let t=d.getNextSibling();if(Lr(t)&&t.canInsertTextBefore()&&!tt(t)||(t=Pr(),t.setFormat(r),h.canInsertTextAfter()?d.insertAfter(t):h.insertAfter(t)),t.select(0,0),d=t,""!==e)return void this.insertText(e)}else if(this.isCollapsed()&&0===l&&(d.isSegmented()||d.isToken()||!d.canInsertTextBefore()||!h.canInsertTextBefore()&&null===d.getPreviousSibling())){let t=d.getPreviousSibling();if(Lr(t)&&!tt(t)||(t=Pr(),t.setFormat(r),h.canInsertTextBefore()?d.insertBefore(t):h.insertBefore(t)),t.select(),d=t,""!==e)return void this.insertText(e)}else if(d.isSegmented()&&l!==f){const e=Pr(d.getTextContent());e.setFormat(r),d.replace(e),d=e}else if(!this.isCollapsed()&&""!==e){const t=g.getParent();if(!h.canInsertTextBefore()||!h.canInsertTextAfter()||Bo(t)&&(!t.canInsertTextBefore()||!t.canInsertTextAfter()))return this.insertText(""),Hr(this.anchor,this.focus,null),void this.insertText(e)}if(1===u){if(d.isToken()){const t=Pr(e);return t.select(),void d.replace(t)}const t=d.getFormat(),n=d.getStyle();if(l!==a||t===r&&n===o){if(function(e){return e instanceof Ar}(d)){const t=Pr(e);return t.setFormat(r),t.setStyle(o),t.select(),void d.replace(t)}}else{if(""!==d.getTextContent()){const t=Pr(e);if(t.setFormat(r),t.setStyle(o),t.select(),0===l)d.insertBefore(t,!1);else{const[e]=d.splitText(l);e.insertAfter(t,!1)}return void(t.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length))}d.setFormat(r),d.setStyle(o)}const i=a-l;d=d.spliceText(l,i,e,!0),""===d.getTextContent()?d.remove():"text"===this.anchor.type&&(d.isComposing()?this.anchor.offset-=e.length:(this.format=t,this.style=n))}else{const t=new Set([...d.getParentKeys(),...g.getParentKeys()]),n=Bo(d)?d:d.getParentOrThrow();let r=Bo(g)?g:g.getParentOrThrow(),o=g;if(!n.is(r)&&r.isInline())do{o=r,r=r.getParentOrThrow()}while(r.isInline());if("text"===s.type&&(0!==a||""===g.getTextContent())||"element"===s.type&&g.getIndexWithinParent()<a)if(Lr(g)&&!g.isToken()&&a!==g.getTextContentSize()){if(g.isSegmented()){const e=Pr(g.getTextContent());g.replace(e),g=e}zo(s.getNode())||"text"!==s.type||(g=g.spliceText(0,a,"")),t.add(g.__key)}else{const e=g.getParentOrThrow();e.canBeEmpty()||1!==e.getChildrenSize()?g.remove():e.remove()}else t.add(g.__key);const i=r.getChildren(),h=new Set(c),p=n.is(r),m=n.isInline()&&null===d.getNextSibling()?n:d;for(let e=i.length-1;e>=0;e--){const t=i[e];if(t.is(d)||Bo(t)&&t.isParentOf(d))break;t.isAttached()&&(!h.has(t)||t.is(o)?p||m.insertAfter(t,!1):t.remove())}if(!p){let e=r,n=null;for(;null!==e;){const r=e.getChildren(),o=r.length;(0===o||r[o-1].is(n))&&(t.delete(e.__key),n=e),e=e.getParent()}}if(d.isToken())if(l===f)d.select();else{const t=Pr(e);t.select(),d.replace(t)}else d=d.spliceText(l,f-l,e,!0),""===d.getTextContent()?d.remove():d.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length);for(let e=1;e<u;e++){const n=c[e],r=n.__key;t.has(r)||n.remove()}}}removeText(){this.insertText("")}formatText(e){if(this.isCollapsed())return this.toggleFormat(e),void ct(null);const t=this.getNodes(),n=[];for(const _ of t)Lr(_)&&n.push(_);const r=n.length;if(0===r)return this.toggleFormat(e),void ct(null);const o=this.anchor,i=this.focus,s=this.isBackward(),l=s?i:o,a=s?o:i;let c=0,u=n[0],d="element"===l.type?0:l.offset;if("text"===l.type&&d===u.getTextContentSize()&&(c=1,u=n[1],d=0),null==u)return;const f=u.getFormatFlags(e,null),h=r-1;let g=n[h];const p="text"===a.type?a.offset:g.getTextContentSize();if(u.is(g)){if(d===p)return;if(0===d&&p===u.getTextContentSize())u.setFormat(f);else{const e=u.splitText(d,p),t=0===d?e[0]:e[1];t.setFormat(f),"text"===l.type&&l.set(t.__key,0,"text"),"text"===a.type&&a.set(t.__key,p-d,"text")}return void(this.format=f)}0!==d&&([,u]=u.splitText(d),d=0),u.setFormat(f);const m=g.getFormatFlags(e,f);p>0&&(p!==g.getTextContentSize()&&([g]=g.splitText(p)),g.setFormat(m));for(let _=c+1;_<h;_++){const t=n[_];if(!t.isToken()){const n=t.getFormatFlags(e,m);t.setFormat(n)}}"text"===l.type&&l.set(u.__key,d,"text"),"text"===a.type&&a.set(g.__key,p,"text"),this.format=f|m}insertNodes(e){if(0===e.length)return;if("root"===this.anchor.key){this.insertParagraph();const t=to();return $r(t)||G(134),t.insertNodes(e)}const t=on((this.isBackward()?this.focus:this.anchor).getNode(),rn),n=e[e.length-1];if("__language"in t&&Bo(t)){if("__language"in e[0])this.insertText(e[0].getTextContent());else{const r=ao(this);t.splice(r,0,e),n.selectEnd()}return}if(!e.some((e=>(Bo(e)||Mo(e))&&!e.isInline()))){Bo(t)||G(135);const r=ao(this);return t.splice(r,0,e),void n.selectEnd()}const r=function(e){const t=Vo();let n=null;for(let r=0;r<e.length;r++){const o=e[r],i=hr(o);if(i||Mo(o)&&o.isInline()||Bo(o)&&o.isInline()||Lr(o)||o.isParentRequired()){if(null===n&&(n=o.createParentElementNode(),t.append(n),i))continue;null!==n&&n.append(o)}else t.append(o),n=null}return t}(e),o=r.getLastDescendant(),i=r.getChildren(),s=e=>"__value"in e&&"__checked"in e,l=Bo(t)&&t.isEmpty()?null:this.insertParagraph(),a=i[i.length-1];let c=i[0];var u;Bo(u=c)&&rn(u)&&!u.isEmpty()&&Bo(t)&&(!t.isEmpty()||s(t))&&(Bo(t)||G(135),t.append(...c.getChildren()),c=i[1]),c&&function(e,t,n){const r=t.getParentOrThrow().getLastChild();let o=t;const i=[t];for(;o!==r;)o.getNextSibling()||G(140),o=o.getNextSibling(),i.push(o);let s=e;for(const l of i)s=s.insertAfter(l)}(t,c);const d=on(o,rn);l&&Bo(d)&&(s(l)||rn(a))&&(d.append(...l.getChildren()),l.remove()),Bo(t)&&t.isEmpty()&&t.remove(),o.selectEnd();const f=Bo(t)?t.getLastChild():null;hr(f)&&d!==t&&f.remove()}insertParagraph(){if("root"===this.anchor.key){const e=Vo();return mt().splice(this.anchor.offset,0,[e]),e.select(),e}const e=ao(this),t=on(this.anchor.getNode(),rn);Bo(t)||G(136);const n=t.getChildAtIndex(e),r=n?[n,...n.getNextSiblings()]:[],o=t.insertNewAfter(this,!1);return o?(o.append(...r),o.selectStart(),o):null}insertLineBreak(e){const t=fr();if(this.insertNodes([t]),e){const e=t.getParentOrThrow(),n=t.getIndexWithinParent();e.select(n,n)}}extract(){const e=this.getNodes(),t=e.length,n=t-1,r=this.anchor,o=this.focus;let i=e[0],s=e[n];const[l,a]=Ur(this);if(0===t)return[];if(1===t){if(Lr(i)&&!this.isCollapsed()){const e=l>a?a:l,t=l>a?l:a,n=i.splitText(e,t),r=0===e?n[0]:n[1];return null!=r?[r]:[]}return[i]}const c=r.isBefore(o);if(Lr(i)){const t=c?l:a;t===i.getTextContentSize()?e.shift():0!==t&&([,i]=i.splitText(t),e[0]=i)}if(Lr(s)){const t=s.getTextContent().length,r=c?a:l;0===r?e.pop():r!==t&&([s]=s.splitText(r),e[n]=s)}return e}modify(e,t,n){const r=this.focus,o=this.anchor,i="move"===e,s=Rt(r,t);if(Mo(s)&&!s.isIsolated()){if(i&&s.isKeyboardSelectable()){const e=Qr();return e.add(s.__key),void yt(e)}const e=t?s.getPreviousSibling():s.getNextSibling();if(Lr(e)){const n=e.__key,s=t?e.getTextContent().length:0;return r.set(n,s,"text"),void(i&&o.set(n,s,"text"))}{const n=s.getParentOrThrow();let l,a;return Bo(e)?(a=e.__key,l=t?e.getChildrenSize():0):(l=s.getIndexWithinParent(),a=n.__key,t||l++),r.set(a,l,"element"),void(i&&o.set(a,l,"element"))}}const l=bo(),a=Xt(l._window);if(!a)return;const c=l._blockCursorElement,u=l._rootElement;if(null===u||null===c||!Bo(s)||s.isInline()||s.canBeEmpty()||qt(c,l,u),function(e,t,n,r){e.modify(t,n,r)}(a,e,t?"backward":"forward",n),a.rangeCount>0){const e=a.getRangeAt(0),n=this.anchor.getNode(),r=zo(n)?n:function(e){let t=e.getParentOrThrow();for(;null!==t;){if(Vt(t))return t;t=t.getParentOrThrow()}return t}(n);if(this.applyDOMRange(e),this.dirty=!0,!i){const n=this.getNodes(),o=[];let i=!1;for(let e=0;e<n.length;e++){const t=n[e];Ut(t,r)?o.push(t):i=!0}if(i&&o.length>0)if(t){const e=o[0];Bo(e)?e.selectStart():e.getParentOrThrow().selectStart()}else{const e=o[o.length-1];Bo(e)?e.selectEnd():e.getParentOrThrow().selectEnd()}a.anchorNode===e.startContainer&&a.anchorOffset===e.startOffset||function(e){const t=e.focus,n=e.anchor,r=n.key,o=n.offset,i=n.type;Rr(n,t.key,t.offset,t.type),Rr(t,r,o,i),e._cachedNodes=null}(this)}}}forwardDeletion(e,t,n){if(!n&&("element"===e.type&&Bo(t)&&e.offset===t.getChildrenSize()||"text"===e.type&&e.offset===t.getTextContentSize())){const e=t.getParent(),n=t.getNextSibling()||(null===e?null:e.getNextSibling());if(Bo(n)&&n.isShadowRoot())return!0}return!1}deleteCharacter(e){const t=this.isCollapsed();if(this.isCollapsed()){const t=this.anchor;let n=t.getNode();if(this.forwardDeletion(t,n,e))return;const r=this.focus,i=Rt(r,e);if(Mo(i)&&!i.isIsolated()){if(i.isKeyboardSelectable()&&Bo(n)&&0===n.getChildrenSize()){n.remove();const e=Qr();e.add(i.__key),yt(e)}else i.remove(),bo().dispatchCommand(o,void 0);return}if(!e&&Bo(i)&&Bo(n)&&n.isEmpty())return n.remove(),void i.selectStart();if(this.modify("extend",e,"character"),this.isCollapsed()){if(e&&0===t.offset&&("element"===t.type?t.getNode():t.getNode().getParentOrThrow()).collapseAtStart(this))return}else{const o="text"===r.type?r.getNode():null;if(n="text"===t.type?t.getNode():null,null!==o&&o.isSegmented()){const t=r.offset,i=o.getTextContentSize();if(o.is(n)||e&&t!==i||!e&&0!==t)return void jr(o,e,t)}else if(null!==n&&n.isSegmented()){const r=t.offset,i=n.getTextContentSize();if(n.is(o)||e&&0!==r||!e&&r!==i)return void jr(n,e,r)}!function(e,t){const n=e.anchor,r=e.focus,o=n.getNode();if(o===r.getNode()&&"text"===n.type&&"text"===r.type){const e=n.offset,i=r.offset,s=e<i,l=s?e:i,a=s?i:e,c=a-1;l!==c&&(bt(o.getTextContent().slice(l,a))||(t?r.offset=c:n.offset=c))}}(this,e)}}if(this.removeText(),e&&!t&&this.isCollapsed()&&"element"===this.anchor.type&&0===this.anchor.offset){const e=this.anchor.getNode();e.isEmpty()&&zo(e.getParent())&&0===e.getIndexWithinParent()&&e.collapseAtStart(this)}}deleteLine(e){this.isCollapsed()&&("text"===this.anchor.type&&this.modify("extend",e,"lineboundary"),0===(e?this.focus:this.anchor).offset&&this.modify("extend",e,"character")),this.removeText()}deleteWord(e){if(this.isCollapsed()){const t=this.anchor,n=t.getNode();if(this.forwardDeletion(t,n,e))return;this.modify("extend",e,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function Zr(e){return e instanceof zr}function Kr(e){const t=e.offset;if("text"===e.type)return t;const n=e.getNode();return t===n.getChildrenSize()?n.getTextContent().length:0}function Ur(e){const t=e.getStartEndPoints();if(null===t)return[0,0];const[n,r]=t;return"element"===n.type&&"element"===r.type&&n.key===r.key&&n.offset===r.offset?[0,0]:[Kr(n),Kr(r)]}function jr(e,t,n){const r=e,o=r.getTextContent().split(/(?=\s)/g),i=o.length;let s=0,l=0;for(let c=0;c<i;c++){const e=c===i-1;if(l=s,s+=o[c].length,t&&s===n||s>n||e){o.splice(c,1),e&&(l=void 0);break}}const a=o.join("").trim();""===a?r.remove():(r.setTextContent(a),r.select(l,l))}function Vr(e,t,n,r){let o,i=t;if(e.nodeType===le){let s=!1;const l=e.childNodes,a=l.length,c=r._blockCursorElement;i===a&&(s=!0,i=a-1);let u=l[i],d=!1;if(u===c)u=l[i+1],d=!0;else if(null!==c){const n=c.parentNode;e===n&&t>Array.prototype.indexOf.call(n.children,c)&&i--}if(o=vt(u),Lr(o))i=xt(o,s);else{let r=vt(e);if(null===r)return null;if(Bo(r)){i=Math.min(r.getChildrenSize(),i);let e=r.getChildAtIndex(i);if(Bo(e)&&function(e,t,n){const r=e.getParent();return null===n||null===r||!r.canBeEmpty()||r!==n.getNode()}(e,0,n)){const t=s?e.getLastDescendant():e.getFirstDescendant();null===t?r=e:(e=t,r=Bo(e)?e:e.getParentOrThrow()),i=0}Lr(e)?(o=e,r=null,i=xt(e,s)):e!==r&&s&&!d&&i++}else{const n=r.getIndexWithinParent();i=0===t&&Mo(r)&&vt(e)===r?n:n+1,r=r.getParentOrThrow()}if(Bo(r))return Fr(r.__key,i,"element")}}else o=vt(e);return Lr(o)?Fr(o.__key,i,"text"):null}function Jr(e,t,n){const r=e.offset,o=e.getNode();if(0===r){const r=o.getPreviousSibling(),i=o.getParent();if(t){if((n||!t)&&null===r&&Bo(i)&&i.isInline()){const t=i.getPreviousSibling();Lr(t)&&(e.key=t.__key,e.offset=t.getTextContent().length)}}else Bo(r)&&!n&&r.isInline()?(e.key=r.__key,e.offset=r.getChildrenSize(),e.type="element"):Lr(r)&&(e.key=r.__key,e.offset=r.getTextContent().length)}else if(r===o.getTextContent().length){const r=o.getNextSibling(),i=o.getParent();if(t&&Bo(r)&&r.isInline())e.key=r.__key,e.offset=0,e.type="element";else if((n||t)&&null===r&&Bo(i)&&i.isInline()&&!i.canInsertTextAfter()){const t=i.getNextSibling();Lr(t)&&(e.key=t.__key,e.offset=0)}}}function Hr(e,t,n){if("text"===e.type&&"text"===t.type){const r=e.isBefore(t),o=e.is(t);Jr(e,r,o),Jr(t,!r,o),o&&(t.key=e.key,t.offset=e.offset,t.type=e.type);const i=bo();if(i.isComposing()&&i._compositionKey!==e.key&&$r(n)){const r=n.anchor,o=n.focus;Rr(e,r.key,r.offset,r.type),Rr(t,o.key,o.offset,o.type)}}}function Gr(e,t,n,r,o,i){if(null===e||null===n||!Qe(o,e,n))return null;const s=Vr(e,t,$r(i)?i.anchor:null,o);if(null===s)return null;const l=Vr(n,r,$r(i)?i.focus:null,o);if(null===l)return null;if("element"===s.type&&"element"===l.type){const t=vt(e),r=vt(n);if(Mo(t)&&Mo(r))return null}return Hr(s,l,i),[s,l]}function qr(e){return Bo(e)&&!e.isInline()}function Xr(e,t,n,r,o,i){const s=xo(),l=new Wr(Fr(e,t,o),Fr(n,r,i),0,"");return l.dirty=!0,s._selection=l,l}function Yr(){const e=Fr("root",0,"element"),t=Fr("root",0,"element");return new Wr(e,t,0,"")}function Qr(){return new zr(new Set)}function eo(e,t,n,r){const o=n._window;if(null===o)return null;const i=r||o.event,s=i?i.type:void 0,l="selectionchange"===s,a=!Be&&(l||"beforeinput"===s||"compositionstart"===s||"compositionend"===s||"click"===s&&i&&3===i.detail||"drop"===s||void 0===s);let c,u,d,f;if($r(e)&&!a)return e.clone();if(null===t)return null;if(c=t.anchorNode,u=t.focusNode,d=t.anchorOffset,f=t.focusOffset,l&&$r(e)&&!Qe(n,c,u))return e.clone();const h=Gr(c,d,u,f,n,e);if(null===h)return null;const[g,p]=h;return new Wr(g,p,$r(e)?e.format:0,$r(e)?e.style:"")}function to(){return xo()._selection}function no(){return bo()._editorState._selection}function ro(e,t,n,r=1){const o=e.anchor,i=e.focus,s=o.getNode(),l=i.getNode();if(!t.is(s)&&!t.is(l))return;const a=t.__key;if(e.isCollapsed()){const t=o.offset;if(n<=t&&r>0||n<t&&r<0){const n=Math.max(0,t+r);o.set(a,n,"element"),i.set(a,n,"element"),oo(e)}}else{const s=e.isBackward(),l=s?i:o,c=l.getNode(),u=s?o:i,d=u.getNode();if(t.is(c)){const e=l.offset;(n<=e&&r>0||n<e&&r<0)&&l.set(a,Math.max(0,e+r),"element")}if(t.is(d)){const e=u.offset;(n<=e&&r>0||n<e&&r<0)&&u.set(a,Math.max(0,e+r),"element")}}oo(e)}function oo(e){const t=e.anchor,n=t.offset,r=e.focus,o=r.offset,i=t.getNode(),s=r.getNode();if(e.isCollapsed()){if(!Bo(i))return;const e=i.getChildrenSize(),o=n>=e,s=o?i.getChildAtIndex(e-1):i.getChildAtIndex(n);if(Lr(s)){let e=0;o&&(e=s.getTextContentSize()),t.set(s.__key,e,"text"),r.set(s.__key,e,"text")}}else{if(Bo(i)){const e=i.getChildrenSize(),r=n>=e,o=r?i.getChildAtIndex(e-1):i.getChildAtIndex(n);if(Lr(o)){let e=0;r&&(e=o.getTextContentSize()),t.set(o.__key,e,"text")}}if(Bo(s)){const e=s.getChildrenSize(),t=o>=e,n=t?s.getChildAtIndex(e-1):s.getChildAtIndex(o);if(Lr(n)){let e=0;t&&(e=n.getTextContentSize()),r.set(n.__key,e,"text")}}}}function io(e,t,n,r,o){let i=null,s=0,l=null;null!==r?(i=r.__key,Lr(r)?(s=r.getTextContentSize(),l="text"):Bo(r)&&(s=r.getChildrenSize(),l="element")):null!==o&&(i=o.__key,Lr(o)?l="text":Bo(o)&&(l="element")),null!==i&&null!==l?e.set(i,s,l):(s=t.getIndexWithinParent(),-1===s&&(s=n.getChildrenSize()),e.set(n.__key,s,"element"))}function so(e,t,n,r,o){"text"===e.type?(e.key=n,t||(e.offset+=o)):e.offset>r.getIndexWithinParent()&&(e.offset-=1)}function lo(e){let t=to()||no();null===t&&(t=mt().selectEnd()),t.insertNodes(e)}function ao(e){let t=e;e.isCollapsed()||t.removeText();const n=to();$r(n)&&(t=n),$r(t)||G(161);const r=t.anchor;let o=r.getNode(),i=r.offset;for(;!rn(o);)[o,i]=co(o,i);return i}function co(e,t){const n=e.getParent();if(!n){const e=Vo();return mt().append(e),e.select(),[mt(),0]}if(Lr(e)){const r=e.splitText(t);if(0===r.length)return[n,e.getIndexWithinParent()];const o=0===t?0:1;return[n,r[0].getIndexWithinParent()+o]}if(!Bo(e)||0===t)return[n,e.getIndexWithinParent()];const r=e.getChildAtIndex(t);if(r){const n=new Wr(Fr(e.__key,t,"element"),Fr(e.__key,t,"element"),0,""),o=e.insertNewAfter(n);o&&o.append(r,...r.getNextSiblings())}return[n,e.getIndexWithinParent()+1]}let uo=null,fo=null,ho=!1,go=!1,po=0;const mo={characterData:!0,childList:!0,subtree:!0};function _o(){return ho||null!==uo&&uo._readOnly}function yo(){ho&&G(13)}function vo(){po>99&&G(14)}function xo(){return null===uo&&G(15),uo}function bo(){return null===fo&&G(16),fo}function Co(e,t,n){const r=t.__type,o=function(e,t){const n=e._nodes.get(t);return void 0===n&&G(30,t),n}(e,r);let i=n.get(r);void 0===i&&(i=Array.from(o.transforms),n.set(r,i));const s=i.length;for(let l=0;l<s&&(i[l](t),t.isAttached());l++);}function So(e,t){return void 0!==e&&e.__key!==t&&e.isAttached()}function wo(e){return ko(e,bo()._nodes)}function ko(e,t){const n=e.type,r=t.get(n);void 0===r&&G(17,n);const o=r.klass;e.type!==o.getType()&&G(18,o.name);const i=o.importJSON(e),s=e.children;if(Bo(i)&&Array.isArray(s))for(let l=0;l<s.length;l++){const e=ko(s[l],t);i.append(e)}return i}function Eo(e,t){const n=uo,r=ho,o=fo;uo=e,ho=!0,fo=null;try{return t()}finally{uo=n,ho=r,fo=o}}function To(e,t){const n=e._pendingEditorState,r=e._rootElement,i=e._headless||null===r;if(null===n)return;const s=e._editorState,l=s._selection,a=n._selection,c=e._dirtyType!==ce,u=uo,d=ho,f=fo,h=e._updating,g=e._observer;let p=null;if(e._pendingEditorState=null,e._editorState=n,!i&&c&&null!==g){fo=e,uo=n,ho=!1,e._updating=!0;try{const t=e._dirtyType,r=e._dirtyElements,o=e._dirtyLeaves;g.disconnect(),p=function(e,t,n,r,o,i){_n="",xn="",yn="",bn=r===de,Sn=null,an=n,ln=n._config,cn=n._nodes,un=an._listeners.mutation,dn=o,fn=i,hn=e._nodeMap,gn=t._nodeMap,Cn=t._readOnly,pn=new Map(n._keyToDOMMap);const s=new Map;return mn=s,Bn("root",null),an=void 0,cn=void 0,dn=void 0,fn=void 0,hn=void 0,gn=void 0,ln=void 0,pn=void 0,mn=void 0,s}(s,n,e,t,r,o)}catch(o){if(o instanceof Error&&e._onError(o),go)throw o;return Yo(e,null,r,n),Ue(e),e._dirtyType=de,go=!0,To(e,s),void(go=!1)}finally{g.observe(r,mo),e._updating=h,uo=u,ho=d,fo=f}}n._readOnly||(n._readOnly=!0);const m=e._dirtyLeaves,_=e._dirtyElements,y=e._normalizedNodes,v=e._updateTags,x=e._deferred;c&&(e._dirtyType=ce,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set),function(e,t){const n=e._decorators;let r=e._pendingDecorators||n;const o=t._nodeMap;let i;for(i in r)o.has(i)||(r===n&&(r=gt(e)),delete r[i])}(e,n);const b=i?null:Xt(e._window);if(e._editable&&null!==b&&(c||null===a||a.dirty)){fo=e,uo=n;try{if(null!==g&&g.disconnect(),c||null===a||a.dirty){const t=e._blockCursorElement;null!==t&&qt(t,e,r),function(e,t,n,r,o,i,s){const l=r.anchorNode,a=r.focusNode,c=r.anchorOffset,u=r.focusOffset,d=document.activeElement;if(o.has("collaboration")&&d!==i||null!==d&&Ye(d))return;if(!$r(t))return void(null!==e&&Qe(n,l,a)&&r.removeAllRanges());const f=t.anchor,h=t.focus,g=f.key,p=h.key,m=Zt(n,g),_=Zt(n,p),y=f.offset,v=h.offset,x=t.format,b=t.style,C=t.isCollapsed();let S=m,w=_,k=!1;if("text"===f.type){S=rt(m);const e=f.getNode();k=e.getFormat()!==x||e.getStyle()!==b}else $r(e)&&"text"===e.anchor.type&&(k=!0);var E,T,N,O,P;if("text"===h.type&&(w=rt(_)),null!==S&&null!==w&&(C&&(null===e||k||$r(e)&&(e.format!==x||e.style!==b))&&(E=x,T=b,N=y,O=g,P=performance.now(),Xn=[E,T,N,O,P]),c!==y||u!==v||l!==S||a!==w||"Range"===r.type&&C||(null!==d&&i.contains(d)||i.focus({preventScroll:!0}),"element"===f.type))){try{r.setBaseAndExtent(S,y,w,v)}catch(e){}if(!o.has("skip-scroll-into-view")&&t.isCollapsed()&&null!==i&&i===document.activeElement){const e=t instanceof Wr&&"element"===t.anchor.type?S.childNodes[y]||null:r.rangeCount>0?r.getRangeAt(0):null;if(null!==e){let t;if(e instanceof Text){const n=document.createRange();n.selectNode(e),t=n.getBoundingClientRect()}else t=e.getBoundingClientRect();!function(e,t,n){const r=n.ownerDocument,o=r.defaultView;if(null===o)return;let{top:i,bottom:s}=t,l=0,a=0,c=n;for(;null!==c;){const t=c===r.body;if(t)l=0,a=jt(e).innerHeight;else{const e=c.getBoundingClientRect();l=e.top,a=e.bottom}let n=0;if(i<l?n=-(l-i):s>a&&(n=s-a),0!==n)if(t)o.scrollBy(0,n);else{const e=c.scrollTop;c.scrollTop+=n;const t=c.scrollTop-e;i-=t,s-=t}if(t)break;c=Kt(c)}}(n,t,i)}}Jn=!0}}(l,a,e,b,v,r)}(function(e,t,n){let r=e._blockCursorElement;if($r(n)&&n.isCollapsed()&&"element"===n.anchor.type&&t.contains(document.activeElement)){const o=n.anchor,i=o.getNode(),s=o.offset;let l=!1,a=null;if(s===i.getChildrenSize())Gt(i.getChildAtIndex(s-1))&&(l=!0);else{const t=i.getChildAtIndex(s);if(Gt(t)){const n=t.getPreviousSibling();(null===n||Gt(n))&&(l=!0,a=e.getElementByKey(t.__key))}}if(l){const n=e.getElementByKey(i.__key);return null===r&&(e._blockCursorElement=r=function(e){const t=e.theme,n=document.createElement("div");n.contentEditable="false",n.setAttribute("data-lexical-cursor","true");let r=t.blockCursor;if(void 0!==r){if("string"==typeof r){const e=Me(r);r=t.blockCursor=e}void 0!==r&&n.classList.add(...r)}return n}(e._config)),t.style.caretColor="transparent",void(null===a?n.appendChild(r):n.insertBefore(r,a))}}null!==r&&qt(r,e,t)})(e,r,a),null!==g&&g.observe(r,mo)}finally{fo=f,uo=u}}null!==p&&function(e,t,n,r,o){const i=Array.from(e._listeners.mutation),s=i.length;for(let l=0;l<s;l++){const[e,s]=i[l],a=t.get(s);void 0!==a&&e(a,{dirtyLeaves:r,prevEditorState:o,updateTags:n})}}(e,p,v,m,s),$r(a)||null===a||null!==l&&l.is(a)||e.dispatchCommand(o,void 0);const C=e._pendingDecorators;null!==C&&(e._decorators=C,e._pendingDecorators=null,No("decorator",e,!0,C)),function(e,t,n){const r=pt(t),o=pt(n);r!==o&&No("textcontent",e,!0,o)}(e,t||s,n),No("update",e,!0,{dirtyElements:_,dirtyLeaves:m,editorState:n,normalizedNodes:y,prevEditorState:t||s,tags:v}),function(e,t){if(e._deferred=[],0!==t.length){const n=e._updating;e._updating=!0;try{for(let e=0;e<t.length;e++)t[e]()}finally{e._updating=n}}}(e,x),function(e){const t=e._updates;if(0!==t.length){const n=t.shift();if(n){const[t,r]=n;Lo(e,t,r)}}}(e)}function No(e,t,n,...r){const o=t._updating;t._updating=n;try{const n=Array.from(t._listeners[e]);for(let e=0;e<n.length;e++)n[e].apply(null,r)}finally{t._updating=o}}function Oo(e,t,n){if(!1===e._updating||fo!==e){let r=!1;return e.update((()=>{r=Oo(e,t,n)})),r}const r=Ct(e);for(let o=4;o>=0;o--)for(let i=0;i<r.length;i++){const s=r[i]._commands.get(t);if(void 0!==s){const t=s[o];if(void 0!==t){const r=Array.from(t),o=r.length;for(let t=0;t<o;t++)if(!0===r[t](n,e))return!0}}}return!1}function Po(e,t){const n=e._updates;let r=t||!1;for(;0!==n.length;){const t=n.shift();if(t){const[n,o]=t;let i,s;void 0!==o&&(i=o.onUpdate,s=o.tag,o.skipTransforms&&(r=!0),i&&e._deferred.push(i),s&&e._updateTags.add(s)),n()}}return r}function Lo(e,t,n){const r=e._updateTags;let o,i,s=!1,l=!1;void 0!==n&&(o=n.onUpdate,i=n.tag,null!=i&&r.add(i),s=n.skipTransforms||!1,l=n.discrete||!1),o&&e._deferred.push(o);const a=e._editorState;let c=e._pendingEditorState,u=!1;(null===c||c._readOnly)&&(c=e._pendingEditorState=new Zo(new Map((c||a)._nodeMap)),u=!0),c._flushSync=l;const d=uo,f=ho,h=fo,g=e._updating;uo=c,ho=!1,e._updating=!0,fo=e;try{u&&(e._headless?null!==a._selection&&(c._selection=a._selection.clone()):c._selection=function(e){const t=e.getEditorState()._selection,n=Xt(e._window);return $r(t)||null==t?eo(t,n,e,null):t.clone()}(e));const n=e._compositionKey;t(),s=Po(e,s),function(e,t){const n=t.getEditorState()._selection,r=e._selection;if($r(r)){const e=r.anchor,t=r.focus;let o;if("text"===e.type&&(o=e.getNode(),o.selectionTransform(n,r)),"text"===t.type){const e=t.getNode();o!==e&&e.selectionTransform(n,r)}}}(c,e),e._dirtyType!==ce&&(s?function(e,t){const n=t._dirtyLeaves,r=e._nodeMap;for(const o of n){const e=r.get(o);Lr(e)&&e.isAttached()&&e.isSimpleText()&&!e.isUnmergeable()&&Je(e)}}(c,e):function(e,t){const n=t._dirtyLeaves,r=t._dirtyElements,o=e._nodeMap,i=ut(),s=new Map;let l=n,a=l.size,c=r,u=c.size;for(;a>0||u>0;){if(a>0){t._dirtyLeaves=new Set;for(const e of l){const r=o.get(e);Lr(r)&&r.isAttached()&&r.isSimpleText()&&!r.isUnmergeable()&&Je(r),void 0!==r&&So(r,i)&&Co(t,r,s),n.add(e)}if(l=t._dirtyLeaves,a=l.size,a>0){po++;continue}}t._dirtyLeaves=new Set,t._dirtyElements=new Map;for(const e of c){const n=e[0],l=e[1];if("root"!==n&&!l)continue;const a=o.get(n);void 0!==a&&So(a,i)&&Co(t,a,s),r.set(n,l)}l=t._dirtyLeaves,a=l.size,c=t._dirtyElements,u=c.size,po++}t._dirtyLeaves=n,t._dirtyElements=r}(c,e),Po(e),function(e,t,n,r){const o=e._nodeMap,i=t._nodeMap,s=[];for(const[l]of r){const e=i.get(l);void 0!==e&&(e.isAttached()||(Bo(e)&&sn(e,l,o,i,s,r),o.has(l)||r.delete(l),s.push(l)))}for(const l of s)i.delete(l);for(const l of n){const e=i.get(l);void 0===e||e.isAttached()||(o.has(l)||n.delete(l),i.delete(l))}}(a,c,e._dirtyLeaves,e._dirtyElements)),n!==e._compositionKey&&(c._flushSync=!0);const r=c._selection;if($r(r)){const e=c._nodeMap,t=r.anchor.key,n=r.focus.key;void 0!==e.get(t)&&void 0!==e.get(n)||G(19)}else Zr(r)&&0===r._nodes.size&&(c._selection=null)}catch(t){return t instanceof Error&&e._onError(t),e._pendingEditorState=a,e._dirtyType=de,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void To(e)}finally{uo=d,ho=f,fo=h,e._updating=g,po=0}const p=e._dirtyType!==ce||function(e,t){const n=t.getEditorState()._selection,r=e._selection;if(null!==r){if(r.dirty||!r.is(n))return!0}else if(null!==n)return!0;return!1}(c,e);p?c._flushSync?(c._flushSync=!1,To(e)):u&&Xe((()=>{To(e)})):(c._flushSync=!1,u&&(r.clear(),e._deferred=[],e._pendingEditorState=null))}function Ao(e,t,n){e._updating?e._updates.push([t,n]):Lo(e,t,n)}class Do extends cr{constructor(e){super(e)}decorate(e,t){G(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function Mo(e){return e instanceof Do}class Fo extends cr{constructor(e){super(e),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__indent=0,this.__dir=null}getFormat(){return this.getLatest().__format}getFormatType(){const e=this.getFormat();return Le[e]||""}getIndent(){return this.getLatest().__indent}getChildren(){const e=[];let t=this.getFirstChild();for(;null!==t;)e.push(t),t=t.getNextSibling();return e}getChildrenKeys(){const e=[];let t=this.getFirstChild();for(;null!==t;)e.push(t.__key),t=t.getNextSibling();return e}getChildrenSize(){return this.getLatest().__size}isEmpty(){return 0===this.getChildrenSize()}isDirty(){const e=bo()._dirtyElements;return null!==e&&e.has(this.__key)}isLastChild(){const e=this.getLatest(),t=this.getParentOrThrow().getLastChild();return null!==t&&t.is(e)}getAllTextNodes(){const e=[];let t=this.getFirstChild();for(;null!==t;){if(Lr(t)&&e.push(t),Bo(t)){const n=t.getAllTextNodes();e.push(...n)}t=t.getNextSibling()}return e}getFirstDescendant(){let e=this.getFirstChild();for(;Bo(e);){const t=e.getFirstChild();if(null===t)break;e=t}return e}getLastDescendant(){let e=this.getLastChild();for(;Bo(e);){const t=e.getLastChild();if(null===t)break;e=t}return e}getDescendantByIndex(e){const t=this.getChildren(),n=t.length;if(e>=n){const e=t[n-1];return Bo(e)&&e.getLastDescendant()||e||null}const r=t[e];return Bo(r)&&r.getFirstDescendant()||r||null}getFirstChild(){const e=this.getLatest().__first;return null===e?null:dt(e)}getFirstChildOrThrow(){const e=this.getFirstChild();return null===e&&G(45,this.__key),e}getLastChild(){const e=this.getLatest().__last;return null===e?null:dt(e)}getLastChildOrThrow(){const e=this.getLastChild();return null===e&&G(96,this.__key),e}getChildAtIndex(e){const t=this.getChildrenSize();let n,r;if(e<t/2){for(n=this.getFirstChild(),r=0;null!==n&&r<=e;){if(r===e)return n;n=n.getNextSibling(),r++}return null}for(n=this.getLastChild(),r=t-1;null!==n&&r>=e;){if(r===e)return n;n=n.getPreviousSibling(),r--}return null}getTextContent(){let e="";const t=this.getChildren(),n=t.length;for(let r=0;r<n;r++){const o=t[r];e+=o.getTextContent(),Bo(o)&&r!==n-1&&!o.isInline()&&(e+=Ce)}return e}getTextContentSize(){let e=0;const t=this.getChildren(),n=t.length;for(let r=0;r<n;r++){const o=t[r];e+=o.getTextContentSize(),Bo(o)&&r!==n-1&&!o.isInline()&&(e+=Ce.length)}return e}getDirection(){return this.getLatest().__dir}hasFormat(e){if(""!==e){const t=Pe[e];return!!(this.getFormat()&t)}return!1}select(e,t){yo();const n=to();let r=e,o=t;const i=this.getChildrenSize();if(!this.canBeEmpty())if(0===e&&0===t){const e=this.getFirstChild();if(Lr(e)||Bo(e))return e.select(0,0)}else if(!(void 0!==e&&e!==i||void 0!==t&&t!==i)){const e=this.getLastChild();if(Lr(e)||Bo(e))return e.select()}void 0===r&&(r=i),void 0===o&&(o=i);const s=this.__key;return $r(n)?(n.anchor.set(s,r,"element"),n.focus.set(s,o,"element"),n.dirty=!0,n):Xr(s,r,s,o,"element","element")}selectStart(){const e=this.getFirstDescendant();return e?e.selectStart():this.select()}selectEnd(){const e=this.getLastDescendant();return e?e.selectEnd():this.select()}clear(){const e=this.getWritable();return this.getChildren().forEach((e=>e.remove())),e}append(...e){return this.splice(this.getChildrenSize(),0,e)}setDirection(e){const t=this.getWritable();return t.__dir=e,t}setFormat(e){return this.getWritable().__format=""!==e?Pe[e]:0,this}setIndent(e){return this.getWritable().__indent=e,this}splice(e,t,n){const r=n.length,o=this.getChildrenSize(),i=this.getWritable(),s=i.__key,l=[],a=[],c=this.getChildAtIndex(e+t);let u=null,d=o-t+r;if(0!==e)if(e===o)u=this.getLastChild();else{const t=this.getChildAtIndex(e);null!==t&&(u=t.getPreviousSibling())}if(t>0){let e=null===u?this.getFirstChild():u.getNextSibling();for(let n=0;n<t;n++){null===e&&G(100);const t=e.getNextSibling(),n=e.__key;lt(e.getWritable()),a.push(n),e=t}}let f=u;for(let h=0;h<r;h++){const e=n[h];null!==f&&e.is(f)&&(u=f=f.getPreviousSibling());const t=e.getWritable();t.__parent===s&&d--,lt(t);const r=e.__key;if(null===f)i.__first=r,t.__prev=null;else{const e=f.getWritable();e.__next=r,t.__prev=e.__key}e.__key===s&&G(76),t.__parent=s,l.push(r),f=e}if(e+t===o)null!==f&&(f.getWritable().__next=null,i.__last=f.__key);else if(null!==c){const e=c.getWritable();if(null!==f){const t=f.getWritable();e.__prev=f.__key,t.__next=c.__key}else e.__prev=null}if(i.__size=d,a.length){const e=to();if($r(e)){const t=new Set(a),n=new Set(l),{anchor:r,focus:o}=e;Io(r,t,n)&&io(r,r.getNode(),this,u,c),Io(o,t,n)&&io(o,o.getNode(),this,u,c),0!==d||this.canBeEmpty()||Vt(this)||this.remove()}}return i}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"element",version:1}}insertNewAfter(e,t){return null}canIndent(){return!0}collapseAtStart(e){return!1}excludeFromCopy(e){return!1}canReplaceWith(e){return!0}canInsertAfter(e){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(e){return!1}extractWithChild(e,t,n){return!1}}function Bo(e){return e instanceof Fo}function Io(e,t,n){let r=e.getNode();for(;r;){const e=r.__key;if(t.has(e)&&!n.has(e))return!0;r=r.getParent()}return!1}class Ro extends Fo{static getType(){return"root"}static clone(){return new Ro}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){G(51)}getTextContent(){const e=this.__cachedText;return!_o()&&bo()._dirtyType!==ce||null===e?super.getTextContent():e}remove(){G(52)}replace(e){G(53)}insertBefore(e){G(54)}insertAfter(e){G(55)}updateDOM(e,t){return!1}append(...e){for(let t=0;t<e.length;t++){const n=e[t];Bo(n)||Mo(n)||G(56)}return super.append(...e)}static importJSON(e){const t=mt();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"root",version:1}}collapseAtStart(){return!0}}function zo(e){return e instanceof Ro}function $o(){return new Zo(new Map([["root",new Ro]]))}function Wo(e){const t=e.exportJSON(),n=e.constructor;if(t.type!==n.getType()&&G(130,n.name),Bo(e)){const r=t.children;Array.isArray(r)||G(59,n.name);const o=e.getChildren();for(let e=0;e<o.length;e++){const t=Wo(o[e]);r.push(t)}}return t}class Zo{constructor(e,t){this._nodeMap=e,this._selection=t||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return 1===this._nodeMap.size&&null===this._selection}read(e){return Eo(this,e)}clone(e){const t=new Zo(this._nodeMap,void 0===e?this._selection:e);return t._readOnly=!0,t}toJSON(){return Eo(this,(()=>({root:Wo(mt())})))}}class Ko extends Fo{static getType(){return"artificial"}createDOM(e){return document.createElement("div")}}class Uo extends Fo{constructor(e){super(e),this.__textFormat=0}static getType(){return"paragraph"}getTextFormat(){return this.getLatest().__textFormat}setTextFormat(e){const t=this.getWritable();return t.__textFormat=e,t}hasTextFormat(e){const t=Ne[e];return!!(this.getTextFormat()&t)}static clone(e){return new Uo(e.__key)}createDOM(e){const t=document.createElement("p"),n=Ft(e.theme,"paragraph");return void 0!==n&&t.classList.add(...n),t}updateDOM(e,t,n){return!1}static importDOM(){return{p:e=>({conversion:jo,priority:0})}}exportDOM(e){const{element:t}=super.exportDOM(e);if(t&&en(t)){this.isEmpty()&&t.append(document.createElement("br"));const e=this.getFormatType();t.style.textAlign=e;const n=this.getDirection();n&&(t.dir=n);const r=this.getIndent();r>0&&(t.style.textIndent=20*r+"px")}return{element:t}}static importJSON(e){const t=Vo();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t.setTextFormat(e.textFormat),t}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),type:"paragraph",version:1}}insertNewAfter(e,t){const n=Vo();n.setTextFormat(e.format);const r=this.getDirection();return n.setDirection(r),n.setFormat(this.getFormatType()),this.insertAfter(n,t),n}collapseAtStart(){const e=this.getChildren();if(0===e.length||Lr(e[0])&&""===e[0].getTextContent().trim()){if(null!==this.getNextSibling())return this.selectNext(),this.remove(),!0;if(null!==this.getPreviousSibling())return this.selectPrevious(),this.remove(),!0}return!1}}function jo(e){const t=Vo();if(e.style){t.setFormat(e.style.textAlign);const n=parseInt(e.style.textIndent,10)/20;n>0&&t.setIndent(n)}return{node:t}}function Vo(){return Jt(new Uo)}function Jo(e){return e instanceof Uo}const Ho=0,Go=1,qo=3,Xo=4;function Yo(e,t,n,r){const o=e._keyToDOMMap;o.clear(),e._editorState=$o(),e._pendingEditorState=r,e._compositionKey=null,e._dirtyType=ce,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null;const i=e._observer;null!==i&&(i.disconnect(),e._observer=null),null!==t&&(t.textContent=""),null!==n&&(n.textContent="",o.set("root",n))}function Qo(e){const t=e||{},n=fo,r=t.theme||{},o=void 0===e?n:t.parentEditor||null,i=t.disableEvents||!1,s=$o(),l=t.namespace||(null!==o?o._config.namespace:St()),a=t.editorState,c=[Ro,br,ur,Ar,Uo,Ko,...t.nodes||[]],{onError:u,html:d}=t,f=void 0===t.editable||t.editable;let h;if(void 0===e&&null!==n)h=n._nodes;else{h=new Map;for(let e=0;e<c.length;e++){let t=c[e],n=null,r=null;if("function"!=typeof t){const e=t;t=e.replace,n=e.with,r=e.withKlass||null}const o=t.getType(),i=t.transform(),s=new Set;null!==i&&s.add(i),h.set(o,{exportDOM:d&&d.export?d.export.get(t):void 0,klass:t,replace:n,replaceWithKlass:r,transforms:s})}}const g=new ei(s,o,h,{disableEvents:i,namespace:l,theme:r},u||console.error,function(e,t){const n=new Map,r=new Set,o=e=>{Object.keys(e).forEach((t=>{let r=n.get(t);void 0===r&&(r=[],n.set(t,r)),r.push(e[t])}))};return e.forEach((e=>{const t=e.klass.importDOM;if(null==t||r.has(t))return;r.add(t);const n=t.call(e.klass);null!==n&&o(n)})),t&&o(t),n}(h,d?d.import:void 0),f);return void 0!==a&&(g._pendingEditorState=a,g._dirtyType=de),g}class ei{constructor(e,t,n,r,o,i,s){this._parentEditor=t,this._rootElement=null,this._editorState=e,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=r,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=ce,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=St(),this._onError=o,this._htmlConversions=i,this._editable=s,this._headless=null!==t&&t._headless,this._window=null,this._blockCursorElement=null}isComposing(){return null!=this._compositionKey}registerUpdateListener(e){const t=this._listeners.update;return t.add(e),()=>{t.delete(e)}}registerEditableListener(e){const t=this._listeners.editable;return t.add(e),()=>{t.delete(e)}}registerDecoratorListener(e){const t=this._listeners.decorator;return t.add(e),()=>{t.delete(e)}}registerTextContentListener(e){const t=this._listeners.textcontent;return t.add(e),()=>{t.delete(e)}}registerRootListener(e){const t=this._listeners.root;return e(this._rootElement,null),t.add(e),()=>{e(null,this._rootElement),t.delete(e)}}registerCommand(e,t,n){void 0===n&&G(35);const r=this._commands;r.has(e)||r.set(e,[new Set,new Set,new Set,new Set,new Set]);const o=r.get(e);void 0===o&&G(36,String(e));const i=o[n];return i.add(t),()=>{i.delete(t),o.every((e=>0===e.size))&&r.delete(e)}}registerMutationListener(e,t){void 0===this._nodes.get(e.getType())&&G(37,e.name);const n=this._listeners.mutation;return n.set(t,e),()=>{n.delete(t)}}registerNodeTransformToKlass(e,t){const n=e.getType(),r=this._nodes.get(n);return void 0===r&&G(37,e.name),r.transforms.add(t),r}registerNodeTransform(e,t){const n=this.registerNodeTransformToKlass(e,t),r=[n],o=n.replaceWithKlass;if(null!=o){const e=this.registerNodeTransformToKlass(o,t);r.push(e)}var i;return this,i=e.getType(),Ao(this,(()=>{const e=xo();if(e.isEmpty())return;if("root"===i)return void mt().markDirty();const t=e._nodeMap;for(const[,n]of t)n.markDirty()}),null===this._pendingEditorState?{tag:"history-merge"}:void 0),()=>{r.forEach((e=>e.transforms.delete(t)))}}hasNode(e){return this._nodes.has(e.getType())}hasNodes(e){return e.every(this.hasNode.bind(this))}dispatchCommand(e,t){return $t(this,e,t)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(e){const t=this._rootElement;if(e!==t){const n=Ft(this._config.theme,"root"),r=this._pendingEditorState||this._editorState;if(this._rootElement=e,Yo(this,t,e,r),null!==t&&(this._config.disableEvents||function(e){const t=e.ownerDocument,n=Vn.get(t);void 0===n&&G(162);const r=n-1;r>=0||G(164),Vn.set(t,r),0===r&&t.removeEventListener("selectionchange",ir);const o=e.__lexicalEditor;null!=o&&(function(e){if(null!==e._parentEditor){const t=Ct(e),n=t[t.length-1]._key;or.get(n)===e&&or.delete(n)}else or.delete(e._key)}(o),e.__lexicalEditor=null);const i=rr(e);for(let s=0;s<i.length;s++)i[s]();e.__lexicalEventHandles=[]}(t),null!=n&&t.classList.remove(...n)),null!==e){const t=function(e){const t=e.ownerDocument;return t&&t.defaultView||null}(e),r=e.style;r.userSelect="text",r.whiteSpace="pre-wrap",r.wordBreak="break-word",e.setAttribute("data-lexical-editor","true"),this._window=t,this._dirtyType=de,Ue(this),this._updateTags.add("history-merge"),To(this),this._config.disableEvents||function(e,t){const n=e.ownerDocument,r=Vn.get(n);(void 0===r||r<1)&&n.addEventListener("selectionchange",ir),Vn.set(n,(r||0)+1),e.__lexicalEditor=t;const o=rr(e);for(let i=0;i<Wn.length;i++){const[n,r]=Wn[i],s="function"==typeof r?e=>{lr(e)||(sr(e),(t.isEditable()||"click"===n)&&r(e,t))}:e=>{if(!lr(e)&&(sr(e),t.isEditable()))switch(n){case"cut":return $t(t,$,e);case"copy":return $t(t,z,e);case"paste":return $t(t,d,e);case"dragstart":return $t(t,B,e);case"dragover":return $t(t,I,e);case"dragend":return $t(t,R,e);case"focus":return $t(t,V,e);case"blur":return $t(t,J,e);case"drop":return $t(t,M,e)}};e.addEventListener(n,s),o.push((()=>{e.removeEventListener(n,s)}))}}(e,this),null!=n&&e.classList.add(...n)}else this._editorState=r,this._pendingEditorState=null,this._window=null;No("root",this,!1,e,t)}}getElementByKey(e){return this._keyToDOMMap.get(e)||null}getEditorState(){return this._editorState}setEditorState(e,t){e.isEmpty()&&G(38),Ke(this);const n=this._pendingEditorState,r=this._updateTags,o=void 0!==t?t.tag:null;null===n||n.isEmpty()||(null!=o&&r.add(o),To(this)),this._pendingEditorState=e,this._dirtyType=de,this._dirtyElements.set("root",!1),this._compositionKey=null,null!=o&&r.add(o),To(this)}parseEditorState(e,t){return function(e,t,n){const r=$o(),o=uo,i=ho,s=fo,l=t._dirtyElements,a=t._dirtyLeaves,c=t._cloneNotNeeded,u=t._dirtyType;t._dirtyElements=new Map,t._dirtyLeaves=new Set,t._cloneNotNeeded=new Set,t._dirtyType=0,uo=r,ho=!1,fo=t;try{const o=t._nodes;ko(e.root,o),n&&n(),r._readOnly=!0}catch(e){e instanceof Error&&t._onError(e)}finally{t._dirtyElements=l,t._dirtyLeaves=a,t._cloneNotNeeded=c,t._dirtyType=u,uo=o,ho=i,fo=s}return r}("string"==typeof e?JSON.parse(e):e,this,t)}update(e,t){Ao(this,e,t)}focus(e,t={}){const n=this._rootElement;null!==n&&(n.setAttribute("autocapitalize","off"),Ao(this,(()=>{const e=to(),n=mt();null!==e?e.dirty=!0:0!==n.getChildrenSize()&&("rootStart"===t.defaultSelection?n.selectStart():n.selectEnd())}),{onUpdate:()=>{n.removeAttribute("autocapitalize"),e&&e()},tag:"focus"}),null===this._pendingEditorState&&n.removeAttribute("autocapitalize"))}blur(){const e=this._rootElement;null!==e&&e.blur();const t=Xt(this._window);null!==t&&t.removeAllRanges()}isEditable(){return this._editable}setEditable(e){this._editable!==e&&(this._editable=e,No("editable",this,!0,e))}toJSON(){return{editorState:this._editorState.toJSON()}}}}}]);