"use strict";(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[21794],{27662:(e,t,s)=>{s.d(t,{h:()=>c});var n=s(31635),o=s(40462),i=s(29368),r=s(12275);class a{static getCategorySuggestion(e,t){return(0,o.A)(Object.assign(Object.assign({},t),{url:i.A.CategoriesSuggestion.url({}),method:i.A.CategoriesSuggestion.method,params:e}))}static getCourseSuggestion(e,t){return(0,o.A)(Object.assign(Object.assign({},t),{url:i.A.CourseSuggestion.url({}),method:i.A.CourseSuggestion.method,params:e}))}static getIncubatorSuggestion(e,t){return(0,o.A)(Object.assign(Object.assign({},t),{url:i.A.GetIncubatorSuggestion.url({}),method:i.A.GetIncubatorSuggestion.method,params:e}))}static getPollSuggestion(e,t){return(0,o.A)(Object.assign(Object.assign({},t),{url:i.A.PollSuggestion.url({}),method:i.A.PollSuggestion.method,params:e}))}static getUserSuggestion(e,t){return(0,o.A)(Object.assign(Object.assign({},t),{url:i.A.UserSuggestion.url({}),method:i.A.UserSuggestion.method,params:e}))}static getEventSuggestion(e,t){return(0,o.A)(Object.assign(Object.assign({},t),{url:i.A.EventSuggestion.url({}),method:i.A.EventSuggestion.method,params:e}))}static getSearchSuggestion(e,t,s){const n=(0,r._)({search:e});return(0,o.A)(Object.assign(Object.assign({},s),{url:`${i.A.SearchSuggestion.url({})}?${n.toString()}`,method:i.A.UserSuggestion.method,params:t}))}}class c{static getCategorySuggestion(e,t){return(0,n.__awaiter)(this,void 0,void 0,(function*(){return a.getCategorySuggestion(e,t)}))}static getCourseSuggestion(e,t){return(0,n.__awaiter)(this,void 0,void 0,(function*(){return a.getCourseSuggestion(e,t)}))}static getIncubatorSuggestion(e,t){return(0,n.__awaiter)(this,void 0,void 0,(function*(){return a.getIncubatorSuggestion(e,t)}))}static getPollSuggestion(e,t){return(0,n.__awaiter)(this,void 0,void 0,(function*(){return a.getPollSuggestion(e,t)}))}static getUserSuggestion(e,t){return(0,n.__awaiter)(this,void 0,void 0,(function*(){return a.getUserSuggestion(e,t)}))}static getEventSuggestion(e,t){return(0,n.__awaiter)(this,void 0,void 0,(function*(){return a.getEventSuggestion(e,t)}))}static getSearchSuggestion(e,t,s){return(0,n.__awaiter)(this,void 0,void 0,(function*(){return a.getSearchSuggestion(e,t,s)}))}}},36175:(e,t,s)=>{s.d(t,{F:()=>n});const n={user:{username:"beatrice",password:"Password!!Beatrice2021",client_id:"XJjPE54IBBjhibs0Rf0wZ969cZNPq6WjC02FrkaM",grant_type:"password"},portal:"https://internal.selfcommunity.io/mkg2zxd0"}},36848:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>J,contentTitle:()=>G,default:()=>K,frontMatter:()=>Q,metadata:()=>n,toc:()=>q});const n=JSON.parse('{"id":"sdk/community-js/react-ui/Components/IncubatorSuggestion","title":"Incubator Suggestion","description":"The Incubator Suggestion component renders a list of suggested incubators.","source":"@site/docs/sdk/community-js/react-ui/Components/IncubatorSuggestion.mdx","sourceDirName":"sdk/community-js/react-ui/Components","slug":"/sdk/community-js/react-ui/Components/IncubatorSuggestion","permalink":"/docs/sdk/community-js/react-ui/Components/IncubatorSuggestion","draft":false,"unlisted":false,"editUrl":"https://github.com/selfcommunity/developers-doc/tree/main/docs/sdk/community-js/react-ui/Components/IncubatorSuggestion.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_label":"Incubator Suggestion","sidebar_position":1,"title":"Incubator Suggestion"},"sidebar":"sdkSidebar","previous":{"title":"Incubator","permalink":"/docs/sdk/community-js/react-ui/Components/Incubator"},"next":{"title":"Incubators List","permalink":"/docs/sdk/community-js/react-ui/Components/IncubatorsList"}}');var o=s(74848),i=s(28453),r=s(37180),a=s(31635),c=s(96540),u=s(11848),g=s(44675),l=s(90508),d=s(25292),h=s(47859),b=s(28820),m=s(36870),p=s(42942),S=s(27662),j=s(13550),A=s(29368),f=s(28692),x=s(94520),y=s(2877),_=s(86354),k=s(64933),I=s(86857);const O="SCIncubatorSuggestionWidget",v={root:`${O}-skeleton-root`,list:`${O}-list`},C=(0,u.Ay)(I.A,{name:O,slot:"SkeletonRoot"})((()=>({})));function w(e){return(0,o.jsx)(C,Object.assign({className:v.root},e,{children:(0,o.jsx)(d.A,{children:(0,o.jsx)(b.A,Object.assign({className:v.list},{children:[...Array(4)].map(((e,t)=>(0,o.jsx)(k.A,{elevation:0},t)))}))})}))}var N=s(15906),E=s(58065),T=s(19546),R=s.n(T),L=s(29251),P=s(43749),M=s(42528),U=s(79197),W=s(83542),D=s(9063),F=s(45949);const $={root:`${O}-root`,title:`${O}-title`,noResults:`${O}-no-results`,showMore:`${O}-show-more`,dialogRoot:`${O}-dialog-root`,endMessage:`${O}-end-message`},X=(0,u.Ay)(I.A,{name:O,slot:"Root"})((()=>({}))),z=(0,u.Ay)(L.A,{name:O,slot:"DialogRoot"})((()=>({})));const B=function(e){const t=(0,U.A)({props:e,name:O}),{autoHide:s=!0,limit:n=3,className:i,IncubatorProps:r={},cacheStrategy:u=f.So.NETWORK_ONLY,onHeightChange:I,onStateChange:v,DialogProps:C={}}=t,T=(0,a.__rest)(t,["autoHide","limit","className","IncubatorProps","cacheStrategy","onHeightChange","onStateChange","DialogProps"]),L=(0,y.X1)(),[B,Q]=(0,c.useReducer)(F.r6,{isLoadingNext:!1,next:null,cacheKey:_.j3(_.$M),cacheStrategy:u,visibleItems:n},F.Ox),[G,J]=(0,c.useState)(!1),[q,H]=(0,c.useState)(!1),[K,V]=(0,c.useState)(null),Y=(0,g.A)(),Z=(0,l.A)(Y.breakpoints.down("md")),ee=(0,c.useMemo)((()=>()=>{B.initialized||B.isLoadingNext||(Q({type:F.Qd.LOADING_NEXT}),S.h.getIncubatorSuggestion({limit:n}).then((e=>{Q({type:F.Qd.LOAD_NEXT_SUCCESS,payload:Object.assign(Object.assign({},e),{initialized:!0})})})).catch((e=>{Q({type:F.Qd.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),x.V.error(N.d,e)})))}),[B.isLoadingNext,B.initialized,n,Q]);(0,c.useEffect)((()=>{let e;if(L.user)return e=setTimeout(ee),()=>{e&&clearTimeout(e)}}),[L.user]),(0,c.useEffect)((()=>{G&&B.next&&B.results.length===n&&B.initialized&&(Q({type:F.Qd.LOADING_NEXT}),S.h.getIncubatorSuggestion({offset:n,limit:10}).then((e=>{Q({type:F.Qd.LOAD_NEXT_SUCCESS,payload:e})})).catch((e=>{Q({type:F.Qd.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),x.V.error(N.d,e)})))}),[G,B.next,B.results.length,B.initialized,n]),(0,c.useEffect)((()=>{I&&I()}),[B.results]),(0,c.useEffect)((()=>{L.user&&u===f.So.NETWORK_ONLY&&v&&v({cacheStrategy:f.So.CACHE_FIRST})}),[L.user,u]);const te=(0,c.useMemo)((()=>e=>{H(!0),J(!1),V(e)}),[H,J,V]),se=(0,c.useMemo)((()=>()=>{J((e=>!e))}),[]),ne=e=>{const t=[...B.results],s=t.findIndex((t=>t.id===e.id));-1!==s&&(e.subscribed?(t[s].subscribers_count=e.subscribers_count-1,t[s].subscribed=!e.subscribed):(t[s].subscribers_count=e.subscribers_count+1,t[s].subscribed=!e.subscribed),Q({type:F.Qd.SET_RESULTS,payload:{results:t}}))},oe=(0,c.useMemo)((()=>()=>{Q({type:F.Qd.LOADING_NEXT}),j.A.request({url:B.next,method:A.A.GetIncubatorSuggestion.method}).then((e=>{Q({type:F.Qd.LOAD_NEXT_SUCCESS,payload:e.data})}))}),[Q,B.next,B.isLoadingNext,B.initialized]);if(s&&!B.count&&B.initialized||!L.user)return(0,o.jsx)(D.A,{});if(!B.initialized)return(0,o.jsx)(w,{});const ie=(0,o.jsxs)(d.A,{children:[(0,o.jsx)(h.A,Object.assign({className:$.title,variant:"h5"},{children:(0,o.jsx)(E.A,{id:"ui.incubatorSuggestionWidget.title",defaultMessage:"ui.incubatorSuggestionWidget.title"})})),B.count?(0,o.jsxs)(c.Fragment,{children:[(0,o.jsx)(b.A,{children:B.results.slice(0,B.visibleItems).map((e=>(0,o.jsx)(m.Ay,{children:(0,o.jsx)(M.A,Object.assign({elevation:0,incubator:e,subscribeButtonProps:{onSubscribe:ne},ButtonProps:{onClick:()=>te(e)}},r))},e.id)))}),B.count>B.visibleItems&&(0,o.jsx)(p.A,Object.assign({className:$.showMore,onClick:se},{children:(0,o.jsx)(E.A,{id:"ui.incubatorSuggestionWidget.ShowAll",defaultMessage:"ui.incubatorSuggestionWidget.ShowAll"})}))]}):(0,o.jsx)(h.A,Object.assign({className:$.noResults,variant:"body2"},{children:(0,o.jsx)(E.A,{id:"ui.incubatorSuggestionWidget.noResults",defaultMessage:"ui.incubatorSuggestionWidget.noResults"})})),G&&(0,o.jsx)(z,Object.assign({className:$.dialogRoot,title:(0,o.jsx)(E.A,{id:"ui.incubatorSuggestionWidget.title",defaultMessage:"ui.incubatorSuggestionWidget.title"}),onClose:se,open:G},C,{children:(0,o.jsx)(P.A,Object.assign({dataLength:B.results.length,next:oe,hasMoreNext:Boolean(B.next),loaderNext:(0,o.jsx)(k.A,Object.assign({elevation:0},r)),height:Z?"100vh":400,endMessage:(0,o.jsx)(h.A,Object.assign({className:$.endMessage},{children:(0,o.jsx)(E.A,{id:"ui.incubatorSuggestionWidget.noMoreIncubators",defaultMessage:"ui.incubatorSuggestionWidget.noMoreIncubators"})}))},{children:(0,o.jsx)(b.A,{children:B.results.map((e=>(0,o.jsx)(m.Ay,{children:(0,o.jsx)(M.A,Object.assign({elevation:0,incubator:e,subscribeButtonProps:{onSubscribe:ne},ButtonProps:{onClick:()=>te(e)}},r))},e.id)))})}))})),q&&(0,o.jsx)(W.A,{open:q,onClose:()=>{H(!1)},incubator:K,onSubscriptionsUpdate:ne})]});return(0,o.jsx)(X,Object.assign({className:R()($.root,i)},T,{children:ie}))},Q={sidebar_label:"Incubator Suggestion",sidebar_position:1,title:"Incubator Suggestion"},G=void 0,J={},q=[{value:"Usage",id:"usage",level:4}];function H(e){const t={blockquote:"blockquote",code:"code",h4:"h4",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsxs)(t.p,{children:["The Incubator Suggestion component renders a list of suggested incubators.",(0,o.jsx)("br",{}),"\nThis list is composed of items containing incubator's title, info, a subscription status bar and a subscribe button that allows users to subscribe/unsubscribe to an incubator.",(0,o.jsx)("br",{}),"\nBy clicking the incubator title it is possible to open a modal card showing the incubators details and a section where it is possible to share the item on social networks.",(0,o.jsx)("br",{}),'\nThe incubators are shown in an orderly manner: few items are shown in the main card while the others can be displayed in a modal card by clicking on the "show all" button.']}),"\n"]}),"\n","\n",(0,o.jsx)(r.A,{children:(0,o.jsx)(B,{})}),"\n",(0,o.jsx)(t.h4,{id:"usage",children:"Usage"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-jsx",children:" import React from 'react';\n import {SCContextProvider} from '@selfcommunity/react-core';\n import {IncubatorSuggestionWidget} from '@selfcommunity/react-ui';\n\n function App() {\n   const conf = {\n     portal: '<community-path>',\n     session: {\n       type: 'OAuth',\n       token: '<community-token>',\n       refreshToken: '<community-refresh-token>',\n       refreshTokenEndpoint: '<community-refresh-endpoint>',\n     },\n   };\n   return (\n     <SCContextProvider conf={conf}><IncubatorSuggestionWidget /></SCContextProvider>\n   );\n }\n"})})]})}function K(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(H,{...e})}):H(e)}},37180:(e,t,s)=>{s.d(t,{A:()=>h});var n=s(96540),o=s(36175),i=s(75251);function r(e,t){void 0===e&&(e=""),void 0===t&&(t={});const s=Object.keys(t).map((e=>encodeURIComponent(e)+"="+encodeURIComponent(t[e]))).join("&");return fetch(e,{method:"POST",headers:{accept:"application/json","content-type":"application/x-www-form-urlencoded"},body:s})}function a(){if((0,i.A)()){const e={refresh_token:JSON.parse(window.localStorage.getItem("token")).refresh_token,client_id:o.F.user.client_id,grant_type:"refresh_token"};return r(`${o.F.portal}/oauth/token/`,e).then((e=>e.json())).then((e=>({accessToken:e.access_token,refreshToken:e.refresh_token,tokenType:e.token_type,expiresIn:e.expires_in}))).catch((e=>Promise.reject(e)))}}function c(){const e=(0,i.A)(),[t,s]=(0,n.useState)(e?JSON.parse(window.localStorage.getItem("token")):"");return(0,n.useEffect)((()=>{e&&(!t||1e3*t.expiresIn<Date.now()?r(`${o.F.portal}/oauth/token/`,o.F.user).then((e=>e.json())).then((e=>({accessToken:e.access_token,refreshToken:e.refresh_token,tokenType:e.token_type,expiresIn:e.expires_in}))).catch((e=>e)).then((e=>{s(e)})):e&&s(JSON.parse(window.localStorage.getItem("token"))))}),[e]),(0,n.useEffect)((()=>{e&&window.localStorage.setItem("token",JSON.stringify(t))}),[e,t]),t}var u=s(45284),g=s(51151),l=s(73906),d=s(74848);function h(e){let{children:t}=e;const s=c(),n={portal:o.F.portal,locale:{default:"en"},session:{type:"OAuth",clientId:o.F.user.client_id,authToken:s,handleRefreshToken:a},theme:g.Ay,handleAnonymousAction:()=>{alert("Anonymous action")}};return(0,d.jsx)(l.A,{children:()=>(0,d.jsx)(u.Ay,{conf:n,children:t})})}}}]);