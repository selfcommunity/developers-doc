"use strict";(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[77338],{92991:(e,t,s)=>{s.d(t,{Z:()=>p});var n=s(67294),o=s(27331),a=s(5730);function i(e,t){void 0===e&&(e=""),void 0===t&&(t={});const s=Object.keys(t).map((e=>encodeURIComponent(e)+"="+encodeURIComponent(t[e]))).join("&");return fetch(e,{method:"POST",headers:{accept:"application/json","content-type":"application/x-www-form-urlencoded"},body:s})}function r(){if((0,a.Z)()){const e={refresh_token:JSON.parse(window.localStorage.getItem("token")).refresh_token,client_id:o.r.user.client_id,grant_type:"refresh_token"};return i(`${o.r.portal}/oauth/token/`,e).then((e=>e.json())).then((e=>({accessToken:e.access_token,refreshToken:e.refresh_token,tokenType:e.token_type,expiresIn:e.expires_in}))).catch((e=>Promise.reject(e)))}}function c(){const e=(0,a.Z)(),[t,s]=(0,n.useState)(e?JSON.parse(window.localStorage.getItem("token")):"");return(0,n.useEffect)((()=>{e&&(!t||1e3*t.expiresIn<Date.now()?i(`${o.r.portal}/oauth/token/`,o.r.user).then((e=>e.json())).then((e=>({accessToken:e.access_token,refreshToken:e.refresh_token,tokenType:e.token_type,expiresIn:e.expires_in}))).catch((e=>e)).then((e=>{s(e)})):e&&s(JSON.parse(window.localStorage.getItem("token"))))}),[e]),(0,n.useEffect)((()=>{e&&window.localStorage.setItem("token",JSON.stringify(t))}),[e,t]),t}var l=s(62254),d=s(14744),u=s(19666),g=s(85893);function p(e){let{children:t}=e;const s=c(),n={portal:o.r.portal,locale:{default:"en"},session:{type:"OAuth",clientId:o.r.user.client_id,authToken:s,handleRefreshToken:r},theme:d.Z,handleAnonymousAction:()=>{alert("Anonymous action")}};return(0,g.jsx)(u.Z,{children:()=>(0,g.jsx)(l.ZP,{conf:n,children:t})})}},27331:(e,t,s)=>{s.d(t,{r:()=>n});const n={user:{username:"beatrice",password:"Password!!Beatrice2021",client_id:"XJjPE54IBBjhibs0Rf0wZ969cZNPq6WjC02FrkaM",grant_type:"password"},portal:"https://api.fashionista.community"}},92343:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>r,metadata:()=>l,toc:()=>u});var n=s(85893),o=s(11151),a=s(92991),i=s(14027);const r={sidebar_label:"Category Feed",sidebar_position:1,title:"Category Feed"},c=void 0,l={id:"sdk/community-js/react-templates/Components/CategoryFeed",title:"Category Feed",description:"The Category Feed template renders the category feed.",source:"@site/docs/sdk/community-js/react-templates/Components/CategoryFeed.mdx",sourceDirName:"sdk/community-js/react-templates/Components",slug:"/sdk/community-js/react-templates/Components/CategoryFeed",permalink:"/docs/sdk/community-js/react-templates/Components/CategoryFeed",draft:!1,unlisted:!1,editUrl:"https://github.com/selfcommunity/developers-doc/tree/main/docs/sdk/community-js/react-templates/Components/CategoryFeed.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_label:"Category Feed",sidebar_position:1,title:"Category Feed"},sidebar:"sdkSidebar",previous:{title:"Category",permalink:"/docs/sdk/community-js/react-templates/Components/Category"},next:{title:"Explore Feed",permalink:"/docs/sdk/community-js/react-templates/Components/ExploreFeed"}},d={},u=[{value:"Usage",id:"usage",level:4}];function g(e){const t={blockquote:"blockquote",code:"code",h4:"h4",p:"p",pre:"pre",...(0,o.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsx)(t.p,{children:"The Category Feed template renders the category feed."}),"\n"]}),"\n","\n","\n",(0,n.jsx)(a.Z,{children:(0,n.jsx)(i.Z,{categoryId:3})}),"\n",(0,n.jsx)(t.h4,{id:"usage",children:"Usage"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-jsx",children:" import React from 'react';\n import {SCContextProvider} from '@selfcommunity/react-core';\n import {CategoryFeed} from '@selfcommunity/react-templates';\n\n function App() {\n   const conf = {\n     portal: '<community-path>',\n     session: {\n       type: 'OAuth',\n       token: '<community-token>',\n       refreshToken: '<community-refresh-token>',\n       refreshTokenEndpoint: '<community-refresh-endpoint>',\n     },\n   };\n   return (\n     <SCContextProvider conf={conf}><CategoryFeed/></SCContextProvider>\n   );\n }\n"})})]})}function p(e={}){const{wrapper:t}={...(0,o.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(g,{...e})}):g(e)}},98365:(e,t,s)=>{s.d(t,{Z:()=>p});var n=s(67294),o=s(74482),a=s(24243),i=s(24085),r=s(59219),c=s(96570),l=s(99960),d=s(69721),u=s(87620),g=s(51206);function p({id:e=null,category:t=null,cacheStrategy:s=r.n2.CACHE_FIRST}){const p=t?t.id:e,m=(0,g.LD)(),j=m.user?m.user.id:null,h=(0,d.u5)(p),y=j?t:(0,c.Kd)(t,["followed"]),[x,b]=(0,n.useState)(s!==r.n2.NETWORK_ONLY?r.ZP.get(h,y):null),[Z,O]=(0,n.useState)(null),f=(0,n.useMemo)((()=>()=>a.Z.request({url:i.Z.Category.url({id:p}),method:i.Z.Category.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[p]);return(0,n.useEffect)((()=>{p&&(!x||x&&p!==x.id)&&f().then((e=>{const t=j?e:(0,c.Kd)(e,["followed"]);b(t),r.ZP.set(h,t)})).catch((t=>{r.ZP.delete(h),O(`Category with id ${e} not found`),l.Y.error(o.h,`Category with id ${e} not found`),l.Y.error(o.h,t.message)}))}),[p]),(0,u.F_)((()=>{if(t){const e=j?t:(0,c.Kd)(t,["followed"]);b(e),r.ZP.set(h,e)}}),[t]),{scCategory:x,setSCCategory:b,error:Z}}},69641:(e,t,s)=>{s.d(t,{Z:()=>m});var n=s(85893),o=s(67294),a=s(90948),i=s(40506),r=s(24176),c=s(24540),l=s(12805),d=s(37024),u=s(74731);const g={root:`${u.B}-skeleton-root`},p=(0,a.ZP)(i.Z,{name:u.B,slot:"SkeletonRoot"})((()=>({})));function m(){return(0,n.jsxs)(p,Object.assign({className:g.root,sidebar:(0,n.jsxs)(o.Fragment,{children:[(0,n.jsx)(r.Z,{sx:{mb:2}}),(0,n.jsx)(r.Z,{sx:{mb:2}})]})},{children:[(0,n.jsx)(c.Z,{}),Array.from({length:5}).map(((e,t)=>(0,n.jsx)(l.Z,{template:d.r.DETAIL},t)))]}))}},74731:(e,t,s)=>{s.d(t,{B:()=>n});const n="SCCategoryFeedTemplate"},14027:(e,t,s)=>{s.d(t,{Z:()=>k});var n=s(85893),o=s(67294),a=s(90948),i=s(46878),r=s(12673),c=s(81820),l=s(70050),d=s(52693),u=s(12805),g=s(37024),p=s(93132),m=s(24085),j=s(41538),h=s(98365),y=s(97265),x=s(12132),b=s(9774),Z=s(83781),O=s(69641),f=s(29360),_=s(94184),C=s.n(_),N=s(44012),S=s(20377),v=s(74731);const T={root:`${v.B}-root`},E=(0,a.ZP)(i.Z,{name:v.B,slot:"Root"})((()=>({}))),I=[{type:"widget",component:r.Z,componentProps:{},column:"right",position:0},{type:"widget",component:c.Z,componentProps:{},column:"right",position:1}];const k=function(e){const t=(0,f.Z)({props:e,name:v.B}),{id:s="category_feed",className:a,category:i,categoryId:r,widgets:c=I,FeedObjectProps:_={},FeedSidebarProps:k=null,FeedProps:L={}}=t,P=(0,j.sy)(),{enqueueSnackbar:R}=(0,S.Ds)(),A=(0,o.useRef)(),{scCategory:F}=(0,h.Z)({id:r,category:i}),B=(0,o.useMemo)((()=>c.map((e=>F?Object.assign(Object.assign({},e),{componentProps:Object.assign(Object.assign({},e.componentProps),{categoryId:F.id})}):e))),[c,F]);return F?(0,n.jsx)(E,Object.assign({id:s,className:C()(T.root,a),ref:A,endpoint:Object.assign(Object.assign({},m.Z.CategoryFeed),{url:()=>m.Z.CategoryFeed.url({id:F.id})}),widgets:B,ItemComponent:d.Z,itemPropsGenerator:(e,t)=>({feedObject:t[t.type],feedObjectType:t.type,feedObjectActivities:t.activities?t.activities:null,markRead:e?!t.seen_by_id.includes(e.id):null}),itemIdGenerator:e=>e[e.type].id,ItemProps:_,ItemSkeleton:u.Z,ItemSkeletonProps:{template:g.r.PREVIEW},FeedSidebarProps:k,HeaderComponent:(0,n.jsx)(p.Z,{onSuccess:e=>{if(-1===e.categories.findIndex((e=>e.id===F.id)))return void R((0,n.jsx)(N.Z,{id:"ui.composerIconButton.composer.success",defaultMessage:"ui.composerIconButton.composer.success"}),{action:t=>(0,n.jsx)(y.Z,Object.assign({to:P.url(x[`${e.type.toUpperCase()}_ROUTE_NAME`],l.p3(e))},{children:(0,n.jsx)(N.Z,{id:"ui.composerIconButton.composer.viewContribute",defaultMessage:"ui.composerIconButton.composer.viewContribute"})})),variant:"success",autoHideDuration:7e3});const t={type:e.type,[e.type]:e,seen_by_id:[],has_boost:!1};A&&A.current&&A.current.addFeedData(t,!0)},defaultValue:{categories:[F]},feedType:b.a.CATEGORY}),CustomAdvProps:{categoriesId:[F.id]},enabledCustomAdvPositions:[Z.n.POSITION_FEED_SIDEBAR,Z.n.POSITION_FEED,Z.n.POSITION_BELOW_TOPBAR]},L)):(0,n.jsx)(O.Z,{})}},45431:(e,t,s)=>{s.d(t,{Z:()=>g});var n=s(85893),o=s(63902),a=s(78462),i=s(90948),r=s(12805),c=s(44267),l=s(89546);const d={root:`${l.B}-skeleton-root`,list:`${l.B}-list`},u=(0,i.ZP)(o.Z,{name:l.B,slot:"SkeletonRoot"})((()=>({})));function g(e){return(0,n.jsx)(u,Object.assign({className:d.root},e,{children:(0,n.jsx)(c.Z,{children:(0,n.jsx)(a.Z,Object.assign({className:d.list},{children:[...Array(4)].map(((e,t)=>(0,n.jsx)(r.Z,{elevation:0},t)))}))})}))}},89546:(e,t,s)=>{s.d(t,{B:()=>n});const n="SCCategoryTrendingFeedWidget"},81820:(e,t,s)=>{s.d(t,{Z:()=>z});var n=s(97582),o=s(85893),a=s(67294),i=s(90948),r=s(78462),c=s(2734),l=s(37292),d=s(44267),u=s(15861),g=s(97212),p=s(25662),m=s(63902),j=s(98704),h=s(24243),y=s(24085),x=s(59219),b=s(99960),Z=s(5840),O=s(75459),f=s(52693),_=s(12805),C=s(44012),N=s(37024),S=s(94184),v=s.n(S),T=s(39154),E=s(79558),I=s(45431),k=s(29360),L=s(54545),P=s(69721),R=s(51206),A=s(8860),F=s(41538),B=s(85472),M=s(98365),D=s(97265),U=s(12132),w=s(15927),W=s(89546);const K={root:`${W.B}-root`,title:`${W.B}-title`,noResults:`${W.B}-no-results`,showMore:`${W.B}-show-more`,dialogRoot:`${W.B}-dialog-root`,endMessage:`${W.B}-end-message`},$=(0,i.ZP)(m.Z,{name:W.B,slot:"Root"})((()=>({}))),X=(0,i.ZP)(T.Z,{name:W.B,slot:"DialogRoot"})((()=>({})));const z=function(e){const t=(0,k.Z)({props:e,name:W.B}),{className:s=null,categoryId:i=null,autoHide:m=null,limit:S=3,FeedObjectProps:T={template:N.r.SNIPPET},cacheStrategy:z=x.n2.CACHE_FIRST,onHeightChange:H,onStateChange:G,DialogProps:V={}}=t,Y=(0,n._T)(t,["className","categoryId","autoHide","limit","FeedObjectProps","cacheStrategy","onHeightChange","onStateChange","DialogProps"]),[q,J]=(0,a.useReducer)(w.Xi,{isLoadingNext:!1,next:null,cacheKey:P.hu(P.ol,i),cacheStrategy:z,visibleItems:S},w.Mv),[Q,ee]=(0,a.useState)(!1),te=(0,R.LD)(),se=(0,A.ko)(),ne=(0,F.sy)(),oe=(0,a.useMemo)((()=>B.Ao in se.preferences&&se.preferences[B.Ao].value),[se]),ae=(0,c.Z)(),ie=(0,l.Z)(ae.breakpoints.down("md")),{scCategory:re}=(0,M.Z)({id:i}),ce=re?re.id:null,le=(0,a.useMemo)((()=>()=>{q.initialized||q.isLoadingNext||(J({type:w.dK.LOADING_NEXT}),j.Z.getCategoryTrendingFeed(ce,{limit:S}).then((e=>{J({type:w.dK.LOAD_NEXT_SUCCESS,payload:Object.assign(Object.assign({},e),{initialized:!0})})})).catch((e=>{J({type:w.dK.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),b.Y.error(O.J,e)})))}),[ce,q.isLoadingNext,q.initialized,S,J]);(0,a.useEffect)((()=>{var e;let t;if(void 0!==te.user&&ce&&(oe||!oe&&(null===(e=te.user)||void 0===e?void 0:e.id)))return t=setTimeout(le),()=>{t&&clearTimeout(t)}}),[ce,te.user,oe]),(0,a.useEffect)((()=>{Q&&q.next&&q.results.length===S&&q.initialized&&(J({type:w.dK.LOADING_NEXT}),j.Z.getCategoryTrendingFeed(ce,{offset:S,limit:10}).then((e=>{J({type:w.dK.LOAD_NEXT_SUCCESS,payload:Object.assign(Object.assign({},e),{initialized:!0})})})).catch((e=>{J({type:w.dK.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),b.Y.error(O.J,e)})))}),[Q,S,q.next,q.results.length,q.initialized,ce]),(0,a.useEffect)((()=>{H&&H()}),[q.results]),(0,a.useEffect)((()=>{(oe||te.user)&&(0,Z.U)(ce)&&z===x.n2.NETWORK_ONLY&&G&&G({cacheStrategy:x.n2.CACHE_FIRST})}),[oe,z,ce,te.user]);const de=(0,a.useMemo)((()=>()=>{J({type:w.dK.LOADING_NEXT}),h.Z.request({url:q.next,method:y.Z.CategoryTrendingFeed.method}).then((e=>{J({type:w.dK.LOAD_NEXT_SUCCESS,payload:e.data})}))}),[J,q.next]),ue=()=>{ee((e=>!e))};if(!oe&&!te.user||m&&!q.count&&q.initialized)return(0,o.jsx)(L.Z,{});if(!q.initialized)return(0,o.jsx)(I.Z,{});const ge=(0,o.jsxs)(d.Z,{children:[(0,o.jsx)(u.Z,Object.assign({className:K.title,variant:"h5"},{children:(0,o.jsx)(C.Z,{id:"ui.categoryTrendingFeedWidget.title",defaultMessage:"ui.categoryTrendingFeedWidget.title"})})),q.count?(0,o.jsxs)(a.Fragment,{children:[(0,o.jsx)(r.Z,{children:q.results.slice(0,q.visibleItems).map((e=>(0,o.jsx)(g.ZP,{children:(0,o.jsx)(f.Z,Object.assign({elevation:0,feedObject:e[e.type]},T))},e[e.type].id)))}),q.count>q.visibleItems&&(0,o.jsx)(p.Z,Object.assign({className:K.showMore},ie?{onClick:ue}:{component:D.Z,to:ne.url(U.CATEGORY_TRENDING_FEED_ROUTE_NAME,re)},{children:(0,o.jsx)(C.Z,{id:"ui.categoryTrendingFeedWidget.button.showAll",defaultMessage:"ui.categoryTrendingFeedWidget.button.showAll"})}))]}):(0,o.jsx)(u.Z,Object.assign({className:K.noResults,variant:"body2"},{children:(0,o.jsx)(C.Z,{id:"ui.categoryTrendingFeedWidget.noResults",defaultMessage:"ui.categoryTrendingFeedWidget.noResults"})})),Q&&(0,o.jsx)(X,Object.assign({className:K.dialogRoot,title:(0,o.jsx)(C.Z,{defaultMessage:"ui.categoryTrendingFeedWidget.title",id:"ui.categoryTrendingFeedWidget.title",values:{total:q.count}}),onClose:ue,open:Q},V,{children:(0,o.jsx)(E.Z,Object.assign({dataLength:q.results.length,next:de,hasMoreNext:Boolean(q.next),loaderNext:(0,o.jsx)(_.Z,Object.assign({elevation:0},T)),height:ie?"100%":400,endMessage:(0,o.jsx)(u.Z,Object.assign({className:K.endMessage},{children:(0,o.jsx)(C.Z,{id:"ui.categoryTrendingFeedWidget.noMoreResults",defaultMessage:"ui.categoryTrendingFeedWidget.noMoreResults"})}))},{children:(0,o.jsx)(r.Z,{children:q.results.map((e=>(0,o.jsx)(g.ZP,{children:(0,o.jsx)(f.Z,Object.assign({elevation:0,feedObject:e[e.type]},T))},e[e.type].id)))})}))}))]});return(0,o.jsx)($,Object.assign({className:v()(K.root,s)},Y,{children:ge}))}},14459:(e,t,s)=>{s.d(t,{Z:()=>p});var n=s(85893),o=s(63902),a=s(78462),i=s(90948),r=s(50353),c=s(44267),l=s(97212),d=s(33584);const u={root:`${d.B}-skeleton-root`,list:`${d.B}-list`},g=(0,i.ZP)(o.Z,{name:d.B,slot:"SkeletonRoot"})((()=>({})));function p(e){return(0,n.jsx)(g,Object.assign({className:u.root},e,{children:(0,n.jsx)(c.Z,{children:(0,n.jsx)(a.Z,Object.assign({className:u.list},{children:[...Array(4)].map(((e,t)=>(0,n.jsx)(l.ZP,{children:(0,n.jsx)(r.Z,{elevation:0})},t)))}))})}))}},33584:(e,t,s)=>{s.d(t,{B:()=>n});const n="SCCategoryTrendingUsersWidget"},12673:(e,t,s)=>{s.d(t,{Z:()=>W});var n=s(97582),o=s(85893),a=s(67294),i=s(90948),r=s(78462),c=s(2734),l=s(37292),d=s(44267),u=s(15861),g=s(97212),p=s(25662),m=s(63902),j=s(98704),h=s(24243),y=s(24085),x=s(69721),b=s(51206),Z=s(8860),O=s(85472),f=s(98365),_=s(44012),C=s(37089),N=s(50353),S=s(94184),v=s.n(S),T=s(39154),E=s(79558),I=s(14459),k=s(29360),L=s(54545),P=s(59219),R=s(99960),A=s(5840),F=s(15927),B=s(75459),M=s(33584);const D={root:`${M.B}-root`,title:`${M.B}-title`,noResults:`${M.B}-no-results`,showMore:`${M.B}-show-more`,dialogRoot:`${M.B}-dialog-root`,endMessage:`${M.B}-end-message`},U=(0,i.ZP)(m.Z,{name:M.B,slot:"Root"})((()=>({}))),w=(0,i.ZP)(T.Z,{name:M.B,slot:"DialogRoot"})((()=>({})));const W=function(e){const t=(0,k.Z)({props:e,name:M.B}),{className:s=null,categoryId:i=null,autoHide:m=null,limit:S=3,UserProps:T={},cacheStrategy:W=P.n2.CACHE_FIRST,onHeightChange:K,onStateChange:$,DialogProps:X={}}=t,z=(0,n._T)(t,["className","categoryId","autoHide","limit","UserProps","cacheStrategy","onHeightChange","onStateChange","DialogProps"]),[H,G]=(0,a.useReducer)(F.Xi,{isLoadingNext:!1,next:null,cacheKey:x.hu(x.zj,i),cacheStrategy:W,visibleItems:S},F.Mv),[V,Y]=(0,a.useState)(!1),q=(0,b.LD)(),J=(0,Z.ko)(),Q=(0,a.useMemo)((()=>O.Ao in J.preferences&&J.preferences[O.Ao].value),[J]),ee=(0,c.Z)(),te=(0,l.Z)(ee.breakpoints.down("md")),{scCategory:se}=(0,f.Z)({id:i}),ne=se?se.id:null,oe=(0,a.useMemo)((()=>()=>{H.initialized||H.isLoadingNext||(G({type:F.dK.LOADING_NEXT}),j.Z.getCategoryTrendingFollowers(ne,{limit:S}).then((e=>{G({type:F.dK.LOAD_NEXT_SUCCESS,payload:Object.assign(Object.assign({},e),{initialized:!0})})})).catch((e=>{G({type:F.dK.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),R.Y.error(B.J,e)})))}),[ne,H.isLoadingNext,H.initialized,S,G]);(0,a.useEffect)((()=>{var e;let t;if(void 0!==q.user&&ne&&(Q||!Q&&(null===(e=q.user)||void 0===e?void 0:e.id)))return t=setTimeout(oe),()=>{t&&clearTimeout(t)}}),[ne,q.user,Q]),(0,a.useEffect)((()=>{V&&H.next&&H.results.length===S&&H.initialized&&(G({type:F.dK.LOADING_NEXT}),j.Z.getCategoryTrendingFollowers(ne,{offset:S,limit:10}).then((e=>{G({type:F.dK.LOAD_NEXT_SUCCESS,payload:e})})).catch((e=>{G({type:F.dK.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),R.Y.error(B.J,e)})))}),[V,S,H.next,H.initialized,H.results.length,ne]),(0,a.useEffect)((()=>{K&&K()}),[H.results]),(0,a.useEffect)((()=>{(Q||q.user)&&(0,A.U)(ne)&&W===P.n2.NETWORK_ONLY&&$&&$({cacheStrategy:P.n2.CACHE_FIRST})}),[Q,W,ne,q.user]);const ae=(0,a.useMemo)((()=>()=>{G({type:F.dK.LOADING_NEXT}),h.Z.request({url:H.next,method:y.Z.CategoryTrendingPeople.method}).then((e=>{G({type:F.dK.LOAD_NEXT_SUCCESS,payload:e.data})}))}),[G,H.next]),ie=()=>{Y((e=>!e))};if(!Q&&!q.user||m&&!H.count&&H.initialized)return(0,o.jsx)(L.Z,{});if(!H.initialized)return(0,o.jsx)(I.Z,{});const re=(0,o.jsxs)(d.Z,{children:[(0,o.jsx)(u.Z,Object.assign({className:D.title,variant:"h5"},{children:(0,o.jsx)(_.Z,{id:"ui.categoryTrendingUsersWidget.title",defaultMessage:"ui.categoryTrendingUsersWidget.title"})})),H.count?(0,o.jsxs)(a.Fragment,{children:[(0,o.jsx)(r.Z,{children:H.results.slice(0,H.visibleItems).map((e=>(0,o.jsx)(g.ZP,{children:(0,o.jsx)(C.Z,Object.assign({elevation:0,user:e},T))},e.id)))}),H.count>H.visibleItems&&(0,o.jsx)(p.Z,Object.assign({className:D.showMore,onClick:ie},{children:(0,o.jsx)(_.Z,{id:"ui.categoryTrendingUsersWidget.button.showAll",defaultMessage:"ui.categoryTrendingUsersWidget.button.showAll"})}))]}):(0,o.jsx)(u.Z,Object.assign({className:D.noResults,variant:"body2"},{children:(0,o.jsx)(_.Z,{id:"ui.categoryTrendingUsersWidget.noResults",defaultMessage:"ui.categoryTrendingUsersWidget.noResults"})})),V&&(0,o.jsx)(w,Object.assign({className:D.dialogRoot,title:(0,o.jsx)(_.Z,{defaultMessage:"ui.categoryTrendingUsersWidget.title",id:"ui.categoryTrendingUsersWidget.title",values:{total:H.count}}),onClose:ie,open:V},X,{children:(0,o.jsx)(E.Z,Object.assign({dataLength:H.results.length,next:ae,hasMoreNext:Boolean(H.next),loaderNext:(0,o.jsx)(N.Z,Object.assign({elevation:0},T)),height:te?"100%":400,endMessage:(0,o.jsx)(u.Z,Object.assign({className:D.endMessage},{children:(0,o.jsx)(_.Z,{id:"ui.categoryTrendingUsersWidget.noMoreResults",defaultMessage:"ui.categoryTrendingUsersWidget.noMoreResults"})}))},{children:(0,o.jsx)(r.Z,{children:H.results.map((e=>(0,o.jsx)(g.ZP,{children:(0,o.jsx)(C.Z,Object.assign({elevation:0,user:e},T))},e.id)))})}))}))]});return(0,o.jsx)(U,Object.assign({className:v()(D.root,s)},z,{children:re}))}},24540:(e,t,s)=>{s.d(t,{Z:()=>g});var n=s(85893),o=s(90948),a=s(88078),i=s(44267),r=s(94253),c=s(63902),l=s(31717);const d={root:`${l.B}-skeleton-root`,content:`${l.B}-content`,input:`${l.B}-input`,avatar:`${l.B}-avatar`},u=(0,o.ZP)(c.Z,{name:l.B,slot:"SkeletonRoot"})((()=>({})));function g(){return(0,n.jsx)(u,Object.assign({className:d.root},{children:(0,n.jsxs)(i.Z,Object.assign({className:d.content},{children:[(0,n.jsx)(r.Z,Object.assign({className:d.input},{children:(0,n.jsx)(a.Z,{animation:"wave",variant:"text"})})),(0,n.jsx)(r.Z,Object.assign({className:d.avatar},{children:(0,n.jsx)(a.Z,{className:d.avatar,animation:"wave",variant:"circular"})}))]}))}))}},31717:(e,t,s)=>{s.d(t,{B:()=>n});const n="SCInlineComposerWidget"},93132:(e,t,s)=>{s.d(t,{Z:()=>k});var n=s(97582),o=s(85893),a=s(67294),i=s(9774),r=s(62254),c=s(51206),l=s(41538),d=s(8860),u=s(85472),g=s(65580),p=s(97265),m=s(12132),j=s(44267),h=s(94253),y=s(25662),x=s(87952),b=s(90948),Z=s(44012),O=s(20377),f=s(63902),_=s(29360),C=s(6605),N=s(22461),S=s(70815),v=s(31717),T=s(54545);const E={root:`${v.B}-root`,content:`${v.B}-content`,input:`${v.B}-input`,avatar:`${v.B}-avatar`},I=(0,b.ZP)(f.Z,{name:v.B,slot:"Root"})((()=>({})));const k=function(e){const t=(0,_.Z)({props:e,name:v.B}),{mediaObjectTypes:s=[N.Z,S.Z],defaultValue:b,onSuccess:f=null,label:k,feedType:L=i.a.HOME}=t,P=(0,n._T)(t,["mediaObjectTypes","defaultValue","onSuccess","label","feedType"]),R=(0,r.RM)(),A=(0,c.LD)(),F=(0,l.sy)(),{enqueueSnackbar:B}=(0,O.Ds)(),M=(0,d.ko)(),D=(0,a.useMemo)((()=>M.preferences[u.Kq].value),[M.preferences]),[U,w]=(0,a.useState)(!1),W=(0,a.useCallback)((()=>{A.user?g.IT(A.user)?B((0,o.jsx)(Z.Z,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3}):w(!0):R.settings.handleAnonymousAction()}),[A.user,R.settings]),K=(0,a.useCallback)((()=>{w(!1)}),[]);return!g.B2(A.user)&&D?(0,o.jsx)(T.Z,{}):(0,o.jsxs)(a.Fragment,{children:[(0,o.jsx)(I,Object.assign({className:E.root},P,{children:(0,o.jsxs)(j.Z,Object.assign({className:E.content},{children:[(0,o.jsx)(h.Z,Object.assign({className:E.input},{children:(0,o.jsx)(y.Z,Object.assign({variant:"text",disableFocusRipple:!0,disableRipple:!0,disableElevation:!0,onClick:W,fullWidth:!0,color:"inherit"},{children:null!=k?k:(0,o.jsx)(Z.Z,{id:"ui.inlineComposerWidget.label",defaultMessage:"ui.inlineComposerWidget.label"})}))})),(0,o.jsx)(h.Z,Object.assign({className:E.avatar},{children:A.user?(0,o.jsx)(p.Z,Object.assign({to:F.url(m.USER_PROFILE_ROUTE_NAME,A.user)},{children:(0,o.jsx)(x.Z,{alt:A.user.username,variant:"circular",src:A.user.avatar})})):(0,o.jsx)(x.Z,{variant:"circular"})}))]}))})),(0,o.jsx)(C.Z,{open:U,mediaObjectTypes:s,defaultValue:b,fullWidth:!0,onClose:K,onSuccess:e=>{f?f(e):B((0,o.jsx)(Z.Z,{id:"ui.inlineComposerWidget.success",defaultMessage:"ui.inlineComposerWidget.success"}),{variant:"success",autoHideDuration:3e3}),w(!1)},feedType:L})]})}},15927:(e,t,s)=>{s.d(t,{Mv:()=>i,Xi:()=>a,dK:()=>o});var n=s(59219);const o={LOADING_NEXT:"_loading_next",LOADING_PREVIOUS:"_loading_previous",LOAD_NEXT_SUCCESS:"_load_next_success",LOAD_PREVIOUS_SUCCESS:"_load_previous_success",LOAD_NEXT_FAILURE:"_load_next_failure",LOAD_PREVIOUS_FAILURE:"_load_previous_failure",SET_RESULTS:"_set_results",SET_VISIBLE_ITEMS:"_set_visible_items",RESET:"_reset"};function a(e,t){var s;let a=Object.assign({},e);switch(t.type){case o.LOADING_NEXT:a=Object.assign(Object.assign({},e),{isLoadingNext:!0,errorLoadNext:null});break;case o.LOADING_PREVIOUS:a=Object.assign(Object.assign({},e),{isLoadingPrevious:!0,errorLoadPrevious:null});break;case o.LOAD_NEXT_SUCCESS:a=Object.assign(Object.assign({},e),{isLoadingNext:!1,count:t.payload.count,next:t.payload.next?t.payload.next:null,results:[...e.results,...t.payload.results],errorLoadNext:null,initialized:(null===(s=t.payload)||void 0===s?void 0:s.initialized)||!0});break;case o.LOAD_PREVIOUS_SUCCESS:a=Object.assign(Object.assign({},e),{isLoadingPrevious:!1,count:t.payload.count,previous:t.payload.previous?t.payload.previous:null,results:[...t.payload.results,...e.results],errorPreviousNext:null});break;case o.SET_RESULTS:a=Object.assign(Object.assign(Object.assign({},e),{results:[...t.payload.results]}),t.payload.count?{count:t.payload.count}:{});break;case o.SET_VISIBLE_ITEMS:a=Object.assign(Object.assign({},e),{visibleItems:t.payload.visibleItems});break;case o.LOAD_NEXT_FAILURE:a=Object.assign(Object.assign({},e),{isLoadingNext:!1,errorLoadNext:t.payload.error});break;case o.LOAD_PREVIOUS_FAILURE:a=Object.assign(Object.assign({},e),{isLoadingNext:!1,errorLoadPrevious:t.payload.error});break;case o.RESET:a={isLoadingNext:!1,next:null,results:[],count:0,errorLoadNext:null,initialized:!1}}return n.ZP.set(a.cacheKey,a),a}function i(e){let t={cacheKey:e.cacheKey?e.cacheKey:null,count:e.count?e.count:0,results:e.results?e.results:[],next:e.next?e.next:null,previous:e.previous?e.previous:null,isLoadingNext:!!e.isLoadingNext&&e.isLoadingNext,isLoadingPrevious:!!e.isLoadingPrevious&&e.isLoadingPrevious,visibleItems:e.visibleItems?e.visibleItems:null,initialized:!1};if(t.cacheKey&&n.ZP.hasKey(t.cacheKey)&&e.cacheStrategy!==n.n2.NETWORK_ONLY){const e=n.ZP.get(t.cacheKey);return Object.assign(Object.assign({},t),e)}return t}},5840:(e,t,s)=>{function n(e){return!isNaN(e)&&parseInt(String(Number(e)))==e&&!isNaN(parseInt(String(e),10))}s.d(t,{U:()=>n})}}]);