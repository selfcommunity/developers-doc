(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[34034],{1935:(e,o,t)=>{"use strict";t.d(o,{A:()=>s});const s=t(74705).A},13004:(e,o,t)=>{"use strict";t.d(o,{A:()=>g});var s=t(96540),n=t(45384),r=t(46916);function a(e,o){void 0===e&&(e=""),void 0===o&&(o={});const t=Object.keys(o).map((e=>encodeURIComponent(e)+"="+encodeURIComponent(o[e]))).join("&");return fetch(e,{method:"POST",headers:{accept:"application/json","content-type":"application/x-www-form-urlencoded"},body:t})}function l(){if((0,r.A)()){const e={refresh_token:JSON.parse(window.localStorage.getItem("token")).refresh_token,client_id:n.F.user.client_id,grant_type:"refresh_token"};return a(`${n.F.portal}/oauth/token/`,e).then((e=>e.json())).then((e=>({accessToken:e.access_token,refreshToken:e.refresh_token,tokenType:e.token_type,expiresIn:e.expires_in}))).catch((e=>Promise.reject(e)))}}function i(){const e=(0,r.A)(),[o,t]=(0,s.useState)(e?JSON.parse(window.localStorage.getItem("token")):"");return(0,s.useEffect)((()=>{e&&(!o||1e3*o.expiresIn<Date.now()?a(`${n.F.portal}/oauth/token/`,n.F.user).then((e=>e.json())).then((e=>({accessToken:e.access_token,refreshToken:e.refresh_token,tokenType:e.token_type,expiresIn:e.expires_in}))).catch((e=>e)).then((e=>{t(e)})):e&&t(JSON.parse(window.localStorage.getItem("token"))))}),[e]),(0,s.useEffect)((()=>{e&&window.localStorage.setItem("token",JSON.stringify(o))}),[e,o]),o}var c=t(45284),d=t(15227),u=t(7351),m=t(74848);function g(e){let{children:o}=e;const t=i(),s={portal:n.F.portal,locale:{default:"en"},session:{type:"OAuth",clientId:n.F.user.client_id,authToken:t,handleRefreshToken:l},theme:d.Ay,handleAnonymousAction:()=>{alert("Anonymous action")}};return(0,m.jsx)(u.A,{children:()=>(0,m.jsx)(c.Ay,{conf:s,children:o})})}},21676:(e,o,t)=>{"use strict";t.d(o,{A:()=>g});var s=t(31635),n=t(74848),r=t(11848),a=t(44744),l=t(18653),i=t(19546),c=t.n(i);const d="SCTagChip",u={ellipsis:`${d}-ellipsis`},m=(0,r.Ay)(a.A,{name:d,slot:"Root",overridesResolver:(e,o)=>[o.root]})((({theme:e})=>({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",height:25,[`&.${u.ellipsis}`]:{maxWidth:120}})));function g(e){const{tag:o,clickable:t=!0,disposable:r=!0,label:a=null,ellipsis:i=!1,onClick:d=null,onDelete:g=null,className:p=null,showDescription:h=!1}=e,A=(0,s.__rest)(e,["tag","clickable","disposable","label","ellipsis","onClick","onDelete","className","showDescription"]),y=(0,n.jsx)(m,Object.assign({className:c()(p,{[u.ellipsis]:i}),sx:{backgroundColor:`${o.color}`,color:e=>e.palette.getContrastText(o.color)}},t&&{onClick:()=>{d&&d(o.id)}},r&&{onDelete:()=>{g&&g(o.id)}},{label:a||o.name},A));return h&&o.description?(0,n.jsx)(l.A,Object.assign({title:o.description,placement:"right",arrow:!0},{children:y})):y}},23237:()=>{},25441:(e,o,t)=>{"use strict";t.d(o,{A:()=>j});var s=t(85486),n=t(59703),r=t(96540),a=t(54533),l=t(75659),i=t(11848),c=t(25669),d=t(33779),u=t(27365),m=t(38413),g=t(31609);function p(e){return(0,g.Ay)("MuiAvatarGroup",e)}const h=(0,m.A)("MuiAvatarGroup",["root","avatar"]);var A=t(74848);const y=["children","className","component","componentsProps","max","renderSurplus","slotProps","spacing","total","variant"],f={small:-16,medium:null},v=(0,i.Ay)("div",{name:"MuiAvatarGroup",slot:"Root",overridesResolver:(e,o)=>(0,n.A)({[`& .${h.avatar}`]:o.avatar},o.root)})((({theme:e,ownerState:o})=>{const t=o.spacing&&void 0!==f[o.spacing]?f[o.spacing]:-o.spacing;return{[`& .${d.A.root}`]:{border:`2px solid ${(e.vars||e).palette.background.default}`,boxSizing:"content-box",marginLeft:null!=t?t:-8,"&:last-child":{marginLeft:0}},display:"flex",flexDirection:"row-reverse"}})),j=r.forwardRef((function(e,o){var t;const i=(0,c.b)({props:e,name:"MuiAvatarGroup"}),{children:d,className:m,component:g="div",componentsProps:h={},max:f=5,renderSurplus:j,slotProps:x={},spacing:b="medium",total:w,variant:C="circular"}=i,k=(0,s.A)(i,y);let _=f<2?2:f;const N=(0,n.A)({},i,{max:f,spacing:b,component:g,variant:C}),S=(e=>{const{classes:o}=e;return(0,l.A)({root:["root"],avatar:["avatar"]},p,o)})(N),O=r.Children.toArray(d).filter((e=>r.isValidElement(e))),F=w||O.length;F===_&&(_+=1),_=Math.min(F+1,_);const H=Math.min(O.length,_-1),T=Math.max(F-_,F-H,0),M=j?j(T):`+${T}`,P=null!=(t=x.additionalAvatar)?t:h.additionalAvatar;return(0,A.jsxs)(v,(0,n.A)({as:g,ownerState:N,className:(0,a.A)(S.root,m),ref:o},k,{children:[T?(0,A.jsx)(u.A,(0,n.A)({variant:C},P,{className:(0,a.A)(S.avatar,null==P?void 0:P.className),children:M})):null,O.slice(0,H).reverse().map((e=>r.cloneElement(e,{className:(0,a.A)(e.props.className,S.avatar),variant:e.props.variant||C})))]}))}))},28820:(e,o,t)=>{"use strict";t.d(o,{A:()=>y});var s=t(85486),n=t(59703),r=t(96540),a=t(54533),l=t(75659),i=t(11848),c=t(25669),d=t(32850),u=t(38413),m=t(31609);function g(e){return(0,m.Ay)("MuiList",e)}(0,u.A)("MuiList",["root","padding","dense","subheader"]);var p=t(74848);const h=["children","className","component","dense","disablePadding","subheader"],A=(0,i.Ay)("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[o.root,!t.disablePadding&&o.padding,t.dense&&o.dense,t.subheader&&o.subheader]}})((({ownerState:e})=>(0,n.A)({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0}))),y=r.forwardRef((function(e,o){const t=(0,c.b)({props:e,name:"MuiList"}),{children:i,className:u,component:m="ul",dense:y=!1,disablePadding:f=!1,subheader:v}=t,j=(0,s.A)(t,h),x=r.useMemo((()=>({dense:y})),[y]),b=(0,n.A)({},t,{component:m,dense:y,disablePadding:f}),w=(e=>{const{classes:o,disablePadding:t,dense:s,subheader:n}=e,r={root:["root",!t&&"padding",s&&"dense",n&&"subheader"]};return(0,l.A)(r,g,o)})(b);return(0,p.jsx)(d.A.Provider,{value:x,children:(0,p.jsxs)(A,(0,n.A)({as:m,className:(0,a.A)(w.root,u),ref:o,ownerState:b},j,{children:[v,i]}))})}))},31815:()=>{},34381:(e,o,t)=>{"use strict";t.d(o,{H:()=>s});const s="SCCategoryHeader"},43029:(e,o,t)=>{"use strict";t.d(o,{A:()=>p});var s=t(31635),n=t(74848),r=t(11848),a=t(25441),l=t(44675),i=t(27365),c=t(73785),d=t(66848);const u="SCAvatarGroupSkeleton",m={root:`${u}-root`},g=(0,r.Ay)(a.A,{name:u,slot:"Root",overridesResolver:(e,o)=>o.root})((()=>({})));function p(e){const o=(0,d.A)({props:e,name:u}),{skeletonsAnimation:t="wave",count:r=3}=o,a=(0,s.__rest)(o,["skeletonsAnimation","count"]),p=(0,l.A)();return(0,n.jsx)(g,Object.assign({className:m.root},a,{children:[...Array(r)].map(((e,o)=>(0,n.jsx)(i.A,{children:(0,n.jsx)(c.A,{variant:"circular",width:p.selfcommunity.user.avatar.sizeSmall,height:p.selfcommunity.user.avatar.sizeSmall,animation:t})},o)))}))}},45384:(e,o,t)=>{"use strict";t.d(o,{F:()=>s});const s={user:{username:"beatrice",password:"Password!!Beatrice2021",client_id:"XJjPE54IBBjhibs0Rf0wZ969cZNPq6WjC02FrkaM",grant_type:"password"},portal:"https://internal.selfcommunity.io/mkg2zxd0"}},46900:(e,o,t)=>{"use strict";t.d(o,{E:()=>r});var s=t(74848);const n=3;function r(e){const o=e===n?1:e<n?e:e-n;return o>999999?(0,s.jsxs)(s.Fragment,{children:["+",(Math.abs(o)/1e6).toFixed(1),"M"]}):o>999?(0,s.jsxs)(s.Fragment,{children:["+",(Math.abs(o)/1e3).toFixed(1),"K"]}):(0,s.jsxs)(s.Fragment,{children:["+",o]})}},48323:(e,o,t)=>{"use strict";t.r(o),t.d(o,{assets:()=>d,contentTitle:()=>c,default:()=>g,frontMatter:()=>i,metadata:()=>s,toc:()=>u});const s=JSON.parse('{"id":"sdk/community-js/react-ui/Components/CategoryHeader","title":"Category Header","description":"The Category Header component renders a category header composed of category\'s cover, title, slogan and","source":"@site/docs/sdk/community-js/react-ui/Components/CategoryHeader.mdx","sourceDirName":"sdk/community-js/react-ui/Components","slug":"/sdk/community-js/react-ui/Components/CategoryHeader","permalink":"/docs/sdk/community-js/react-ui/Components/CategoryHeader","draft":false,"unlisted":false,"editUrl":"https://github.com/selfcommunity/developers-doc/tree/main/docs/sdk/community-js/react-ui/Components/CategoryHeader.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_label":"Category Header","sidebar_position":1,"title":"Category Header"},"sidebar":"sdkSidebar","previous":{"title":"Category Autocomplete","permalink":"/docs/sdk/community-js/react-ui/Components/CategoryAutocomplete"},"next":{"title":"Category Trending Feed Widget","permalink":"/docs/sdk/community-js/react-ui/Components/CategoryTrendingFeed"}}');var n=t(74848),r=t(28453),a=t(13004),l=t(71271);const i={sidebar_label:"Category Header",sidebar_position:1,title:"Category Header"},c=void 0,d={},u=[{value:"Usage",id:"usage",level:4}];function m(e){const o={blockquote:"blockquote",code:"code",h4:"h4",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(o.blockquote,{children:["\n",(0,n.jsxs)(o.p,{children:["The Category Header component renders a category header composed of category's cover, title, slogan and ",(0,n.jsx)("br",{}),"\na followers section followed by a button that allows users to follow/unfollow the category."]}),"\n"]}),"\n","\n",(0,n.jsx)(a.A,{children:(0,n.jsx)(l.A,{categoryId:10})}),"\n",(0,n.jsx)(o.h4,{id:"usage",children:"Usage"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-jsx",children:" import React from 'react';\n import {SCContextProvider} from '@selfcommunity/react-core';\n import {CategoryHeader} from '@selfcommunity/react-ui';\n\n function App() {\n   const conf = {\n     portal: '<community-path>',\n     session: {\n       type: 'OAuth',\n       token: '<community-token>',\n       refreshToken: '<community-refresh-token>',\n       refreshTokenEndpoint: '<community-refresh-endpoint>',\n     },\n   };\n   return (\n     <SCContextProvider conf={conf}><CategoryHeader /></SCContextProvider>\n   );\n }\n"})})]})}function g(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,n.jsx)(o,{...e,children:(0,n.jsx)(m,{...e})}):m(e)}},66671:()=>{},71271:(e,o,t)=>{"use strict";t.d(o,{A:()=>Z});var s=t(31635),n=t(74848),r=t(96540),a=t(11848),l=t(67733),i=t(57416),c=t(47859),d=t(67115),u=t(58065),m=t(65846),g=t(22373),p=t(3338),h=t(99042),A=t(94844),y=t(19546),f=t.n(y),v=t(66848),j=t(42942),x=t(44675),b=t(15327),w=t(25441),C=t(27365),k=t(28820),_=t(36870),N=t(27202),S=t(13550),O=t(29368),F=t(94520),H=t(62645),T=t(15906),M=t(29251),P=t(43749),R=t(46900),$=t(43029),I=t(41219),B=t(16799);const D="SCCategoryFollowersButton",E={root:`${D}-root`,dialogRoot:`${D}-dialog-root`,endMessage:`${D}-end-message`},L=(0,a.Ay)(j.A,{name:D,slot:"Root",overridesResolver:(e,o)=>o.root,shouldForwardProp:e=>"followers"!==e})((()=>({}))),G=(0,a.Ay)(M.A,{name:D,slot:"DialogRoot",overridesResolver:(e,o)=>o.dialogRoot})((()=>({})));const J=function(e){const o=(0,v.A)({props:e,name:D}),{className:t,categoryId:a,category:l,DialogProps:i={}}=o,d=(0,s.__rest)(o,["className","categoryId","category","DialogProps"]),[g,p]=(0,r.useState)(!0),[h,A]=(0,r.useState)(null),[y,j]=(0,r.useState)(null),[M,J]=(0,r.useState)([]),[q,U]=(0,r.useState)(!1),{scCategory:z}=(0,m.A)({id:a,category:l});(0,H.ho)((()=>{z&&(0===M.length?N.A.getCategoryFollowers(z.id,{limit:3}).then((e=>{J([...e.results]),j(3),p(!1)})):j(0))}),[z]),(0,r.useEffect)((()=>{q&&null!==y&&(p(!0),N.A.getCategoryFollowers(z.id,{offset:y,limit:20}).then((e=>{J([...0===y?[]:M,...e.results]),A(e.next),p(!1),j(null)})))}),[q,M,y]);const V=(0,r.useMemo)((()=>()=>{h&&S.A.request({url:h,method:O.A.CategoryFollowers.method}).then((e=>{J([...M,...e.data.results]),A(e.data.next)})).catch((e=>F.V.error(T.d,e))).then((()=>p(!1)))}),[M,z,h]),W=(0,r.useMemo)((()=>()=>{U((e=>!e))}),[U]),Z=(0,r.useCallback)((()=>(0,R.E)(z.followers_counter)),[z]),K=(0,x.A)(),X=(0,b.A)(K.breakpoints.down("md"));return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(L,Object.assign({className:f()(E.root,t),onClick:W,disabled:g||!z||0===z.followers_counter,followers:null==z?void 0:z.followers_counter},d,{children:g||!z?(0,n.jsx)($.A,Object.assign({},d)):(0,n.jsx)(w.A,Object.assign({total:z.followers_counter,renderSurplus:Z},{children:M.map((e=>(0,n.jsx)(C.A,{alt:e.username,src:e.avatar},e.id)))}))})),q&&(0,n.jsx)(G,Object.assign({className:E.dialogRoot,title:(0,n.jsx)(u.A,{defaultMessage:"ui.categoryFollowersButton.dialogTitle",id:"ui.categoryFollowersButton.dialogTitle",values:{total:z.followers_counter}}),onClose:W,open:q},i,{children:(0,n.jsx)(P.A,Object.assign({dataLength:M.length,next:V,hasMoreNext:null!==h||g,loaderNext:(0,n.jsx)(I.A,{elevation:0}),height:X?"100%":400,endMessage:(0,n.jsx)(c.A,Object.assign({className:E.endMessage},{children:(0,n.jsx)(u.A,{id:"ui.categoryFollowersButton.noOtherFollowers",defaultMessage:"ui.categoryFollowersButton.noOtherFollowers"})}))},{children:(0,n.jsx)(k.A,{children:M.map((e=>(0,n.jsx)(_.Ay,{children:(0,n.jsx)(B.A,{elevation:0,user:e})},e.id)))})}))}))]})};var q=t(34381),U=t(38441),z=t(21676);const V={root:`${q.H}-root`,cover:`${q.H}-cover`,name:`${q.H}-name`,slogan:`${q.H}-slogan`,info:`${q.H}-info`,tags:`${q.H}-tags`,followedCounter:`${q.H}-followed-counter`,followed:`${q.H}-followed`,action:`${q.H}-action`},W=(0,a.Ay)(l.A,{name:q.H,slot:"Root"})((()=>({})));const Z=function(e){var o,t;const a=(0,v.A)({props:e,name:q.H}),{className:y,categoryId:j,category:x,CategoryFollowButtonProps:b={},CategoryFollowersButtonProps:w={},showTags:C=!1}=a,k=(0,s.__rest)(a,["className","categoryId","category","CategoryFollowButtonProps","CategoryFollowersButtonProps","showTags"]),{scCategory:_,setSCCategory:N}=(0,m.A)({id:j,category:x}),S=(0,g.__)(p.DE),{isPaymentsEnabled:O}=(0,h.A)(),F=(0,r.useMemo)((()=>Object.assign({},_?{background:`url('${_.emotional_image_original}') center / cover`}:{})),[_]);return _?(0,n.jsxs)(W,Object.assign({className:f()(V.root,y)},k,{children:[(0,n.jsx)(i.A,{style:F,classes:{root:V.cover}}),(0,n.jsxs)(l.A,Object.assign({className:V.info},{children:[(0,n.jsx)(c.A,Object.assign({variant:"h3",className:V.name,gutterBottom:!0},{children:_.name})),_.slogan&&(0,n.jsx)(c.A,Object.assign({variant:"h5",className:V.slogan},{children:_.slogan})),C&&(null===(o=_.tags)||void 0===o?void 0:o.length)>0&&(0,n.jsx)(l.A,Object.assign({className:V.tags},{children:_.tags.map((e=>(0,n.jsx)(z.A,{tag:e,disposable:!1,clickable:!1},e.id)))})),S&&(0,n.jsxs)(l.A,Object.assign({className:V.followed},{children:[(0,n.jsx)(c.A,Object.assign({className:V.followedCounter,component:"div"},{children:(0,n.jsx)(u.A,{id:"ui.categoryHeader.followedBy",defaultMessage:"ui.categoryHeader.followedBy",values:{total:_.followers_counter}})})),(0,n.jsx)(J,Object.assign({category:_,categoryId:null==_?void 0:_.id},w))]})),(0,n.jsxs)(l.A,Object.assign({className:V.action},{children:[O&&(null===(t=_.paywalls)||void 0===t?void 0:t.length)>0&&_.payment_order&&(0,n.jsx)(U.A,{contentType:A.AV.CATEGORY,content:_}),(0,n.jsx)(d.A,Object.assign({category:_,onFollow:(e,o)=>{N(Object.assign(Object.assign({},e),{followers_counter:e.followers_counter+(o?1:-1)}))}},b))]}))]}))]})):null}},74705:(e,o,t)=>{"use strict";function s(e,o=166){let t;function s(...s){clearTimeout(t),t=setTimeout((()=>{e.apply(this,s)}),o)}return s.clear=()=>{clearTimeout(t)},s}t.d(o,{A:()=>s})},82787:()=>{},93749:(e,o,t)=>{"use strict";t.d(o,{A:()=>s});const s=t(44877).A},96248:(e,o,t)=>{"use strict";t.d(o,{A:()=>s});const s=t(32325).A},97492:()=>{}}]);