"use strict";(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[47557],{47557:(e,t,s)=>{s.d(t,{Z:()=>ms});var n=s(67294),o=s(90948),r=s(5616),a=s(68269),i=s(25662),u=s(15861),l=s(67564),c=s(43076),d=s(61504),m=s(5757),g=s(97582),p=s(78462),E=s(44267),b=s(97212),f=s(91705),Z=s(24085),h=s(66821);class v{static getUserGroups(e,t){const s=(0,h.B)(e);return(0,f.N)(Object.assign(Object.assign({},t),{url:`${Z.Z.GetUserGroups.url({})}?${s.toString()}`,method:Z.Z.GetUserGroups.method}))}static getUserSubscribedGroups(e,t,s){const n=(0,h.B)(t);return(0,f.N)(Object.assign(Object.assign({},s),{url:`${Z.Z.GetUserSubscribedGroups.url({id:e})}?${n.toString()}`,method:Z.Z.GetUserSubscribedGroups.method}))}static searchGroups(e,t){const s=(0,h.B)(e);return(0,f.N)(Object.assign(Object.assign({},t),{url:`${Z.Z.SearchGroups.url({})}?${s.toString()}`,method:Z.Z.SearchGroups.method}))}static getSpecificGroupInfo(e,t){return(0,f.N)(Object.assign(Object.assign({},t),{url:Z.Z.GetGroupInfo.url({id:e}),method:Z.Z.GetGroupInfo.method}))}static getGroupFeed(e,t,s){const n=(0,h.B)(t);return(0,f.N)(Object.assign(Object.assign({},s),{url:`${Z.Z.GetGroupFeed.url({id:e})}?${n.toString()}`,method:Z.Z.GetGroupFeed.method}))}static createGroup(e,t){return(0,f.N)(Object.assign(Object.assign({},t),{url:Z.Z.CreateGroup.url({}),method:Z.Z.CreateGroup.method,data:e}))}static updateGroup(e,t,s){return(0,f.N)(Object.assign(Object.assign({},s),{url:Z.Z.UpdateGroup.url({id:e}),method:Z.Z.UpdateGroup.method,data:t}))}static patchGroup(e,t,s){return(0,f.N)(Object.assign(Object.assign({},s),{url:Z.Z.PatchGroup.url({id:e}),method:Z.Z.PatchGroup.method,data:t}))}static changeGroupAvatarOrCover(e,t,s){return(0,f.N)(Object.assign({url:Z.Z.PatchGroup.url({id:e}),method:Z.Z.PatchGroup.method,data:t},s))}static getGroupMembers(e,t,s){const n=(0,h.B)(t);return(0,f.N)(Object.assign(Object.assign({},s),{url:`${Z.Z.GetGroupSubscribers.url({id:e})}?${n.toString()}`,method:Z.Z.GetGroupSubscribers.method}))}static getGroupSuggestedUsers(e,t,s){return(0,f.N)(Object.assign(Object.assign({},s),{url:Z.Z.GetGroupSuggestedUsers.url({id:e,search:t}),method:Z.Z.GetGroupSuggestedUsers.method}))}static getGroupsSuggestedUsers(e,t){return(0,f.N)(Object.assign(Object.assign({},t),{url:Z.Z.GetGroupsSuggestedUsers.url({search:e}),method:Z.Z.GetGroupsSuggestedUsers.method}))}static removeUserFromGroup(e,t,s){return(0,f.N)(Object.assign(Object.assign({},s),{url:Z.Z.RemoveUserFromGroup.url({id:e,user:t}),method:Z.Z.RemoveUserFromGroup.method}))}static getGroupInvitedUsers(e,t,s){const n=(0,h.B)(t);return(0,f.N)(Object.assign(Object.assign({},s),{url:`${Z.Z.GetGroupInvitedUsers.url({id:e})}?${n.toString()}`,method:Z.Z.GetGroupInvitedUsers.method}))}static subscribeToGroup(e,t){return(0,f.N)(Object.assign(Object.assign({},t),{url:Z.Z.SubscribeToGroup.url({id:e}),method:Z.Z.SubscribeToGroup.method}))}static unsubscribeFromGroup(e,t){return(0,f.N)(Object.assign(Object.assign({},t),{url:Z.Z.UnsubscribeFromGroup.url({id:e}),method:Z.Z.UnsubscribeFromGroup.method}))}static inviteOrAcceptGroupRequest(e,t,s){return(0,f.N)(Object.assign(Object.assign({},s),{url:Z.Z.InviteOrAcceptGroupRequest.url({id:e}),method:Z.Z.InviteOrAcceptGroupRequest.method,data:t}))}static getGroupSubscriptionStatus(e,t){return(0,f.N)(Object.assign(Object.assign({},t),{url:Z.Z.GetGroupSubscriptionStatus.url({id:e}),method:Z.Z.GetGroupSubscriptionStatus.method}))}static getGroupWaitingApprovalSubscribers(e,t,s){const n=(0,h.B)(t);return(0,f.N)(Object.assign(Object.assign({},s),{url:`${Z.Z.GetGroupWaitingApprovalSubscribers.url({id:e})}?${n.toString()}`,method:Z.Z.GetGroupWaitingApprovalSubscribers.method}))}}class S{static getUserGroups(e,t){return(0,g.mG)(this,void 0,void 0,(function*(){return v.getUserGroups(e,t)}))}static getUserSubscribedGroups(e,t,s){return(0,g.mG)(this,void 0,void 0,(function*(){return v.getUserSubscribedGroups(e,t,s)}))}static searchGroups(e,t){return(0,g.mG)(this,void 0,void 0,(function*(){return v.searchGroups(e,t)}))}static getSpecificGroupInfo(e,t){return(0,g.mG)(this,void 0,void 0,(function*(){return v.getSpecificGroupInfo(e,t)}))}static getGroupFeed(e,t,s){return(0,g.mG)(this,void 0,void 0,(function*(){return v.getGroupFeed(e,t,s)}))}static createGroup(e,t){return(0,g.mG)(this,void 0,void 0,(function*(){return v.createGroup(e,t)}))}static updateGroup(e,t,s){return(0,g.mG)(this,void 0,void 0,(function*(){return v.updateGroup(e,t,s)}))}static patchGroup(e,t,s){return(0,g.mG)(this,void 0,void 0,(function*(){return v.patchGroup(e,t,s)}))}static changeGroupAvatarOrCover(e,t,s){return(0,g.mG)(this,void 0,void 0,(function*(){return v.changeGroupAvatarOrCover(e,t,s)}))}static getGroupMembers(e,t,s){return(0,g.mG)(this,void 0,void 0,(function*(){return v.getGroupMembers(e,t,s)}))}static getGroupSuggestedUsers(e,t,s){return(0,g.mG)(this,void 0,void 0,(function*(){return v.getGroupSuggestedUsers(e,t,s)}))}static getGroupsSuggestedUsers(e,t){return(0,g.mG)(this,void 0,void 0,(function*(){return v.getGroupsSuggestedUsers(e,t)}))}static removeUserFromGroup(e,t,s){return(0,g.mG)(this,void 0,void 0,(function*(){return v.removeUserFromGroup(e,t,s)}))}static getGroupInvitedUsers(e,t,s){return(0,g.mG)(this,void 0,void 0,(function*(){return v.getGroupInvitedUsers(e,t,s)}))}static subscribeToGroup(e,t){return(0,g.mG)(this,void 0,void 0,(function*(){return v.subscribeToGroup(e,t)}))}static unsubscribeFromGroup(e,t){return(0,g.mG)(this,void 0,void 0,(function*(){return v.unsubscribeFromGroup(e,t)}))}static inviteOrAcceptGroupRequest(e,t,s){return(0,g.mG)(this,void 0,void 0,(function*(){return v.inviteOrAcceptGroupRequest(e,t,s)}))}static getGroupSubscriptionStatus(e,t){return(0,g.mG)(this,void 0,void 0,(function*(){return v.getGroupSubscriptionStatus(e,t)}))}static getGroupWaitingApprovalSubscribers(e,t,s){return(0,g.mG)(this,void 0,void 0,(function*(){return v.getGroupWaitingApprovalSubscribers(e,t,s)}))}}var N=s(59219),_=s(99960),C=s(5840),G=s(68787),O=s(66380),I=s(69721),R=s(15927),y=s(72951),M=s(26462),U=s(75459),A=s(44012),P=s(63902),B=s(2734),T=s(88078),k=s(115);const w="SCGroup",L={root:`${w}-skeleton-root`},$=(0,o.ZP)(k.Z,{name:w,slot:"SkeletonRoot"})((()=>({})));function j(e){const t=(0,B.Z)();return n.createElement($,Object.assign({className:L.root},e,{image:n.createElement(T.Z,{animation:"wave",variant:"circular",width:t.selfcommunity.group.avatar.sizeSmall,height:t.selfcommunity.group.avatar.sizeSmall}),primary:n.createElement(T.Z,{animation:"wave",height:10,width:120,style:{marginBottom:10}}),secondary:n.createElement(T.Z,{animation:"wave",height:10,width:70,style:{marginBottom:10}}),actions:n.createElement(i.Z,{size:"small",variant:"outlined",disabled:!0},n.createElement(T.Z,{animation:"wave",height:10,width:30,style:{marginTop:5,marginBottom:5}}))}))}const D="SCUserSubscribedGroupsWidgetSkeleton",W={root:`${D}-skeleton-root`,list:`${D}-list`},x=(0,o.ZP)(P.Z,{name:D,slot:"SkeletonRoot"})((()=>({})));function F(e){return n.createElement(x,Object.assign({className:W.root},e),n.createElement(E.Z,null,n.createElement(p.Z,{className:W.list},[...Array(3)].map(((e,t)=>n.createElement(b.ZP,{key:t},n.createElement(j,{elevation:0})))))),");")}var K=s(94184),q=s.n(K),z=s(39154),H=s(29628),X=s(54545);const Y="SCUserSubscribedGroupsWidget";var V=s(87952),J=s(74482),Q=s(24243),ee=s(96570),te=s(87620);function se({id:e=null,group:t=null,cacheStrategy:s=N.n2.CACHE_FIRST}){const o=t?t.id:e,r=(0,G.LD)(),a=r.user?r.user.id:null,i=(0,I.b0)(o),u=a?t:(0,ee.Kd)(t,["subscription_status"]),[l,c]=(0,n.useState)(s!==N.n2.NETWORK_ONLY?N.ZP.get(i,u):null),[d,m]=(0,n.useState)(null),g=e=>{const t=a?e:(0,ee.Kd)(e,["subscription_status"]);c(t),N.ZP.set(i,t)},p=(0,n.useMemo)((()=>()=>Q.Z.request({url:Z.Z.GetGroupInfo.url({id:o}),method:Z.Z.GetGroupInfo.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[o]);return(0,n.useEffect)((()=>{o&&(!l||l&&o!==l.id)&&p().then((e=>{g(e)})).catch((t=>{N.ZP.delete(i),m(`Group with id ${e} not found`),_.Y.error(J.h,`Group with id ${e} not found`),_.Y.error(J.h,t.message)}))}),[o,a]),(0,te.F_)((()=>{t&&g(t)}),[t,a]),{scGroup:l,setSCGroup:g,error:d}}var ne,oe,re=s(41538),ae=s(97265),ie=s(12132),ue=s(54490),le=s(86896),ce=s(75427),de=s(68585),me=s(53704),ge=s(31812);!function(e){e.GROUP="group"}(ne||(ne={})),function(e){e.CREATE="create",e.EDIT="edit",e.MEMBERS="members",e.ADD_MEMBER="members.add_member",e.INVITE_MEMBER="members.invite_member",e.REMOVE_MEMBER="members.remove_member"}(oe||(oe={}));var pe=s(1798),Ee=s.n(pe);const be="SCGroupSubscribeButton",fe={root:`${be}-root`},Ze=(0,o.ZP)(ge.Z,{name:be,slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({})));const he=function(e){var t;const s=(0,H.Z)({props:e,name:be}),{className:o,groupId:r,group:a,user:i,onSubscribe:u}=s,l=(0,g._T)(s,["className","groupId","group","user","onSubscribe"]),[c,d]=(0,n.useState)(null),m=(0,me.RM)(),p=(0,G.LD)(),E=p.managers.groups,b=p.user?p.user.id:null,{scGroup:f}=se({id:r,group:a,cacheStrategy:b?N.n2.CACHE_FIRST:N.n2.STALE_WHILE_REVALIDATE}),Z=(0,n.useMemo)((()=>{var e;return p.user&&(null===(e=null==f?void 0:f.managed_by)||void 0===e?void 0:e.id)===p.user.id}),[p.user,null===(t=null==f?void 0:f.managed_by)||void 0===t?void 0:t.id]);(0,n.useEffect)((()=>{b&&d(E.subscriptionStatus(f))}),[b,E.subscriptionStatus,f]);const h=e=>{E.subscribe(f,null==e?void 0:e.id).then((()=>{const t=f.privacy===M.f.PRIVATE&&f.subscription_status!==M.v.INVITED?M.v.REQUESTED:M.v.SUBSCRIBED;!function(e,t){e&&t&&Ee().publish(`${ne.GROUP}.${oe.ADD_MEMBER}`,{group:e,user:t})}(f,e),u&&u(f,t)})).catch((e=>{_.Y.error(U.J,e)}))},v=(0,n.useMemo)((()=>{let e;switch(c){case M.v.REQUESTED:e=n.createElement(A.Z,{defaultMessage:"ui.groupSubscribeButton.waitingApproval",id:"ui.groupSubscribeButton.waitingApproval"});break;case M.v.SUBSCRIBED:e=n.createElement(A.Z,{defaultMessage:"ui.groupSubscribeButton.exit",id:"ui.groupSubscribeButton.exit"});break;case M.v.INVITED:e=n.createElement(A.Z,{defaultMessage:"ui.groupSubscribeButton.accept",id:"ui.groupSubscribeButton.accept"});break;default:e=f.privacy===M.f.PUBLIC?n.createElement(A.Z,{defaultMessage:"ui.groupSubscribeButton.enter",id:"ui.groupSubscribeButton.enter"}):n.createElement(A.Z,{defaultMessage:"ui.groupSubscribeButton.requestAccess",id:"ui.groupSubscribeButton.requestAccess"})}return e}),[c,f]);return!f||Z&&(null==i?void 0:i.id)===p.user.id||Z&&!(null==i?void 0:i.id)?null:n.createElement(Ze,Object.assign({size:"small",variant:"outlined",onClick:()=>{p.user?c!==M.v.SUBSCRIBED||(null==i?void 0:i.id)?(null==i?void 0:i.id)?h(i):h():E.unsubscribe(f).then((()=>{u&&u(f,null)})).catch((e=>{_.Y.error(U.J,e)})):m.settings.handleAnonymousAction()},loading:p.user?E.isLoading(f):null,disabled:c===M.v.REQUESTED,className:q()(fe.root,o)},l),Z?n.createElement(A.Z,{defaultMessage:"ui.groupSubscribeButton.accept",id:"ui.groupSubscribeButton.accept"}):v)},ve=(0,ue.vU)({groupMembers:{id:"ui.group.members",defaultMessage:"ui.group.members"}}),Se={root:`${w}-root`,avatar:`${w}-avatar`,actions:`${w}-actions`,icon:`${w}-icon`},Ne=(0,o.ZP)(ce.Z,{name:w,slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({})));const _e=function(e){var t;const s=(0,H.Z)({props:e,name:w}),{groupId:o=null,group:r=null,className:u=null,elevation:c,hideActions:d=!1,actionRedirect:m=!1,groupSubscribeButtonProps:p={}}=s,E=(0,g._T)(s,["groupId","group","className","elevation","hideActions","actionRedirect","groupSubscribeButtonProps"]),{scGroup:b}=se({id:o,group:r}),f=(0,re.sy)(),Z=(0,G.LD)(),h=(0,n.useMemo)((()=>{var e;return Z.user&&(null===(e=null==b?void 0:b.managed_by)||void 0===e?void 0:e.id)===Z.user.id}),[Z.user,null===(t=null==b?void 0:b.managed_by)||void 0===t?void 0:t.id]),[v,S]=(0,n.useState)(!1),N=(0,le.Z)();return b?n.createElement(n.Fragment,null,n.createElement(Ne,Object.assign({elevation:c},E,{className:q()(Se.root,u),ButtonBaseProps:{component:ae.Z,to:f.url(ie.GROUP_ROUTE_NAME,b)},image:n.createElement(V.Z,{alt:b.name,src:b.image_medium,className:Se.avatar}),primary:n.createElement(n.Fragment,null,b.name," ",n.createElement(l.Z,{className:Se.icon},(null==r?void 0:r.privacy)===M.f.PRIVATE?"private":"public")),secondary:`${N.formatMessage(ve.groupMembers,{total:b.subscribers_counter})}`,actions:d?null:n.createElement(a.Z,{className:Se.actions,direction:"row",alignItems:"center",justifyContent:"center",spacing:2},h&&n.createElement(l.Z,null,"face"),m?n.createElement(i.Z,{size:"small",variant:"outlined",component:ae.Z,to:f.url(ie.GROUP_ROUTE_NAME,b)},b.subscription_status===M.v.SUBSCRIBED?n.createElement(A.Z,{defaultMessage:"ui.group.status.enter",id:"ui.group.status.enter"}):n.createElement(A.Z,{defaultMessage:"ui.group.status.discover",id:"ui.group.status.discover"})):n.createElement(he,Object.assign({group:r,groupId:o},p)))})),v&&n.createElement(de.Z,{open:v,handleClose:()=>S(!1)})):n.createElement(j,{elevation:c})},Ce={root:`${Y}-root`,title:`${Y}-title`,noResults:`${Y}-no-results`,showMore:`${Y}-show-more`,dialogRoot:`${Y}-dialog-root`,endMessage:`${Y}-end-message`},Ge=(0,o.ZP)(P.Z,{name:Y,slot:"Root"})((()=>({}))),Oe=(0,o.ZP)(z.Z,{name:Y,slot:"DialogRoot"})((()=>({})));const Ie=function(e){const t=(0,H.Z)({props:e,name:Y}),{userId:s,autoHide:o,limit:r=3,className:a,GroupProps:l={},cacheStrategy:c=N.n2.NETWORK_ONLY,onHeightChange:d,onStateChange:m,DialogProps:f={}}=t,Z=(0,g._T)(t,["userId","autoHide","limit","className","GroupProps","cacheStrategy","onHeightChange","onStateChange","DialogProps"]),h=(0,G.LD)(),v=(0,n.useMemo)((()=>h.user&&s===h.user.id),[h.user,s]),{features:P}=(0,O.ko)(),B=(0,n.useMemo)((()=>P.includes(y.$.GROUPING)&&P.includes(y.$.TAGGING)),[P]),[T,k]=(0,n.useReducer)(R.Xi,{isLoadingNext:!1,next:null,cacheKey:I.hu(I.zL,s),cacheStrategy:c},R.Mv),[w,L]=(0,n.useState)(!1),$=(0,n.useMemo)((()=>()=>{T.initialized||T.isLoadingNext||S.getUserSubscribedGroups(s).then((e=>{k({type:R.dK.LOAD_NEXT_SUCCESS,payload:{count:e.count,results:e.results,initialized:!0}})})).catch((e=>{k({type:R.dK.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),_.Y.error(U.J,e)}))}),[T.isLoadingNext,T.initialized,s,k]);(0,n.useEffect)((()=>{let e;if(B&&(0,C.U)(s)&&void 0!==h.user)return e=setTimeout($),()=>{e&&clearTimeout(e)}}),[h.user,B,s]),(0,n.useEffect)((()=>{d&&d()}),[T.results.length]),(0,n.useEffect)((()=>{(B||h.user||(0,C.U)(s))&&c===N.n2.NETWORK_ONLY&&m&&m({cacheStrategy:N.n2.CACHE_FIRST})}),[B,c,h.user,s]);const D=e=>{if(v){const t=[...T.results],s=t.findIndex((t=>t.id===e.id));-1!==s&&(e.subscription_status===M.v.SUBSCRIBED?(t[s].subscribers_counter=e.subscribers_counter-1,t[s].subscription_status=null):(t[s].subscribers_counter=e.privacy===M.f.PUBLIC?e.subscribers_counter+1:e.subscribers_counter,t[s].subscription_status=e.privacy===M.f.PUBLIC?M.v.SUBSCRIBED:M.v.REQUESTED),k({type:R.dK.SET_RESULTS,payload:{results:t}}))}},W=()=>{L((e=>!e))};if(!B||o&&!T.count&&T.initialized||!s)return n.createElement(X.Z,null);if(!T.initialized)return n.createElement(F,null);const x=n.createElement(E.Z,null,n.createElement(u.Z,{className:Ce.title,variant:"h5"},n.createElement(A.Z,{id:"ui.userSubscribedGroupsWidget.title",defaultMessage:"ui.userSubscribedGroupsWidget.title",values:{total:v?T.results.filter((e=>e.subscription_status===M.v.SUBSCRIBED)).length:T.count}})),T.count?n.createElement(n.Fragment,null,n.createElement(p.Z,null,T.results.slice(0,r).map((e=>n.createElement(b.ZP,{key:e.id},n.createElement(_e,Object.assign({elevation:0,group:e,groupSubscribeButtonProps:{onSubscribe:D}},l)))))),r<T.count&&n.createElement(i.Z,{className:Ce.showMore,onClick:W},n.createElement(A.Z,{id:"ui.userSubscribedGroupsWidget.button.showAll",defaultMessage:"ui.userSubscribedGroupsWidget.button.showAll"})),w&&n.createElement(Oe,Object.assign({className:Ce.dialogRoot,title:n.createElement(A.Z,{id:"ui.userSubscribedGroupsWidget.title",defaultMessage:"ui.userSubscribedGroupsWidget.title",values:{total:T.count}}),onClose:W,open:w,scroll:"paper"},f),n.createElement(p.Z,null,T.results.map((e=>n.createElement(b.ZP,{key:e.id},n.createElement(_e,Object.assign({elevation:0,group:e,groupSubscribeButtonProps:{onSubscribe:D}},l))))),T.isLoadingNext&&n.createElement(b.ZP,null,n.createElement(j,Object.assign({elevation:0},l)))),n.createElement(u.Z,{className:Ce.endMessage},n.createElement(A.Z,{id:"ui.userSubscribedGroupsWidget.noMoreResults",defaultMessage:"ui.userSubscribedGroupsWidget.noMoreResults"})))):n.createElement(u.Z,{className:Ce.noResults,variant:"body2"},n.createElement(A.Z,{id:"ui.userSubscribedGroupsWidget.subtitle.noResults",defaultMessage:"ui.userSubscribedGroupsWidget.subtitle.noResults"})));return n.createElement(Ge,Object.assign({className:q()(Ce.root,a)},Z),x)};var Re=s(19326),ye=s(61730),Me=s(49877),Ue=s(45412),Ae=s(85472),Pe=s(14459);const Be="SCUserConnectionsWidget",Te={root:`${Be}-skeleton-root`},ke=(0,o.ZP)(Pe.Z,{name:Be,slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({})));function we(e){return n.createElement(ke,Object.assign({className:Te.root},e))}var Le=s(37089),$e=s(50353),je=s(79558);const De={root:`${Be}-root`,title:`${Be}-title`,noResults:`${Be}-no-results`,showMore:`${Be}-show-more`,dialogRoot:`${Be}-dialog-root`,endMessage:`${Be}-end-message`},We=(0,o.ZP)(P.Z,{name:Be,slot:"Root"})((()=>({}))),xe=(0,o.ZP)(z.Z,{name:Be,slot:"DialogRoot"})((()=>({})));const Fe=function(e){const t=(0,H.Z)({props:e,name:Be}),{userId:s,user:o,autoHide:r=!1,limit:a=3,className:l,UserProps:c={},cacheStrategy:d=N.n2.NETWORK_ONLY,onHeightChange:m,onStateChange:f,DialogProps:h={}}=t,v=(0,g._T)(t,["userId","user","autoHide","limit","className","UserProps","cacheStrategy","onHeightChange","onStateChange","DialogProps"]),[S,y]=(0,n.useReducer)(R.Xi,{isLoadingNext:!1,next:null,cacheKey:I.hu(I.wv,(0,C.U)(s)?s:o.id),cacheStrategy:d,visibleItems:a},R.Mv),[M,P]=(0,n.useState)(!1),T=(0,G.LD)(),k=(0,O.ko)(),{scUser:w,refresh:L}=(0,Ue.Z)({id:s,user:o}),$=(0,n.useMemo)((()=>Ae.Ao in k.preferences&&k.preferences[Ae.Ao].value),[k.preferences]),j=(0,n.useMemo)((()=>Ae.$0 in k.preferences&&k.preferences[Ae.$0].value),[k.preferences]),D=(0,B.Z)(),W=(0,ye.Z)(D.breakpoints.down("md")),x=(0,n.useMemo)((()=>()=>{S.initialized||S.isLoadingNext||(y({type:R.dK.LOADING_NEXT}),Me.Z.getUserConnections(w.id,{limit:a}).then((e=>{y({type:R.dK.LOAD_NEXT_SUCCESS,payload:Object.assign(Object.assign({},e),{initialized:!0})})})).catch((e=>{y({type:R.dK.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),_.Y.error(U.J,e)})))}),[S.isLoadingNext,S.initialized,w,a,y]);(0,n.useEffect)((()=>{var e;let t;if(($||!$&&(null===(e=T.user)||void 0===e?void 0:e.id))&&!j&&w&&void 0!==T.user)return t=setTimeout(x),()=>{t&&clearTimeout(t)}}),[T.user,T.loading,$,w]),(0,n.useEffect)((()=>{M&&S.next&&S.results.length===a&&S.initialized&&(y({type:R.dK.LOADING_NEXT}),Me.Z.getUserConnections(w.id,{offset:a,limit:10}).then((e=>{y({type:R.dK.LOAD_NEXT_SUCCESS,payload:e})})).catch((e=>{y({type:R.dK.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),_.Y.error(U.J,e)})))}),[M,S.next,S.results.length,S.initialized,a]),(0,n.useEffect)((()=>{m&&m()}),[S.results]),(0,n.useEffect)((()=>{w&&!j&&($||T.user)&&d===N.n2.NETWORK_ONLY&&f&&f({cacheStrategy:N.n2.CACHE_FIRST})}),[T.user,w,$]);const F=(0,n.useMemo)((()=>()=>{y({type:R.dK.LOADING_NEXT}),Q.Z.request({url:S.next,method:Z.Z.UserConnections.method}).then((e=>{y({type:R.dK.LOAD_NEXT_SUCCESS,payload:e.data})}))}),[y,S.next,S.isLoadingNext,S.initialized]),K=(0,n.useMemo)((()=>()=>{L()}),[L]),z=()=>{P((e=>!e))};if(j||r&&!S.count&&S.initialized||!$&&!T.user||!w)return n.createElement(X.Z,null);if(!S.initialized)return n.createElement(we,null);const Y=n.createElement(E.Z,null,n.createElement(u.Z,{className:De.title,variant:"h5"},n.createElement(A.Z,{id:"ui.userConnectionsWidget.title",defaultMessage:"ui.userConnectionsWidget.title",values:{total:w.connections_counter}})),S.count?n.createElement(n.Fragment,null,n.createElement(p.Z,null,S.results.slice(0,S.visibleItems).map((e=>n.createElement(b.ZP,{key:e.id},n.createElement(Le.Z,Object.assign({elevation:0,user:e,followConnectUserButtonProps:{followConnectUserButtonProps:{onChangeConnectionStatus:K}}},c)))))),S.count>S.visibleItems&&n.createElement(i.Z,{className:De.showMore,onClick:z},n.createElement(A.Z,{id:"ui.userConnectionsWidget.button.showAll",defaultMessage:"ui.userConnectionsWidget.button.showAll"}))):n.createElement(u.Z,{className:De.noResults,variant:"body2"},n.createElement(A.Z,{id:"ui.userConnectionsWidget.subtitle.noResults",defaultMessage:""})),M&&n.createElement(xe,Object.assign({className:De.dialogRoot,title:n.createElement(A.Z,{defaultMessage:"ui.userConnectionsWidget.title",id:"ui.userConnectionsWidget.title",values:{total:w.connections_counter}}),onClose:z,open:M},h),n.createElement(je.Z,{dataLength:S.results.length,next:F,hasMoreNext:Boolean(S.next),loaderNext:n.createElement($e.Z,Object.assign({elevation:0},c)),height:W?"100%":400,endMessage:n.createElement(u.Z,{className:De.endMessage},n.createElement(A.Z,{id:"ui.userConnectionsWidget.noMoreResults",defaultMessage:"ui.userConnectionsWidget.noMoreResults"}))},n.createElement(p.Z,null,S.results.map((e=>n.createElement(b.ZP,{key:e.id},n.createElement(Le.Z,Object.assign({elevation:0,user:e,followConnectUserButtonProps:{followConnectUserButtonProps:{onChangeConnectionStatus:K}}},c)))))))));return n.createElement(We,Object.assign({className:q()(De.root,l)},v),Y)},Ke="SCUserConnectionsRequestsWidget",qe={root:`${Ke}-skeleton-root`},ze=(0,o.ZP)(Pe.Z,{name:Ke,slot:"SkeletonRoot"})((()=>({})));function He(e){return n.createElement(ze,Object.assign({className:qe.root},e))}const Xe={root:`${Ke}-root`,title:`${Ke}-title`,noResults:`${Ke}-no-results`,showMore:`${Ke}-show-more`,dialogRoot:`${Ke}-dialog-root`,endMessage:`${Ke}-end-message`},Ye=(0,o.ZP)(P.Z,{name:Ke,slot:"Root"})((()=>({}))),Ve=(0,o.ZP)(z.Z,{name:Ke,slot:"DialogRoot"})((()=>({})));const Je=function(e){const t=(0,H.Z)({props:e,name:Ke}),{autoHide:s=!1,limit:o=3,className:r,UserProps:a={},cacheStrategy:l=N.n2.NETWORK_ONLY,onHeightChange:c,onStateChange:d,DialogProps:m={},userId:f}=t,h=(0,g._T)(t,["autoHide","limit","className","UserProps","cacheStrategy","onHeightChange","onStateChange","DialogProps","userId"]),v=(0,G.LD)(),S=(0,O.ko)(),[C,y]=(0,n.useReducer)(R.Xi,{isLoadingNext:!1,next:null,cacheKey:I.hu(I.R4,f),cacheStrategy:l,visibleItems:o},R.Mv),[M,P]=(0,n.useState)(!1),T=(0,n.useMemo)((()=>Ae.Ao in S.preferences&&S.preferences[Ae.Ao].value),[S.preferences]),k=(0,n.useMemo)((()=>Ae.$0 in S.preferences&&S.preferences[Ae.$0].value),[S.preferences]),w=(0,B.Z)(),L=(0,ye.Z)(w.breakpoints.down("md")),$=(0,n.useMemo)((()=>()=>{C.initialized||C.isLoadingNext||(y({type:R.dK.LOADING_NEXT}),Me.Z.getUserConnectionRequests({limit:o}).then((e=>{y({type:R.dK.LOAD_NEXT_SUCCESS,payload:Object.assign(Object.assign({},e),{initialized:!0})})})).catch((e=>{y({type:R.dK.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),_.Y.error(U.J,e)})))}),[C.isLoadingNext,C.initialized,o,y]);(0,n.useEffect)((()=>{let e;if(v.user&&!k)return e=setTimeout($),()=>{e&&clearTimeout(e)}}),[v.user,T]),(0,n.useEffect)((()=>{M&&C.next&&C.results.length===o&&C.initialized&&(y({type:R.dK.LOADING_NEXT}),Me.Z.getUserConnectionRequests({offset:o,limit:10}).then((e=>{y({type:R.dK.LOAD_NEXT_SUCCESS,payload:e})})).catch((e=>{y({type:R.dK.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),_.Y.error(U.J,e)})))}),[M,C.next,C.results.length,C.initialized,o]),(0,n.useEffect)((()=>{c&&c()}),[C.results]),(0,n.useEffect)((()=>{k||!T&&!v.user||l===N.n2.NETWORK_ONLY&&d&&d({cacheStrategy:N.n2.CACHE_FIRST})}),[v.user,T]);const j=(0,n.useMemo)((()=>()=>{y({type:R.dK.LOADING_NEXT}),Q.Z.request({url:C.next,method:Z.Z.UserConnectionsRequests.method}).then((e=>{y({type:R.dK.LOAD_NEXT_SUCCESS,payload:e.data})}))}),[y,C.next,C.isLoadingNext,C.initialized]),D=(0,n.useMemo)((()=>()=>{v.refreshCounters()}),[v.refreshCounters]),W=()=>{P((e=>!e))};if(k||s&&!C.count&&C.initialized||!T&&!v.user)return n.createElement(X.Z,null);if(!C.initialized)return n.createElement(He,null);const x=n.createElement(E.Z,null,n.createElement(u.Z,{className:Xe.title,variant:"h5"},n.createElement(A.Z,{id:"ui.userConnectionsRequestsWidget.title",defaultMessage:"ui.userConnectionsRequestsWidget.title",values:{total:v.user.connection_requests_received_counter}})),C.count?n.createElement(n.Fragment,null,n.createElement(p.Z,null,C.results.slice(0,C.visibleItems).map((e=>n.createElement(b.ZP,{key:e.from_user.id},n.createElement(Le.Z,Object.assign({elevation:0,user:e.from_user,followConnectUserButtonProps:{followConnectUserButtonProps:{onChangeConnectionStatus:D}}},a)))))),C.count>C.visibleItems&&n.createElement(i.Z,{className:Xe.showMore,onClick:W},n.createElement(A.Z,{id:"ui.userConnectionsRequestsWidget.button.showAll",defaultMessage:"ui.userConnectionsRequestsWidget.button.showAll"}))):n.createElement(u.Z,{className:Xe.noResults,variant:"body2"},n.createElement(A.Z,{id:"ui.userConnectionsRequestsWidget.subtitle.noResults",defaultMessage:""})),M&&n.createElement(Ve,Object.assign({className:Xe.dialogRoot,title:n.createElement(A.Z,{defaultMessage:"ui.userConnectionsRequestsWidget.title",id:"ui.userConnectionsRequestsWidget.title",values:{total:v.user.connection_requests_received_counter}}),onClose:W,open:M},m),n.createElement(je.Z,{dataLength:C.results.length,next:j,hasMoreNext:Boolean(C.next),loaderNext:n.createElement($e.Z,Object.assign({elevation:0},a)),height:L?"100%":400,endMessage:n.createElement(u.Z,{className:Xe.endMessage},n.createElement(A.Z,{id:"ui.userConnectionsRequestsWidget.noMoreResults",defaultMessage:"ui.userConnectionsRequestsWidget.noMoreResults"}))},n.createElement(p.Z,null,C.results.map((e=>n.createElement(b.ZP,{key:e.from_user.id},n.createElement(Le.Z,Object.assign({elevation:0,user:e.from_user,followConnectUserButtonProps:{followConnectUserButtonProps:{onChangeConnectionStatus:D}}},a)))))))));return n.createElement(Ye,Object.assign({className:q()(Xe.root,r)},h),x)},Qe="SCUserConnectionsRequestsSentWidget",et={root:`${Qe}-skeleton-root`},tt=(0,o.ZP)(Pe.Z,{name:Qe,slot:"SkeletonRoot"})((()=>({})));function st(e){return n.createElement(tt,Object.assign({className:et.root},e))}const nt={root:`${Qe}-root`,title:`${Qe}-title`,noResults:`${Qe}-no-results`,showMore:`${Qe}-show-more`,dialogRoot:`${Qe}-dialog-root`,endMessage:`${Qe}-end-message`},ot=(0,o.ZP)(P.Z,{name:Qe,slot:"Root"})((()=>({}))),rt=(0,o.ZP)(z.Z,{name:Qe,slot:"DialogRoot"})((()=>({})));const at=function(e){const t=(0,H.Z)({props:e,name:Qe}),{autoHide:s=!1,limit:o=3,className:r,UserProps:a={},cacheStrategy:l=N.n2.NETWORK_ONLY,onHeightChange:c,onStateChange:d,DialogProps:m={},userId:f}=t,h=(0,g._T)(t,["autoHide","limit","className","UserProps","cacheStrategy","onHeightChange","onStateChange","DialogProps","userId"]),[v,S]=(0,n.useReducer)(R.Xi,{isLoadingNext:!1,next:null,cacheKey:I.hu(I.Gp,f),cacheStrategy:l,visibleItems:o},R.Mv),[y,M]=(0,n.useState)(!1),P=(0,G.LD)(),T=(0,O.ko)(),k=(0,n.useMemo)((()=>Ae.Ao in T.preferences&&T.preferences[Ae.Ao].value),[T.preferences]),w=(0,n.useMemo)((()=>Ae.$0 in T.preferences&&T.preferences[Ae.$0].value),[T.preferences]),L=(0,B.Z)(),$=(0,ye.Z)(L.breakpoints.down("md")),j=(0,n.useMemo)((()=>()=>{v.initialized||v.isLoadingNext||(S({type:R.dK.LOADING_NEXT}),Me.Z.getUserRequestConnectionsSent({limit:o}).then((e=>{S({type:R.dK.LOAD_NEXT_SUCCESS,payload:Object.assign(Object.assign({},e),{initialized:!0})})})).catch((e=>{S({type:R.dK.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),_.Y.error(U.J,e)})))}),[v.isLoadingNext,v.initialized,f,o,S]);(0,n.useEffect)((()=>{let e;if(!w&&P.user)return e=setTimeout(j),()=>{e&&clearTimeout(e)}}),[P.user,k,f]),(0,n.useEffect)((()=>{y&&v.next&&v.results.length===o&&v.initialized&&(S({type:R.dK.LOADING_NEXT}),Me.Z.getUserRequestConnectionsSent({offset:o,limit:10}).then((e=>{S({type:R.dK.LOAD_NEXT_SUCCESS,payload:e})})).catch((e=>{S({type:R.dK.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),_.Y.error(U.J,e)})))}),[y,v.next,v.results.length,v.initialized,o]),(0,n.useEffect)((()=>{c&&c()}),[v.results]),(0,n.useEffect)((()=>{(0,C.U)(f)&&!w&&(k||P.user)&&l===N.n2.NETWORK_ONLY&&d&&d({cacheStrategy:N.n2.CACHE_FIRST})}),[P.user,f,k]);const D=(0,n.useMemo)((()=>()=>{S({type:R.dK.LOADING_NEXT}),Q.Z.request({url:v.next,method:Z.Z.UserRequestConnectionsSent.method}).then((e=>{S({type:R.dK.LOAD_NEXT_SUCCESS,payload:e.data})}))}),[S,v.next,v.isLoadingNext,v.initialized]),W=(0,n.useMemo)((()=>()=>{P.refreshCounters()}),[P.refreshCounters]),x=()=>{M((e=>!e))};if(w||s&&!v.count&&v.initialized||!k&&!P.user||!f)return n.createElement(X.Z,null);if(!v.initialized)return n.createElement(st,null);const F=n.createElement(E.Z,null,n.createElement(u.Z,{className:nt.title,variant:"h5"},n.createElement(A.Z,{id:"ui.userConnectionsRequestsSentWidget.title",defaultMessage:"ui.userConnectionsRequestsSentWidget.title",values:{total:P.user.connection_requests_sent_counter}})),v.count?n.createElement(n.Fragment,null,n.createElement(p.Z,null,v.results.slice(0,v.visibleItems).map((e=>n.createElement(b.ZP,{key:e.to_user.id},n.createElement(Le.Z,Object.assign({elevation:0,user:e.to_user,followConnectUserButtonProps:{followConnectUserButtonProps:{onChangeConnectionStatus:W}}},a)))))),v.count>v.visibleItems&&n.createElement(i.Z,{className:nt.showMore,onClick:x},n.createElement(A.Z,{id:"ui.userConnectionsRequestsSentWidget.button.showAll",defaultMessage:"ui.userConnectionsRequestsSentWidget.button.showAll"}))):n.createElement(u.Z,{className:nt.noResults,variant:"body2"},n.createElement(A.Z,{id:"ui.userConnectionsRequestsSentWidget.subtitle.noResults",defaultMessage:""})),y&&n.createElement(rt,Object.assign({className:nt.dialogRoot,title:n.createElement(A.Z,{defaultMessage:"ui.userConnectionsRequestsSentWidget.title",id:"ui.userConnectionsRequestsSentWidget.title",values:{total:P.user.connection_requests_sent_counter}}),onClose:x,open:y},m),n.createElement(je.Z,{dataLength:v.results.length,next:D,hasMoreNext:Boolean(v.next),loaderNext:n.createElement($e.Z,Object.assign({elevation:0},a)),height:$?"100%":400,endMessage:n.createElement(u.Z,{className:nt.endMessage},n.createElement(A.Z,{id:"ui.userConnectionsRequestsSentWidget.noMoreResults",defaultMessage:"ui.userConnectionsRequestsSentWidget.noMoreResults"}))},n.createElement(p.Z,null,v.results.map((e=>n.createElement(b.ZP,{key:e.to_user.id},n.createElement(Le.Z,Object.assign({elevation:0,user:e.to_user,followConnectUserButtonProps:{followConnectUserButtonProps:{onChangeConnectionStatus:W}}},a)))))))));return n.createElement(ot,Object.assign({className:q()(nt.root,r)},h),F)};var it=s(49901),ut=s(5101),lt=s(93946),ct=s(39005),dt=s(25464),mt=s(54776),gt=s(98619),pt=s(59334),Et=s(67720),bt=s(18972),ft=s(65580),Zt=s(77488),ht=s(78518);const vt="SCUserInfo",St={root:`${vt}-skeleton-root`,field:`${vt}-field`},Nt=(0,o.ZP)(r.Z,{name:vt,slot:"SkeletonRoot"})((()=>({})));const _t=function(){return n.createElement(Nt,{className:St.root},Array.from({length:3}).map(((e,t)=>n.createElement(r.Z,{className:St.field,key:t},n.createElement(u.Z,{variant:"h6"},n.createElement(T.Z,{animation:"wave",sx:{height:20,width:"50%"}})),n.createElement(u.Z,{variant:"body2"},n.createElement(T.Z,{animation:"wave",sx:{height:20,width:"80%"}}))))))};var Ct=s(42980),Gt=s(86558);const Ot=(0,ue.vU)({realName:{id:"ui.userInfo.realName",defaultMessage:"ui.userInfo.realName"},dateJoined:{id:"ui.userInfo.dateJoined",defaultMessage:"ui.userInfo.dateJoined"},bio:{id:"ui.userInfo.bio",defaultMessage:"ui.userInfo.bio"},location:{id:"ui.userInfo.location",defaultMessage:"ui.userInfo.location"},dateOfBirth:{id:"ui.userInfo.dateOfBirth",defaultMessage:"ui.userInfo.dateOfBirth"},description:{id:"ui.userInfo.description",defaultMessage:"ui.userInfo.description"},gender:{id:"ui.userInfo.gender",defaultMessage:"ui.userInfo.gender"},website:{id:"ui.userInfo.website",defaultMessage:"ui.userInfo.website"},tags:{id:"ui.userInfo.website",defaultMessage:"ui.userInfo.website"},fieldLink:{id:"ui.userInfo.fieldLink",defaultMessage:"ui.userInfo.fieldLink"}}),It={root:`${vt}-root`,field:`${vt}-field`},Rt=(0,o.ZP)(r.Z,{name:vt,slot:"Root"})((()=>({})));const yt=function(e){const t=(0,H.Z)({props:e,name:vt}),{className:s=null,userId:o=null,user:a=null,fields:i=[...ht.t]}=t,l=(0,g._T)(t,["className","userId","user","fields"]),{scUser:c}=(0,Ue.Z)({id:o,user:a}),d=(0,le.Z)(),m=(0,O.ko)(),p=(0,n.useMemo)((()=>{if(m.preferences&&Ae.kK in m.preferences)try{return JSON.parse(m.preferences[Ae.kK].value)}catch(e){return _.Y.error(U.J,"Error on parse user metadata."),{}}return null}),[m.preferences]),E=[...i,...Object.keys(p)],b=(e,t)=>{switch(t){case Ct._V.DATE_JOINED:case Ct._V.DATE_OF_BIRTH:return`${d.formatDate(e[t],{year:"numeric",month:"numeric",day:"numeric"})}`;case Ct._V.TAGS:return n.createElement(Gt.Z,{tags:e.tags.filter((e=>e.visible)),type:Gt.x.LIST,direction:"row",TagChipProps:{clickable:!1,disposable:!1}});case Ct._V.WEBSITE:return n.createElement("a",{href:e[t],target:"_blank"},e[t]);default:return e[t]}};return c&&p?0===E.length?null:n.createElement(Rt,Object.assign({className:q()(It.root,s)},l),E.map((e=>c[e]?e===Ct._V.TAGS?c[e].length>0?n.createElement(r.Z,{key:e,className:It.field},b(c,e)):null:n.createElement(r.Z,{key:e,className:It.field},n.createElement(u.Z,{variant:"h6"},p[e]?p[e].label:d.formatMessage(Ot[(0,Zt.eV)(e)])),n.createElement(u.Z,{variant:"body2"},b(c,e))):null))):n.createElement(_t,null)},Mt={root:`${vt}-dialog-root`,caption:`${vt}-caption`,avatar:`${vt}-avatar`,username:`${vt}-username`},Ut=(0,o.ZP)(z.Z,{name:vt,slot:"DialogRoot"})((()=>({})));const At=function(e){const t=(0,H.Z)({props:e,name:vt}),{className:s,userId:o=null,user:a=null,UserInfoProps:i={}}=t,l=(0,g._T)(t,["className","userId","user","UserInfoProps"]),{scUser:c}=(0,Ue.Z)({id:o,user:a}),d=n.createElement(r.Z,{className:Mt.caption},n.createElement(V.Z,{className:Mt.avatar,src:null==c?void 0:c.avatar}),n.createElement(u.Z,{className:Mt.username,variant:"h6"},(null==c?void 0:c.real_name)?null==c?void 0:c.real_name:null==c?void 0:c.username));return n.createElement(Ut,Object.assign({title:n.createElement(A.Z,{id:"ui.userInfoDialog.title",defaultMessage:"ui.userInfoDialog.title"}),subtitle:d,className:q()(Mt.root,s)},l),c?n.createElement(yt,Object.assign({},i,{userId:o,user:c})):n.createElement(_t,null))};var Pt=s(27560),Bt=s(20377);const Tt="SCUserActionIconButton",kt={root:`${Tt}-root`,drawerRoot:`${Tt}-drawer-root`,menuRoot:`${Tt}-menu-root`},wt=(0,o.ZP)(lt.Z,{name:Tt,slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({}))),Lt=(0,o.ZP)(ct.Z,{name:Tt,slot:"Root",overridesResolver:(e,t)=>t.drawerRoot})((({theme:e})=>({}))),$t=(0,o.ZP)(dt.Z,{name:Tt,slot:"Root",overridesResolver:(e,t)=>t.menuRoot})((({theme:e})=>({}))),jt=n.forwardRef((function(e,t){return n.createElement(mt.Z,Object.assign({direction:"up",ref:t},e))}));const Dt=function(e){const t=(0,H.Z)({props:e,name:Tt}),{className:s=null,userId:o=null,user:r=null,items:a=[]}=t,i=(0,g._T)(t,["className","userId","user","items"]),u=(0,G.LD)(),c=(0,me.RM)(),[d,m]=(0,n.useState)(null),[E,f]=(0,n.useState)(!1),[Z,h]=(0,n.useState)(!1),[v,S]=(0,n.useState)(null),[N,_]=(0,n.useState)(!1),{scUser:C}=(0,Ue.Z)({id:o,user:r}),O=(0,B.Z)(),I=(0,ye.Z)(O.breakpoints.down("md")),{enqueueSnackbar:R}=(0,Bt.Ds)(),y=e=>{m(e.currentTarget)},M=()=>{m(null)},U=()=>{f(!0),m(null)},P=()=>{h(!0),u.managers.blockedUsers.block(C).then((e=>{S(e)})).then((()=>h(!1))).catch((()=>{R(n.createElement(A.Z,{id:"ui.common.action.notPermitted",defaultMessage:"ui.common.action.notPermitted"}),{variant:"warning",autoHideDuration:7e3}),h(!1),T()}))},T=(0,n.useMemo)((()=>()=>{_((e=>!e)),M()}),[_,M]),k=u.user&&C.id===u.user.id,w=(0,n.useMemo)((()=>u.user&&(null==u?void 0:u.user.role)),[u.user]),L=(0,n.useMemo)((()=>w&&(w.includes("admin")||w.includes("moderator"))&&!k),[w,k]);if((0,n.useEffect)((()=>{d&&null===v&&C&&S(u.managers.blockedUsers.isBlocked(C))}),[d,C]),!u.user)return null;const $=()=>I?[...a.map(((e,t)=>n.createElement(b.ZP,{key:t},n.createElement(gt.Z,{component:ae.Z,to:e.to},n.createElement(pt.Z,{primary:e.label}))))),n.createElement(b.ZP,{key:"info"},n.createElement(gt.Z,{onClick:U},n.createElement(pt.Z,{primary:n.createElement(A.Z,{defaultMessage:"ui.userActionIconButton.information",id:"ui.userActionIconButton.information"})}))),...k?[]:[n.createElement(Et.Z,{key:"divider"}),n.createElement(b.ZP,{key:"hide"},n.createElement(gt.Z,{onClick:P,disabled:Z||C.community_badge||!v&&ft.B2(C)},n.createElement(pt.Z,{primary:v?n.createElement(A.Z,{defaultMessage:"ui.userActionIconButton.show",id:"ui.userActionIconButton.show"}):n.createElement(A.Z,{defaultMessage:"ui.userActionIconButton.hide",id:"ui.userActionIconButton.hide"})}))),...L?[n.createElement(Et.Z,{key:"divider_moderate"}),n.createElement(b.ZP,{key:"moderate"},n.createElement(gt.Z,{component:ae.Z,to:`${c.settings.portal}/platform/access?next=/moderation/user/?username=${C.username}`},n.createElement(pt.Z,{primary:n.createElement(A.Z,{defaultMessage:"ui.userActionIconButton.moderate",id:"ui.userActionIconButton.moderate"})})))]:[]]]:[...a.map(((e,t)=>n.createElement(bt.Z,{key:t,component:ae.Z,to:e.to,onClick:M},e.label))),n.createElement(bt.Z,{key:"info",onClick:U},n.createElement(A.Z,{defaultMessage:"ui.userActionIconButton.information",id:"ui.userActionIconButton.information"})),...k?[]:[n.createElement(Et.Z,{key:"divider"}),n.createElement(bt.Z,{key:"hide",onClick:T,disabled:Z||C.community_badge},v?n.createElement(A.Z,{defaultMessage:"ui.userActionIconButton.show",id:"ui.userActionIconButton.show"}):n.createElement(A.Z,{defaultMessage:"ui.userActionIconButton.hide",id:"ui.userActionIconButton.hide"})),...L?[n.createElement(Et.Z,{key:"divider_moderate"}),n.createElement(bt.Z,{key:"moderate",component:ae.Z,to:`${c.settings.portal}/platform/access?next=/moderation/user/?username=${C.username}`,onClick:M},n.createElement(A.Z,{defaultMessage:"ui.userActionIconButton.moderate",id:"ui.userActionIconButton.moderate"}))]:[]]];return n.createElement(n.Fragment,null,n.createElement(wt,Object.assign({className:q()(kt.root,s)},i,{onClick:y}),n.createElement(l.Z,null,"more_vert")),I?n.createElement(Lt,{className:kt.drawerRoot,anchor:"bottom",open:Boolean(d),onClose:M,onOpen:y,disableSwipeToOpen:!0},n.createElement(p.Z,null,$())):n.createElement($t,{className:kt.menuRoot,anchorEl:d,open:Boolean(d),onClose:M},$()),n.createElement(At,{userId:o,user:C,open:E,onClose:()=>{f(!1)}}),N&&n.createElement(Pt.Z,{open:N,isUpdating:Z,TransitionComponent:jt,keepMounted:!0,title:v?n.createElement(A.Z,{defaultMessage:"ui.userActionIconButton.show",id:"ui.userActionIconButton.show"}):n.createElement(A.Z,{defaultMessage:"ui.userActionIconButton.hide",id:"ui.userActionIconButton.hide"}),content:v?n.createElement(A.Z,{defaultMessage:"ui.userActionIconButton.dialogShowAction",id:"ui.userActionIconButton.dialogShowAction"}):n.createElement(A.Z,{defaultMessage:"ui.userActionIconButton.dialogHideAction",id:"ui.userActionIconButton.dialogHideAction"}),onConfirm:P,onClose:()=>_(!1)}))};function Wt({user:e=null,blockedByUser:t=null,sync:s=!0}){const[o,r]=(0,n.useState)(null),[a,i]=(0,n.useState)(!0),[u,l]=(0,n.useState)(null),c=(0,G.LD)(),d=(0,n.useMemo)((()=>(e,t=!0)=>(t&&i(!0),Me.Z.checkUserHiddenBy(e.id).then((e=>(t&&i(!1),r(e.is_hidden_by),Promise.resolve(e.is_hidden_by)))).catch((e=>{t&&i(!1),_.Y.error(J.h,"Unable to load user blocked by."),_.Y.error(J.h,e),l(e)})))),[a,r]);return(0,n.useEffect)((()=>{e&&null===o&&(c.user?c.user.id!==e.id?d(e):(r(!1),i(!1)):null===c.user&&(r(t),i(!1)))}),[c.user,e,d,o,a]),(0,n.useEffect)((()=>{c.user||null===o||r(t)}),[c.user,o,t]),(0,n.useEffect)((()=>{let t;if(c.user&&null!==o&&s)return t=setInterval((()=>{d(e,!1)}),5e3),()=>{t&&clearInterval(t)}}),[c.user,e,d,o]),{blockedBy:o,loading:a,error:u}}const xt="SCUserProfileBlocked",Ft={root:`${xt}-root`,info:`${xt}-info`,button:`${xt}-button`},Kt=(0,o.ZP)(r.Z,{name:xt,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({textAlign:"center"})));const qt=function(e){const t=(0,H.Z)({props:e,name:xt}),{className:s=null,userId:o=null,user:r=null,blockedByUser:a=null,syncBlockedByUserStatus:i=!1}=t,l=(0,g._T)(t,["className","userId","user","blockedByUser","syncBlockedByUserStatus"]),c=(0,G.LD)(),{enqueueSnackbar:d}=(0,Bt.Ds)(),{scUser:m}=(0,Ue.Z)({id:o,user:r}),{blockedBy:p,loading:E}=Wt({user:m,blockedByUser:a,sync:i}),b=(0,n.useMemo)((()=>c.user&&(null==m?void 0:m.id)===c.user.id),[c.user,m]),f=(0,n.useMemo)((()=>()=>{c.managers.blockedUsers.block(m).catch((e=>{_.Y.error(U.J,e),d(n.createElement(A.Z,{id:"ui.common.error.action",defaultMessage:"ui.common.error.action"}),{variant:"error",autoHideDuration:3e3})}))}),[c.managers.blockedUsers,m]);return m&&c.user&&!E?n.createElement(Kt,Object.assign({className:q()(Ft.root,s)},l),n.createElement(Et.Z,null),!b&&p&&n.createElement(u.Z,{variant:"body1",className:Ft.info},n.createElement(A.Z,{id:"ui.userProfileBlocked.blockedUserBy",defaultMessage:"ui.userProfileBlocked.blockedUserBy"})),!b&&c.managers.blockedUsers.isBlocked(m)&&n.createElement(n.Fragment,null,n.createElement(u.Z,{variant:"body1",className:Ft.info},n.createElement(A.Z,{id:"ui.userProfileBlocked.blockedUser",defaultMessage:"ui.userProfileBlocked.blockedUser"})),n.createElement(ge.Z,{variant:"contained",className:Ft.button,loading:c.managers.blockedUsers.loading,disabled:c.managers.blockedUsers.loading,onClick:f},n.createElement(A.Z,{id:"ui.userProfileBlocked.unBlockUser",defaultMessage:"ui.userProfileBlocked.unBlockUser"})))):null};var zt=s(51575);const Ht="SCUserCounters",Xt={root:`${Ht}-root`,button:`${Ht}-button`},Yt=(0,o.ZP)(r.Z,{name:Ht,slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({})));const Vt=function(e){const t=(0,H.Z)({props:e,name:Ht}),{className:s=null,userId:o=null,user:r=null}=t,a=(0,g._T)(t,["className","userId","user"]),u=(0,re.sy)(),l=(0,n.useContext)(O.Tt),c=Ae.$0 in l.preferences&&l.preferences[Ae.$0].value,d=(0,G.LD)(),{scUser:m,refresh:p,refreshing:E}=(0,Ue.Z)({id:o,user:r}),b=(0,n.useMemo)((()=>d.user&&(null==m?void 0:m.id)===d.user.id),[d.user,m]),f=m?m.id:null;return(0,te.F_)((()=>{!f||!d.user||d.managers.followed.isLoading(m)||d.managers.connections.isLoading(m)||E||p().catch((()=>{}))}),[f,d.user,d.managers.connections.connections,d.managers.followed.followed.length]),(0,te.F_)((()=>{b&&p().catch((()=>{}))}),[b,d.managers.categories.categories.length]),void 0!==d.user&&m?n.createElement(Yt,Object.assign({className:q()(Xt.root,s)},a),c?n.createElement(n.Fragment,null,n.createElement(i.Z,{className:Xt.button,variant:"text",component:ae.Z,to:u.url(ie.USER_PROFILE_FOLLOWINGS_ROUTE_NAME,m)},n.createElement(A.Z,{id:"ui.userCounters.followings",defaultMessage:"ui.userCounters.followings",values:{count:null==m?void 0:m.followings_counter,b:e=>n.createElement("strong",null,e)}})),n.createElement(zt.Z,null),n.createElement(i.Z,{className:Xt.button,variant:"text",component:ae.Z,to:u.url(ie.USER_PROFILE_FOLLOWERS_ROUTE_NAME,m)},n.createElement(A.Z,{id:"ui.userCounters.followers",defaultMessage:"ui.userCounters.followers",values:{count:null==m?void 0:m.followers_counter,b:e=>n.createElement("strong",null,e)}}))):n.createElement(i.Z,{className:Xt.button,variant:"text",component:ae.Z,to:u.url(ie.USER_PROFILE_CONNECTIONS_ROUTE_NAME,m)},n.createElement(A.Z,{id:"ui.userCounters.connections",defaultMessage:"ui.userCounters.connections",values:{count:null==m?void 0:m.connections_counter,b:e=>n.createElement("strong",null,e)}})),n.createElement(zt.Z,null),n.createElement(i.Z,{className:Xt.button,variant:"text",component:ae.Z,to:u.url(ie.USER_PROFILE_CATEGORIES_ROUTE_NAME,m)},n.createElement(A.Z,{id:"ui.userCounters.categories",defaultMessage:"ui.userCounters.categories",values:{count:null==m?void 0:m.categories_counter,b:e=>n.createElement("strong",null,e)}}))):null};var Jt=s(8455),Qt=s(76994),es=s(41298),ts=s(34388);const ss="SCUserProfileTemplate",ns={root:`${ss}-skeleton-root`},os=(0,o.ZP)(r.Z,{name:ss,slot:"SkeletonRoot"})((()=>({})));function rs(){return n.createElement(os,{className:ns.root},n.createElement(es.Z,null),n.createElement(ts.Z,null))}const as={root:`${ss}-root`,counters:`${ss}-counters`,tags:`${ss}-tags`,info:`${ss}-info`,feed:`${ss}-feed`,actions:`${ss}-actions`},is=(0,o.ZP)(r.Z,{name:ss,slot:"Root"})((()=>({}))),us=[{type:"widget",component:c.Z,componentProps:{},column:"right",position:0},{type:"widget",component:d.Z,componentProps:{},column:"right",position:1},{type:"widget",component:m.Z,componentProps:{},column:"right",position:2},{type:"widget",component:Ie,componentProps:{},column:"right",position:3}],ls=[{type:"widget",component:Re.Z,componentProps:{},column:"right",position:-1}],cs=[{type:"widget",component:c.Z,componentProps:{},column:"right",position:0},{type:"widget",component:Fe,componentProps:{},column:"right",position:1},{type:"widget",component:Ie,componentProps:{},column:"right",position:2}],ds=[{type:"widget",component:Re.Z,componentProps:{},column:"right",position:-1},{type:"widget",component:Je,componentProps:{autoHide:!0},column:"right",position:2},{type:"widget",component:at,componentProps:{autoHide:!0},column:"right",position:3}];const ms=function(e){const t=(0,H.Z)({props:e,name:ss}),{id:s="user_profile",className:o,user:r,userId:c,startActions:d=null,endActions:m=null,viewStartActions:g=null,viewEndActions:p=null,editStartActions:E=null,editEndActions:b=null,widgets:f=null,FeedObjectProps:Z,FeedSidebarProps:h,UserProfileHeaderProps:v={},onEditClick:S=null,UserFeedProps:N={}}=t,_=(0,G.LD)(),C=(0,O.ko)(),I=(0,re.sy)(),{features:R}=(0,O.ko)(),[M,U]=(0,n.useState)(void 0),{scUser:P}=(0,Ue.Z)({id:c,user:r}),{blockedBy:B,loading:T}=Wt({user:P}),k=(0,le.Z)(),w=(0,n.useMemo)((()=>R.includes(y.$.TAGGING)),[R]),L=(0,n.useMemo)((()=>_.user&&(null==P?void 0:P.id)===_.user.id),[_.user,P]),$=(0,n.useMemo)((()=>Ae.$0 in C.preferences&&C.preferences[Ae.$0].value),[C.preferences]),j=(0,n.useMemo)((()=>R.includes(y.$.PRIVATE_MESSAGING)),[R]),D=(0,n.useMemo)((()=>{var e,t;if(null!==f)return f;if(!P)return[];let s=[];return s=$&&(null===(e=null==_?void 0:_.user)||void 0===e?void 0:e.id)===P.id?[...us,...ls]:$?[...us]:$||(null===(t=null==_?void 0:_.user)||void 0===t?void 0:t.id)!==P.id?[...cs]:[...cs,...ds],s.map((e=>Object.assign(Object.assign({},e),{componentProps:Object.assign(Object.assign({},e.componentProps),{userId:P.id})})))}),[f,$,null==_?void 0:_.user,P]);if((0,n.useEffect)((()=>{r&&Object.is(null!=M?M:null,null)&&(L?U(!1):$&&_.managers.followers.isFollower?U(_.managers.followers.isFollower(r)):!$&&_.managers.connections.status&&U("connected"===_.managers.connections.status(r)))}),[M,_.managers.followers,_.managers.connections,$,L,r,_.user]),!P)return n.createElement(rs,null);L||(N.FeedProps=Object.assign({HeaderComponent:null},N.FeedProps));let W=[];return j&&!L&&r&&r.can_send_pm_to&&(W=[{label:n.createElement(A.Z,{defaultMessage:"templates.userProfile.send.pm",id:"templates.userProfile.send.pm"}),to:I.url(ie.USER_PRIVATE_MESSAGES_ROUTE_NAME,P)}]),n.createElement(is,{id:s,className:q()(as.root,o)},n.createElement(it.Z,Object.assign({user:P},v,{actions:!L&&P&&Boolean(_.user&&_.managers.blockedUsers.isBlocked(P)||B)?null:n.createElement(a.Z,{key:`actions_${P.id}`,direction:"row",spacing:2,className:as.actions},d,L?E:g,L?n.createElement(i.Z,{variant:"contained",color:"secondary",onClick:()=>{S&&S(P)}},n.createElement(A.Z,{defaultMessage:"templates.userProfile.edit",id:"templates.userProfile.edit"})):n.createElement(ut.Z,{user:P}),L?b:p,m,n.createElement(Dt,{user:P,items:W}))})),void 0===_.user||_.user&&(T&&null===B||_.managers.blockedUsers.isLoading())?n.createElement(ts.Z,null):n.createElement(n.Fragment,null,T||_.user&&_.managers.blockedUsers.loading?null:n.createElement(n.Fragment,null,!L&&P&&Boolean(_.user&&_.managers.blockedUsers.isBlocked(P)||B)?n.createElement(qt,{user:P,blockedByUser:B}):n.createElement(n.Fragment,null,n.createElement(Vt,{className:as.counters,userId:c,user:P}),P.date_joined&&n.createElement(u.Z,{className:as.info},n.createElement(A.Z,{id:"templates.userProfile.dateJoined",defaultMessage:"templates.userProfile.dateJoined",values:{date:k.formatDate(P.date_joined,{year:"numeric",month:"long"})}})),P.location&&n.createElement(u.Z,{className:as.info},n.createElement(l.Z,null,"add_location_alt")," ",P.location),w&&n.createElement(a.Z,{key:`tags_${P.id}`,direction:"row",spacing:2,className:as.tags},P.tags.filter((e=>e.visible)).map((e=>n.createElement(Jt.Z,{key:e.id,tag:e,clickable:!1,disposable:!1})))),n.createElement(Qt.Z,Object.assign({key:`feed_${P.id}`,className:as.feed,user:P,widgets:D,FeedObjectProps:Z,FeedSidebarProps:h},N))))))}},19326:(e,t,s)=>{s.d(t,{Z:()=>B});var n=s(97582),o=s(67294),r=s(90948),a=s(44267),i=s(15861),u=s(62023),l=s(87918),c=s(25662),d=s(24243),m=s(24085),g=s(68787),p=s(66380),E=s(85472),b=s(44012),f=s(41538),Z=s(97265),h=s(12132),v=s(94184),S=s.n(v),N=s(63902),_=s(29628),C=s(54545),G=s(88078);const O="SCLoyaltyProgramWidget",I={root:`${O}-skeleton-root`,title:`${O}-title`,content:`${O}-content`,chip:`${O}-chip`,points:`${O}-points`,actions:`${O}-actions`},R=(0,r.ZP)(N.Z,{name:O,slot:"SkeletonRoot"})((()=>({})));function y(){return o.createElement(R,{className:I.root},o.createElement(a.Z,{className:I.content},o.createElement(i.Z,{className:I.title},o.createElement(G.Z,{animation:"wave",height:25,width:"40%",variant:"rectangular"}))),o.createElement(u.Z,{className:I.actions},o.createElement(i.Z,{className:I.points},o.createElement(G.Z,{animation:"wave",variant:"circular",width:60,height:30,className:I.chip}),o.createElement(G.Z,{animation:"wave",height:20,width:90,variant:"rectangular"})),o.createElement(c.Z,{disabled:!0,variant:"outlined",size:"small"},o.createElement(G.Z,{animation:"wave",height:20,width:70,variant:"text"}))))}var M=s(75459),U=s(99960);const A={root:`${O}-root`,title:`${O}-title`,actions:`${O}-actions`,points:`${O}-points`,discoverMore:`${O}-discover-more`},P=(0,r.ZP)(N.Z,{name:O,slot:"Root"})((()=>({})));const B=function(e){const t=(0,_.Z)({props:e,name:O}),{className:s,userId:r=null}=t,v=(0,n._T)(t,["className","userId"]),N=(0,o.useContext)(g.K8),G=(0,p.ko)(),I=(0,f.sy)(),[R,B]=(0,o.useState)(null),[T,k]=(0,o.useState)(!0),w=N.user?N.user.id:null,L=(0,o.useMemo)((()=>E.v0 in G.preferences&&G.preferences[E.v0].value),[G.preferences]);return(0,o.useEffect)((()=>{L&&w&&d.Z.request({url:m.Z.GetUserLoyaltyPoints.url({id:N.user.id}),method:m.Z.GetUserLoyaltyPoints.method}).then((e=>{B(e.data.points),k(!1)})).catch((e=>{k(!1),U.Y.error(M.J,e),console.log(e)}))}),[w,L]),!L||!N.user||r&&r!==N.user.id?o.createElement(C.Z,null):T?o.createElement(y,null):o.createElement(P,Object.assign({className:S()(A.root,s)},v),o.createElement(a.Z,null,o.createElement(i.Z,{className:A.title},o.createElement(b.Z,{id:"ui.loyaltyProgramWidget.title",defaultMessage:"ui.loyaltyProgramWidget.title"}))),o.createElement(u.Z,{className:A.actions},o.createElement(i.Z,{className:A.points},o.createElement(l.Z,{size:"medium",component:"span",label:R}),o.createElement(b.Z,{id:"ui.loyaltyProgramWidget.points",defaultMessage:"ui.loyaltyProgramWidget.points"})),o.createElement(c.Z,{size:"small",variant:"outlined",className:A.discoverMore,component:Z.Z,to:I.url(h.LOYALTY_ROUTE_NAME,{})},o.createElement(b.Z,{id:"ui.loyaltyProgramWidget.discover",defaultMessage:"ui.loyaltyProgramWidget.discover"}))))}},78518:(e,t,s)=>{s.d(t,{Z:()=>r,t:()=>o});var n=s(42980);const o=[n._V.REAL_NAME,n._V.DATE_OF_BIRTH,n._V.BIO,n._V.WEBSITE,n._V.DESCRIPTION],r=[n.K_.NOTIFICATION,n.K_.INTERACTION,n.K_.PRIVATE_MESSAGE]},42980:(e,t,s)=>{var n,o,r;s.d(t,{Bo:()=>r,K_:()=>o,_V:()=>n}),function(e){e.USERNAME="username",e.REAL_NAME="real_name",e.DATE_JOINED="date_joined",e.BIO="bio",e.LOCATION="location",e.DATE_OF_BIRTH="date_of_birth",e.DESCRIPTION="description",e.GENDER="gender",e.WEBSITE="website",e.TAGS="tags",e.SOCIAL_ASSOCIATIONS="social_associations"}(n||(n={})),function(e){e.NOTIFICATION="notification",e.INTERACTION="interaction",e.PRIVATE_MESSAGE="private_message"}(o||(o={})),function(e){e.GOOGLE="google",e.FACEBOOK="facebook",e.TWITTER="twitter",e.LINKEDIN="linkedin"}(r||(r={}))}}]);