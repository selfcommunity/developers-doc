"use strict";(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[92274],{36175:(e,t,s)=>{s.d(t,{F:()=>o});const o={user:{username:"beatrice",password:"Password!!Beatrice2021",client_id:"XJjPE54IBBjhibs0Rf0wZ969cZNPq6WjC02FrkaM",grant_type:"password"},portal:"https://internal.selfcommunity.io/mkg2zxd0"}},37180:(e,t,s)=>{s.d(t,{A:()=>g});var o=s(96540),n=s(36175),i=s(75251);function a(e,t){void 0===e&&(e=""),void 0===t&&(t={});const s=Object.keys(t).map((e=>encodeURIComponent(e)+"="+encodeURIComponent(t[e]))).join("&");return fetch(e,{method:"POST",headers:{accept:"application/json","content-type":"application/x-www-form-urlencoded"},body:s})}function r(){if((0,i.A)()){const e={refresh_token:JSON.parse(window.localStorage.getItem("token")).refresh_token,client_id:n.F.user.client_id,grant_type:"refresh_token"};return a(`${n.F.portal}/oauth/token/`,e).then((e=>e.json())).then((e=>({accessToken:e.access_token,refreshToken:e.refresh_token,tokenType:e.token_type,expiresIn:e.expires_in}))).catch((e=>Promise.reject(e)))}}function c(){const e=(0,i.A)(),[t,s]=(0,o.useState)(e?JSON.parse(window.localStorage.getItem("token")):"");return(0,o.useEffect)((()=>{e&&(!t||1e3*t.expiresIn<Date.now()?a(`${n.F.portal}/oauth/token/`,n.F.user).then((e=>e.json())).then((e=>({accessToken:e.access_token,refreshToken:e.refresh_token,tokenType:e.token_type,expiresIn:e.expires_in}))).catch((e=>e)).then((e=>{s(e)})):e&&s(JSON.parse(window.localStorage.getItem("token"))))}),[e]),(0,o.useEffect)((()=>{e&&window.localStorage.setItem("token",JSON.stringify(t))}),[e,t]),t}var u=s(45284),l=s(51151),d=s(73906),b=s(74848);function g(e){let{children:t}=e;const s=c(),o={portal:n.F.portal,locale:{default:"en"},session:{type:"OAuth",clientId:n.F.user.client_id,authToken:s,handleRefreshToken:r},theme:l.Ay,handleAnonymousAction:()=>{alert("Anonymous action")}};return(0,b.jsx)(d.A,{children:()=>(0,b.jsx)(u.Ay,{conf:o,children:t})})}},71359:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>de,contentTitle:()=>le,default:()=>he,frontMatter:()=>ue,metadata:()=>o,toc:()=>be});const o=JSON.parse('{"id":"sdk/community-js/react-ui/Components/IncubatorsList","title":"Incubators List","description":"The Incubators List component renders a list of incubators.","source":"@site/docs/sdk/community-js/react-ui/Components/IncubatorsList.mdx","sourceDirName":"sdk/community-js/react-ui/Components","slug":"/sdk/community-js/react-ui/Components/IncubatorsList","permalink":"/docs/sdk/community-js/react-ui/Components/IncubatorsList","draft":false,"unlisted":false,"editUrl":"https://github.com/selfcommunity/developers-doc/tree/main/docs/sdk/community-js/react-ui/Components/IncubatorsList.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_label":"Incubators List","sidebar_position":1,"title":"Incubators List"},"sidebar":"sdkSidebar","previous":{"title":"Incubator Suggestion","permalink":"/docs/sdk/community-js/react-ui/Components/IncubatorSuggestion"},"next":{"title":"Inline Composer","permalink":"/docs/sdk/community-js/react-ui/Components/InlineComposer"}}');var n=s(74848),i=s(28453),a=s(37180),r=s(31635),c=s(96540),u=s(11848),l=s(44675),d=s(90508),b=s(25292),g=s(71194),h=s(47859),m=s(4671),p=s(40059),j=s(67011),A=s(28820),f=s(36870),x=s(42942),I=s(40462),S=s(29368),k=s(12275);class y{static getAllIncubators(e,t){const s=(0,k._)(e);return(0,I.A)(Object.assign(Object.assign({},t),{url:`${S.A.GetAllIncubators.url({})}?${s.toString()}`,method:S.A.GetAllIncubators.method}))}static searchIncubators(e,t){const s=(0,k._)(e);return(0,I.A)(Object.assign(Object.assign({},t),{url:`${S.A.SearchIncubators.url({})}?${s.toString()}`,method:S.A.SearchIncubators.method}))}static getSpecificIncubator(e,t){return(0,I.A)(Object.assign(Object.assign({},t),{url:S.A.GetASpecificIncubator.url({id:e}),method:S.A.GetASpecificIncubator.method}))}static createIncubator(e,t){return(0,I.A)(Object.assign(Object.assign({},t),{url:S.A.CreateAnIncubator.url({}),method:S.A.CreateAnIncubator.method,data:e}))}static getIncubatorSubscribers(e,t){return(0,I.A)(Object.assign(Object.assign({},t),{url:S.A.GetIncubatorSubscribers.url({id:e}),method:S.A.GetIncubatorSubscribers.method}))}static subscribeToIncubator(e,t){return(0,I.A)(Object.assign(Object.assign({},t),{url:S.A.SubscribeToIncubator.url({id:e}),method:S.A.SubscribeToIncubator.method}))}static checkIncubatorSubscription(e,t){return(0,I.A)(Object.assign(Object.assign({},t),{url:S.A.CheckIncubatorSubscription.url({id:e}),method:S.A.CheckIncubatorSubscription.method}))}}class _{static getAllIncubators(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return y.getAllIncubators(e,t)}))}static searchIncubators(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return y.searchIncubators(e,t)}))}static getSpecificIncubator(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return y.getSpecificIncubator(e,t)}))}static createIncubator(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return y.createIncubator(e,t)}))}static getIncubatorSubscribers(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return y.getIncubatorSubscribers(e,t)}))}static subscribeToIncubator(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return y.subscribeToIncubator(e,t)}))}static checkIncubatorSubscription(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return y.checkIncubatorSubscription(e,t)}))}}var O=s(13550),v=s(28692),C=s(94520),L=s(64933),N=s(86857);const w="SCIncubatorListWidget",T={root:`${w}-skeleton-root`,list:`${w}-list`},M=(0,u.Ay)(N.A,{name:w,slot:"SkeletonRoot"})((()=>({})));function D(e){return(0,n.jsx)(M,Object.assign({className:T.root},e,{children:(0,n.jsx)(b.A,{children:(0,n.jsx)(A.A,Object.assign({className:T.list},{children:[...Array(4)].map(((e,t)=>(0,n.jsx)(L.A,{elevation:0},t)))}))})}))}var W=s(15906),E=s(58065),$=s(19546),R=s.n($),P=s(29251),F=s(43749),B=s(42528),z=s(79197),U=s(27885),G=s(6442),X=s(81455),Q=s(43581),q=s(2877),H=s(58662);const J=(0,U.YK)({name:{id:"ui.incubatorListWidget.createIncubatorDialog.formPlaceholder.name",defaultMessage:"ui.incubatorListWidget.createIncubatorDialog.formPlaceholder.name"},slogan:{id:"ui.incubatorListWidget.createIncubatorDialog.formPlaceholder.slogan",defaultMessage:"ui.incubatorListWidget.createIncubatorDialog.formPlaceholder.slogan"}}),K={root:`${w}-create-dialog-root`,form:`${w}-form`,name:`${w}-name`,slogan:`${w}-slogan`,intro:`${w}-intro`,submittedMessage:`${w}-submitted-message`},V=(0,u.Ay)(P.A,{name:w,slot:"CreateDialogRoot"})((()=>({})));const Y=function(e){const{className:t,open:s,onClose:o}=e,i=(0,r.__rest)(e,["className","open","onClose"]),a=(0,q.X1)(),u=(0,G.A)(),[l,d]=(0,c.useState)(""),[b,g]=(0,c.useState)(""),[m,p]=(0,c.useState)(!1),[j,A]=(0,c.useState)(!1),[f,x]=(0,c.useState)(""),I=e=>{e.preventDefault(),p(!0),O.A.request({url:S.A.CreateAnIncubator.url(),method:S.A.CreateAnIncubator.method,data:{name:l,slogan:b}}).then((e=>{p(!1),A(!0)})).catch((e=>{x(e),p(!1),C.V.error(W.d,e)}))};if(!a.user)return null;let k;return k=j?(0,n.jsx)(h.A,Object.assign({variant:"subtitle2",className:K.submittedMessage},{children:(0,n.jsx)(E.A,{id:"ui.incubatorListWidget.createIncubatorDialog.propose.success",defaultMessage:"ui.incubatorListWidget.createIncubatorDialog.propose.success"})})):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.A,Object.assign({component:"span",className:K.intro},{children:(0,n.jsx)(E.A,{id:"ui.incubatorsListDialog.createIncubatorDialog.intro",defaultMessage:"ui.incubatorsListDialog.createIncubatorDialog.intro"})})),(0,n.jsxs)(X.A,Object.assign({className:K.form},{children:[(0,n.jsx)(Q.A,{required:!0,error:Boolean(f),className:K.name,placeholder:`${u.formatMessage(J.name)}`,margin:"normal",value:l,onChange:e=>d(e.target.value)}),(0,n.jsx)(Q.A,{multiline:!0,error:Boolean(f),className:K.slogan,placeholder:`${u.formatMessage(J.slogan)}`,margin:"normal",value:b,onChange:e=>g(e.target.value)})]})),(0,n.jsx)(H.A,Object.assign({loading:m,disabled:!l||Boolean(f),variant:"contained",onClick:I},{children:(0,n.jsx)(E.A,{id:"ui.incubatorListWidget.createIncubatorDialog.button",defaultMessage:"ui.incubatorListWidget.createIncubatorDialog.button"})}))]}),(0,n.jsx)(V,Object.assign({title:(0,n.jsx)(E.A,{id:"ui.incubatorListWidget.createIncubatorDialog.title",defaultMessage:"ui.incubatorListWidget.createIncubatorDialog.title"}),open:s,onClose:o,className:R()(K.root,t)},i,{children:k}))};var Z=s(83542),ee=s(45949),te=s(75753),se=s(3338),oe=s(86354),ne=s(9063);const ie={root:`${w}-root`,header:`${w}-header`,title:`${w}-title`,noResults:`${w}-no-results`,showMore:`${w}-show-more`,actions:`${w}-actions`,helpPopover:`${w}-help-popover`,dialogRoot:`${w}-dialog-root`,endMessage:`${w}-end-message`,createDialog:`${w}-create-dialog`},ae=(0,u.Ay)(N.A,{name:w,slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({}))),re=(0,u.Ay)(P.A,{name:w,slot:"DialogRoot"})((({theme:e})=>({})));const ce=function(e){const t=(0,z.A)({props:e,name:w}),{autoHide:s=!0,limit:o=3,className:i,IncubatorProps:a={},cacheStrategy:u=v.So.CACHE_FIRST,onHeightChange:I,onStateChange:k,DialogProps:y={}}=t,N=(0,r.__rest)(t,["autoHide","limit","className","IncubatorProps","cacheStrategy","onHeightChange","onStateChange","DialogProps"]),T=(0,c.useContext)(q.T6),M=(0,c.useContext)(te.ql),$=se.g4 in M.preferences&&M.preferences[se.g4].value,[P,U]=(0,c.useReducer)(ee.r6,{isLoadingNext:!1,next:null,cacheKey:oe.j3(oe.zM),cacheStrategy:u,visibleItems:o},ee.Ox),[G,X]=(0,c.useState)(!1),[Q,H]=(0,c.useState)(!1),[J,K]=(0,c.useState)(!1),[V,ce]=c.useState(null),ue=Boolean(V),[le,de]=(0,c.useState)(null),be=(0,l.A)(),ge=(0,d.A)(be.breakpoints.down("md")),he=(0,c.useMemo)((()=>()=>{P.initialized||P.isLoadingNext||(U({type:ee.Qd.LOADING_NEXT}),_.getAllIncubators({limit:o}).then((e=>{U({type:ee.Qd.LOAD_NEXT_SUCCESS,payload:Object.assign(Object.assign({},e),{initialized:!0})})})).catch((e=>{U({type:ee.Qd.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),C.V.error(W.d,e)})))}),[P.isLoadingNext,P.initialized,o,U]);(0,c.useEffect)((()=>{let e;if(void 0!==T.user)return e=setTimeout(he),()=>{e&&clearTimeout(e)}}),[T.user]),(0,c.useEffect)((()=>{G&&P.next&&P.initialized&&P.results.length===o&&(U({type:ee.Qd.LOADING_NEXT}),_.getAllIncubators({offset:o,limit:10}).then((e=>{U({type:ee.Qd.LOAD_NEXT_SUCCESS,payload:e})})).catch((e=>{U({type:ee.Qd.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),C.V.error(W.d,e)})))}),[G,P.next,P.initialized,P.results.length,o]),(0,c.useEffect)((()=>{I&&I()}),[P.results]),(0,c.useEffect)((()=>{($||T.user)&&u===v.So.NETWORK_ONLY&&k&&k({cacheStrategy:v.So.CACHE_FIRST})}),[$,T.user]);const me=(0,c.useMemo)((()=>()=>{ce(null)}),[ce]),pe=(0,c.useMemo)((()=>()=>{H(!1)}),[H]),je=(0,c.useMemo)((()=>e=>{K(!0),X(!1),de(e)}),[K,X,de]),Ae=(0,c.useMemo)((()=>()=>{K(!1)}),[K]),fe=(0,c.useMemo)((()=>()=>{X((e=>!e))}),[X]),xe=e=>{const t=[...P.results],s=t.findIndex((t=>t.id===e.id));-1!==s&&(e.subscribed?(t[s].subscribers_count=e.subscribers_count-1,t[s].subscribed=!e.subscribed):(t[s].subscribers_count=e.subscribers_count+1,t[s].subscribed=!e.subscribed),U({type:ee.Qd.SET_RESULTS,payload:{results:t}}))},Ie=(0,c.useMemo)((()=>()=>{U({type:ee.Qd.LOADING_NEXT}),O.A.request({url:P.next,method:S.A.GetAllIncubators.method}).then((e=>{U({type:ee.Qd.LOAD_NEXT_SUCCESS,payload:e.data})}))}),[U,P.next,P.isLoadingNext,P.initialized]);if(!$&&!T.user||P.initialized&&s&&!P.count)return(0,n.jsx)(ne.A,{});if(!P.initialized)return(0,n.jsx)(D,{});const Se=(0,n.jsxs)(b.A,{children:[(0,n.jsxs)(g.A,Object.assign({className:ie.header},{children:[(0,n.jsx)(h.A,Object.assign({className:ie.title,variant:"h5"},{children:(0,n.jsx)(E.A,{id:"ui.incubatorListWidget.title",defaultMessage:"ui.incubatorListWidget.title"})})),(0,n.jsx)(m.A,Object.assign({className:ie.helpPopover,color:"primary","aria-label":"info",component:"span",onClick:e=>{ce(e.currentTarget)}},{children:(0,n.jsx)(p.A,{children:"help_outline"})})),ue&&(0,n.jsx)(j.Ay,Object.assign({open:ue,anchorEl:V,onClose:me,anchorOrigin:{vertical:"bottom",horizontal:"right"}},{children:(0,n.jsx)(g.A,Object.assign({sx:{p:"10px"}},{children:(0,n.jsx)(h.A,Object.assign({component:"span",sx:{whiteSpace:"pre-line"}},{children:(0,n.jsx)(E.A,{id:"ui.incubatorListWidget.popover",defaultMessage:"ui.incubatorListWidget.popover"})}))}))}))]})),P.count?(0,n.jsxs)(c.Fragment,{children:[(0,n.jsx)(A.A,{children:P.results.slice(0,P.visibleItems).map((e=>(0,n.jsx)(f.Ay,{children:(0,n.jsx)(B.A,Object.assign({elevation:0,incubator:e,subscribeButtonProps:{onSubscribe:xe},ButtonProps:{onClick:()=>je(e)}},a))},e.id)))}),(0,n.jsxs)(g.A,Object.assign({className:ie.actions},{children:[P.count>P.visibleItems&&(0,n.jsx)(x.A,Object.assign({className:ie.showMore,onClick:fe},{children:(0,n.jsx)(E.A,{id:"ui.incubatorListWidget.ShowAll",defaultMessage:"ui.incubatorListWidget.ShowAll"})})),(0,n.jsx)(x.A,Object.assign({size:"small",onClick:()=>H(!0)},{children:(0,n.jsx)(E.A,{id:"ui.incubatorListWidget.SuggestNewTopic",defaultMessage:"ui.incubatorListWidget.SuggestNewTopic"})}))]}))]}):(0,n.jsx)(h.A,Object.assign({className:ie.noResults,variant:"body2"},{children:(0,n.jsx)(E.A,{id:"ui.incubatorListWidget.noResults",defaultMessage:"ui.incubatorListWidget.noResults"})})),G&&(0,n.jsx)(re,Object.assign({className:ie.dialogRoot,title:(0,n.jsx)(E.A,{id:"ui.incubatorListWidget.title",defaultMessage:"ui.incubatorListWidget.title"}),onClose:fe,open:G},y,{children:(0,n.jsx)(F.A,Object.assign({dataLength:P.results.length,next:Ie,hasMoreNext:Boolean(P.next),loaderNext:(0,n.jsx)(L.A,Object.assign({elevation:0},a)),height:ge?"100vh":400,endMessage:(0,n.jsx)(h.A,Object.assign({className:ie.endMessage},{children:(0,n.jsx)(E.A,{id:"ui.incubatorListWidget.noMoreIncubators",defaultMessage:"ui.incubatorListWidget.noMoreIncubators"})}))},{children:(0,n.jsx)(A.A,{children:P.results.map((e=>(0,n.jsx)(f.Ay,{children:(0,n.jsx)(B.A,Object.assign({elevation:0,incubator:e,subscribeButtonProps:{onSubscribe:xe},ButtonProps:{onClick:()=>je(e)}},a))},e.id)))})}))})),Q&&(0,n.jsx)(Y,{className:ie.createDialog,open:Q,onClose:pe}),J&&(0,n.jsx)(Z.A,{open:J,onClose:Ae,incubator:le,onSubscriptionsUpdate:xe})]});return(0,n.jsx)(ae,Object.assign({className:R()(ie.root,i)},N,{children:Se}))},ue={sidebar_label:"Incubators List",sidebar_position:1,title:"Incubators List"},le=void 0,de={},be=[{value:"Usage",id:"usage",level:4}];function ge(e){const t={blockquote:"blockquote",code:"code",h4:"h4",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsxs)(t.p,{children:["The Incubators List component renders a list of incubators.",(0,n.jsx)("br",{}),"\nThis list is composed of items containing incubator's title, info, a subscription status bar and a subscribe button that allows users to subscribe/unsubscribe to an incubator.",(0,n.jsx)("br",{}),"\nBy clicking the incubator title it is possible to open a modal card showing the incubators details and a section where it is possible to share the item on social networks.",(0,n.jsx)("br",{}),'\nThe incubators are shown in an orderly manner: few items are shown in the main card while the others can be displayed in a modal card by clicking on the "show all" button.\nAt the card bottom there is also a "suggest a new topic" button that opens a modal composed of a form that allows users to propose a new interests.']}),"\n"]}),"\n","\n",(0,n.jsx)(a.A,{children:(0,n.jsx)(ce,{})}),"\n",(0,n.jsx)(t.h4,{id:"usage",children:"Usage"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-jsx",children:" import React from 'react';\n import {SCContextProvider} from '@selfcommunity/react-core';\n import {IncubatorListWidget} from '@selfcommunity/react-ui';\n\n function App() {\n   const conf = {\n     portal: '<community-path>',\n     session: {\n       type: 'OAuth',\n       token: '<community-token>',\n       refreshToken: '<community-refresh-token>',\n       refreshTokenEndpoint: '<community-refresh-endpoint>',\n     },\n   };\n   return (\n     <SCContextProvider conf={conf}><IncubatorListWidget /></SCContextProvider>\n   );\n }\n"})})]})}function he(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(ge,{...e})}):ge(e)}}}]);