"use strict";(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[53471],{92991:(e,t,o)=>{o.d(t,{Z:()=>p});var n=o(67294),r=o(27331),s=o(5730);function c(e,t){void 0===e&&(e=""),void 0===t&&(t={});const o=Object.keys(t).map((e=>encodeURIComponent(e)+"="+encodeURIComponent(t[e]))).join("&");return fetch(e,{method:"POST",headers:{accept:"application/json","content-type":"application/x-www-form-urlencoded"},body:o})}function i(){if((0,s.Z)()){const e={refresh_token:JSON.parse(window.localStorage.getItem("token")).refresh_token,client_id:r.r.user.client_id,grant_type:"refresh_token"};return c(`${r.r.portal}/oauth/token/`,e).then((e=>e.json())).then((e=>({accessToken:e.access_token,refreshToken:e.refresh_token,tokenType:e.token_type,expiresIn:e.expires_in}))).catch((e=>Promise.reject(e)))}}function l(){const e=(0,s.Z)(),[t,o]=(0,n.useState)(e?JSON.parse(window.localStorage.getItem("token")):"");return(0,n.useEffect)((()=>{e&&(!t||1e3*t.expiresIn<Date.now()?c(`${r.r.portal}/oauth/token/`,r.r.user).then((e=>e.json())).then((e=>({accessToken:e.access_token,refreshToken:e.refresh_token,tokenType:e.token_type,expiresIn:e.expires_in}))).catch((e=>e)).then((e=>{o(e)})):e&&o(JSON.parse(window.localStorage.getItem("token"))))}),[e]),(0,n.useEffect)((()=>{e&&window.localStorage.setItem("token",JSON.stringify(t))}),[e,t]),t}var a=o(53704),u=o(21367),m=o(19666),d=o(85893);function p(e){let{children:t}=e;const o=l(),n={portal:r.r.portal,locale:{default:"en"},session:{type:"OAuth",clientId:r.r.user.client_id,authToken:o,handleRefreshToken:i},theme:u.Z,handleAnonymousAction:()=>{alert("Anonymous action")}};return(0,d.jsx)(m.Z,{children:()=>(0,d.jsx)(a.ZP,{conf:n,children:t})})}},27331:(e,t,o)=>{o.d(t,{r:()=>n});const n={user:{username:"beatrice",password:"Password!!Beatrice2021",client_id:"XJjPE54IBBjhibs0Rf0wZ969cZNPq6WjC02FrkaM",grant_type:"password"},portal:"https://api.fashionista.community"}},78153:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>u,contentTitle:()=>l,default:()=>p,frontMatter:()=>i,metadata:()=>a,toc:()=>m});var n=o(85893),r=o(11151),s=o(92991),c=o(95069);const i={sidebar_label:"Account Delete",sidebar_position:1,title:"Account Delete"},l=void 0,a={id:"sdk/community-js/react-ui/Components/AccountDelete",title:"Account Delete",description:"The Account Delete component allows users to display the logic behind user deletion.",source:"@site/docs/sdk/community-js/react-ui/Components/AccountDelete.mdx",sourceDirName:"sdk/community-js/react-ui/Components",slug:"/sdk/community-js/react-ui/Components/AccountDelete",permalink:"/docs/sdk/community-js/react-ui/Components/AccountDelete",draft:!1,unlisted:!1,editUrl:"https://github.com/selfcommunity/developers-doc/tree/main/docs/sdk/community-js/react-ui/Components/AccountDelete.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_label:"Account Delete",sidebar_position:1,title:"Account Delete"},sidebar:"sdkSidebar",previous:{title:"Account Data Portability",permalink:"/docs/sdk/community-js/react-ui/Components/AccountDataPortability"},next:{title:"Account Recover",permalink:"/docs/sdk/community-js/react-ui/Components/AccountRecover"}},u={},m=[{value:"Usage",id:"usage",level:4}];function d(e){const t={blockquote:"blockquote",code:"code",h4:"h4",p:"p",pre:"pre",...(0,r.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsxs)(t.p,{children:["The Account Delete component allows users to display the logic behind user deletion.",(0,n.jsx)("br",{}),"\nThis component is composed of a list containing the instructions for deleting the account, a form in which to enter the email and a button for sending the request."]}),"\n"]}),"\n","\n","\n",(0,n.jsx)(s.Z,{children:(0,n.jsx)(c.Z,{})}),"\n",(0,n.jsx)(t.h4,{id:"usage",children:"Usage"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-jsx",children:" import React from 'react';\n import {SCContextProvider} from '@selfcommunity/react-core';\n import {AccountDelete} from '@selfcommunity/react-ui';\n\n function App() {\n   const conf = {\n     portal: '<community-path>',\n     session: {\n       type: 'OAuth',\n       token: '<community-token>',\n       refreshToken: '<community-refresh-token>',\n       refreshTokenEndpoint: '<community-refresh-endpoint>',\n     },\n   };\n   return (\n     <SCContextProvider conf={conf}><AccountDelete /></SCContextProvider>\n   );\n }\n"})})]})}function p(e={}){const{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},5616:(e,t,o)=>{o.d(t,{Z:()=>Z});var n=o(83117),r=o(80102),s=o(67294),c=o(70828),i=o(49731),l=o(86523),a=o(39707),u=o(96682),m=o(85893);const d=["className","component"];var p=o(37078),f=o(68239),h=o(10606);const v=(0,o(1588).Z)("MuiBox",["root"]),g=(0,f.Z)(),k=function(e={}){const{themeId:t,defaultTheme:o,defaultClassName:p="MuiBox-root",generateClassName:f}=e,h=(0,i.ZP)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(l.Z);return s.forwardRef((function(e,s){const i=(0,u.Z)(o),l=(0,a.Z)(e),{className:v,component:g="div"}=l,k=(0,r.Z)(l,d);return(0,m.jsx)(h,(0,n.Z)({as:g,ref:s,className:(0,c.Z)(v,f?f(p):p),theme:t&&i[t]||i},k))}))}({themeId:h.Z,defaultTheme:g,defaultClassName:v.root,generateClassName:p.Z.generate}),Z=k},59773:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o(67294).createContext({})},88169:(e,t,o)=>{o.d(t,{Z:()=>Z});var n=o(83117),r=o(67294),s=o(80102),c=o(63961),i=o(94780),l=o(98216),a=o(71657),u=o(90948),m=o(1588),d=o(34867);function p(e){return(0,d.Z)("MuiSvgIcon",e)}(0,m.Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var f=o(85893);const h=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],v=(0,u.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,"inherit"!==o.color&&t[`color${(0,l.Z)(o.color)}`],t[`fontSize${(0,l.Z)(o.fontSize)}`]]}})((({theme:e,ownerState:t})=>{var o,n,r,s,c,i,l,a,u,m,d,p,f;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(o=e.transitions)||null==(n=o.create)?void 0:n.call(o,"fill",{duration:null==(r=e.transitions)||null==(r=r.duration)?void 0:r.shorter}),fontSize:{inherit:"inherit",small:(null==(s=e.typography)||null==(c=s.pxToRem)?void 0:c.call(s,20))||"1.25rem",medium:(null==(i=e.typography)||null==(l=i.pxToRem)?void 0:l.call(i,24))||"1.5rem",large:(null==(a=e.typography)||null==(u=a.pxToRem)?void 0:u.call(a,35))||"2.1875rem"}[t.fontSize],color:null!=(m=null==(d=(e.vars||e).palette)||null==(d=d[t.color])?void 0:d.main)?m:{action:null==(p=(e.vars||e).palette)||null==(p=p.action)?void 0:p.active,disabled:null==(f=(e.vars||e).palette)||null==(f=f.action)?void 0:f.disabled,inherit:void 0}[t.color]}})),g=r.forwardRef((function(e,t){const o=(0,a.Z)({props:e,name:"MuiSvgIcon"}),{children:u,className:m,color:d="inherit",component:g="svg",fontSize:k="medium",htmlColor:Z,inheritViewBox:y=!1,titleAccess:S,viewBox:x="0 0 24 24"}=o,b=(0,s.Z)(o,h),w=r.isValidElement(u)&&"svg"===u.type,j=(0,n.Z)({},o,{color:d,component:g,fontSize:k,instanceFontSize:e.fontSize,inheritViewBox:y,viewBox:x,hasSvgAsChild:w}),C={};y||(C.viewBox=x);const A=(e=>{const{color:t,fontSize:o,classes:n}=e,r={root:["root","inherit"!==t&&`color${(0,l.Z)(t)}`,`fontSize${(0,l.Z)(o)}`]};return(0,i.Z)(r,p,n)})(j);return(0,f.jsxs)(v,(0,n.Z)({as:g,className:(0,c.Z)(A.root,m),focusable:"false",color:Z,"aria-hidden":!S||void 0,role:S?"img":void 0,ref:t},C,b,w&&u.props,{ownerState:j,children:[w?u.props.children:u,S?(0,f.jsx)("title",{children:S}):null]}))}));g.muiName="SvgIcon";const k=g;function Z(e,t){function o(o,r){return(0,f.jsx)(k,(0,n.Z)({"data-testid":`${t}Icon`,ref:r},o,{children:e}))}return o.muiName=k.muiName,r.memo(r.forwardRef(o))}},71579:(e,t,o)=>{o.d(t,{Z:()=>r});var n=o(67294);const r=function(e,t){var o,r;return n.isValidElement(e)&&-1!==t.indexOf(null!=(o=e.type.muiName)?o:null==(r=e.type)||null==(r=r._payload)||null==(r=r.value)?void 0:r.muiName)}},95069:(e,t,o)=>{o.d(t,{Z:()=>w});var n=o(97582),r=o(67294),s=o(29628),c=o(90948),i=o(5616),l=o(15861),a=o(77931),u=o(94184),m=o.n(u),d=o(49877),p=o(99960),f=o(68689),h=o(66380),v=o(85472),g=o(75459),k=o(86896),Z=o(44012),y=o(31812);const S="SCAccountDelete",x={root:`${S}-root`,message:`${S}-message`,confirm:`${S}-confirm`,button:`${S}-button`},b=(0,c.ZP)(i.Z,{name:S,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({})));const w=function(e){const t=(0,s.Z)({props:e,name:S}),{className:o="",onLogout:c,onDeleteAccount:i}=t,u=(0,n._T)(t,["className","onLogout","onDeleteAccount"]),w=(0,f.LD)(),j=(0,h.ko)(),C=(0,r.useMemo)((()=>j.preferences&&v.QX in j.preferences?j.preferences[v.QX].value:null),[j.preferences]),[A,D]=(0,r.useState)(!1),[N,_]=(0,r.useState)(null),[T,I]=(0,r.useState)(""),E=w.user?w.user.id:null,M=(0,k.Z)(),z=(0,r.useCallback)((()=>{D(!0),_(null),d.Z.userDelete(w.user.id,0).then((()=>{D(!1),i&&i(),P()})).catch((e=>{_(M.formatMessage({id:"ui.common.error.action",defaultMessage:"ui.common.error.action"})),p.Y.error(g.J,e)})).then((()=>D(!1)))}),[D,_,i]),P=(0,r.useCallback)((()=>{w.logout(),c&&c()}),[w.logout,c]),R=(0,r.useCallback)((e=>I(e.target.value)),[I]);return E?r.createElement(b,Object.assign({className:m()(x.root,o)},u),r.createElement(l.Z,{className:x.message},r.createElement(Z.Z,{id:"ui.accountDelete.message",defaultMessage:"ui.accountDelete.message",values:{communityName:C,li:e=>r.createElement("li",null,e),ul:e=>r.createElement("ul",null,e)}})),r.createElement(l.Z,{className:x.confirm},r.createElement(Z.Z,{id:"ui.accountDelete.confirmMessage",defaultMessage:"ui.accountDelete.confirmMessage",values:{username:w.user.username,b:e=>r.createElement("b",null,e)}}),r.createElement(a.Z,{name:"confirm",value:T,onChange:R,autoComplete:"off",size:"small"})),N&&r.createElement(l.Z,{color:"error"},N),r.createElement(y.Z,{className:x.button,size:"small",disabled:A||T!==w.user.username,variant:"outlined",onClick:z},r.createElement(Z.Z,{id:"ui.accountDelete.buttonLabel",defaultMessage:"ui.accountDelete.buttonLabel"}))):null}},75459:(e,t,o)=>{o.d(t,{J:()=>n});const n="@selfcommunity/react-ui"}}]);