(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[67033],{15906:(e,t,n)=>{"use strict";n.d(t,{d:()=>s});const s="@selfcommunity/react-ui"},16682:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var s=n(85486),r=n(59703),o=n(75659),a=n(54533),i=n(96540),l=n(11848),c=n(25669),d=n(28466),u=n(38413),m=n(31609);function p(e){return(0,m.Ay)("MuiImageListItemBar",e)}(0,u.A)("MuiImageListItemBar",["root","positionBottom","positionTop","positionBelow","titleWrap","titleWrapBottom","titleWrapTop","titleWrapBelow","titleWrapActionPosLeft","titleWrapActionPosRight","title","subtitle","actionIcon","actionIconActionPosLeft","actionIconActionPosRight"]);var g=n(74848);const h=["actionIcon","actionPosition","className","subtitle","title","position"],A=(0,l.Ay)("div",{name:"MuiImageListItemBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${(0,d.A)(n.position)}`]]}})((({theme:e,ownerState:t})=>(0,r.A)({position:"absolute",left:0,right:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",fontFamily:e.typography.fontFamily},"bottom"===t.position&&{bottom:0},"top"===t.position&&{top:0},"below"===t.position&&{position:"relative",background:"transparent",alignItems:"normal"}))),f=(0,l.Ay)("div",{name:"MuiImageListItemBar",slot:"TitleWrap",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.titleWrap,t[`titleWrap${(0,d.A)(n.position)}`],n.actionIcon&&t[`titleWrapActionPos${(0,d.A)(n.actionPosition)}`]]}})((({theme:e,ownerState:t})=>(0,r.A)({flexGrow:1,padding:"12px 16px",color:(e.vars||e).palette.common.white,overflow:"hidden"},"below"===t.position&&{padding:"6px 0 12px",color:"inherit"},t.actionIcon&&"left"===t.actionPosition&&{paddingLeft:0},t.actionIcon&&"right"===t.actionPosition&&{paddingRight:0}))),v=(0,l.Ay)("div",{name:"MuiImageListItemBar",slot:"Title",overridesResolver:(e,t)=>t.title})((({theme:e})=>({fontSize:e.typography.pxToRem(16),lineHeight:"24px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}))),b=(0,l.Ay)("div",{name:"MuiImageListItemBar",slot:"Subtitle",overridesResolver:(e,t)=>t.subtitle})((({theme:e})=>({fontSize:e.typography.pxToRem(12),lineHeight:1,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}))),j=(0,l.Ay)("div",{name:"MuiImageListItemBar",slot:"ActionIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.actionIcon,t[`actionIconActionPos${(0,d.A)(n.actionPosition)}`]]}})((({ownerState:e})=>(0,r.A)({},"left"===e.actionPosition&&{order:-1}))),w=i.forwardRef((function(e,t){const n=(0,c.b)({props:e,name:"MuiImageListItemBar"}),{actionIcon:i,actionPosition:l="right",className:u,subtitle:m,title:w,position:y="bottom"}=n,x=(0,s.A)(n,h),C=(0,r.A)({},n,{position:y,actionPosition:l}),O=(e=>{const{classes:t,position:n,actionIcon:s,actionPosition:r}=e,a={root:["root",`position${(0,d.A)(n)}`],titleWrap:["titleWrap",`titleWrap${(0,d.A)(n)}`,s&&`titleWrapActionPos${(0,d.A)(r)}`],title:["title"],subtitle:["subtitle"],actionIcon:["actionIcon",`actionIconActionPos${(0,d.A)(r)}`]};return(0,o.A)(a,p,t)})(C);return(0,g.jsxs)(A,(0,r.A)({ownerState:C,className:(0,a.A)(O.root,u),ref:t},x,{children:[(0,g.jsxs)(f,{ownerState:C,className:O.titleWrap,children:[(0,g.jsx)(v,{className:O.title,children:w}),m?(0,g.jsx)(b,{className:O.subtitle,children:m}):null]}),i?(0,g.jsx)(j,{ownerState:C,className:O.actionIcon,children:i}):null]}))}))},19249:(e,t,n)=>{"use strict";n.d(t,{E4:()=>a,TY:()=>d,WW:()=>o,Yc:()=>c,cJ:()=>i,gg:()=>s,m6:()=>r,tE:()=>u,zG:()=>l});const s="image",r="video",o="doc",a="url",i="share",l="event",c="sc_link",d="sc_shared_event",u=3},25929:e=>{e.exports=function(){return!0}},26576:function(e,t){!function(e){"use strict";function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var n="opts_init",s=1e3,r=Array.prototype.concat,o=function(e){var r;return!0===e[n]?e:(t(r={},n,!0),t(r,"recursive",!0===e||!!e.recursive),t(r,"withFullPath",!!e.withFullPath),t(r,"bail",e.bail&&e.bail>0?e.bail:s),r)},a=function(e,t){var n=new File([e],t,{type:e.type,lastModified:e.lastModified});return n.hdcFullPath=t,n},i=function(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).withFullPath?a(e,t):e},l=function(e,t){return new Promise((function(n,s){e.file?e.file((function(s){return n(i(s,e.fullPath,t))}),s):n(null)})).catch((function(){return null}))},c=function(e){return"file"===e.kind},d=function(e){return e.getAsEntry?e.getAsEntry():e.webkitGetAsEntry?e.webkitGetAsEntry():null},u=function(e){return r.apply([],e)},m=function(e,t,n){return e.isDirectory?t.recursive?p(e,t,n+1):Promise.resolve([]):l(e,t).then((function(e){return e?[e]:[]}))},p=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e&&n<t.bail&&e.isDirectory&&e.createReader?new Promise((function(s){var r=[],o=e.createReader(),a=function(){Promise.all(r.map((function(e){return m(e,t,n)}))).then((function(e){return s(u(e))}))};!function e(){o.readEntries((function(t){t.length?(r=r.concat(t),e()):a()}),a)}()})):Promise.resolve([])},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p(d(e),o(t))},h=function(e,t){return g(e,t).then((function(t){if(!t.length){var n=e.getAsFile();t=n?[n]:t}return t}))},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=o(t),new Promise((function(n){e.dataTransfer.items?Promise.all(u(e.dataTransfer.items).filter((function(e){return c(e)})).map((function(e){return h(e,t)}))).then((function(e){return n(u(e))})):e.dataTransfer.files?n(u(e.dataTransfer.files)):n([])}))};e.getFiles=g,e.getFilesFromDragEvent=A,Object.defineProperty(e,"__esModule",{value:!0})}(t)},28585:(e,t,n)=>{"use strict";n.d(t,{A:()=>En});var s=n(31635),r=n(74848),o=n(96540),a=n(2773),i=n(13550),l=n(29368),c=n(2877),d=n(47265),u=n(44817),m=n(32678),p=n(67227),g=n(11848),h=n(36870),A=n(44675),f=n(15327),v=n(82241),b=n(73785);const j="SCPrivateMessageThreadItem",w={root:`${j}-skeleton-root`,list:`${j}-list`},y=(0,g.Ay)(h.Ay,{name:j,slot:"SkeletonRoot"})((()=>({})));function x(e){const t=(0,A.A)(),n=(0,f.A)(t.breakpoints.down("md"));return(0,r.jsx)(y,Object.assign({className:w.root},e,{children:(0,r.jsx)(v.A,{sx:{display:"flex",justifyContent:e.index%2==0?"flex-start":"flex-end"},primary:(0,r.jsx)(b.A,{animation:"wave",height:100,width:n?200:300,style:{borderRadius:t.shape.borderRadius}})})}))}var C=n(67733),O=n(42942),E=n(40059),S=n(47859),I=n(4671),R=n(6442),M=n(19546),T=n.n(M),k=n(66848),_=n(54521);function B(e){const t=["Bytes","KB","MB","GB","TB"];if(0===e)return"n/a";const n=parseInt(Math.floor(Math.log(e)/Math.log(1024)).toString());return 0===n?`${e} ${t[n]}`:`${(e/Math.pow(1024,n)).toFixed(1)} ${t[n]}`}var P=n(29251);const N=n(38427).A;var D=n(87631),H=n(18590);const U="data:image/png;base64,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",L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAuUlEQVR4nO3WQQpCMRRD0axCxP0vSRRXExE6EMHBl5e09uVCcSiHBi2Q/isKzw3AeQcIATwAXJyQ6uwYiiH3t0/pzNSQE4Cr42YohsCFoQFiwdAEkWNohLySYdwQGWYGRIKZBSnHOP7Zj7zNtoCw4gtnx0BGuZHimGl1mxaLz7cCaTctVwyk241Q9Cv1WSDtpuWKgXS7EeathbUeja4YyCg3UhwzrVGmVRwzrVGmteq0uMj5uW0gCeaeAHHCuEhTlUIAAAAASUVORK5CYII=",F=1920;function W(e){const t=e.split(".").pop().toLowerCase();return["mp4","webm","ogv","mp3","m3u8","mpd"].includes(t)}function $(e,t){let n=e.split(","),s=n[0].match(/:(.*?);/)[1],r=atob(n[1]),o=r.length,a=new Uint8Array(o);const i=t.file&&t.file.type.startsWith(m.em.DOCUMENT)?t.file.name.replace(/(\.[^.]+)$/,".jpeg"):t.name;for(;o--;)a[o]=r.charCodeAt(o);return new File([a],i,{type:s})}function Q(e){return new Promise((function(t,n){try{t($("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAABVElEQVR4nO3Xu0rEUBDG8b8PoJUXrAT3EWxsrOztLHwISwtRK1sVS7e1tbQWLBWs3EJ8BhsFr4WMBKaQRV3WnJlkwnwwBAI5OT/OJSeQiRUxqjtgvgsQ8caIlkWbrhgxhAy+XWcLv8MVMgPceo2MGELwxIgxxA0jDhAXjDhBzDHiCKlihvGGmGGagJhgmoIUx1gfUcapQYmXlkydg2arII30QxLSwRFZB/rAAbAJzEWFPAwt2BdgH5iMBnn8ZQd6Ba6A5egQ0TrsCuQoEuQZWAE2gFPgIyrkaejeArAHnAOrkSHjRhKiyRHRTABvXZhaa/p8KMgisAWcAGfANfAZDbIEvP/x0at2Lo9+1G5gd8TXu/rnDgHZHgE5jgLp6Tr4CXEPTEda7D09yV4CN8AFsANM1elAW7bfUpGEaHJECkdyamlyahWO5NTSSMvq3+kMJINzvgAzxLJFazyrgQAAAABJRU5ErkJggg==",e))}catch(s){n(s),console.log(s)}}))}function Z(e,t){const s=n(46222);return new Promise((function(n,r){try{if(t.file.name.endsWith(".pdf")){const o=document.createElement("canvas"),a=o.getContext("2d");s.getDocument(e).promise.then((e=>e.getPage(1))).then((e=>{const t=e.getViewport({scale:1});o.width=t.width,o.height=t.height;const n={canvasContext:a,viewport:t};return e.render(n).promise})).then((()=>{const e=o.toDataURL("image/jpeg",1);n($(e,t))})).catch((e=>(console.error("Error converting PDF to JPEG:",e),r(e),Promise.reject(e))))}else n($(L,t))}catch(o){r(o),console.log(o)}}))}function z(e,t){return new Promise((function(n,s){try{const s=document.createElement("video");s.src=e,s.crossOrigin="*",W(t.file.name)?s.addEventListener("seeked",(function(){const e=document.createElement("canvas");e.width=F;const r=F/s.videoWidth;e.height=s.videoHeight*r;e.getContext("2d").drawImage(s,0,0,e.width,e.height);const o=e.toDataURL("image/jpeg",.5);n($(o,t))})):n($("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAAAsTAAALEwEAmpwYAAACYUlEQVR4nO3cvWoUURjG8T/YrGAROzFi5Q1oa+Fd2Jp02tiGpPcCvAE/+mxAvIpEsfILBat0ogtJsBKfsDA2h4zuTDL7vjvn+cHTHrLPO3POptgDZmZmZmZmZmZmZmZmZmZpXAU2gT3gM3ACaEVy0vzN0+YzrLFCLgM7wCxBkbqgzD/LNjAhuevAQYLCNFDeATdJ6gZwmKAkDZzD5rOm23beJihHS8pBtu1oJ0EpWnLmZ8J53AOeAx+bvATu9P22M6YDVwtm1nz2Li4B94E3LWv+Bh51HcBmgjIUlI0FO7oCPAa+LbDmfAh3uwxgL0ERCsruf7q5BjwBfnRc91WXAXxNUISCMv9n7Sy3gKfAr57rfu8ygOMERSgoR2f08Rr4cwFrL0yVpzTUuq1UeUoeAB5A+FMpvwHxxchbUHw58hkw/pSGWreVKk/JA8ADCH8q5Tcgvhh5C4ovRz4Dxp/SUOu2UuUpeQB4AOFPpfwGxBcjb0Hx5chnwPhTGmrdVqo8JQ8ADyD8qZTfgPhi5C0ovhz5DBh/SkOt20qVp+QB4AGEP5XyGxBfjLwFxZcjnwHjT2modVup8pQ8ADyA8KdSfgPii5G3oPhyVMMZcJSgBNX8I70vCYpQUD5l+JnqNEERqvmH2hsJilBQHmS4qqDWyzp+9rjKbJHLOh7Sw3aCQrTkbHH+62qeAe+BD8AL4HbfxSYjv6pMRfazXdg0t17RlWXrJL60bz9BSarx0r6/Js2ZMBvZgbuVcdv5l7XmK+q0+Ydlla61OW7+5t3mq+ZKXdxqZmZmZmZmZmZmZmZmZkZ3p+uwFZYL7fr1AAAAAElFTkSuQmCC",t)),s.currentTime=1}catch(r){s(r),console.log(r)}}))}const q={root:`${j}-root`,username:`${j}-username`,text:`${j}-text`,img:`${j}-img`,document:`${j}-document`,video:`${j}-video`,other:`${j}-other`,iconButton:`${j}-icon-button`,messageTime:`${j}-message-time`,menuItem:`${j}-menu-item`,downloadButton:`${j}-download-button`,dialogRoot:`${j}-dialog-root`},G=(0,g.Ay)(P.A,{name:j,slot:"DialogRoot"})((()=>({}))),V=(0,g.Ay)(h.Ay,{name:j,slot:"Root"})((()=>({})));const K=function(e){var t;const n=(0,k.A)({props:e,name:j}),{message:a=null,className:i=null,mouseEvents:l={},isHovering:d=null,showMenuIcon:u=!1,onMenuIconClick:p=null}=n,g=(0,s.__rest)(n,["message","className","mouseEvents","isHovering","showMenuIcon","onMenuIconClick"]),h=(0,R.A)(),v=(0,o.useContext)(c.T6),b=(0,A.A)(),w=(0,f.A)(b.breakpoints.down("md")),y=a?a.file:null,[M,P]=(0,o.useState)(!1),{enqueueSnackbar:U}=(0,H.dh)(),L=e=>(0,s.__awaiter)(this,void 0,void 0,(function*(){try{const t=yield fetch(e.url),n=yield t.blob(),s=URL.createObjectURL(n),r=document.createElement("a");r.href=s,r.download=e.filename,r.click(),URL.revokeObjectURL(s),r.remove()}catch(t){console.log(t),U(t,{variant:"error",autoHideDuration:3e3})}}));return a?(0,r.jsxs)(V,Object.assign({className:T()(q.root,i)},(F=l.onMouseEnter,$=l.onMouseLeave,{onMouseEnter:F,onMouseLeave:$,onTouchStart:F,onTouchMove:$}),g,{secondaryAction:(d||w)&&u&&a.status!==m.v8.HIDDEN&&(0,r.jsx)(_.A,{onMenuItemDeleteClick:()=>{p()}})},{children:[a.group&&(null===(t=null==v?void 0:v.user)||void 0===t?void 0:t.username)!==a.sender.username&&(0,r.jsx)(S.A,Object.assign({color:"secondary",variant:"h4",className:q.username},{children:a.sender.username})),(0,r.jsxs)(r.Fragment,{children:[y&&a.status!==m.v8.HIDDEN?(e=>{if(!e)return null;let t=null;const n=(0,r.jsx)(C.A,Object.assign({className:q.other},{children:(0,r.jsxs)(O.A,Object.assign({onClick:()=>L(e.file),startIcon:(0,r.jsx)(E.A,{children:"download"})},{children:[(0,r.jsx)(S.A,{children:e.file.filename}),(0,r.jsx)(S.A,{children:B(e.file.filesize)})]}))}));if(e.file){let s=e.file.mimetype;switch(!0){case s.startsWith(m.em.IMAGE):t=(0,r.jsx)(C.A,Object.assign({className:q.img},{children:(0,r.jsx)("img",{src:e.file.thumbnail,loading:"lazy",alt:"img",onClick:()=>P(!0)})}));break;case s.startsWith(m.em.VIDEO):t=W(e.file.filename)?(0,r.jsxs)(C.A,Object.assign({className:T()(q.img,q.video)},{children:[(0,r.jsx)("img",{src:e.file.thumbnail,loading:"lazy",alt:"img"}),(0,r.jsx)(I.A,Object.assign({onClick:()=>P(!0)},{children:(0,r.jsx)(E.A,{children:"play_circle_outline"})}))]})):n;break;case s.startsWith(m.em.DOCUMENT):t=(0,r.jsxs)(C.A,Object.assign({className:e.file.filename.endsWith(".pdf")?q.document:q.other},{children:[e.file.filename.endsWith(".pdf")&&(0,r.jsx)("img",{src:e.file.thumbnail,loading:"lazy",alt:"img"}),(0,r.jsxs)(O.A,Object.assign({onClick:()=>L(e.file),startIcon:(0,r.jsx)(E.A,{children:"download"})},{children:[(0,r.jsx)(S.A,{children:e.file.filename}),(0,r.jsx)(S.A,{children:B(e.file.filesize)})]}))]}));break;default:t=n}}return(0,r.jsx)(r.Fragment,{children:t})})(a):(0,r.jsx)(C.A,Object.assign({className:q.text},{children:(0,r.jsx)(S.A,{component:"span",dangerouslySetInnerHTML:{__html:a.message}})})),(0,r.jsx)(S.A,Object.assign({className:q.messageTime,color:"text.secondary"},{children:`${h.formatDate(a.created_at,{hour:"numeric",minute:"numeric"})}`}))]}),M&&(0,r.jsx)(r.Fragment,{children:(null==a?void 0:a.file.mimetype.startsWith(m.em.VIDEO))?(0,r.jsx)(G,Object.assign({open:M,onClose:()=>P(!1),className:q.dialogRoot},{children:(0,r.jsx)(D.A,{url:null==a?void 0:a.file.url,width:"100%"})})):(0,r.jsx)(N,{images:[{src:null==a?void 0:a.file.url,key:a.file.uuid}],onClose:()=>P(!1),toolbarButtons:(0,r.jsx)(I.A,Object.assign({onClick:()=>L(null==a?void 0:a.file),className:q.downloadButton},{children:(0,r.jsx)(E.A,{children:"download"})}),"download")})})]})):(0,r.jsx)(x,{elevation:0});var F,$};var Y=n(23224),X=n.n(Y),J=n(27885),ee=n(58065),te=n(57156),ne=n(25292),se=n(28820),re=n(78222),oe=n(59223),ae=n(27365),ie=n(5696),le=n(43581),ce=n(80766),de=n(4447),ue=n(34069),me=n(20973),pe=n(69981),ge=n(16682),he=n(39661),Ae=n(45284),fe=n(86857),ve=n(24760),be=n(67386),je=n(67743),we=n(15906),ye=n(94520);const xe=e=>{const{type:t=null,onSuccess:n=null,onProgress:r=null,onError:a=null}=e,c=(0,o.useRef)(!0),d=o.useRef({chunks:{},setChunk:null,setChunks:null}),[u,p]=(0,o.useState)({});d.current={chunks:u,setChunk:e=>{const t=Object.assign(Object.assign({},d.current.chunks),{[e.id]:Object.assign(Object.assign({},d.current.chunks[e.id]),e)});p(t),d.current.chunks=t},setChunks:p};const g=(0,Ae.J_)(),h=(0,R.A)(),A=e=>e.startsWith(m.em.IMAGE);(0,o.useEffect)((()=>{c.current?c.current=!1:r&&r(u)}),[u]),(0,be.Jg)((e=>{if(!e.file.type.startsWith(m.em.DOCUMENT)){const t=new FileReader;t.onload=t=>{A(e.file.type)?d.current.setChunk({id:e.id,file_url:t.target.result}):d.current.setChunk({id:e.id,video_url:t.target.result})},t.readAsDataURL(e.file)}d.current.setChunk({id:e.id,file_uuid:null,completed:0,file:e.file,totalparts:null})})),(0,be.OE)((e=>{d.current.setChunk({id:e.id,completed:e.completed})}));const f=(e,t)=>{const s=new FormData;s.append("file",t),s.append("parentuuid",e.uploadResponse.results[0].data.file_uuid),i.A.request({url:l.A.PrivateMessageUploadThumbnail.url(),method:l.A.PrivateMessageUploadThumbnail.method,data:s,headers:{"Content-Type":"multipart/form-data"}}).then((t=>{const s=Object.assign({},d.current.chunks);delete s[e.id],d.current.setChunks(s);let r=t.data;r.file=e.file,n(r)})).catch((t=>{t=(0,ve.zl)(t),a(Object.assign({},d.current.chunks[e.id]),t.fileError?h.formatMessage(je.A.fileUploadErrorGeneric):h.formatMessage(je.A.messageFileUploadError,{filename:e.file.name}));const n=Object.assign({},d.current.chunks);delete n[e.id],d.current.setChunks(n)}))};return(0,he.IN)((e=>{const t=e.file.type.startsWith(m.em.VIDEO)?z:e.file.type.startsWith(m.em.AUDIO)?Q:Z,n=new FormData;n.append("uuid",d.current.chunks[e.id].file_uuid),n.append("filename",d.current.chunks[e.id].file.name),n.append("totalparts",d.current.chunks[e.id].totalparts),i.A.request({url:l.A.PrivateMessageChunkUploadDone.url(),method:l.A.PrivateMessageChunkUploadDone.method,data:n,headers:{"Content-Type":"multipart/form-data"}}).then((n=>{A(e.file.type)?f(e,e.file):((e,t,n)=>{e(n,t).then((e=>{f(t,e)})).catch((e=>{console.log(e),a(Object.assign({},d.current.chunks[t.id]),h.formatMessage(je.A.messageFileUploadError,{filename:t.file.name}));const n=Object.assign({},d.current.chunks);delete n[t.id],d.current.setChunks(n)}))})(t,e,n.data.file_url)})).catch((t=>{t=(0,ve.zl)(t),a(Object.assign({},d.current.chunks[e.id]),t.fileError?h.formatMessage(je.A.fileUploadErrorGeneric):h.formatMessage(je.A.messageFileUploadError,{filename:e.file.name}));const n=Object.assign({},d.current.chunks);delete n[e.id],d.current.setChunks(n)}))})),(0,he.Xy)((e=>{a(Object.assign({},d.current.chunks[e.id]),h.formatMessage(je.A.error));const t=Object.assign({},d.current.chunks);delete t[e.id],d.current.setChunks(t)})),(0,he.Y2)((e=>{const n={url:`${g.settings.portal}${l.A.PrivateMessageUploadMediaInChunks.url()}`,sendOptions:{paramName:"file",headers:{Authorization:`Bearer ${g.settings.session.authToken.accessToken}`},method:l.A.PrivateMessageUploadMediaInChunks.method}};if(e.totalCount>1){let t={partindex:e.chunk.index,totalparts:e.totalCount};d.current.chunks[e.item.id].file_uuid&&(t.uuid=d.current.chunks[e.item.id].file_uuid),n.sendOptions.params=t}else d.current.setChunk({id:e.item.id,type:t||e.sendOptions.paramName});return n})),(0,he.Ui)((e=>{d.current.setChunk({id:e.item.id,file_uuid:e.uploadData.response.data.file_uuid,totalparts:e.chunk.index+1})})),(0,he.gr)((({items:e,options:t})=>0==e.length?Promise.resolve({options:t}):A(e[0].file.type)?new Promise(((n,r)=>{Promise.all(e.map((e=>(0,s.__awaiter)(void 0,void 0,void 0,(function*(){return Object.assign(Object.assign({},e),{file:"image/gif"===e.file.type?e.file:yield(t=e.file,new Promise((function(e,n){try{const s=new FileReader;s.onload=n=>{let s=new Image;s.onload=function(){const n=document.createElement("canvas"),r=n.getContext("2d");n.width=F;const o=F/s.width;n.height=s.height*o,r.drawImage(s,0,0,n.width,n.height);const a=n.toDataURL("image/jpeg",.5);e($(a,t))},s.src=n.target.result},s.onerror=n,s.readAsDataURL(t)}catch(s){n(s),console.log(s)}})))});var t}))))).then((e=>{n({items:e,options:{inputFieldName:t.inputFieldName}})})).catch((e=>{ye.V.error(e,we.d),n({options:{inputFieldName:t.inputFieldName}})}))})):Promise.resolve({options:{inputFieldName:t.inputFieldName}}))),null};var Ce=n(26576),Oe=n(40001),Ee=n(20311),Se=n.n(Ee);n(63152);var Ie=n(46291),Re=n.n(Ie);const Me=e=>Re()()?e:Object.freeze(e),Te=e=>!!e&&"object"==typeof e&&("Object"===Object.getPrototypeOf(e)?.constructor.name||null===Object.getPrototypeOf(e));((e={})=>{const t=(n,...s)=>(n&&s.length&&s.forEach((s=>{s&&((e,t)=>{const n=Object.keys(e);return t.withSymbols?n.concat(Object.getOwnPropertySymbols(e)):n})(s,e).forEach((r=>{const o=s[r];var a;e.predicate&&!e.predicate(r,o)||(void 0!==o||e.undefinedOverwrites)&&(Te(a=o)||Array.isArray(a)?(void 0!==n[r]&&Te(n[r])||(n[r]=Array.isArray(o)?[]:{}),t(n[r],o)):n[r]=o)}))})),n)})();const ke=(()=>"object"==typeof window&&!!window.document)()&&window.requestIdleCallback;ke?window.requestIdleCallback:setTimeout,ke?window.cancelIdleCallback:clearTimeout,Symbol.for("__rpldy-bi__");Me({allowRegisterNonExistent:!0,canAddEvents:!0,canRemoveEvents:!0,collectStats:!1}),Symbol.for("__le__"),Symbol.for("__le__pack__");const _e="__rpldy-logger-debug__",Be="pending",Pe="added",Ne="uploading",De="cancelled",He="finished",Ue="error",Le="aborted",Fe=()=>"object"==typeof window&&!!window.document;let We=null;const $e=(...e)=>{"boolean"!=typeof We&&(We=Fe()&&("location"in window&&!!~window.location.search.indexOf("rpldy_debug=true")||!0===window[_e])),We&&console.log(...e)};var Qe=n(40608),Ze=n.n(Qe);const ze=(e,t,n)=>{let s=!0;const r=(e=>{const t=[].concat(e);return e=>e.map((e=>t.map((t=>e[t])).join()))})(n);if(e&&t&&e.length===t.length){const n=r(e),o=r(t);s=!!n.find(((e,t)=>e!==o[t]))}return!s};var qe=n(37763),Ge=n.n(qe);const Ve=e=>Ge()()?e:Object.freeze(e),Ke=e=>!!e&&"object"==typeof e&&("Object"===Object.getPrototypeOf(e)?.constructor.name||null===Object.getPrototypeOf(e)),Ye=(e={})=>{const t=(n,...s)=>(n&&s.length&&s.forEach((s=>{s&&((e,t)=>{const n=Object.keys(e);return t.withSymbols?n.concat(Object.getOwnPropertySymbols(e)):n})(s,e).forEach((r=>{const o=s[r];var a;e.predicate&&!e.predicate(r,o)||(void 0!==o||e.undefinedOverwrites)&&(Ke(a=o)||Array.isArray(a)?(void 0!==n[r]&&Ke(n[r])||(n[r]=Array.isArray(o)?[]:{}),t(n[r],o)):n[r]=o)}))})),n);return t},Xe=(Ye(),Fe()&&window.requestIdleCallback);Xe?window.requestIdleCallback:setTimeout,Xe?window.cancelIdleCallback:clearTimeout;const Je=function(e){return null==e},et=(e,t,...n)=>{const s=(t,...n)=>new Promise(((s,r)=>{const o=e(t,...n);o&&o.length?Promise.all(o).catch(r).then((e=>{let t;if(e)for(;Je(t)&&e.length;)t=e.pop();s(Je(t)?void 0:t)})):s()}));return t?s(t,...n):s};Symbol.for("__rpldy-bi__");const tt=()=>"object"==typeof window&&!!window.document;n(36686),n(25929);const nt=e=>!!e&&"object"==typeof e&&("Object"===Object.getPrototypeOf(e)?.constructor.name||null===Object.getPrototypeOf(e)),st=(((e={})=>{const t=(n,...s)=>(n&&s.length&&s.forEach((s=>{s&&((e,t)=>{const n=Object.keys(e);return t.withSymbols?n.concat(Object.getOwnPropertySymbols(e)):n})(s,e).forEach((r=>{const o=s[r];var a;e.predicate&&!e.predicate(r,o)||(void 0!==o||e.undefinedOverwrites)&&(nt(a=o)||Array.isArray(a)?(void 0!==n[r]&&nt(n[r])||(n[r]=Array.isArray(o)?[]:{}),t(n[r],o)):n[r]=o)}))})),n)})(),tt()&&window.requestIdleCallback);st?window.requestIdleCallback:setTimeout,st?window.cancelIdleCallback:clearTimeout,Symbol.for("__rpldy-bi__");const rt=Ve({BATCH_ADD:"BATCH-ADD",BATCH_START:"BATCH-START",BATCH_PROGRESS:"BATCH_PROGRESS",BATCH_FINISH:"BATCH-FINISH",BATCH_ABORT:"BATCH-ABORT",BATCH_CANCEL:"BATCH-CANCEL",BATCH_ERROR:"BATCH-ERROR",BATCH_FINALIZE:"BATCH-FINALIZE",ITEM_START:"FILE-START",ITEM_CANCEL:"FILE-CANCEL",ITEM_PROGRESS:"FILE-PROGRESS",ITEM_FINISH:"FILE-FINISH",ITEM_ABORT:"FILE-ABORT",ITEM_ERROR:"FILE-ERROR",ITEM_FINALIZE:"FILE-FINALIZE",REQUEST_PRE_SEND:"REQUEST_PRE_SEND",ALL_ABORT:"ALL_ABORT"}),ot=(Ve({ITEM_PROGRESS:"ITEM_PROGRESS",BATCH_PROGRESS:"BATCH_PROGRESS"}),[He,Ue,De,Le]);n(30964),n(99863);const at=e=>!!e&&"object"==typeof e&&("Object"===Object.getPrototypeOf(e)?.constructor.name||null===Object.getPrototypeOf(e)),it=(e={})=>{const t=(n,...s)=>(n&&s.length&&s.forEach((s=>{s&&((e,t)=>{const n=Object.keys(e);return t.withSymbols?n.concat(Object.getOwnPropertySymbols(e)):n})(s,e).forEach((r=>{const o=s[r];var a;e.predicate&&!e.predicate(r,o)||(void 0!==o||e.undefinedOverwrites)&&(at(a=o)||Array.isArray(a)?(void 0!==n[r]&&at(n[r])||(n[r]=Array.isArray(o)?[]:{}),t(n[r],o)):n[r]=o)}))})),n);return t},lt=(it(),(()=>"object"==typeof window&&!!window.document)()&&window.requestIdleCallback);lt?window.requestIdleCallback:setTimeout,lt?window.cancelIdleCallback:clearTimeout,Symbol.for("__rpldy-bi__");const ct=Symbol.for("__rpldy-sstt-proxy__"),dt=Symbol.for("__rpldy-sstt-state__"),ut=(it({withSymbols:!0,predicate:e=>e!==ct&&e!==dt}),Ye({undefinedOverwrites:!0})),mt=(e,t,n,s,r,o)=>et(e.trigger,r,t,s).then((e=>(o?.(e),((e,t,n,s)=>{let r=n,o=t;if(s){if($e(`uploader.queue: REQUEST_PRE_SEND(${e}) event returned updated items/options`,s),s.items){if(s.items.length!==t.length||!ze(s.items,t,["id","batchId","recycled"]))throw new Error(`REQUEST_PRE_SEND(${e}) event handlers must return same items with same ids`);o=s.items}s.options&&(r=ut({},n,s.options))}return{items:o,options:r,cancelled:!1===s}})(r,n,s,e)))),pt=(e,t)=>{if(t.items[0]&&e.getState().batches[t.items[0].batchId]){e.updateState((e=>{t.items.forEach((t=>{var n;n=e.items[t.id],ot.includes(n.state)||(e.items[t.id]=t)})),e.batches[t.items[0].batchId].batchOptions=t.options}));const n=e.getState();t.items=t.items.map((e=>n.items[e.id])),t.options=n.batches[t.items[0].batchId].batchOptions}},gt=(e,t,n=null,s=null)=>(r,o)=>((e,t,n,s,r,o)=>{const a=n(t),i=e.getState().batches[a[0].batchId].batchOptions,l=s?.(t,i)||t;return mt(e,l,a,i,o,r).then((t=>(t.cancelled||pt(e,t),t)))})(r,o,t,n,s,e),ht=(gt(rt.BATCH_START,(e=>e.items),null,(({batch:e}={batch:!1})=>{if(e)throw new Error("BATCH_START event handlers cannot update batch data. Only items & options")})),rt.ITEM_START,rt.ITEM_FINISH,rt.ITEM_ERROR,rt.ITEM_CANCEL,rt.ITEM_ABORT,rt.ITEM_PROGRESS,gt(rt.REQUEST_PRE_SEND,(e=>e),((e,t)=>({items:e,options:t}))),"__rpldy-logger-debug__"),At="finished",ft="error",vt="aborted",bt=()=>"object"==typeof window&&!!window.document;let jt=null;const wt=(...e)=>{"boolean"!=typeof jt&&(jt=bt()&&("location"in window&&!!~window.location.search.indexOf("rpldy_debug=true")||!0===window[ht])),jt&&console.log(...e)};var yt=n(85679),xt=n.n(yt);n(72104);const Ct=e=>!!e&&"object"==typeof e&&("Object"===Object.getPrototypeOf(e)?.constructor.name||null===Object.getPrototypeOf(e)),Ot=((e={})=>{const t=(n,...s)=>(n&&s.length&&s.forEach((s=>{s&&((e,t)=>{const n=Object.keys(e);return t.withSymbols?n.concat(Object.getOwnPropertySymbols(e)):n})(s,e).forEach((r=>{const o=s[r];var a;e.predicate&&!e.predicate(r,o)||(void 0!==o||e.undefinedOverwrites)&&(Ct(a=o)||Array.isArray(a)?(void 0!==n[r]&&Ct(n[r])||(n[r]=Array.isArray(o)?[]:{}),t(n[r],o)):n[r]=o)}))})),n);return t})(),Et=(e,t)=>e&&Object.keys(e).reduce(((n,s)=>(~t.indexOf(s)&&(n[s]=e[s]),n)),{});const St=function(e){return!!e&&"object"==typeof e&&"function"==typeof e.then},It=bt()&&window.requestIdleCallback;It?window.requestIdleCallback:setTimeout,It?window.cancelIdleCallback:clearTimeout,Symbol.for("__rpldy-bi__");const Rt=class extends Promise{constructor(e,t){super(e),this.xhr=t}},Mt=e=>{let t;try{t=e.getAllResponseHeaders().trim().split(/[\r\n]+/).reduce(((e,t)=>{const[n,s]=t.split(": ");return e[n]=s,e}),{})}catch(n){wt("uploady.request: failed to read response headers",e)}return t},Tt=(e,t,n={})=>{const s=new XMLHttpRequest;return new Rt(((r,o)=>{s.onerror=()=>o(s),s.ontimeout=()=>o(s),s.onabort=()=>o(s),s.onload=()=>r(s),s.open(n?.method||"GET",e),((e,t)=>{t&&Object.keys(t).forEach((n=>{void 0!==t[n]&&e.setRequestHeader(n,t[n])}))})(s,n?.headers),s.withCredentials=!!n?.withCredentials,n?.preSend?.(s),s.send(t)}),s)},kt="rpldy-sender";class _t extends Error{constructor(e){super(`${e} didn't receive upload URL`),this.name="MissingUrlError"}}const Bt=(e,t,...n)=>{"set"in e?e.set(t,...n):("delete"in e&&e.delete(t),e.append(t,...n))},Pt=(e,t)=>{const n=new FormData;return t.params&&Object.entries(t.params).forEach((([e,s])=>{(t.formDataAllowUndefined||void 0!==s)&&Bt(n,e,s)})),((e,t,n)=>{const s=1===t.length;t.forEach(((t,r)=>{const o=s?n.paramName:xt()(n.formatGroupParamName)?n.formatGroupParamName(r,n.paramName):`${n.paramName}[${r}]`;t.file?Bt(e,o,t.file,t.file.name):t.url&&Bt(e,o,t.url)}))})(n,e,t),n},Nt=[200,201,202,203,204],Dt=(e,t,n,s,r)=>{let o;const a=r?.getRequestData?r.getRequestData(e,n):((e,t)=>{let n;if(t.sendWithFormData)wt(`uploady.sender: sending ${e.length} item(s) as form data`),n=Pt(e,t);else{if(e.length>1)throw new Error(`XHR Sender - Request without form data can only contain 1 item. received ${e.length}`);const t=e[0];wt(`uploady.sender: sending item ${t.id} as request body`),n=t.file||t.url}return n})(e,n),i=(r=t,i=a,l)=>{const c=Ot({...Et(n,["method","headers","withCredentials"]),preSend:t=>{t.upload.onprogress=t=>{t.lengthComputable&&s&&s(t,e.slice())}}},l),d=Tt(r,i,c);return o=d.xhr,d},l=r?.preRequestHandler?r.preRequestHandler(i,e,t,n,s,r):i();return{url:t,count:e.length,pXhr:l,getXhr:()=>o,aborted:!1}},Ht=(e,t,n)=>{let s=e;const r=t?.["content-type"];if(n.forceJsonResponse||r?.includes("json"))try{s=JSON.parse(e)}catch{}return s},Ut=(e,t)=>e.pXhr.then((e=>(wt("uploady.sender: received upload response ",e),((e,t)=>{const n=t.isSuccessfulCall?t.isSuccessfulCall(e):Nt.includes(e.status);return St(n)?n:Promise.resolve(n)})(e,t).then((n=>{const s=n?At:ft,r=e.status,o=Mt(e);return{status:r,state:s,response:{data:t.formatServerResponse?.(e.response,r,o)??Ht(e.response,o,t),headers:o}}}))))).catch((t=>{let n,s;return e.aborted?(n=vt,s="aborted"):(wt("uploady.sender: upload failed: ",t),n=ft,s=t),{error:!0,state:n,response:s,status:0}}));Ve({autoUpload:!0,clearPendingOnAdd:!1,inputFieldName:"file",concurrent:!1,maxConcurrent:2,grouped:!1,maxGroupSize:5,method:"POST",params:{},fileFilter:()=>!0,forceJsonResponse:!1,withCredentials:!1,destination:{},send:null,sendWithFormData:!0,formDataAllowUndefined:!1,fastAbortThreshold:100}),Fe()&&window;var Lt;Object.values(rt);const Ft=Symbol.for("_rpldy-version_"),Wt=()=>Fe()?window:globalThis||process,$t=()=>Wt()[Ft],Qt=o.createContext(null),Zt=e=>(Se()(!(()=>{const e=$t();return!!e&&"1.8.0"!==e})(),"Uploady - Valid UploadyContext not found.\nYou may be using packages of different Uploady versions. <Uploady> and all other packages using the context provider must be of the same version: %s",$t()),Se()(e&&e.hasUploader(),"Uploady - Valid UploadyContext not found. Make sure you render inside <Uploady>"),e),zt=()=>Zt((0,o.useContext)(Qt)),qt=(e,t)=>{const n=zt(),{on:s,off:r}=n;(0,o.useEffect)((()=>(s(e,t),()=>{r(e,t)})),[e,t,s,r])},Gt=(e,t)=>(n,s)=>{const[r,a]=(0,o.useState)(null);let i=n,l=s;n&&!Ze()(n)&&(l=n,i=void 0);const c=(0,o.useCallback)(((e,...n)=>{l&&e.id!==l||(a(t(e,...n)),Ze()(i)&&i(e,...n))}),[i,l]);return qt(e,c),r},Vt=(e,t=!0)=>(n,s)=>{const r=(0,o.useCallback)(((e,...r)=>!n||t&&s&&e.id!==s?void 0:n(e,...r)),[n,s]);qt(e,r)},Kt=(Vt(rt.BATCH_ADD,!1),Vt(rt.BATCH_START),Vt(rt.BATCH_FINISH),Vt(rt.BATCH_CANCEL),Vt(rt.BATCH_ERROR),Vt(rt.BATCH_FINALIZE),Vt(rt.BATCH_ABORT),Gt(rt.BATCH_PROGRESS,(e=>({...e}))),Vt(rt.ITEM_START),Vt(rt.ITEM_FINISH),Vt(rt.ITEM_CANCEL),Vt(rt.ITEM_ERROR),Vt(rt.ITEM_ABORT),Vt(rt.ITEM_FINALIZE),Gt(rt.ITEM_PROGRESS,(e=>({...e}))),Vt(rt.REQUEST_PRE_SEND,!1),Vt(rt.ALL_ABORT,!1),Symbol.for("rpldy_component"));function Yt(){return Yt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Yt.apply(this,arguments)}const Xt=({eventType:e,getIsValidEventData:t,getRequestData:n})=>s=>r=>{const a=zt(),[i,l]=(0,o.useState)({updateRequest:null,requestData:null}),{id:c}=r;return(0,o.useLayoutEffect)((()=>{const s=(...r)=>!0===t(c,...r)?new Promise((t=>{l({updateRequest:n=>{a.off(e,s),t(n)},requestData:n(...r)})})):void 0;return c&&a.on(e,s),()=>{c&&a.off(e,s)}}),[a,c]),o.createElement(s,Yt({},r,i))};Xt({eventType:rt.REQUEST_PRE_SEND,getIsValidEventData:(e,{items:t})=>!!t.find((t=>t.id===e)),getRequestData:({items:e,options:t})=>({items:e,options:t})}),Xt({eventType:rt.BATCH_START,getIsValidEventData:(e,t)=>t.id===e,getRequestData:(e,t)=>({batch:e,items:e.items,options:t})});function Jt(){return Jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Jt.apply(this,arguments)}const en=(e,t,n)=>{const s="dragleave"===e.type?e.relatedTarget:e.target;return s===t||n&&t?.contains(s)},tn=(0,o.forwardRef)((({className:e,id:t,children:n,onDragOverClassName:s,dropHandler:r,htmlDirContentParams:a,shouldRemoveDragOver:i,shouldHandleDrag:l,enableOnContains:c=!0,extraProps:d,...u},m)=>{const{upload:p}=zt(),g=(0,o.useRef)(null),h=(0,o.useRef)(!1);(0,o.useImperativeHandle)(m,(()=>g.current),[]);const A=(0,o.useRef)();A.current=u;const f=(0,o.useCallback)((()=>{h.current=!1,g.current&&s&&g.current.classList.remove(s)}),[s,g]),v=(0,o.useCallback)((e=>{const t=()=>(0,Ce.getFilesFromDragEvent)(e,a||{});return r?Promise.resolve(r(e,t)):t()}),[r,a]),b=(0,o.useCallback)((e=>{v(e).then((e=>{p(e,A.current)}))}),[p,v,A]),j=(0,o.useCallback)((e=>{((e,t)=>(0,Oe.Im)(t)||!0===t||(0,Oe.Tn)(t)&&t(e))(e,l)&&en(e,g.current,c)&&(h.current=!0,g.current&&s&&g.current.classList.add(s))}),[s,g,l,c]),w=(0,o.useCallback)((e=>{h.current&&e.preventDefault()}),[]),y=(0,o.useCallback)((e=>{h.current&&(e.preventDefault(),e.persist(),f(),b(e))}),[f,b]),x=(0,o.useCallback)((e=>{(h.current&&!en(e,g.current,c)||i?.(e))&&f()}),[f,g,i,c]),C=(0,o.useCallback)((e=>{h.current&&(e.preventDefault(),e.stopPropagation(),f())}),[f]);return o.createElement("div",Jt({id:t,className:e,ref:g,onDragOver:w,onDragEnter:j,onDrop:y,onDragLeave:x,onDragEnd:C},d),n)}));tn[Kt]=!0;const nn=tn,sn="SCPrivateMessageEditor",rn=10485760,on=(0,de.If)((0,o.forwardRef)(((e,t)=>(0,r.jsx)(I.A,Object.assign({},e,{ref:t,color:"inherit"},{children:(0,r.jsx)(E.A,{children:"upload"})}))))),an={root:`${sn}-message-media-uploader-root`,uploadSection:`${sn}-upload-section`,uploadButton:`${sn}-upload-button`,closeButton:`${sn}-close-button`,previewContent:`${sn}-preview-content`,previewItem:`${sn}-preview-item`,previewActions:`${sn}-preview-actions`,progress:`${sn}-progress`,previewInfo:`${sn}-preview-info`},ln=(0,g.Ay)(fe.A,{name:sn,slot:"MessageMediaUploader"})((()=>({})));function cn(e){const{className:t,forwardMessageFile:n,onClose:s,isUploading:a,action:i}=e,[c,d]=(0,o.useState)([]),[u,p]=(0,o.useState)({}),[g,A]=(0,o.useState)([]),[f,v]=(0,o.useState)({}),[b,j]=(0,o.useState)({}),w=(0,o.useContext)(Ae.GD),y=(e,t)=>e.filter((e=>e.file_uuid!=t)),x=e=>()=>{delete f[e],v(Object.assign({},f))};return(0,r.jsxs)(ln,Object.assign({className:T()(an.root,t)},{children:[(0,r.jsx)(ue.A,{action:(0,r.jsx)(E.A,Object.assign({onClick:s,className:an.closeButton},{children:"close"}))}),Object.keys(f).map((e=>(0,r.jsx)(me.A,Object.assign({in:!0},{children:(0,r.jsxs)(ce.A,Object.assign({severity:"error",onClose:x(e)},{children:[(0,r.jsx)(pe.A,{children:f[e].name}),f[e].error]}))}),e))),(0,r.jsx)(ne.A,{children:(0,r.jsxs)(he.Ay,Object.assign({destination:{url:`${w.settings.portal}${l.A.PrivateMessageUploadMediaInChunks.url()}`,headers:{Authorization:`Bearer ${w.settings.session.authToken.accessToken}`},method:l.A.PrivateMessageUploadMediaInChunks.method},chunkSize:204800,multiple:!0,chunked:!0,maxConcurrent:2,fileFilter:e=>e.size<rn},{children:[(0,r.jsx)(xe,{onSuccess:e=>{d((t=>[...t,e]))},onProgress:e=>{p(Object.assign({},e)),A([...c,...Object.values(e)]),a(0!==Object.keys(e).length),0===Object.keys(e).length&&0!==Object.keys(u).length&&n(c)},onError:(e,t)=>{v(Object.assign(Object.assign({},f),{[e.id]:Object.assign(Object.assign({},e),{error:t})}))}}),!c.length&&0===Object.keys(u).length&&0===Object.keys(f).length&&(0,r.jsxs)(nn,Object.assign({className:an.uploadSection},{children:[(0,r.jsx)(on,{inputFieldName:"file",className:an.uploadButton}),(0,r.jsx)(S.A,Object.assign({textAlign:"center",fontWeight:"medium"},{children:(0,r.jsx)(ee.A,{id:"ui.privateMessage.editor.media.uploader.msg",defaultMessage:"ui.privateMessage.editor.media.uploader.msg"})}))]})),(0,r.jsxs)(se.A,Object.assign({className:an.previewContent},{children:[0!==g.length&&g.map(((e,t)=>{var s,a,i;return(0,r.jsx)(o.Fragment,{children:"file"in e&&(0,r.jsxs)(h.Ay,Object.assign({className:an.previewItem},(a=()=>(e=>{j((t=>Object.assign(Object.assign({},t),{[e]:!0})))})(e.file_uuid),i=()=>(e=>{j((t=>Object.assign(Object.assign({},t),{[e]:!1})))})(e.file_uuid),{onMouseEnter:a,onMouseLeave:i,onTouchStart:a,onTouchMove:i}),{children:["video_url"in e?(0,r.jsx)("video",{src:e.video_url}):(0,r.jsx)("img",{src:e.file.type.startsWith(m.em.PDF)&&!e.file_url?U:e.file_url?e.file_url:L}),(0,r.jsx)(ge.A,{className:T()(an.previewActions,{[an.progress]:e.completed}),title:void 0!==e.completed&&0!==e.completed&&(0,r.jsx)(S.A,Object.assign({textAlign:"center"},{children:`${Math.round(e.completed)}%`})),actionIcon:(0,r.jsx)(r.Fragment,{children:b[e.file_uuid]&&0===Object.keys(u).length&&(0,r.jsx)(I.A,Object.assign({onClick:()=>{return(t=e.file_uuid)?(A((e=>y(e,t))),d((e=>y(e,t))),n(y(c,t))):(d([]),A([]),n([])),void p({});var t},size:"small"},{children:(0,r.jsx)(E.A,{children:"delete"})}))})}),b[e.file_uuid]&&(0,r.jsxs)(C.A,Object.assign({component:"span",className:an.previewInfo},{children:[(0,r.jsx)(S.A,Object.assign({noWrap:!0,textAlign:"center"},{children:e.file.name})),(0,r.jsx)(S.A,Object.assign({textAlign:"center",fontWeight:"light"},{children:B(e.file.size)}))]}))]}),null!==(s=e.id)&&void 0!==s?s:e.file_uuid)},t)})),0!==g.length&&i]}))]}))})]}))}var dn=n(4032),un=n(23922);const mn=(0,J.YK)({placeholder:{id:"ui.privateMessage.editor.placeholder",defaultMessage:"ui.privateMessage.editor.placeholder"}}),pn={root:`${sn}-root`,ios:`${sn}-ios`,messageInput:`${sn}-message-input`,mediaUploader:`${sn}-media-uploader`,emojiSection:`${sn}-emoji-section`},gn=(0,g.Ay)(C.A,{name:sn,slot:"Root"})((()=>({})));const hn=function(e){const t=(0,k.A)({props:e,name:sn}),{autoHide:n=null,className:a=null,send:i=null,onThreadChangeId:l,error:c=!1,onErrorRemove:d=null,autoHideDeletion:u}=t,m=(0,s.__rest)(t,["autoHide","className","send","onThreadChangeId","error","onErrorRemove","autoHideDeletion"]),[p,g]=(0,o.useState)(""),[h,A]=(0,o.useState)([]),[f,v]=(0,o.useState)(!1),[b,j]=(0,o.useState)(!1),[w,y]=(0,o.useState)(null),[x,C]=(0,o.useState)(!1),O=(0,R.A)(),S=(0,o.useRef)(null),M=()=>{v(!1),A([])},_=e=>{A(e)},B=()=>{h.length?h.map((e=>{i(p,e.file_uuid)})):i(p,""),g(""),A([]),v(!1),j(!1)},P=e=>{g(e.target.value)},N=(e,t)=>{const n=S.current.selectionEnd,s=S.current.value.substring(0,S.current.selectionStart),r=S.current.value.substring(S.current.selectionStart);g(s+e.emoji+r),setTimeout((()=>{S.current.selectionStart=S.current.selectionEnd=n+e.emoji.length}),50)};(0,o.useEffect)((()=>{y(l),w!==l&&(g(""),A([]),v(!1))}),[l]);const D=(0,o.useMemo)((()=>(0,un.O)()),[]);return n||u?(0,r.jsx)(ce.A,Object.assign({severity:u?"warning":"info"},{children:u?(0,r.jsx)(ee.A,{id:"ui.privateMessage.editor.disabled.deleted.msg",defaultMessage:"ui.privateMessage.editor.disabled.deleted.msg"}):(0,r.jsx)(ee.A,{id:"ui.privateMessage.editor.disabled.msg",defaultMessage:"ui.privateMessage.editor.disabled.msg"})})):c?(0,r.jsx)(ce.A,Object.assign({severity:"error",action:(0,r.jsx)(I.A,Object.assign({color:"inherit",size:"small",onClick:d},{children:(0,r.jsx)(E.A,{children:"close"})}))},{children:(0,r.jsx)(ee.A,{id:"ui.privateMessage.editor.error.send.msg",defaultMessage:"ui.privateMessage.editor.error.send.msg"})})):(0,r.jsx)(gn,Object.assign({},m,{className:T()(pn.root,a,{[pn.ios]:D})},{children:(0,r.jsx)(r.Fragment,{children:f?(0,r.jsx)(cn,{className:pn.mediaUploader,open:f,onClose:M,forwardMessageFile:_,isUploading:C,action:(0,r.jsx)(I.A,Object.assign({disabled:!p&&!h.length||x,onClick:B},{children:(0,r.jsx)(E.A,{children:"send"})}))}):(0,r.jsxs)(r.Fragment,{children:[b&&(0,r.jsx)(dn.A,{className:pn.emojiSection,onEmojiClick:N,width:"100%",searchDisabled:!0}),(0,r.jsx)(le.A,{size:"small",inputRef:S,disabled:Boolean(h.length)||f,className:pn.messageInput,multiline:!0,placeholder:`${O.formatMessage(mn.placeholder)}`,value:p,onChange:P,maxRows:2,onSelect:()=>j(!1),InputProps:{startAdornment:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I.A,Object.assign({disabled:f,onClick:()=>j(!b)},{children:(0,r.jsx)(E.A,{children:"sentiment_satisfied_alt"})})),(0,r.jsx)(I.A,Object.assign({disabled:""!==p||b,onClick:()=>v(!0)},{children:(0,r.jsx)(E.A,{children:"attach_file"})}))]}),endAdornment:(0,r.jsx)(I.A,Object.assign({disabled:!p&&!h.length||x,onClick:B},{children:(0,r.jsx)(E.A,{children:"send"})}))}})]})})}))},An="SCPrivateMessageThread",fn={root:`${An}-skeleton-root`,list:`${An}-list`,editor:`${An}-editor`},vn=(0,g.Ay)(te.A,{name:An,slot:"SkeletonRoot"})((()=>({})));function bn(e){const t=(0,A.A)(),n=(0,f.A)(t.breakpoints.down("sm"));return(0,r.jsx)(vn,Object.assign({className:fn.root},e,{children:(0,r.jsxs)(ne.A,{children:[(0,r.jsxs)(se.A,Object.assign({className:fn.list},{children:[(0,r.jsx)(re.A,Object.assign({sx:{display:"flex",justifyContent:"center"}},{children:(0,r.jsx)(b.A,{animation:"wave",height:30,width:120,style:{borderRadius:20}})})),[...Array(n?6:8)].map(((e,t)=>(0,r.jsx)(x,{index:t},t)))]})),(0,r.jsx)(C.A,Object.assign({className:fn.editor},{children:(0,r.jsx)(b.A,{animation:"wave",height:55,width:"100%",variant:"rectangular"})}))]})}))}var jn=n(81327),wn=n(21022),yn=n(43749);const xn=(0,J.YK)({placeholder:{id:"ui.privateMessage.thread.newMessage.autocomplete.placeholder",defaultMessage:"ui.privateMessage.thread.newMessage.autocomplete.placeholder"},messageDeleted:{id:"ui.privateMessage.thread.message.deleted",defaultMessage:"ui.privateMessage.thread.message.deleted"}}),Cn={root:`${An}-root`,subHeader:`${An}-subheader`,section:`${An}-section`,emptyMessage:`${An}-empty-message`,newMessageHeader:`${An}-new-message-header`,newMessageHeaderContent:`${An}-new-message-header-content`,newMessageHeaderIcon:`${An}-new-message-header-icon`,newMessageContent:`${An}-new-message-content`,sender:`${An}-sender`,receiver:`${An}-receiver`,avatar:`${An}-avatar`,item:`${An}-item`,autocomplete:`${An}-autocomplete`,autocompleteDialog:`${An}-autocomplete-dialog`,editor:`${An}-editor`},On=(0,g.Ay)(te.A,{name:An,slot:"Root"})((()=>({})));const En=function(e){const t=(0,k.A)({props:e,name:An}),{threadObj:n,openNewMessage:g=!1,onNewMessageClose:h=null,onNewMessageSent:A=null,onSingleMessageOpen:f=null,className:v,type:b}=t,j=(0,s.__rest)(t,["threadObj","openNewMessage","onNewMessageClose","onNewMessageSent","onSingleMessageOpen","className","type"]),w=(0,o.useContext)(c.T6),[y,O]=(0,o.useState)(""),[M,_]=(0,o.useState)(null),[B,P]=(0,o.useState)([]),[N,D]=(0,o.useState)(!0),[U,L]=(0,o.useState)(!1),[F,W]=(0,o.useState)({}),[$,Q]=(0,o.useState)([]),Z=n&&n===m.v8.NEW,z=w.user?w.user.id:null,[q,G]=(0,o.useState)(null),[V,Y]=(0,o.useState)(null),[J,te]=(0,o.useState)(null),[ce,de]=(0,o.useState)(!1),[ue,me]=(0,o.useState)(!1),[pe,ge]=(0,o.useState)([]),{enqueueSnackbar:he,closeSnackbar:Ae}=(0,H.dh)(),fe="number"==typeof n,ve=(e,t)=>{var n,s,r;return(null===(n=null==e?void 0:e.receiver)||void 0===n?void 0:n.id)!==t?null===(s=null==e?void 0:e.receiver)||void 0===s?void 0:s.id:null===(r=null==e?void 0:e.sender)||void 0===r?void 0:r.id},[be,je]=(0,o.useState)(!1),xe=(0,o.useRef)(null),Ce=(0,R.A)(),{scUser:Oe}=(0,d.A)({id:fe&&n,threadObj:n}),Ee=(0,o.useRef)(null),Se=()=>{var e;null===(e=Ee.current)||void 0===e||e.scrollIntoView({block:"end",behavior:"instant"})},Ie=e=>Ce.formatDate(e.created_at,{year:"numeric",day:"numeric",month:"long"}),Re=(0,o.useMemo)((()=>{const e=[...B];return(0,jn.$z)(e,Ie)}),[B]),Me=()=>{me(!1)},Te=(0,o.useMemo)((()=>pe?Array.isArray(pe)?pe.map((e=>parseInt(e.id,10))):[parseInt(pe.id||pe,10)]:[]),[pe,g]),ke=(e,t,n)=>{switch(n){case"input":O(t),!t&&Q([]);break;case"reset":O(t)}},_e=(e,t,n)=>{switch(e.preventDefault(),e.stopPropagation(),n){case"selectOption":Be(e),ge(t);break;case"removeOption":Be(e,t)}return!1},Be=(e,t)=>{O(""),Q([]),ge(null!=t?t:[])},Pe=()=>{Be(),h&&h()};function Ne(e,t,n,s){const r=new URL(e);return r.searchParams.set(t,n),r.searchParams.delete(s),r.toString()}const De=(0,o.useMemo)((()=>()=>{if(M)return i.A.request({url:M,method:l.A.GetAThread.method}).then((e=>{const t=[...B];t.unshift(...e.data.results),P(t),_(e.data.next&&Ne(e.data.next,"before_message",e.data.results[0].id,"offset"))})).catch((e=>console.log(e)))}),[M,B]),He=e=>{const t=new Date(e);return(new Date).getTime()-t.getTime()<6e4};function Ue(){const e=He(J.created_at);a.A.deleteAMessage(J.id).then((()=>{const t=B.filter((e=>e.id!==J.id));e?P(t):function(e){const t=[...B],n=t.findIndex((t=>t.id===e));-1!==n&&(t[n].message=`${Ce.formatMessage(xn.messageDeleted)}`,t[n].file=null,t[n].status=m.v8.HIDDEN,P(t))}(J.id),Le(t.length>=1&&e||!e&&J.id!==B.slice(-1)[0].id?t.slice(-1):[J]),Me()})).catch((e=>{console.log(e);let t=he((0,r.jsx)(ee.A,{id:"ui.privateMessage.thread.error.delete.msg",defaultMessage:"ui.privateMessage.thread.error.delete.msg"}),{variant:"error",SnackbarProps:{onClick:()=>{Ae(t)}}})}))}function Le(e){X().publish("snippetsChannel",e)}function Fe(e,t){u.lT(w.user)?he((0,r.jsx)(ee.A,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3}):i.A.request({url:l.A.SendMessage.url(),method:l.A.SendMessage.method,data:Object.assign(Object.assign({},b===m.DZ.GROUP?{group:fe?n:n.group.id}:{recipients:g||Z||ce?Te:[fe&&n?n:ve(n,z)]}),{message:e,file_uuid:t&&!e?t:null})}).then((e=>{const t=e.data.length<=1;t&&P((t=>[...t,e.data[0]])),Le(e.data),(g||ce)&&(de(!1),f(!1),ge([]),A(e.data[0],t)),Se()})).catch((e=>{console.log(e),je(!0)}))}const We=(0,o.useCallback)((()=>()=>{D(!0),P([]),_(null),Y(null),de(!1)}),[D,P,_,Y,de]);(0,o.useEffect)((()=>{y&&(L(!0),a.A.searchUser(y).then((e=>{L(!1),Q(e.results.filter((e=>e.id!==z)))})).catch((e=>{L(!1),console.log(e)})))}),[y]),(0,o.useEffect)((()=>{z&&(n?function(){if(n&&"string"!=typeof n&&b!==m.DZ.GROUP){D(!0);const e=fe?n:ve(n,z);a.A.getAThread({user:e,limit:10}).then((t=>{P(t.results),_(t.next&&Ne(t.next,"before_message",t.results[0].id,"offset")),t.results.length?(t.results[0].receiver.id!==z?Y(t.results[0].receiver):Y(t.results[0].sender),de(!1)):(null==Oe?void 0:Oe.can_send_pm_to)?(de(!0),ge(e),f(!0),G(Oe)):de(!1),D(!1)})).catch((e=>{D(!1),console.log(e),ye.V.error(we.d,{error:e})}))}else b===m.DZ.GROUP&&a.A.getAThread({group:fe?n:n.group.id,limit:10}).then((e=>{P(e.results),_(e.next&&Ne(e.next,"before_message",e.results[0].id,"offset")),D(!1),de(!1)})).catch((e=>{D(!1),console.log(e),ye.V.error(we.d,{error:e})}))}():We())}),[n,z,Oe]);const $e=(e,t)=>{const s=t.data,r=[...B].findIndex((e=>e.thread_id===s.thread_id)),o=s.notification_obj.message;o.receiver=s.notification_obj.snippet.receiver,o.thread_status=s.notification_obj.snippet.thread_status,Le([o]),-1!==r&&P((e=>[...e,s.notification_obj.message])),(fe?n===s.thread_id:n.id===s.thread_id)&&Se()};return(0,o.useEffect)((()=>(xe.current=X().subscribe(`${p.f.INTERACTION}.${p.x.PRIVATE_MESSAGE}`,$e),()=>{X().unsubscribe(xe.current)})),[B]),z?(0,r.jsx)(On,Object.assign({},j,{className:T()(Cn.root,v)},{children:null===n||Z||ce?(0,r.jsx)(ne.A,{children:Z||ce?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(C.A,Object.assign({className:Cn.newMessageHeader},{children:[(0,r.jsxs)(C.A,Object.assign({className:Cn.newMessageHeaderContent},{children:[(0,r.jsx)(E.A,Object.assign({className:Cn.newMessageHeaderIcon},{children:"person"})),(0,r.jsx)(S.A,{children:(0,r.jsx)(ee.A,{defaultMessage:"ui.privateMessage.thread.newMessage.to",id:"ui.privateMessage.thread.newMessage.to"})}),(0,r.jsx)(ie.A,{className:Cn.autocomplete,loading:U,multiple:!ce,limitTags:3,freeSolo:!0,disableClearable:!0,options:$,onChange:_e,onInputChange:ke,inputValue:y,value:ce?q:pe,getOptionLabel:e=>e?e.username:"...",isOptionEqualToValue:(e,t)=>!!e&&t.id===e.id,renderInput:e=>(0,r.jsx)(le.A,Object.assign({},e,{placeholder:ce?"...":`${Ce.formatMessage(xn.placeholder)}`,variant:"standard",InputProps:Object.assign(Object.assign({},e.InputProps),{disableUnderline:!0})})),classes:{popper:Cn.autocompleteDialog},disabled:Boolean(q)})]})),(0,r.jsx)(I.A,Object.assign({size:"small",onClick:Pe},{children:(0,r.jsx)(E.A,{children:"close"})}))]})),(0,r.jsx)(se.A,{className:Cn.newMessageContent}),(0,r.jsx)(hn,{className:Cn.editor,send:Fe,autoHide:!$,error:be,onErrorRemove:()=>je(!1)})]}):(0,r.jsx)(S.A,Object.assign({className:Cn.emptyMessage},{children:(0,r.jsx)(ee.A,{id:"ui.privateMessage.thread.emptyBox.message",defaultMessage:"ui.privateMessage.thread.emptyBox.message"})}))}):N?(0,r.jsx)(bn,{}):(0,r.jsxs)(ne.A,{children:[(0,r.jsx)(yn.A,Object.assign({height:"100%",dataLength:B.length,previous:De,inverse:!0,hasMorePrevious:Boolean(M),loaderPrevious:(0,r.jsx)(x,{})},{children:(0,r.jsx)(se.A,Object.assign({ref:Ee},{children:Object.keys(Re).map((e=>(0,r.jsx)("li",Object.assign({className:Cn.section},{children:(0,r.jsxs)("ul",{children:[(0,r.jsx)(re.A,{children:(0,r.jsx)(S.A,Object.assign({align:"center",className:Cn.subHeader},{children:e}))}),Re[e].map((e=>{var t;return(0,r.jsxs)(C.A,Object.assign({className:Cn.item},{children:[e.group&&(null===(t=null==w?void 0:w.user)||void 0===t?void 0:t.username)!==e.sender.username&&(0,r.jsx)(oe.A,{children:(0,r.jsx)(ae.A,{alt:e.sender.username,src:e.sender.avatar,className:Cn.avatar})}),(0,r.jsx)(K,{className:z===e.sender.id?Cn.sender:Cn.receiver,message:e,mouseEvents:{onMouseEnter:()=>{return t=e.id,void W((e=>Object.assign(Object.assign({},e),{[t]:!0})));var t},onMouseLeave:()=>{return t=e.id,void W((e=>Object.assign(Object.assign({},e),{[t]:!1})));var t}},isHovering:F[e.id],showMenuIcon:z===e.sender.id,onMenuIconClick:()=>(e=>{me(!0),te(e)})(e)},e.id)]}),e.id)}))]})}),e)))}))})),(0,r.jsx)(hn,{className:Cn.editor,send:Fe,autoHide:b!==m.DZ.GROUP&&!(null==Oe?void 0:Oe.can_send_pm_to),autoHideDeletion:b===m.DZ.USER&&((null==V?void 0:V.deleted)||(null==Oe?void 0:Oe.deleted)),onThreadChangeId:fe?n:b===m.DZ.USER?n.receiver.id:n.group.id,error:be,onErrorRemove:()=>je(!1)}),ue&&(0,r.jsx)(wn.A,{open:ue,title:(0,r.jsx)(ee.A,{id:"ui.privateMessage.component.delete.message.dialog.msg",defaultMessage:"ui.privateMessage.component.delete.message.dialog.msg"}),btnConfirm:(0,r.jsx)(ee.A,{id:"ui.privateMessage.component.delete.message.dialog.confirm",defaultMessage:"ui.privateMessage.component.delete.message.dialog.confirm"}),onConfirm:Ue,onClose:Me})]})})):null}},29251:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var s=n(31635),r=n(74848),o=n(19546),a=n.n(o),i=n(11848),l=n(46831),c=n(44675),d=n(15327),u=n(4671),m=n(40059),p=n(77037),g=n(28968),h=n(15993),A=n(5448);const f="SCBaseDialog",v={root:`${f}-root`,titleRoot:`${f}-title-root`},b=(0,i.Ay)(l.A,{name:f,slot:"Root",overridesResolver:(e,t)=>t.titleRoot})((({theme:e})=>({}))),j=({children:e=null,onClose:t=null})=>{const n=(0,c.A)(),s=(0,d.A)(n.breakpoints.down("md"),{noSsr:(0,A.Nh)()});return(0,r.jsxs)(b,Object.assign({className:v.titleRoot},{children:[(0,r.jsx)("span",{children:e}),t?(0,r.jsx)(u.A,Object.assign({"aria-label":"close",onClick:t},{children:(0,r.jsx)(m.A,{children:s?"arrow_back":"close"})})):null]}))},w=(0,i.Ay)(p.A,{name:f,slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({})));const y=function(e){const t=(0,c.A)(),n=(0,d.A)(t.breakpoints.down("md"),{noSsr:(0,A.Nh)()}),o=n,{className:i="",title:l="",subtitle:u=null,DialogContentProps:m={dividers:!n},open:p=!1,onClose:f=null,actions:b=null,children:y,maxWidth:x="sm",scroll:C="body"}=e,O=(0,s.__rest)(e,["className","title","subtitle","DialogContentProps","open","onClose","actions","children","maxWidth","scroll"]);return(0,r.jsxs)(w,Object.assign({className:a()(v.root,i),fullScreen:o,fullWidth:!0,open:p,onClose:f,maxWidth:x,scroll:C},O,{children:[(0,r.jsx)(j,Object.assign({onClose:f},{children:l})),u&&u,(0,r.jsx)(g.A,Object.assign({},m,{children:y})),b&&(0,r.jsx)(h.A,{children:b})]}))}},30964:e=>{e.exports=function(e){return"function"==typeof e}},36686:e=>{e.exports=function(e){return"function"==typeof e}},37763:e=>{e.exports=function(){return!0}},40608:e=>{e.exports=function(e){return"function"==typeof e}},44817:(e,t,n)=>{"use strict";n.d(t,{Cy:()=>m,HY:()=>g,K$:()=>u,Xl:()=>h,lT:()=>A,qc:()=>d,sb:()=>p});var s=n(33439);const r="admin",o="moderator",a="editor",i="publisher",l=1;function c(e){if(e&&e.role){const t=e.role;if(t===r)return r;if(t===o)return o;if(t===a)return a;if(t===i)return i}return null}function d(e){return c(e)===r}function u(e){return e&&e.id===l}function m(e){return c(e)===o}function p(e){return c(e)===a}function g(e){return c(e)===i}function h(e){return d(e)||m(e)||p(e)}function A(e){return e&&e.status&&e.status===s.O.BLOCKED}},46222:(e,t,n)=>{"use strict";const s=n(80748);"undefined"!=typeof window&&"Worker"in window&&(s.GlobalWorkerOptions.workerPort=new Worker(new URL(n.p+n.u(51114),n.b))),e.exports=s},46291:e=>{e.exports=function(){return!0}},47265:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var s=n(96540),r=n(42269),o=n(13550),a=n(29368),i=n(27375),l=n(94520),c=n(2877);function d({id:e=null,user:t=null}){const n=(0,c.X1)(),d=n.user?n.user.id:null,u=(0,s.useMemo)((()=>d?t:(0,i.$i)(t,["connection_status"])),[t]),[m,p]=(0,s.useState)(u),[g,h]=(0,s.useState)(null),[A,f]=(0,s.useState)(!1),v=(0,s.useMemo)((()=>()=>o.A.request({url:a.A.User.url({id:t?t.id:e}),method:a.A.User.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[e,t]),b=(0,s.useMemo)((()=>()=>A?Promise.reject():(f(!0),v().then((e=>{f(!1),p(d?e:(0,i.$i)(e,["connection_status"]))})).catch((t=>{f(!1),h(`Unable to refresh user with id ${e}`),l.V.error(r.K,`Unable to refresh user with id ${e}`),l.V.error(r.K,t.message)})))),[v,A]);return(0,s.useEffect)((()=>{e?v().then((e=>{p(d?e:(0,i.$i)(e,["connection_status"]))})).catch((t=>{h(`User with id ${e} not found`),l.V.error(r.K,`User with id ${e} not found`),l.V.error(r.K,t.message)})):p(u)}),[e,u]),{scUser:m,setSCUser:p,refresh:b,refreshing:A,error:g}}},49350:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});n(96540);var s=n(30332),r=n(74848);const o=(0,s.A)((0,r.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},63152:e=>{e.exports=function(e){return"function"==typeof e}},67733:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var s=n(78739),r=n(96554),o=n(96540),a=n(37273),i=n(79343),l=n(33571),c=n(39599),d=n(82858),u=n(74848);const m=["className","component"];var p=n(79071),g=n(21789),h=n(58312);const A=(0,n(38413).A)("MuiBox",["root"]),f=(0,g.A)(),v=function(e={}){const{themeId:t,defaultTheme:n,defaultClassName:p="MuiBox-root",generateClassName:g}=e,h=(0,i.default)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(l.A);return o.forwardRef((function(e,o){const i=(0,d.A)(n),l=(0,c.A)(e),{className:A,component:f="div"}=l,v=(0,r.A)(l,m);return(0,u.jsx)(h,(0,s.A)({as:f,ref:o,className:(0,a.A)(A,g?g(p):p),theme:t&&i[t]||i},v))}))}({themeId:h.A,defaultTheme:f,defaultClassName:A.root,generateClassName:p.A.generate}),b=v},72104:e=>{e.exports=function(){return!0}},80766:(e,t,n)=>{"use strict";n.d(t,{A:()=>k});var s=n(85486),r=n(59703),o=n(96540),a=n(54533),i=n(75659),l=n(771),c=n(11848),d=n(25669),u=n(6025),m=n(28466),p=n(57416),g=n(38413),h=n(31609);function A(e){return(0,h.Ay)("MuiAlert",e)}const f=(0,g.A)("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);var v=n(4671),b=n(30332),j=n(74848);const w=(0,b.A)((0,j.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),y=(0,b.A)((0,j.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),x=(0,b.A)((0,j.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),C=(0,b.A)((0,j.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined");var O=n(49350);const E=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],S=(0,c.Ay)(p.A,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${(0,m.A)(n.color||n.severity)}`]]}})((({theme:e})=>{const t="light"===e.palette.mode?l.e$:l.a,n="light"===e.palette.mode?l.a:l.e$;return(0,r.A)({},e.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter((([,e])=>e.main&&e.light)).map((([s])=>({props:{colorSeverity:s,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${s}Color`]:t(e.palette[s].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${s}StandardBg`]:n(e.palette[s].light,.9),[`& .${f.icon}`]:e.vars?{color:e.vars.palette.Alert[`${s}IconColor`]}:{color:e.palette[s].main}}}))),...Object.entries(e.palette).filter((([,e])=>e.main&&e.light)).map((([n])=>({props:{colorSeverity:n,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${n}Color`]:t(e.palette[n].light,.6),border:`1px solid ${(e.vars||e).palette[n].light}`,[`& .${f.icon}`]:e.vars?{color:e.vars.palette.Alert[`${n}IconColor`]}:{color:e.palette[n].main}}}))),...Object.entries(e.palette).filter((([,e])=>e.main&&e.dark)).map((([t])=>({props:{colorSeverity:t,variant:"filled"},style:(0,r.A)({fontWeight:e.typography.fontWeightMedium},e.vars?{color:e.vars.palette.Alert[`${t}FilledColor`],backgroundColor:e.vars.palette.Alert[`${t}FilledBg`]}:{backgroundColor:"dark"===e.palette.mode?e.palette[t].dark:e.palette[t].main,color:e.palette.getContrastText(e.palette[t].main)})})))]})})),I=(0,c.Ay)("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),R=(0,c.Ay)("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),M=(0,c.Ay)("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),T={success:(0,j.jsx)(w,{fontSize:"inherit"}),warning:(0,j.jsx)(y,{fontSize:"inherit"}),error:(0,j.jsx)(x,{fontSize:"inherit"}),info:(0,j.jsx)(C,{fontSize:"inherit"})},k=o.forwardRef((function(e,t){const n=(0,d.b)({props:e,name:"MuiAlert"}),{action:o,children:l,className:c,closeText:p="Close",color:g,components:h={},componentsProps:f={},icon:b,iconMapping:w=T,onClose:y,role:x="alert",severity:C="success",slotProps:k={},slots:_={},variant:B="standard"}=n,P=(0,s.A)(n,E),N=(0,r.A)({},n,{color:g,severity:C,variant:B,colorSeverity:g||C}),D=(e=>{const{variant:t,color:n,severity:s,classes:r}=e,o={root:["root",`color${(0,m.A)(n||s)}`,`${t}${(0,m.A)(n||s)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return(0,i.A)(o,A,r)})(N),H={slots:(0,r.A)({closeButton:h.CloseButton,closeIcon:h.CloseIcon},_),slotProps:(0,r.A)({},f,k)},[U,L]=(0,u.A)("closeButton",{elementType:v.A,externalForwardedProps:H,ownerState:N}),[F,W]=(0,u.A)("closeIcon",{elementType:O.A,externalForwardedProps:H,ownerState:N});return(0,j.jsxs)(S,(0,r.A)({role:x,elevation:0,ownerState:N,className:(0,a.A)(D.root,c),ref:t},P,{children:[!1!==b?(0,j.jsx)(I,{ownerState:N,className:D.icon,children:b||w[C]||T[C]}):null,(0,j.jsx)(R,{ownerState:N,className:D.message,children:l}),null!=o?(0,j.jsx)(M,{ownerState:N,className:D.action,children:o}):null,null==o&&y?(0,j.jsx)(M,{ownerState:N,className:D.action,children:(0,j.jsx)(U,(0,r.A)({size:"small","aria-label":p,title:p,color:"inherit",onClick:y},L,{children:(0,j.jsx)(F,(0,r.A)({fontSize:"small"},W))}))}):null]}))}))},81327:(e,t,n)=>{"use strict";n.d(t,{$z:()=>s,LE:()=>r});const s=(e,t)=>e.reduce((function(e,n){let s="function"==typeof t?t(n):n[t];return e.hasOwnProperty(s)||(e[s]=[]),e[s].push(n),e}),{}),r=(e,t,n=!0)=>{if(!Array.isArray(e))return e;const s=n?(e,n)=>e[t]-n[t]:(e,n)=>n[t]-e[t];return e.sort(s)}},85679:e=>{e.exports=function(e){return"function"==typeof e}},86857:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var s=n(31635),r=n(74848),o=n(96540),a=n(11848),i=n(57156),l=n(19546),c=n.n(l);const d="SCWidget",u={root:`${d}-root`},m=(0,a.Ay)(i.A,{name:d,slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({}))),p=(0,o.forwardRef)(((e,t)=>{const{className:n,onHeightChange:o,onStateChange:a}=e,i=(0,s.__rest)(e,["className","onHeightChange","onStateChange"]);return(0,r.jsx)(m,Object.assign({className:c()(u.root,n)},i,{ref:t}))}))},99863:e=>{e.exports=function(){return!0}}}]);