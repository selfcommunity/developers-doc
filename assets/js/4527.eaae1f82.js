(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[4527],{4527:(e,t,s)=>{"use strict";s.d(t,{A:()=>x});var a=s(31635),o=s(74848),n=s(96540),i=s(84497),l=s(95754),r=s(28692),c=s(19546),d=s.n(c),u=s(11848),m=s(67733),p=s(19249);const g=e=>e.type===p.cJ||e.type===p.zG,h="SCMediaShare";var b=s(49441),j=s(65953);const A={displayRoot:`${h}-display-root`,sharePreview:`${h}-share-preview`,sharePlaceholder:`${h}-share-placeholder`},v=(0,u.Ay)(m.A,{name:h,slot:"DisplayRoot"})((()=>({}))),x={name:"share",displayComponent:e=>{var{className:t,medias:s=[]}=e,c=(0,a.__rest)(e,["className","medias"]);const u=(0,n.useMemo)((()=>s.filter(g)),[s]);return 0===u.length?null:(0,o.jsx)(v,Object.assign({className:d()(t,A.displayRoot)},c,{children:u.map(((e,t)=>(0,o.jsx)(m.A,Object.assign({className:A.sharePreview},{children:e.type===p.zG||e.embed&&e.embed.embed_type===p.TY?(0,o.jsx)(j.A,{event:e.embed.metadata,template:b.T.DETAIL,variant:"outlined",square:!0,hideEventParticipants:!0,hideEventPlanner:!0,actions:(0,o.jsx)(o.Fragment,{})}):(0,o.jsx)(i.A,{feedObjectId:e.embed.metadata.id,feedObjectType:e.embed.metadata.type,variant:"outlined",template:l.a.SHARE,cacheStrategy:r.So.CACHE_FIRST})}),t)))}))},triggerButton:null,layerComponent:null,previewComponent:null,filter:g}},8934:(e,t,s)=>{"use strict";s.d(t,{R:()=>b});var a=s(72739),o=s(27482),n=s(96540),i=s(59145),l=s(42942),r=s(11848),c=s(3541),d=s(99370),u=s(46062),m=s(2880),p=s(74848);const g=["align","className","selected","typographyClassName","value","variant","width"],h=(0,r.Ay)(l.A,{name:"MuiPickersToolbarButton",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:0,minWidth:16,textTransform:"none"}),b=n.forwardRef((function(e,t){const s=(0,c.A)({props:e,name:"MuiPickersToolbarButton"}),{align:n,className:l,selected:r,typographyClassName:b,value:j,variant:A,width:v}=s,x=(0,o.A)(s,g),f=(e=>{const{classes:t}=e;return(0,d.A)({root:["root"]},m.B,t)})(s);return(0,p.jsx)(h,(0,a.A)({variant:"text",ref:t,className:(0,i.A)(l,f.root)},v?{sx:{width:v}}:{},x,{children:(0,p.jsx)(u.k,{align:n,className:b,variant:A,value:j,selected:r})}))}))},9149:function(e){var t,s;e.exports=(t={705:e=>{e.exports=function(e,t){const s=[];return 0===t.length?s.push({text:e,highlight:!1}):t[0][0]>0&&s.push({text:e.slice(0,t[0][0]),highlight:!1}),t.forEach(((a,o)=>{const n=a[0],i=a[1];s.push({text:e.slice(n,i),highlight:!0}),o===t.length-1?i<e.length&&s.push({text:e.slice(i,e.length),highlight:!1}):i<t[o+1][0]&&s.push({text:e.slice(i,t[o+1][0]),highlight:!1})})),s}}},s={},function e(a){var o=s[a];if(void 0!==o)return o.exports;var n=s[a]={exports:{}};return t[a](n,n.exports,e),n.exports}(705))},13470:(e,t,s)=>{"use strict";s.d(t,{A:()=>B});var a=s(31635),o=s(74848),n=s(96540),i=s(19249),l=s(87631),r=s(19546),c=s.n(r);const d="SCMediaLink";var u=s(11848),m=s(67733),p=s(3246);const g=e=>e.type===i.E4&&e.embed&&e.embed.embed_type===i.Yc,h={displayRoot:`${d}-display-root`,displayLink:`${d}-link`,displayHtmlWrap:`${d}-html-wrap`,displayHtml:`${d}-html`,displayHtmlPlaceholder:`${d}-html-placeholder`,displayHtmlLoading:`${d}-html-loading`,displayVideo:`${d}-video`,thumbnail:`${d}-thumbnail`,thumbnailFullWidth:`${d}-thumbnail`,image:`${d}-image`,snippet:`${d}-snippet`,snippetTitle:`${d}-snippet-title`,snippetDescription:`${d}-snippet-description`},b=(0,u.Ay)(m.A,{name:d,slot:"DisplayRoot"})((({theme:e})=>({}))),j=e=>{const{className:t="",medias:s,fullWidth:r=!1,onMediaClick:d=null}=e,u=(0,a.__rest)(e,["className","medias","fullWidth","onMediaClick"]),p=e=>{d&&d(e)},j=(0,n.useMemo)((()=>s.filter(g)),[s]),A=(e,t)=>{const s=new URL(e.embed.metadata.url).hostname.replace("www.","");return(0,o.jsxs)(m.A,Object.assign({className:h.displayLink},{children:[e.embed.metadata.images&&e.embed.metadata.images.length>0&&(0,o.jsx)(o.Fragment,{children:r?(0,o.jsx)(m.A,{className:c()(h.thumbnailFullWidth,h.image),style:{background:`url(${e.image})`,paddingBottom:100/e.image_width/e.image_height+"%"}}):(0,o.jsx)(m.A,{className:c()(h.thumbnail,h.image),style:{background:`url(${e.image})`}})}),(0,o.jsxs)(m.A,Object.assign({className:h.snippet},{children:[(0,o.jsx)("b",Object.assign({className:h.snippetTitle},{children:e.embed.metadata.title})),(0,o.jsx)("br",{}),(0,o.jsx)("p",Object.assign({className:h.snippetDescription},{children:e.embed.metadata.description})),(0,o.jsx)("a",Object.assign({href:e.embed.metadata.url,target:"_blank",onClick:()=>p(e)},{children:s}))]})),(0,o.jsx)("div",{style:{clear:"both"}})]}),t)};return 0===j.length?null:(0,o.jsx)(b,Object.assign({className:c()(t,h.displayRoot)},u,{children:j.map(((e,t)=>e.embed.metadata&&e.embed.metadata.type===i.m6?(0,o.jsx)(l.A,{url:e.url,width:"100%",height:360,onVideoWatch:()=>p(e)},t):(0,o.jsx)(n.Fragment,{children:A(e,t)},t)))}))};var A=s(4671),v=s(40059);const x={triggerRoot:`${d}-trigger-root`},f=(0,u.Ay)(A.A,{name:d,slot:"TriggerRoot"})((()=>({})));var O=s(58065),y=s(46831),C=s(47859),E=s(42942),T=s(28968),N=s(15901);const S={previewRoot:`${d}-preview-root`,media:`${d}-media`,video:`${d}-media-video`,delete:`${d}-delete`},_=(0,u.Ay)(m.A,{name:d,slot:"PreviewRoot"})((()=>({}))),w=n.forwardRef(((e,t)=>{const{className:s,onChange:l,value:r=[]}=e,d=(0,a.__rest)(e,["className","onChange","value"]),u=(0,n.useMemo)((()=>r.filter(g)),[r]),p=(0,n.useCallback)((e=>{l&&l([...r.filter((t=>-1===e.findIndex((e=>e.id===t.id)))),...e])}),[l,r]),h=(0,n.useCallback)((e=>()=>l&&l(r.filter((t=>t.id!==e)))),[l,r]);return(0,o.jsx)(_,Object.assign({ref:t,className:c()(s,S.previewRoot)},d,{children:u.length>0&&(0,o.jsx)(N.ReactSortable,Object.assign({list:u,setList:p},{children:u.map((e=>(0,o.jsxs)(m.A,Object.assign({className:c()(S.media,{[S.video]:e.embed.metadata&&e.embed.metadata.type===i.m6})},{children:[(0,o.jsx)(j,{medias:[e]}),(0,o.jsx)(A.A,Object.assign({className:S.delete,onClick:h(e.id),size:"small"},{children:(0,o.jsx)(v.A,{children:"delete"})}))]}),e.id)))}))}))}));var k=s(43581),R=s(206),M=s(20973),I=s(13550),P=s(29368),D=s(24760),$=s(44467);const L={url:"",urlError:null},H=e=>{var t,s;const[l,r]=(0,n.useState)(!1),[c,d]=(0,n.useState)(Object.assign({},L)),{url:u,urlError:m}=c,g=n.useRef(u);g.current=u;const h=n.useRef(null),{helperText:b,error:j,onSuccess:v}=e,x=(0,a.__rest)(e,["helperText","error","onSuccess"]);(0,n.useEffect)((()=>()=>clearTimeout(h.current)),[]);const f=e=>{e&&(e.preventDefault(),e.stopPropagation()),h.current&&clearTimeout(h.current),r(!0),I.A.request({url:P.A.ComposerMediaCreate.url(),method:P.A.ComposerMediaCreate.method,data:{type:i.E4,url:g.current}}).then((e=>{d(Object.assign({},L)),v&&v(e.data)})).catch((e=>{const t=(0,D.zl)(e);d({urlError:t.urlError?`urlError.${t.urlError.error}`:t.error,url:g.current})})).then((()=>r(!1)))};return(0,o.jsx)("form",Object.assign({method:"post",onSubmit:f},{children:(0,o.jsx)(k.A,Object.assign({value:u,type:"url",onChange:e=>{const t=e.target,s=t.value.startsWith("h")?t.value:`https://${t.value}`;d({url:s,urlError:(0,$.AY)(s)?null:"validationError"})},onPaste:e=>{h.current&&clearTimeout(h.current),h.current=setTimeout((()=>{(0,$.AY)(g.current)&&f(e)}),500)},error:j||Boolean(m),helperText:b||m&&(0,o.jsx)(O.A,{id:`ui.composer.media.link.add.error.${m}`,defaultMessage:`ui.composer.media.link.add.error.${m}`})||(0,o.jsx)(O.A,{id:"ui.composer.media.link.add.help",defaultMessage:"ui.composer.media.link.add.help"}),disabled:l},x,{InputProps:Object.assign(Object.assign({},x.InputProps),{endAdornment:(0,o.jsx)(o.Fragment,{children:""===u&&(null===(t=x.InputProps)||void 0===t?void 0:t.endAdornment)?null===(s=x.InputProps)||void 0===s?void 0:s.endAdornment:(0,o.jsx)(R.A,Object.assign({position:"end"},{children:(0,o.jsx)(M.A,Object.assign({in:null===m&&""!==u},{children:(0,o.jsx)(A.A,Object.assign({size:"small",disabled:l,type:"submit"},{children:l?(0,o.jsx)(p.A,{color:"primary",size:20}):(0,o.jsx)(O.A,{id:"ui.composer.media.link.add.submit",defaultMessage:"ui.composer.media.link.add.submit"})}))}))}))})})}))}))},F={layerRoot:`${d}-layer-root`,title:`${d}-layer-title`,content:`${d}-layer-content`,media:`${d}-media`,delete:`${d}-delete`},V=(0,u.Ay)(m.A,{name:d,slot:"LayerRoot"})((()=>({}))),U=n.forwardRef(((e,t)=>{const{className:s,onClose:i,onSave:l,defaultValue:r=[]}=e,d=(0,a.__rest)(e,["className","onClose","onSave","defaultValue"]),[u,m]=(0,n.useState)(r),p=(0,n.useCallback)((()=>l(u)),[u]),g=(0,n.useCallback)((e=>m([...u,e])),[u]),h=(0,n.useCallback)((e=>m(e)),[]);return(0,o.jsxs)(V,Object.assign({ref:t,className:c()(s,F.layerRoot)},d,{children:[(0,o.jsxs)(y.A,Object.assign({className:F.title},{children:[(0,o.jsx)(A.A,Object.assign({onClick:i},{children:(0,o.jsx)(v.A,{children:"arrow_back"})})),(0,o.jsx)(C.A,{children:(0,o.jsx)(O.A,{id:"ui.composer.media.link.layer.title",defaultMessage:"ui.composer.media.link.layer.title"})}),(0,o.jsx)(E.A,Object.assign({size:"small",color:"secondary",variant:"contained",onClick:p},{children:(0,o.jsx)(O.A,{id:"ui.composer.layer.save",defaultMessage:"ui.composer.layer.save"})}))]})),(0,o.jsxs)(T.A,Object.assign({className:F.content},{children:[(0,o.jsx)(H,{id:"page",name:"page",label:(0,o.jsx)(O.A,{id:"ui.composer.media.link.add.label",defaultMessage:"ui.composer.media.link.add.label"}),fullWidth:!0,variant:"outlined",placeholder:"https://",onSuccess:g}),(0,o.jsx)(w,{onChange:h,value:u})]}))]}))})),B={name:"link",displayComponent:j,triggerButton:e=>{var{className:t}=e,s=(0,a.__rest)(e,["className"]);return(0,o.jsx)(f,Object.assign({className:c()(t,x.triggerRoot)},s,{"aria-label":"add link"},{children:(0,o.jsx)(v.A,{children:"link"})}))},layerComponent:U,previewComponent:w,filter:g}},21676:(e,t,s)=>{"use strict";s.d(t,{A:()=>p});var a=s(31635),o=s(74848),n=s(11848),i=s(44744),l=s(18653),r=s(19546),c=s.n(r);const d="SCTagChip",u={ellipsis:`${d}-ellipsis`},m=(0,n.Ay)(i.A,{name:d,slot:"Root",overridesResolver:(e,t)=>[t.root]})((({theme:e})=>({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",height:25,[`&.${u.ellipsis}`]:{maxWidth:120}})));function p(e){const{tag:t,clickable:s=!0,disposable:n=!0,label:i=null,ellipsis:r=!1,onClick:d=null,onDelete:p=null,className:g=null,showDescription:h=!1}=e,b=(0,a.__rest)(e,["tag","clickable","disposable","label","ellipsis","onClick","onDelete","className","showDescription"]),j=(0,o.jsx)(m,Object.assign({className:c()(g,{[u.ellipsis]:r}),sx:{backgroundColor:`${t.color}`,color:e=>e.palette.getContrastText(t.color)}},s&&{onClick:()=>{d&&d(t.id)}},n&&{onDelete:()=>{p&&p(t.id)}},{label:i||t.name},b));return h&&t.description?(0,o.jsx)(l.A,Object.assign({title:t.description,placement:"right",arrow:!0},{children:j})):j}},22426:(e,t,s)=>{"use strict";s.d(t,{A:()=>f});var a=s(31635),o=s(74848),n=s(96540),i=s(58065),l=s(11848),r=s(5696),c=s(43581),d=s(3246),u=s(13550),m=s(29368),p=s(9149),g=s.n(p),h=s(61183),b=s.n(h),j=s(66848);const A="SCLocationAutocomplete",v={root:`${A}-root`},x=(0,l.Ay)(r.A,{name:A,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({minWidth:120})));const f=function(e){const t=(0,j.A)({props:e,name:A}),{defaultValue:s=null,disabled:l=!1,onChange:r,TextFieldProps:p={variant:"outlined",label:(0,o.jsx)(i.A,{id:"ui.locationAutocomplete.label",defaultMessage:"ui.composer.locations.label"})}}=t,h=(0,a.__rest)(t,["defaultValue","disabled","onChange","TextFieldProps"]),[f,O]=(0,n.useState)(!1),[y,C]=(0,n.useState)([]),[E,T]=(0,n.useState)(s),[N,S]=(0,n.useState)("");(0,n.useEffect)((()=>{!f&&N.trim().length>0&&((e=0,t=20)=>{u.A.request({url:m.A.ComposerLocalitySearch.url(),method:m.A.ComposerLocalitySearch.method,params:{offset:e,limit:t,search:N.trim()}}).then((e=>{C(e.data.results)})).then((()=>O(!1)))})()}),[N]),(0,n.useEffect)((()=>{E&&r&&r(E)}),[E]);const _=(0,n.useMemo)((()=>!E||"string"==typeof E||y.find((e=>E.lat===e.lat&&E.lng===e.lng))?y:[...y,{lat:E.lat,lng:E.lng,full_address:E.location}]),[E,y]);return(0,o.jsx)(x,Object.assign({className:v.root,options:_||[],getOptionLabel:e=>(null==e?void 0:e.full_address)||(null==e?void 0:e.location)||"",filterOptions:e=>e,autoComplete:!0,includeInputInList:!0,value:E||null,selectOnFocus:!0,handleHomeEndKeys:!0,disabled:l,noOptionsText:(0,o.jsx)(i.A,{id:"ui.locationAutocomplete.empty",defaultMessage:"ui.locationAutocomplete.empty"}),onChange:(e,t)=>{T(t?{location:t.full_address,lat:t.lat,lng:t.lng}:null),r&&r(t)},onInputChange:(e,t)=>{S(t)},isOptionEqualToValue:(e,t)=>t.lat===e.lat&&t.lng===e.lng,renderInput:e=>(0,o.jsx)(c.A,Object.assign({},e,p,{margin:"dense",InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"location",endAdornment:(0,o.jsxs)(n.Fragment,{children:[f?(0,o.jsx)(d.A,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})})),renderOption:(e,t,{inputValue:s})=>{const a=b()(t.full_address,s),n=g()(t.full_address,a);return(0,o.jsx)("li",Object.assign({},e,{style:{whiteSpace:"break-spaces"}},{children:n.map(((e,t)=>e.highlight?(0,o.jsx)("span",Object.assign({style:{fontWeight:700}},{children:e.text}),t):e.text))}),`${t.lat}_${t.lng}`)}},h))}},24971:(e,t,s)=>{"use strict";s.d(t,{A:()=>la});var a=s(31635),o=s(74848),n=s(96540),i=s(79236),l=s(83426),r=s(97100),c=s(13550),d=s(29368),u=s(24760),m=s(75753),p=s(2877),g=s(3338),h=s(44817),b=s(58065),j=s(20973),A=s(11848),v=s(77037),x=s(48875),f=s(44675),O=s(15327),y=s(80766),C=s(69981),E=s(46831),T=s(4671),N=s(40059),S=s(28968),_=s(67733),w=s(15993);const k="discussion",R="post",M="poll",I=160;var P=s(19249),D=s(6279),$=s(9149),L=s.n($),H=s(61183),F=s.n(H),V=s(47859),U=s(42942),B=s(68857),G=s(6786),z=s(5696),q=s(43581),W=s(21676),Y=s(19546),X=s.n(Y);const K="SCComposer",Z=370,Q=210;var J=s(27365),ee=s(3246),te=s(42269),se=s(28692),ae=s(94520),oe=s(86354);const ne={groups:[],isLoading:!0},ie=e=>{const{cacheStrategy:t=se.So.CACHE_FIRST}=e||{},s=(0,oe.v$)(),o=t!==se.So.NETWORK_ONLY?(e=>{if(!e)return null;const t=e.map((e=>{const t=(0,oe.I$)(e);return se.Ay.get(t)}));return t.filter((e=>!e)).length>0?null:t})(se.Ay.get(s,null)):null,[i,l]=(0,n.useState)(null!==o?{groups:o,isLoading:!1}:ne),r=(e=d.A.GetUserGroups.url())=>(0,a.__awaiter)(void 0,void 0,void 0,(function*(){const t=(yield c.A.request({url:e,method:d.A.GetUserGroups.method})).data;return t.next?t.results.concat(yield r(t.next)):t.results}));return(0,n.useEffect)((()=>{t===se.So.CACHE_FIRST&&o||r().then((e=>{l({groups:e,isLoading:!1}),se.Ay.set(s,e.map((e=>{const t=(0,oe.I$)(e.id);return se.Ay.set(t,e),e.id})))})).catch((e=>{console.log(e),ae.V.error(te.K,"Unable to retrieve groups")}))}),[]),i};var le=s(66848);const re="SCGroupAutocomplete",ce={root:`${re}-root`},de=(0,A.Ay)(z.A,{name:re,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({}))),ue=e=>{const t=(0,le.A)({props:e,name:re}),{onChange:s,defaultValue:i=null,disabled:l=!1,TextFieldProps:r={variant:"outlined",label:(0,o.jsx)(b.A,{id:"ui.groupAutocomplete.label",defaultMessage:"ui.groupAutocomplete.label"})}}=t,c=(0,a.__rest)(t,["onChange","defaultValue","disabled","TextFieldProps"]),[d,u]=(0,n.useState)(!1),[m,p]=(0,n.useState)("string"==typeof i?null:i),{groups:g,isLoading:h}=ie();(0,n.useEffect)((()=>{null!==m&&s&&s(m)}),[m]),(0,n.useEffect)((()=>{h||"string"!=typeof i||p(g.find((e=>e.id===Number(i))))}),[h]);return(0,o.jsx)(de,Object.assign({className:ce.root,open:d,onOpen:()=>{u(!0)},onClose:()=>{u(!1)},options:g||[],getOptionLabel:e=>e.name||"",value:m,selectOnFocus:!0,clearOnBlur:!0,blurOnSelect:!0,handleHomeEndKeys:!0,clearIcon:null,disabled:l||h,noOptionsText:(0,o.jsx)(b.A,{id:"ui.groupAutocomplete.empty",defaultMessage:"ui.groupAutocomplete.empty"}),onChange:(e,t)=>{p(t)},isOptionEqualToValue:(e,t)=>t.id===e.id,renderOption:(e,t,{inputValue:s})=>{const a=F()(t.name,s),i=L()(t.name,a);return(0,o.jsxs)(_.A,Object.assign({component:"li"},e,{children:[(0,o.jsx)(J.A,{alt:t.name,src:t.image_small,sx:{marginRight:1}}),(0,o.jsx)(n.Fragment,{children:i.map(((e,t)=>(0,o.jsx)(V.A,Object.assign({sx:{fontWeight:e.highlight?700:400,marginRight:.2}},{children:e.text}),t)))})]}))},renderInput:e=>(0,o.jsx)(q.A,Object.assign({},e,r,{margin:"dense",InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"groups",endAdornment:(0,o.jsxs)(n.Fragment,{children:[h?(0,o.jsx)(ee.A,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},c))},me={events:[],isLoading:!0},pe=e=>{const{cacheStrategy:t=se.So.CACHE_FIRST}=e||{},s=(0,oe.cn)(),o=t!==se.So.NETWORK_ONLY?(e=>{if(!e)return null;const t=e.map((e=>{const t=(0,oe.fq)(e);return se.Ay.get(t)}));return t.filter((e=>!e)).length>0?null:t})(se.Ay.get(s,null)):null,[i,l]=(0,n.useState)(null!==o?{events:o,isLoading:!1}:me),r=(e=d.A.GetUserEvents.url())=>(0,a.__awaiter)(void 0,void 0,void 0,(function*(){const t=(yield c.A.request({url:e,method:d.A.GetUserEvents.method})).data;return t.next?t.results.concat(yield r(t.next)):t.results}));return(0,n.useEffect)((()=>{t===se.So.CACHE_FIRST&&o||r().then((e=>{l({events:e,isLoading:!1}),se.Ay.set(s,e.map((e=>{const t=(0,oe.fq)(e.id);return se.Ay.set(t,e),e.id})))})).catch((e=>{console.log(e),ae.V.error(te.K,"Unable to retrieve events")}))}),[]),i},ge="SCEventAutocomplete",he={root:`${ge}-root`},be=(0,A.Ay)(z.A,{name:ge,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({}))),je=e=>{const t=(0,le.A)({props:e,name:ge}),{onChange:s,defaultValue:i=null,disabled:l=!1,TextFieldProps:r={variant:"outlined",label:(0,o.jsx)(b.A,{id:"ui.eventAutocomplete.label",defaultMessage:"ui.eventAutocomplete.label"})}}=t,c=(0,a.__rest)(t,["onChange","defaultValue","disabled","TextFieldProps"]),[d,u]=(0,n.useState)(!1),[m,p]=(0,n.useState)("string"==typeof i?null:i),{events:g,isLoading:h}=pe();(0,n.useEffect)((()=>{null!==m&&s&&s(m)}),[m]),(0,n.useEffect)((()=>{h||"string"!=typeof i||p(g.find((e=>e.id===Number(i))))}),[h]);return(0,o.jsx)(be,Object.assign({className:he.root,open:d,onOpen:()=>{u(!0)},onClose:()=>{u(!1)},options:g||[],getOptionLabel:e=>e.name||"",value:m,selectOnFocus:!0,clearOnBlur:!0,blurOnSelect:!0,handleHomeEndKeys:!0,clearIcon:null,disabled:l||h,noOptionsText:(0,o.jsx)(b.A,{id:"ui.eventAutocomplete.empty",defaultMessage:"ui.eventAutocomplete.empty"}),onChange:(e,t)=>{p(t)},isOptionEqualToValue:(e,t)=>t.id===e.id,renderOption:(e,t,{inputValue:s})=>{const a=F()(t.name,s),i=L()(t.name,a);return(0,o.jsxs)(_.A,Object.assign({component:"li"},e,{children:[(0,o.jsx)(J.A,{alt:t.name,src:t.image_small,sx:{marginRight:1}}),(0,o.jsx)(n.Fragment,{children:i.map(((e,t)=>(0,o.jsx)(V.A,Object.assign({sx:{fontWeight:e.highlight?700:400,marginRight:.2}},{children:e.text}),t)))})]}))},renderInput:e=>(0,o.jsx)(q.A,Object.assign({},e,r,{margin:"dense",InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"events",endAdornment:(0,o.jsxs)(n.Fragment,{children:[h?(0,o.jsx)(ee.A,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},c))};var Ae=s(44744);const ve=e=>{const{search:t="",exclude:s=""}=e||{},[o,i]=(0,n.useState)({users:[],isLoading:!1}),l=(e=d.A.UserAutocomplete.url(),t,s)=>(0,a.__awaiter)(void 0,void 0,void 0,(function*(){const a=(yield c.A.request({url:e,method:d.A.UserAutocomplete.method,params:Object.assign({search:t},s&&{exclude:s})})).data;return a.next?a.results.concat(yield l(a.next,t,s)):a.results}));return(0,n.useEffect)((()=>{t&&l(void 0,t,s).then((e=>{i({users:e,isLoading:!1})})).catch((e=>{console.error(e),ae.V.error(te.K,"Unable to retrieve users"),i((e=>Object.assign(Object.assign({},e),{isLoading:!1})))}))}),[t,s]),o};var xe=s(72081);const fe="SCUserAutocomplete",Oe={root:`${fe}-root`,autocompleteRoot:`${fe}-autocompleteRoot`,info:`${fe}-info`},ye=(0,A.Ay)(_.A,{name:fe,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({}))),Ce=(0,A.Ay)(z.A,{name:fe,slot:"AutocompleteRoot",overridesResolver:(e,t)=>t.autocompleteRoot})((()=>({}))),Ee=e=>{const t=(0,le.A)({props:e,name:fe}),{onChange:s,defaultValue:i=null,disabled:l=!1,TextFieldProps:r={variant:"outlined",label:(0,o.jsx)(b.A,{id:"ui.userAutocomplete.label",defaultMessage:"ui.userAutocomplete.label"})}}=t,c=(0,a.__rest)(t,["onChange","defaultValue","disabled","TextFieldProps"]),[d,u]=(0,n.useState)(!1),[m,p]=(0,n.useState)(""),[g,h]=(0,n.useState)(Array.isArray(i)?i:i?[i]:[]),[j,A]=(0,n.useState)(""),v=(0,n.useMemo)((()=>g.map((e=>"object"==typeof e?e.id:null)).filter(Boolean).join(",")),[g]),{users:x,isLoading:f}=ve({search:(null==m?void 0:m.length)>=3?m:"",exclude:v}),O=x.filter((e=>!v.includes(e.id)));(0,n.useEffect)((()=>{null==s||s(g),A(g.map((e=>"object"==typeof e?e.username:e)).join("\n"))}),[g]);const y=(0,n.useCallback)((()=>{O.length>0&&u(!0)}),[O]),C=(0,n.useCallback)(((e,t)=>{const s=t.inputValue.toLowerCase();return e.filter((e=>{var t,a;const o=null===(t=e.username)||void 0===t?void 0:t.toLowerCase().includes(s),n=null===(a=e.real_name)||void 0===a?void 0:a.toLowerCase().includes(s);return o||n}))}),[]);return(0,o.jsxs)(ye,Object.assign({className:Oe.root},{children:[(0,o.jsx)(Ce,Object.assign({multiple:!0,className:Oe.autocompleteRoot,open:d,onOpen:y,onClose:()=>{u(!1)},options:O||[],filterOptions:C,getOptionLabel:e=>e.username||"",value:g,inputValue:m,onInputChange:(e,t)=>{p(t)},selectOnFocus:!0,clearOnBlur:!0,blurOnSelect:!0,handleHomeEndKeys:!0,clearIcon:null,disabled:l||f,noOptionsText:(0,o.jsx)(b.A,{id:"ui.userAutocomplete.empty",defaultMessage:"ui.userAutocomplete.empty"}),onChange:(e,t)=>{h(t)},isOptionEqualToValue:(e,t)=>!!e&&t.id===e.id,renderTags:(e,t)=>e.map(((e,s)=>{const a="string"==typeof e?e:e.username,n="string"==typeof e?"":e.avatar,i="string"==typeof e?`fallback-${e}`:e.id;return(0,o.jsx)(Ae.A,Object.assign({avatar:(0,o.jsx)(J.A,{src:n}),label:a},t({index:s})),i)})),renderOption:(e,t,{inputValue:s})=>{const a=F()(t.username,s),i=L()(t.username,a);return(0,o.jsxs)(_.A,Object.assign({component:"li"},e,{children:[(0,o.jsx)(J.A,{alt:t.username,src:t.avatar,sx:{marginRight:1}}),(0,o.jsx)(n.Fragment,{children:i.map(((e,t)=>(0,o.jsx)(V.A,{children:e.text},t)))})]}))},renderInput:e=>(0,o.jsx)(q.A,Object.assign({},e,r,{margin:"dense",InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"off",endAdornment:O.length>0?(0,o.jsxs)(n.Fragment,{children:[f&&(0,o.jsx)(ee.A,{color:"inherit",size:20}),e.InputProps.endAdornment]}):null})}))},c)),(0,o.jsx)(V.A,Object.assign({variant:"body2",color:"primary",className:Oe.info},{children:(0,o.jsx)(b.A,{id:"ui.userAutocomplete.textarea.info",defaultMessage:"ui.userAutocomplete.textarea.info",values:{icon:(...e)=>(0,o.jsx)(N.A,{children:e})}})})),(0,o.jsx)(q.A,{label:(0,o.jsx)(b.A,{id:"ui.userAutocomplete.textarea.label",defaultMessage:"ui.userAutocomplete.textarea.label"}),multiline:!0,minRows:4,fullWidth:!0,margin:"normal",value:j,onChange:e=>(0,a.__awaiter)(void 0,void 0,void 0,(function*(){const t=Array.from(new Set(e.target.value.split(/\s|,|\n/).map((e=>e.trim())).filter(Boolean)));try{if(t.length>0){const e=yield xe.A.matchUsernames(t),s=new Set(e.map((e=>e.username))),a=e.filter((e=>s.has(e.username)));h(a),A(a.map((e=>e.username)).join("\n"))}else h([]),A("")}catch(s){console.error("Failed fetching matching usernames",s),h([]),A("")}}))})]}))};var Te;!function(e){e.AUDIENCE_ALL="all",e.AUDIENCE_TAG="tag",e.AUDIENCE_GROUP="group",e.AUDIENCE_EVENT="event",e.AUDIENCE_USERS="users"}(Te||(Te={}));const Ne={root:`${K}-layer-audience-root`,title:`${K}-layer-title`,content:`${K}-layer-content`,message:`${K}-layer-audience-message`,autocomplete:`${K}-layer-audience-autocomplete`},Se=(0,A.Ay)(_.A,{name:K,slot:"LayerAudienceRoot"})((()=>({}))),_e=n.forwardRef(((e,t)=>{var s;const{className:l,onClose:r,onSave:u,defaultValue:h=(Te.AUDIENCE_TAG||Te.AUDIENCE_USERS?[]:null),TextFieldProps:j={variant:"outlined",label:(0,o.jsx)(b.A,{id:"ui.composer.layer.audience.tags.label",defaultMessage:"ui.composer.layer.audience.tags.label"})}}=e,A=(0,a.__rest)(e,["className","onClose","onSave","defaultValue","TextFieldProps"]),[v,x]=(0,n.useState)(!1),[f,O]=(0,n.useState)(h||void 0),{scAddressingTags:y}=function({fetch:e=!1}){const[t,s]=(0,n.useState)([]),[a,o]=(0,n.useState)(!1),l=(0,p.X1)(),r=(0,m.Sw)(),u=(0,n.useMemo)((()=>()=>c.A.request({url:d.A.ComposerAddressingTagList.url(),method:d.A.ComposerAddressingTagList.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[]);return(0,n.useEffect)((()=>{!a&&e&&l.user&&r.features.includes(i.q.TAGGING)&&u().then((e=>{o(!0),s(e)}))}),[a,e,l.user,r.features]),{scAddressingTags:t}}({fetch:v}),{preferences:C,features:_}=(0,m.Sw)(),w=(0,n.useMemo)((()=>C&&_&&_.includes(i.q.TAGGING)&&_.includes(i.q.GROUPING)&&g.pS in C&&C[g.pS].value),[C,_]),k=(0,n.useMemo)((()=>C&&_&&_.includes(i.q.TAGGING)&&g.sv in C&&C[g.sv].value),[C,_]),R=(0,n.useMemo)((()=>C&&_&&_.includes(i.q.TAGGING)&&g.O in C&&C[g.O].value),[C,_]),M=(0,n.useMemo)((()=>C&&_&&_.includes(i.q.TAGGING)&&g.Yx in C&&C[g.Yx].value),[C,_]),[I,P]=(0,n.useState)(null===h||0===h.length?M?Te.AUDIENCE_TAG:Te.AUDIENCE_ALL:Object.prototype.hasOwnProperty.call(h,"recurring")?Te.AUDIENCE_EVENT:Object.prototype.hasOwnProperty.call(h,"managed_by")?Te.AUDIENCE_GROUP:Array.isArray(h)&&h.length>0&&void 0!==(null===(s=h[0])||void 0===s?void 0:s.username)?Te.AUDIENCE_USERS:Te.AUDIENCE_TAG),D=(0,n.useCallback)((()=>{I===Te.AUDIENCE_GROUP||I===Te.AUDIENCE_EVENT?u(f):u((null==f?void 0:f.length)&&(null==f?void 0:f.length)>0?f:null)}),[I,f,u]),$=(0,n.useCallback)(((e,t)=>O(t)),[]),H=(0,n.useCallback)((e=>O(e)),[]),Y=(0,n.useCallback)((e=>O(e)),[]),K=(0,n.useCallback)((e=>O(e)),[]),Z=(0,n.useCallback)(((e,t)=>P(t)),[]),Q=(0,n.useCallback)((()=>x(!0)),[]),J=(0,n.useCallback)((()=>x(!1)),[]),ee=e=>{if(e===Te.AUDIENCE_ALL)return!1;if(!f||Array.isArray(f)&&0===f.length)return!1;return e!==(Array.isArray(f)?f.some((e=>"color"in e))?Te.AUDIENCE_TAG:Te.AUDIENCE_USERS:"recurring"in f?Te.AUDIENCE_EVENT:"managed_by"in f?Te.AUDIENCE_GROUP:Te.AUDIENCE_USERS)};return(0,o.jsxs)(Se,Object.assign({ref:t,className:X()(l,Ne.root)},A,{children:[(0,o.jsxs)(E.A,Object.assign({className:Ne.title},{children:[(0,o.jsx)(T.A,Object.assign({onClick:r},{children:(0,o.jsx)(N.A,{children:"arrow_back"})})),(0,o.jsx)(V.A,{children:(0,o.jsx)(b.A,{id:"ui.composer.layer.audience.title",defaultMessage:"ui.composer.layer.audience.title"})}),(0,o.jsx)(U.A,Object.assign({size:"small",color:"secondary",variant:"contained",onClick:D},{children:(0,o.jsx)(b.A,{id:"ui.composer.layer.save",defaultMessage:"ui.composer.layer.save"})}))]})),(0,o.jsxs)(S.A,Object.assign({className:Ne.content},{children:[(0,o.jsxs)(B.A,Object.assign({value:I,onChange:Z,"aria-label":"audience type"},{children:[!M&&(0,o.jsx)(G.A,{value:Te.AUDIENCE_ALL,icon:(0,o.jsx)(N.A,{children:"public"}),label:(0,o.jsx)(b.A,{id:"ui.composer.layer.audience.all",defaultMessage:"ui.composer.layer.audience.all"})}),k&&(0,o.jsx)(G.A,{disabled:ee(Te.AUDIENCE_EVENT),value:Te.AUDIENCE_EVENT,icon:(0,o.jsx)(N.A,{children:"CalendarIcon"}),label:(0,o.jsx)(b.A,{id:"ui.composer.layer.audience.event",defaultMessage:"ui.composer.layer.audience.event"})}),w&&(0,o.jsx)(G.A,{disabled:ee(Te.AUDIENCE_GROUP),value:Te.AUDIENCE_GROUP,icon:(0,o.jsx)(N.A,{children:"groups"}),label:(0,o.jsx)(b.A,{id:"ui.composer.layer.audience.group",defaultMessage:"ui.composer.layer.audience.group"})}),(0,o.jsx)(G.A,{disabled:ee(Te.AUDIENCE_TAG),value:Te.AUDIENCE_TAG,icon:(0,o.jsx)(N.A,{children:"label"}),label:(0,o.jsx)(b.A,{id:"ui.composer.layer.audience.tag",defaultMessage:"ui.composer.layer.audience.tag"})}),R&&(0,o.jsx)(G.A,{disabled:ee(Te.AUDIENCE_USERS),value:Te.AUDIENCE_USERS,icon:(0,o.jsx)(N.A,{children:"people_alt"}),label:(0,o.jsx)(b.A,{id:"ui.composer.layer.audience.users",defaultMessage:"ui.composer.layer.audience.users"})})]})),(0,o.jsxs)(V.A,Object.assign({className:Ne.message},{children:[I===Te.AUDIENCE_ALL&&!M&&(0,o.jsx)(b.A,{id:"ui.composer.layer.audience.all.message",defaultMessage:"ui.composer.layer.audience.all.message"}),I===Te.AUDIENCE_EVENT&&(0,o.jsx)(b.A,{id:"ui.composer.layer.audience.event.message",defaultMessage:"ui.composer.layer.audience.event.message"}),I===Te.AUDIENCE_GROUP&&(0,o.jsx)(b.A,{id:"ui.composer.layer.audience.group.message",defaultMessage:"ui.composer.layer.audience.group.message"}),I===Te.AUDIENCE_TAG&&(0,o.jsx)(b.A,{id:"ui.composer.layer.audience.tag.message",defaultMessage:"ui.composer.layer.audience.tag.message"}),I===Te.AUDIENCE_USERS&&(0,o.jsx)(b.A,{id:"ui.composer.layer.audience.users.message",defaultMessage:"ui.composer.layer.audience.users.message"})]})),I===Te.AUDIENCE_TAG&&(0,o.jsx)(z.A,{className:Ne.autocomplete,open:v,onOpen:Q,onClose:J,multiple:!0,options:y||[],getOptionLabel:e=>e.name||"",value:f,selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,clearIcon:null,noOptionsText:(0,o.jsx)(b.A,{id:"ui.composer.layer.audience.tags.empty",defaultMessage:"ui.composer.layer.audience.tags.empty"}),onChange:$,isOptionEqualToValue:(e,t)=>t.id===e.id,renderTags:(e,t)=>e.map(((e,s)=>(0,o.jsx)(W.A,Object.assign({tag:e},t({index:s}),{showDescription:!0}),e.id))),renderOption:(e,t,{selected:s,inputValue:a})=>{const i=F()(t.name,a),l=L()(t.name,i);return(0,o.jsx)("li",Object.assign({},e,{children:(0,o.jsx)(W.A,{showDescription:!0,disposable:!1,tag:t,label:(0,o.jsx)(n.Fragment,{children:l.map(((e,t)=>(0,o.jsx)("span",Object.assign({style:{fontWeight:e.highlight?700:400}},{children:e.text}),t)))})},t.id)}))},renderInput:e=>(0,o.jsx)(q.A,Object.assign({},e,j,{InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"addressing",endAdornment:(0,o.jsx)(n.Fragment,{children:e.InputProps.endAdornment})})}))}),I===Te.AUDIENCE_USERS&&(0,o.jsx)(Ee,{onChange:K,defaultValue:f}),I===Te.AUDIENCE_GROUP&&(0,o.jsx)(ue,{onChange:Y,defaultValue:f}),I===Te.AUDIENCE_EVENT&&(0,o.jsx)(je,{onChange:H,defaultValue:f})]}))]}))}));var we=s(60921),ke=s(5448),Re=s(23922),Me=s(81455),Ie=s(206),Pe=s(18653),De=s(71543),$e=s(56071),Le=s(18011),He=s(27885),Fe=s(6442),Ve=s(15901),Ue=s(75737),Be=s(90760),Ge=s(43940),ze=s(71660),qe=s(34887),We=s(1806);const Ye={en:qe.A,it:ze.A},Xe={root:`${K}-content-poll-root`,generalError:`${K}-general-error`,title:`${K}-content-poll-title`,choices:`${K}-content-poll-choices`,choiceNew:`${K}-content-poll-choice-new`,metadata:`${K}-content-poll-metadata`},Ke=(0,A.Ay)(_.A,{name:K,slot:"ContentPollRoot"})((({theme:e})=>({}))),Ze=(0,He.YK)({choicePlaceholder:{id:"ui.composer.content.poll.choice.placeholder",defaultMessage:"ui.composer.content.poll.choice.placeholder"}}),Qe=(0,n.forwardRef)(((e,t)=>{var{children:s}=e,n=(0,a.__rest)(e,["children"]);return(0,o.jsx)(Me.A,Object.assign({direction:"column",ref:t},n,{children:s}))})),Je={choice:""},et={title:"",multiple_choices:!1,expiration_at:null,choices:[Object.assign({},Je),Object.assign({},Je)]},tt=e=>{const t=(0,le.A)({props:e,name:K}),{className:s=null,value:a={poll:Object.assign({},et)},error:i={},disabled:l,onChange:r}=t,{titleError:c=null,categoriesError:d=null,addressingError:u=null,error:m=null}=Object.assign({},i),p=(0,n.useMemo)((()=>a.poll?a.poll:Object.assign({},et)),[a,et]),g=(0,Fe.A)(),h=(0,n.useCallback)((e=>{r(Object.assign(Object.assign({},a),{poll:Object.assign(Object.assign({},p),{title:e.target.value})}))}),[a,p]),j=(0,n.useCallback)((e=>{r(Object.assign(Object.assign({},a),{poll:Object.assign(Object.assign({},p),{choices:e})}))}),[a,p]),A=(0,n.useCallback)((e=>t=>{const s=[...p.choices];s[e].choice=t.target.value,r(Object.assign(Object.assign({},a),{poll:Object.assign(Object.assign({},p),{choices:s})}))}),[a,p]),v=(0,n.useCallback)((()=>{r(Object.assign(Object.assign({},a),{poll:Object.assign(Object.assign({},p),{choices:[...p.choices,Object.assign({},Je)]})}))}),[a,p]),x=(0,n.useCallback)((e=>t=>{const s=[...p.choices];s.splice(e,1),r(Object.assign(Object.assign({},a),{poll:Object.assign(Object.assign({},p),{choices:s})}))}),[a,p]),f=(0,n.useCallback)((e=>{r(Object.assign(Object.assign({},a),{poll:Object.assign(Object.assign({},p),{multiple_choices:e.target.checked})}))}),[a,p]),O=(0,n.useCallback)((e=>{r(Object.assign(Object.assign({},a),{poll:Object.assign(Object.assign({},p),{expiration_at:e})}))}),[a,p]),y=(0,n.useMemo)((()=>{const e=new Date;return e.setDate(e.getDate()+2),e}),[]);return(0,o.jsxs)(Ke,Object.assign({className:X()(Xe.root,s)},{children:[(m||d||u)&&(0,o.jsxs)(V.A,Object.assign({className:Xe.generalError},{children:[m&&(0,o.jsx)(b.A,{id:`ui.composer.content.poll.error.${m}`,defaultMessage:`ui.composer.content.poll.error.${m}`}),d&&d,(0,o.jsx)("br",{}),u&&u]})),(0,o.jsx)(_.A,Object.assign({className:Xe.title},{children:(0,o.jsx)(q.A,{autoFocus:!0,disabled:l,label:(0,o.jsx)(b.A,{id:"ui.composer.content.poll.title",defaultMessage:"ui.composer.content.poll.title"}),variant:"outlined",value:p.title,onChange:h,fullWidth:!0,error:Boolean(c),helperText:c&&c,InputProps:{endAdornment:(0,o.jsx)(V.A,Object.assign({variant:"body2"},{children:160-p.title.length}))}})})),(0,o.jsx)(_.A,Object.assign({className:Xe.choices},{children:(0,o.jsx)(Ve.ReactSortable,Object.assign({list:[...p.choices],setList:j,tag:Qe},{children:p.choices.map(((e,t)=>(0,o.jsx)(q.A,{placeholder:g.formatMessage(Ze.choicePlaceholder),value:e.choice,onChange:A(t),variant:"outlined",disabled:l,InputProps:{startAdornment:(0,o.jsx)(Ie.A,Object.assign({position:"start"},{children:(0,o.jsx)(N.A,{children:"drag"})})),endAdornment:(0,o.jsx)(Ie.A,Object.assign({position:"end"},{children:(0,o.jsx)(Pe.A,Object.assign({title:p.choices.length<=2?(0,o.jsx)(b.A,{id:"ui.composer.content.poll.choice.delete.disabled",defaultMessage:"ui.composer.content.poll.choice.delete.disabled"}):(0,o.jsx)(b.A,{id:"ui.composer.content.poll.choice.delete",defaultMessage:"ui.composer.content.poll.choice.delete"})},{children:(0,o.jsx)("span",{children:(0,o.jsx)(T.A,Object.assign({onClick:x(t),disabled:p.choices.length<=2,edge:"end"},{children:(0,o.jsx)(N.A,{children:"delete"})}))})}))}))}},t)))}))})),(0,o.jsx)(_.A,Object.assign({className:Xe.choiceNew},{children:(0,o.jsxs)(U.A,Object.assign({color:"inherit",variant:"text",onClick:v},{children:[(0,o.jsx)(N.A,{children:"add"}),(0,o.jsx)(b.A,{id:"ui.composer.content.poll.choice.add",defaultMessage:"ui.composer.choice.add"})]}))})),(0,o.jsx)(De.A,{}),(0,o.jsxs)(Me.A,Object.assign({className:Xe.metadata},{children:[(0,o.jsx)($e.A,{control:(0,o.jsx)(Le.A,{checked:p.multiple_choices,onChange:f}),label:(0,o.jsx)(b.A,{id:"ui.composer.content.poll.multiple",defaultMessage:"ui.composer.content.poll.multiple"})}),(0,o.jsx)(Ue.$,Object.assign({dateAdapter:Ge.h,adapterLocale:Ye[g.locale]},{children:(0,o.jsx)(Be.l,{disabled:l,label:(0,o.jsx)(b.A,{id:"ui.composer.content.poll.expiration",defaultMessage:"ui.composer.content.poll.expiration"}),value:"string"==typeof p.expiration_at?(0,We.A)(p.expiration_at):p.expiration_at,onChange:O,slotProps:{textField:{variant:"outlined"}},minDate:y})}))]}))]}))};var st=s(18590),at=s(37116),ot=s(7751),nt=s(33676);const it={root:`${K}-typeswitch-root`},lt=(0,A.Ay)(ot.A,{name:K,slot:"TypeSwitchButtonGroupRoot"})((()=>({})));const rt=function(e){const{preferences:t}=(0,m.Sw)(),s=(0,p.X1)(),i=(0,n.useMemo)((()=>t[g.jh].value||h.Xl(s.user)||h.HY(s.user)),[t,s.user]),l=(0,n.useMemo)((()=>t[g.am].value),[t]),r=(0,n.useMemo)((()=>t[g.o_].value),[t]),{className:c,onChange:d,value:u}=e,j=(0,a.__rest)(e,["className","onChange","value"]);(0,n.useEffect)((()=>{null===u&&d&&d(l?R:k)}),[u]);const A=(0,n.useCallback)(((e,t)=>{d&&d(t)}),[d]);return(0,o.jsxs)(lt,Object.assign({className:X()(it.root,c),onChange:A,exclusive:!0,value:u},j,{children:[l&&(0,o.jsx)(nt.A,Object.assign({value:R},{children:(0,o.jsx)(b.A,{id:"ui.composer.typeSwitch.post",defaultMessage:"ui.composer.typeSwitch.post"})})),r&&(0,o.jsx)(nt.A,Object.assign({value:k},{children:(0,o.jsx)(b.A,{id:"ui.composer.typeSwitch.discussion",defaultMessage:"ui.composer.typeSwitch.discussion"})})),l&&i&&(0,o.jsx)(nt.A,Object.assign({value:M},{children:(0,o.jsx)(b.A,{id:"ui.composer.typeSwitch.poll",defaultMessage:"ui.composer.typeSwitch.poll"})}))]}))};var ct=s(75260);const dt={root:`${K}-content-post-root`,generalError:`${K}-general-error`,medias:`${K}-content-post-medias`,editor:`${K}-content-post-editor`},ut=(0,A.Ay)(_.A,{name:K,slot:"ContentPostRoot"})((({theme:e})=>({}))),mt={categories:[],medias:[],html:"",addressing:[],recipients:[],event:null,group:null},pt=e=>{const{className:t=null,value:s=Object.assign({},mt),error:a={},disabled:i=!1,onChange:l,EditorProps:r={}}=e,{categoriesError:c=null,addressingError:d=null,error:u=null}=Object.assign({},a),m=(0,n.useRef)();(0,n.useEffect)((()=>{m&&m.current&&m.current.focus()}),[m]);const p=(0,n.useCallback)((e=>{l(Object.assign(Object.assign({},s),{html:e}))}),[s]);return(0,o.jsxs)(ut,Object.assign({className:X()(dt.root,t)},{children:[(u||c||d)&&(0,o.jsxs)(V.A,Object.assign({className:dt.generalError},{children:[u&&(0,o.jsx)(b.A,{id:`ui.composer.error.${u}`,defaultMessage:`ui.composer.error.${u}`}),c&&c,(0,o.jsx)("br",{}),d&&d]})),(0,o.jsx)(ct.A,Object.assign({ref:m},r,{editable:!i,className:dt.editor,onChange:p,defaultValue:s.html}))]}))};var gt=s(71113);const ht={root:`${K}-layer-category-root`,title:`${K}-layer-title`,content:`${K}-layer-content`},bt=(0,A.Ay)(_.A,{name:K,slot:"LayerCategoryRoot"})((()=>({}))),jt=n.forwardRef(((e,t)=>{const{className:s,onClose:i,onSave:l,defaultValue:r=[]}=e,c=(0,a.__rest)(e,["className","onClose","onSave","defaultValue"]),[d,u]=(0,n.useState)(r),m=(0,p.X1)(),g=(0,n.useCallback)((()=>l(d)),[d,l]),j=(0,n.useCallback)((e=>u(e)),[]);return(0,o.jsxs)(bt,Object.assign({ref:t,className:X()(s,ht.root)},c,{children:[(0,o.jsxs)(E.A,Object.assign({className:ht.title},{children:[(0,o.jsx)(T.A,Object.assign({onClick:i},{children:(0,o.jsx)(N.A,{children:"arrow_back"})})),(0,o.jsx)(V.A,{children:(0,o.jsx)(b.A,{id:"ui.composer.layer.category.title",defaultMessage:"ui.composer.layer.category.title"})}),(0,o.jsx)(U.A,Object.assign({size:"small",color:"secondary",variant:"contained",onClick:g},{children:(0,o.jsx)(b.A,{id:"ui.composer.layer.save",defaultMessage:"ui.composer.layer.save"})}))]})),(0,o.jsx)(S.A,Object.assign({className:ht.content},{children:(0,o.jsx)(gt.A,Object.assign({multiple:!0,onChange:j,defaultValue:r},!h.Xl(m.user)&&{endpointQueryParams:{can_create_content:!0}}))}))]}))}));var At=s(22426);const vt={root:`${K}-layer-location-root`,title:`${K}-layer-title`,content:`${K}-layer-content`},xt=(0,A.Ay)(_.A,{name:K,slot:"LayerLocationRoot"})((()=>({}))),ft=n.forwardRef(((e,t)=>{const{className:s,onClose:i,onSave:l,defaultValue:r=null}=e,c=(0,a.__rest)(e,["className","onClose","onSave","defaultValue"]),[d,u]=(0,n.useState)(r),m=(0,n.useCallback)((()=>l(d)),[d,l]),p=(0,n.useCallback)((e=>u(e)),[]);return(0,o.jsxs)(xt,Object.assign({ref:t,className:X()(s,vt.root)},c,{children:[(0,o.jsxs)(E.A,Object.assign({className:vt.title},{children:[(0,o.jsx)(T.A,Object.assign({onClick:i},{children:(0,o.jsx)(N.A,{children:"arrow_back"})})),(0,o.jsx)(V.A,{children:(0,o.jsx)(b.A,{id:"ui.composer.layer.location.title",defaultMessage:"ui.composer.layer.location.title"})}),(0,o.jsx)(U.A,Object.assign({size:"small",color:"secondary",variant:"contained",onClick:m},{children:(0,o.jsx)(b.A,{id:"ui.composer.layer.save",defaultMessage:"ui.composer.layer.save"})}))]})),(0,o.jsx)(S.A,Object.assign({className:vt.content},{children:(0,o.jsx)(At.A,{onChange:p,defaultValue:d||""})}))]}))}));var Ot=s(53545);const yt={root:`${K}-content-discussion-root`,generalError:`${K}-general-error`,title:`${K}-content-discussion-title`,medias:`${K}-content-discussion-medias`,editor:`${K}-content-discussion-editor`},Ct=(0,A.Ay)(_.A,{name:K,slot:"ContentDiscussionRoot"})((({theme:e})=>({}))),Et={title:"",categories:[],group:null,event:null,medias:[],html:"",addressing:[],recipients:[]},Tt=e=>{const{className:t=null,value:s=Object.assign({},Et),defaultInitialMaxHeightContentEditor:a=Z,defaultExtraSpaceContentEditor:i=Q,isContentSwitchButtonVisible:l=!0,error:r={},disabled:c=!1,onChange:d,EditorProps:u={}}=e,{titleError:m=null,categoriesError:p=null,addressingError:g=null,error:h=null}=Object.assign({},r),j=(0,n.useRef)(null),[A,v]=(0,n.useState)(a+(l?0:45)),x=(0,Fe.A)(),y=(0,f.A)(),C=(0,O.A)(y.breakpoints.down("md")),E=(0,n.useMemo)((()=>(0,Re.O)()),[]),T=(0,n.useCallback)((e=>{d(Object.assign(Object.assign({},s),{title:e.target.value}))}),[s]),N=(0,n.useCallback)((e=>{("Enter"===e.key||s.title.length>I&&["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Delete","Backspace","Shift","Home","End"].indexOf(e.key)<0)&&e.preventDefault()}),[s]),S=(0,n.useCallback)((e=>{d(Object.assign(Object.assign({},s),{html:e}))}),[s]),w=(0,n.useCallback)((()=>{if(j.current)if(C){const e=j.current.getBoundingClientRect(),t=i+e.height+(E?30:0)-(l?0:45);v(`calc(100vh - ${t}px)`)}else v(Z+(l?0:45)+"px")}),[C,j.current,v,E,l]);return(0,n.useEffect)((()=>{w()}),[s,l,w,C]),(0,o.jsxs)(Ct,Object.assign({className:X()(yt.root,t)},{children:[(h||p||g)&&(0,o.jsxs)(V.A,Object.assign({className:yt.generalError},{children:[h&&(0,o.jsx)(b.A,{id:`ui.composer.error.${h}`,defaultMessage:`ui.composer.error.${h}`}),p&&p,(0,o.jsx)("br",{}),g&&g]})),(0,o.jsx)(q.A,{className:yt.title,ref:j,placeholder:x.formatMessage({id:"ui.composer.content.discussion.title.label",defaultMessage:"ui.composer.content.discussion.title.label"}),autoFocus:!0,fullWidth:!0,variant:"outlined",value:s.title,onChange:T,onKeyDown:N,multiline:!0,InputProps:{endAdornment:(0,o.jsx)(V.A,Object.assign({variant:"body2"},{children:I-s.title.length}))},error:Boolean(m),helperText:m,disabled:c}),(0,o.jsx)(_.A,Object.assign({sx:{[`& .${Ot.H}-content`]:{maxHeight:`${A} !important`}}},{children:(0,o.jsx)(ct.A,Object.assign({},u,{editable:!c,className:yt.editor,onChange:S,defaultValue:s.html}))}))]}))};var Nt=s(72736),St=s(13470),_t=s(4527);const wt={root:`${K}-attributes-root`},kt=(0,A.Ay)(_.A,{name:K,slot:"AttributesRoot"})((()=>({}))),Rt=e=>{var t,s,a,i,l;const{className:r=null,value:c=null,onChange:d=null,onClick:u=null}=e,m=(0,n.useCallback)((e=>()=>{d&&d(Object.assign(Object.assign({},c),{categories:c.categories.filter((t=>t.id!==e))}))}),[c,d]),p=(0,n.useCallback)((()=>{u&&u("categories")}),[u]),g=(0,n.useCallback)((()=>{d&&d(Object.assign(Object.assign({},c),{event:null}))}),[c,d]),h=(0,n.useCallback)((()=>{u&&u("event")}),[u]),b=(0,n.useCallback)((()=>{d&&d(Object.assign(Object.assign({},c),{group:null}))}),[c,d]),j=(0,n.useCallback)((()=>{u&&u("group")}),[u]),A=(0,n.useCallback)((e=>()=>{d&&d(Object.assign(Object.assign({},c),{addressing:c.addressing.filter((t=>t.id!==e))}))}),[c,d]),v=(0,n.useCallback)((()=>{u&&u("addressing")}),[u]),x=(0,n.useCallback)((()=>{d&&d(Object.assign(Object.assign({},c),{location:null}))}),[c,d]),f=(0,n.useCallback)((()=>{u&&u("location")}),[u]),O=(0,n.useCallback)((e=>()=>{(null==c?void 0:c.recipients)&&d&&d(Object.assign(Object.assign({},c),{recipients:c.recipients.filter((t=>"object"==typeof t?t.id!==e:t!==e))}))}),[c,d]),y=(0,n.useCallback)((()=>{u&&u("recipients")}),[u]);return(0,o.jsxs)(kt,Object.assign({className:X()(wt.root,r)},{children:[(null===(t=null==c?void 0:c.categories)||void 0===t?void 0:t.length)>0&&(null==c?void 0:c.categories.map((e=>(0,o.jsx)(Ae.A,{label:e.name,onDelete:m(e.id),icon:(0,o.jsx)(N.A,{children:"category"}),onClick:p},e.id)))),(null==c?void 0:c.group)&&(0,o.jsx)(Ae.A,{label:null==c?void 0:c.group.name,onDelete:b,icon:(0,o.jsx)(N.A,{children:"groups"}),onClick:j,disabled:!(null===(s=null==c?void 0:c.group)||void 0===s?void 0:s.subscription_status)},null==c?void 0:c.group.id),(null==c?void 0:c.event)&&(0,o.jsx)(Ae.A,{label:null==c?void 0:c.event.name,onDelete:g,icon:(0,o.jsx)(N.A,{children:"CalendarIcon"}),onClick:h,disabled:!(null===(a=null==c?void 0:c.event)||void 0===a?void 0:a.subscription_status)},null==c?void 0:c.event.id),(null===(i=null==c?void 0:c.addressing)||void 0===i?void 0:i.length)>0&&(null==c?void 0:c.addressing.map((e=>(0,o.jsx)(W.A,{tag:e,onDelete:A(e.id),icon:(0,o.jsx)(N.A,{children:"label"}),onClick:v,showDescription:!0},e.id)))),(0,o.jsx)(o.Fragment,{children:(null===(l=null==c?void 0:c.recipients)||void 0===l?void 0:l.length)>0&&(0,o.jsxs)(o.Fragment,{children:[c.recipients.slice(0,3).map((e=>(0,o.jsx)(Ae.A,{label:"object"==typeof e?e.username:e,icon:(0,o.jsx)(N.A,{children:"people_alt"}),onClick:y,onDelete:O("object"==typeof e?e.id:e)},"object"==typeof e?e.id:e))),c.recipients.length>3&&(0,o.jsx)(Ae.A,{label:"+"+(c.recipients.length-3),onClick:y})]})}),(null==c?void 0:c.location)&&(0,o.jsx)(Ae.A,{icon:(0,o.jsx)(N.A,{children:"add_location_alt"}),label:null==c?void 0:c.location.location,onDelete:x,onClick:f})]}))};var Mt=s(73785);const It={root:`${K}-skeleton-root`,title:`${K}-title`,avatar:`${K}-avatar`,content:`${K}-content`,actions:`${K}-actions`},Pt=(0,A.Ay)(_.A,{name:K,slot:"SkeletonRoot"})((()=>({})));function Dt(){return(0,o.jsx)(Pt,Object.assign({className:It.root},{children:(0,o.jsx)(Mt.A,{sx:{height:190},animation:"wave",variant:"rectangular"})}))}var $t=s(28820),Lt=s(36870),Ht=s(37211),Ft=s(82241);const Vt={root:`${K}-layer-close-root`,title:`${K}-layer-title`,content:`${K}-layer-content`},Ut=(0,A.Ay)(_.A,{name:K,slot:"LayerCloseRoot"})((()=>({}))),Bt=n.forwardRef(((e,t)=>{const{className:s,onClose:n,onSave:i,defaultValue:l=[]}=e,r=(0,a.__rest)(e,["className","onClose","onSave","defaultValue"]);return(0,o.jsxs)(Ut,Object.assign({ref:t,className:X()(s,Vt.root)},r,{children:[(0,o.jsxs)(E.A,Object.assign({className:Vt.title},{children:[(0,o.jsx)(T.A,Object.assign({onClick:n},{children:(0,o.jsx)(N.A,{children:"arrow_back"})})),(0,o.jsx)(V.A,{children:(0,o.jsx)(b.A,{id:"ui.composer.layer.close.title",defaultMessage:"ui.composer.layer.close.title"})})]})),(0,o.jsxs)(S.A,Object.assign({className:Vt.content},{children:[(0,o.jsx)(V.A,{children:(0,o.jsx)(b.A,{id:"ui.composer.layer.close.text",defaultMessage:"ui.composer.layer.close.text"})}),(0,o.jsxs)($t.A,{children:[(0,o.jsx)(Lt.Ay,{children:(0,o.jsx)(Ht.A,Object.assign({onClick:n},{children:(0,o.jsx)(Ft.A,{primary:(0,o.jsx)(b.A,{id:"ui.composer.layer.close.no",defaultMessage:"ui.composer.layer.close.no"})})}))}),(0,o.jsx)(Lt.Ay,{children:(0,o.jsx)(Ht.A,Object.assign({onClick:i},{children:(0,o.jsx)(Ft.A,{primary:(0,o.jsx)(b.A,{id:"ui.composer.layer.close.yes",defaultMessage:"ui.composer.layer.close.yes"})})}))})]})]}))]}))}));var Gt=s(49993);const zt=function(e){return(0,o.jsx)(Gt.A,Object.assign({},e,{onTouchMove:e=>{e.preventDefault()},style:{touchAction:"none"}}))};var qt=!1;if("undefined"!=typeof window){var Wt={get passive(){qt=!0}};window.addEventListener("testPassive",null,Wt),window.removeEventListener("testPassive",null,Wt)}var Yt="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),Xt=[],Kt=!1,Zt=void 0,Qt=void 0,Jt=void 0,es=function(e){return Xt.some((function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))}))},ts=function(e){var t=e||window.event;return!!es(t.target)||(t.touches.length>1||(t.preventDefault&&t.preventDefault(),!1))},ss=function(){void 0!==Jt&&(document.body.style.paddingRight=Jt,Jt=void 0),void 0!==Zt&&(document.body.style.overflow=Zt,Zt=void 0)},as=function(){if(void 0!==Qt){var e=-parseInt(document.body.style.top,10),t=-parseInt(document.body.style.left,10);document.body.style.position=Qt.position,document.body.style.top=Qt.top,document.body.style.left=Qt.left,window.scrollTo(t,e),Qt=void 0}},os=s(72739),ns=s(5556),is=s.n(ns),ls=s(3541),rs=s(82452),cs=s(23887),ds=s(59145),us=s(6533),ms=s(99370),ps=s(40293),gs=s(80675),hs=s(93932);function bs(e){return(0,gs.A)("MuiDateTimePickerTabs",e)}(0,hs.A)("MuiDateTimePickerTabs",["root"]);const js=e=>(0,cs.sC)(e)?"date":"time",As=(0,A.Ay)(B.A,{name:"MuiDateTimePickerTabs",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({boxShadow:`0 -1px 0 0 inset ${(e.vars||e).palette.divider}`,"&:last-child":{boxShadow:`0 1px 0 0 inset ${(e.vars||e).palette.divider}`,[`& .${us.A.indicator}`]:{bottom:"auto",top:0}}}))),vs=function(e){const t=(0,ls.A)({props:e,name:"MuiDateTimePickerTabs"}),{dateIcon:s=(0,o.jsx)(ps.Z5,{}),onViewChange:a,timeIcon:i=(0,o.jsx)(ps.b1,{}),view:l,hidden:r="undefined"==typeof window||window.innerHeight<667,className:c,sx:d}=t,u=(0,rs.Nq)(),m=(e=>{const{classes:t}=e;return(0,ms.A)({root:["root"]},bs,t)})(t);return r?null:(0,o.jsxs)(As,{ownerState:t,variant:"fullWidth",value:js(l),onChange:(e,t)=>{a("date"===t?"day":"hours")},className:(0,ds.A)(c,m.root),sx:d,children:[(0,o.jsx)(G.A,{value:"date","aria-label":u.dateTableLabel,icon:(0,o.jsx)(n.Fragment,{children:s})}),(0,o.jsx)(G.A,{value:"time","aria-label":u.timeTableLabel,icon:(0,o.jsx)(n.Fragment,{children:i})})]})};var xs=s(27482),fs=s(46062),Os=s(6498),ys=s(8934);function Cs(e){return(0,gs.A)("MuiDateTimePickerToolbar",e)}const Es=(0,hs.A)("MuiDateTimePickerToolbar",["root","dateContainer","timeContainer","timeDigitsContainer","separator","timeLabelReverse","ampmSelection","ampmLandscape","ampmLabel"]);var Ts=s(50117),Ns=s(31886);const Ss=["ampm","ampmInClock","value","onChange","view","isLandscape","onViewChange","toolbarFormat","toolbarPlaceholder","views","disabled","readOnly","toolbarVariant"],_s=e=>{const{classes:t,theme:s,isLandscape:a}=e,o={root:["root"],dateContainer:["dateContainer"],timeContainer:["timeContainer","rtl"===s.direction&&"timeLabelReverse"],timeDigitsContainer:["timeDigitsContainer","rtl"===s.direction&&"timeLabelReverse"],separator:["separator"],ampmSelection:["ampmSelection",a&&"ampmLandscape"],ampmLabel:["ampmLabel"]};return(0,ms.A)(o,Cs,t)},ws=(0,A.Ay)(Os.Z,{name:"MuiDateTimePickerToolbar",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e,ownerState:t})=>({paddingLeft:"desktop"!==t.toolbarVariant||t.isLandscape?16:24,paddingRight:"desktop"!==t.toolbarVariant||t.isLandscape?16:0,borderBottom:"desktop"===t.toolbarVariant?`1px solid ${(e.vars||e).palette.divider}`:void 0,borderRight:"desktop"===t.toolbarVariant&&t.isLandscape?`1px solid ${(e.vars||e).palette.divider}`:void 0,justifyContent:"space-around",position:"relative"})));ws.propTypes={as:is().elementType,classes:is().object,className:is().string,isLandscape:is().bool.isRequired,isMobileKeyboardViewOpen:is().bool,landscapeDirection:is().oneOf(["column","row"]),ownerState:is().object.isRequired,sx:is().oneOfType([is().arrayOf(is().oneOfType([is().func,is().object,is().bool])),is().func,is().object]),toggleMobileKeyboardView:is().func,toolbarTitle:is().node,viewType:is().oneOf(["date","time"])};const ks=(0,A.Ay)("div",{name:"MuiDateTimePickerToolbar",slot:"DateContainer",overridesResolver:(e,t)=>t.dateContainer})({display:"flex",flexDirection:"column",alignItems:"flex-start"}),Rs=(0,A.Ay)("div",{name:"MuiDateTimePickerToolbar",slot:"TimeContainer",overridesResolver:(e,t)=>t.timeContainer})((({theme:e,ownerState:t})=>{const s=t.isLandscape&&"desktop"!==t.toolbarVariant?"column":"row";return(0,os.A)({display:"flex",flexDirection:s},"desktop"===t.toolbarVariant&&(0,os.A)({},!t.isLandscape&&{gap:9,marginRight:4,alignSelf:"flex-end"}),"rtl"===e.direction&&{flexDirection:`${s}-reverse`})})),Ms=(0,A.Ay)("div",{name:"MuiDateTimePickerToolbar",slot:"TimeDigitsContainer",overridesResolver:(e,t)=>t.timeDigitsContainer})((({theme:e,ownerState:t})=>(0,os.A)({display:"flex"},"desktop"===t.toolbarVariant&&{gap:1.5},"rtl"===e.direction&&{flexDirection:"row-reverse"})));Rs.propTypes={as:is().elementType,ownerState:is().object.isRequired,sx:is().oneOfType([is().arrayOf(is().oneOfType([is().func,is().object,is().bool])),is().func,is().object])};const Is=(0,A.Ay)(fs.k,{name:"MuiDateTimePickerToolbar",slot:"Separator",overridesResolver:(e,t)=>t.separator})((({ownerState:e})=>({margin:"desktop"===e.toolbarVariant?0:"0 4px 0 2px",cursor:"default"}))),Ps=(0,A.Ay)("div",{name:"MuiDateTimePickerToolbar",slot:"AmPmSelection",overridesResolver:(e,t)=>[{[`.${Es.ampmLabel}`]:t.ampmLabel},{[`&.${Es.ampmLandscape}`]:t.ampmLandscape},t.ampmSelection]})((({ownerState:e})=>(0,os.A)({display:"flex",flexDirection:"column",marginRight:"auto",marginLeft:12},e.isLandscape&&{margin:"4px 0 auto",flexDirection:"row",justifyContent:"space-around",width:"100%"},{[`& .${Es.ampmLabel}`]:{fontSize:17}})));function Ds(e){const t=(0,ls.A)({props:e,name:"MuiDateTimePickerToolbar"}),{ampm:s,ampmInClock:a,value:i,onChange:l,view:r,isLandscape:c,onViewChange:d,toolbarFormat:u,toolbarPlaceholder:m="\u2013\u2013",views:p,disabled:g,readOnly:h,toolbarVariant:b="mobile"}=t,j=(0,xs.A)(t,Ss),A=t,v=(0,rs.hc)(),{meridiemMode:x,handleMeridiemChange:O}=(0,Ts.r7)(i,s,l),y=Boolean(s&&!a),C="desktop"===b,E=(0,rs.Nq)(),T=(0,f.A)(),N=_s((0,os.A)({},A,{theme:T})),S=n.useMemo((()=>i?u?v.formatByString(i,u):v.format(i,"shortDate"):m),[i,u,m,v]);return(0,o.jsxs)(ws,(0,os.A)({toolbarTitle:E.dateTimePickerToolbarTitle,isLandscape:c,className:N.root},j,{ownerState:A,children:[(0,o.jsxs)(ks,{className:N.dateContainer,ownerState:A,children:[p.includes("year")&&(0,o.jsx)(ys.R,{tabIndex:-1,variant:"subtitle1",onClick:()=>d("year"),selected:"year"===r,value:i?v.format(i,"year"):"\u2013"}),p.includes("day")&&(0,o.jsx)(ys.R,{tabIndex:-1,variant:C?"h5":"h4",onClick:()=>d("day"),selected:"day"===r,value:S})]}),(0,o.jsxs)(Rs,{className:N.timeContainer,ownerState:A,children:[(0,o.jsxs)(Ms,{className:N.timeDigitsContainer,ownerState:A,children:[p.includes("hours")&&(0,o.jsx)(ys.R,{variant:C?"h5":"h3",width:C&&!c?Ns.aG:void 0,onClick:()=>d("hours"),selected:"hours"===r,value:i?(_=i,s?v.format(_,"hours12h"):v.format(_,"hours24h")):"--"}),p.includes("minutes")&&(0,o.jsxs)(n.Fragment,{children:[(0,o.jsx)(Is,{variant:C?"h5":"h3",value:":",className:N.separator,ownerState:A}),(0,o.jsx)(ys.R,{variant:C?"h5":"h3",width:C&&!c?Ns.aG:void 0,onClick:()=>d("minutes"),selected:"minutes"===r,value:i?v.format(i,"minutes"):"--"})]}),p.includes("seconds")&&(0,o.jsxs)(n.Fragment,{children:[(0,o.jsx)(Is,{variant:C?"h5":"h3",value:":",className:N.separator,ownerState:A}),(0,o.jsx)(ys.R,{variant:C?"h5":"h3",width:C&&!c?Ns.aG:void 0,onClick:()=>d("seconds"),selected:"seconds"===r,value:i?v.format(i,"seconds"):"--"})]})]}),y&&!C&&(0,o.jsxs)(Ps,{className:N.ampmSelection,ownerState:A,children:[(0,o.jsx)(ys.R,{variant:"subtitle2",selected:"am"===x,typographyClassName:N.ampmLabel,value:(0,cs._S)(v,"am"),onClick:h?void 0:()=>O("am"),disabled:g}),(0,o.jsx)(ys.R,{variant:"subtitle2",selected:"pm"===x,typographyClassName:N.ampmLabel,value:(0,cs._S)(v,"pm"),onClick:h?void 0:()=>O("pm"),disabled:g})]}),s&&C&&(0,o.jsx)(ys.R,{variant:"h5",onClick:()=>d("meridiem"),selected:"meridiem"===r,value:i&&x?(0,cs._S)(v,x):"--",width:Ns.aG})]})]}));var _}var $s=s(34469),Ls=s(60831);var Hs=s(72324),Fs=s(421),Vs=s(16566),Us=s(17566),Bs=s(5639);const Gs=["props","ref"],zs=(0,A.Ay)(Bs.CJ)((({theme:e})=>({overflow:"hidden",minWidth:Ns.eX,backgroundColor:(e.vars||e).palette.background.paper})));var qs=s(64741),Ws=s(71724);const Ys=({props:e,value:t,adapter:s})=>{const a=(0,qs.Z)({adapter:s,value:t,props:e});return null!==a?a:(0,Ws.i)({adapter:s,value:t,props:e})},Xs=n.forwardRef((function(e,t){var s,a,i,l,r;const c=function(e,t){var s,a,o,i,l,r,c,d,u,m,p;const g=(0,rs.hc)(),h=(0,rs.Yg)(),b=(0,ls.A)({props:e,name:t}),j=null!=(s=b.ampm)?s:g.is12HourCycleInCurrentLocale(),A=n.useMemo((()=>{var e;return null==(null==(e=b.localeText)?void 0:e.toolbarTitle)?b.localeText:(0,os.A)({},b.localeText,{dateTimePickerToolbarTitle:b.localeText.toolbarTitle})}),[b.localeText]),v=null!=(a=b.slots)?a:(0,Ls.p)(b.components),x=null!=(o=b.slotProps)?o:b.componentsProps;return(0,os.A)({},b,(0,$s.R)({views:b.views,openTo:b.openTo,defaultViews:["year","day","hours","minutes"],defaultOpenTo:"day"}),{ampm:j,localeText:A,orientation:null!=(i=b.orientation)?i:"portrait",disableIgnoringDatePartForTimeValidation:null!=(l=b.disableIgnoringDatePartForTimeValidation)?l:Boolean(b.minDateTime||b.maxDateTime||b.disablePast||b.disableFuture),disableFuture:null!=(r=b.disableFuture)&&r,disablePast:null!=(c=b.disablePast)&&c,minDate:(0,cs.IP)(g,null!=(d=b.minDateTime)?d:b.minDate,h.minDate),maxDate:(0,cs.IP)(g,null!=(u=b.maxDateTime)?u:b.maxDate,h.maxDate),minTime:null!=(m=b.minDateTime)?m:b.minTime,maxTime:null!=(p=b.maxDateTime)?p:b.maxTime,slots:(0,os.A)({toolbar:Ds,tabs:vs},v),slotProps:(0,os.A)({},x,{toolbar:(0,os.A)({ampm:j},null==x?void 0:x.toolbar)})})}(e,"MuiStaticDateTimePicker"),d=null!=(s=c.displayStaticWrapperAs)?s:"mobile",u=null!=(a=c.ampmInClock)?a:"desktop"===d,m=(0,os.A)({day:Fs.W,month:Fs.W,year:Fs.W,hours:Hs.Zo,minutes:Hs.Zo,seconds:Hs.Zo},c.viewRenderers),p=(0,os.A)({},c,{viewRenderers:m,displayStaticWrapperAs:d,ampmInClock:u,yearsPerRow:null!=(i=c.yearsPerRow)?i:"mobile"===d?3:4,slotProps:(0,os.A)({},c.slotProps,{tabs:(0,os.A)({hidden:"desktop"===d},null==(l=c.slotProps)?void 0:l.tabs),toolbar:(0,os.A)({hidden:"desktop"===d,ampmInClock:u},null==(r=c.slotProps)?void 0:r.toolbar)})}),{renderPicker:g}=(e=>{var t;let{props:s,ref:a}=e,n=(0,xs.A)(e,Gs);const{localeText:i,slots:l,slotProps:r,className:c,sx:d,displayStaticWrapperAs:u,autoFocus:m}=s,{layoutProps:p,renderCurrentView:g}=(0,Us.k)((0,os.A)({},n,{props:s,autoFocusView:null!=m&&m,additionalViewProps:{},wrapperVariant:u})),h=null!=(t=null==l?void 0:l.layout)?t:zs;return{renderPicker:()=>{var e,t,s;return(0,o.jsx)(Ue.$,{localeText:i,children:(0,o.jsx)(h,(0,os.A)({},p,null==r?void 0:r.layout,{slots:l,slotProps:r,sx:[...Array.isArray(d)?d:[d],...Array.isArray(null==r||null==(e=r.layout)?void 0:e.sx)?r.layout.sx:[null==r||null==(t=r.layout)?void 0:t.sx]],className:(0,ds.A)(c,null==r||null==(s=r.layout)?void 0:s.className),ref:a,children:g()}))})}}})({props:p,valueManager:Vs.W,valueType:"date-time",validator:Ys,ref:t});return g()}));Xs.propTypes={ampm:is().bool,ampmInClock:is().bool,autoFocus:is().bool,className:is().string,components:is().object,componentsProps:is().object,dayOfWeekFormatter:is().func,defaultCalendarMonth:is().any,defaultValue:is().any,disabled:is().bool,disableFuture:is().bool,disableHighlightToday:is().bool,disableIgnoringDatePartForTimeValidation:is().bool,disablePast:is().bool,displayStaticWrapperAs:is().oneOf(["desktop","mobile"]),displayWeekNumber:is().bool,fixedWeekNumber:is().number,loading:is().bool,localeText:is().object,maxDate:is().any,maxDateTime:is().any,maxTime:is().any,minDate:is().any,minDateTime:is().any,minTime:is().any,minutesStep:is().number,monthsPerRow:is().oneOf([3,4]),onAccept:is().func,onChange:is().func,onClose:is().func,onError:is().func,onMonthChange:is().func,onViewChange:is().func,onYearChange:is().func,openTo:is().oneOf(["day","hours","minutes","month","seconds","year"]),orientation:is().oneOf(["landscape","portrait"]),readOnly:is().bool,reduceAnimations:is().bool,referenceDate:is().any,renderLoading:is().func,shouldDisableClock:is().func,shouldDisableDate:is().func,shouldDisableMonth:is().func,shouldDisableTime:is().func,shouldDisableYear:is().func,showDaysOutsideCurrentMonth:is().bool,slotProps:is().object,slots:is().object,sx:is().oneOfType([is().arrayOf(is().oneOfType([is().func,is().object,is().bool])),is().func,is().object]),timezone:is().string,value:is().any,view:is().oneOf(["day","hours","minutes","month","seconds","year"]),viewRenderers:is().shape({day:is().func,hours:is().func,minutes:is().func,month:is().func,seconds:is().func,year:is().func}),views:is().arrayOf(is().oneOf(["day","hours","minutes","month","seconds","year"]).isRequired),yearsPerRow:is().oneOf([3,4])};var Ks=s(45284),Zs=s(49873);const Qs={root:`${K}-layer-scheduled-root`,title:`${K}-layer-title`,content:`${K}-layer-content`,message:`${K}-layer-scheduled-message`,picker:`${K}-layer-scheduled-picker`,toolbar:`${K}-layer-scheduled-toolbar`},Js=(0,A.Ay)(_.A,{name:K,slot:"LayerScheduledRoot"})((()=>({}))),ea=n.forwardRef(((e,t)=>{const{className:s,onClose:i,onSave:l,defaultValue:r=null}=e,c=(0,a.__rest)(e,["className","onClose","onSave","defaultValue"]),d="it"===(0,Ks.J_)().settings.locale.default?ze.A:qe.A,[u,m]=(0,n.useState)(r?"string"==typeof r?(0,We.A)(r):r:null),p=(0,n.useCallback)((e=>{e&&(m(e),l(e))}),[l]);return(0,o.jsxs)(Js,Object.assign({ref:t,className:X()(s,Qs.root)},c,{children:[(0,o.jsxs)(E.A,Object.assign({className:Qs.title},{children:[(0,o.jsx)(T.A,Object.assign({onClick:i},{children:(0,o.jsx)(N.A,{children:"arrow_back"})})),(0,o.jsx)(V.A,{children:(0,o.jsx)(b.A,{id:"ui.composer.layer.scheduled.title",defaultMessage:"Programma la Pubblicazione"})}),(0,o.jsx)(U.A,Object.assign({size:"small",color:"secondary",variant:"contained",onClick:()=>l(u),disabled:!u},{children:(0,o.jsx)(b.A,{id:"ui.composer.layer.scheduled.submit",defaultMessage:"Attiva Programmazione"})}))]})),(0,o.jsxs)(S.A,Object.assign({className:Qs.content},{children:[(0,o.jsx)(V.A,Object.assign({className:Qs.message},{children:(0,o.jsx)(b.A,{id:"ui.composer.layer.scheduled.message",defaultMessage:"ui.composer.audience.scheduled.message"})})),(0,o.jsx)(Ue.$,Object.assign({dateAdapter:Ge.h,adapterLocale:d},{children:(0,o.jsx)(Xs,{className:Qs.picker,disablePast:!0,value:u,onChange:e=>m(e),onAccept:p,slots:{toolbar:e=>{const{value:t}=e;if(!t)return null;const s=(0,we.ZH)((0,Zs.A)(t,"EEEE",{locale:d})),a=(0,Zs.A)(t,"d MMMM yyyy \u2022 HH:mm",{locale:d});return(0,o.jsx)(V.A,Object.assign({variant:"h4"},{children:`${s} ${a}`}))},tabs:e=>(0,o.jsx)(vs,Object.assign({},e)),actionBar:()=>null},slotProps:{tabs:{hidden:!1}}})}))]}))]}))})),ta=(0,n.forwardRef)((function(e,t){return(0,o.jsx)(j.A,Object.assign({ref:t},e))})),sa={root:`${K}-root`,ios:`${K}-ios`,title:`${K}-title`,types:`${K}-types`,content:`${K}-content`,attributes:`${K}-attributes`,medias:`${K}-medias`,actions:`${K}-actions`,selectedAction:`${K}-selected-action`,actionSelectedIcon:`${K}-action-selected-icon`,layerTransitionRoot:`${K}-layer-transition-root`},aa=(0,A.Ay)(v.A,{name:K,slot:"Root"})((()=>({}))),oa=(0,A.Ay)(x.A,{name:K,slot:"LayerTransitionRoot"})((()=>({}))),na={id:null,type:null,title:"",titleError:null,html:"",htmlError:null,categories:[],categoriesError:null,group:null,event:null,groupsError:null,addressing:null,addressingError:null,recipients:[],medias:[],poll:null,location:null,scheduled_at:null,error:null},ia=(e,t)=>{switch(t.type){case"reset":return Object.assign(Object.assign({},na),{key:(0,we.yT)()});case"resetEventFeed":return Object.assign(Object.assign({},na),{event:e.event,key:(0,we.yT)()});case"resetGroupFeed":return Object.assign(Object.assign({},na),{group:e.group,key:(0,we.yT)()});case"resetCategoryFeed":return Object.assign(Object.assign({},na),{categories:e.categories,key:(0,we.yT)()});case"multiple":return Object.assign(Object.assign({},e),t.value);default:return Object.assign(Object.assign({},e),{[t.type]:t.value})}};const la=function(e){const t=(0,le.A)({props:e,name:K}),{feedObjectId:s=null,feedObjectType:j=null,feedObject:A=null,defaultValue:v={},mediaObjectTypes:x=[Nt.A,St.A,_t.A],EditorProps:k={},onClose:R=null,onSuccess:$=null,feedType:L}=t,H=(0,a.__rest)(t,["feedObjectId","feedObjectType","feedObject","defaultValue","mediaObjectTypes","EditorProps","onClose","onSuccess","feedType"]),{preferences:F,features:V}=(0,m.Sw)(),U=(0,p.X1)(),{enqueueSnackbar:B}=(0,st.dh)(),G=(0,f.A)(),z=(0,O.A)(G.breakpoints.down("md"),{noSsr:(0,ke.Nh)()}),[q,W]=(0,n.useState)(!1),[Y,Z]=(0,n.useState)(),[Q,J]=(0,n.useReducer)(ia,Object.assign(Object.assign(Object.assign({},na),v),{key:(0,we.yT)()})),{key:ee,id:te,type:se,title:ae,titleError:oe,html:ne,categories:ie,categoriesError:re,event:ce,group:de,addressing:ue,addressingError:me,recipients:pe,audience:ge,medias:he,poll:be,pollError:je,location:Ae,scheduled_at:ve,error:xe}=Q,fe=(0,n.useMemo)((()=>F&&g.od in F&&F[g.od].value),[F]),Oe=(0,n.useMemo)((()=>F&&g.Yx in F&&F[g.Yx].value),[F]),ye=(0,n.useMemo)((()=>F&&g.uc in F&&F[g.uc].value),[F]),Ce=(0,n.useMemo)((()=>F&&V&&V.includes(i.q.TAGGING)&&g.O in F&&F[g.O].value),[F,V]),Ee=e=>{e.type===l.Z.POST||(e.type,l.Z.DISCUSSION),A.author.id===U.user.id?(J({type:"multiple",value:{id:e.id,type:e.poll?M:A.type,title:e.title,html:e.html,categories:e.categories,event:e.event,group:e.group,addressing:e.addressing,recipients:e.recipients,medias:e.medias,poll:e.poll,location:e.location,scheduled_at:e.scheduled_at}}),Se(!1)):Ie(!0)},Te=(0,n.useMemo)((()=>Boolean(s&&j||A)),[s,j,A]),[Ne,Se]=(0,n.useState)(Te),[Me,Ie]=(0,n.useState)(!1),Pe=(0,n.useRef)(),De=(0,n.useRef)(!1),$e=(0,n.useRef)(null),Le=(0,n.useRef)({medias:he});Le.current={medias:he};const He=(0,n.useMemo)((()=>be&&be.title.length>0&&be.title.length<I&&be.choices.length>=2),[be]),Fe=(0,n.useMemo)((()=>!Ne&&(se===l.Z.DISCUSSION&&ae.length>0&&ae.length<I||se===l.Z.POST&&((0,we.QZ)(ne).length>0||he.length>0||He)||se===M&&He)&&(!Oe||ue&&ue.length>0||pe&&pe.length>0)&&(!ye||ie&&ie.length>0)),[Ne,se,ae,ne,he,He,ue,pe,Oe,ie,ye]),Ve=(0,n.useMemo)((()=>(0,Re.O)()),[]);(0,n.useEffect)((()=>{Te&&(null===A?(Se(!0),c.A.request({url:d.A.FeedObject.url({type:j,id:s}),method:d.A.FeedObject.method}).then((e=>{Ee(e.data)})).catch((()=>{Ie(!0)})).then((()=>Se(!1)))):Ee(A))}),[Te]),(0,n.useEffect)((()=>{if(!De.current&&Fe){De.current=!0;const e=e=>(e.preventDefault(),"");window.onbeforeunload=e}else De.current&&!Fe&&(De.current=!1,window.onbeforeunload=null)}),[Q,Fe]),(0,n.useEffect)((()=>{if(!Pe.current||!Ve)return;const e=e=>{$e.current=e.touches[0].clientY},t=e=>{const t=e.touches[0].clientY,s=t-$e.current;$e.current=t,s>0&&Pe.current.focus()};return Pe.current.addEventListener("touchstart",e),Pe.current.addEventListener("touchmove",t),()=>{var s,a;null===(s=Pe.current)||void 0===s||s.removeEventListener("touchstart",e),null===(a=Pe.current)||void 0===a||a.removeEventListener("touchmove",t)}}),[Pe.current,Ve]);const Ue=(0,n.useCallback)((e=>Z(e)),[]),Be=(0,n.useCallback)((()=>Z(null)),[]),Ge=(0,n.useCallback)((e=>{J({type:"type",value:e})}),[]),ze=e=>{var t,s;return Oe&&!(null===(t=e.addressing)||void 0===t?void 0:t.length)&&!(null===(s=e.recipients)||void 0===s?void 0:s.length)?Ce?(0,o.jsx)(b.A,{id:"ui.composer.addressingRecipients.error.missing",defaultMessage:"ui.composer.addressingRecipients.error.missing"}):(0,o.jsx)(b.A,{id:"ui.composer.addressing.error.missing",defaultMessage:"ui.composer.addressing.error.missing"}):null},qe=(0,n.useCallback)((e=>{J({type:"multiple",value:Object.assign(Object.assign({},e),{pollError:e.poll.title.length>I?{titleError:(0,o.jsx)(b.A,{id:"ui.composer.title.error.maxlength",defaultMessage:"ui.composer.title.error.maxlength"})}:null,addressingError:ze(e)})})}),[]),We=(0,n.useCallback)((e=>{J({type:"multiple",value:Object.assign(Object.assign({},e),{titleError:e.title.length>I?(0,o.jsx)(b.A,{id:"ui.composer.title.error.maxlength",defaultMessage:"ui.composer.title.error.maxlength"}):null,addressingError:ze(e),categoriesError:ye&&0===e.categories.length?(0,o.jsx)(b.A,{id:"ui.composer.categories.error.missing",defaultMessage:"ui.composer.categories.error.missing"}):null})})}),[]),Ye=(0,n.useCallback)((e=>{J({type:"multiple",value:Object.assign(Object.assign({},e),{addressingError:ze(e),categoriesError:ye&&0===e.categories.length?(0,o.jsx)(b.A,{id:"ui.composer.categories.error.missing",defaultMessage:"ui.composer.categories.error.missing"}):null})})}),[]),Xe=(0,n.useCallback)((e=>{J({type:"multiple",value:{categories:e,categoriesError:!ye||e&&0!==e.length?null:(0,o.jsx)(b.A,{id:"ui.composer.categories.error.missing",defaultMessage:"ui.composer.categories.error.missing"})}}),Z(null)}),[]),Ke=(0,n.useCallback)((()=>Ue({name:"category",Component:jt,ComponentProps:{onClose:Be,onSave:Xe,defaultValue:ie}})),[Ue,Be,Xe,ie]),Ze=(0,n.useCallback)((e=>{de||e&&Object.prototype.hasOwnProperty.call(e,"emotional_image_position")?J({type:"group",value:e}):ce||e&&Object.prototype.hasOwnProperty.call(e,"recurring")?J({type:"event",value:e}):e&&Array.isArray(e)&&e.some((e=>"object"==typeof e&&!("color"in e)))||null===e&&Array.isArray(pe)&&pe.length>0?J({type:"multiple",value:{recipients:e,addressing:[],addressingError:Oe&&!e?(0,o.jsx)(b.A,{id:"ui.composer.addressing.error.missing",defaultMessage:"ui.composer.addressing.error.missing"}):null}}):J({type:"multiple",value:{addressing:e,recipients:[],addressingError:Oe&&!e?(0,o.jsx)(b.A,{id:"ui.composer.addressing.error.missing",defaultMessage:"ui.composer.addressing.error.missing"}):null}}),Z(null)}),[de,ce,pe]),Qe=(0,n.useCallback)((()=>{const e=de||ue&&Object.prototype.hasOwnProperty.call(ue,"emotional_image_position")?de:ce||ue&&Object.prototype.hasOwnProperty.call(ue,"recurring")?ce:Array.isArray(pe)&&pe.some((e=>"object"==typeof e&&null!==e&&!("color"in e)))?pe:ue;Ue({name:"audience",Component:_e,ComponentProps:{onClose:Be,onSave:Ze,defaultValue:e}})}),[Ue,Be,Ze,ue,ce,de,pe]),Je=(0,n.useCallback)((e=>{J({type:"location",value:e}),Z(null)}),[]),et=(0,n.useCallback)((()=>Ue({name:"location",Component:ft,ComponentProps:{onClose:Be,onSave:Je,defaultValue:Ae}})),[Ue,Be,Je,Ae]),ot=(0,n.useCallback)((e=>{J({type:"scheduled_at",value:e}),Z(null)}),[]),nt=(0,n.useCallback)((()=>Ue({name:"scheduled_at",Component:ea,ComponentProps:{onClose:Be,onSave:ot,defaultValue:ve}})),[Ue,Be,ot,ve]),it=(0,n.useCallback)((e=>{const t=[...e];J({type:"medias",value:[...e]}),Le.current.medias=t,Z(null)}),[]),lt=(0,n.useCallback)((e=>{const t=[...Le.current.medias,e];J({type:"medias",value:t}),Le.current.medias=t}),[]),ct=(0,n.useCallback)((e=>t=>{e.layerComponent&&Ue({name:e.name,Component:e.layerComponent,ComponentProps:{onClose:Be,onSave:it,defaultValue:he}})}),[Ue,Be,it,he]),dt=(0,n.useCallback)((e=>{J({type:"multiple",value:Object.assign(Object.assign({},e),{addressingError:ze(e),categoriesError:ye&&0===e.categories.length?(0,o.jsx)(b.A,{id:"ui.composer.categories.error.missing",defaultMessage:"ui.composer.categories.error.missing"}):null})})}),[]),ut=(0,n.useCallback)((e=>{switch(e){case"categories":Ke();break;case"addressing":case"recipients":Qe();break;case"location":et();break;case"scheduled_at":nt()}}),[Ke,Qe,et,nt]),mt=(0,n.useCallback)((e=>{if(e.preventDefault(),e.stopPropagation(),h.lT(U.user))return void B((0,o.jsx)(b.A,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3});const t=[...ie.map((e=>e.id)),...(0,at.F)(ne)],s={title:ae,text:ne,medias:he.map((e=>e.id)),categories:t.filter(((e,s)=>t.indexOf(e)===s))};(F[g.jh].value||h.Xl(U.user)||h.HY(U.user))&&He&&(s.poll=be),F[g.wW].value&&Ae&&(s.location=Ae),F[g.od].value&&ve&&(s.scheduled_at=ve),V.includes(i.q.TAGGING)&&null!==ue&&(s.addressing=ue.map((e=>e.id))),V.includes(i.q.TAGGING)&&null!==pe&&(s.recipients=pe.map((e=>"string"==typeof e?e:e.username))),V.includes(i.q.TAGGING)&&V.includes(i.q.GROUPING)&&F[g.pS].value&&null!==de&&(s.group=de.id),V.includes(i.q.TAGGING)&&V.includes(i.q.EVENT)&&F[g.sv].value&&null!==ce&&(s.event=ce.id),W(!0);const a=se===M?l.Z.POST:se;let n=d.A.Composer.url({type:a}),m=d.A.Composer.method;Te&&(n=d.A.ComposerEdit.url({type:j||a,id:te}),m=d.A.ComposerEdit.method),c.A.request({url:n,method:m,data:s}).then((e=>{$(e.data),De.current&&(window.onbeforeunload=null),L&&L===r.i.CATEGORY?J({type:"resetCategoryFeed"}):L===r.i.EVENT?J({type:"resetEventFeed"}):L===r.i.GROUP?J({type:"resetGroupFeed"}):J({type:"reset"})})).catch((e=>{J({type:"multiple",value:(0,u.zl)(e)})})).then((()=>W(!1)))}),[U.user,j,te,se,ae,ne,ie,ce,de,ue,pe,ge,he,be,Ae,ve,He]),gt=(0,n.useCallback)(((e,t)=>{De.current&&(window.onbeforeunload=null),t&&Fe?Ue({name:"close",Component:Bt,ComponentProps:{onClose:Be,onSave:()=>{R&&R(e),Z(null),L&&L===r.i.CATEGORY?J({type:"resetCategoryFeed"}):L===r.i.EVENT?J({type:"resetEventFeed"}):L===r.i.GROUP?J({type:"resetGroupFeed"}):J({type:"reset"})}}}):(Yt&&(Xt.forEach((function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null})),Kt&&(document.removeEventListener("touchmove",ts,qt?{passive:!1}:void 0),Kt=!1),-1),Yt?as():ss(),Xt=[],R&&R(e),Z(null),J({type:"reset"}))}),[R,Fe,Be]),ht=(0,n.useCallback)((e=>{Fe?Ue({name:"close",Component:Bt,ComponentProps:{onClose:Be,onSave:gt}}):gt(e)}),[Fe,Ue,Be,gt]),bt=(0,n.useMemo)((()=>-1!==he.findIndex((e=>e.type===P.cJ))),[he]),At=(0,n.useMemo)((()=>{if(Te&&Ne)return(0,o.jsx)(Dt,{});if(Te&&Me)return(0,o.jsxs)(y.A,Object.assign({severity:"error",onClose:gt},{children:[(0,o.jsx)(C.A,{children:(0,o.jsx)(b.A,{id:"ui.composer.edit.error.title",defaultMessage:"ui.composer.edit.error.title"})}),(0,o.jsx)(b.A,{id:"ui.composer.edit.error.content",defaultMessage:"ui.composer.edit.error.content"})]}));switch(se){case M:return(0,o.jsx)(tt,{onChange:qe,value:{html:ne,event:ce,group:de,addressing:ue,recipients:pe,medias:he,poll:be,location:Ae,scheduled_at:ve},error:{pollError:je,categoriesError:re,addressingError:me},disabled:q},ee);case l.Z.DISCUSSION:return(0,o.jsx)(Tt,{value:{title:ae,html:ne,categories:ie,event:ce,group:de,addressing:ue,recipients:pe,medias:he,poll:be,location:Ae,scheduled_at:ve},error:{titleError:oe,categoriesError:re,addressingError:me,error:xe},onChange:We,disabled:q,isContentSwitchButtonVisible:!Fe&&!Te,EditorProps:Object.assign({toolbar:!0,uploadImage:!0},k)},ee);default:return(0,o.jsx)(pt,{value:{html:ne,categories:ie,event:ce,group:de,addressing:ue,recipients:pe,medias:he,poll:be,location:Ae,scheduled_at:ve},error:{error:xe,categoriesError:re,addressingError:me},onChange:Ye,disabled:q,EditorProps:Object.assign({toolbar:!1,uploadImage:!1},k)},ee)}}),[ee,se,ae,ne,ie,ce,de,ue,pe,he,be,je,Ae,ve,xe,qe,Ye,q,Fe,Te]);return U.user||U.loading&&open?(0,o.jsxs)(aa,Object.assign({ref:Pe,TransitionComponent:ta,slots:{backdrop:zt},onClose:gt},H,{disableEscapeKeyDown:!0,className:X()(sa.root,{[sa.ios]:Ve}),scroll:"body",fullScreen:z,tabIndex:-1},{children:[(0,o.jsxs)("form",Object.assign({onSubmit:mt,method:"post"},{children:[(0,o.jsxs)(E.A,Object.assign({className:sa.title},{children:[(0,o.jsx)(T.A,Object.assign({onClick:ht},{children:(0,o.jsx)(N.A,{children:"close"})})),(0,o.jsx)(D.A,Object.assign({size:"small",type:"submit",color:"secondary",variant:"contained",disabled:!Fe,loading:q},{children:fe&&!ve?(0,o.jsx)(b.A,{id:"ui.composer.submit.now",defaultMessage:"ui.composer.submit.now"}):(0,o.jsx)(b.A,{id:"ui.composer.submit",defaultMessage:"ui.composer.submit"})}))]})),(0,o.jsxs)(S.A,Object.assign({className:sa.content},{children:[(0,o.jsx)(Rt,{value:{categories:ie,event:ce,group:de,addressing:ue,recipients:pe,location:Ae},className:sa.attributes,onChange:dt,onClick:ut}),At,he&&he.length>0&&(0,o.jsx)(_.A,Object.assign({className:sa.medias},{children:x.map((e=>e.previewComponent?(0,o.jsx)(e.previewComponent,{value:he,onChange:it},e.name):e.displayComponent?(0,o.jsx)(e.displayComponent,{medias:he},e.name):void 0))}))]})),!Fe&&!Te&&(0,o.jsx)(rt,{className:sa.types,onChange:Ge,size:"small",value:se}),(0,o.jsxs)(w.A,Object.assign({className:sa.actions},{children:[x.filter((e=>null!==e.triggerButton)).map((e=>{const t=e.layerComponent?{onClick:ct(e)}:{onAdd:lt};return(0,o.jsx)(e.triggerButton,Object.assign({disabled:q||bt,color:he.filter(e.filter).length>0?"primary":"default"},t),e.name)})),(0,o.jsx)(T.A,Object.assign({disabled:q,onClick:Ke,color:0!==(null==ie?void 0:ie.length)?"primary":"default"},{children:(0,o.jsx)(N.A,{children:"category"})})),(0,o.jsx)(T.A,Object.assign({color:de||ce||null!==ue&&(null==ue?void 0:ue.length)>0||null!==pe&&(null==pe?void 0:pe.length)>0?"primary":"default",disabled:q||!V.includes(i.q.TAGGING)||Boolean(null==A?void 0:A.group)||Boolean(null==A?void 0:A.event),onClick:Qe},{children:de?(0,o.jsx)(N.A,{children:"groups"}):ce?(0,o.jsx)(N.A,{children:"CalendarIcon"}):null===ue||0===(null==ue?void 0:ue.length)?Oe?(0,o.jsx)(N.A,{children:"label"}):(0,o.jsx)(N.A,{children:"public"}):(0,o.jsx)(N.A,{children:"label"})})),F[g.wW].value&&(0,o.jsx)(T.A,Object.assign({disabled:q,onClick:et,color:null!==Ae?"primary":"default"},{children:(0,o.jsx)(N.A,{children:"add_location_alt"})})),F[g.od].value&&(0,o.jsx)(T.A,Object.assign({disabled:q||Boolean(null==A?void 0:A.scheduled_at)&&Boolean(!(null==A?void 0:A.draft)),onClick:nt,color:null!==ve?"primary":"default"},{children:(0,o.jsxs)(_.A,Object.assign({className:sa.selectedAction},{children:[(0,o.jsx)(N.A,{children:"access_time"}),null!==ve&&(0,o.jsx)(N.A,Object.assign({color:"primary",className:sa.actionSelectedIcon},{children:"fiber_manual_record"}))]}))}))]}))]})),Y&&(0,o.jsx)(oa,Object.assign({className:sa.layerTransitionRoot,in:!0,container:Pe.current,direction:"left"},{children:(0,o.jsx)(Y.Component,Object.assign({},Y.ComponentProps))}))]})):null}},26763:(e,t,s)=>{"use strict";s.d(t,{A:()=>A});var a=s(31635),o=s(74848),n=s(96540),i=s(86857),l=s(95754),r=s(11848),c=s(44675),d=s(34069),u=s(73785),m=s(25292),p=s(19546),g=s.n(p),h=s(92699);const b={root:`${h.H}-skeleton-root`,media:`${h.H}-media`},j=(0,r.Ay)(i.A,{name:h.H,slot:"SkeletonRoot"})((()=>({})));function A(e){const{template:t=l.a.SNIPPET}=e,s=(0,a.__rest)(e,["template"]),i=(0,c.A)();let r;return r=t===l.a.PREVIEW||t===l.a.DETAIL||t===l.a.SEARCH?(0,o.jsxs)(n.Fragment,{children:[(0,o.jsx)(d.A,{avatar:(0,o.jsx)(u.A,{animation:"wave",variant:"circular",width:i.selfcommunity.user.avatar.sizeMedium,height:i.selfcommunity.user.avatar.sizeMedium}),title:(0,o.jsx)(u.A,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),subheader:(0,o.jsx)(u.A,{animation:"wave",height:10,width:"40%"})}),(0,o.jsx)(u.A,{animation:"wave",variant:"rectangular",className:b.media}),(0,o.jsx)(m.A,{children:(0,o.jsxs)(n.Fragment,{children:[(0,o.jsx)(u.A,{animation:"wave",height:10,style:{marginBottom:6}}),(0,o.jsx)(u.A,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),(0,o.jsx)(u.A,{animation:"wave",height:10,width:"60%"})]})})]}):(0,o.jsxs)(n.Fragment,{children:[(0,o.jsx)(d.A,{avatar:(0,o.jsx)(u.A,{animation:"wave",variant:"circular",width:i.selfcommunity.user.avatar.sizeMedium,height:i.selfcommunity.user.avatar.sizeMedium}),title:(0,o.jsx)(u.A,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),subheader:(0,o.jsx)(u.A,{animation:"wave",height:10,width:"40%"})}),(0,o.jsx)(m.A,{children:(0,o.jsxs)(n.Fragment,{children:[(0,o.jsx)(u.A,{animation:"wave",height:10,style:{marginBottom:6}}),(0,o.jsx)(u.A,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),(0,o.jsx)(u.A,{animation:"wave",height:10,width:"60%",style:{marginBottom:6}})]})})]}),(0,o.jsx)(j,Object.assign({className:g()(b.root,`${h.H}-${t}`)},s,{children:r}))}},46062:(e,t,s)=>{"use strict";s.d(t,{k:()=>j});var a=s(72739),o=s(27482),n=s(96540),i=s(59145),l=s(47859),r=s(11848),c=s(3541),d=s(99370),u=s(80675);function m(e){return(0,u.A)("MuiPickersToolbarText",e)}const p=(0,s(93932).A)("MuiPickersToolbarText",["root","selected"]);var g=s(74848);const h=["className","selected","value"],b=(0,r.Ay)(l.A,{name:"MuiPickersToolbarText",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`&.${p.selected}`]:t.selected}]})((({theme:e})=>({transition:e.transitions.create("color"),color:(e.vars||e).palette.text.secondary,[`&.${p.selected}`]:{color:(e.vars||e).palette.text.primary}}))),j=n.forwardRef((function(e,t){const s=(0,c.A)({props:e,name:"MuiPickersToolbarText"}),{className:n,value:l}=s,r=(0,o.A)(s,h),u=(e=>{const{classes:t,selected:s}=e,a={root:["root",s&&"selected"]};return(0,d.A)(a,m,t)})(s);return(0,g.jsx)(b,(0,a.A)({ref:t,className:(0,i.A)(n,u.root),component:"span"},r,{children:l}))}))},61183:function(e){var t,s;e.exports=(t={772:(e,t,s)=>{const a=s(826).remove,o=/[.*+?^${}()|[\]\\]/g,n=/[a-z0-9_]/i,i=/\s+/;e.exports=function(e,t,s){var l,r;r={insideWords:!1,findAllOccurrences:!1,requireMatchAll:!1},l=(l=s)||{},Object.keys(l).forEach((e=>{r[e]=!!l[e]})),s=r;const c=Array.from(e).map((e=>a(e)));let d=c.join("");return(t=a(t)).trim().split(i).filter((e=>e.length>0)).reduce(((e,t)=>{const a=t.length,i=!s.insideWords&&n.test(t[0])?"\\b":"",l=new RegExp(i+t.replace(o,"\\$&"),"i");let r,u;if(r=l.exec(d),s.requireMatchAll&&null===r)return d="",[];for(;r;){u=r.index;const t=a-c.slice(u,u+a).join("").length,o=u-c.slice(0,u).join("").length,n=[u+o,u+a+o+t];if(n[0]!==n[1]&&e.push(n),d=d.slice(0,u)+new Array(a+1).join(" ")+d.slice(u+a),!s.findAllOccurrences)break;r=l.exec(d)}return e}),[]).sort(((e,t)=>e[0]-t[0]))}},826:e=>{var t={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\u1ea4":"A","\u1eae":"A","\u1eb2":"A","\u1eb4":"A","\u1eb6":"A","\xc6":"AE","\u1ea6":"A","\u1eb0":"A","\u0202":"A","\xc7":"C","\u1e08":"C","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\u1ebe":"E","\u1e16":"E","\u1ec0":"E","\u1e14":"E","\u1e1c":"E","\u0206":"E","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\u1e2e":"I","\u020a":"I","\xd0":"D","\xd1":"N","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\u1ed0":"O","\u1e4c":"O","\u1e52":"O","\u020e":"O","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xdd":"Y","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\u1ea5":"a","\u1eaf":"a","\u1eb3":"a","\u1eb5":"a","\u1eb7":"a","\xe6":"ae","\u1ea7":"a","\u1eb1":"a","\u0203":"a","\xe7":"c","\u1e09":"c","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\u1ebf":"e","\u1e17":"e","\u1ec1":"e","\u1e15":"e","\u1e1d":"e","\u0207":"e","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\u1e2f":"i","\u020b":"i","\xf0":"d","\xf1":"n","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\u1ed1":"o","\u1e4d":"o","\u1e53":"o","\u020f":"o","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xfd":"y","\xff":"y","\u0100":"A","\u0101":"a","\u0102":"A","\u0103":"a","\u0104":"A","\u0105":"a","\u0106":"C","\u0107":"c","\u0108":"C","\u0109":"c","\u010a":"C","\u010b":"c","\u010c":"C","\u010d":"c","C\u0306":"C","c\u0306":"c","\u010e":"D","\u010f":"d","\u0110":"D","\u0111":"d","\u0112":"E","\u0113":"e","\u0114":"E","\u0115":"e","\u0116":"E","\u0117":"e","\u0118":"E","\u0119":"e","\u011a":"E","\u011b":"e","\u011c":"G","\u01f4":"G","\u011d":"g","\u01f5":"g","\u011e":"G","\u011f":"g","\u0120":"G","\u0121":"g","\u0122":"G","\u0123":"g","\u0124":"H","\u0125":"h","\u0126":"H","\u0127":"h","\u1e2a":"H","\u1e2b":"h","\u0128":"I","\u0129":"i","\u012a":"I","\u012b":"i","\u012c":"I","\u012d":"i","\u012e":"I","\u012f":"i","\u0130":"I","\u0131":"i","\u0132":"IJ","\u0133":"ij","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u1e30":"K","\u1e31":"k","K\u0306":"K","k\u0306":"k","\u0139":"L","\u013a":"l","\u013b":"L","\u013c":"l","\u013d":"L","\u013e":"l","\u013f":"L","\u0140":"l","\u0141":"l","\u0142":"l","\u1e3e":"M","\u1e3f":"m","M\u0306":"M","m\u0306":"m","\u0143":"N","\u0144":"n","\u0145":"N","\u0146":"n","\u0147":"N","\u0148":"n","\u0149":"n","N\u0306":"N","n\u0306":"n","\u014c":"O","\u014d":"o","\u014e":"O","\u014f":"o","\u0150":"O","\u0151":"o","\u0152":"OE","\u0153":"oe","P\u0306":"P","p\u0306":"p","\u0154":"R","\u0155":"r","\u0156":"R","\u0157":"r","\u0158":"R","\u0159":"r","R\u0306":"R","r\u0306":"r","\u0212":"R","\u0213":"r","\u015a":"S","\u015b":"s","\u015c":"S","\u015d":"s","\u015e":"S","\u0218":"S","\u0219":"s","\u015f":"s","\u0160":"S","\u0161":"s","\u0162":"T","\u0163":"t","\u021b":"t","\u021a":"T","\u0164":"T","\u0165":"t","\u0166":"T","\u0167":"t","T\u0306":"T","t\u0306":"t","\u0168":"U","\u0169":"u","\u016a":"U","\u016b":"u","\u016c":"U","\u016d":"u","\u016e":"U","\u016f":"u","\u0170":"U","\u0171":"u","\u0172":"U","\u0173":"u","\u0216":"U","\u0217":"u","V\u0306":"V","v\u0306":"v","\u0174":"W","\u0175":"w","\u1e82":"W","\u1e83":"w","X\u0306":"X","x\u0306":"x","\u0176":"Y","\u0177":"y","\u0178":"Y","Y\u0306":"Y","y\u0306":"y","\u0179":"Z","\u017a":"z","\u017b":"Z","\u017c":"z","\u017d":"Z","\u017e":"z","\u017f":"s","\u0192":"f","\u01a0":"O","\u01a1":"o","\u01af":"U","\u01b0":"u","\u01cd":"A","\u01ce":"a","\u01cf":"I","\u01d0":"i","\u01d1":"O","\u01d2":"o","\u01d3":"U","\u01d4":"u","\u01d5":"U","\u01d6":"u","\u01d7":"U","\u01d8":"u","\u01d9":"U","\u01da":"u","\u01db":"U","\u01dc":"u","\u1ee8":"U","\u1ee9":"u","\u1e78":"U","\u1e79":"u","\u01fa":"A","\u01fb":"a","\u01fc":"AE","\u01fd":"ae","\u01fe":"O","\u01ff":"o","\xde":"TH","\xfe":"th","\u1e54":"P","\u1e55":"p","\u1e64":"S","\u1e65":"s","X\u0301":"X","x\u0301":"x","\u0403":"\u0413","\u0453":"\u0433","\u040c":"\u041a","\u045c":"\u043a","A\u030b":"A","a\u030b":"a","E\u030b":"E","e\u030b":"e","I\u030b":"I","i\u030b":"i","\u01f8":"N","\u01f9":"n","\u1ed2":"O","\u1ed3":"o","\u1e50":"O","\u1e51":"o","\u1eea":"U","\u1eeb":"u","\u1e80":"W","\u1e81":"w","\u1ef2":"Y","\u1ef3":"y","\u0200":"A","\u0201":"a","\u0204":"E","\u0205":"e","\u0208":"I","\u0209":"i","\u020c":"O","\u020d":"o","\u0210":"R","\u0211":"r","\u0214":"U","\u0215":"u","B\u030c":"B","b\u030c":"b","\u010c\u0323":"C","\u010d\u0323":"c","\xca\u030c":"E","\xea\u030c":"e","F\u030c":"F","f\u030c":"f","\u01e6":"G","\u01e7":"g","\u021e":"H","\u021f":"h","J\u030c":"J","\u01f0":"j","\u01e8":"K","\u01e9":"k","M\u030c":"M","m\u030c":"m","P\u030c":"P","p\u030c":"p","Q\u030c":"Q","q\u030c":"q","\u0158\u0329":"R","\u0159\u0329":"r","\u1e66":"S","\u1e67":"s","V\u030c":"V","v\u030c":"v","W\u030c":"W","w\u030c":"w","X\u030c":"X","x\u030c":"x","Y\u030c":"Y","y\u030c":"y","A\u0327":"A","a\u0327":"a","B\u0327":"B","b\u0327":"b","\u1e10":"D","\u1e11":"d","\u0228":"E","\u0229":"e","\u0190\u0327":"E","\u025b\u0327":"e","\u1e28":"H","\u1e29":"h","I\u0327":"I","i\u0327":"i","\u0197\u0327":"I","\u0268\u0327":"i","M\u0327":"M","m\u0327":"m","O\u0327":"O","o\u0327":"o","Q\u0327":"Q","q\u0327":"q","U\u0327":"U","u\u0327":"u","X\u0327":"X","x\u0327":"x","Z\u0327":"Z","z\u0327":"z"},s=Object.keys(t).join("|"),a=new RegExp(s,"g"),o=new RegExp(s,""),n=function(e){return e.replace(a,(function(e){return t[e]}))};e.exports=n,e.exports.has=function(e){return!!e.match(o)},e.exports.remove=n}},s={},function e(a){var o=s[a];if(void 0!==o)return o.exports;var n=s[a]={exports:{}};return t[a](n,n.exports,e),n.exports}(772))},71113:(e,t,s)=>{"use strict";s.d(t,{A:()=>O});var a=s(31635),o=s(74848),n=s(96540),i=s(58065),l=s(9149),r=s.n(l),c=s(61183),d=s.n(c),u=s(11848),m=s(5696),p=s(44744),g=s(18011),h=s(43581),b=s(3246),j=s(83258),A=s(66848);const v="SCCategoryAutocomplete",x={root:`${v}-root`},f=(0,u.Ay)(m.A,{name:v,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({}))),O=e=>{const t=(0,A.A)({props:e,name:v}),{onChange:s,multiple:l=!1,defaultValue:c=(l?[]:null),limitCountCategories:u=0,checkboxSelect:m=!1,disabled:O=!1,endpointQueryParams:y={},TextFieldProps:C={variant:"outlined",label:(0,o.jsx)(i.A,{id:"ui.categoryAutocomplete.label",defaultMessage:"ui.categoryAutocomplete.label"})}}=t,E=(0,a.__rest)(t,["onChange","multiple","defaultValue","limitCountCategories","checkboxSelect","disabled","endpointQueryParams","TextFieldProps"]),[T,N]=(0,n.useState)(!1),[S,_]=(0,n.useState)("string"==typeof c?null:c),{categories:w,isLoading:k}=(0,j.A)({endpointQueryParams:y});(0,n.useEffect)((()=>{null==s||s(S)}),[S]),(0,n.useEffect)((()=>{k||"string"!=typeof c||_(l?w.filter((e=>e.id===Number(c))):w.find((e=>e.id===Number(c))))}),[k]);return(0,o.jsx)(f,Object.assign({className:x.root,multiple:l,open:T,onOpen:()=>{N(!0)},onClose:()=>{N(!1)},filterSelectedOptions:!m,disableCloseOnSelect:m,options:w||[],getOptionLabel:e=>e.name||"",value:S,selectOnFocus:!0,clearOnBlur:!0,blurOnSelect:!0,handleHomeEndKeys:!0,clearIcon:null,disabled:O||k,noOptionsText:(0,o.jsx)(i.A,{id:"ui.categoryAutocomplete.empty",defaultMessage:"ui.categoryAutocomplete.empty"}),onChange:(e,t)=>{let a=null;if(l&&u>0){const[...e]=t;a=e.slice(-1*u)}else a=t;_(a),null==s||s(a)},isOptionEqualToValue:(e,t)=>t.id===e.id,renderTags:(e,t)=>e.map(((e,s)=>(0,o.jsx)(p.A,Object.assign({id:e.id,label:e.name,color:e.color},t({index:s})),e.id))),renderOption:(e,t,{selected:s,inputValue:a})=>{const i=d()(t.name,a),l=r()(t.name,i);return(0,o.jsxs)("li",Object.assign({},e,{children:[m&&(0,o.jsx)(g.A,{style:{marginRight:8},checked:s}),(0,o.jsx)(p.A,{label:(0,o.jsx)(n.Fragment,{children:l.map(((e,t)=>(0,o.jsx)("span",Object.assign({style:{fontWeight:e.highlight?700:400}},{children:e.text}),t)))})})]}))},renderInput:e=>(0,o.jsx)(h.A,Object.assign({},e,C,{margin:"dense",InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"categories",endAdornment:(0,o.jsxs)(n.Fragment,{children:[k?(0,o.jsx)(b.A,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},E))}},71724:(e,t,s)=>{"use strict";s.d(t,{i:()=>o});var a=s(95878);const o=({adapter:e,value:t,props:s})=>{if(null===t)return null;const{minTime:o,maxTime:n,minutesStep:i,shouldDisableClock:l,shouldDisableTime:r,disableIgnoringDatePartForTimeValidation:c=!1,disablePast:d,disableFuture:u,timezone:m}=s,p=e.utils.dateWithTimezone(void 0,m),g=(0,a.iF)(c,e.utils);switch(!0){case!e.utils.isValid(t):return"invalidDate";case Boolean(o&&g(o,t)):return"minTime";case Boolean(n&&g(t,n)):return"maxTime";case Boolean(u&&e.utils.isAfter(t,p)):return"disableFuture";case Boolean(d&&e.utils.isBefore(t,p)):return"disablePast";case Boolean(r&&r(t,"hours")):return"shouldDisableTime-hours";case Boolean(r&&r(t,"minutes")):return"shouldDisableTime-minutes";case Boolean(r&&r(t,"seconds")):return"shouldDisableTime-seconds";case Boolean(l&&l(e.utils.getHours(t),"hours")):return"shouldDisableClock-hours";case Boolean(l&&l(e.utils.getMinutes(t),"minutes")):return"shouldDisableClock-minutes";case Boolean(l&&l(e.utils.getSeconds(t),"seconds")):return"shouldDisableClock-seconds";case Boolean(i&&e.utils.getMinutes(t)%i!=0):return"minutesStep";default:return null}}},72324:(e,t,s)=>{"use strict";s.d(t,{Zo:()=>ce});var a=s(96540),o=s(72739),n=s(27482),i=s(59145),l=s(11848),r=s(3541),c=s(99370),d=s(75372),u=s(82452),m=s(35892),p=s(95878),g=s(93703),h=s(50117),b=s(81593),j=s(80675),A=s(93932);function v(e){return(0,j.A)("MuiTimeClock",e)}(0,A.A)("MuiTimeClock",["root","arrowSwitcher"]);var x=s(4671),f=s(47859),O=s(73936);const y=220,C=36,E={x:y/2,y:y/2},T=E.x-E.x,N=0-E.y,S=(e,t,s)=>{const a=t-E.x,o=s-E.y,n=Math.atan2(T,N)-Math.atan2(a,o);let i=n*(180/Math.PI);i=Math.round(i/e)*e,i%=360;const l=a**2+o**2;return{value:Math.floor(i/e)||0,distance:Math.sqrt(l)}};function _(e){return(0,j.A)("MuiClockPointer",e)}(0,A.A)("MuiClockPointer",["root","thumb"]);var w=s(74848);const k=["className","hasSelected","isInner","type","viewValue"],R=e=>{const{classes:t}=e;return(0,c.A)({root:["root"],thumb:["thumb"]},_,t)},M=(0,l.Ay)("div",{name:"MuiClockPointer",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e,ownerState:t})=>(0,o.A)({width:2,backgroundColor:(e.vars||e).palette.primary.main,position:"absolute",left:"calc(50% - 1px)",bottom:"50%",transformOrigin:"center bottom 0px"},t.shouldAnimate&&{transition:e.transitions.create(["transform","height"])}))),I=(0,l.Ay)("div",{name:"MuiClockPointer",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})((({theme:e,ownerState:t})=>(0,o.A)({width:4,height:4,backgroundColor:(e.vars||e).palette.primary.contrastText,borderRadius:"50%",position:"absolute",top:-21,left:"calc(50% - 18px)",border:`16px solid ${(e.vars||e).palette.primary.main}`,boxSizing:"content-box"},t.hasSelected&&{backgroundColor:(e.vars||e).palette.primary.main})));function P(e){const t=(0,r.A)({props:e,name:"MuiClockPointer"}),{className:s,isInner:l,type:c,viewValue:d}=t,u=(0,n.A)(t,k),m=a.useRef(c);a.useEffect((()=>{m.current=c}),[c]);const p=(0,o.A)({},t,{shouldAnimate:m.current!==c}),g=R(p);return(0,w.jsx)(M,(0,o.A)({style:(()=>{let e=360/("hours"===c?12:60)*d;return"hours"===c&&d>12&&(e-=360),{height:Math.round((l?.26:.4)*y),transform:`rotateZ(${e}deg)`}})(),className:(0,i.A)(s,g.root),ownerState:p},u,{children:(0,w.jsx)(I,{ownerState:p,className:g.thumb})}))}function D(e){return(0,j.A)("MuiClock",e)}(0,A.A)("MuiClock",["root","clock","wrapper","squareMask","pin","amButton","pmButton","meridiemText"]);var $=s(23887);const L=(0,l.Ay)("div",{name:"MuiClock",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({display:"flex",justifyContent:"center",alignItems:"center",margin:e.spacing(2)}))),H=(0,l.Ay)("div",{name:"MuiClock",slot:"Clock",overridesResolver:(e,t)=>t.clock})({backgroundColor:"rgba(0,0,0,.07)",borderRadius:"50%",height:220,width:220,flexShrink:0,position:"relative",pointerEvents:"none"}),F=(0,l.Ay)("div",{name:"MuiClock",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})({"&:focus":{outline:"none"}}),V=(0,l.Ay)("div",{name:"MuiClock",slot:"SquareMask",overridesResolver:(e,t)=>t.squareMask})((({ownerState:e})=>(0,o.A)({width:"100%",height:"100%",position:"absolute",pointerEvents:"auto",outline:0,touchAction:"none",userSelect:"none"},e.disabled?{}:{"@media (pointer: fine)":{cursor:"pointer",borderRadius:"50%"},"&:active":{cursor:"move"}}))),U=(0,l.Ay)("div",{name:"MuiClock",slot:"Pin",overridesResolver:(e,t)=>t.pin})((({theme:e})=>({width:6,height:6,borderRadius:"50%",backgroundColor:(e.vars||e).palette.primary.main,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}))),B=(0,l.Ay)(x.A,{name:"MuiClock",slot:"AmButton",overridesResolver:(e,t)=>t.amButton})((({theme:e,ownerState:t})=>(0,o.A)({zIndex:1,position:"absolute",bottom:8,left:8,paddingLeft:4,paddingRight:4,width:C},"am"===t.meridiemMode&&{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:hover":{backgroundColor:(e.vars||e).palette.primary.light}}))),G=(0,l.Ay)(x.A,{name:"MuiClock",slot:"PmButton",overridesResolver:(e,t)=>t.pmButton})((({theme:e,ownerState:t})=>(0,o.A)({zIndex:1,position:"absolute",bottom:8,right:8,paddingLeft:4,paddingRight:4,width:C},"pm"===t.meridiemMode&&{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:hover":{backgroundColor:(e.vars||e).palette.primary.light}}))),z=(0,l.Ay)(f.A,{name:"MuiClock",slot:"meridiemText",overridesResolver:(e,t)=>t.meridiemText})({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"});function q(e){const t=(0,r.A)({props:e,name:"MuiClock"}),{ampm:s,ampmInClock:o,autoFocus:n,children:l,value:d,handleMeridiemChange:m,isTimeDisabled:p,meridiemMode:g,minutesStep:h=1,onChange:b,selectedId:j,type:A,viewValue:v,disabled:x,readOnly:f,className:E}=t,T=t,N=(0,u.hc)(),_=(0,u.Nq)(),k=a.useRef(!1),R=(e=>{const{classes:t}=e;return(0,c.A)({root:["root"],clock:["clock"],wrapper:["wrapper"],squareMask:["squareMask"],pin:["pin"],amButton:["amButton"],pmButton:["pmButton"],meridiemText:["meridiemText"]},D,t)})(T),M=p(v,A),I=!s&&"hours"===A&&(v<1||v>12),q=(e,t)=>{x||f||p(e,A)||b(e,t)},W=(e,t)=>{let{offsetX:a,offsetY:o}=e;if(void 0===a){const t=e.target.getBoundingClientRect();a=e.changedTouches[0].clientX-t.left,o=e.changedTouches[0].clientY-t.top}const n="seconds"===A||"minutes"===A?((e,t,s=1)=>{const a=6*s;let{value:o}=S(a,e,t);return o=o*s%60,o})(a,o,h):((e,t,s)=>{const{value:a,distance:o}=S(30,e,t);let n=a||12;return s?n%=12:o<y/2-C&&(n+=12,n%=24),n})(a,o,Boolean(s));q(n,t)},Y=a.useMemo((()=>"hours"===A||v%5==0),[A,v]),X="minutes"===A?h:1,K=a.useRef(null);(0,O.A)((()=>{n&&K.current.focus()}),[n]);return(0,w.jsxs)(L,{className:(0,i.A)(E,R.root),children:[(0,w.jsxs)(H,{className:R.clock,children:[(0,w.jsx)(V,{onTouchMove:e=>{k.current=!0,W(e,"shallow")},onTouchEnd:e=>{k.current&&(W(e,"finish"),k.current=!1)},onMouseUp:e=>{k.current&&(k.current=!1),W(e.nativeEvent,"finish")},onMouseMove:e=>{e.buttons>0&&W(e.nativeEvent,"shallow")},ownerState:{disabled:x},className:R.squareMask}),!M&&(0,w.jsxs)(a.Fragment,{children:[(0,w.jsx)(U,{className:R.pin}),null!=d&&(0,w.jsx)(P,{type:A,viewValue:v,isInner:I,hasSelected:Y})]}),(0,w.jsx)(F,{"aria-activedescendant":j,"aria-label":_.clockLabelText(A,d,N),ref:K,role:"listbox",onKeyDown:e=>{if(!k.current)switch(e.key){case"Home":q(0,"partial"),e.preventDefault();break;case"End":q("minutes"===A?59:23,"partial"),e.preventDefault();break;case"ArrowUp":q(v+X,"partial"),e.preventDefault();break;case"ArrowDown":q(v-X,"partial"),e.preventDefault()}},tabIndex:0,className:R.wrapper,children:l})]}),s&&o&&(0,w.jsxs)(a.Fragment,{children:[(0,w.jsx)(B,{onClick:f?void 0:()=>m("am"),disabled:x||null===g,ownerState:T,className:R.amButton,title:(0,$._S)(N,"am"),children:(0,w.jsx)(z,{variant:"caption",className:R.meridiemText,children:(0,$._S)(N,"am")})}),(0,w.jsx)(G,{disabled:x||null===g,onClick:f?void 0:()=>m("pm"),ownerState:T,className:R.pmButton,title:(0,$._S)(N,"pm"),children:(0,w.jsx)(z,{variant:"caption",className:R.meridiemText,children:(0,$._S)(N,"pm")})})]})]})}function W(e){return(0,j.A)("MuiClockNumber",e)}const Y=(0,A.A)("MuiClockNumber",["root","selected","disabled"]),X=["className","disabled","index","inner","label","selected"],K=(0,l.Ay)("span",{name:"MuiClockNumber",slot:"Root",overridesResolver:(e,t)=>[t.root,{[`&.${Y.disabled}`]:t.disabled},{[`&.${Y.selected}`]:t.selected}]})((({theme:e,ownerState:t})=>(0,o.A)({height:C,width:C,position:"absolute",left:"calc((100% - 36px) / 2)",display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",color:(e.vars||e).palette.text.primary,fontFamily:e.typography.fontFamily,"&:focused":{backgroundColor:(e.vars||e).palette.background.paper},[`&.${Y.selected}`]:{color:(e.vars||e).palette.primary.contrastText},[`&.${Y.disabled}`]:{pointerEvents:"none",color:(e.vars||e).palette.text.disabled}},t.inner&&(0,o.A)({},e.typography.body2,{color:(e.vars||e).palette.text.secondary}))));function Z(e){const t=(0,r.A)({props:e,name:"MuiClockNumber"}),{className:s,disabled:a,index:l,inner:d,label:u,selected:m}=t,p=(0,n.A)(t,X),g=t,h=(e=>{const{classes:t,selected:s,disabled:a}=e,o={root:["root",s&&"selected",a&&"disabled"]};return(0,c.A)(o,W,t)})(g),b=l%12/12*Math.PI*2-Math.PI/2,j=(y-C-2)/2*(d?.65:1),A=Math.round(Math.cos(b)*j),v=Math.round(Math.sin(b)*j);return(0,w.jsx)(K,(0,o.A)({className:(0,i.A)(s,h.root),"aria-disabled":!!a||void 0,"aria-selected":!!m||void 0,role:"option",style:{transform:`translate(${A}px, ${v+(y-C)/2}px`},ownerState:g},p,{children:u}))}const Q=({ampm:e,value:t,getClockNumberText:s,isDisabled:a,selectedId:o,utils:n})=>{const i=t?n.getHours(t):null,l=[],r=e?12:23,c=t=>null!==i&&(e?12===t?12===i||0===i:i===t||i-12===t:i===t);for(let d=e?1:0;d<=r;d+=1){let t=d.toString();0===d&&(t="00");const i=!e&&(0===d||d>12);t=n.formatNumber(t);const r=c(d);l.push((0,w.jsx)(Z,{id:r?o:void 0,index:d,inner:i,selected:r,disabled:a(d),label:t,"aria-label":s(t)},d))}return l},J=({utils:e,value:t,isDisabled:s,getClockNumberText:a,selectedId:o})=>{const n=e.formatNumber;return[[5,n("05")],[10,n("10")],[15,n("15")],[20,n("20")],[25,n("25")],[30,n("30")],[35,n("35")],[40,n("40")],[45,n("45")],[50,n("50")],[55,n("55")],[0,n("00")]].map((([e,n],i)=>{const l=e===t;return(0,w.jsx)(Z,{label:n,id:l?o:void 0,index:i+1,inner:!1,disabled:s(e),selected:l,"aria-label":a(n)},e)}))};var ee=s(33059),te=s(16566),se=s(60831),ae=s(78401);const oe=["ampm","ampmInClock","autoFocus","components","componentsProps","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableClock","shouldDisableTime","showViewSwitcher","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","disabled","readOnly","timezone"],ne=(0,l.Ay)(b.I,{name:"MuiTimeClock",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"column",position:"relative"}),ie=(0,l.Ay)(m.Y,{name:"MuiTimeClock",slot:"ArrowSwitcher",overridesResolver:(e,t)=>t.arrowSwitcher})({position:"absolute",right:12,top:15}),le=["hours","minutes"],re=a.forwardRef((function(e,t){const s=(0,u.hc)(),l=(0,r.A)({props:e,name:"MuiTimeClock"}),{ampm:m=s.is12HourCycleInCurrentLocale(),ampmInClock:b=!1,autoFocus:j,components:A,componentsProps:x,slots:f,slotProps:O,value:y,defaultValue:C,referenceDate:E,disableIgnoringDatePartForTimeValidation:T=!1,maxTime:N,minTime:S,disableFuture:_,disablePast:k,minutesStep:R=1,shouldDisableClock:M,shouldDisableTime:I,showViewSwitcher:P,onChange:D,view:L,views:H=le,openTo:F,onViewChange:V,focusedView:U,onFocusedViewChange:B,className:G,disabled:z,readOnly:W,timezone:Y}=l,X=(0,n.A)(l,oe),K=null!=f?f:(0,se.p)(A),Z=null!=O?O:x,{value:re,handleValueChange:ce,timezone:de}=(0,ee.Y)({name:"TimeClock",timezone:Y,value:y,defaultValue:C,onChange:D,valueManager:te.W}),ue=(({value:e,referenceDate:t,utils:s,props:o,timezone:n})=>{const i=a.useMemo((()=>te.W.getInitialReferenceValue({value:e,utils:s,props:o,referenceDate:t,granularity:ae.yX.day,timezone:n,getTodayDate:()=>(0,$.ak)(s,n,"date")})),[]);return null!=e?e:i})({value:re,referenceDate:E,utils:s,props:l,timezone:de}),me=(0,u.Nq)(),pe=(0,u.cB)(de),{view:ge,setView:he,previousView:be,nextView:je,setValueAndGoToNextView:Ae}=(0,g.o)({view:L,views:H,openTo:F,onViewChange:V,onChange:ce,focusedView:U,onFocusedViewChange:B}),{meridiemMode:ve,handleMeridiemChange:xe}=(0,h.r7)(ue,m,Ae),fe=a.useCallback(((e,t)=>{const a=(0,p.iF)(T,s),o="hours"===t||"minutes"===t&&H.includes("seconds"),n=({start:e,end:t})=>(!S||!a(S,t))&&((!N||!a(e,N))&&((!_||!a(e,pe))&&(!k||!a(pe,o?t:e)))),i=(e,a=1)=>{if(e%a!=0)return!1;if(null!=M&&M(e,t))return!1;if(I)switch(t){case"hours":return!I(s.setHours(ue,e),"hours");case"minutes":return!I(s.setMinutes(ue,e),"minutes");case"seconds":return!I(s.setSeconds(ue,e),"seconds");default:return!1}return!0};switch(t){case"hours":{const t=(0,p.gY)(e,ve,m),a=s.setHours(ue,t);return!n({start:s.setSeconds(s.setMinutes(a,0),0),end:s.setSeconds(s.setMinutes(a,59),59)})||!i(t)}case"minutes":{const t=s.setMinutes(ue,e);return!n({start:s.setSeconds(t,0),end:s.setSeconds(t,59)})||!i(e,R)}case"seconds":{const t=s.setSeconds(ue,e);return!n({start:t,end:t})||!i(e)}default:throw new Error("not supported")}}),[m,ue,T,N,ve,S,R,M,I,s,_,k,pe,H]),Oe=(0,d.A)(),ye=a.useMemo((()=>{switch(ge){case"hours":{const e=(e,t)=>{const a=(0,p.gY)(e,ve,m);Ae(s.setHours(ue,a),t)};return{onChange:e,viewValue:s.getHours(ue),children:Q({value:re,utils:s,ampm:m,onChange:e,getClockNumberText:me.hoursClockNumberText,isDisabled:e=>z||fe(e,"hours"),selectedId:Oe})}}case"minutes":{const e=s.getMinutes(ue),t=(e,t)=>{Ae(s.setMinutes(ue,e),t)};return{viewValue:e,onChange:t,children:J({utils:s,value:e,onChange:t,getClockNumberText:me.minutesClockNumberText,isDisabled:e=>z||fe(e,"minutes"),selectedId:Oe})}}case"seconds":{const e=s.getSeconds(ue),t=(e,t)=>{Ae(s.setSeconds(ue,e),t)};return{viewValue:e,onChange:t,children:J({utils:s,value:e,onChange:t,getClockNumberText:me.secondsClockNumberText,isDisabled:e=>z||fe(e,"seconds"),selectedId:Oe})}}default:throw new Error("You must provide the type for ClockView")}}),[ge,s,re,m,me.hoursClockNumberText,me.minutesClockNumberText,me.secondsClockNumberText,ve,Ae,ue,fe,Oe,z]),Ce=l,Ee=(e=>{const{classes:t}=e;return(0,c.A)({root:["root"],arrowSwitcher:["arrowSwitcher"]},v,t)})(Ce);return(0,w.jsxs)(ne,(0,o.A)({ref:t,className:(0,i.A)(Ee.root,G),ownerState:Ce},X,{children:[(0,w.jsx)(q,(0,o.A)({autoFocus:null!=j?j:!!U,ampmInClock:b&&H.includes("hours"),value:re,type:ge,ampm:m,minutesStep:R,isTimeDisabled:fe,meridiemMode:ve,handleMeridiemChange:xe,selectedId:Oe,disabled:z,readOnly:W},ye)),P&&(0,w.jsx)(ie,{className:Ee.arrowSwitcher,slots:K,slotProps:Z,onGoToPrevious:()=>he(be),isPreviousDisabled:!be,previousLabel:me.openPreviousView,onGoToNext:()=>he(je),isNextDisabled:!je,nextLabel:me.openNextView,ownerState:Ce})]}))})),ce=({view:e,onViewChange:t,focusedView:s,onFocusedViewChange:a,views:o,value:n,defaultValue:i,referenceDate:l,onChange:r,className:c,classes:d,disableFuture:u,disablePast:m,minTime:g,maxTime:h,shouldDisableTime:b,shouldDisableClock:j,minutesStep:A,ampm:v,ampmInClock:x,components:f,componentsProps:O,slots:y,slotProps:C,readOnly:E,disabled:T,sx:N,autoFocus:S,showViewSwitcher:_,disableIgnoringDatePartForTimeValidation:k,timezone:R})=>(0,w.jsx)(re,{view:e,onViewChange:t,focusedView:s&&(0,p.hW)(s)?s:null,onFocusedViewChange:a,views:o.filter(p.hW),value:n,defaultValue:i,referenceDate:l,onChange:r,className:c,classes:d,disableFuture:u,disablePast:m,minTime:g,maxTime:h,shouldDisableTime:b,shouldDisableClock:j,minutesStep:A,ampm:v,ampmInClock:x,components:f,componentsProps:O,slots:y,slotProps:C,readOnly:E,disabled:T,sx:N,autoFocus:S,showViewSwitcher:_,disableIgnoringDatePartForTimeValidation:k,timezone:R})},72736:(e,t,s)=>{"use strict";s.d(t,{A:()=>Ne});var a=s(31635),o=s(74848),n=s(11848),i=s(82007),l=s(40059),r=s(47859),c=s(1489),d=s(19546),u=s.n(d),m=s(96540),p=s(40094),g=s(38427),h=s(31494);const b={root:`${h.H}-lightbox-root`},j=(0,n.Ay)(g.A,{name:h.H,slot:"LightboxRoot"})((()=>({})));function A(e){const{medias:t=[],index:s=0,toolbarButtons:n,onClose:i,onIndexChange:l}=e,r=(0,a.__rest)(e,["medias","index","toolbarButtons","onClose","onIndexChange"]),c=(0,m.useCallback)(((e,t)=>({src:e.image,width:e.image_width,height:e.image_height,key:t})),[]);return(0,o.jsx)(j,Object.assign({},r,{className:b.root,images:t.map(c),visible:-1!==s,onClose:i,index:s,onIndexChange:l,toolbarButtons:n}))}var v=s(22860),x=s(73259),f=s(79671),O=s(13550),y=s(94520),C=s(15906);const E={displayRoot:`${v.H}-display-root`,background:`${v.H}-background`,backgroundPortrait:`${v.H}-background-portrait`,heightOne:`${v.H}-height-one`,heightHalfOne:`${v.H}-height-half-one`,heightTwo:`${v.H}-height-two`,heightThree:`${v.H}-height-three`,cover:`${v.H}-cover`,coverText:`${v.H}-cover-text`,slide:`${v.H}-slide`,border:`${v.H}-border`,gallery:`${v.H}-gallery`,title:`${v.H}-title`,iconFile:`${v.H}-icon-file`,docsWrapper:`${v.H}-docs-wrapper`},T=(0,n.Ay)(i.A,{name:v.H,slot:"DisplayRoot"})((()=>({})));var N=s(4671),S=s(50236),_=s(51372),w=s(44675),k=s(15327),R=s(37211),M=s(25911),I=s(36870),P=s(3246),D=s(28820),$=s(45284),L=s(75753),H=s(3338),F=s(58065),V=s(86691),U=s(39661),B=s(29368),G=s(40001);(0,G.fO)({allowRegisterNonExistent:!0,canAddEvents:!0,canRemoveEvents:!0,collectStats:!1}),Symbol.for("__le__"),Symbol.for("__le__pack__");const z=(e,t,s)=>(G.vF.debugLog(`abort: aborting ${e.state.valueOf()} item  - `,e),s(e.id,{status:0,state:G.aN.ABORTED,response:"aborted"}),!0),q=(G.aN.UPLOADING,G.aN.ADDED,G.aN.PENDING,(0,G.fO)({BATCH_ADD:"BATCH-ADD",BATCH_START:"BATCH-START",BATCH_PROGRESS:"BATCH_PROGRESS",BATCH_FINISH:"BATCH-FINISH",BATCH_ABORT:"BATCH-ABORT",BATCH_CANCEL:"BATCH-CANCEL",BATCH_ERROR:"BATCH-ERROR",BATCH_FINALIZE:"BATCH-FINALIZE",ITEM_START:"FILE-START",ITEM_CANCEL:"FILE-CANCEL",ITEM_PROGRESS:"FILE-PROGRESS",ITEM_FINISH:"FILE-FINISH",ITEM_ABORT:"FILE-ABORT",ITEM_ERROR:"FILE-ERROR",ITEM_FINALIZE:"FILE-FINALIZE",REQUEST_PRE_SEND:"REQUEST_PRE_SEND",ALL_ABORT:"ALL_ABORT"})),W=((0,G.fO)({ITEM_PROGRESS:"ITEM_PROGRESS",BATCH_PROGRESS:"BATCH_PROGRESS"}),[G.aN.FINISHED,G.aN.ERROR,G.aN.CANCELLED,G.aN.ABORTED]),Y=Symbol.for("__rpldy-sstt-proxy__"),X=Symbol.for("__rpldy-sstt-state__"),K=((0,G.fd)({withSymbols:!0,predicate:e=>e!==Y&&e!==X}),(0,G.fd)({undefinedOverwrites:!0})),Z=(e,t,s,a,o,n)=>(0,G.w$)(e.trigger,o,t,a).then((e=>(n?.(e),((e,t,s,a)=>{let o=s,n=t;if(a&&"boolean"!=typeof a){if(G.vF.debugLog(`uploader.queue: REQUEST_PRE_SEND(${e}) event returned updated items/options`,a),a.items){if(a.items.length!==t.length||!(0,G.hR)(a.items,t,["id","batchId","recycled"]))throw new Error(`REQUEST_PRE_SEND(${e}) event handlers must return same items with same ids`);n=a.items}a.options&&(o=K({},s,a.options))}return{items:n,options:o,cancelled:!1===a}})(o,s,a,e)))),Q=(e,t)=>{const s=t.items[0].batchId;if(t.items[0]&&e.getState().batches[s]){e.updateState((e=>{t.items.forEach((t=>{var s;s=e.items[t.id],W.includes(s.state)||(e.items[t.id]=t)}));const a=e.batches[s];t.items.forEach((({id:e})=>{a.itemBatchOptions[e]=t.options}))}));const a=e.getState();t.items=t.items.map((e=>a.items[e.id]));const o=a.batches[s];t.options=o.itemBatchOptions[t.items[0].id]||o.batchOptions}},J=(e,t,s=null,a=null)=>(o,n)=>((e,t,s,a,o,n)=>{const i=s(t),l=e.getState().batches[i[0].batchId].batchOptions,r=a?.(t,l)||t;return Z(e,r,i,l,n,o).then((t=>(t.cancelled||Q(e,t),t)))})(o,n,t,s,a,e),ee=(J(q.BATCH_START,(e=>e.items),null,(({batch:e}={batch:!1})=>{if(e)throw new Error("BATCH_START event handlers cannot update batch data. Only items & options")})),G.mX.ADDED,G.mX.PROCESSING,G.mX.UPLOADING,G.mX.ABORTED,G.mX.CANCELLED,G.mX.FINISHED,G.mX.ERROR,G.aN.PENDING.valueOf(),G.aN.ADDED.valueOf(),q.ITEM_START,G.aN.FINISHED.valueOf(),q.ITEM_FINISH,G.aN.ERROR.valueOf(),q.ITEM_ERROR,G.aN.CANCELLED.valueOf(),q.ITEM_CANCEL,G.aN.ABORTED.valueOf(),q.ITEM_ABORT,G.aN.UPLOADING.valueOf(),q.ITEM_PROGRESS,J(q.REQUEST_PRE_SEND,(e=>e),((e,t)=>({items:e,options:t}))),"rpldy-sender");class te extends Error{constructor(e){super(`${e} didn't receive upload URL`),this.name="MissingUrlError"}}const se=(e,t,...s)=>{"set"in e?e.set(t,...s):("delete"in e&&e.delete(t),e.append(t,...s))},ae=(e,t)=>{const s=new FormData;return t.params&&Object.entries(t.params).forEach((([e,a])=>{(t.formDataAllowUndefined||void 0!==a)&&se(s,e,a)})),((e,t,s)=>{const a=1===t.length;t.forEach(((t,o)=>{const n=a?s.paramName:(0,G.Tn)(s.formatGroupParamName)?s.formatGroupParamName(o,s.paramName):`${s.paramName}[${o}]`;t.file?se(e,n,t.file,t.file.name):t.url&&se(e,n,t.url)}))})(s,e,t),s},oe=[200,201,202,203,204],ne=(e,t,s,a,o)=>{let n;const i=o?.getRequestData?o.getRequestData(e,s):((e,t)=>{let s;if(t.sendWithFormData)G.vF.debugLog(`uploady.sender: sending ${e.length} item(s) as form data`),s=ae(e,t);else{if(e.length>1)throw new Error(`XHR Sender - Request without form data can only contain 1 item. received ${e.length}`);const t=e[0];G.vF.debugLog(`uploady.sender: sending item ${t.id} as request body`),s=t.file||t.url}return s})(e,s),l=(o=t,l=i,r)=>{const c=(0,G.h1)({...(0,G.Up)(s,["method","headers","withCredentials"]),preSend:t=>{t.upload.onprogress=t=>{t.lengthComputable&&a&&a(t,e.slice())}}},r),d=(0,G.Em)(o,l,c);return n=d.xhr,d},r=o?.preRequestHandler?o.preRequestHandler(l,e,t,s,a,o):l();return{url:t,count:e.length,pXhr:r,getXhr:()=>n,aborted:!1}},ie=(e,t,s)=>{let a=e;const o=t?.["content-type"];if(s.forceJsonResponse||o?.includes("json"))try{a=JSON.parse(e)}catch{}return a},le=(e,t)=>e.pXhr.then((e=>(G.vF.debugLog("uploady.sender: received upload response ",e),((e,t)=>{const s=t.isSuccessfulCall?t.isSuccessfulCall(e):oe.includes(e.status);return(0,G.yL)(s)?s:Promise.resolve(s)})(e,t).then((s=>{const a=s?G.aN.FINISHED:G.aN.ERROR,o=e.status,n=(0,G.tn)(e);return{status:o,state:a,response:{data:t.formatServerResponse?.(e.response,o,n)??ie(e.response,n,t),headers:n}}}))))).catch((t=>{let s,a;return e.aborted?(s=G.aN.ABORTED,a="aborted"):(G.vF.debugLog("uploady.sender: upload failed: ",t),s=G.aN.ERROR,a=t),{error:!0,state:s,response:a,status:0}}));(0,G.fO)({autoUpload:!0,clearPendingOnAdd:!1,inputFieldName:"file",concurrent:!1,maxConcurrent:2,grouped:!1,maxGroupSize:5,method:"POST",params:{},fileFilter:()=>!0,forceJsonResponse:!1,withCredentials:!1,destination:{},send:null,sendWithFormData:!0,formDataAllowUndefined:!1,fastAbortThreshold:100}),(0,G.Vd)()&&window;var re;Object.values(q);const ce=Symbol.for("_rpldy-version_"),de=()=>(0,G.Vd)()?window:globalThis||process,ue=()=>de()[ce],me=m.createContext(null),pe=e=>((0,G.V1)(!(()=>{const e=ue();return!!e&&"1.13.0"!==e})(),"Uploady - Valid UploadyContext not found.\nYou may be using packages of different Uploady versions. <Uploady> and all other packages using the context provider must be of the same version: %s",ue()),(0,G.V1)(e&&e.hasUploader(),"Uploady - Valid UploadyContext not found. Make sure you render inside <Uploady>"),e),ge=()=>pe((0,m.useContext)(me)),he=(e,t)=>{const s=ge(),{on:a,off:o}=s;(0,m.useEffect)((()=>(a(e,t),()=>{o(e,t)})),[e,t,a,o])},be=(e,t)=>(s,a)=>{const[o,n]=(0,m.useState)(null);let i=s,l=a;s&&!(0,G.Tn)(s)&&(l=s,i=void 0);const r=(0,m.useCallback)(((e,...s)=>{l&&e.id!==l||(n(t(e,...s)),(0,G.Tn)(i)&&i(e,...s))}),[i,l]);return he(e,r),o},je=(e,t=!0)=>(s,a)=>{const o=(0,m.useCallback)(((e,...o)=>!s||t&&a&&e.id!==a?void 0:s(e,...o)),[s,a]);he(e,o)},Ae=(je(q.BATCH_ADD,!1),je(q.BATCH_START),je(q.BATCH_FINISH),je(q.BATCH_CANCEL),je(q.BATCH_ERROR),je(q.BATCH_FINALIZE),je(q.BATCH_ABORT),be(q.BATCH_PROGRESS,(e=>({...e}))),je(q.ITEM_START),je(q.ITEM_FINISH),je(q.ITEM_CANCEL),je(q.ITEM_ERROR),je(q.ITEM_ABORT),je(q.ITEM_FINALIZE),be(q.ITEM_PROGRESS,(e=>({...e}))),je(q.REQUEST_PRE_SEND,!1),je(q.ALL_ABORT,!1),Symbol.for("rpldy_component"));function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},ve.apply(null,arguments)}const xe=({eventType:e,getIsValidEventData:t,getRequestData:s})=>a=>o=>{const n=ge(),[i,l]=(0,m.useState)({updateRequest:null,requestData:null}),{id:r}=o;return(0,m.useLayoutEffect)((()=>{const a=(...o)=>!0===t(r,...o)?new Promise((t=>{l({updateRequest:s=>{n.off(e,a),t(s)},requestData:s(...o)})})):void 0;return r&&n.on(e,a),()=>{r&&n.off(e,a)}}),[n,r]),m.createElement(a,ve({},o,i))},fe=(xe({eventType:q.REQUEST_PRE_SEND,getIsValidEventData:(e,{items:t})=>!!t.find((t=>t.id===e)),getRequestData:({items:e,options:t})=>({items:e,options:t})}),xe({eventType:q.BATCH_START,getIsValidEventData:(e,t)=>t.id===e,getRequestData:(e,t)=>({batch:e,items:e.items,options:t})}),(e,t)=>{const s=(s,n)=>{const{showFileUpload:i,getInternalFileInput:l}=ge(),{id:r,className:c,text:d,children:u,extraProps:p,onClick:g}=s,h=(0,a.__rest)(s,["id","className","text","children","extraProps","onClick"]),b=(0,m.useRef)();b.current=h;const j=(0,m.useCallback)((e=>{const s=l();s.current.accept=t.accept,t.capture?s.current.capture=t.capture:s.current.removeAttribute("capture"),i(b.current),null==g||g(e)}),[l,i,b,g]);return(0,o.jsx)(e,Object.assign({ref:n,onClick:j,id:r,className:c,children:u||d||"Upload"},p))};return(e=>{e[Ae]=!0})(s),(0,m.forwardRef)(s)});var Oe=s(18590);const ye={triggerRoot:`${v.H}-trigger-root`,triggerDrawerRoot:`${v.H}-trigger-drawer-root`,triggerMenuRoot:`${v.H}-trigger-menu-root`,paper:`${v.H}-paper`,item:`${v.H}-item`},Ce=(0,n.Ay)(N.A,{name:v.H,slot:"TriggerRoot"})((()=>({}))),Ee=(0,n.Ay)(S.A,{name:v.H,slot:"TriggerDrawerRoot"})((()=>({}))),Te=(0,n.Ay)(_.A,{name:v.H,slot:"TriggerMenuRoot"})((()=>({})));const Ne={name:"file",displayComponent:e=>{const{className:t="",medias:s=[],maxVisible:n=5,gallery:d=!0,onMediaClick:g=null}=e,[h,b]=(0,m.useState)(-1),[j,v]=(0,m.useState)(void 0),{ref:N,inView:S}=(0,p.Wx)({triggerOnce:!1}),_=(0,m.useMemo)((()=>s.filter(f.S)),[s]),w=(0,m.useMemo)((()=>s.filter(f.t)),[s]),k=(e,t=!1)=>{if("object"==typeof e){const s=e.image_thumbnail?e.image_thumbnail.url:e.image?e.image:"/static/frontend_v2/images/image.svg";return t&&e.image?e.image:s}return e},R=(0,m.useCallback)((e=>{!1!==d&&(b(e),g(_[e]))}),[d,b,_,g]),M=e=>{if(!e)return null;let t=null;if(e.type)if("doc"===e.type)t=(0,o.jsx)(l.A,Object.assign({className:E.iconFile},{children:"picture_as_pdf"}));else t=(0,o.jsx)(l.A,Object.assign({className:E.iconFile},{children:"insert_drive_file"}));return(0,o.jsx)(m.Fragment,{children:e.title&&(0,o.jsx)("div",Object.assign({className:E.title},{children:(0,o.jsxs)(r.A,Object.assign({variant:"subtitle2"},{children:[t," ",e.title]}))}))})},I=e=>d?[(0,o.jsx)("div",{className:u()(E.cover,E.slide)},`cover-${e}`),(0,o.jsx)("div",Object.assign({className:u()(E.coverText,E.slide,"animate-text"),style:{fontSize:"100%"}},{children:(0,o.jsx)(l.A,{children:"zoom_out_map"})}),`cover-text-${e}`)]:null,P=e=>{const t=_.length-(n&&n>5?5:n);return[e&&(0,o.jsx)("div",{className:E.cover},"count"),e&&(0,o.jsx)("div",Object.assign({className:E.coverText,style:{fontSize:"200%"}},{children:(0,o.jsxs)("p",{children:["+",t]})}),"count-sub")]},D=(0,m.useCallback)((e=>(0,a.__awaiter)(void 0,void 0,void 0,(function*(){try{const t=yield O.A.request({url:w[e].url,responseType:"blob"}),s=new Blob([t.data],{type:"application/pdf"}),a=window.URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download=w[e].title,o.click(),window.URL.revokeObjectURL(a),null==g||g(w[e])}catch(t){y.V.error(C.d,t)}}))),[g]),$=[..._];return n&&_.length>n&&($.length=n),0===s.length?null:(0,o.jsxs)(T,Object.assign({className:u()(E.displayRoot,t)},{children:[[1,3,4].includes($.length)&&(()=>{const e=_.length>n&&1==n?P(!0):I(0),t=!!_[0].image_mimetype&&_[0].image_mimetype.includes("image/gif"),s=_[0].image_height<_[0].image_width;return(0,o.jsx)(c.Ay,Object.assign({container:!0,style:Object.assign({},_[0].image_thumbnail&&_[0].image_thumbnail.color?{backgroundColor:_[0].image_thumbnail.color}:{})},{children:(0,o.jsxs)(c.Ay,Object.assign({item:!0,ref:N,xs:12,classes:{root:u()(E.border,E.heightOne,Object.assign(Object.assign({},t||s?{[E.background]:!0}:{[E.backgroundPortrait]:!0}),{[E.gallery]:d,[E.heightHalfOne]:_.length>1}))},onClick:()=>R(0),style:Object.assign({background:`url(${k(_[0],S&&t)})`},s?{paddingTop:100*_[0].image_height/_[0].image_width+"%"}:{})},{children:[e,M(_[0])]}))}))})(),$.length>=2&&$.length<4&&(()=>{const e=_.length>n&&[2,3].includes(+n)?P(!0):I(1),t=[3,4].includes(_.length)||_.length>+n&&[3,4].includes(+n);return(0,o.jsxs)(c.Ay,Object.assign({container:!0},{children:[(0,o.jsxs)(c.Ay,Object.assign({item:!0,xs:6,classes:{root:u()(E.border,E.heightTwo,E.background,{[E.gallery]:d})},onClick:()=>R(t?1:0),style:{background:`url(${k(t?_[1]:_[0])})`}},{children:[I(t?1:0),M(_[0])]})),(0,o.jsxs)(c.Ay,Object.assign({item:!0,xs:6,classes:{root:u()(E.border,E.heightTwo,E.background,{[E.gallery]:d})},onClick:()=>R(t?2:1),style:{background:`url(${k(t?_[2]:_[1])})`}},{children:[e,M(_[1])]}))]}))})(),$.length>=4&&(()=>{const e=4==_.length||_.length>+n&&4==+n,t=!n||n>5||_.length>n&&[4,5].includes(+n)?P(!0):I(e?3:4);return(0,o.jsxs)(c.Ay,Object.assign({container:!0},{children:[(0,o.jsxs)(c.Ay,Object.assign({item:!0,xs:4,md:4,classes:{root:u()(E.border,E.heightThree,E.background,{[E.gallery]:d})},onClick:()=>R(e?1:2),style:{background:`url(${k(e?_[1]:_[2])})`}},{children:[I(e?1:2),M(_[1])]})),(0,o.jsxs)(c.Ay,Object.assign({item:!0,xs:4,md:4,classes:{root:u()(E.border,E.heightThree,E.background,{[E.gallery]:d})},onClick:()=>R(e?2:3),style:{background:`url(${k(e?_[2]:_[3])})`}},{children:[I(e?2:3),M(_[2])]})),(0,o.jsxs)(c.Ay,Object.assign({item:!0,xs:4,md:4,classes:{root:u()(E.border,E.heightThree,E.background,{[E.gallery]:d})},onClick:()=>R(e?3:4),style:{background:`url(${k(e?_[3]:_[4])})`}},{children:[t,M(_[3])]}))]}))})(),-1!==h&&(0,o.jsx)(A,{onClose:()=>{b(-1),v(void 0)},index:h,medias:_,toolbarButtons:j}),(0,o.jsx)(i.A,Object.assign({className:E.docsWrapper},{children:w.map(((e,t)=>(0,o.jsx)(x.A,{document:e,index:t,handleDownload:D,onMediaClick:g},e.id)))}))]}))},triggerButton:e=>{var{className:t,onAdd:s=null}=e,n=(0,a.__rest)(e,["className","onAdd"]);const[i,r]=(0,m.useState)(null),[c,d]=(0,m.useState)(!1),p=(0,$.J_)(),{preferences:g}=(0,L.Sw)(),h=(0,w.A)(),b=(0,k.A)(h.breakpoints.down("md")),{enqueueSnackbar:j,closeSnackbar:A}=(0,Oe.dh)(),v=(0,m.useMemo)((()=>g&&H.BF in g&&g[H.BF].value),[g]),x=(0,m.useMemo)((()=>v.split(",")),[v]),{imageMimeTypes:f,documentMimeTypes:O}=(0,m.useMemo)((()=>x.reduce(((e,t)=>e=t.startsWith("image/")?Object.assign(Object.assign({},e),{imageMimeTypes:e.imageMimeTypes.concat(`${t},`)}):Object.assign(Object.assign({},e),{documentMimeTypes:e.documentMimeTypes.concat(`${t},`)})),{imageMimeTypes:"",documentMimeTypes:""})),[x]),y=(0,m.useMemo)((()=>f.substring(0,f.length-1)),[f]),C=(0,m.useMemo)((()=>O.substring(0,O.length-1)),[O]),E=fe((0,m.forwardRef)(((e,t)=>(0,o.jsx)(R.A,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:y,capture:"camera"}),T=fe((0,m.forwardRef)(((e,t)=>(0,o.jsx)(R.A,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:y}),N=fe((0,m.forwardRef)(((e,t)=>(0,o.jsx)(R.A,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:C}),S=fe((0,m.forwardRef)(((e,t)=>(0,o.jsx)(M.A,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:y}),_=fe((0,m.forwardRef)(((e,t)=>(0,o.jsx)(M.A,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:C}),G=(0,m.useCallback)((e=>{r(e.currentTarget)}),[]),z=(0,m.useCallback)((()=>{r(null)}),[]),q=(0,m.useCallback)((e=>{if(v.includes(e.type))return!0;const t=j((0,o.jsx)(F.A,{id:"ui.composer.media.file.error",defaultMessage:"ui.composer.media.file.error"}),{variant:"error",anchorOrigin:{horizontal:"center",vertical:"top"},autoHideDuration:5e3,SnackbarProps:{onClick:()=>{A(t)}}});return!1}),[v]),W=(0,m.useCallback)((e=>{s&&s(e)}),[s]),Y=(0,m.useCallback)((e=>{d(Object.keys(e).length>0)}),[]),X=(0,m.useCallback)(((e,t)=>{const s=j(`${e.name}: ${t}`,{variant:"error",anchorOrigin:{horizontal:"center",vertical:"top"},autoHideDuration:2e3,SnackbarProps:{onClick:()=>{A(s)}}})}),[j]),K=(0,m.useMemo)((()=>b?[(0,o.jsx)(I.Ay,Object.assign({className:ye.item},{children:(0,o.jsx)(E,Object.assign({inputFieldName:"image"},{children:(0,o.jsx)(F.A,{id:"ui.composer.media.file.photo",defaultMessage:"ui.composer.media.file.photo"})}))}),"photo"),(0,o.jsx)(I.Ay,Object.assign({className:ye.item},{children:(0,o.jsx)(T,Object.assign({inputFieldName:"image"},{children:(0,o.jsx)(F.A,{id:"ui.composer.media.file.gallery",defaultMessage:"ui.composer.media.file.gallery"})}))}),"gallery"),(0,o.jsx)(I.Ay,Object.assign({className:ye.item},{children:(0,o.jsx)(N,Object.assign({inputFieldName:"document"},{children:(0,o.jsx)(F.A,{id:"ui.composer.media.file.document",defaultMessage:"ui.composer.media.file.document"})}))}),"document")]:[(0,o.jsx)(S,Object.assign({extraProps:{className:ye.item},inputFieldName:"image"},{children:(0,o.jsx)(F.A,{id:"ui.composer.media.file.gallery",defaultMessage:"ui.composer.media.file.gallery"})}),"gallery"),(0,o.jsx)(_,Object.assign({extraProps:{className:ye.item},inputFieldName:"document"},{children:(0,o.jsx)(F.A,{id:"ui.composer.media.file.document",defaultMessage:"ui.composer.media.file.document"})}),"document")]),[b,q,W,Y,X]);return(0,o.jsxs)(U.Ay,Object.assign({destination:{url:`${p.settings.portal}${B.A.ComposerChunkUploadMedia.url()}`,method:B.A.ComposerChunkUploadMedia.method},fileFilter:q,chunkSize:204800,multiple:!0},{children:[(0,o.jsx)(V.A,{onSuccess:W,onProgress:Y,onError:X}),(0,o.jsx)(Ce,Object.assign({className:u()(t,ye.triggerRoot)},n,{"aria-label":"add media",disabled:c,onClick:G},{children:c?(0,o.jsx)(P.A,{size:20}):(0,o.jsx)(l.A,{children:"photo_file"})})),b?(0,o.jsx)(Ee,Object.assign({onClick:()=>r(null),className:ye.triggerDrawerRoot,anchor:"bottom",open:Boolean(i),onClose:z,onOpen:G,PaperProps:{className:ye.paper},disableSwipeToOpen:!0},{children:(0,o.jsx)(D.A,{children:K})})):(0,o.jsx)(Te,Object.assign({onClick:()=>r(null),className:ye.triggerMenuRoot,anchorEl:i,open:Boolean(i),onClose:z,PaperProps:{className:ye.paper}},{children:K}))]}))},layerComponent:null,previewComponent:s(29858).A,filter:f.S}},74859:(e,t,s)=>{"use strict";s.d(t,{A:()=>E,z:()=>C});var a=s(31635),o=s(74848),n=s(96540),i=s(11848),l=s(67733),r=s(1136),c=s(82007),d=s(47859),u=s(71543),m=s(40059),p=s(87467),g=s(57416),h=s(1275),b=s(21676);const j="SCTags",A=(0,i.Ay)(l.A,{name:`${j}`,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({cursor:"pointer"}))),v={paper:`${j}-paper`},x=(0,i.Ay)(r.A,{name:`${j}Popper`,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({zIndex:2,[`& .${v.paper}`]:{padding:"10px 5px"}}))),f=(0,i.Ay)(c.A,{name:`${j}List`,slot:"Root",overridesResolver:(e,t)=>t.root})({}),O=(0,i.Ay)(c.A,{name:`${j}Stack`,slot:"Root",overridesResolver:(e,t)=>t.root})({flexWrap:"wrap",justifyContent:"flex-start",alignItems:"flex-start","& > div:not(style)+:not(style)":{margin:0}}),y=(0,i.Ay)(l.A,{name:`${j}ItemList`,slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({padding:e.spacing(.2),textAlign:"center",color:e.palette.text.secondary})));var C;function E(e){const{tags:t=[],title:s=null,type:i=C.POPPER,onOpen:l=null,onClose:r=null,onClickTag:c=null,TagChipProps:j={}}=e,E=(0,a.__rest)(e,["tags","title","type","onOpen","onClose","onClickTag","TagChipProps"]),[T,N]=(0,n.useState)(!1);let S=(0,n.useRef)(null);function _(){S.current&&S.current.contains(event.target)||(N(!1),E.onClose&&E.onClose())}function w(){return(0,o.jsx)(o.Fragment,{children:s&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.A,Object.assign({sx:{padding:1,fontWeight:600}},{children:s})),(0,o.jsx)(u.A,{})]})})}const k=(0,n.useRef)(T);return n.useEffect((()=>{!0===k.current&&!1===T&&S.current.focus(),k.current=T}),[T]),(0,o.jsx)(o.Fragment,{children:t.length&&t.filter((e=>e.visible)).length>0&&(0,o.jsx)(n.Fragment,{children:i===C.POPPER?(0,o.jsxs)(A,Object.assign({},E,{children:[(0,o.jsx)(m.A,Object.assign({ref:S,fontSize:"small",onClick:function(){N((e=>!e)),E.onOpen&&E.onOpen(!T)},"aria-haspopup":"true"},{children:"label"})),(0,o.jsx)(x,Object.assign({open:T,anchorEl:S.current,transition:!0,placement:"bottom-start",modifiers:[{name:"preventOverflow",enabled:!0}]},{children:e=>{var{TransitionProps:s,placement:n}=e,i=(0,a.__rest)(e,["TransitionProps","placement"]);return(0,o.jsx)(p.A,Object.assign({},s,{style:{transformOrigin:"bottom"===n?"center top":"center bottom"}},{children:(0,o.jsx)(g.A,Object.assign({variant:"outlined",className:v.paper},{children:(0,o.jsx)(h.x,Object.assign({onClickAway:_},{children:(0,o.jsxs)(o.Fragment,{children:[w(),(0,o.jsx)(O,Object.assign({spacing:2},i,{children:t.filter((e=>e.visible)).map((e=>(0,o.jsx)(y,{children:(0,o.jsx)(b.A,Object.assign({tag:e,onClick:c},j,{showDescription:!0}))},e.id)))}))]})}))}))}))}}))]})):(0,o.jsxs)(f,{children:[w(),(0,o.jsx)(O,Object.assign({spacing:1,direction:E.direction?E.direction:"column"},{children:t.filter((e=>e.visible)).map((e=>(0,o.jsx)(y,{children:(0,o.jsx)(b.A,Object.assign({tag:e,onClick:c},j,{showDescription:!0}))},e.id)))}))]})})})}!function(e){e.LIST="list",e.POPPER="popper"}(C||(C={}))},83258:(e,t,s)=>{"use strict";s.d(t,{A:()=>m});var a=s(31635),o=s(96540),n=s(42269),i=s(29368),l=s(27202),r=s(28692),c=s(94520),d=s(86354);const u={categories:[],isLoading:!0},m=e=>{const{cacheStrategy:t=r.So.CACHE_FIRST,endpointQueryParams:s={}}=e||{},m=(0,d.hI)(),p=t!==r.So.NETWORK_ONLY?((e,t)=>{if(!e)return null;const s=e.map((e=>{const t=(0,d.fL)(e);return r.Ay.get(t)}));return s.filter((e=>!e)).length>0?null:(null==t?void 0:t.can_create_content)?s.filter((e=>!e.content_only_staff)):s})(r.Ay.get(m,null),s):null,[g,h]=(0,o.useState)(null!==p?{categories:p,isLoading:!1}:u),b=(e=i.A.CategoryList.url())=>(0,a.__awaiter)(void 0,void 0,void 0,(function*(){const t=yield l.A.getAllCategories(Object.assign({active:!0},s),{url:e});return t.next?t.results.concat(yield b(t.next)):t.results}));return(0,o.useEffect)((()=>{t===r.So.CACHE_FIRST&&p||b().then((e=>{h({categories:e,isLoading:!1}),r.Ay.set(m,e.map((e=>{const t=(0,d.fL)(e.id);return r.Ay.set(t,e),e.id})))})).catch((e=>{console.log(e),c.V.error(n.K,"Unable to retrieve categories")}))}),[]),g}},84497:(e,t,s)=>{"use strict";s.d(t,{A:()=>as});var a=s(31635),o=s(74848),n=s(96540),i=s(11848),l=s(47859),r=s(42942),c=s(25292),d=s(67733),u=s(44744),m=s(40059),p=s(34069),g=s(27365),h=s(18653),b=s(82007),j=s(25430),A=s(17809),v=s(26763),x=s(6836),f=s(12486),O=s(74859),y=s(1489),C=s(71543),E=s(19546),T=s.n(E),N=s(42606),S=s(57473),_=s(92699);const w={root:`${_.H}-action-vote-root`,divider:`${_.H}-action-vote-divider`,button:`${_.H}-action-vote-button`,inline:`${_.H}-action-vote-inline`,viewAudienceButton:`${_.H}-action-vote-view-audience-button`},k=(0,i.Ay)(d.A,{name:_.H,slot:"ActionVoteRoot"})((()=>({})));const R=function(e){const{className:t=null,feedObjectId:s=null,feedObject:i=null,feedObjectType:l=null,withAudience:r=!0,withAction:c=!0,inlineAction:d=!1,onVoteAction:u=(()=>null)}=e,m=(0,a.__rest)(e,["className","feedObjectId","feedObject","feedObjectType","withAudience","withAction","inlineAction","onVoteAction"]);return(0,o.jsxs)(k,Object.assign({className:T()(w.root,t,{[w.inline]:d})},m,{children:[r&&(0,o.jsx)(S.A,{className:w.viewAudienceButton,contributionId:s,contributionType:l,contribution:i,variant:"text",size:"small"}),c&&(0,o.jsxs)(n.Fragment,{children:[!d&&r&&(0,o.jsx)(C.A,{className:w.divider}),(0,o.jsx)(N.A,{className:w.button,contributionId:s,contributionType:l,contribution:i,onVote:u})]})]}))};var M=s(27885),I=s(6442),P=s(73785),D=s(77577),$=s(20411),L=s(3341),H=s(83426),F=s(95754),V=s(74531);const U=(0,M.YK)({comments:{id:"ui.feedObject.comment.comments",defaultMessage:"ui.feedObject.comment.comments"},comment:{id:"ui.feedObject.comment.comment",defaultMessage:"ui.feedObject.comment.comment"}}),B={root:`${_.H}-action-comment-root`,divider:`${_.H}-action-comment-divider`,inline:`${_.H}-action-comment-inline`,button:`${_.H}-action-comment-button`,viewAudienceButton:`${_.H}-action-comment-view-audience-button`},G=(0,i.Ay)(d.A,{name:_.H,slot:"ActionCommentRoot"})((()=>({})));const z=function(e){const{className:t,feedObjectId:s,feedObject:i,feedObjectType:c=H.Z.POST,feedObjectTemplate:d=F.a,withAction:u=!0,withAudience:p=!0,inlineAction:g=!1,onViewCommentsAction:b,onCommentAction:j}=e,A=(0,a.__rest)(e,["className","feedObjectId","feedObject","feedObjectType","feedObjectTemplate","withAction","withAudience","inlineAction","onViewCommentsAction","onCommentAction"]),{obj:v,setObj:x}=(0,D.A)({id:s,feedObject:i,feedObjectType:c}),f=(0,$.I$)(),O=(0,I.A)();return(0,o.jsxs)(G,Object.assign({className:T()(B.root,t,{[B.inline]:g})},A,{children:[function(){let e;return p&&(e=v?(0,o.jsx)(o.Fragment,{children:b?(0,o.jsx)(r.A,Object.assign({variant:"text",size:"small",onClick:b,color:"inherit"},{children:`${O.formatMessage(U.comments,{total:v.comment_count})}`})):(0,o.jsx)(o.Fragment,{children:d===F.a.DETAIL?(0,o.jsx)(l.A,Object.assign({variant:"body2"},{children:`${O.formatMessage(U.comments,{total:v.comment_count})}`})):(0,o.jsx)(r.A,Object.assign({variant:"text",size:"small",component:L.A,to:f.url((0,V.lg)(v),(0,V.kB)(v)),classes:{root:B.viewAudienceButton}},{children:`${O.formatMessage(U.comments,{total:v.comment_count})}`}))})}):(0,o.jsx)(r.A,Object.assign({variant:"text",size:"small",disabled:!0,color:"inherit"},{children:(0,o.jsx)(P.A,{animation:"wave",height:18,width:50})}))),e}(),function(){let e={};return j||(e={component:L.A,to:f.url((0,V.lg)(v),(0,V.kB)(v))}),(0,o.jsx)(o.Fragment,{children:u&&(0,o.jsxs)(n.Fragment,{children:[!g&&p&&(0,o.jsx)(C.A,{className:B.divider}),(0,o.jsx)(h.A,Object.assign({title:`${O.formatMessage(U.comment)}`},{children:(0,o.jsx)(r.A,Object.assign({onClick:j,className:B.button},e,{children:(0,o.jsx)(m.A,{children:"chat_bubble_outline"})}))}))]})})}()]}))};var q=s(58065),W=s(6279),Y=s(28820),X=s(36870),K=s(43749),Z=s(29368),Q=s(13550),J=s(94520),ee=s(15906),te=s(29251),se=s(46248),ae=s(16799);const oe=function(e){const{id:t=null,feedObject:s=null,feedObjectType:i=(s?s.type:H.Z.POST),open:r=!1,onClose:c=null}=e,d=(0,a.__rest)(e,["id","feedObject","feedObjectType","open","onClose"]),{obj:u,setObj:m}=(0,D.A)({id:t,feedObject:s,feedObjectType:i}),[p,g]=(0,n.useState)(Boolean(t&&i||s)),[h,b]=(0,n.useState)([]),[j,A]=(0,n.useState)(t&&i?`${Z.A.ShareUsersList.url({type:i,id:t})}`:s&&i?`${Z.A.ShareUsersList.url({type:i,id:s.id})}`:null);function v(){g(!0),Q.A.request({url:j,method:Z.A.ShareUsersList.method}).then((e=>{const t=e.data;b([...h,...t.results]),g(!1),A(null!==t.next?t.next:null)})).catch((e=>{J.V.error(ee.d,e)}))}return(0,n.useEffect)((()=>{u&&j&&v()}),[`${u}`]),(0,o.jsx)(te.A,Object.assign({title:(0,o.jsx)(q.A,{defaultMessage:"ui.feedObject.sharesDialog.title",id:"ui.feedObject.sharesDialog.title"}),onClose:c,open:r},d,{children:p?(0,o.jsx)(se.A,{size:50}):(0,o.jsx)(K.A,Object.assign({dataLength:h.length,next:v,hasMoreNext:null!==j,loaderNext:(0,o.jsx)(se.A,{size:30}),height:400,endMessage:(0,o.jsx)(l.A,Object.assign({variant:"body2",align:"center",fontWeight:"bold"},{children:(0,o.jsx)(q.A,{id:"ui.feedObject.sharesDialog.noOtherLikes",defaultMessage:"ui.feedObject.sharesDialog.noOtherLikes"})}))},{children:(0,o.jsx)(Y.A,{children:h.slice(0,4).map(((e,t)=>(0,o.jsx)(X.Ay,{children:(0,o.jsx)(ae.A,{elevation:0,user:e},t)},e.id)))})}))}))};var ne=s(44675),ie=s(15327),le=s(25911),re=s(57873),ce=s(82241),de=s(51372),ue=s(50236),me=s(19249),pe=s(18590),ge=s(40221),he=s(60921),be=s(45284),je=s(75753),Ae=s(3338),ve=s(2877),xe=s(44817),fe=s(89757),Oe=s(24971);const ye=(0,M.YK)({shares:{id:"ui.feedObject.share.shares",defaultMessage:"ui.feedObject.share.shares"},share:{id:"ui.feedObject.share.share",defaultMessage:"ui.feedObject.share.share"}}),Ce={root:`${_.H}-action-share-root`,divider:`${_.H}-action-share-divider`,inline:`${_.H}-action-share-inline`,button:`${_.H}-action-share-button`,viewAudienceButton:`${_.H}-action-share-view-audience-button`},Ee=(0,i.Ay)(d.A,{name:_.H,slot:"ActionShareRoot"})((()=>({})));const Te=function(e){const{className:t=null,feedObjectId:s=null,feedObject:i=null,feedObjectType:l=H.Z.POST,withAction:c=!0,withAudience:u=!0,inlineAction:p=!1}=e,g=(0,a.__rest)(e,["className","feedObjectId","feedObject","feedObjectType","withAction","withAudience","inlineAction"]),b=(0,ne.A)(),j=(0,ie.A)(b.breakpoints.down("md")),{obj:A,setObj:v}=(0,D.A)({id:s,feedObject:i,feedObjectType:l}),[x,f]=(0,n.useState)(!1),[O,y]=(0,n.useState)(!1),[E,N]=(0,n.useState)(null),[S,_]=(0,n.useState)(!1),[w,k]=n.useState(null),R=(0,be.J_)(),M=(0,$.I$)(),L=(0,n.useContext)(je.ql),F=Ae.gS in L.preferences&&L.preferences[Ae.gS].value,U=Ae.FY in L.preferences&&L.preferences[Ae.FY].value,B=Ae.AF in L.preferences&&L.preferences[Ae.AF].value,G=(0,ve.X1)(),{enqueueSnackbar:z}=(0,pe.dh)(),Y=("undefined"!=typeof location&&location.origin?location.origin:"")+M.url((0,V.lg)(A),(0,V.kB)(A)),X=(0,n.useMemo)((()=>i.group&&i.group.privacy===ge.A.PUBLIC),[i.group]),K=(0,n.useMemo)((()=>!L.preferences[Ae.FP].value||xe.Xl(G.user)),[L,G.user]),te=(0,n.useMemo)((()=>L.preferences[Ae.g4].value),[L]),se=(0,I.A)(),ae=e=>{k(e.currentTarget)},Te=()=>{k(null)};function Ne(){_(!S)}function Se(){f(!1),y(!1)}function _e(){v(Object.assign({},A,{share_count:A.share_count+1})),Se()}const we=(0,n.useMemo)((()=>()=>{let e=A.id;const t=A.medias.filter((e=>e.type===me.cJ));t.length&&(e=t[0].embed.metadata.id);const s=A.medias.some((e=>{var t;return(null===(t=e.embed)||void 0===t?void 0:t.embed_type)===me.TY}));return Q.A.request({url:Z.A.ComposerMediaCreate.url(),method:Z.A.ComposerMediaCreate.method,data:{type:me.cJ,[s?"event_object":"shared_object"]:e}}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))}),[A]);function ke(){return(0,o.jsxs)(d.A,{children:[(!i.group||X)&&(0,o.jsxs)(o.Fragment,{children:[K&&(0,o.jsxs)(le.A,Object.assign({onClick:()=>{return e=!1,void(G.user?xe.lT(G.user)?z((0,o.jsx)(q.A,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3}):(f(!0),we().then((t=>{N(Object.assign({medias:[t]},e?{categories:A.categories}:{})),y(!0)})).catch((e=>{J.V.error(ee.d,e),f(!1)}))):R.settings.handleAnonymousAction());var e}},{children:[(0,o.jsx)(re.A,{children:(0,o.jsx)(m.A,{children:"redo"})}),(0,o.jsx)(ce.A,{primary:(0,o.jsx)(q.A,{id:"ui.feedObject.share.shareNow",defaultMessage:"ui.feedObject.share.shareNow"})})]})),(0,o.jsx)(o.Fragment,{children:te&&(0,o.jsxs)(o.Fragment,{children:[F&&(0,o.jsxs)(le.A,Object.assign({onClick:()=>window.open(fe.$L+Y,"facebook-share-dialog","width=626,height=436")},{children:[(0,o.jsx)(re.A,{children:(0,o.jsx)(m.A,{children:"facebook"})}),(0,o.jsx)(ce.A,{primary:(0,o.jsx)(q.A,{id:"ui.feedObject.share.facebook",defaultMessage:"ui.feedObject.share.facebook"})})]})),U&&(0,o.jsxs)(le.A,Object.assign({onClick:()=>window.open(fe.vM+Y,"x-share-dialog","width=626,height=436")},{children:[(0,o.jsx)(re.A,{children:(0,o.jsx)(m.A,{children:"twitter"})}),(0,o.jsx)(ce.A,{primary:(0,o.jsx)(q.A,{id:"ui.feedObject.share.x",defaultMessage:"ui.feedObject.share.x"})})]})),B&&(0,o.jsxs)(le.A,Object.assign({onClick:()=>window.open(fe.HW+Y,"linkedin-share-dialog","width=626,height=436")},{children:[(0,o.jsx)(re.A,{children:(0,o.jsx)(m.A,{children:"linkedin"})}),(0,o.jsx)(ce.A,{primary:(0,o.jsx)(q.A,{id:"ui.feedObject.share.linkedin",defaultMessage:"ui.feedObject.share.linkedin"})})]}))]})})]}),(0,o.jsxs)(le.A,{children:[(0,o.jsx)(re.A,{children:(0,o.jsx)(m.A,{children:"link"})}),(0,o.jsx)(ce.A,{primary:(0,o.jsx)(q.A,{id:"ui.feedObject.share.permanentLink",defaultMessage:"ui.feedObject.share.permanentLink"}),onClick:()=>{(0,he.eM)(Y).then((()=>{z((0,o.jsx)(q.A,{id:"ui.common.permanentLinkCopied",defaultMessage:"ui.common.permanentLinkCopied"}),{variant:"success",autoHideDuration:3e3})}))}})]})]})}return(0,o.jsxs)(Ee,Object.assign({className:T()(Ce.root,t,{[Ce.inline]:p})},g,{children:[function(){const e=A.share_count;let t;return u&&(t=A?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.A,Object.assign({variant:"text",size:"small",onClick:Ne,disabled:e<1,classes:{root:Ce.viewAudienceButton}},{children:`${se.formatMessage(ye.shares,{total:e})}`})),S&&e>0&&(0,o.jsx)(oe,{feedObject:A,feedObjectType:A.type,open:S,onClose:Ne})]}):(0,o.jsx)(r.A,Object.assign({variant:"text",size:"small",disabled:!0,color:"inherit"},{children:(0,o.jsx)(P.A,{animation:"wave",height:18,width:50})}))),t}(),(0,o.jsx)(n.Fragment,{children:c&&(0,o.jsxs)(n.Fragment,{children:[!p&&u&&(0,o.jsx)(C.A,{className:Ce.divider}),(0,o.jsx)(h.A,Object.assign({title:`${se.formatMessage(ye.share)}`},{children:(0,o.jsx)(W.A,Object.assign({loading:x,onClick:ae,className:Ce.button},{children:(0,o.jsx)(m.A,{children:"share"})}))})),Boolean(w)&&(0,o.jsx)(o.Fragment,{children:j?(0,o.jsx)(ue.A,Object.assign({open:!0,onClick:Te,onClose:Te,onOpen:ae,anchor:"bottom",disableSwipeToOpen:!0},{children:ke()})):(0,o.jsx)(de.A,Object.assign({anchorEl:w,open:!0,onClose:Te,onClick:Te,slotProps:{paper:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"}},{children:ke()}))}),O&&(0,o.jsx)(Oe.A,{open:!0,defaultValue:E,onClose:Se,onSuccess:_e,maxWidth:"sm",fullWidth:!0})]})})]}))},Ne={root:`${_.H}-actions-root`,action:`${_.H}-actions-action`},Se=(0,i.Ay)(y.Ay,{name:_.H,slot:"ActionsRoot"})((()=>({})));const _e=function(e){const{className:t,feedObject:s,feedObjectId:a=(null==s?void 0:s.id),feedObjectType:n=(null==s?void 0:s.type),feedObjectTemplate:i=F.a.PREVIEW,hideVoteAction:l=!1,hideShareAction:r=!1,hideCommentAction:c=!1,handleExpandActivities:d,VoteActionProps:u={},CommentActionProps:m={},ShareActionProps:p={}}=e,{obj:g}=(0,D.A)({id:a,feedObject:s,feedObjectType:n});if(!g)return null;const h=function(){let e=4;return r&&c?e=12:(c||c)&&(e=6),e}();return(0,o.jsxs)(Se,Object.assign({container:!0,className:T()(Ne.root,t)},{children:[!l&&(0,o.jsx)(y.Ay,Object.assign({item:!0,xs:h,className:Ne.action},{children:(0,o.jsx)(R,Object.assign({feedObjectId:a||g.id,feedObject:g,feedObjectType:n||g.type},u))})),!c&&(0,o.jsx)(y.Ay,Object.assign({item:!0,xs:h,className:Ne.action},{children:(0,o.jsx)(z,Object.assign({feedObject:g,feedObjectType:n,feedObjectTemplate:i,onCommentAction:d},m))})),!r&&(0,o.jsx)(y.Ay,Object.assign({item:!0,xs:h,className:Ne.action},{children:(0,o.jsx)(Te,Object.assign({feedObject:g,feedObjectType:n,id:a},p))}))]}))};var we=s(57156),ke=s(33623);const Re={root:`${_.H}-poll-object-choices-root`,label:`${_.H}-poll-object-choices-label`,vote:`${_.H}-poll-object-choices-vote`,progress:`${_.H}-poll-object-choices-progress`},Me=(0,i.Ay)(we.A,{name:_.H,slot:"PollObjectChoicesRoot"})((()=>({})));function Ie(e){var{className:t}=e,s=(0,a.__rest)(e,["className"]);return(0,o.jsxs)(d.A,Object.assign({className:t},{children:[(0,o.jsx)(ke.A,Object.assign({variant:"determinate"},s)),(0,o.jsx)(l.A,Object.assign({variant:"body2",color:"text.secondary"},{children:`${Math.round(s.value)}%`}))]}))}const Pe=function(e){const{className:t=null,choiceObj:s=null,feedObject:n=null,vote:i=null,votes:r=null,isVoting:c=null,votable:d=null}=e,u=(0,a.__rest)(e,["className","choiceObj","feedObject","vote","votes","isVoting","votable"]),p=!n,g=(0,be.J_)(),h=(0,ve.X1)();return(0,o.jsxs)(Me,Object.assign({className:T()(Re.root,t)},u,{children:[(0,o.jsx)(l.A,Object.assign({className:Re.label},{children:s.choice})),(0,o.jsx)(Ie,{className:Re.progress,value:(b=s.vote_count,j=r,0===j?0:100*b/j)}),(0,o.jsx)(W.A,Object.assign({loading:c===s.id,variant:s.voted?"contained":"outlined",size:"small",disabled:p||null!==c||d||n.draft,className:Re.vote,onClick:()=>{h.user?i(s):g.settings.handleAnonymousAction()}},{children:s.voted?(0,o.jsx)(m.A,{children:"check"}):(0,o.jsx)(q.A,{id:"ui.feedObject.poll.choice.vote",defaultMessage:"ui.feedObject.poll.choice.vote"})}))]}));var b,j},De=(0,M.YK)({showPoll:{id:"ui.feedObject.poll.showPoll",defaultMessage:"ui.feedObject.poll.showPoll"},hidePoll:{id:"ui.feedObject.poll.hidePoll",defaultMessage:"ui.feedObject.poll.hidePoll"},expDate:{id:"ui.feedObject.poll.expDate",defaultMessage:"ui.feedObject.poll.expDate"},voters:{id:"ui.feedObject.poll.voters",defaultMessage:"ui.feedObject.poll.voters"},votes:{id:"ui.feedObject.poll.votes",defaultMessage:"ui.feedObject.poll.votes"}}),$e={root:`${_.H}-poll-object-root`,voters:`${_.H}-poll-object-voters`,votes:`${_.H}-poll-object-votes`,toggleButton:`${_.H}-poll-object-toggle-button`,title:`${_.H}-poll-object-title`,expiration:`${_.H}-poll-object-expiration`,closed:`${_.H}-poll-object-closed`,expandIcon:`${_.H}-poll-object-expand-icon`,collapsedIcon:`${_.H}-poll-object-collapsed-icon`},Le=(0,i.Ay)(we.A,{name:_.H,slot:"PollObjectRoot"})((()=>({})));const He=function(e){const{className:t,feedObject:s,pollObject:i,disabled:d,visible:u=!0,onChange:g,onToggleVisibility:h}=e,b=(0,a.__rest)(e,["className","feedObject","pollObject","disabled","visible","onChange","onToggleVisibility"]),j=(0,I.A)(),[v,x]=(0,n.useState)(i),[f,O]=(0,n.useState)(function(){const e=i.choices;let t=0;for(let s=0;s<e.length;s++)t+=e[s].vote_count;return t||0}()),[y,C]=(0,n.useState)(i.choices),[E,N]=(0,n.useState)(null),[S,_]=(0,n.useState)(!u),w=i.multiple_choices,k=i.closed;function R(e){N(e.id),Q.A.request({url:Z.A.PollVote.url({id:s.id,type:s.type}),method:Z.A.PollVote.method,data:{choice:e.id}}).then((t=>{e.voted?(e=>{const t=[...y].map((t=>Object.assign({},t,{voted:t.id!==e&&t.voted,vote_count:t.id===e&&t.vote_count>0?t.vote_count-1:t.vote_count})));C(t),g(t),O((e=>e-1))})(e.id):(e=>{const t=[...y];let s;w?(s=t.map((t=>Object.assign({},t,{voted:t.id===e||t.voted,vote_count:t.id===e?t.vote_count+1:t.vote_count}))),O((e=>e+1))):(s=t.map((t=>Object.assign({},t,{voted:t.id===e,vote_count:t.id===e?t.vote_count+1:t.vote_count>0&&t.voted?t.vote_count-1:t.vote_count}))),O(s.reduce(((e,t)=>e+t.vote_count),0))),C(s),g(s)})(e.id),N(null)})).catch((e=>{J.V.error(ee.d,e)}))}const M=(0,n.useMemo)((()=>()=>{h&&h(S),_((e=>!e))}),[_,h]);let P=(0,o.jsx)(o.Fragment,{});return i&&(P=(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(p.A,{title:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(r.A,Object.assign({className:$e.toggleButton,onClick:M,"aria-expanded":S,endIcon:(0,o.jsx)(m.A,Object.assign({className:T()($e.expandIcon,{[$e.collapsedIcon]:S})},{children:"arrow_upward"}))},{children:S?j.formatMessage(De.showPoll):j.formatMessage(De.hidePoll)}))})}),(0,o.jsx)(A.A,Object.assign({in:!S,timeout:"auto",unmountOnExit:!0},{children:(0,o.jsxs)(c.A,{children:[(0,o.jsx)(l.A,Object.assign({variant:"body1",className:$e.title},{children:v.title})),v.expiration_at&&Date.parse(v.expiration_at)>=(new Date).getTime()&&(0,o.jsxs)(l.A,Object.assign({variant:"body2",className:$e.expiration},{children:[`${j.formatMessage(De.expDate)}`,`${j.formatDate(Date.parse(v.expiration_at),{year:"numeric",month:"numeric",day:"numeric"})}`]})),v.closed&&(0,o.jsx)(l.A,Object.assign({variant:"body2",className:$e.closed},{children:(0,o.jsx)(q.A,{id:"ui.feedObject.poll.closed",defaultMessage:"ui.feedObject.poll.closed"})})),(0,o.jsx)(Y.A,{children:y.map(((e,t)=>(0,o.jsx)(X.Ay,{children:(0,o.jsx)(Pe,{elevation:0,choiceObj:e,feedObject:d?null:s,votes:f,vote:R,isVoting:E,votable:k})},t)))}),!s.draft&&(0,o.jsx)(o.Fragment,{children:w?(0,o.jsxs)("div",Object.assign({className:$e.votes},{children:[(0,o.jsx)(m.A,{children:"list"}),(0,o.jsx)(l.A,{children:`${j.formatMessage(De.votes,{total:f})}`})]})):(0,o.jsxs)("div",Object.assign({className:$e.voters},{children:[(0,o.jsx)(m.A,{children:"people_alt"}),(0,o.jsx)(l.A,{children:`${j.formatMessage(De.voters,{total:f})}`})]}))})]})}))]})),(0,n.useEffect)((()=>{C(i.choices)}),[i.choices]),(0,o.jsx)(Le,Object.assign({className:T()($e.root,t)},b,{children:P}))};var Fe=s(28692),Ve=s(42269),Ue=s(86354),Be=s(39840);const Ge={LOADING_NEXT:"_loading_next",LOADING_PREVIOUS:"_loading_previous",DATA_NEXT_LOADED:"_data_next_loaded",DATA_PREVIOUS_LOADED:"_data_previous_loaded",DATA_RELOAD:"_data_reload",DATA_RELOADED:"_data_reloaded"};function ze(e,t){switch(t.type){case Ge.LOADING_NEXT:return Object.assign(Object.assign({},e),{isLoadingNext:!0,isLoadingPrevious:!1});case Ge.LOADING_PREVIOUS:return Object.assign(Object.assign({},e),{isLoadingNext:!1,isLoadingPrevious:!0});case Ge.DATA_NEXT_LOADED:return Object.assign(Object.assign(Object.assign(Object.assign({},e),{page:t.payload.currentPage,contributors:t.payload.contributors,isLoadingNext:!1,componentLoaded:!0,next:t.payload.next}),t.payload.previous?{previous:t.payload.previous}:{}),t.payload.total?{total:t.payload.total}:{});case Ge.DATA_PREVIOUS_LOADED:return Object.assign(Object.assign({},e),{page:t.payload.currentPage,contributors:t.payload.contributors,isLoadingPrevious:!1,previous:t.payload.previous});case Ge.DATA_RELOAD:return Object.assign(Object.assign({},e),{next:t.payload.next,contributors:[],total:0,previous:null,reload:!0});case Ge.DATA_RELOADED:return Object.assign(Object.assign({},e),{componentLoaded:!1,reload:!1});default:throw new Error(`Unhandled type: ${t.type}`)}}function qe(e){const{id:t,feedObject:s,feedObjectType:a,offset:o=0,pageSize:i=5,onChangePage:l,cacheStrategy:r=Fe.So.CACHE_FIRST}=e,c=(0,Be.A)(),{obj:d,setObj:u}=(0,D.A)({id:t,feedObject:s,feedObjectType:a}),m=d?d.id:null,p=()=>{const e=o?`&offset=${o}`:"",s=d?d.id:t,n=d?d.type:a;return`${Z.A.FeedObjectContributorsList.url({type:n,id:s})}?limit=${i}${e}`},[g,h]=(0,n.useReducer)(ze,{},(()=>function(e){const t=e.obj?(0,Ue.OQ)(e.obj.id,e.obj.type,e.next):null;let s={componentLoaded:!1,contributors:[],total:0,next:e.next,previous:null,isLoadingNext:!1,isLoadingPrevious:!1,page:e.offset/e.pageSize+1,reload:!1};if(t&&Fe.Ay.hasKey(t)&&e.cacheStrategy!==Fe.So.NETWORK_ONLY){const e=Fe.Ay.get(t);return Object.assign(Object.assign({},s),{total:e.count,next:e.next,previous:e.previous,contributors:e.results})}return s}({obj:d,offset:o,pageSize:i,next:p(),cacheStrategy:r}))),b=e=>{const t=new URLSearchParams(e),s=Object.fromEntries(t.entries());return(s.offset?parseInt(s.offset):0)/i+1},j=(e,t)=>A(e,!1).then((e=>{let s,a=b(g.next);if(t){s=g.contributors.slice(0,g.contributors.length-e.results.length).concat(e.results)}else{let t=g.contributors.slice(e.results.length,g.contributors.length);s=e.results.concat(t)}c.current&&h({type:t?Ge.DATA_NEXT_LOADED:Ge.DATA_PREVIOUS_LOADED,payload:Object.assign(Object.assign({page:a,contributors:s},t?{next:e.next}:{previous:e.previous}),{total:e.count})})})),A=(e,t=!0)=>{const s=(0,Ue.OQ)(d.id,d.type,e);return t&&Fe.Ay.hasKey(s)&&r!==Fe.So.NETWORK_ONLY?Promise.resolve(Fe.Ay.get(s)):Q.A.request({url:e,method:Z.A.Comments.method}).then((e=>e.status>=300?Promise.reject(e):(Fe.Ay.set(s,e.data),Promise.resolve(e.data))))};function v(){d&&g.next&&!g.isLoadingNext&&(h({type:Ge.LOADING_NEXT}),A(g.next).then((e=>{if(c.current){let t=b(g.next);h({type:Ge.DATA_NEXT_LOADED,payload:Object.assign({page:t,contributors:[...g.contributors,...e.results],next:e.next,total:e.count,componentLoaded:!0},o&&0===g.contributors.length?{previous:e.previous}:{})}),l&&l(t)}})).catch((e=>{J.V.error(Ve.K,e)})).then((()=>{c.current&&r===Fe.So.STALE_WHILE_REVALIDATE&&j(g.next,!0)})))}return(0,n.useEffect)((()=>{c.current&&g.componentLoaded&&Boolean(d)&&!g.reload&&h({type:Ge.DATA_RELOAD,payload:{next:p()}})}),[m,i,o,c]),(0,n.useEffect)((()=>{c.current&&g.componentLoaded&&g.reload&&!g.isLoadingNext&&!g.isLoadingPrevious&&(h({type:Ge.DATA_RELOADED}),v())}),[g.reload,c]),Object.assign(Object.assign({feedObject:d,setFeedObject:u},g),{pageSize:i,getNextPage:v,getPreviousPage:function(){d&&g.previous&&!g.isLoadingPrevious&&(h({type:Ge.LOADING_PREVIOUS}),A(g.previous).then((e=>{if(c.current){let t=b(g.previous);h({type:Ge.DATA_PREVIOUS_LOADED,payload:{page:t,contributors:[...e.results,...g.contributors],previous:e.previous}}),l&&l(t)}})).catch((e=>{J.V.error(Ve.K,e)})).then((()=>{r===Fe.So.STALE_WHILE_REVALIDATE&&j(g.next,!1)})))}})}var We=s(25441),Ye=s(43029);const Xe={root:`${_.H}-contributors-skeleton-root`,btnParticipants:`${_.H}-btn-participants`},Ke=(0,i.Ay)(d.A,{name:_.H,slot:"ContributorsSkeletonRoot"})((()=>({})));function Ze(e){const{className:t=null,AvatarGroupSkeletonProps:s={}}=e,n=(0,a.__rest)(e,["className","AvatarGroupSkeletonProps"]);return(0,o.jsx)(Ke,Object.assign({className:T()(Xe.root,t)},n,{children:(0,o.jsxs)(r.A,Object.assign({variant:"text",disabled:!0,classes:{root:Xe.btnParticipants}},{children:[(0,o.jsx)(q.A,{id:"ui.feedObject.contributors.participants",defaultMessage:"ui.feedObject.contributors.participants"}),":",(0,o.jsx)(Ye.A,Object.assign({},e.AvatarGroupSkeletonProps))]}))}))}const Qe={root:`${_.H}-contributors-root`,avatarGroup:`${_.H}-contributors-avatarGroup`,btnParticipants:`${_.H}-contributors-btn-participants`},Je=(0,i.Ay)(d.A,{name:_.H,slot:"ContributorsRoot"})((()=>({})));const et=function(e){const{className:t=null,feedObjectId:s=null,feedObject:i=null,feedObjectType:c=null,ContributorsSkeletonProps:u={},cacheStrategy:m=Fe.So.CACHE_FIRST}=e,p=(0,a.__rest)(e,["className","feedObjectId","feedObject","feedObjectType","ContributorsSkeletonProps","cacheStrategy"]),h=qe({id:s,feedObject:i,feedObjectType:c,pageSize:10,cacheStrategy:m}),[b,j]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{h.feedObject&&h.getNextPage()}),[h.feedObject]),h.feedObject?(0,o.jsx)(Je,Object.assign({className:T()(Qe.root,t)},p,{children:(0,o.jsx)(d.A,{children:h.isLoadingNext&&!b?(0,o.jsx)(Ze,Object.assign({},u)):(0,o.jsx)(o.Fragment,{children:h.contributors.length>0?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(r.A,Object.assign({variant:"text",onClick:()=>j(!0),classes:{root:Qe.btnParticipants},color:"inherit"},{children:[(0,o.jsx)(q.A,{id:"ui.feedObject.contributors.participants",defaultMessage:"ui.feedObject.contributors.participants"}),":",(0,o.jsxs)(We.A,Object.assign({},p,{children:[h.contributors.map(((e,t)=>(0,o.jsx)(g.A,{alt:e.username,src:e.avatar},t))),[...Array(Math.max(h.total-h.contributors.length,0))].map(((e,t)=>(0,o.jsx)(g.A,{},t)))]}))]})),b&&(0,o.jsx)(te.A,Object.assign({title:(0,o.jsx)(q.A,{defaultMessage:"ui.feedObject.contributors.title",id:"ui.feedObject.contributors.title",values:{total:h.total}}),onClose:()=>j(!1),open:b},{children:h.isLoadingNext?(0,o.jsx)(se.A,{size:50}):(0,o.jsx)(K.A,Object.assign({dataLength:h.contributors.length,next:h.getNextPage(),hasMoreNext:Boolean(h.next),loaderNext:(0,o.jsx)(se.A,{size:30}),height:400,endMessage:(0,o.jsx)(l.A,Object.assign({variant:"body2",align:"center",fontWeight:"bold"},{children:(0,o.jsx)(q.A,{id:"ui.feedObject.contributors.noOtherContributors",defaultMessage:"ui.feedObject.contributors.noOtherContributors"})}))},{children:(0,o.jsx)(Y.A,{children:h.contributors.map(((e,t)=>(0,o.jsx)(X.Ay,{children:(0,o.jsx)(ae.A,{elevation:0,user:e,sx:{m:0},onClick:()=>j(!1)},e.id)},t)))})}))}))]}):null})})})):null};var tt=s(2783),st=s(18895),at=s(37978);const ot={root:`${_.H}-action-follow-root`,button:`${_.H}-action-follow-button`,iconized:`${_.H}-action-follow-iconized`,followed:`${_.H}-action-follow-followed`},nt=(0,i.Ay)(d.A,{name:_.H,slot:"ActionFollowRoot"})((()=>({})));const it=function(e){const{className:t=null,feedObjectId:s=null,feedObject:i=null,feedObjectType:l=H.Z.POST,handleFollow:r,iconized:c=!0}=e,d=(0,a.__rest)(e,["className","feedObjectId","feedObject","feedObjectType","handleFollow","iconized"]),{obj:u,setObj:p}=(0,D.A)({id:s,feedObject:i,feedObjectType:l}),[g,b]=(0,n.useState)(!1),j=(0,be.J_)(),A=(0,ve.X1)(),{enqueueSnackbar:v}=(0,pe.dh)(),x=(0,n.useMemo)((()=>()=>Q.A.request({url:Z.A.FollowContribution.url({type:u.type,id:u.id}),method:Z.A.FollowContribution.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[u]);function f(){A.user?(b(!0),x().then((e=>{const t=!u.followed;p(Object.assign({},u,{followed:t})),b(!1),r&&r(t)})).catch((e=>{J.V.error(ee.d,e),(0,at.c)(e,A.managers.blockedUsers.isBlocked(u.author),v)||v((0,o.jsx)(q.A,{id:"ui.common.error.action",defaultMessage:"ui.common.error.action"}),{variant:"error",autoHideDuration:3e3}),b(!1)}))):j.settings.handleAnonymousAction()}return(0,o.jsx)(nt,Object.assign({className:T()(ot.root,t)},d,{children:function(){let e=(0,o.jsx)(q.A,{id:"ui.feedObject.follow",defaultMessage:"ui.feedObject.follow"});return u.followed&&(e=(0,o.jsx)(q.A,{id:"ui.feedObject.unfollow",defaultMessage:"ui.feedObject.unfollow"})),(0,o.jsx)(n.Fragment,{children:A.user&&u.author.id!==A.user.id&&!u.deleted&&(0,o.jsx)(h.A,Object.assign({title:e},{children:(0,o.jsx)(W.A,Object.assign({className:T()(ot.button,{[ot.iconized]:c,[ot.followed]:u.followed}),loading:g,variant:c?"text":"contained",disabled:g,onClick:f},{children:c?(0,o.jsx)(m.A,{children:u.followed?"bookmark_added":"bookmark_border"}):e}))}))})}()}))};var lt=s(86857),rt=s(66848),ct=s(52959),dt=s(56323),ut=s(58871),mt=s(37211);const pt=(0,M.YK)({relevantActivities:{id:"ui.feedObject.activitiesMenu.relevantActivities",defaultMessage:"ui.feedObject.activitiesMenu.relevantActivities"},recentComments:{id:"ui.feedObject.activitiesMenu.recentComments",defaultMessage:"ui.feedObject.activitiesMenu.recentComments"},firstComments:{id:"ui.feedObject.activitiesMenu.firstComments",defaultMessage:"ui.feedObject.activitiesMenu.firstComments"},followedComments:{id:"ui.feedObject.activitiesMenu.followedComments",defaultMessage:"ui.feedObject.activitiesMenu.followedComments"},connectionsComments:{id:"ui.feedObject.activitiesMenu.connectionsComments",defaultMessage:"ui.feedObject.activitiesMenu.connectionsComments"}}),gt={root:`${_.H}-activities-menu-root`,selector:`${_.H}-activities-menu-selector`},ht=(0,i.Ay)(d.A,{name:_.H,slot:"ActivitiesMenuRoot"})((()=>({})));const bt=function(e){const{className:t=null,selectedActivities:s=null,hideRelevantActivitiesItem:i=!1,onChange:l=null}=e,c=(0,a.__rest)(e,["className","selectedActivities","hideRelevantActivitiesItem","onChange"]),u=(0,n.useContext)(je.ql),p=(0,ve.X1)(),g=(0,ne.A)(),b=(0,ie.A)(g.breakpoints.down("md")),j=u.preferences[Ae.mw].value,A=u.preferences[Ae.HT].value,[v,x]=n.useState(null),f=Boolean(v),O=(0,I.A)(),y=e=>{x(e.currentTarget)},C=()=>{x(null)},E=e=>()=>{l&&l(e)};function N(){return(0,o.jsxs)(d.A,{children:[!i&&(0,o.jsx)(mt.A,Object.assign({selected:s===F.x.RELEVANCE_ACTIVITIES,onClick:E(F.x.RELEVANCE_ACTIVITIES)},{children:(0,o.jsx)(ce.A,{primary:(0,o.jsx)("b",{children:O.formatMessage(pt.relevantActivities)}),secondary:(0,o.jsx)(q.A,{id:"ui.feedObject.activitiesMenu.relevantActivitiesDesc",defaultMessage:"ui.feedObject.activitiesMenu.relevantActivitiesDesc"})})})),(0,o.jsx)(mt.A,Object.assign({selected:s===F.x.RECENT_COMMENTS,onClick:E(F.x.RECENT_COMMENTS)},{children:(0,o.jsx)(ce.A,{primary:(0,o.jsx)("b",{children:O.formatMessage(pt.recentComments)}),secondary:(0,o.jsx)(q.A,{id:"ui.feedObject.activitiesMenu.recentCommentsDesc",defaultMessage:"ui.feedObject.activitiesMenu.recentCommentsDesc"})})})),(0,o.jsx)(mt.A,Object.assign({selected:s===F.x.FIRST_COMMENTS,onClick:E(F.x.FIRST_COMMENTS)},{children:(0,o.jsx)(ce.A,{primary:(0,o.jsx)("b",{children:O.formatMessage(pt.firstComments)}),secondary:(0,o.jsx)(q.A,{id:"ui.feedObject.activitiesMenu.firstCommentsDesc",defaultMessage:"ui.feedObject.activitiesMenu.firstCommentsDesc"})})})),p.user&&(0,o.jsx)(mt.A,Object.assign({selected:s===F.x.CONNECTIONS_COMMENTS,onClick:E(F.x.CONNECTIONS_COMMENTS)},{children:(j||A)&&(0,o.jsx)(ce.A,{primary:(0,o.jsx)("b",{children:j?O.formatMessage(pt.followedComments):O.formatMessage(pt.connectionsComments)}),secondary:j?(0,o.jsx)(q.A,{id:"ui.feedObject.activitiesMenu.followedCommentsDesc",defaultMessage:"ui.feedObject.activitiesMenu.followedCommentsDesc"}):(0,o.jsx)(q.A,{id:"ui.feedObject.activitiesMenu.connectionsCommentsDesc",defaultMessage:"ui.feedObject.activitiesMenu.connectionsCommentsDesc"})})}))]})}return(0,o.jsxs)(ht,Object.assign({className:T()(gt.root,t)},c,{children:[(0,o.jsx)(d.A,Object.assign({className:gt.selector},{children:(0,o.jsx)(h.A,Object.assign({title:(0,o.jsx)(q.A,{id:"ui.feedObject.activitiesMenu.tooltipTitle",defaultMessage:"ui.feedObject.activitiesMenu.tooltipTitle"})},{children:(0,o.jsxs)(r.A,Object.assign({variant:"text",size:"small",onClick:y},{children:[s===F.x.CONNECTIONS_COMMENTS&&j?O.formatMessage(pt.followedComments):O.formatMessage(pt[`${(0,he.xQ)(s)}`]),"\xa0 ",(0,o.jsx)(m.A,{children:"expand_more"})]}))}))})),f&&(0,o.jsx)(o.Fragment,{children:b?(0,o.jsx)(ue.A,Object.assign({open:!0,onClose:C,onOpen:y,anchor:"bottom",disableSwipeToOpen:!0},{children:N()})):(0,o.jsx)(de.A,Object.assign({anchorEl:v,open:!0,onClose:C,onClick:C,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"}},{children:N()}))})]}))};var jt=s(97100),At=s(88352),vt=s(91765);const xt=(0,M.YK)({comment:{id:"ui.feedObject.relevantActivities.comment",defaultMessage:"ui.feedObject.relevantActivities.comment"}}),ft={root:`${_.H}-activity-comment-root`,avatar:`${_.H}-activity-comment-avatar`,username:`${_.H}-activity-comment-username`,showMoreContent:`${_.H}-activity-comment-show-more-content`},Ot=(0,i.Ay)(ct.A,{name:_.H,slot:"ActivityCommentRoot"})((()=>({})));const yt=function(e){const{className:t=null,activityObject:s=null}=e,i=(0,a.__rest)(e,["className","activityObject"]),l=(0,$.I$)(),[r,c]=(0,n.useState)(!1),d=(0,I.A)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Ot,Object.assign({},i,{className:T()(ft.root,t),image:(0,o.jsx)(L.A,Object.assign({},!s.author.deleted&&{to:l.url(At.USER_PROFILE_ROUTE_NAME,s.author)},{onClick:s.author.deleted?()=>c(!0):null},{children:(0,o.jsx)(g.A,{alt:s.author.username,variant:"circular",src:s.author.avatar,className:ft.avatar})})),primary:(0,o.jsx)(o.Fragment,{children:d.formatMessage(xt.comment,{username:(0,o.jsx)(L.A,Object.assign({},!s.author.deleted&&{to:l.url(At.USER_PROFILE_ROUTE_NAME,s.author)},{onClick:s.author.deleted?()=>c(!0):null,className:ft.username},{children:s.author.username})),link:(...e)=>(0,o.jsx)(L.A,Object.assign({to:l.url(At.COMMENT_ROUTE_NAME,(0,V.kB)(s.comment))},{children:e}))})}),secondary:(0,o.jsx)(x.A,{date:s.active_at})})),r&&(0,o.jsx)(vt.A,{open:r,handleClose:()=>c(!1)})]})},Ct=(0,M.YK)({vote:{id:"ui.feedObject.relevantActivities.vote",defaultMessage:"ui.feedObject.relevantActivities.vote"}}),Et={root:`${_.H}-activity-vote-up-root`,avatar:`${_.H}-activity-vote-up-avatar`,username:`${_.H}-activity-vote-up-username`},Tt=(0,i.Ay)(ct.A,{name:_.H,slot:"ActivityVoteUpRoot"})((()=>({})));const Nt=function(e){const{className:t=null,activityObject:s=null}=e,i=(0,a.__rest)(e,["className","activityObject"]),l=(0,$.I$)(),[r,c]=(0,n.useState)(!1),d=(0,I.A)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Tt,Object.assign({},i,{className:T()(Et.root,t),image:(0,o.jsx)(L.A,Object.assign({},!s.author.deleted&&{to:l.url(At.USER_PROFILE_ROUTE_NAME,s.author)},{onClick:s.author.deleted?()=>c(!0):null},{children:(0,o.jsx)(g.A,{alt:s.author.username,variant:"circular",src:s.author.avatar,className:Et.avatar})})),primary:(0,o.jsx)(o.Fragment,{children:d.formatMessage(Ct.vote,{username:(0,o.jsx)(L.A,Object.assign({},!s.author.deleted&&{to:l.url(At.USER_PROFILE_ROUTE_NAME,s.author)},{className:Et.username,onClick:s.author.deleted?()=>c(!0):null},{children:s.author.username}))})}),secondary:(0,o.jsx)(x.A,{date:s.active_at})})),r&&(0,o.jsx)(vt.A,{open:r,handleClose:()=>c(!1)})]})},St=(0,M.YK)({follow:{id:"ui.feedObject.relevantActivities.follow",defaultMessage:"ui.feedObject.relevantActivities.follow"}}),_t={root:`${_.H}-activity-follow-root`,avatar:`${_.H}-activity-follow-avatar`,username:`${_.H}-activity-follow-username`},wt=(0,i.Ay)(ct.A,{name:_.H,slot:"ActivityFollowRoot"})((()=>({})));const kt=function(e){const t=(0,rt.A)({props:e,name:_.H}),{className:s=null,activityObject:i=null}=t,l=(0,a.__rest)(t,["className","activityObject"]),r=(0,$.I$)(),[c,d]=(0,n.useState)(!1),u=(0,I.A)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(wt,Object.assign({},l,{className:T()(_t.root,s),image:(0,o.jsx)(L.A,Object.assign({},!i.author.deleted&&{to:r.url(At.USER_PROFILE_ROUTE_NAME,i.author)},{onClick:i.author.deleted?()=>d(!0):null},{children:(0,o.jsx)(g.A,{alt:i.author.username,variant:"circular",src:i.author.avatar,className:_t.avatar})})),primary:(0,o.jsx)(o.Fragment,{children:u.formatMessage(St.follow,{username:(0,o.jsx)(L.A,Object.assign({},!i.author.deleted&&{to:r.url(At.USER_PROFILE_ROUTE_NAME,i.author)},{onClick:i.author.deleted?()=>d(!0):null,className:_t.username},{children:i.author.username}))})}),secondary:(0,o.jsx)(x.A,{date:i.active_at})})),c&&(0,o.jsx)(vt.A,{open:c,handleClose:()=>d(!1)})]})},Rt=(0,M.YK)({pollVote:{id:"ui.feedObject.relevantActivities.pollVote",defaultMessage:"ui.feedObject.relevantActivities.pollVote"}}),Mt={root:`${_.H}-activity-poll-vote-root`,avatar:`${_.H}-activity-poll-vote-avatar`,username:`${_.H}-activity-poll-vote-username`},It=(0,i.Ay)(ct.A,{name:_.H,slot:"ActivityPollVoteRoot"})((()=>({})));const Pt=function(e){const{className:t=null,activityObject:s=null}=e,i=(0,a.__rest)(e,["className","activityObject"]),l=(0,$.I$)(),[r,c]=(0,n.useState)(!1),d=(0,I.A)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(It,Object.assign({},i,{className:T()(Mt.root,t),image:(0,o.jsx)(L.A,Object.assign({},!s.author.deleted&&{to:l.url(At.USER_PROFILE_ROUTE_NAME,s.author)},{onClick:s.author.deleted?()=>c(!0):null},{children:(0,o.jsx)(g.A,{alt:s.author.username,variant:"circular",src:s.author.avatar,className:Mt.avatar})})),primary:(0,o.jsx)(o.Fragment,{children:d.formatMessage(Rt.pollVote,{username:(0,o.jsx)(L.A,Object.assign({},!s.author.deleted&&{to:l.url(At.USER_PROFILE_ROUTE_NAME,s.author)},{onClick:s.author.deleted?()=>c(!0):null,className:Mt.username},{children:s.author.username}))})}),secondary:(0,o.jsx)(x.A,{date:s.active_at})})),r&&(0,o.jsx)(vt.A,{open:r,handleClose:()=>c(!1)})]})},Dt={root:`${_.H}-relevant-activities-root`,activity:`${_.H}-relevant-activities-activity`},$t=(0,i.Ay)(d.A,{name:_.H,slot:"RelevantActivitiesRoot"})((()=>({})));const Lt=function(e){const{className:t=null,activities:s=[],showMaxRelevantActivities:i=5}=e,r=(0,a.__rest)(e,["className","activities","showMaxRelevantActivities"]),[c,d]=(0,n.useState)(!1);function u(e,t){return e.type===jt.j.COMMENT?(0,o.jsx)(yt,{activityObject:e,elevation:0},t):e.type===jt.j.FOLLOW?(0,o.jsx)(kt,{activityObject:e,elevation:0},t):e.type===jt.j.VOTE?(0,o.jsx)(Nt,{activityObject:e,elevation:0},t):e.type===jt.j.POLLVOTE?(0,o.jsx)(Pt,{activityObject:e,elevation:0},t):null}return(0,o.jsx)($t,Object.assign({className:T()(Dt.root,t)},r,{children:s.length<=0?(0,o.jsx)(l.A,Object.assign({variant:"body2"},{children:(0,o.jsx)(q.A,{id:"ui.feedObject.relevantActivities.noResults",defaultMessage:"ui.feedObject.relevantActivities.noResults"})})):(0,o.jsxs)(Y.A,{children:[s.slice(0,i).map(((e,t)=>(0,o.jsx)(X.Ay,Object.assign({className:Dt.activity},{children:u(e,t)}),t))),!c&&s.length>i&&(0,o.jsxs)(mt.A,Object.assign({onClick:()=>d((e=>!e))},{children:[(0,o.jsx)(ce.A,{primary:(0,o.jsx)(q.A,{id:"ui.feedObject.relevantActivities.showOthers",defaultMessage:"ui.feedObject.relevantActivities.showOthers"})}),c?(0,o.jsx)(m.A,{children:"expand_less"}):(0,o.jsx)(m.A,{children:"expand_more"})]})),(0,o.jsx)(A.A,Object.assign({in:c,timeout:"auto",unmountOnExit:!0},{children:s.slice(i).map(((e,t)=>(0,o.jsx)(X.Ay,Object.assign({className:Dt.activity},{children:u(e,t)}),t)))}))]})}))};var Ht=s(54262),Ft=s(40094);const Vt={root:`${_.H}-activities-root`,activities:`${_.H}-activities`},Ut=(0,i.Ay)(d.A,{name:_.H,slot:"ActivitiesRoot"})((()=>({})));const Bt=function(e){const{id:t=`feed_object_activities_${e.feedObjectId?e.feedObjectId:e.feedObject?e.feedObject.id:""}`,className:s,feedObjectId:i,feedObject:l,feedObjectType:r=H.Z.POST,cacheStrategy:c=Fe.So.CACHE_FIRST,CommentsObjectProps:u={},CommentComponentProps:m={variant:"outlined"},feedObjectActivities:p=[],comments:g=[],onSetSelectedActivities:h,activitiesType:b=F.x.RECENT_COMMENTS}=e,j=(0,a.__rest)(e,["id","className","feedObjectId","feedObject","feedObjectType","cacheStrategy","CommentsObjectProps","CommentComponentProps","feedObjectActivities","comments","onSetSelectedActivities","activitiesType"]),{ref:A,inView:v}=(0,Ft.Wx)({triggerOnce:!0}),[x,f]=(0,n.useState)(b),O=(0,Ht.A)({id:i,feedObject:l,feedObjectType:r,cacheStrategy:c,pageSize:1,orderBy:x===F.x.CONNECTIONS_COMMENTS?dt.e.CONNECTION_DESC:x===F.x.FIRST_COMMENTS?dt.e.ADDED_AT_ASC:dt.e.ADDED_AT_DESC}),y=O.feedObject?O.feedObject.id:null,C=Math.min(2,O.feedObject?O.feedObject.comment_count:2),E=p&&p.length>0;function N(){O.getNextPage()}return(0,n.useEffect)((()=>{f(b)}),[b]),(0,n.useEffect)((()=>{y&&!O.comments.length&&v&&O.getNextPage()}),[y,v]),(0,o.jsx)(Ut,Object.assign({id:t,className:T()(Vt.root,s)},j,{ref:A},{children:O.feedObject&&(Boolean(O.feedObject.comment_count)||p&&p.length>0||g.length>0||l&&l.comment_count>0)?(0,o.jsxs)(d.A,Object.assign({className:Vt.activities},E?{}:{style:{minHeight:80*Math.min(C,null==l?void 0:l.comment_count)+"px"}},{children:[(0,o.jsx)(bt,{selectedActivities:x,hideRelevantActivitiesItem:!E,onChange:function(e){h(e),f(e)}}),x===F.x.RELEVANCE_ACTIVITIES?(0,o.jsx)(Lt,{activities:p}):(0,o.jsx)(o.Fragment,{children:(O.feedObject.comment_count>0||g.length>0)&&(0,o.jsx)(ut.A,Object.assign({feedObject:O.feedObject,comments:O.comments,startComments:g,next:O.next,isLoadingNext:O.isLoadingNext,handleNext:N,totalLoadedComments:O.comments.length+g.length,totalComments:O.feedObject.comment_count,hideAdvertising:!0},u,{cacheStrategy:c,CommentsObjectSkeletonProps:{count:C},CommentComponentProps:Object.assign(Object.assign(Object.assign(Object.assign({},u.CommentComponentProps?u.CommentComponentProps:{}),{truncateContent:!0}),m),{cacheStrategy:c}),inPlaceLoadMoreContents:!1}))})]})):null}))};var Gt=s(86955),zt=s(89333),qt=s(99769);var Wt=s(72736),Yt=s(13470),Xt=s(4527);const Kt="SCFeedObjectMediaPreview",Zt={root:`${Kt}-root`},Qt=(0,i.Ay)(d.A,{name:Kt,slot:"Root"})((()=>({}))),Jt=e=>{const t=(0,rt.A)({props:e,name:Kt}),{className:s,medias:n,mediaObjectTypes:i=[Wt.A,Yt.A,Xt.A]}=t,l=(0,a.__rest)(t,["className","medias","mediaObjectTypes"]),{handleMediaClick:r}={handleMediaClick:e=>{Q.A.request({url:Z.A.MediaClickTracker.url({id:e.id}),method:Z.A.MediaClickTracker.method}).catch((e=>{J.V.error(Ve.K,e)}))}};return n.length?(0,o.jsx)(Qt,Object.assign({className:T()(s,Zt.root)},l,{children:i.map((e=>{const{displayProps:t={}}=e;return(0,o.jsx)("div",{children:(0,o.jsx)(e.displayComponent,Object.assign({medias:n},t,{onMediaClick:r}))},e.name)}))})):null},es=(0,M.YK)({visibleToAll:{id:"ui.feedObject.visibleToAll",defaultMessage:"ui.feedObject.visibleToAll"},visibleToGroup:{id:"ui.feedObject.visibleToGroup",defaultMessage:"ui.feedObject.visibleToGroup"},visibleToRecipients:{id:"ui.feedObject.visibleToRecipients",defaultMessage:"ui.feedObject.visibleToRecipients"}}),ts={root:`${_.H}-root`,deleted:`${_.H}-deleted`,header:`${_.H}-header`,category:`${_.H}-category`,event:`${_.H}-event`,group:`${_.H}-group`,avatar:`${_.H}-avatar`,username:`${_.H}-username`,activityAt:`${_.H}-activity-at`,tag:`${_.H}-tag`,location:`${_.H}-location`,content:`${_.H}-content`,showMore:`${_.H}-show-more`,error:`${_.H}-error`,titleSection:`${_.H}-title-section`,title:`${_.H}-title`,textSection:`${_.H}-text-section`,text:`${_.H}-text`,snippet:`${_.H}-snippet`,snippetContent:`${_.H}-snippet-content`,mediasSection:`${_.H}-medias-section`,pollsSection:`${_.H}-polls-section`,infoSection:`${_.H}-info-section`,actionsSection:`${_.H}-actions-section`,replyContent:`${_.H}-reply-content`,activitiesSection:`${_.H}-activities-section`,activitiesContent:`${_.H}-activities-content`,followButton:`${_.H}-follow-button`,vote:`${_.H}-vote`,new:`${_.H}-new`},ss=(0,i.Ay)(lt.A,{name:_.H,slot:"Root"})((()=>({})));const as=function(e){var t,s,i,y,C,E,N,S,w;const k=(0,rt.A)({props:e,name:_.H}),{id:M=`feed_object_${k.feedObjectId?k.feedObjectId:k.feedObject?k.feedObject.id:""}`,className:P=null,feedObjectId:U=null,feedObject:B=null,feedObjectType:G=null,feedObjectActivities:z=null,cacheStrategy:W=Fe.So.CACHE_FIRST,markRead:Y=!1,template:X=F.a.PREVIEW,hideFollowAction:K=!1,summaryExpanded:te=!1,activitiesExpanded:se=!0,activitiesExpandedType:ae,hideParticipantsPreview:oe=!1,pollVisible:ne=!0,FollowButtonProps:ie={},FeedObjectSkeletonProps:le={elevation:0},ActionsProps:re={},CommentObjectReplyComponent:ce=Gt.A,CommentObjectReplyComponentProps:de={WidgetProps:{variant:"outlined"}},CommentComponentProps:ue={variant:"outlined"},CommentObjectSkeletonProps:ge={elevation:0,WidgetProps:{variant:"outlined"}},ContributionActionsMenuProps:he={},FeedObjectMediaPreviewProps:fe={},ActivitiesProps:ye={cacheStrategy:W},PollObjectProps:Ce={elevation:0},ContributorsFeedObjectProps:Ee={},onReply:Te,onHeightChange:Ne,onStateChange:Se}=k,we=(0,a.__rest)(k,["id","className","feedObjectId","feedObject","feedObjectType","feedObjectActivities","cacheStrategy","markRead","template","hideFollowAction","summaryExpanded","activitiesExpanded","activitiesExpandedType","hideParticipantsPreview","pollVisible","FollowButtonProps","FeedObjectSkeletonProps","ActionsProps","CommentObjectReplyComponent","CommentObjectReplyComponentProps","CommentComponentProps","CommentObjectSkeletonProps","ContributionActionsMenuProps","FeedObjectMediaPreviewProps","ActivitiesProps","PollObjectProps","ContributorsFeedObjectProps","onReply","onHeightChange","onStateChange"]),ke=(0,be.J_)(),Re=(0,$.I$)(),Me=(0,ve.X1)(),{enqueueSnackbar:Ie}=(0,pe.dh)(),{preferences:Pe}=(0,je.Sw)(),De=Ae.b8 in Pe&&Pe[Ae.b8].value,$e=Ae.Nh in Pe&&Pe[Ae.Nh].value,{obj:Le,setObj:Ve,error:Be}=(0,D.A)({id:U,feedObject:B,feedObjectType:G,cacheStrategy:W}),Ge=Le?Le.id:null,[ze,qe]=(0,n.useState)(!1),We=()=>Le&&se&&(Le.comment_count>0||z&&z.length>0),[Ye,Xe]=(0,n.useState)(!1),[Ke,Ze]=(0,n.useState)(We()),[Qe,Je]=(0,n.useState)([]),[ot,nt]=(0,n.useState)(!1),[lt,dt]=(0,n.useState)(function(){if(ae)return ae;if(z&&z.length>0)return F.x.RELEVANCE_ACTIVITIES;return F.x.RECENT_COMMENTS}()),[ut,mt]=(0,n.useState)(te),pt=(0,n.useMemo)((()=>{var e;return(null==Le?void 0:Le.medias.length)>0&&(null===(e=Le.medias[0].embed)||void 0===e?void 0:e.embed_type)===me.TY}),[null==Le?void 0:Le.medias]),gt=(0,n.useMemo)((()=>{var e,t,s,a;return K||pt&&!1===(null===(a=null===(s=null===(t=null===(e=null==Le?void 0:Le.medias)||void 0===e?void 0:e[0])||void 0===t?void 0:t.embed)||void 0===s?void 0:s.metadata)||void 0===a?void 0:a.active)}),[K,pt,Le]),ht=(0,I.A)(),bt=(0,n.useMemo)((()=>e=>{Se&&e&&Se(e),Ne&&Ne()}),[Se,Ne]),jt=e=>{Ve(e),bt()};(0,n.useEffect)((()=>{const e=We();Ze(e),bt({activitiesExpanded:e,activitiesExpandedType:lt,cacheStrategy:Fe.So.CACHE_FIRST})}),[Ge,lt]);const xt=(0,n.useCallback)((e=>{"poll"in Le&&jt(Object.assign({},Le,{poll:Object.assign(Object.assign({},Le.poll),{choices:e})}))}),[Le]),ft=(0,n.useCallback)((e=>{bt({pollVisible:e})}),[ne,bt]),Ot=(0,n.useCallback)((()=>{mt(!ut),bt({summaryExpanded:!ut})}),[ut,bt]),yt=(0,n.useCallback)((()=>{bt({markRead:!1})}),[ut,bt]),Ct=(0,n.useCallback)(((e,t,s)=>{Ie(s?(0,o.jsx)(q.A,{id:"ui.feedObject.flagSent",defaultMessage:"ui.feedObject.flagSent"}):(0,o.jsx)(q.A,{id:"ui.feedObject.flagRemoved",defaultMessage:"ui.feedObject.flagRemoved"}),{autoHideDuration:3e3})}),[]),Et=(0,n.useCallback)((()=>{jt(Object.assign({},Le,{deleted:!1}))}),[Le]),Tt=(0,n.useCallback)((()=>{jt(Object.assign({},Le,{collapsed:!Le.collapsed}))}),[Le]),Nt=(0,n.useCallback)((()=>{jt(Object.assign({},Le,{deleted:!Le.deleted}))}),[Le]),St=(0,n.useCallback)((()=>{jt(Object.assign({},Le,{suspended:!Le.suspended})),Ie(Le.suspended?(0,o.jsx)(q.A,{id:"ui.feedObject.notificationsEnabled",defaultMessage:"ui.feedObject.notificationsEnabled"}):(0,o.jsx)(q.A,{id:"ui.feedObject.notificationsDisabled",defaultMessage:"ui.feedObject.notificationsDisabled"}),{autoHideDuration:3e3})}),[Le]),_t=(0,n.useCallback)((()=>{Xe((e=>!e))}),[Ye]),wt=(0,n.useCallback)((e=>{jt(e),Xe(!1)}),[Le,Ye]),kt=(0,n.useCallback)((e=>{jt(Object.assign({},Le,{voted:e.voted,vote_count:e.vote_count,reactions_count:e.reactions_count,reaction:e.reaction}))}),[Le]),Rt=(0,n.useCallback)((()=>{if(Me.user){const e=!Ke;Ze(e),bt({activitiesExpanded:e})}else ke.settings.handleAnonymousAction()}),[Ke,Me.user,bt,lt]),Mt=(0,n.useCallback)((e=>{jt(Object.assign(Object.assign({},Le),{followed:e}))}),[Le]),It=(0,n.useCallback)((()=>{jt(Object.assign(Object.assign({},Le),{comment_count:Math.max(Le.comment_count-1,0)}))}),[Le]),Pt=(0,n.useCallback)((e=>{dt(e),Je([]),bt({activitiesExpandedType:e})}),[Le,Ke]),Dt=(0,n.useMemo)((()=>e=>Q.A.request({url:Z.A.NewComment.url({}),method:Z.A.NewComment.method,data:{[`${Le.type}`]:Le.id,text:e}}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[Ge]),$t=e=>{Me.user?xe.lT(Me.user)?Ie((0,o.jsx)(q.A,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3}):(nt(!0),Dt(e).then((e=>{const t=e;t.summary_truncated=!1,lt!==F.x.RECENT_COMMENTS?(Je([]),dt(F.x.RECENT_COMMENTS)):Je([t,...Qe]),nt(!1);const s=Object.assign({},Le,{comment_count:Le.comment_count+1});jt(s),Fe.Ay.deleteKeysWithPrefix(Ue.MI(Le.id,Le.type)),Te&&Te(e),bt({activitiesExpanded:Ke,activitiesExpandedType:F.x.RECENT_COMMENTS})})).catch((e=>{J.V.error(ee.d,e),(0,at.c)(e,Me.managers.blockedUsers.isBlocked(Le.author),Ie)||Ie((0,o.jsx)(q.A,{id:"ui.common.error.action",defaultMessage:"ui.common.error.action"}),{variant:"error",autoHideDuration:3e3})}))):ke.settings.handleAnonymousAction()},Lt=(0,n.useCallback)(((e,t)=>{const s="summary_html"in e?e.summary_html:e.summary,a="summary_truncated"in e?e.summary_truncated:e.html.length>=qt.b4,n=ut||t===F.a.DETAIL?(0,V.MZ)(e.html,Re.url):(0,V.MZ)(s,Re.url);return t===F.a.SHARE?(0,o.jsxs)(L.A,Object.assign({to:Re.url((0,V.lg)(e),(0,V.kB)(e)),className:ts.text},{children:[(0,o.jsx)(l.A,{component:"span",className:ts.text,variant:"body2",gutterBottom:!0,dangerouslySetInnerHTML:{__html:n}}),!ut&&a&&(0,o.jsx)(r.A,Object.assign({size:"small",variant:"text",color:"inherit",className:ts.showMore,onClick:Ot},{children:(0,o.jsx)(q.A,{id:"ui.feedObject.content.showMore",defaultMessage:"ui.feedObject.content.showMore"})}))]})):t===F.a.DETAIL?(0,o.jsx)(l.A,{component:"div",gutterBottom:!0,className:ts.text,dangerouslySetInnerHTML:{__html:n}}):(0,o.jsxs)(l.A,Object.assign({component:"div",gutterBottom:!0,className:ts.text},{children:[(0,o.jsx)(l.A,{component:"span",dangerouslySetInnerHTML:{__html:n}}),!ut&&a&&(0,o.jsx)(r.A,Object.assign({size:"small",variant:"text",color:"inherit",className:ts.showMore,onClick:Ot},{children:(0,o.jsx)(q.A,{id:"ui.feedObject.content.showMore",defaultMessage:"ui.feedObject.content.showMore"})}))]}))}),[Le,X,ut]);let Ht;return Ht=!Le&&Be||(null==Le?void 0:Le.deleted)&&!Me.user&&!xe.qc(Me.user)&&!xe.Cy(Me.user)?(0,o.jsx)(c.A,Object.assign({className:T()(ts.error,ts.content)},{children:(0,o.jsx)(q.A,{id:"ui.feedObject.error",defaultMessage:"ui.feedObject.error"})})):X===F.a.PREVIEW||X===F.a.DETAIL||X===F.a.SEARCH?(0,o.jsx)(n.Fragment,{children:Le?(0,o.jsxs)(d.A,Object.assign({className:T()({[ts.deleted]:Le&&Le.deleted})},{children:[Le.categories.length>0&&(0,o.jsxs)("div",Object.assign({className:ts.category},{children:[(0,o.jsxs)(o.Fragment,{children:[Le.group&&(0,o.jsx)(u.A,{className:ts.group,color:"secondary",size:"small",icon:(0,o.jsx)(m.A,{children:"groups"}),component:L.A,to:Re.url(At.GROUP_ROUTE_NAME,Le.group),clickable:!0},Le.group.id),Le.event&&(0,o.jsx)(u.A,{className:ts.event,color:"secondary",size:"small",label:Le.event.name,icon:(0,o.jsx)(m.A,{children:"CalendarIcon"}),component:L.A,to:Re.url(At.EVENT_ROUTE_NAME,Le.event),clickable:!0},Le.event.id)]}),Le.categories.map((e=>(0,o.jsx)(L.A,Object.assign({to:Re.url(At.CATEGORY_ROUTE_NAME,e)},{children:(0,o.jsx)(l.A,Object.assign({variant:"overline"},{children:e.name}))}),e.id)))]})),Le.group&&!Le.categories.length&&(0,o.jsx)("div",Object.assign({className:ts.group},{children:(0,o.jsx)(u.A,{color:"secondary",size:"small",icon:(0,o.jsx)(m.A,{children:"groups"}),label:Le.group.name,component:L.A,to:Re.url(At.GROUP_ROUTE_NAME,Le.group),clickable:!0},Le.group.id)})),Le.event&&!Le.categories.length&&(0,o.jsx)(u.A,{className:ts.event,color:"secondary",size:"small",icon:(0,o.jsx)(m.A,{children:"CalendarIcon"}),label:Le.event.name,component:L.A,to:Re.url(At.EVENT_ROUTE_NAME,Le.event),clickable:!0},Le.event.id),(0,o.jsx)(p.A,{className:ts.header,avatar:(0,o.jsx)(L.A,Object.assign({},!Le.author.deleted&&{to:Re.url(At.USER_PROFILE_ROUTE_NAME,Le.author)},{onClick:Le.author.deleted?()=>qe(!0):null},{children:(0,o.jsx)(zt.A,Object.assign({hide:!Le.author.community_badge},{children:(0,o.jsx)(g.A,Object.assign({"aria-label":"recipe",src:Le.author.avatar,className:ts.avatar},{children:Le.author.username}))}))})),title:(0,o.jsx)(L.A,Object.assign({},!Le.author.deleted&&{to:Re.url(At.USER_PROFILE_ROUTE_NAME,Le.author)},{onClick:Le.author.deleted?()=>qe(!0):null,className:ts.username},{children:Le.author.username})),subheader:(0,o.jsxs)(o.Fragment,{children:[Me.user&&Y&&(0,o.jsx)("span",Object.assign({className:ts.new},{children:"NEW"})),(0,o.jsx)(L.A,Object.assign({to:Re.url((0,V.lg)(Le),(0,V.kB)(Le)),className:ts.activityAt},{children:(0,o.jsx)(x.A,{component:"span",date:Le.added_at})})),Le.location&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f.A,{}),(0,o.jsxs)(d.A,Object.assign({className:ts.location},{children:[(0,o.jsx)(m.A,{children:"add_location_alt"}),null===(t=Le.location)||void 0===t?void 0:t.location]}))]}),((null!==(s=Le.addressing)&&void 0!==s?s:[]).filter((e=>e.visible)).length>0||(null==Le?void 0:Le.group))&&(0,o.jsx)(f.A,{}),(0,o.jsx)(d.A,Object.assign({className:ts.tag},{children:Le.addressing.length>0?(0,o.jsx)(O.A,{tags:Le.addressing,TagChipProps:{disposable:!1,clickable:!1,showDescription:!0}}):Le.group?(0,o.jsx)(h.A,Object.assign({title:`${ht.formatMessage(es.visibleToGroup,{group:Le.group.name})}`},{children:(0,o.jsx)(m.A,Object.assign({color:"disabled",fontSize:"small"},{children:"groups"}))})):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f.A,{}),(null===(i=Le.recipients)||void 0===i?void 0:i.length)>0?(0,o.jsx)(h.A,Object.assign({title:`${ht.formatMessage(es.visibleToRecipients)}`},{children:(0,o.jsx)(m.A,Object.assign({color:"disabled",fontSize:"small"},{children:"private"}))})):(0,o.jsx)(h.A,Object.assign({title:`${ht.formatMessage(es.visibleToAll)}`},{children:(0,o.jsx)(m.A,Object.assign({color:"disabled",fontSize:"small"},{children:"public"}))}))]})}))]}),action:(0,o.jsx)(st.A,Object.assign({feedObject:Le,feedObjectType:G,onEditContribution:_t,onHideContribution:Tt,onDeleteContribution:Nt,onRestoreContribution:Et,onSuspendNotificationContribution:St,onFlagContribution:Ct},he))}),(0,o.jsxs)(c.A,Object.assign({classes:{root:ts.content}},{children:[(0,o.jsx)(d.A,Object.assign({className:ts.titleSection},{children:"title"in Le&&(0,o.jsx)(o.Fragment,{children:X===F.a.DETAIL?(0,o.jsx)(l.A,Object.assign({variant:"body1",gutterBottom:!0,className:ts.title},{children:Le.title})):(0,o.jsx)(L.A,Object.assign({to:Re.url((0,V.lg)(Le),(0,V.kB)(Le))},{children:(0,o.jsx)(l.A,Object.assign({variant:"body1",gutterBottom:!0,className:ts.title},{children:Le.title}))}))})})),(0,o.jsx)(d.A,Object.assign({className:ts.textSection},{children:Lt(Le,X)})),(0,o.jsx)(d.A,Object.assign({className:ts.mediasSection},{children:(0,o.jsx)(Jt,Object.assign({medias:Le.medias},fe))})),(0,o.jsx)(d.A,Object.assign({className:ts.pollsSection},{children:Le.poll&&(0,o.jsx)(He,Object.assign({visible:ne||X===F.a.DETAIL||Boolean(Le.type!==H.Z.DISCUSSION&&!Le.html&&!Le.medias.length),feedObject:Le,pollObject:Le.poll,onChange:xt,onToggleVisibility:ft},Ce))})),!Le.draft&&(0,o.jsx)(d.A,Object.assign({className:ts.infoSection},{children:(0,o.jsxs)(b.A,Object.assign({direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2},{children:[$e||De?!oe&&(0,o.jsx)(et,Object.assign({feedObject:Le,feedObjectType:Le.type},Ee,{cacheStrategy:W})):(0,o.jsx)(R,{feedObjectId:U||(null==B?void 0:B.id),feedObjectType:G,feedObject:Le,inlineAction:!0,onVoteAction:kt,className:ts.vote}),!gt&&(0,o.jsx)(it,Object.assign({feedObject:Le,feedObjectType:Le.type,handleFollow:Mt},ie))]}))}))]})),(0,o.jsxs)(j.A,Object.assign({className:ts.actionsSection},{children:[(0,o.jsx)(_e,Object.assign({feedObjectId:U,feedObjectType:G,feedObject:Le,hideVoteAction:!De&&!$e,hideCommentAction:!$e||X===F.a.DETAIL||pt&&!(null===(C=null===(y=null==Le?void 0:Le.medias[0].embed)||void 0===y?void 0:y.metadata)||void 0===C?void 0:C.active),hideShareAction:!De,handleExpandActivities:X===F.a.PREVIEW?Rt:null,VoteActionProps:{onVoteAction:kt}},re)),$e&&(X===F.a.DETAIL&&(!pt||(null===(w=null===(S=null===(N=null===(E=null==Le?void 0:Le.medias)||void 0===E?void 0:E[0])||void 0===N?void 0:N.embed)||void 0===S?void 0:S.metadata)||void 0===w?void 0:w.active))||Ke)&&(0,o.jsx)(d.A,Object.assign({className:ts.replyContent},{children:(0,o.jsx)(ce,Object.assign({id:`reply-feedObject-${Le.id}`,onReply:$t,editable:!ot||Boolean(Le)},de),Number(ot))}))]})),$e&&X===F.a.PREVIEW&&(Le.comment_count>0||z&&z.length>0)&&(0,o.jsx)(A.A,Object.assign({in:Ke,timeout:"auto",classes:{root:ts.activitiesSection}},{children:(0,o.jsx)(c.A,Object.assign({className:ts.activitiesContent},{children:(0,o.jsx)(Bt,Object.assign({feedObject:Le,feedObjectActivities:z,activitiesType:lt,onSetSelectedActivities:Pt,comments:Qe,CommentsObjectProps:{CommentComponentProps:Object.assign({onDelete:It,truncateContent:!0,CommentsObjectComponentProps:{inPlaceLoadMoreContents:!1}},ue),CommentObjectSkeletonProps:ge},cacheStrategy:W},ye),lt)}))})),Ye&&(0,o.jsx)(Oe.A,{open:Ye,feedObject:Le,onClose:_t,onSuccess:wt,maxWidth:"sm",fullWidth:!0})]})):(0,o.jsx)(v.A,Object.assign({template:X},le))}):X===F.a.SHARE?(0,o.jsx)(n.Fragment,{children:Le?(0,o.jsxs)(n.Fragment,{children:[Le.categories.length>0&&(0,o.jsxs)("div",Object.assign({className:ts.category},{children:[(0,o.jsxs)(o.Fragment,{children:[Le.group&&(0,o.jsx)("div",Object.assign({className:ts.group},{children:(0,o.jsx)(u.A,{color:"secondary",size:"small",icon:(0,o.jsx)(m.A,{children:"groups"}),component:L.A,to:Re.url(At.GROUP_ROUTE_NAME,Le.group),clickable:!0},Le.group.id)})),Le.event&&(0,o.jsx)(u.A,{className:ts.event,color:"secondary",size:"small",icon:(0,o.jsx)(m.A,{children:"CalendarIcon"}),component:L.A,to:Re.url(At.EVENT_ROUTE_NAME,Le.event),clickable:!0},Le.event.id)]}),Le.categories.map((e=>(0,o.jsx)(L.A,Object.assign({to:Re.url(At.CATEGORY_ROUTE_NAME,e)},{children:(0,o.jsx)(l.A,Object.assign({variant:"overline"},{children:e.name}))}),e.id)))]})),Le.group&&!Le.categories.length&&(0,o.jsx)("div",Object.assign({className:ts.group},{children:(0,o.jsx)(u.A,{color:"secondary",size:"small",icon:(0,o.jsx)(m.A,{children:"groups"}),label:Le.group.name,component:L.A,to:Re.url(At.GROUP_ROUTE_NAME,Le.group),clickable:!0},Le.group.id)})),Le.event&&!Le.categories.length&&(0,o.jsx)("div",Object.assign({className:ts.event},{children:(0,o.jsx)(u.A,{color:"secondary",size:"small",icon:(0,o.jsx)(m.A,{children:"groups"}),label:Le.event.name,component:L.A,to:Re.url(At.EVENT_ROUTE_NAME,Le.event),clickable:!0},Le.event.id)})),(0,o.jsx)(p.A,{classes:{root:ts.header},avatar:(0,o.jsx)(L.A,Object.assign({},!Le.author.deleted&&{to:Re.url(At.USER_PROFILE_ROUTE_NAME,Le.author)},{onClick:Le.author.deleted?()=>qe(!0):null,className:ts.username},{children:(0,o.jsx)(zt.A,Object.assign({hide:!Le.author.community_badge},{children:(0,o.jsx)(g.A,Object.assign({"aria-label":"recipe",src:Le.author.avatar,className:ts.avatar},{children:Le.author.username}))}))})),title:(0,o.jsx)(L.A,Object.assign({},!Le.author.deleted&&{to:Re.url(At.USER_PROFILE_ROUTE_NAME,Le.author)},{onClick:Le.author.deleted?()=>qe(!0):null,className:ts.username},{children:Le.author.username})),subheader:(0,o.jsx)(L.A,Object.assign({to:Re.url((0,V.lg)(Le),(0,V.kB)(Le)),className:ts.activityAt},{children:(0,o.jsx)(x.A,{date:Le.added_at})}))}),(0,o.jsxs)(c.A,Object.assign({classes:{root:ts.content}},{children:[(0,o.jsx)(d.A,Object.assign({className:ts.titleSection},{children:"title"in Le&&(0,o.jsx)(L.A,Object.assign({to:Re.url((0,V.lg)(Le),(0,V.kB)(Le))},{children:(0,o.jsx)(l.A,Object.assign({variant:"body1",gutterBottom:!0,className:ts.title},{children:Le.title}))}))})),(0,o.jsx)(d.A,Object.assign({className:ts.textSection},{children:Lt(Le,X)})),(0,o.jsx)(d.A,Object.assign({className:ts.mediasSection},{children:(0,o.jsx)(Jt,Object.assign({medias:Le.medias},fe))})),(0,o.jsx)(d.A,Object.assign({className:ts.pollsSection},{children:Le.poll&&(0,o.jsx)(He,Object.assign({feedObject:Le,pollObject:Le.poll,onChange:xt,visible:Boolean(Le.type!==H.Z.DISCUSSION&&!Le.html&&!Le.medias.length)},Ce))}))]}))]}):(0,o.jsx)(v.A,Object.assign({template:X},le))}):(0,o.jsx)(n.Fragment,{children:Le?(0,o.jsx)(ct.A,{elevation:0,className:ts.snippet,image:(0,o.jsx)(L.A,Object.assign({},!Le.author.deleted&&{to:Re.url(At.USER_PROFILE_ROUTE_NAME,Le.author)},{onClick:Le.author.deleted?()=>qe(!0):null},{children:(0,o.jsx)(zt.A,Object.assign({hide:!Le.author.community_badge},{children:(0,o.jsx)(g.A,{alt:Le.author.username,variant:"circular",src:Le.author.avatar,className:ts.avatar})}))})),primary:(0,o.jsxs)(d.A,{children:[(0,o.jsx)(L.A,Object.assign({},!Le.author.deleted&&{to:Re.url(At.USER_PROFILE_ROUTE_NAME,Le.author)},{onClick:Le.author.deleted?()=>qe(!0):null,className:ts.username},{children:Le.author.username})),(0,o.jsx)(l.A,Object.assign({variant:"body2",className:ts.snippetContent},{children:(0,o.jsx)(L.A,Object.assign({to:Re.url((0,V.lg)(Le),(0,V.kB)(Le))},{children:(0,V.cO)(Le)}))}))]}),disableTypography:!0,secondary:(0,o.jsxs)(b.A,Object.assign({direction:"row",justifyContent:"space-between",spacing:2,alignItems:"center"},{children:[(0,o.jsx)(L.A,Object.assign({to:Re.url((0,V.lg)(Le),(0,V.kB)(Le)),className:ts.activityAt},{children:(0,o.jsx)(x.A,{component:"span",date:Le.added_at})})),$e&&(0,o.jsx)(r.A,Object.assign({component:L.A,to:Re.url((0,V.lg)(Le),(0,V.kB)(Le)),variant:"text",color:"secondary",size:"small"},{children:(0,o.jsx)(q.A,{id:"ui.feedObject.comment",defaultMessage:"ui.feedObject.comment"})}))]}))}):(0,o.jsx)(v.A,Object.assign({},le))}),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(ss,Object.assign({id:M,className:T()(ts.root,P,`${_.H}-${X}`)},we,{children:[Me.user&&Le&&Y&&(0,o.jsx)(tt.A,{endpoint:Z.A.FeedObjectMarkRead,data:{object:[Le.id]},callback:yt}),Ht]})),ze&&(0,o.jsx)(vt.A,{open:ze,handleClose:()=>qe(!1)})]})}},92699:(e,t,s)=>{"use strict";s.d(t,{H:()=>a});const a="SCFeedObject"},97100:(e,t,s)=>{"use strict";var a,o;s.d(t,{i:()=>a,j:()=>o}),function(e){e.HOME="home",e.EXPLORE="explore",e.CATEGORY="category",e.GROUP="group",e.EVENT="event"}(a||(a={})),function(e){e.COMMENT="comment",e.VOTE="vote",e.POLLVOTE="pollvote",e.FOLLOW="follow"}(o||(o={}))}}]);