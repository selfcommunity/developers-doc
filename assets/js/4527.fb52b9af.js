(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[4527],{2783:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var n=s(74848),o=s(96540),a=s(13550),i=s(98669);const l=[200,200],r=e=>{const{endpoint:t,params:s={},callback:n,data:i=null}=e,l=()=>{a.A.request({url:t.url(s),method:t.method,data:i}).then((e=>{n&&n(e)})).catch((()=>null))};return(0,o.useEffect)((()=>{let e;if(t)return e=setTimeout(l),()=>{e&&clearTimeout(e)}}),[]),null},c=e=>(0,n.jsx)(i.Ay,Object.assign({once:!0,offset:l},{children:(0,n.jsx)(r,Object.assign({},e))}))},4527:(e,t,s)=>{"use strict";s.d(t,{A:()=>v});var n=s(31635),o=s(74848),a=s(96540),i=s(84497),l=s(95754),r=s(28692),c=s(19546),d=s.n(c),u=s(11848),m=s(71194),g=s(19249);const p=e=>e.type===g.cJ||e.type===g.zG,j="SCMediaShare";var h=s(49441),b=s(65953);const A={displayRoot:`${j}-display-root`,sharePreview:`${j}-share-preview`,sharePlaceholder:`${j}-share-placeholder`},f=(0,u.Ay)(m.A,{name:j,slot:"DisplayRoot"})((({theme:e})=>({}))),v={name:"share",displayComponent:e=>{var{className:t,medias:s=[],onMediaClick:c=null}=e,u=(0,n.__rest)(e,["className","medias","onMediaClick"]);const j=(0,a.useMemo)((()=>s.filter(p)),[s]);return 0===j.length?null:(0,o.jsx)(f,Object.assign({className:d()(t,A.displayRoot)},u,{children:j.map(((e,t)=>(0,o.jsx)(m.A,Object.assign({className:A.sharePreview,onClick:c},{children:e.type===g.zG||e.embed&&e.embed.embed_type===g.TY?(0,o.jsx)(b.A,{event:e.embed.metadata,template:h.T.DETAIL,variant:"outlined",square:!0,hideEventParticipants:!0,hideEventPlanner:!0,actions:(0,o.jsx)(o.Fragment,{})}):(0,o.jsx)(i.A,{feedObjectId:e.embed.metadata.id,feedObjectType:e.embed.metadata.type,variant:"outlined",template:l.a.SHARE,cacheStrategy:r.So.CACHE_FIRST})}),t)))}))},triggerButton:null,layerComponent:null,previewComponent:null,filter:p}},9149:function(e){var t,s;e.exports=(t={705:e=>{e.exports=function(e,t){const s=[];return 0===t.length?s.push({text:e,highlight:!1}):t[0][0]>0&&s.push({text:e.slice(0,t[0][0]),highlight:!1}),t.forEach(((n,o)=>{const a=n[0],i=n[1];s.push({text:e.slice(a,i),highlight:!0}),o===t.length-1?i<e.length&&s.push({text:e.slice(i,e.length),highlight:!1}):i<t[o+1][0]&&s.push({text:e.slice(i,t[o+1][0]),highlight:!1})})),s}}},s={},function e(n){var o=s[n];if(void 0!==o)return o.exports;var a=s[n]={exports:{}};return t[n](a,a.exports,e),a.exports}(705))},13470:(e,t,s)=>{"use strict";s.d(t,{A:()=>B});var n=s(31635),o=s(74848),a=s(96540),i=s(19249),l=s(87631),r=s(19546),c=s.n(r);const d="SCMediaLink";var u=s(11848),m=s(71194),g=s(3246);const p=e=>e.type===i.E4&&e.embed&&e.embed.embed_type===i.Yc,j={displayRoot:`${d}-display-root`,displayLink:`${d}-link`,displayHtmlWrap:`${d}-html-wrap`,displayHtml:`${d}-html`,displayHtmlPlaceholder:`${d}-html-placeholder`,displayHtmlLoading:`${d}-html-loading`,displayVideo:`${d}-video`,thumbnail:`${d}-thumbnail`,thumbnailFullWidth:`${d}-thumbnail`,image:`${d}-image`,snippet:`${d}-snippet`,snippetTitle:`${d}-snippet-title`,snippetDescription:`${d}-snippet-description`},h=(0,u.Ay)(m.A,{name:d,slot:"DisplayRoot"})((({theme:e})=>({}))),b=e=>{const{className:t="",medias:s,fullWidth:r=!1,onMediaClick:d=null}=e,u=(0,n.__rest)(e,["className","medias","fullWidth","onMediaClick"]),g=e=>{d&&d(e)},b=(0,a.useMemo)((()=>s.filter(p)),[s]),A=(e,t)=>{const s=new URL(e.embed.metadata.url).hostname.replace("www.","");return(0,o.jsxs)(m.A,Object.assign({className:j.displayLink},{children:[e.embed.metadata.images&&e.embed.metadata.images.length>0&&(0,o.jsx)(o.Fragment,{children:r?(0,o.jsx)(m.A,{className:c()(j.thumbnailFullWidth,j.image),style:{background:`url(${e.image})`,paddingBottom:100/e.image_width/e.image_height+"%"}}):(0,o.jsx)(m.A,{className:c()(j.thumbnail,j.image),style:{background:`url(${e.image})`}})}),(0,o.jsxs)(m.A,Object.assign({className:j.snippet},{children:[(0,o.jsx)("b",Object.assign({className:j.snippetTitle},{children:e.embed.metadata.title})),(0,o.jsx)("br",{}),(0,o.jsx)("p",Object.assign({className:j.snippetDescription},{children:e.embed.metadata.description})),(0,o.jsx)("a",Object.assign({href:e.embed.metadata.url,target:"_blank",onClick:()=>g(e)},{children:s}))]})),(0,o.jsx)("div",{style:{clear:"both"}})]}),t)};return 0===b.length?null:(0,o.jsx)(h,Object.assign({className:c()(t,j.displayRoot)},u,{children:b.map(((e,t)=>e.embed.metadata&&e.embed.metadata.type===i.m6?(0,o.jsx)(l.A,{url:e.url,width:"100%",height:360,onVideoWatch:()=>g(e)},t):(0,o.jsx)(a.Fragment,{children:A(e,t)},t)))}))};var A=s(4671),f=s(40059);const v={triggerRoot:`${d}-trigger-root`},O=(0,u.Ay)(A.A,{name:d,slot:"TriggerRoot"})((()=>({})));var x=s(58065),y=s(46831),C=s(47859),E=s(42942),_=s(28968),N=s(15901);const w={previewRoot:`${d}-preview-root`,media:`${d}-media`,video:`${d}-media-video`,delete:`${d}-delete`},S=(0,u.Ay)(m.A,{name:d,slot:"PreviewRoot"})((()=>({}))),k=a.forwardRef(((e,t)=>{const{className:s,onChange:l,value:r=[]}=e,d=(0,n.__rest)(e,["className","onChange","value"]),u=(0,a.useMemo)((()=>r.filter(p)),[r]),g=(0,a.useCallback)((e=>{l&&l([...r.filter((t=>-1===e.findIndex((e=>e.id===t.id)))),...e])}),[l,r]),j=(0,a.useCallback)((e=>()=>l&&l(r.filter((t=>t.id!==e)))),[l,r]);return(0,o.jsx)(S,Object.assign({ref:t,className:c()(s,w.previewRoot)},d,{children:u.length>0&&(0,o.jsx)(N.ReactSortable,Object.assign({list:u,setList:g},{children:u.map((e=>(0,o.jsxs)(m.A,Object.assign({className:c()(w.media,{[w.video]:e.embed.metadata&&e.embed.metadata.type===i.m6})},{children:[(0,o.jsx)(b,{medias:[e]}),(0,o.jsx)(A.A,Object.assign({className:w.delete,onClick:j(e.id),size:"small"},{children:(0,o.jsx)(f.A,{children:"delete"})}))]}),e.id)))}))}))}));var T=s(43581),M=s(206),R=s(20973),P=s(13550),I=s(29368),$=s(24760),H=s(44467);const F={url:"",urlError:null},L=e=>{var t,s;const[l,r]=(0,a.useState)(!1),[c,d]=(0,a.useState)(Object.assign({},F)),{url:u,urlError:m}=c,p=a.useRef(u);p.current=u;const j=a.useRef(null),{helperText:h,error:b,onSuccess:f}=e,v=(0,n.__rest)(e,["helperText","error","onSuccess"]);(0,a.useEffect)((()=>()=>clearTimeout(j.current)),[]);const O=e=>{e&&(e.preventDefault(),e.stopPropagation()),j.current&&clearTimeout(j.current),r(!0),P.A.request({url:I.A.ComposerMediaCreate.url(),method:I.A.ComposerMediaCreate.method,data:{type:i.E4,url:p.current}}).then((e=>{d(Object.assign({},F)),f&&f(e.data)})).catch((e=>{const t=(0,$.zl)(e);d({urlError:t.urlError?`urlError.${t.urlError.error}`:t.error,url:p.current})})).then((()=>r(!1)))};return(0,o.jsx)("form",Object.assign({method:"post",onSubmit:O},{children:(0,o.jsx)(T.A,Object.assign({value:u,type:"url",onChange:e=>{const t=e.target,s=t.value.startsWith("h")?t.value:`https://${t.value}`;d({url:s,urlError:(0,H.AY)(s)?null:"validationError"})},onPaste:e=>{j.current&&clearTimeout(j.current),j.current=setTimeout((()=>{(0,H.AY)(p.current)&&O(e)}),500)},error:b||Boolean(m),helperText:h||m&&(0,o.jsx)(x.A,{id:`ui.composer.media.link.add.error.${m}`,defaultMessage:`ui.composer.media.link.add.error.${m}`})||(0,o.jsx)(x.A,{id:"ui.composer.media.link.add.help",defaultMessage:"ui.composer.media.link.add.help"}),disabled:l},v,{InputProps:Object.assign(Object.assign({},v.InputProps),{endAdornment:(0,o.jsx)(o.Fragment,{children:""===u&&(null===(t=v.InputProps)||void 0===t?void 0:t.endAdornment)?null===(s=v.InputProps)||void 0===s?void 0:s.endAdornment:(0,o.jsx)(M.A,Object.assign({position:"end"},{children:(0,o.jsx)(R.A,Object.assign({in:null===m&&""!==u},{children:(0,o.jsx)(A.A,Object.assign({size:"small",disabled:l,type:"submit"},{children:l?(0,o.jsx)(g.A,{color:"primary",size:20}):(0,o.jsx)(x.A,{id:"ui.composer.media.link.add.submit",defaultMessage:"ui.composer.media.link.add.submit"})}))}))}))})})}))}))},D={layerRoot:`${d}-layer-root`,title:`${d}-layer-title`,content:`${d}-layer-content`,media:`${d}-media`,delete:`${d}-delete`},U=(0,u.Ay)(m.A,{name:d,slot:"LayerRoot"})((()=>({}))),V=a.forwardRef(((e,t)=>{const{className:s,onClose:i,onSave:l,defaultValue:r=[]}=e,d=(0,n.__rest)(e,["className","onClose","onSave","defaultValue"]),[u,m]=(0,a.useState)(r),g=(0,a.useCallback)((()=>l(u)),[u]),p=(0,a.useCallback)((e=>m([...u,e])),[u]),j=(0,a.useCallback)((e=>m(e)),[]);return(0,o.jsxs)(U,Object.assign({ref:t,className:c()(s,D.layerRoot)},d,{children:[(0,o.jsxs)(y.A,Object.assign({className:D.title},{children:[(0,o.jsx)(A.A,Object.assign({onClick:i},{children:(0,o.jsx)(f.A,{children:"arrow_back"})})),(0,o.jsx)(C.A,{children:(0,o.jsx)(x.A,{id:"ui.composer.media.link.layer.title",defaultMessage:"ui.composer.media.link.layer.title"})}),(0,o.jsx)(E.A,Object.assign({size:"small",color:"secondary",variant:"contained",onClick:g},{children:(0,o.jsx)(x.A,{id:"ui.composer.layer.save",defaultMessage:"ui.composer.layer.save"})}))]})),(0,o.jsxs)(_.A,Object.assign({className:D.content},{children:[(0,o.jsx)(L,{id:"page",name:"page",label:(0,o.jsx)(x.A,{id:"ui.composer.media.link.add.label",defaultMessage:"ui.composer.media.link.add.label"}),fullWidth:!0,variant:"outlined",placeholder:"https://",onSuccess:p}),(0,o.jsx)(k,{onChange:j,value:u})]}))]}))})),B={name:"link",displayComponent:b,triggerButton:e=>{var{className:t}=e,s=(0,n.__rest)(e,["className"]);return(0,o.jsx)(O,Object.assign({className:c()(t,v.triggerRoot)},s,{"aria-label":"add link"},{children:(0,o.jsx)(f.A,{children:"link"})}))},layerComponent:V,previewComponent:k,filter:p}},21676:(e,t,s)=>{"use strict";s.d(t,{A:()=>m});var n=s(31635),o=s(74848),a=s(11848),i=s(44744),l=s(19546),r=s.n(l);const c="SCTagChip",d={ellipsis:`${c}-ellipsis`},u=(0,a.Ay)(i.A,{name:c,slot:"Root",overridesResolver:(e,t)=>[t.root]})((({theme:e})=>({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",height:25,[`&.${d.ellipsis}`]:{maxWidth:120}})));function m(e){const{tag:t,clickable:s=!0,disposable:a=!0,label:i=null,ellipsis:l=!1,onClick:c=null,onDelete:m=null,className:g=null}=e,p=(0,n.__rest)(e,["tag","clickable","disposable","label","ellipsis","onClick","onDelete","className"]);return(0,o.jsx)(u,Object.assign({className:r()(g,{[d.ellipsis]:l}),sx:{backgroundColor:`${t.color}`,color:e=>e.palette.getContrastText(t.color)}},s&&{onClick:()=>{c&&c(t.id)}},a&&{onDelete:()=>{m&&m(t.id)}},{label:i||t.name},p))}},22426:(e,t,s)=>{"use strict";s.d(t,{A:()=>O});var n=s(31635),o=s(74848),a=s(96540),i=s(58065),l=s(11848),r=s(5696),c=s(43581),d=s(3246),u=s(13550),m=s(29368),g=s(9149),p=s.n(g),j=s(61183),h=s.n(j),b=s(79197);const A="SCLocationAutocomplete",f={root:`${A}-root`},v=(0,l.Ay)(r.A,{name:A,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({minWidth:120})));const O=function(e){const t=(0,b.A)({props:e,name:A}),{defaultValue:s=null,disabled:l=!1,onChange:r,TextFieldProps:g={variant:"outlined",label:(0,o.jsx)(i.A,{id:"ui.locationAutocomplete.label",defaultMessage:"ui.composer.locations.label"})}}=t,j=(0,n.__rest)(t,["defaultValue","disabled","onChange","TextFieldProps"]),[O,x]=(0,a.useState)(!1),[y,C]=(0,a.useState)([]),[E,_]=(0,a.useState)(s),[N,w]=(0,a.useState)("");(0,a.useEffect)((()=>{!O&&N.trim().length>0&&((e=0,t=20)=>{u.A.request({url:m.A.ComposerLocalitySearch.url(),method:m.A.ComposerLocalitySearch.method,params:{offset:e,limit:t,search:N.trim()}}).then((e=>{C(e.data.results)})).then((()=>x(!1)))})()}),[N]),(0,a.useEffect)((()=>{E&&r&&r(E)}),[E]);const S=(0,a.useMemo)((()=>!E||"string"==typeof E||y.find((e=>E.lat===e.lat&&E.lng===e.lng))?y:[...y,{lat:E.lat,lng:E.lng,full_address:E.location}]),[E,y]);return(0,o.jsx)(v,Object.assign({className:f.root,options:S||[],getOptionLabel:e=>(null==e?void 0:e.full_address)||(null==e?void 0:e.location)||"",filterOptions:e=>e,autoComplete:!0,includeInputInList:!0,value:E||null,selectOnFocus:!0,handleHomeEndKeys:!0,disabled:l,noOptionsText:(0,o.jsx)(i.A,{id:"ui.locationAutocomplete.empty",defaultMessage:"ui.locationAutocomplete.empty"}),onChange:(e,t)=>{_(t?{location:t.full_address,lat:t.lat,lng:t.lng}:null),r&&r(t)},onInputChange:(e,t)=>{w(t)},isOptionEqualToValue:(e,t)=>t.lat===e.lat&&t.lng===e.lng,renderInput:e=>(0,o.jsx)(c.A,Object.assign({},e,g,{margin:"dense",InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"location",endAdornment:(0,o.jsxs)(a.Fragment,{children:[O?(0,o.jsx)(d.A,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})})),renderOption:(e,t,{inputValue:s})=>{const n=h()(t.full_address,s),a=p()(t.full_address,n);return(0,o.jsx)("li",Object.assign({},e,{style:{whiteSpace:"break-spaces"}},{children:a.map(((e,t)=>e.highlight?(0,o.jsx)("span",Object.assign({style:{fontWeight:700}},{children:e.text}),t):e.text))}),`${t.lat}_${t.lng}`)}},j))}},26763:(e,t,s)=>{"use strict";s.d(t,{A:()=>A});var n=s(31635),o=s(74848),a=s(96540),i=s(86857),l=s(95754),r=s(11848),c=s(44675),d=s(34069),u=s(73785),m=s(25292),g=s(19546),p=s.n(g),j=s(92699);const h={root:`${j.H}-skeleton-root`,media:`${j.H}-media`},b=(0,r.Ay)(i.A,{name:j.H,slot:"SkeletonRoot"})((()=>({})));function A(e){const{template:t=l.a.SNIPPET}=e,s=(0,n.__rest)(e,["template"]),i=(0,c.A)();let r;return r=t===l.a.PREVIEW||t===l.a.DETAIL||t===l.a.SEARCH?(0,o.jsxs)(a.Fragment,{children:[(0,o.jsx)(d.A,{avatar:(0,o.jsx)(u.A,{animation:"wave",variant:"circular",width:i.selfcommunity.user.avatar.sizeMedium,height:i.selfcommunity.user.avatar.sizeMedium}),title:(0,o.jsx)(u.A,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),subheader:(0,o.jsx)(u.A,{animation:"wave",height:10,width:"40%"})}),(0,o.jsx)(u.A,{animation:"wave",variant:"rectangular",className:h.media}),(0,o.jsx)(m.A,{children:(0,o.jsxs)(a.Fragment,{children:[(0,o.jsx)(u.A,{animation:"wave",height:10,style:{marginBottom:6}}),(0,o.jsx)(u.A,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),(0,o.jsx)(u.A,{animation:"wave",height:10,width:"60%"})]})})]}):(0,o.jsxs)(a.Fragment,{children:[(0,o.jsx)(d.A,{avatar:(0,o.jsx)(u.A,{animation:"wave",variant:"circular",width:i.selfcommunity.user.avatar.sizeMedium,height:i.selfcommunity.user.avatar.sizeMedium}),title:(0,o.jsx)(u.A,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),subheader:(0,o.jsx)(u.A,{animation:"wave",height:10,width:"40%"})}),(0,o.jsx)(m.A,{children:(0,o.jsxs)(a.Fragment,{children:[(0,o.jsx)(u.A,{animation:"wave",height:10,style:{marginBottom:6}}),(0,o.jsx)(u.A,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),(0,o.jsx)(u.A,{animation:"wave",height:10,width:"60%",style:{marginBottom:6}})]})})]}),(0,o.jsx)(b,Object.assign({className:p()(h.root,`${j.H}-${t}`)},s,{children:r}))}},27202:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var n=s(31635),o=s(29368),a=s(40462);class i{static getAllCategories(e,t){return(0,a.A)(Object.assign(Object.assign({},t),{params:e,url:o.A.CategoryList.url({}),method:o.A.CategoryList.method}))}static searchCategory(e,t){return(0,a.A)(Object.assign(Object.assign({},t),{params:e,url:o.A.SearchCategory.url({}),method:o.A.SearchCategory.method}))}static createCategory(e,t){return(0,a.A)(Object.assign({url:o.A.CreateCategory.url({}),method:o.A.CreateCategory.method,data:e},t))}static getSpecificCategory(e,t){return(0,a.A)(Object.assign({url:o.A.Category.url({id:e}),method:o.A.Category.method},t))}static updateASpecificCategory(e,t,s){return(0,a.A)(Object.assign({url:o.A.UpdateCategory.url({id:e}),method:o.A.UpdateCategory.method,data:t},s))}static patchASpecificCategory(e,t,s){return(0,a.A)(Object.assign({url:o.A.PatchCategory.url({id:e}),method:o.A.PatchCategory.method,data:t},s))}static deleteASpecificCategory(e,t){return(0,a.A)(Object.assign({url:o.A.DeleteCategory.url({id:e}),method:o.A.DeleteCategory.method},t))}static getCategoryAudience(e,t){return(0,a.A)(Object.assign({url:o.A.CategoryAudience.url({id:e}),method:o.A.CategoryAudience.method},t))}static getCategoryFollowers(e,t,s){return(0,a.A)(Object.assign({url:o.A.CategoryFollowers.url({id:e}),method:o.A.CategoryFollowers.method,params:t},s))}static getCategoryFeed(e,t,s){return(0,a.A)(Object.assign({url:o.A.CategoryFeed.url({id:e}),method:o.A.CategoryFeed.method,params:t},s))}static getCategoryTrendingFeed(e,t,s){return(0,a.A)(Object.assign(Object.assign({},s),{params:t,url:o.A.CategoryTrendingFeed.url({id:e}),method:o.A.CategoryTrendingFeed.method}))}static getCategoryTrendingFollowers(e,t,s){return(0,a.A)(Object.assign({url:o.A.CategoryTrendingPeople.url({id:e}),method:o.A.CategoryTrendingPeople.method,params:t},s))}static followCategory(e,t){return(0,a.A)(Object.assign({url:o.A.FollowCategory.url({id:e}),method:o.A.FollowCategory.method},t))}static checkCategoryIsFollowed(e,t){return(0,a.A)(Object.assign({url:o.A.CheckCategoryIsFollowed.url({id:e}),method:o.A.CheckCategoryIsFollowed.method},t))}static getFollowedCategories(e,t){return(0,a.A)(Object.assign(Object.assign({},t),{params:e,url:o.A.CategoriesFollowed.url({}),method:o.A.CategoriesFollowed.method}))}static getPopularCategories(e,t){return(0,a.A)(Object.assign(Object.assign({},t),{params:e,url:o.A.PopularCategories.url({}),method:o.A.PopularCategories.method}))}}class l{static getAllCategories(e,t){return(0,n.__awaiter)(this,void 0,void 0,(function*(){return i.getAllCategories(e,t)}))}static searchCategory(e,t){return(0,n.__awaiter)(this,void 0,void 0,(function*(){return i.searchCategory(e,t)}))}static createCategory(e,t){return(0,n.__awaiter)(this,void 0,void 0,(function*(){return i.createCategory(e,t)}))}static getSpecificCategory(e,t){return(0,n.__awaiter)(this,void 0,void 0,(function*(){return i.getSpecificCategory(e,t)}))}static updateASpecificCategory(e,t,s){return(0,n.__awaiter)(this,void 0,void 0,(function*(){return i.updateASpecificCategory(e,t,s)}))}static patchASpecificCategory(e,t,s){return(0,n.__awaiter)(this,void 0,void 0,(function*(){return i.patchASpecificCategory(e,t,s)}))}static deleteASpecificCategory(e,t){return(0,n.__awaiter)(this,void 0,void 0,(function*(){return i.deleteASpecificCategory(e,t)}))}static getCategoryAudience(e,t){return(0,n.__awaiter)(this,void 0,void 0,(function*(){return i.getCategoryAudience(e,t)}))}static getCategoryFollowers(e,t,s){return(0,n.__awaiter)(this,void 0,void 0,(function*(){return i.getCategoryFollowers(e,t,s)}))}static getCategoryFeed(e,t,s){return(0,n.__awaiter)(this,void 0,void 0,(function*(){return i.getCategoryFeed(e,t,s)}))}static getCategoryTrendingFeed(e,t,s){return(0,n.__awaiter)(this,void 0,void 0,(function*(){return i.getCategoryTrendingFeed(e,t,s)}))}static getCategoryTrendingFollowers(e,t,s){return(0,n.__awaiter)(this,void 0,void 0,(function*(){return i.getCategoryTrendingFollowers(e,t,s)}))}static followCategory(e,t){return(0,n.__awaiter)(this,void 0,void 0,(function*(){return i.followCategory(e,t)}))}static checkCategoryIsFollowed(e,t){return(0,n.__awaiter)(this,void 0,void 0,(function*(){return i.checkCategoryIsFollowed(e,t)}))}static getFollowedCategories(e,t){return(0,n.__awaiter)(this,void 0,void 0,(function*(){return i.getFollowedCategories(e,t)}))}static getPopularCategories(e,t){return(0,n.__awaiter)(this,void 0,void 0,(function*(){return i.getPopularCategories(e,t)}))}}},35488:(e,t,s)=>{"use strict";s.d(t,{A:()=>Q});var n=s(74848),o=s(11848),a=s(71194),i=s(40059),l=s(47859),r=s(1489),c=s(4671),d=s(3341),u=s(19546),m=s.n(u),g=s(19249),p=s(96540),j=s(40094),h=s(31635),b=s(38427),A=s(31494);const f={root:`${A.H}-lightbox-root`},v=(0,o.Ay)(b.A,{name:A.H,slot:"LightboxRoot"})((()=>({})));function O(e){const{medias:t=[],index:s=0,toolbarButtons:o,onClose:a,onIndexChange:i}=e,l=(0,h.__rest)(e,["medias","index","toolbarButtons","onClose","onIndexChange"]),r=(0,p.useCallback)(((e,t)=>({src:e.image,width:e.image_width,height:e.image_height,key:t})),[]);return(0,n.jsx)(v,Object.assign({},l,{className:f.root,images:t.map(r),visible:-1!==s,onClose:a,index:s,onIndexChange:i,toolbarButtons:o}))}var x=s(22860),y=s(79671);const C={displayRoot:`${x.H}-display-root`,background:`${x.H}-background`,backgroundPortrait:`${x.H}-background-portrait`,heightOne:`${x.H}-height-one`,heightHalfOne:`${x.H}-height-half-one`,heightTwo:`${x.H}-height-two`,heightThree:`${x.H}-height-three`,cover:`${x.H}-cover`,coverText:`${x.H}-cover-text`,slide:`${x.H}-slide`,border:`${x.H}-border`,gallery:`${x.H}-gallery`,title:`${x.H}-title`,iconFile:`${x.H}-icon-file`},E=(0,o.Ay)(a.A,{name:x.H,slot:"DisplayRoot"})((({})=>({})));var _=s(50236),N=s(51372),w=s(37211),S=s(25911),k=s(44675),T=s(90508),M=s(36870),R=s(3246),P=s(28820),I=s(45284),$=s(58065),H=s(86691),F=s(56545),L=s(29368),D=s(12341);const U=(e,t)=>{const s=(s,o)=>{const{showFileUpload:a,getInternalFileInput:i}=(0,D.Bx)(),{id:l,className:r,text:c,children:d,extraProps:u,onClick:m}=s,g=(0,h.__rest)(s,["id","className","text","children","extraProps","onClick"]),j=(0,p.useRef)();j.current=g;const b=(0,p.useCallback)((e=>{const s=i();s.current.accept=t.accept,t.capture?s.current.capture=t.capture:s.current.removeAttribute("capture"),a(j.current),null==m||m(e)}),[i,a,j,m]);return(0,n.jsx)(e,Object.assign({ref:o,onClick:b,id:l,className:r,children:d||c||"Upload"},u))};return(0,D.QB)(s),(0,p.forwardRef)(s)};var V=s(18590);const B={triggerRoot:`${x.H}-trigger-root`,triggerDrawerRoot:`${x.H}-trigger-drawer-root`,triggerMenuRoot:`${x.H}-trigger-menu-root`,paper:`${x.H}-paper`,item:`${x.H}-item`},G=(0,o.Ay)(c.A,{name:x.H,slot:"TriggerRoot"})((()=>({}))),z=(0,o.Ay)(_.A,{name:x.H,slot:"TriggerDrawerRoot"})((()=>({}))),W=(0,o.Ay)(N.A,{name:x.H,slot:"TriggerMenuRoot"})((()=>({}))),q=U((0,p.forwardRef)(((e,t)=>(0,n.jsx)(w.A,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:"image/*",capture:"camera"}),Y=U((0,p.forwardRef)(((e,t)=>(0,n.jsx)(w.A,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:"image/*"}),K=U((0,p.forwardRef)(((e,t)=>(0,n.jsx)(w.A,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:"application/pdf"}),X=U((0,p.forwardRef)(((e,t)=>(0,n.jsx)(S.A,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:"image/*"}),Z=U((0,p.forwardRef)(((e,t)=>(0,n.jsx)(S.A,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:"application/pdf"});const Q={name:"file",displayComponent:e=>{const{className:t="",medias:s=[],maxVisible:o=5,gallery:a=!0,onMediaClick:u=null}=e,[h,b]=(0,p.useState)(-1),[A,f]=(0,p.useState)(void 0),{ref:v,inView:x}=(0,j.Wx)({triggerOnce:!1}),_=(0,p.useMemo)((()=>s.filter(y.A)),[s]),N=(e,t=!1)=>{if("object"==typeof e){const s=e.image_thumbnail?e.image_thumbnail.url:e.image?e.image:"/static/frontend_v2/images/image.svg";return t&&e.image?e.image:s}return e},w=(0,p.useCallback)((e=>{!1!==a&&(b(e),u(_[e]))}),[_]),S=e=>{if(!e)return null;let t=null;if(e.type)if("doc"===e.type)t=(0,n.jsx)(i.A,Object.assign({className:C.iconFile},{children:"picture_as_pdf"}));else t=(0,n.jsx)(i.A,Object.assign({className:C.iconFile},{children:"insert_drive_file"}));return(0,n.jsx)(p.Fragment,{children:e.title&&(0,n.jsx)("div",Object.assign({className:C.title},{children:(0,n.jsxs)(l.A,Object.assign({variant:"subtitle2"},{children:[t," ",e.title]}))}))})},k=e=>a?[(0,n.jsx)("div",{className:m()(C.cover,C.slide)},`cover-${e}`),(0,n.jsx)("div",Object.assign({className:m()(C.coverText,C.slide,"animate-text"),style:{fontSize:"100%"}},{children:(0,n.jsx)(i.A,{children:"zoom_out_map"})}),`cover-text-${e}`)]:null,T=e=>{const t=_.length-(o&&o>5?5:o);return[e&&(0,n.jsx)("div",{className:C.cover},"count"),e&&(0,n.jsx)("div",Object.assign({className:C.coverText,style:{fontSize:"200%"}},{children:(0,n.jsxs)("p",{children:["+",t]})}),"count-sub")]},M=(0,p.useCallback)((e=>{_[e].type===g.WW?f((0,n.jsx)(c.A,Object.assign({component:d.A,to:s[e].url,target:"_blank",color:"inherit"},{children:(0,n.jsx)(i.A,{children:"download"})}))):f(void 0)}),[_,f]);(0,p.useEffect)((()=>{-1!==h&&M(h)}),[h]);const R=[..._];return o&&_.length>o&&(R.length=o),0===_.length?null:(0,n.jsxs)(E,Object.assign({className:m()(C.displayRoot,t)},{children:[[1,3,4].includes(R.length)&&(()=>{const e=_.length>o&&1==o?T(!0):k(0),t=!!_[0].image_mimetype&&_[0].image_mimetype.includes("image/gif"),s=_[0].image_height<_[0].image_width;return(0,n.jsx)(r.Ay,Object.assign({container:!0,style:Object.assign({},_[0].image_thumbnail&&_[0].image_thumbnail.color?{backgroundColor:_[0].image_thumbnail.color}:{})},{children:(0,n.jsxs)(r.Ay,Object.assign({item:!0,ref:v,xs:12,classes:{root:m()(C.border,C.heightOne,Object.assign(Object.assign({},t||s?{[C.background]:!0}:{[C.backgroundPortrait]:!0}),{[C.gallery]:a,[C.heightHalfOne]:_.length>1}))},onClick:()=>w(0),style:Object.assign({background:`url(${N(_[0],x&&t)})`},s?{paddingTop:100*_[0].image_height/_[0].image_width+"%"}:{})},{children:[e,S(_[0])]}))}))})(),R.length>=2&&4!=R.length&&(()=>{const e=_.length>o&&[2,3].includes(+o)?T(!0):k(1),t=[3,4].includes(_.length)||_.length>+o&&[3,4].includes(+o);return(0,n.jsxs)(r.Ay,Object.assign({container:!0},{children:[(0,n.jsxs)(r.Ay,Object.assign({item:!0,xs:6,classes:{root:m()(C.border,C.heightTwo,C.background,{[C.gallery]:a})},onClick:()=>w(t?1:0),style:{background:`url(${N(t?_[1]:_[0])})`}},{children:[k(t?1:0),S(_[0])]})),(0,n.jsxs)(r.Ay,Object.assign({item:!0,xs:6,classes:{root:m()(C.border,C.heightTwo,C.background,{[C.gallery]:a})},onClick:()=>w(t?2:1),style:{background:`url(${N(t?_[2]:_[1])})`}},{children:[e,S(_[1])]}))]}))})(),R.length>=4&&(()=>{const e=4==_.length||_.length>+o&&4==+o,t=!o||o>5||_.length>o&&[4,5].includes(+o)?T(!0):k(e?3:4);return(0,n.jsxs)(r.Ay,Object.assign({container:!0},{children:[(0,n.jsxs)(r.Ay,Object.assign({item:!0,xs:4,md:4,classes:{root:m()(C.border,C.heightThree,C.background,{[C.gallery]:a})},onClick:()=>w(e?1:2),style:{background:`url(${N(e?_[1]:_[2])})`}},{children:[k(e?1:2),S(_[1])]})),(0,n.jsxs)(r.Ay,Object.assign({item:!0,xs:4,md:4,classes:{root:m()(C.border,C.heightThree,C.background,{[C.gallery]:a})},onClick:()=>w(e?2:3),style:{background:`url(${N(e?_[2]:_[3])})`}},{children:[k(e?2:3),S(_[2])]})),(0,n.jsxs)(r.Ay,Object.assign({item:!0,xs:4,md:4,classes:{root:m()(C.border,C.heightThree,C.background,{[C.gallery]:a})},onClick:()=>w(e?3:4),style:{background:`url(${N(e?_[3]:_[4])})`}},{children:[t,S(_[3])]}))]}))})(),-1!==h&&(0,n.jsx)(O,{onClose:()=>{b(-1),f(void 0)},index:h,medias:_,toolbarButtons:A,onIndexChange:M})]}))},triggerButton:e=>{var{className:t,onAdd:s=null}=e,o=(0,h.__rest)(e,["className","onAdd"]);const[a,l]=(0,p.useState)(null),[r,c]=(0,p.useState)(!1),d=(0,I.J_)(),u=(0,k.A)(),g=(0,T.A)(u.breakpoints.down("md")),{enqueueSnackbar:j,closeSnackbar:b}=(0,V.dh)(),A=(0,p.useCallback)((e=>{l(e.currentTarget)}),[]),f=(0,p.useCallback)((()=>{l(null)}),[]),v=(0,p.useCallback)((e=>e.type.startsWith("image/")||"application/pdf"===e.type),[]),O=(0,p.useCallback)((e=>{s&&s(e)}),[s]),x=(0,p.useCallback)((e=>{c(Object.keys(e).length>0)}),[]),y=(0,p.useCallback)(((e,t)=>{const s=j(`${e.name}: ${t}`,{variant:"error",anchorOrigin:{horizontal:"center",vertical:"top"},autoHideDuration:2e3,SnackbarProps:{onClick:()=>{b(s)}}})}),[j]),C=(0,p.useMemo)((()=>g?[(0,n.jsx)(M.Ay,Object.assign({className:B.item},{children:(0,n.jsx)(q,Object.assign({inputFieldName:"image"},{children:(0,n.jsx)($.A,{id:"ui.composer.media.file.photo",defaultMessage:"ui.composer.media.file.photo"})}))}),"photo"),(0,n.jsx)(M.Ay,Object.assign({className:B.item},{children:(0,n.jsx)(Y,Object.assign({inputFieldName:"image"},{children:(0,n.jsx)($.A,{id:"ui.composer.media.file.gallery",defaultMessage:"ui.composer.media.file.gallery"})}))}),"gallery"),(0,n.jsx)(M.Ay,Object.assign({className:B.item},{children:(0,n.jsx)(K,Object.assign({inputFieldName:"document"},{children:(0,n.jsx)($.A,{id:"ui.composer.media.file.document",defaultMessage:"ui.composer.media.file.document"})}))}),"document")]:[(0,n.jsx)(X,Object.assign({extraProps:{className:B.item},inputFieldName:"image"},{children:(0,n.jsx)($.A,{id:"ui.composer.media.file.gallery",defaultMessage:"ui.composer.media.file.gallery"})}),"gallery"),(0,n.jsx)(Z,Object.assign({extraProps:{className:B.item},inputFieldName:"document"},{children:(0,n.jsx)($.A,{id:"ui.composer.media.file.document",defaultMessage:"ui.composer.media.file.document"})}),"document")]),[g,v,O,x,y]);return(0,n.jsxs)(F.Ay,Object.assign({destination:{url:`${d.settings.portal}${L.A.ComposerChunkUploadMedia.url()}`,method:L.A.ComposerChunkUploadMedia.method},fileFilter:v,chunkSize:204800,multiple:!0},{children:[(0,n.jsx)(H.A,{onSuccess:O,onProgress:x,onError:y}),(0,n.jsx)(G,Object.assign({className:m()(t,B.triggerRoot)},o,{"aria-label":"add media",disabled:r,onClick:A},{children:r?(0,n.jsx)(R.A,{size:20}):(0,n.jsx)(i.A,{children:"photo_file"})})),g?(0,n.jsx)(z,Object.assign({onClick:()=>l(null),className:B.triggerDrawerRoot,anchor:"bottom",open:Boolean(a),onClose:f,onOpen:A,PaperProps:{className:B.paper},disableSwipeToOpen:!0},{children:(0,n.jsx)(P.A,{children:C})})):(0,n.jsx)(W,Object.assign({onClick:()=>l(null),className:B.triggerMenuRoot,anchorEl:a,open:Boolean(a),onClose:f,PaperProps:{className:B.paper}},{children:C}))]}))},layerComponent:null,previewComponent:s(29858).A,filter:y.A}},37211:(e,t,s)=>{"use strict";s.d(t,{A:()=>v});var n=s(85486),o=s(59703),a=s(96540),i=s(54533),l=s(75659),r=s(56950),c=s(11848),d=s(39770),u=s(25669),m=s(49433),g=s(2778),p=s(96852),j=s(32850),h=s(22927),b=s(74848);const A=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],f=(0,c.Ay)(m.A,{shouldForwardProp:e=>(0,d.A)(e)||"classes"===e,name:"MuiListItemButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.dense&&t.dense,"flex-start"===s.alignItems&&t.alignItemsFlexStart,s.divider&&t.divider,!s.disableGutters&&t.gutters]}})((({theme:e,ownerState:t})=>(0,o.A)({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${h.A.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,r.X4)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${h.A.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,r.X4)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${h.A.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,r.X4)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,r.X4)(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${h.A.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${h.A.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},"flex-start"===t.alignItems&&{alignItems:"flex-start"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.dense&&{paddingTop:4,paddingBottom:4}))),v=a.forwardRef((function(e,t){const s=(0,u.b)({props:e,name:"MuiListItemButton"}),{alignItems:r="center",autoFocus:c=!1,component:d="div",children:m,dense:v=!1,disableGutters:O=!1,divider:x=!1,focusVisibleClassName:y,selected:C=!1,className:E}=s,_=(0,n.A)(s,A),N=a.useContext(j.A),w=a.useMemo((()=>({dense:v||N.dense||!1,alignItems:r,disableGutters:O})),[r,N.dense,v,O]),S=a.useRef(null);(0,g.A)((()=>{c&&S.current&&S.current.focus()}),[c]);const k=(0,o.A)({},s,{alignItems:r,dense:w.dense,disableGutters:O,divider:x,selected:C}),T=(e=>{const{alignItems:t,classes:s,dense:n,disabled:a,disableGutters:i,divider:r,selected:c}=e,d={root:["root",n&&"dense",!i&&"gutters",r&&"divider",a&&"disabled","flex-start"===t&&"alignItemsFlexStart",c&&"selected"]},u=(0,l.A)(d,h.Y,s);return(0,o.A)({},s,u)})(k),M=(0,p.A)(S,t);return(0,b.jsx)(j.A.Provider,{value:w,children:(0,b.jsx)(f,(0,o.A)({ref:M,href:_.href||_.to,component:(_.href||_.to)&&"div"===d?"button":d,focusVisibleClassName:(0,i.A)(T.focusVisible,y),ownerState:k,className:(0,i.A)(T.root,E)},_,{classes:T,children:m}))})}))},41707:(e,t,s)=>{"use strict";s.d(t,{A:()=>ns});var n=s(31635),o=s(74848),a=s(96540),i=s(83426),l=s(79236),r=s(97100),c=s(13550),d=s(29368),u=s(24760),m=s(75753),g=s(2877),p=s(44817),j=s(3338),h=s(58065),b=s(20973),A=s(11848),f=s(77037),v=s(48875),O=s(44675),x=s(90508),y=s(80766),C=s(69981),E=s(46831),_=s(4671),N=s(40059),w=s(28968),S=s(71194),k=s(15993);const T="discussion",M="post",R="poll",P=160;var I=s(19249),$=s(58662),H=s(9149),F=s.n(H),L=s(61183),D=s.n(L),U=s(47859),V=s(42942),B=s(5611),G=s(6786),z=s(5696),W=s(43581),q=s(21676),Y=s(19546),K=s.n(Y);const X="SCComposer",Z=370,Q=210;var J=s(27365),ee=s(3246),te=s(42269),se=s(28692),ne=s(94520),oe=s(86354);const ae={groups:[],isLoading:!0},ie=e=>{const{cacheStrategy:t=se.So.CACHE_FIRST}=e||{},s=(0,oe.v$)(),o=t!==se.So.NETWORK_ONLY?(e=>{if(!e)return null;const t=e.map((e=>{const t=(0,oe.I$)(e);return se.Ay.get(t)}));return t.filter((e=>!e)).length>0?null:t})(se.Ay.get(s,null)):null,[i,l]=(0,a.useState)(null!==o?{groups:o,isLoading:!1}:ae),r=(e=d.A.GetUserGroups.url())=>(0,n.__awaiter)(void 0,void 0,void 0,(function*(){const t=(yield c.A.request({url:e,method:d.A.GetUserGroups.method})).data;return t.next?t.results.concat(yield r(t.next)):t.results}));return(0,a.useEffect)((()=>{t===se.So.CACHE_FIRST&&o||r().then((e=>{l({groups:e,isLoading:!1}),se.Ay.set(s,e.map((e=>{const t=(0,oe.I$)(e.id);return se.Ay.set(t,e),e.id})))})).catch((e=>{console.log(e),ne.V.error(te.K,"Unable to retrieve groups")}))}),[]),i};var le=s(79197);const re="SCGroupAutocomplete",ce={root:`${re}-root`},de=(0,A.Ay)(z.A,{name:re,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({}))),ue=e=>{const t=(0,le.A)({props:e,name:re}),{onChange:s,defaultValue:i=null,disabled:l=!1,TextFieldProps:r={variant:"outlined",label:(0,o.jsx)(h.A,{id:"ui.groupAutocomplete.label",defaultMessage:"ui.groupAutocomplete.label"})}}=t,c=(0,n.__rest)(t,["onChange","defaultValue","disabled","TextFieldProps"]),[d,u]=(0,a.useState)(!1),[m,g]=(0,a.useState)("string"==typeof i?null:i),{groups:p,isLoading:j}=ie();(0,a.useEffect)((()=>{null!==m&&s&&s(m)}),[m]),(0,a.useEffect)((()=>{j||"string"!=typeof i||g(p.find((e=>e.id===Number(i))))}),[j]);return(0,o.jsx)(de,Object.assign({className:ce.root,open:d,onOpen:()=>{u(!0)},onClose:()=>{u(!1)},options:p||[],getOptionLabel:e=>e.name||"",value:m,selectOnFocus:!0,clearOnBlur:!0,blurOnSelect:!0,handleHomeEndKeys:!0,clearIcon:null,disabled:l||j,noOptionsText:(0,o.jsx)(h.A,{id:"ui.groupAutocomplete.empty",defaultMessage:"ui.groupAutocomplete.empty"}),onChange:(e,t)=>{g(t)},isOptionEqualToValue:(e,t)=>t.id===e.id,renderOption:(e,t,{inputValue:s})=>{const n=D()(t.name,s),i=F()(t.name,n);return(0,o.jsxs)(S.A,Object.assign({component:"li"},e,{children:[(0,o.jsx)(J.A,{alt:t.name,src:t.image_small,sx:{marginRight:1}}),(0,o.jsx)(a.Fragment,{children:i.map(((e,t)=>(0,o.jsx)(U.A,Object.assign({sx:{fontWeight:e.highlight?700:400,marginRight:.2}},{children:e.text}),t)))})]}))},renderInput:e=>(0,o.jsx)(W.A,Object.assign({},e,r,{margin:"dense",InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"groups",endAdornment:(0,o.jsxs)(a.Fragment,{children:[j?(0,o.jsx)(ee.A,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},c))},me={events:[],isLoading:!0},ge=e=>{const{cacheStrategy:t=se.So.CACHE_FIRST}=e||{},s=(0,oe.cn)(),o=t!==se.So.NETWORK_ONLY?(e=>{if(!e)return null;const t=e.map((e=>{const t=(0,oe.fq)(e);return se.Ay.get(t)}));return t.filter((e=>!e)).length>0?null:t})(se.Ay.get(s,null)):null,[i,l]=(0,a.useState)(null!==o?{events:o,isLoading:!1}:me),r=(e=d.A.GetUserEvents.url())=>(0,n.__awaiter)(void 0,void 0,void 0,(function*(){const t=(yield c.A.request({url:e,method:d.A.GetUserEvents.method})).data;return t.next?t.results.concat(yield r(t.next)):t.results}));return(0,a.useEffect)((()=>{t===se.So.CACHE_FIRST&&o||r().then((e=>{l({events:e,isLoading:!1}),se.Ay.set(s,e.map((e=>{const t=(0,oe.fq)(e.id);return se.Ay.set(t,e),e.id})))})).catch((e=>{console.log(e),ne.V.error(te.K,"Unable to retrieve events")}))}),[]),i},pe="SCEventAutocomplete",je={root:`${pe}-root`},he=(0,A.Ay)(z.A,{name:pe,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({}))),be=e=>{const t=(0,le.A)({props:e,name:pe}),{onChange:s,defaultValue:i=null,disabled:l=!1,TextFieldProps:r={variant:"outlined",label:(0,o.jsx)(h.A,{id:"ui.eventAutocomplete.label",defaultMessage:"ui.eventAutocomplete.label"})}}=t,c=(0,n.__rest)(t,["onChange","defaultValue","disabled","TextFieldProps"]),[d,u]=(0,a.useState)(!1),[m,g]=(0,a.useState)("string"==typeof i?null:i),{events:p,isLoading:j}=ge();(0,a.useEffect)((()=>{null!==m&&s&&s(m)}),[m]),(0,a.useEffect)((()=>{j||"string"!=typeof i||g(p.find((e=>e.id===Number(i))))}),[j]);return(0,o.jsx)(he,Object.assign({className:je.root,open:d,onOpen:()=>{u(!0)},onClose:()=>{u(!1)},options:p||[],getOptionLabel:e=>e.name||"",value:m,selectOnFocus:!0,clearOnBlur:!0,blurOnSelect:!0,handleHomeEndKeys:!0,clearIcon:null,disabled:l||j,noOptionsText:(0,o.jsx)(h.A,{id:"ui.eventAutocomplete.empty",defaultMessage:"ui.eventAutocomplete.empty"}),onChange:(e,t)=>{g(t)},isOptionEqualToValue:(e,t)=>t.id===e.id,renderOption:(e,t,{inputValue:s})=>{const n=D()(t.name,s),i=F()(t.name,n);return(0,o.jsxs)(S.A,Object.assign({component:"li"},e,{children:[(0,o.jsx)(J.A,{alt:t.name,src:t.image_small,sx:{marginRight:1}}),(0,o.jsx)(a.Fragment,{children:i.map(((e,t)=>(0,o.jsx)(U.A,Object.assign({sx:{fontWeight:e.highlight?700:400,marginRight:.2}},{children:e.text}),t)))})]}))},renderInput:e=>(0,o.jsx)(W.A,Object.assign({},e,r,{margin:"dense",InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"events",endAdornment:(0,o.jsxs)(a.Fragment,{children:[j?(0,o.jsx)(ee.A,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},c))};var Ae;!function(e){e.AUDIENCE_ALL="all",e.AUDIENCE_TAG="tag",e.AUDIENCE_GROUP="group",e.AUDIENCE_EVENT="event"}(Ae||(Ae={}));const fe={root:`${X}-layer-audience-root`,title:`${X}-layer-title`,content:`${X}-layer-content`,message:`${X}-layer-audience-message`,autocomplete:`${X}-layer-audience-autocomplete`},ve=(0,A.Ay)(S.A,{name:X,slot:"LayerAudienceRoot"})((()=>({}))),Oe=a.forwardRef(((e,t)=>{const{className:s,onClose:i,onSave:r,defaultValue:u=(Ae.AUDIENCE_TAG?[]:null),TextFieldProps:p={variant:"outlined",label:(0,o.jsx)(h.A,{id:"ui.composer.layer.audience.tags.label",defaultMessage:"ui.composer.layer.audience.tags.label"})}}=e,b=(0,n.__rest)(e,["className","onClose","onSave","defaultValue","TextFieldProps"]),[A,f]=(0,a.useState)(!1),[v,O]=(0,a.useState)(null===u||0===u.length?Ae.AUDIENCE_ALL:u&&Object.prototype.hasOwnProperty.call(u,"recurring")?Ae.AUDIENCE_EVENT:u&&Object.prototype.hasOwnProperty.call(u,"managed_by")?Ae.AUDIENCE_GROUP:Ae.AUDIENCE_TAG),[x,y]=(0,a.useState)(u||void 0),{scAddressingTags:C}=function({fetch:e=!1}){const[t,s]=(0,a.useState)([]),[n,o]=(0,a.useState)(!1),i=(0,g.X1)(),r=(0,m.Sw)(),u=(0,a.useMemo)((()=>()=>c.A.request({url:d.A.ComposerAddressingTagList.url(),method:d.A.ComposerAddressingTagList.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[]);return(0,a.useEffect)((()=>{!n&&e&&i.user&&r.features.includes(l.q.TAGGING)&&u().then((e=>{o(!0),s(e)}))}),[n,e,i.user,r.features]),{scAddressingTags:t}}({fetch:A}),{preferences:S,features:k}=(0,m.Sw)(),T=(0,a.useMemo)((()=>S&&k&&k.includes(l.q.TAGGING)&&k.includes(l.q.GROUPING)&&j.pS in S&&S[j.pS].value),[S,k]),M=(0,a.useMemo)((()=>S&&k&&k.includes(l.q.TAGGING)&&j.sv in S&&S[j.sv].value),[S,k]),R=(0,a.useCallback)((()=>{v===Ae.AUDIENCE_GROUP||v===Ae.AUDIENCE_EVENT?r(x):r((null==x?void 0:x.length)&&(null==x?void 0:x.length)>0?x:null)}),[x,r,v]),P=(0,a.useCallback)(((e,t)=>y(t)),[]),I=(0,a.useCallback)((e=>y(e)),[]),$=(0,a.useCallback)((e=>y(e)),[]),H=(0,a.useCallback)(((e,t)=>O(t)),[]),L=(0,a.useCallback)((()=>f(!0)),[]),Y=(0,a.useCallback)((()=>f(!1)),[]);return(0,o.jsxs)(ve,Object.assign({ref:t,className:K()(s,fe.root)},b,{children:[(0,o.jsxs)(E.A,Object.assign({className:fe.title},{children:[(0,o.jsx)(_.A,Object.assign({onClick:i},{children:(0,o.jsx)(N.A,{children:"arrow_back"})})),(0,o.jsx)(U.A,{children:(0,o.jsx)(h.A,{id:"ui.composer.layer.audience.title",defaultMessage:"ui.composer.layer.audience.title"})}),(0,o.jsx)(V.A,Object.assign({size:"small",color:"secondary",variant:"contained",onClick:R},{children:(0,o.jsx)(h.A,{id:"ui.composer.layer.save",defaultMessage:"ui.composer.layer.save"})}))]})),(0,o.jsxs)(w.A,Object.assign({className:fe.content},{children:[(0,o.jsxs)(B.A,Object.assign({value:v,onChange:H,"aria-label":"audience type"},{children:[(0,o.jsx)(G.A,{value:Ae.AUDIENCE_ALL,icon:(0,o.jsx)(N.A,{children:"public"}),label:(0,o.jsx)(h.A,{id:"ui.composer.layer.audience.all",defaultMessage:"ui.composer.layer.audience.all"})}),M&&(0,o.jsx)(G.A,{disabled:Boolean(null==x?void 0:x.length)&&!Object.prototype.hasOwnProperty.call(x,"recurring")||void 0!==x&&Boolean(!(null==x?void 0:x.length))&&v!==Ae.AUDIENCE_ALL||Boolean(0===(null==x?void 0:x.length))&&v===Ae.AUDIENCE_ALL&&Boolean(0!==(null==u?void 0:u.length)),value:Ae.AUDIENCE_EVENT,icon:(0,o.jsx)(N.A,{children:"CalendarIcon"}),label:(0,o.jsx)(h.A,{id:"ui.composer.layer.audience.event",defaultMessage:"ui.composer.layer.audience.event"})}),T&&(0,o.jsx)(G.A,{disabled:Boolean(null==x?void 0:x.length)&&!Object.prototype.hasOwnProperty.call(x,"managed_by")||void 0!==x&&Boolean(!(null==x?void 0:x.length))&&v!==Ae.AUDIENCE_ALL||Boolean(0===(null==x?void 0:x.length))&&v===Ae.AUDIENCE_ALL&&Boolean(0!==(null==u?void 0:u.length)),value:Ae.AUDIENCE_GROUP,icon:(0,o.jsx)(N.A,{children:"groups"}),label:(0,o.jsx)(h.A,{id:"ui.composer.layer.audience.group",defaultMessage:"ui.composer.layer.audience.group"})}),(0,o.jsx)(G.A,{disabled:x&&Object.prototype.hasOwnProperty.call(x,"managed_by"),value:Ae.AUDIENCE_TAG,icon:(0,o.jsx)(N.A,{children:"label"}),label:(0,o.jsx)(h.A,{id:"ui.composer.layer.audience.tag",defaultMessage:"ui.composer.layer.audience.tag"})})]})),(0,o.jsxs)(U.A,Object.assign({className:fe.message},{children:[v===Ae.AUDIENCE_ALL&&(0,o.jsx)(h.A,{id:"ui.composer.layer.audience.all.message",defaultMessage:"ui.composer.audience.layer.all.message"}),v===Ae.AUDIENCE_EVENT&&(0,o.jsx)(h.A,{id:"ui.composer.layer.audience.event.message",defaultMessage:"ui.composer.audience.layer.event.message"}),v===Ae.AUDIENCE_GROUP&&(0,o.jsx)(h.A,{id:"ui.composer.layer.audience.group.message",defaultMessage:"ui.composer.audience.layer.group.message"}),v===Ae.AUDIENCE_TAG&&(0,o.jsx)(h.A,{id:"ui.composer.layer.audience.tag.message",defaultMessage:"ui.composer.audience.layer.tag.message"})]})),v===Ae.AUDIENCE_TAG&&(0,o.jsx)(z.A,{className:fe.autocomplete,open:A,onOpen:L,onClose:Y,multiple:!0,options:C||[],getOptionLabel:e=>e.name||"",value:x,selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,clearIcon:null,noOptionsText:(0,o.jsx)(h.A,{id:"ui.composer.layer.audience.tags.empty",defaultMessage:"ui.composer.layer.audience.tags.empty"}),onChange:P,isOptionEqualToValue:(e,t)=>t.id===e.id,renderTags:(e,t)=>e.map(((e,s)=>(0,o.jsx)(q.A,Object.assign({tag:e},t({index:s})),e.id))),renderOption:(e,t,{selected:s,inputValue:n})=>{const i=D()(t.name,n),l=F()(t.name,i);return(0,o.jsx)("li",Object.assign({},e,{children:(0,o.jsx)(q.A,{tag:t,label:(0,o.jsx)(a.Fragment,{children:l.map(((e,t)=>(0,o.jsx)("span",Object.assign({style:{fontWeight:e.highlight?700:400}},{children:e.text}),t)))})},t.id)}))},renderInput:e=>(0,o.jsx)(W.A,Object.assign({},e,p,{InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"addressing",endAdornment:(0,o.jsx)(a.Fragment,{children:e.InputProps.endAdornment})})}))}),v===Ae.AUDIENCE_GROUP&&(0,o.jsx)(ue,{onChange:$,defaultValue:u}),v===Ae.AUDIENCE_EVENT&&(0,o.jsx)(be,{onChange:I,defaultValue:u})]}))]}))}));var xe=s(60921),ye=s(5448),Ce=s(23922),Ee=s(81455),_e=s(206),Ne=s(18653),we=s(71543),Se=s(56071),ke=s(18011),Te=s(27885),Me=s(6442),Re=s(15901),Pe=s(75737),Ie=s(90760),$e=s(43940),He=s(71660),Fe=s(34887),Le=s(1806);const De={en:Fe.A,it:He.A},Ue={root:`${X}-content-poll-root`,generalError:`${X}-general-error`,title:`${X}-content-poll-title`,choices:`${X}-content-poll-choices`,choiceNew:`${X}-content-poll-choice-new`,metadata:`${X}-content-poll-metadata`},Ve=(0,A.Ay)(S.A,{name:X,slot:"ContentPollRoot"})((({theme:e})=>({}))),Be=(0,Te.YK)({choicePlaceholder:{id:"ui.composer.content.poll.choice.placeholder",defaultMessage:"ui.composer.content.poll.choice.placeholder"}}),Ge=(0,a.forwardRef)(((e,t)=>{var{children:s}=e,a=(0,n.__rest)(e,["children"]);return(0,o.jsx)(Ee.A,Object.assign({direction:"column",ref:t},a,{children:s}))})),ze={choice:""},We={title:"",multiple_choices:!1,expiration_at:null,choices:[Object.assign({},ze),Object.assign({},ze)]},qe=e=>{const t=(0,le.A)({props:e,name:X}),{className:s=null,value:n={poll:Object.assign({},We)},error:i={},disabled:l,onChange:r}=t,{titleError:c=null,error:d=null}=Object.assign({},i),u=(0,a.useMemo)((()=>n.poll?n.poll:Object.assign({},We)),[n,We]),m=(0,Me.A)(),g=(0,a.useCallback)((e=>{r(Object.assign(Object.assign({},n),{poll:Object.assign(Object.assign({},u),{title:e.target.value})}))}),[n,u]),p=(0,a.useCallback)((e=>{r(Object.assign(Object.assign({},n),{poll:Object.assign(Object.assign({},u),{choices:e})}))}),[n,u]),j=(0,a.useCallback)((e=>t=>{const s=[...u.choices];s[e].choice=t.target.value,r(Object.assign(Object.assign({},n),{poll:Object.assign(Object.assign({},u),{choices:s})}))}),[n,u]),b=(0,a.useCallback)((()=>{r(Object.assign(Object.assign({},n),{poll:Object.assign(Object.assign({},u),{choices:[...u.choices,Object.assign({},ze)]})}))}),[n,u]),A=(0,a.useCallback)((e=>t=>{const s=[...u.choices];s.splice(e,1),r(Object.assign(Object.assign({},n),{poll:Object.assign(Object.assign({},u),{choices:s})}))}),[n,u]),f=(0,a.useCallback)((e=>{r(Object.assign(Object.assign({},n),{poll:Object.assign(Object.assign({},u),{multiple_choices:e.target.checked})}))}),[n,u]),v=(0,a.useCallback)((e=>{r(Object.assign(Object.assign({},n),{poll:Object.assign(Object.assign({},u),{expiration_at:e})}))}),[n,u]),O=(0,a.useMemo)((()=>{const e=new Date;return e.setDate(e.getDate()+2),e}),[]);return(0,o.jsxs)(Ve,Object.assign({className:K()(Ue.root,s)},{children:[d&&(0,o.jsx)(U.A,Object.assign({className:Ue.generalError},{children:(0,o.jsx)(h.A,{id:`ui.composer.content.poll.error.${d}`,defaultMessage:`ui.composer.content.poll.error.${d}`})})),(0,o.jsx)(S.A,Object.assign({className:Ue.title},{children:(0,o.jsx)(W.A,{autoFocus:!0,disabled:l,label:(0,o.jsx)(h.A,{id:"ui.composer.content.poll.title",defaultMessage:"ui.composer.content.poll.title"}),variant:"outlined",value:u.title,onChange:g,fullWidth:!0,error:Boolean(c),helperText:c&&c,InputProps:{endAdornment:(0,o.jsx)(U.A,Object.assign({variant:"body2"},{children:160-u.title.length}))}})})),(0,o.jsx)(S.A,Object.assign({className:Ue.choices},{children:(0,o.jsx)(Re.ReactSortable,Object.assign({list:[...u.choices],setList:p,tag:Ge},{children:u.choices.map(((e,t)=>(0,o.jsx)(W.A,{placeholder:m.formatMessage(Be.choicePlaceholder),value:e.choice,onChange:j(t),variant:"outlined",disabled:l,InputProps:{startAdornment:(0,o.jsx)(_e.A,Object.assign({position:"start"},{children:(0,o.jsx)(N.A,{children:"drag"})})),endAdornment:(0,o.jsx)(_e.A,Object.assign({position:"end"},{children:(0,o.jsx)(Ne.A,Object.assign({title:u.choices.length<=2?(0,o.jsx)(h.A,{id:"ui.composer.content.poll.choice.delete.disabled",defaultMessage:"ui.composer.content.poll.choice.delete.disabled"}):(0,o.jsx)(h.A,{id:"ui.composer.content.poll.choice.delete",defaultMessage:"ui.composer.content.poll.choice.delete"})},{children:(0,o.jsx)("span",{children:(0,o.jsx)(_.A,Object.assign({onClick:A(t),disabled:u.choices.length<=2,edge:"end"},{children:(0,o.jsx)(N.A,{children:"delete"})}))})}))}))}},t)))}))})),(0,o.jsx)(S.A,Object.assign({className:Ue.choiceNew},{children:(0,o.jsxs)(V.A,Object.assign({color:"inherit",variant:"text",onClick:b},{children:[(0,o.jsx)(N.A,{children:"add"}),(0,o.jsx)(h.A,{id:"ui.composer.content.poll.choice.add",defaultMessage:"ui.composer.choice.add"})]}))})),(0,o.jsx)(we.A,{}),(0,o.jsxs)(Ee.A,Object.assign({className:Ue.metadata},{children:[(0,o.jsx)(Se.A,{control:(0,o.jsx)(ke.A,{checked:u.multiple_choices,onChange:f}),label:(0,o.jsx)(h.A,{id:"ui.composer.content.poll.multiple",defaultMessage:"ui.composer.content.poll.multiple"})}),(0,o.jsx)(Pe.$,Object.assign({dateAdapter:$e.h,adapterLocale:De[m.locale]},{children:(0,o.jsx)(Ie.l,{disabled:l,label:(0,o.jsx)(h.A,{id:"ui.composer.content.poll.expiration",defaultMessage:"ui.composer.content.poll.expiration"}),value:"string"==typeof u.expiration_at?(0,Le.A)(u.expiration_at):u.expiration_at,onChange:v,slotProps:{textField:{variant:"outlined"}},minDate:O})}))]}))]}))};var Ye=s(18590),Ke=s(37116),Xe=s(7751),Ze=s(33676);const Qe={root:`${X}-typeswitch-root`},Je=(0,A.Ay)(Xe.A,{name:X,slot:"TypeSwitchButtonGroupRoot"})((()=>({})));const et=function(e){const{preferences:t}=(0,m.Sw)(),s=(0,g.X1)(),i=(0,a.useMemo)((()=>t[j.jh].value||p.Xl(s.user)),[t,s.user]),l=(0,a.useMemo)((()=>t[j.am].value),[t]),r=(0,a.useMemo)((()=>t[j.o_].value),[t]),{className:c,onChange:d,value:u}=e,b=(0,n.__rest)(e,["className","onChange","value"]);(0,a.useEffect)((()=>{null===u&&d&&d(l?M:T)}),[u]);const A=(0,a.useCallback)(((e,t)=>{d&&d(t)}),[d]);return(0,o.jsxs)(Je,Object.assign({className:K()(Qe.root,c),onChange:A,exclusive:!0,value:u},b,{children:[l&&(0,o.jsx)(Ze.A,Object.assign({value:M},{children:(0,o.jsx)(h.A,{id:"ui.composer.typeSwitch.post",defaultMessage:"ui.composer.typeSwitch.post"})})),r&&(0,o.jsx)(Ze.A,Object.assign({value:T},{children:(0,o.jsx)(h.A,{id:"ui.composer.typeSwitch.discussion",defaultMessage:"ui.composer.typeSwitch.discussion"})})),l&&i&&(0,o.jsx)(Ze.A,Object.assign({value:R},{children:(0,o.jsx)(h.A,{id:"ui.composer.typeSwitch.poll",defaultMessage:"ui.composer.typeSwitch.poll"})}))]}))};var tt=s(75260);const st={root:`${X}-content-post-root`,generalError:`${X}-general-error`,medias:`${X}-content-post-medias`,editor:`${X}-content-post-editor`},nt=(0,A.Ay)(S.A,{name:X,slot:"ContentPostRoot"})((({theme:e})=>({}))),ot={categories:[],medias:[],html:"",addressing:[],event:null,group:null},at=e=>{const{className:t=null,value:s=Object.assign({},ot),error:n={},disabled:i=!1,onChange:l,EditorProps:r={}}=e,{error:c=null}=Object.assign({},n),d=(0,a.useRef)();(0,a.useEffect)((()=>{d&&d.current&&d.current.focus()}),[d]);const u=(0,a.useCallback)((e=>{l(Object.assign(Object.assign({},s),{html:e}))}),[s]);return(0,o.jsxs)(nt,Object.assign({className:K()(st.root,t)},{children:[c&&(0,o.jsx)(U.A,Object.assign({className:st.generalError},{children:(0,o.jsx)(h.A,{id:`ui.composer.error.${c}`,defaultMessage:`ui.composer.error.${c}`})})),(0,o.jsx)(tt.A,Object.assign({ref:d},r,{editable:!i,className:st.editor,onChange:u,defaultValue:s.html}))]}))};var it=s(71113);const lt={root:`${X}-layer-category-root`,title:`${X}-layer-title`,content:`${X}-layer-content`},rt=(0,A.Ay)(S.A,{name:X,slot:"LayerCategoryRoot"})((()=>({}))),ct=a.forwardRef(((e,t)=>{const{className:s,onClose:i,onSave:l,defaultValue:r=[]}=e,c=(0,n.__rest)(e,["className","onClose","onSave","defaultValue"]),[d,u]=(0,a.useState)(r),m=(0,g.X1)(),j=(0,a.useCallback)((()=>l(d)),[d,l]),b=(0,a.useCallback)((e=>u(e)),[]);return(0,o.jsxs)(rt,Object.assign({ref:t,className:K()(s,lt.root)},c,{children:[(0,o.jsxs)(E.A,Object.assign({className:lt.title},{children:[(0,o.jsx)(_.A,Object.assign({onClick:i},{children:(0,o.jsx)(N.A,{children:"arrow_back"})})),(0,o.jsx)(U.A,{children:(0,o.jsx)(h.A,{id:"ui.composer.layer.category.title",defaultMessage:"ui.composer.layer.category.title"})}),(0,o.jsx)(V.A,Object.assign({size:"small",color:"secondary",variant:"contained",onClick:j},{children:(0,o.jsx)(h.A,{id:"ui.composer.layer.save",defaultMessage:"ui.composer.layer.save"})}))]})),(0,o.jsx)(w.A,Object.assign({className:lt.content},{children:(0,o.jsx)(it.A,Object.assign({multiple:!0,onChange:b,defaultValue:r},!p.Xl(m.user)&&{endpointQueryParams:{can_create_content:!0}}))}))]}))}));var dt=s(22426);const ut={root:`${X}-layer-location-root`,title:`${X}-layer-title`,content:`${X}-layer-content`},mt=(0,A.Ay)(S.A,{name:X,slot:"LayerLocationRoot"})((()=>({}))),gt=a.forwardRef(((e,t)=>{const{className:s,onClose:i,onSave:l,defaultValue:r=null}=e,c=(0,n.__rest)(e,["className","onClose","onSave","defaultValue"]),[d,u]=(0,a.useState)(r),m=(0,a.useCallback)((()=>l(d)),[d,l]),g=(0,a.useCallback)((e=>u(e)),[]);return(0,o.jsxs)(mt,Object.assign({ref:t,className:K()(s,ut.root)},c,{children:[(0,o.jsxs)(E.A,Object.assign({className:ut.title},{children:[(0,o.jsx)(_.A,Object.assign({onClick:i},{children:(0,o.jsx)(N.A,{children:"arrow_back"})})),(0,o.jsx)(U.A,{children:(0,o.jsx)(h.A,{id:"ui.composer.layer.location.title",defaultMessage:"ui.composer.layer.location.title"})}),(0,o.jsx)(V.A,Object.assign({size:"small",color:"secondary",variant:"contained",onClick:m},{children:(0,o.jsx)(h.A,{id:"ui.composer.layer.save",defaultMessage:"ui.composer.layer.save"})}))]})),(0,o.jsx)(w.A,Object.assign({className:ut.content},{children:(0,o.jsx)(dt.A,{onChange:g,defaultValue:d||""})}))]}))}));var pt=s(53545);const jt={root:`${X}-content-discussion-root`,generalError:`${X}-general-error`,title:`${X}-content-discussion-title`,medias:`${X}-content-discussion-medias`,editor:`${X}-content-discussion-editor`},ht=(0,A.Ay)(S.A,{name:X,slot:"ContentDiscussionRoot"})((({theme:e})=>({}))),bt={title:"",categories:[],group:null,event:null,medias:[],html:"",addressing:[]},At=e=>{const{className:t=null,value:s=Object.assign({},bt),defaultInitialMaxHeightContentEditor:n=Z,defaultExtraSpaceContentEditor:i=Q,isContentSwitchButtonVisible:l=!0,error:r={},disabled:c=!1,onChange:d,EditorProps:u={}}=e,{titleError:m=null,error:g=null}=Object.assign({},r),p=(0,a.useRef)(null),[j,b]=(0,a.useState)(n+(l?0:45)),A=(0,Me.A)(),f=(0,O.A)(),v=(0,x.A)(f.breakpoints.down("md")),y=(0,a.useMemo)((()=>(0,Ce.O)()),[]),C=(0,a.useCallback)((e=>{d(Object.assign(Object.assign({},s),{title:e.target.value}))}),[s]),E=(0,a.useCallback)((e=>{("Enter"===e.key||s.title.length>P&&["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Delete","Backspace","Shift","Home","End"].indexOf(e.key)<0)&&e.preventDefault()}),[s]),_=(0,a.useCallback)((e=>{d(Object.assign(Object.assign({},s),{html:e}))}),[s]),N=(0,a.useCallback)((()=>{if(p.current)if(v){const e=p.current.getBoundingClientRect(),t=i+e.height+(y?30:0)-(l?0:45);b(`calc(100vh - ${t}px)`)}else b(Z+(l?0:45)+"px")}),[v,p.current,b,y,l]);return(0,a.useEffect)((()=>{N()}),[s,l,N,v]),(0,o.jsxs)(ht,Object.assign({className:K()(jt.root,t)},{children:[g&&(0,o.jsx)(U.A,Object.assign({className:jt.generalError},{children:(0,o.jsx)(h.A,{id:`ui.composer.error.${g}`,defaultMessage:`ui.composer.error.${g}`})})),(0,o.jsx)(W.A,{className:jt.title,ref:p,placeholder:A.formatMessage({id:"ui.composer.content.discussion.title.label",defaultMessage:"ui.composer.content.discussion.title.label"}),autoFocus:!0,fullWidth:!0,variant:"outlined",value:s.title,onChange:C,onKeyDown:E,multiline:!0,InputProps:{endAdornment:(0,o.jsx)(U.A,Object.assign({variant:"body2"},{children:P-s.title.length}))},error:Boolean(m),helperText:m,disabled:c}),(0,o.jsx)(S.A,Object.assign({sx:{[`& .${pt.H}-content`]:{maxHeight:`${j} !important`}}},{children:(0,o.jsx)(tt.A,Object.assign({},u,{editable:!c,className:jt.editor,onChange:_,defaultValue:s.html}))}))]}))};var ft=s(35488),vt=s(13470),Ot=s(4527),xt=s(44744);const yt={root:`${X}-attributes-root`},Ct=(0,A.Ay)(S.A,{name:X,slot:"AttributesRoot"})((()=>({}))),Et=e=>{var t,s,n,i;const{className:l=null,value:r=null,onChange:c=null,onClick:d=null}=e,u=(0,a.useCallback)((e=>()=>{c&&c(Object.assign(Object.assign({},r),{categories:r.categories.filter((t=>t.id!==e))}))}),[r,c]),m=(0,a.useCallback)((()=>{d&&d("categories")}),[d]),g=(0,a.useCallback)((()=>{c&&c(Object.assign(Object.assign({},r),{event:null}))}),[r,c]),p=(0,a.useCallback)((()=>{d&&d("event")}),[d]),j=(0,a.useCallback)((()=>{c&&c(Object.assign(Object.assign({},r),{group:null}))}),[r,c]),h=(0,a.useCallback)((()=>{d&&d("group")}),[d]),b=(0,a.useCallback)((e=>()=>{c&&c(Object.assign(Object.assign({},r),{addressing:r.addressing.filter((t=>t.id!==e))}))}),[r,c]),A=(0,a.useCallback)((()=>{d&&d("addressing")}),[d]),f=(0,a.useCallback)((()=>{c&&c(Object.assign(Object.assign({},r),{location:null}))}),[r,c]),v=(0,a.useCallback)((()=>{d&&d("location")}),[d]);return(0,o.jsxs)(Ct,Object.assign({className:K()(yt.root,l)},{children:[(null===(t=null==r?void 0:r.categories)||void 0===t?void 0:t.length)>0&&(null==r?void 0:r.categories.map((e=>(0,o.jsx)(xt.A,{label:e.name,onDelete:u(e.id),icon:(0,o.jsx)(N.A,{children:"category"}),onClick:m},e.id)))),(null==r?void 0:r.group)&&(0,o.jsx)(xt.A,{label:null==r?void 0:r.group.name,onDelete:j,icon:(0,o.jsx)(N.A,{children:"groups"}),onClick:h,disabled:!(null===(s=null==r?void 0:r.group)||void 0===s?void 0:s.subscription_status)},null==r?void 0:r.group.id),(null==r?void 0:r.event)&&(0,o.jsx)(xt.A,{label:null==r?void 0:r.event.name,onDelete:g,icon:(0,o.jsx)(N.A,{children:"CalendarIcon"}),onClick:p,disabled:!(null===(n=null==r?void 0:r.event)||void 0===n?void 0:n.subscription_status)},null==r?void 0:r.event.id),(null===(i=null==r?void 0:r.addressing)||void 0===i?void 0:i.length)>0&&(null==r?void 0:r.addressing.map((e=>(0,o.jsx)(q.A,{tag:e,onDelete:b(e.id),icon:(0,o.jsx)(N.A,{children:"label"}),onClick:A},e.id)))),(null==r?void 0:r.location)&&(0,o.jsx)(xt.A,{icon:(0,o.jsx)(N.A,{children:"add_location_alt"}),label:null==r?void 0:r.location.location,onDelete:f,onClick:v})]}))};var _t=s(73785);const Nt={root:`${X}-skeleton-root`,title:`${X}-title`,avatar:`${X}-avatar`,content:`${X}-content`,actions:`${X}-actions`},wt=(0,A.Ay)(S.A,{name:X,slot:"SkeletonRoot"})((()=>({})));function St(){return(0,o.jsx)(wt,Object.assign({className:Nt.root},{children:(0,o.jsx)(_t.A,{sx:{height:190},animation:"wave",variant:"rectangular"})}))}var kt=s(28820),Tt=s(36870),Mt=s(37211),Rt=s(82241);const Pt={root:`${X}-layer-close-root`,title:`${X}-layer-title`,content:`${X}-layer-content`},It=(0,A.Ay)(S.A,{name:X,slot:"LayerCloseRoot"})((()=>({}))),$t=a.forwardRef(((e,t)=>{const{className:s,onClose:a,onSave:i,defaultValue:l=[]}=e,r=(0,n.__rest)(e,["className","onClose","onSave","defaultValue"]);return(0,o.jsxs)(It,Object.assign({ref:t,className:K()(s,Pt.root)},r,{children:[(0,o.jsxs)(E.A,Object.assign({className:Pt.title},{children:[(0,o.jsx)(_.A,Object.assign({onClick:a},{children:(0,o.jsx)(N.A,{children:"arrow_back"})})),(0,o.jsx)(U.A,{children:(0,o.jsx)(h.A,{id:"ui.composer.layer.close.title",defaultMessage:"ui.composer.layer.close.title"})})]})),(0,o.jsxs)(w.A,Object.assign({className:Pt.content},{children:[(0,o.jsx)(U.A,{children:(0,o.jsx)(h.A,{id:"ui.composer.layer.close.text",defaultMessage:"ui.composer.layer.close.text"})}),(0,o.jsxs)(kt.A,{children:[(0,o.jsx)(Tt.Ay,{children:(0,o.jsx)(Mt.A,Object.assign({onClick:a},{children:(0,o.jsx)(Rt.A,{primary:(0,o.jsx)(h.A,{id:"ui.composer.layer.close.no",defaultMessage:"ui.composer.layer.close.no"})})}))}),(0,o.jsx)(Tt.Ay,{children:(0,o.jsx)(Mt.A,Object.assign({onClick:i},{children:(0,o.jsx)(Rt.A,{primary:(0,o.jsx)(h.A,{id:"ui.composer.layer.close.yes",defaultMessage:"ui.composer.layer.close.yes"})})}))})]})]}))]}))}));var Ht=s(49993);const Ft=function(e){return(0,o.jsx)(Ht.A,Object.assign({},e,{onTouchMove:e=>{e.preventDefault()},style:{touchAction:"none"}}))};var Lt=!1;if("undefined"!=typeof window){var Dt={get passive(){Lt=!0}};window.addEventListener("testPassive",null,Dt),window.removeEventListener("testPassive",null,Dt)}var Ut="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),Vt=[],Bt=!1,Gt=void 0,zt=void 0,Wt=void 0,qt=function(e){return Vt.some((function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))}))},Yt=function(e){var t=e||window.event;return!!qt(t.target)||(t.touches.length>1||(t.preventDefault&&t.preventDefault(),!1))},Kt=function(){void 0!==Wt&&(document.body.style.paddingRight=Wt,Wt=void 0),void 0!==Gt&&(document.body.style.overflow=Gt,Gt=void 0)},Xt=function(){if(void 0!==zt){var e=-parseInt(document.body.style.top,10),t=-parseInt(document.body.style.left,10);document.body.style.position=zt.position,document.body.style.top=zt.top,document.body.style.left=zt.left,window.scrollTo(t,e),zt=void 0}};const Zt=(0,a.forwardRef)((function(e,t){return(0,o.jsx)(b.A,Object.assign({ref:t},e))})),Qt={root:`${X}-root`,ios:`${X}-ios`,title:`${X}-title`,types:`${X}-types`,content:`${X}-content`,attributes:`${X}-attributes`,medias:`${X}-medias`,actions:`${X}-actions`,layerTransitionRoot:`${X}-layer-transition-root`},Jt=(0,A.Ay)(f.A,{name:X,slot:"Root"})((()=>({}))),es=(0,A.Ay)(v.A,{name:X,slot:"LayerTransitionRoot"})((({theme:e})=>({}))),ts={id:null,type:null,title:"",titleError:null,html:"",htmlError:null,categories:[],group:null,event:null,categoriesError:null,groupsError:null,addressing:null,addressingError:null,medias:[],poll:null,location:null,error:null},ss=(e,t)=>{switch(t.type){case"reset":return Object.assign(Object.assign({},ts),{key:(0,xe.yT)()});case"resetEventFeed":return Object.assign(Object.assign({},ts),{event:e.event,key:(0,xe.yT)()});case"resetGroupFeed":return Object.assign(Object.assign({},ts),{group:e.group,key:(0,xe.yT)()});case"resetCategoryFeed":return Object.assign(Object.assign({},ts),{categories:e.categories,key:(0,xe.yT)()});case"multiple":return Object.assign(Object.assign({},e),t.value);default:return Object.assign(Object.assign({},e),{[t.type]:t.value})}};const ns=function(e){const t=(0,le.A)({props:e,name:X}),{feedObjectId:s=null,feedObjectType:b=null,feedObject:A=null,defaultValue:f={},mediaObjectTypes:v=[ft.A,vt.A,Ot.A],EditorProps:T={},onClose:M=null,onSuccess:H=null,feedType:F}=t,L=(0,n.__rest)(t,["feedObjectId","feedObjectType","feedObject","defaultValue","mediaObjectTypes","EditorProps","onClose","onSuccess","feedType"]),{preferences:D,features:U}=(0,m.Sw)(),V=(0,g.X1)(),{enqueueSnackbar:B}=(0,Ye.dh)(),G=(0,O.A)(),z=(0,x.A)(G.breakpoints.down("md"),{noSsr:(0,ye.Nh)()}),[W,q]=(0,a.useState)(!1),[Y,Z]=(0,a.useState)(),[Q,J]=(0,a.useReducer)(ss,Object.assign(Object.assign(Object.assign({},ts),f),{key:(0,xe.yT)()})),{key:ee,id:te,type:se,title:ne,titleError:oe,html:ae,categories:ie,event:re,group:ce,addressing:de,audience:ue,medias:me,poll:ge,pollError:pe,location:je,error:he}=Q,be=e=>{e.type===i.Z.POST||(e.type,i.Z.DISCUSSION),A.author.id===V.user.id?(J({type:"multiple",value:{id:e.id,type:e.poll?R:A.type,title:e.title,html:e.html,categories:e.categories,event:e.event,group:e.group,addressing:e.addressing,medias:e.medias,poll:e.poll,location:e.location}}),ve(!1)):_e(!0)},Ae=(0,a.useMemo)((()=>Boolean(s&&b||A)),[s,b,A]),[fe,ve]=(0,a.useState)(Ae),[Ee,_e]=(0,a.useState)(!1),Ne=(0,a.useRef)(),we=(0,a.useRef)(!1),Se=(0,a.useRef)(null),ke=(0,a.useRef)({medias:me});ke.current={medias:me};const Te=(0,a.useMemo)((()=>ge&&ge.title.length>0&&ge.title.length<P&&ge.choices.length>=2),[ge]),Me=(0,a.useMemo)((()=>!fe&&(se===i.Z.DISCUSSION&&ne.length>0&&ne.length<P||se===i.Z.POST&&((0,xe.QZ)(ae).length>0||me.length>0||Te)||se===R&&Te)),[fe,se,ne,ae,me,Te]),Re=(0,a.useMemo)((()=>(0,Ce.O)()),[]);(0,a.useEffect)((()=>{Ae&&(null===A?(ve(!0),c.A.request({url:d.A.FeedObject.url({type:b,id:s}),method:d.A.FeedObject.method}).then((e=>{be(e.data)})).catch((()=>{_e(!0)})).then((()=>ve(!1)))):be(A))}),[Ae]),(0,a.useEffect)((()=>{if(!we.current&&Me){we.current=!0;const e=e=>(e.preventDefault(),"");window.onbeforeunload=e}else we.current&&!Me&&(we.current=!1,window.onbeforeunload=null)}),[Q,Me]),(0,a.useEffect)((()=>{if(!Ne.current||!Re)return;const e=e=>{Se.current=e.touches[0].clientY},t=e=>{const t=e.touches[0].clientY,s=t-Se.current;Se.current=t,s>0&&Ne.current.focus()};return Ne.current.addEventListener("touchstart",e),Ne.current.addEventListener("touchmove",t),()=>{var s,n;null===(s=Ne.current)||void 0===s||s.removeEventListener("touchstart",e),null===(n=Ne.current)||void 0===n||n.removeEventListener("touchmove",t)}}),[Ne.current,Re]);const Pe=(0,a.useCallback)((e=>Z(e)),[]),Ie=(0,a.useCallback)((()=>Z(null)),[]),$e=(0,a.useCallback)((e=>{J({type:"type",value:e})}),[]),He=(0,a.useCallback)((e=>{J({type:"multiple",value:Object.assign(Object.assign({},e),{pollError:e.poll.title.length>P?{titleError:(0,o.jsx)(h.A,{id:"ui.composer.title.error.maxlength",defaultMessage:"ui.composer.title.error.maxlength"})}:null})})}),[]),Fe=(0,a.useCallback)((e=>{J({type:"multiple",value:Object.assign(Object.assign({},e),{titleError:e.title.length>P?(0,o.jsx)(h.A,{id:"ui.composer.title.error.maxlength",defaultMessage:"ui.composer.title.error.maxlength"}):null})})}),[]),Le=(0,a.useCallback)((e=>{J({type:"multiple",value:Object.assign({},e)})}),[]),De=(0,a.useCallback)((e=>{J({type:"categories",value:e}),Z(null)}),[]),Ue=(0,a.useCallback)((()=>Pe({name:"category",Component:ct,ComponentProps:{onClose:Ie,onSave:De,defaultValue:ie}})),[Pe,Ie,De,ie]),Ve=(0,a.useCallback)((e=>{ce||e&&Object.prototype.hasOwnProperty.call(e,"emotional_image_position")?J({type:"group",value:e}):re||e&&Object.prototype.hasOwnProperty.call(e,"recurring")?J({type:"event",value:e}):J({type:"addressing",value:e}),Z(null)}),[ce]),Be=(0,a.useCallback)((()=>Pe({name:"audience",Component:Oe,ComponentProps:{onClose:Ie,onSave:Ve,defaultValue:ce||de&&Object.prototype.hasOwnProperty.call(de,"emotional_image_position")?ce:re||de&&Object.prototype.hasOwnProperty.call(de,"recurring")?re:de}})),[Pe,Ie,Ve,de,re,ce]),Ge=(0,a.useCallback)((e=>{J({type:"location",value:e}),Z(null)}),[]),ze=(0,a.useCallback)((()=>Pe({name:"location",Component:gt,ComponentProps:{onClose:Ie,onSave:Ge,defaultValue:je}})),[Pe,Ie,Ge,je]),We=(0,a.useCallback)((e=>{const t=[...e];J({type:"medias",value:[...e]}),ke.current.medias=t,Z(null)}),[]),Xe=(0,a.useCallback)((e=>{const t=[...ke.current.medias,e];J({type:"medias",value:t}),ke.current.medias=t}),[]),Ze=(0,a.useCallback)((e=>t=>{e.layerComponent&&Pe({name:e.name,Component:e.layerComponent,ComponentProps:{onClose:Ie,onSave:We,defaultValue:me}})}),[Pe,Ie,We,me]),Qe=(0,a.useCallback)((e=>{J({type:"multiple",value:Object.assign({},e)})}),[]),Je=(0,a.useCallback)((e=>{switch(e){case"categories":Ue();break;case"addressing":Be();break;case"location":ze()}}),[Ue,Be,ze]),tt=(0,a.useCallback)((e=>{if(e.preventDefault(),e.stopPropagation(),p.lT(V.user))return void B((0,o.jsx)(h.A,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3});const t=[...ie.map((e=>e.id)),...(0,Ke.F)(ae)],s={title:ne,text:ae,medias:me.map((e=>e.id)),categories:t.filter(((e,s)=>t.indexOf(e)===s))};(D[j.jh].value||p.Xl(V.user))&&Te&&(s.poll=ge),D[j.wW].value&&je&&(s.location=je),U.includes(l.q.TAGGING)&&null!==de&&(s.addressing=de.map((e=>e.id))),U.includes(l.q.TAGGING)&&U.includes(l.q.GROUPING)&&D[j.pS].value&&null!==ce&&(s.group=ce.id),U.includes(l.q.TAGGING)&&U.includes(l.q.EVENT)&&D[j.sv].value&&null!==re&&(s.event=re.id),q(!0);const n=se===R?i.Z.POST:se;let a=d.A.Composer.url({type:n}),m=d.A.Composer.method;Ae&&(a=d.A.ComposerEdit.url({type:b||n,id:te}),m=d.A.ComposerEdit.method),c.A.request({url:a,method:m,data:s}).then((e=>{H(e.data),we.current&&(window.onbeforeunload=null),F&&F===r.i.CATEGORY?J({type:"resetCategoryFeed"}):F===r.i.EVENT?J({type:"resetEventFeed"}):F===r.i.GROUP?J({type:"resetGroupFeed"}):J({type:"reset"})})).catch((e=>{J({type:"multiple",value:(0,u.zl)(e)})})).then((()=>q(!1)))}),[V.user,b,te,se,ne,ae,ie,re,ce,de,ue,me,ge,je,Te]),st=(0,a.useCallback)(((e,t)=>{we.current&&(window.onbeforeunload=null),t&&Me?Pe({name:"close",Component:$t,ComponentProps:{onClose:Ie,onSave:()=>{M&&M(e),Z(null),F&&F===r.i.CATEGORY?J({type:"resetCategoryFeed"}):F===r.i.EVENT?J({type:"resetEventFeed"}):F===r.i.GROUP?J({type:"resetGroupFeed"}):J({type:"reset"})}}}):(Ut&&(Vt.forEach((function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null})),Bt&&(document.removeEventListener("touchmove",Yt,Lt?{passive:!1}:void 0),Bt=!1),-1),Ut?Xt():Kt(),Vt=[],M&&M(e),Z(null),J({type:"reset"}))}),[M,Me,Ie]),nt=(0,a.useCallback)((e=>{Me?Pe({name:"close",Component:$t,ComponentProps:{onClose:Ie,onSave:st}}):st(e)}),[Me,Pe,Ie,st]),ot=(0,a.useMemo)((()=>-1!==me.findIndex((e=>e.type===I.cJ))),[me]),it=(0,a.useMemo)((()=>{if(Ae&&fe)return(0,o.jsx)(St,{});if(Ae&&Ee)return(0,o.jsxs)(y.A,Object.assign({severity:"error",onClose:st},{children:[(0,o.jsx)(C.A,{children:(0,o.jsx)(h.A,{id:"ui.composer.edit.error.title",defaultMessage:"ui.composer.edit.error.title"})}),(0,o.jsx)(h.A,{id:"ui.composer.edit.error.content",defaultMessage:"ui.composer.edit.error.content"})]}));switch(se){case R:return(0,o.jsx)(qe,{onChange:He,value:{html:ae,event:re,group:ce,addressing:de,medias:me,poll:ge,location:je},error:pe,disabled:W},ee);case i.Z.DISCUSSION:return(0,o.jsx)(At,{value:{title:ne,html:ae,categories:ie,event:re,group:ce,addressing:de,medias:me,poll:ge,location:je},error:{titleError:oe,error:he},onChange:Fe,disabled:W,isContentSwitchButtonVisible:!Me&&!Ae,EditorProps:Object.assign({toolbar:!0,uploadImage:!0},T)},ee);default:return(0,o.jsx)(at,{value:{html:ae,categories:ie,event:re,group:ce,addressing:de,medias:me,poll:ge,location:je},error:{error:he},onChange:Le,disabled:W,EditorProps:Object.assign({toolbar:!1,uploadImage:!1},T)},ee)}}),[ee,se,ne,ae,ie,re,ce,de,me,ge,pe,je,he,He,Le,W,Me,Ae]);return V.user||V.loading&&open?(0,o.jsxs)(Jt,Object.assign({ref:Ne,TransitionComponent:Zt,slots:{backdrop:Ft},onClose:st},L,{disableEscapeKeyDown:!0,className:K()(Qt.root,{[Qt.ios]:Re}),scroll:"body",fullScreen:z,tabIndex:-1},{children:[(0,o.jsxs)("form",Object.assign({onSubmit:tt,method:"post"},{children:[(0,o.jsxs)(E.A,Object.assign({className:Qt.title},{children:[(0,o.jsx)(_.A,Object.assign({onClick:nt},{children:(0,o.jsx)(N.A,{children:"close"})})),(0,o.jsx)($.A,Object.assign({size:"small",type:"submit",color:"secondary",variant:"contained",disabled:!Me,loading:W},{children:(0,o.jsx)(h.A,{id:"ui.composer.submit",defaultMessage:"ui.composer.submit"})}))]})),(0,o.jsxs)(w.A,Object.assign({className:Qt.content},{children:[(0,o.jsx)(Et,{value:{categories:ie,event:re,group:ce,addressing:de,location:je},className:Qt.attributes,onChange:Qe,onClick:Je}),it,me&&me.length>0&&(0,o.jsx)(S.A,Object.assign({className:Qt.medias},{children:v.map((e=>e.previewComponent?(0,o.jsx)(e.previewComponent,{value:me,onChange:We},e.name):e.displayComponent?(0,o.jsx)(e.displayComponent,{medias:me},e.name):void 0))}))]})),!Me&&!Ae&&(0,o.jsx)(et,{className:Qt.types,onChange:$e,size:"small",value:se}),(0,o.jsxs)(k.A,Object.assign({className:Qt.actions},{children:[v.filter((e=>null!==e.triggerButton)).map((e=>{const t=e.layerComponent?{onClick:Ze(e)}:{onAdd:Xe};return(0,o.jsx)(e.triggerButton,Object.assign({disabled:W||ot,color:me.filter(e.filter).length>0?"primary":"default"},t),e.name)})),(0,o.jsx)(_.A,Object.assign({disabled:W,onClick:Ue},{children:(0,o.jsx)(N.A,{children:"category"})})),(0,o.jsx)(_.A,Object.assign({disabled:W||!U.includes(l.q.TAGGING)||Boolean(null==A?void 0:A.group)||Boolean(null==A?void 0:A.event),onClick:Be},{children:!ce&&null===de||!re&&null===de||0===(null==de?void 0:de.length)?(0,o.jsx)(N.A,{children:"public"}):ce?(0,o.jsx)(N.A,{children:"groups"}):re?(0,o.jsx)(N.A,{children:"CalendarIcon"}):(0,o.jsx)(N.A,{children:"label"})})),D[j.wW].value&&(0,o.jsx)(_.A,Object.assign({disabled:W,onClick:ze,color:null!==je?"primary":"default"},{children:(0,o.jsx)(N.A,{children:"add_location_alt"})}))]}))]})),Y&&(0,o.jsx)(es,Object.assign({className:Qt.layerTransitionRoot,in:!0,container:Ne.current,direction:"left"},{children:(0,o.jsx)(Y.Component,Object.assign({},Y.ComponentProps))}))]})):null}},61183:function(e){var t,s;e.exports=(t={772:(e,t,s)=>{const n=s(826).remove,o=/[.*+?^${}()|[\]\\]/g,a=/[a-z0-9_]/i,i=/\s+/;e.exports=function(e,t,s){var l,r;r={insideWords:!1,findAllOccurrences:!1,requireMatchAll:!1},l=(l=s)||{},Object.keys(l).forEach((e=>{r[e]=!!l[e]})),s=r;const c=Array.from(e).map((e=>n(e)));let d=c.join("");return(t=n(t)).trim().split(i).filter((e=>e.length>0)).reduce(((e,t)=>{const n=t.length,i=!s.insideWords&&a.test(t[0])?"\\b":"",l=new RegExp(i+t.replace(o,"\\$&"),"i");let r,u;if(r=l.exec(d),s.requireMatchAll&&null===r)return d="",[];for(;r;){u=r.index;const t=n-c.slice(u,u+n).join("").length,o=u-c.slice(0,u).join("").length,a=[u+o,u+n+o+t];if(a[0]!==a[1]&&e.push(a),d=d.slice(0,u)+new Array(n+1).join(" ")+d.slice(u+n),!s.findAllOccurrences)break;r=l.exec(d)}return e}),[]).sort(((e,t)=>e[0]-t[0]))}},826:e=>{var t={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\u1ea4":"A","\u1eae":"A","\u1eb2":"A","\u1eb4":"A","\u1eb6":"A","\xc6":"AE","\u1ea6":"A","\u1eb0":"A","\u0202":"A","\xc7":"C","\u1e08":"C","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\u1ebe":"E","\u1e16":"E","\u1ec0":"E","\u1e14":"E","\u1e1c":"E","\u0206":"E","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\u1e2e":"I","\u020a":"I","\xd0":"D","\xd1":"N","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\u1ed0":"O","\u1e4c":"O","\u1e52":"O","\u020e":"O","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xdd":"Y","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\u1ea5":"a","\u1eaf":"a","\u1eb3":"a","\u1eb5":"a","\u1eb7":"a","\xe6":"ae","\u1ea7":"a","\u1eb1":"a","\u0203":"a","\xe7":"c","\u1e09":"c","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\u1ebf":"e","\u1e17":"e","\u1ec1":"e","\u1e15":"e","\u1e1d":"e","\u0207":"e","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\u1e2f":"i","\u020b":"i","\xf0":"d","\xf1":"n","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\u1ed1":"o","\u1e4d":"o","\u1e53":"o","\u020f":"o","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xfd":"y","\xff":"y","\u0100":"A","\u0101":"a","\u0102":"A","\u0103":"a","\u0104":"A","\u0105":"a","\u0106":"C","\u0107":"c","\u0108":"C","\u0109":"c","\u010a":"C","\u010b":"c","\u010c":"C","\u010d":"c","C\u0306":"C","c\u0306":"c","\u010e":"D","\u010f":"d","\u0110":"D","\u0111":"d","\u0112":"E","\u0113":"e","\u0114":"E","\u0115":"e","\u0116":"E","\u0117":"e","\u0118":"E","\u0119":"e","\u011a":"E","\u011b":"e","\u011c":"G","\u01f4":"G","\u011d":"g","\u01f5":"g","\u011e":"G","\u011f":"g","\u0120":"G","\u0121":"g","\u0122":"G","\u0123":"g","\u0124":"H","\u0125":"h","\u0126":"H","\u0127":"h","\u1e2a":"H","\u1e2b":"h","\u0128":"I","\u0129":"i","\u012a":"I","\u012b":"i","\u012c":"I","\u012d":"i","\u012e":"I","\u012f":"i","\u0130":"I","\u0131":"i","\u0132":"IJ","\u0133":"ij","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u1e30":"K","\u1e31":"k","K\u0306":"K","k\u0306":"k","\u0139":"L","\u013a":"l","\u013b":"L","\u013c":"l","\u013d":"L","\u013e":"l","\u013f":"L","\u0140":"l","\u0141":"l","\u0142":"l","\u1e3e":"M","\u1e3f":"m","M\u0306":"M","m\u0306":"m","\u0143":"N","\u0144":"n","\u0145":"N","\u0146":"n","\u0147":"N","\u0148":"n","\u0149":"n","N\u0306":"N","n\u0306":"n","\u014c":"O","\u014d":"o","\u014e":"O","\u014f":"o","\u0150":"O","\u0151":"o","\u0152":"OE","\u0153":"oe","P\u0306":"P","p\u0306":"p","\u0154":"R","\u0155":"r","\u0156":"R","\u0157":"r","\u0158":"R","\u0159":"r","R\u0306":"R","r\u0306":"r","\u0212":"R","\u0213":"r","\u015a":"S","\u015b":"s","\u015c":"S","\u015d":"s","\u015e":"S","\u0218":"S","\u0219":"s","\u015f":"s","\u0160":"S","\u0161":"s","\u0162":"T","\u0163":"t","\u021b":"t","\u021a":"T","\u0164":"T","\u0165":"t","\u0166":"T","\u0167":"t","T\u0306":"T","t\u0306":"t","\u0168":"U","\u0169":"u","\u016a":"U","\u016b":"u","\u016c":"U","\u016d":"u","\u016e":"U","\u016f":"u","\u0170":"U","\u0171":"u","\u0172":"U","\u0173":"u","\u0216":"U","\u0217":"u","V\u0306":"V","v\u0306":"v","\u0174":"W","\u0175":"w","\u1e82":"W","\u1e83":"w","X\u0306":"X","x\u0306":"x","\u0176":"Y","\u0177":"y","\u0178":"Y","Y\u0306":"Y","y\u0306":"y","\u0179":"Z","\u017a":"z","\u017b":"Z","\u017c":"z","\u017d":"Z","\u017e":"z","\u017f":"s","\u0192":"f","\u01a0":"O","\u01a1":"o","\u01af":"U","\u01b0":"u","\u01cd":"A","\u01ce":"a","\u01cf":"I","\u01d0":"i","\u01d1":"O","\u01d2":"o","\u01d3":"U","\u01d4":"u","\u01d5":"U","\u01d6":"u","\u01d7":"U","\u01d8":"u","\u01d9":"U","\u01da":"u","\u01db":"U","\u01dc":"u","\u1ee8":"U","\u1ee9":"u","\u1e78":"U","\u1e79":"u","\u01fa":"A","\u01fb":"a","\u01fc":"AE","\u01fd":"ae","\u01fe":"O","\u01ff":"o","\xde":"TH","\xfe":"th","\u1e54":"P","\u1e55":"p","\u1e64":"S","\u1e65":"s","X\u0301":"X","x\u0301":"x","\u0403":"\u0413","\u0453":"\u0433","\u040c":"\u041a","\u045c":"\u043a","A\u030b":"A","a\u030b":"a","E\u030b":"E","e\u030b":"e","I\u030b":"I","i\u030b":"i","\u01f8":"N","\u01f9":"n","\u1ed2":"O","\u1ed3":"o","\u1e50":"O","\u1e51":"o","\u1eea":"U","\u1eeb":"u","\u1e80":"W","\u1e81":"w","\u1ef2":"Y","\u1ef3":"y","\u0200":"A","\u0201":"a","\u0204":"E","\u0205":"e","\u0208":"I","\u0209":"i","\u020c":"O","\u020d":"o","\u0210":"R","\u0211":"r","\u0214":"U","\u0215":"u","B\u030c":"B","b\u030c":"b","\u010c\u0323":"C","\u010d\u0323":"c","\xca\u030c":"E","\xea\u030c":"e","F\u030c":"F","f\u030c":"f","\u01e6":"G","\u01e7":"g","\u021e":"H","\u021f":"h","J\u030c":"J","\u01f0":"j","\u01e8":"K","\u01e9":"k","M\u030c":"M","m\u030c":"m","P\u030c":"P","p\u030c":"p","Q\u030c":"Q","q\u030c":"q","\u0158\u0329":"R","\u0159\u0329":"r","\u1e66":"S","\u1e67":"s","V\u030c":"V","v\u030c":"v","W\u030c":"W","w\u030c":"w","X\u030c":"X","x\u030c":"x","Y\u030c":"Y","y\u030c":"y","A\u0327":"A","a\u0327":"a","B\u0327":"B","b\u0327":"b","\u1e10":"D","\u1e11":"d","\u0228":"E","\u0229":"e","\u0190\u0327":"E","\u025b\u0327":"e","\u1e28":"H","\u1e29":"h","I\u0327":"I","i\u0327":"i","\u0197\u0327":"I","\u0268\u0327":"i","M\u0327":"M","m\u0327":"m","O\u0327":"O","o\u0327":"o","Q\u0327":"Q","q\u0327":"q","U\u0327":"U","u\u0327":"u","X\u0327":"X","x\u0327":"x","Z\u0327":"Z","z\u0327":"z"},s=Object.keys(t).join("|"),n=new RegExp(s,"g"),o=new RegExp(s,""),a=function(e){return e.replace(n,(function(e){return t[e]}))};e.exports=a,e.exports.has=function(e){return!!e.match(o)},e.exports.remove=a}},s={},function e(n){var o=s[n];if(void 0!==o)return o.exports;var a=s[n]={exports:{}};return t[n](a,a.exports,e),a.exports}(772))},71113:(e,t,s)=>{"use strict";s.d(t,{A:()=>x});var n=s(31635),o=s(74848),a=s(96540),i=s(58065),l=s(9149),r=s.n(l),c=s(61183),d=s.n(c),u=s(11848),m=s(5696),g=s(44744),p=s(18011),j=s(43581),h=s(3246),b=s(83258),A=s(79197);const f="SCCategoryAutocomplete",v={root:`${f}-root`},O=(0,u.Ay)(m.A,{name:f,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({}))),x=e=>{const t=(0,A.A)({props:e,name:f}),{onChange:s,multiple:l=!1,defaultValue:c=(l?[]:null),limitCountCategories:u=0,checkboxSelect:m=!1,disabled:x=!1,endpointQueryParams:y={},TextFieldProps:C={variant:"outlined",label:(0,o.jsx)(i.A,{id:"ui.categoryAutocomplete.label",defaultMessage:"ui.categoryAutocomplete.label"})}}=t,E=(0,n.__rest)(t,["onChange","multiple","defaultValue","limitCountCategories","checkboxSelect","disabled","endpointQueryParams","TextFieldProps"]),[_,N]=(0,a.useState)(!1),[w,S]=(0,a.useState)("string"==typeof c?null:c),{categories:k,isLoading:T}=(0,b.A)({endpointQueryParams:y});(0,a.useEffect)((()=>{null!==w&&(null==s||s(w))}),[w]),(0,a.useEffect)((()=>{T||"string"!=typeof c||S(l?k.filter((e=>e.id===Number(c))):k.find((e=>e.id===Number(c))))}),[T]);return(0,o.jsx)(O,Object.assign({className:v.root,multiple:l,open:_,onOpen:()=>{N(!0)},onClose:()=>{N(!1)},filterSelectedOptions:!m,disableCloseOnSelect:m,options:k||[],getOptionLabel:e=>e.name||"",value:w,selectOnFocus:!0,clearOnBlur:!0,blurOnSelect:!0,handleHomeEndKeys:!0,clearIcon:null,disabled:x||T,noOptionsText:(0,o.jsx)(i.A,{id:"ui.categoryAutocomplete.empty",defaultMessage:"ui.categoryAutocomplete.empty"}),onChange:(e,t)=>{let s=null;if(l&&u>0){const[...e]=t;s=e.slice(-1*u)}else s=t;S(s)},isOptionEqualToValue:(e,t)=>t.id===e.id,renderTags:(e,t)=>e.map(((e,s)=>(0,o.jsx)(g.A,Object.assign({id:e.id,label:e.name,color:e.color},t({index:s})),e.id))),renderOption:(e,t,{selected:s,inputValue:n})=>{const i=d()(t.name,n),l=r()(t.name,i);return(0,o.jsxs)("li",Object.assign({},e,{children:[m&&(0,o.jsx)(p.A,{style:{marginRight:8},checked:s}),(0,o.jsx)(g.A,{label:(0,o.jsx)(a.Fragment,{children:l.map(((e,t)=>(0,o.jsx)("span",Object.assign({style:{fontWeight:e.highlight?700:400}},{children:e.text}),t)))})})]}))},renderInput:e=>(0,o.jsx)(j.A,Object.assign({},e,C,{margin:"dense",InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"categories",endAdornment:(0,o.jsxs)(a.Fragment,{children:[T?(0,o.jsx)(h.A,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},E))}},74859:(e,t,s)=>{"use strict";s.d(t,{A:()=>E,z:()=>C});var n=s(31635),o=s(74848),a=s(96540),i=s(11848),l=s(71194),r=s(1136),c=s(75933),d=s(47859),u=s(71543),m=s(40059),g=s(87467),p=s(57416),j=s(1275),h=s(21676);const b="SCTags",A=(0,i.Ay)(l.A,{name:`${b}`,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({cursor:"pointer"}))),f={paper:`${b}-paper`},v=(0,i.Ay)(r.A,{name:`${b}Popper`,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({zIndex:2,[`& .${f.paper}`]:{padding:"10px 5px"}}))),O=(0,i.Ay)(c.A,{name:`${b}List`,slot:"Root",overridesResolver:(e,t)=>t.root})({}),x=(0,i.Ay)(c.A,{name:`${b}Stack`,slot:"Root",overridesResolver:(e,t)=>t.root})({flexWrap:"wrap",justifyContent:"flex-start",alignItems:"flex-start","& > div:not(style)+:not(style)":{margin:0}}),y=(0,i.Ay)(l.A,{name:`${b}ItemList`,slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({padding:e.spacing(.2),textAlign:"center",color:e.palette.text.secondary})));var C;function E(e){const{tags:t=[],title:s=null,type:i=C.POPPER,onOpen:l=null,onClose:r=null,onClickTag:c=null,TagChipProps:b={}}=e,E=(0,n.__rest)(e,["tags","title","type","onOpen","onClose","onClickTag","TagChipProps"]),[_,N]=(0,a.useState)(!1);let w=(0,a.useRef)(null);function S(){w.current&&w.current.contains(event.target)||(N(!1),E.onClose&&E.onClose())}function k(){return(0,o.jsx)(o.Fragment,{children:s&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.A,Object.assign({sx:{padding:1,fontWeight:600}},{children:s})),(0,o.jsx)(u.A,{})]})})}const T=(0,a.useRef)(_);return a.useEffect((()=>{!0===T.current&&!1===_&&w.current.focus(),T.current=_}),[_]),(0,o.jsx)(o.Fragment,{children:t.length&&(0,o.jsx)(a.Fragment,{children:i===C.POPPER?(0,o.jsxs)(A,Object.assign({},E,{children:[(0,o.jsx)(m.A,Object.assign({ref:w,fontSize:"small",onClick:function(){N((e=>!e)),E.onOpen&&E.onOpen(!_)},"aria-haspopup":"true"},{children:"label"})),(0,o.jsx)(v,Object.assign({open:_,anchorEl:w.current,transition:!0,placement:"bottom-start",modifiers:[{name:"preventOverflow",enabled:!0}]},{children:e=>{var{TransitionProps:s,placement:a}=e,i=(0,n.__rest)(e,["TransitionProps","placement"]);return(0,o.jsx)(g.A,Object.assign({},s,{style:{transformOrigin:"bottom"===a?"center top":"center bottom"}},{children:(0,o.jsx)(p.A,Object.assign({variant:"outlined",className:f.paper},{children:(0,o.jsx)(j.x,Object.assign({onClickAway:S},{children:(0,o.jsxs)(o.Fragment,{children:[k(),(0,o.jsx)(x,Object.assign({spacing:2},i,{children:t.map((e=>(0,o.jsx)(y,{children:(0,o.jsx)(h.A,Object.assign({tag:e,onClick:c},b))},e.id)))}))]})}))}))}))}}))]})):(0,o.jsxs)(O,{children:[k(),(0,o.jsx)(x,Object.assign({spacing:1,direction:E.direction?E.direction:"column"},{children:t.map((e=>(0,o.jsx)(y,{children:(0,o.jsx)(h.A,Object.assign({tag:e,onClick:c},b))},e.id)))}))]})})})}!function(e){e.LIST="list",e.POPPER="popper"}(C||(C={}))},77334:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!(e instanceof HTMLElement))return document.documentElement;for(var t="absolute"===e.style.position,s=/(scroll|auto)/,n=e;n;){if(!n.parentNode)return e.ownerDocument||document.documentElement;var o=window.getComputedStyle(n),a=o.position,i=o.overflow,l=o["overflow-x"],r=o["overflow-y"];if("static"===a&&t)n=n.parentNode;else{if(s.test(i)&&s.test(l)&&s.test(r))return n;n=n.parentNode}}return e.ownerDocument||e.documentElement||document.documentElement}},83258:(e,t,s)=>{"use strict";s.d(t,{A:()=>m});var n=s(31635),o=s(96540),a=s(42269),i=s(29368),l=s(27202),r=s(28692),c=s(94520),d=s(86354);const u={categories:[],isLoading:!0},m=e=>{const{cacheStrategy:t=r.So.CACHE_FIRST,endpointQueryParams:s={}}=e||{},m=(0,d.hI)(),g=t!==r.So.NETWORK_ONLY?((e,t)=>{if(!e)return null;const s=e.map((e=>{const t=(0,d.fL)(e);return r.Ay.get(t)}));return s.filter((e=>!e)).length>0?null:(null==t?void 0:t.can_create_content)?s.filter((e=>!e.content_only_staff)):s})(r.Ay.get(m,null),s):null,[p,j]=(0,o.useState)(null!==g?{categories:g,isLoading:!1}:u),h=(e=i.A.CategoryList.url())=>(0,n.__awaiter)(void 0,void 0,void 0,(function*(){const t=yield l.A.getAllCategories(Object.assign({active:!0},s),{url:e});return t.next?t.results.concat(yield h(t.next)):t.results}));return(0,o.useEffect)((()=>{t===r.So.CACHE_FIRST&&g||h().then((e=>{j({categories:e,isLoading:!1}),r.Ay.set(m,e.map((e=>{const t=(0,d.fL)(e.id);return r.Ay.set(t,e),e.id})))})).catch((e=>{console.log(e),c.V.error(a.K,"Unable to retrieve categories")}))}),[]),p}},84497:(e,t,s)=>{"use strict";s.d(t,{A:()=>ns});var n=s(31635),o=s(74848),a=s(96540),i=s(11848),l=s(47859),r=s(42942),c=s(25292),d=s(71194),u=s(44744),m=s(40059),g=s(34069),p=s(27365),j=s(18653),h=s(75933),b=s(25430),A=s(17809),f=s(26763),v=s(6836),O=s(12486),x=s(74859),y=s(1489),C=s(71543),E=s(19546),_=s.n(E),N=s(42606),w=s(57473),S=s(92699);const k={root:`${S.H}-action-vote-root`,divider:`${S.H}-action-vote-divider`,button:`${S.H}-action-vote-button`,inline:`${S.H}-action-vote-inline`,viewAudienceButton:`${S.H}-action-vote-view-audience-button`},T=(0,i.Ay)(d.A,{name:S.H,slot:"ActionVoteRoot"})((()=>({})));const M=function(e){const{className:t=null,feedObjectId:s=null,feedObject:i=null,feedObjectType:l=null,withAudience:r=!0,withAction:c=!0,inlineAction:d=!1,onVoteAction:u=(()=>null)}=e,m=(0,n.__rest)(e,["className","feedObjectId","feedObject","feedObjectType","withAudience","withAction","inlineAction","onVoteAction"]);return(0,o.jsxs)(T,Object.assign({className:_()(k.root,t,{[k.inline]:d})},m,{children:[r&&(0,o.jsx)(w.A,{className:k.viewAudienceButton,contributionId:s,contributionType:l,contribution:i,variant:"text",size:"small"}),c&&(0,o.jsxs)(a.Fragment,{children:[!d&&r&&(0,o.jsx)(C.A,{className:k.divider}),(0,o.jsx)(N.A,{className:k.button,contributionId:s,contributionType:l,contribution:i,onVote:u})]})]}))};var R=s(27885),P=s(6442),I=s(73785),$=s(77577),H=s(20411),F=s(3341),L=s(83426),D=s(95754),U=s(74531);const V=(0,R.YK)({comments:{id:"ui.feedObject.comment.comments",defaultMessage:"ui.feedObject.comment.comments"},comment:{id:"ui.feedObject.comment.comment",defaultMessage:"ui.feedObject.comment.comment"}}),B={root:`${S.H}-action-comment-root`,divider:`${S.H}-action-comment-divider`,inline:`${S.H}-action-comment-inline`,button:`${S.H}-action-comment-button`,viewAudienceButton:`${S.H}-action-comment-view-audience-button`},G=(0,i.Ay)(d.A,{name:S.H,slot:"ActionCommentRoot"})((()=>({})));const z=function(e){const{className:t,feedObjectId:s,feedObject:i,feedObjectType:c=L.Z.POST,feedObjectTemplate:d=D.a,withAction:u=!0,withAudience:g=!0,inlineAction:p=!1,onViewCommentsAction:h,onCommentAction:b}=e,A=(0,n.__rest)(e,["className","feedObjectId","feedObject","feedObjectType","feedObjectTemplate","withAction","withAudience","inlineAction","onViewCommentsAction","onCommentAction"]),{obj:f,setObj:v}=(0,$.A)({id:s,feedObject:i,feedObjectType:c}),O=(0,H.I$)(),x=(0,P.A)();return(0,o.jsxs)(G,Object.assign({className:_()(B.root,t,{[B.inline]:p})},A,{children:[function(){let e;return g&&(e=f?(0,o.jsx)(o.Fragment,{children:h?(0,o.jsx)(r.A,Object.assign({variant:"text",size:"small",onClick:h,color:"inherit"},{children:`${x.formatMessage(V.comments,{total:f.comment_count})}`})):(0,o.jsx)(o.Fragment,{children:d===D.a.DETAIL?(0,o.jsx)(l.A,Object.assign({variant:"body2"},{children:`${x.formatMessage(V.comments,{total:f.comment_count})}`})):(0,o.jsx)(r.A,Object.assign({variant:"text",size:"small",component:F.A,to:O.url((0,U.lg)(f),(0,U.kB)(f)),classes:{root:B.viewAudienceButton}},{children:`${x.formatMessage(V.comments,{total:f.comment_count})}`}))})}):(0,o.jsx)(r.A,Object.assign({variant:"text",size:"small",disabled:!0,color:"inherit"},{children:(0,o.jsx)(I.A,{animation:"wave",height:18,width:50})}))),e}(),function(){let e={};return b||(e={component:F.A,to:O.url((0,U.lg)(f),(0,U.kB)(f))}),(0,o.jsx)(o.Fragment,{children:u&&(0,o.jsxs)(a.Fragment,{children:[!p&&g&&(0,o.jsx)(C.A,{className:B.divider}),(0,o.jsx)(j.A,Object.assign({title:`${x.formatMessage(V.comment)}`},{children:(0,o.jsx)(r.A,Object.assign({onClick:b,className:B.button},e,{children:(0,o.jsx)(m.A,{children:"chat_bubble_outline"})}))}))]})})}()]}))};var W=s(58065),q=s(58662),Y=s(28820),K=s(36870),X=s(43749),Z=s(29368),Q=s(13550),J=s(94520),ee=s(15906),te=s(29251),se=s(46248),ne=s(16799);const oe=function(e){const{id:t=null,feedObject:s=null,feedObjectType:i=(s?s.type:L.Z.POST),open:r=!1,onClose:c=null}=e,d=(0,n.__rest)(e,["id","feedObject","feedObjectType","open","onClose"]),{obj:u,setObj:m}=(0,$.A)({id:t,feedObject:s,feedObjectType:i}),[g,p]=(0,a.useState)(Boolean(t&&i||s)),[j,h]=(0,a.useState)([]),[b,A]=(0,a.useState)(t&&i?`${Z.A.ShareUsersList.url({type:i,id:t})}`:s&&i?`${Z.A.ShareUsersList.url({type:i,id:s.id})}`:null);function f(){p(!0),Q.A.request({url:b,method:Z.A.ShareUsersList.method}).then((e=>{const t=e.data;h([...j,...t.results]),p(!1),A(null!==t.next?t.next:null)})).catch((e=>{J.V.error(ee.d,e)}))}return(0,a.useEffect)((()=>{u&&b&&f()}),[`${u}`]),(0,o.jsx)(te.A,Object.assign({title:(0,o.jsx)(W.A,{defaultMessage:"ui.feedObject.sharesDialog.title",id:"ui.feedObject.sharesDialog.title"}),onClose:c,open:r},d,{children:g?(0,o.jsx)(se.A,{size:50}):(0,o.jsx)(X.A,Object.assign({dataLength:j.length,next:f,hasMoreNext:null!==b,loaderNext:(0,o.jsx)(se.A,{size:30}),height:400,endMessage:(0,o.jsx)(l.A,Object.assign({variant:"body2",align:"center",fontWeight:"bold"},{children:(0,o.jsx)(W.A,{id:"ui.feedObject.sharesDialog.noOtherLikes",defaultMessage:"ui.feedObject.sharesDialog.noOtherLikes"})}))},{children:(0,o.jsx)(Y.A,{children:j.slice(0,4).map(((e,t)=>(0,o.jsx)(K.Ay,{children:(0,o.jsx)(ne.A,{elevation:0,user:e},t)},e.id)))})}))}))};var ae=s(44675),ie=s(90508),le=s(25911),re=s(57873),ce=s(82241),de=s(51372),ue=s(50236),me=s(19249),ge=s(18590),pe=s(40221),je=s(60921),he=s(45284),be=s(75753),Ae=s(3338),fe=s(2877),ve=s(44817),Oe=s(89757),xe=s(41707);const ye=(0,R.YK)({shares:{id:"ui.feedObject.share.shares",defaultMessage:"ui.feedObject.share.shares"},share:{id:"ui.feedObject.share.share",defaultMessage:"ui.feedObject.share.share"}}),Ce={root:`${S.H}-action-share-root`,divider:`${S.H}-action-share-divider`,inline:`${S.H}-action-share-inline`,button:`${S.H}-action-share-button`,viewAudienceButton:`${S.H}-action-share-view-audience-button`},Ee=(0,i.Ay)(d.A,{name:S.H,slot:"ActionShareRoot"})((()=>({})));const _e=function(e){const{className:t=null,feedObjectId:s=null,feedObject:i=null,feedObjectType:l=L.Z.POST,withAction:c=!0,withAudience:u=!0,inlineAction:g=!1}=e,p=(0,n.__rest)(e,["className","feedObjectId","feedObject","feedObjectType","withAction","withAudience","inlineAction"]),h=(0,ae.A)(),b=(0,ie.A)(h.breakpoints.down("md")),{obj:A,setObj:f}=(0,$.A)({id:s,feedObject:i,feedObjectType:l}),[v,O]=(0,a.useState)(!1),[x,y]=(0,a.useState)(!1),[E,N]=(0,a.useState)(null),[w,S]=(0,a.useState)(!1),[k,T]=a.useState(null),M=(0,he.J_)(),R=(0,H.I$)(),F=(0,a.useContext)(be.ql),D=Ae.gS in F.preferences&&F.preferences[Ae.gS].value,V=Ae.FY in F.preferences&&F.preferences[Ae.FY].value,B=Ae.AF in F.preferences&&F.preferences[Ae.AF].value,G=(0,fe.X1)(),{enqueueSnackbar:z}=(0,ge.dh)(),Y=("undefined"!=typeof location&&location.origin?location.origin:"")+R.url((0,U.lg)(A),(0,U.kB)(A)),K=(0,a.useMemo)((()=>i.group&&i.group.privacy===pe.A.PUBLIC),[i.group]),X=(0,a.useMemo)((()=>!F.preferences[Ae.FP].value||ve.Xl(G.user)),[F,G.user]),te=(0,a.useMemo)((()=>F.preferences[Ae.g4].value),[F]),se=(0,P.A)(),ne=e=>{T(e.currentTarget)},_e=()=>{T(null)};function Ne(){S(!w)}function we(){O(!1),y(!1)}function Se(){f(Object.assign({},A,{share_count:A.share_count+1})),we()}const ke=(0,a.useMemo)((()=>()=>{let e=A.id;const t=A.medias.filter((e=>e.type===me.cJ));t.length&&(e=t[0].embed.metadata.id);const s=A.medias.some((e=>{var t;return(null===(t=e.embed)||void 0===t?void 0:t.embed_type)===me.TY}));return Q.A.request({url:Z.A.ComposerMediaCreate.url(),method:Z.A.ComposerMediaCreate.method,data:{type:me.cJ,[s?"event_object":"shared_object"]:e}}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))}),[A]);function Te(){return(0,o.jsxs)(d.A,{children:[(!i.group||K)&&(0,o.jsxs)(o.Fragment,{children:[X&&(0,o.jsxs)(le.A,Object.assign({onClick:()=>{return e=!1,void(G.user?ve.lT(G.user)?z((0,o.jsx)(W.A,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3}):(O(!0),ke().then((t=>{N(Object.assign({medias:[t]},e?{categories:A.categories}:{})),y(!0)})).catch((e=>{J.V.error(ee.d,e),O(!1)}))):M.settings.handleAnonymousAction());var e}},{children:[(0,o.jsx)(re.A,{children:(0,o.jsx)(m.A,{children:"redo"})}),(0,o.jsx)(ce.A,{primary:(0,o.jsx)(W.A,{id:"ui.feedObject.share.shareNow",defaultMessage:"ui.feedObject.share.shareNow"})})]})),(0,o.jsx)(o.Fragment,{children:te&&(0,o.jsxs)(o.Fragment,{children:[D&&(0,o.jsxs)(le.A,Object.assign({onClick:()=>window.open(Oe.$L+Y,"facebook-share-dialog","width=626,height=436")},{children:[(0,o.jsx)(re.A,{children:(0,o.jsx)(m.A,{children:"facebook"})}),(0,o.jsx)(ce.A,{primary:(0,o.jsx)(W.A,{id:"ui.feedObject.share.facebook",defaultMessage:"ui.feedObject.share.facebook"})})]})),V&&(0,o.jsxs)(le.A,Object.assign({onClick:()=>window.open(Oe.vM+Y,"x-share-dialog","width=626,height=436")},{children:[(0,o.jsx)(re.A,{children:(0,o.jsx)(m.A,{children:"twitter"})}),(0,o.jsx)(ce.A,{primary:(0,o.jsx)(W.A,{id:"ui.feedObject.share.x",defaultMessage:"ui.feedObject.share.x"})})]})),B&&(0,o.jsxs)(le.A,Object.assign({onClick:()=>window.open(Oe.HW+Y,"linkedin-share-dialog","width=626,height=436")},{children:[(0,o.jsx)(re.A,{children:(0,o.jsx)(m.A,{children:"linkedin"})}),(0,o.jsx)(ce.A,{primary:(0,o.jsx)(W.A,{id:"ui.feedObject.share.linkedin",defaultMessage:"ui.feedObject.share.linkedin"})})]}))]})})]}),(0,o.jsxs)(le.A,{children:[(0,o.jsx)(re.A,{children:(0,o.jsx)(m.A,{children:"link"})}),(0,o.jsx)(ce.A,{primary:(0,o.jsx)(W.A,{id:"ui.feedObject.share.permanentLink",defaultMessage:"ui.feedObject.share.permanentLink"}),onClick:()=>{(0,je.eM)(Y).then((()=>{z((0,o.jsx)(W.A,{id:"ui.common.permanentLinkCopied",defaultMessage:"ui.common.permanentLinkCopied"}),{variant:"success",autoHideDuration:3e3})}))}})]})]})}return(0,o.jsxs)(Ee,Object.assign({className:_()(Ce.root,t,{[Ce.inline]:g})},p,{children:[function(){const e=A.share_count;let t;return u&&(t=A?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.A,Object.assign({variant:"text",size:"small",onClick:Ne,disabled:e<1,classes:{root:Ce.viewAudienceButton}},{children:`${se.formatMessage(ye.shares,{total:e})}`})),w&&e>0&&(0,o.jsx)(oe,{feedObject:A,feedObjectType:A.type,open:w,onClose:Ne})]}):(0,o.jsx)(r.A,Object.assign({variant:"text",size:"small",disabled:!0,color:"inherit"},{children:(0,o.jsx)(I.A,{animation:"wave",height:18,width:50})}))),t}(),(0,o.jsx)(a.Fragment,{children:c&&(0,o.jsxs)(a.Fragment,{children:[!g&&u&&(0,o.jsx)(C.A,{className:Ce.divider}),(0,o.jsx)(j.A,Object.assign({title:`${se.formatMessage(ye.share)}`},{children:(0,o.jsx)(q.A,Object.assign({loading:v,onClick:ne,className:Ce.button},{children:(0,o.jsx)(m.A,{children:"share"})}))})),Boolean(k)&&(0,o.jsx)(o.Fragment,{children:b?(0,o.jsx)(ue.A,Object.assign({open:!0,onClick:_e,onClose:_e,onOpen:ne,anchor:"bottom",disableSwipeToOpen:!0},{children:Te()})):(0,o.jsx)(de.A,Object.assign({anchorEl:k,open:!0,onClose:_e,onClick:_e,slotProps:{paper:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"}},{children:Te()}))}),x&&(0,o.jsx)(xe.A,{open:!0,defaultValue:E,onClose:we,onSuccess:Se,maxWidth:"sm",fullWidth:!0})]})})]}))},Ne={root:`${S.H}-actions-root`,action:`${S.H}-actions-action`},we=(0,i.Ay)(y.Ay,{name:S.H,slot:"ActionsRoot"})((()=>({})));const Se=function(e){const{className:t,feedObject:s,feedObjectId:n=(null==s?void 0:s.id),feedObjectType:a=(null==s?void 0:s.type),feedObjectTemplate:i=D.a.PREVIEW,hideVoteAction:l=!1,hideShareAction:r=!1,hideCommentAction:c=!1,handleExpandActivities:d,VoteActionProps:u={},CommentActionProps:m={},ShareActionProps:g={}}=e,{obj:p}=(0,$.A)({id:n,feedObject:s,feedObjectType:a});if(!p)return null;const j=function(){let e=4;return r&&c?e=12:(c||c)&&(e=6),e}();return(0,o.jsxs)(we,Object.assign({container:!0,className:_()(Ne.root,t)},{children:[!l&&(0,o.jsx)(y.Ay,Object.assign({item:!0,xs:j,className:Ne.action},{children:(0,o.jsx)(M,Object.assign({feedObjectId:n||p.id,feedObject:p,feedObjectType:a||p.type},u))})),!c&&(0,o.jsx)(y.Ay,Object.assign({item:!0,xs:j,className:Ne.action},{children:(0,o.jsx)(z,Object.assign({feedObject:p,feedObjectType:a,feedObjectTemplate:i,onCommentAction:d},m))})),!r&&(0,o.jsx)(y.Ay,Object.assign({item:!0,xs:j,className:Ne.action},{children:(0,o.jsx)(_e,Object.assign({feedObject:p,feedObjectType:a,id:n},g))}))]}))};var ke=s(57156),Te=s(33623);const Me={root:`${S.H}-poll-object-choices-root`,label:`${S.H}-poll-object-choices-label`,vote:`${S.H}-poll-object-choices-vote`,progress:`${S.H}-poll-object-choices-progress`},Re=(0,i.Ay)(ke.A,{name:S.H,slot:"PollObjectChoicesRoot"})((()=>({})));function Pe(e){var{className:t}=e,s=(0,n.__rest)(e,["className"]);return(0,o.jsxs)(d.A,Object.assign({className:t},{children:[(0,o.jsx)(Te.A,Object.assign({variant:"determinate"},s)),(0,o.jsx)(l.A,Object.assign({variant:"body2",color:"text.secondary"},{children:`${Math.round(s.value)}%`}))]}))}const Ie=function(e){const{className:t=null,choiceObj:s=null,feedObject:a=null,vote:i=null,votes:r=null,isVoting:c=null,votable:d=null}=e,u=(0,n.__rest)(e,["className","choiceObj","feedObject","vote","votes","isVoting","votable"]),g=!a,p=(0,he.J_)(),j=(0,fe.X1)();return(0,o.jsxs)(Re,Object.assign({className:_()(Me.root,t)},u,{children:[(0,o.jsx)(l.A,Object.assign({className:Me.label},{children:s.choice})),(0,o.jsx)(Pe,{className:Me.progress,value:(h=s.vote_count,b=r,0===b?0:100*h/b)}),(0,o.jsx)(q.A,Object.assign({loading:c===s.id,variant:s.voted?"contained":"outlined",size:"small",disabled:g||null!==c||d,className:Me.vote,onClick:()=>{j.user?i(s):p.settings.handleAnonymousAction()}},{children:s.voted?(0,o.jsx)(m.A,{children:"check"}):(0,o.jsx)(W.A,{id:"ui.feedObject.poll.choice.vote",defaultMessage:"ui.feedObject.poll.choice.vote"})}))]}));var h,b},$e=(0,R.YK)({showPoll:{id:"ui.feedObject.poll.showPoll",defaultMessage:"ui.feedObject.poll.showPoll"},hidePoll:{id:"ui.feedObject.poll.hidePoll",defaultMessage:"ui.feedObject.poll.hidePoll"},expDate:{id:"ui.feedObject.poll.expDate",defaultMessage:"ui.feedObject.poll.expDate"},voters:{id:"ui.feedObject.poll.voters",defaultMessage:"ui.feedObject.poll.voters"},votes:{id:"ui.feedObject.poll.votes",defaultMessage:"ui.feedObject.poll.votes"}}),He={root:`${S.H}-poll-object-root`,voters:`${S.H}-poll-object-voters`,votes:`${S.H}-poll-object-votes`,toggleButton:`${S.H}-poll-object-toggle-button`,title:`${S.H}-poll-object-title`,expiration:`${S.H}-poll-object-expiration`,closed:`${S.H}-poll-object-closed`,expandIcon:`${S.H}-poll-object-expand-icon`,collapsedIcon:`${S.H}-poll-object-collapsed-icon`},Fe=(0,i.Ay)(ke.A,{name:S.H,slot:"PollObjectRoot"})((()=>({})));const Le=function(e){const{className:t,feedObject:s,pollObject:i,disabled:d,visible:u=!0,onChange:p,onToggleVisibility:j}=e,h=(0,n.__rest)(e,["className","feedObject","pollObject","disabled","visible","onChange","onToggleVisibility"]),b=(0,P.A)(),[f,v]=(0,a.useState)(i),[O,x]=(0,a.useState)(function(){const e=i.choices;let t=0;for(let s=0;s<e.length;s++)t+=e[s].vote_count;return t||0}()),[y,C]=(0,a.useState)(i.choices),[E,N]=(0,a.useState)(null),[w,S]=(0,a.useState)(!u),k=i.multiple_choices,T=i.closed;function M(e){N(e.id),Q.A.request({url:Z.A.PollVote.url({id:s.id,type:s.type}),method:Z.A.PollVote.method,data:{choice:e.id}}).then((t=>{e.voted?(e=>{const t=[...y].map((t=>Object.assign({},t,{voted:t.id!==e&&t.voted,vote_count:t.id===e&&t.vote_count>0?t.vote_count-1:t.vote_count})));C(t),p(t),x((e=>e-1))})(e.id):(e=>{const t=[...y];let s;k?(s=t.map((t=>Object.assign({},t,{voted:t.id===e||t.voted,vote_count:t.id===e?t.vote_count+1:t.vote_count}))),x((e=>e+1))):(s=t.map((t=>Object.assign({},t,{voted:t.id===e,vote_count:t.id===e?t.vote_count+1:t.vote_count>0&&t.voted?t.vote_count-1:t.vote_count}))),x(s.reduce(((e,t)=>e+t.vote_count),0))),C(s),p(s)})(e.id),N(null)})).catch((e=>{J.V.error(ee.d,e)}))}const R=(0,a.useMemo)((()=>()=>{j&&j(w),S((e=>!e))}),[S,j]);let I=(0,o.jsx)(o.Fragment,{});return i&&(I=(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(g.A,{title:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(r.A,Object.assign({className:He.toggleButton,onClick:R,"aria-expanded":w,endIcon:(0,o.jsx)(m.A,Object.assign({className:_()(He.expandIcon,{[He.collapsedIcon]:w})},{children:"arrow_upward"}))},{children:w?b.formatMessage($e.showPoll):b.formatMessage($e.hidePoll)}))})}),(0,o.jsx)(A.A,Object.assign({in:!w,timeout:"auto",unmountOnExit:!0},{children:(0,o.jsxs)(c.A,{children:[(0,o.jsx)(l.A,Object.assign({variant:"body1",className:He.title},{children:f.title})),f.expiration_at&&Date.parse(f.expiration_at)>=(new Date).getTime()&&(0,o.jsxs)(l.A,Object.assign({variant:"body2",className:He.expiration},{children:[`${b.formatMessage($e.expDate)}`,`${b.formatDate(Date.parse(f.expiration_at),{year:"numeric",month:"numeric",day:"numeric"})}`]})),f.closed&&(0,o.jsx)(l.A,Object.assign({variant:"body2",className:He.closed},{children:(0,o.jsx)(W.A,{id:"ui.feedObject.poll.closed",defaultMessage:"ui.feedObject.poll.closed"})})),(0,o.jsx)(Y.A,{children:y.map(((e,t)=>(0,o.jsx)(K.Ay,{children:(0,o.jsx)(Ie,{elevation:0,choiceObj:e,feedObject:d?null:s,votes:O,vote:M,isVoting:E,votable:T})},t)))}),k?(0,o.jsxs)("div",Object.assign({className:He.votes},{children:[(0,o.jsx)(m.A,{children:"list"}),(0,o.jsx)(l.A,{children:`${b.formatMessage($e.votes,{total:O})}`})]})):(0,o.jsxs)("div",Object.assign({className:He.voters},{children:[(0,o.jsx)(m.A,{children:"people_alt"}),(0,o.jsx)(l.A,{children:`${b.formatMessage($e.voters,{total:O})}`})]}))]})}))]})),(0,a.useEffect)((()=>{C(i.choices)}),[i.choices]),(0,o.jsx)(Fe,Object.assign({className:_()(He.root,t)},h,{children:I}))};var De=s(28692),Ue=s(42269),Ve=s(86354),Be=s(39840);const Ge={LOADING_NEXT:"_loading_next",LOADING_PREVIOUS:"_loading_previous",DATA_NEXT_LOADED:"_data_next_loaded",DATA_PREVIOUS_LOADED:"_data_previous_loaded",DATA_RELOAD:"_data_reload",DATA_RELOADED:"_data_reloaded"};function ze(e,t){switch(t.type){case Ge.LOADING_NEXT:return Object.assign(Object.assign({},e),{isLoadingNext:!0,isLoadingPrevious:!1});case Ge.LOADING_PREVIOUS:return Object.assign(Object.assign({},e),{isLoadingNext:!1,isLoadingPrevious:!0});case Ge.DATA_NEXT_LOADED:return Object.assign(Object.assign(Object.assign(Object.assign({},e),{page:t.payload.currentPage,contributors:t.payload.contributors,isLoadingNext:!1,componentLoaded:!0,next:t.payload.next}),t.payload.previous?{previous:t.payload.previous}:{}),t.payload.total?{total:t.payload.total}:{});case Ge.DATA_PREVIOUS_LOADED:return Object.assign(Object.assign({},e),{page:t.payload.currentPage,contributors:t.payload.contributors,isLoadingPrevious:!1,previous:t.payload.previous});case Ge.DATA_RELOAD:return Object.assign(Object.assign({},e),{next:t.payload.next,contributors:[],total:0,previous:null,reload:!0});case Ge.DATA_RELOADED:return Object.assign(Object.assign({},e),{componentLoaded:!1,reload:!1});default:throw new Error(`Unhandled type: ${t.type}`)}}function We(e){const{id:t,feedObject:s,feedObjectType:n,offset:o=0,pageSize:i=5,onChangePage:l,cacheStrategy:r=De.So.CACHE_FIRST}=e,c=(0,Be.A)(),{obj:d,setObj:u}=(0,$.A)({id:t,feedObject:s,feedObjectType:n}),m=d?d.id:null,g=()=>{const e=o?`&offset=${o}`:"",s=d?d.id:t,a=d?d.type:n;return`${Z.A.FeedObjectContributorsList.url({type:a,id:s})}?limit=${i}${e}`},[p,j]=(0,a.useReducer)(ze,{},(()=>function(e){const t=e.obj?(0,Ve.OQ)(e.obj.id,e.obj.type,e.next):null;let s={componentLoaded:!1,contributors:[],total:0,next:e.next,previous:null,isLoadingNext:!1,isLoadingPrevious:!1,page:e.offset/e.pageSize+1,reload:!1};if(t&&De.Ay.hasKey(t)&&e.cacheStrategy!==De.So.NETWORK_ONLY){const e=De.Ay.get(t);return Object.assign(Object.assign({},s),{total:e.count,next:e.next,previous:e.previous,contributors:e.results})}return s}({obj:d,offset:o,pageSize:i,next:g(),cacheStrategy:r}))),h=e=>{const t=new URLSearchParams(e),s=Object.fromEntries(t.entries());return(s.offset?parseInt(s.offset):0)/i+1},b=(e,t)=>A(e,!1).then((e=>{let s,n=h(p.next);if(t){s=p.contributors.slice(0,p.contributors.length-e.results.length).concat(e.results)}else{let t=p.contributors.slice(e.results.length,p.contributors.length);s=e.results.concat(t)}c.current&&j({type:t?Ge.DATA_NEXT_LOADED:Ge.DATA_PREVIOUS_LOADED,payload:Object.assign(Object.assign({page:n,contributors:s},t?{next:e.next}:{previous:e.previous}),{total:e.count})})})),A=(e,t=!0)=>{const s=(0,Ve.OQ)(d.id,d.type,e);return t&&De.Ay.hasKey(s)&&r!==De.So.NETWORK_ONLY?Promise.resolve(De.Ay.get(s)):Q.A.request({url:e,method:Z.A.Comments.method}).then((e=>e.status>=300?Promise.reject(e):(De.Ay.set(s,e.data),Promise.resolve(e.data))))};function f(){d&&p.next&&!p.isLoadingNext&&(j({type:Ge.LOADING_NEXT}),A(p.next).then((e=>{if(c.current){let t=h(p.next);j({type:Ge.DATA_NEXT_LOADED,payload:Object.assign({page:t,contributors:[...p.contributors,...e.results],next:e.next,total:e.count,componentLoaded:!0},o&&0===p.contributors.length?{previous:e.previous}:{})}),l&&l(t)}})).catch((e=>{J.V.error(Ue.K,e)})).then((()=>{c.current&&r===De.So.STALE_WHILE_REVALIDATE&&b(p.next,!0)})))}return(0,a.useEffect)((()=>{c.current&&p.componentLoaded&&Boolean(d)&&!p.reload&&j({type:Ge.DATA_RELOAD,payload:{next:g()}})}),[m,i,o,c]),(0,a.useEffect)((()=>{c.current&&p.componentLoaded&&p.reload&&!p.isLoadingNext&&!p.isLoadingPrevious&&(j({type:Ge.DATA_RELOADED}),f())}),[p.reload,c]),Object.assign(Object.assign({feedObject:d,setFeedObject:u},p),{pageSize:i,getNextPage:f,getPreviousPage:function(){d&&p.previous&&!p.isLoadingPrevious&&(j({type:Ge.LOADING_PREVIOUS}),A(p.previous).then((e=>{if(c.current){let t=h(p.previous);j({type:Ge.DATA_PREVIOUS_LOADED,payload:{page:t,contributors:[...e.results,...p.contributors],previous:e.previous}}),l&&l(t)}})).catch((e=>{J.V.error(Ue.K,e)})).then((()=>{r===De.So.STALE_WHILE_REVALIDATE&&b(p.next,!1)})))}})}var qe=s(25441),Ye=s(43029);const Ke={root:`${S.H}-contributors-skeleton-root`,btnParticipants:`${S.H}-btn-participants`},Xe=(0,i.Ay)(d.A,{name:S.H,slot:"ContributorsSkeletonRoot"})((()=>({})));function Ze(e){const{className:t=null,AvatarGroupSkeletonProps:s={}}=e,a=(0,n.__rest)(e,["className","AvatarGroupSkeletonProps"]);return(0,o.jsx)(Xe,Object.assign({className:_()(Ke.root,t)},a,{children:(0,o.jsxs)(r.A,Object.assign({variant:"text",disabled:!0,classes:{root:Ke.btnParticipants}},{children:[(0,o.jsx)(W.A,{id:"ui.feedObject.contributors.participants",defaultMessage:"ui.feedObject.contributors.participants"}),":",(0,o.jsx)(Ye.A,Object.assign({},e.AvatarGroupSkeletonProps))]}))}))}const Qe={root:`${S.H}-contributors-root`,avatarGroup:`${S.H}-contributors-avatarGroup`,btnParticipants:`${S.H}-contributors-btn-participants`},Je=(0,i.Ay)(d.A,{name:S.H,slot:"ContributorsRoot"})((()=>({})));const et=function(e){const{className:t=null,feedObjectId:s=null,feedObject:i=null,feedObjectType:c=null,ContributorsSkeletonProps:u={},cacheStrategy:m=De.So.CACHE_FIRST}=e,g=(0,n.__rest)(e,["className","feedObjectId","feedObject","feedObjectType","ContributorsSkeletonProps","cacheStrategy"]),j=We({id:s,feedObject:i,feedObjectType:c,pageSize:10,cacheStrategy:m}),[h,b]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{j.feedObject&&j.getNextPage()}),[j.feedObject]),j.feedObject?(0,o.jsx)(Je,Object.assign({className:_()(Qe.root,t)},g,{children:(0,o.jsx)(d.A,{children:j.isLoadingNext&&!h?(0,o.jsx)(Ze,Object.assign({},u)):(0,o.jsx)(o.Fragment,{children:j.contributors.length>0?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(r.A,Object.assign({variant:"text",onClick:()=>b(!0),classes:{root:Qe.btnParticipants},color:"inherit"},{children:[(0,o.jsx)(W.A,{id:"ui.feedObject.contributors.participants",defaultMessage:"ui.feedObject.contributors.participants"}),":",(0,o.jsxs)(qe.A,Object.assign({},g,{children:[j.contributors.map(((e,t)=>(0,o.jsx)(p.A,{alt:e.username,src:e.avatar},t))),[...Array(Math.max(j.total-j.contributors.length,0))].map(((e,t)=>(0,o.jsx)(p.A,{},t)))]}))]})),h&&(0,o.jsx)(te.A,Object.assign({title:(0,o.jsx)(W.A,{defaultMessage:"ui.feedObject.contributors.title",id:"ui.feedObject.contributors.title",values:{total:j.total}}),onClose:()=>b(!1),open:h},{children:j.isLoadingNext?(0,o.jsx)(se.A,{size:50}):(0,o.jsx)(X.A,Object.assign({dataLength:j.contributors.length,next:j.getNextPage(),hasMoreNext:Boolean(j.next),loaderNext:(0,o.jsx)(se.A,{size:30}),height:400,endMessage:(0,o.jsx)(l.A,Object.assign({variant:"body2",align:"center",fontWeight:"bold"},{children:(0,o.jsx)(W.A,{id:"ui.feedObject.contributors.noOtherContributors",defaultMessage:"ui.feedObject.contributors.noOtherContributors"})}))},{children:(0,o.jsx)(Y.A,{children:j.contributors.map(((e,t)=>(0,o.jsx)(K.Ay,{children:(0,o.jsx)(ne.A,{elevation:0,user:e,sx:{m:0},onClick:()=>b(!1)},e.id)},t)))})}))}))]}):null})})})):null};var tt=s(2783),st=s(18895),nt=s(37978);const ot={root:`${S.H}-action-follow-root`,button:`${S.H}-action-follow-button`,iconized:`${S.H}-action-follow-iconized`,followed:`${S.H}-action-follow-followed`},at=(0,i.Ay)(d.A,{name:S.H,slot:"ActionFollowRoot"})((()=>({})));const it=function(e){const{className:t=null,feedObjectId:s=null,feedObject:i=null,feedObjectType:l=L.Z.POST,handleFollow:r,iconized:c=!0}=e,d=(0,n.__rest)(e,["className","feedObjectId","feedObject","feedObjectType","handleFollow","iconized"]),{obj:u,setObj:g}=(0,$.A)({id:s,feedObject:i,feedObjectType:l}),[p,h]=(0,a.useState)(!1),b=(0,he.J_)(),A=(0,fe.X1)(),{enqueueSnackbar:f}=(0,ge.dh)(),v=(0,a.useMemo)((()=>()=>Q.A.request({url:Z.A.FollowContribution.url({type:u.type,id:u.id}),method:Z.A.FollowContribution.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[u]);function O(){A.user?(h(!0),v().then((e=>{const t=!u.followed;g(Object.assign({},u,{followed:t})),h(!1),r&&r(t)})).catch((e=>{J.V.error(ee.d,e),(0,nt.c)(e,A.managers.blockedUsers.isBlocked(u.author),f)||f((0,o.jsx)(W.A,{id:"ui.common.error.action",defaultMessage:"ui.common.error.action"}),{variant:"error",autoHideDuration:3e3}),h(!1)}))):b.settings.handleAnonymousAction()}return(0,o.jsx)(at,Object.assign({className:_()(ot.root,t)},d,{children:function(){let e=(0,o.jsx)(W.A,{id:"ui.feedObject.follow",defaultMessage:"ui.feedObject.follow"});return u.followed&&(e=(0,o.jsx)(W.A,{id:"ui.feedObject.unfollow",defaultMessage:"ui.feedObject.unfollow"})),(0,o.jsx)(a.Fragment,{children:A.user&&u.author.id!==A.user.id&&!u.deleted&&(0,o.jsx)(j.A,Object.assign({title:e},{children:(0,o.jsx)(q.A,Object.assign({className:_()(ot.button,{[ot.iconized]:c,[ot.followed]:u.followed}),loading:p,variant:c?"text":"contained",disabled:p,onClick:O},{children:c?(0,o.jsx)(m.A,{children:u.followed?"bookmark_added":"bookmark_border"}):e}))}))})}()}))};var lt=s(86857),rt=s(79197),ct=s(52959),dt=s(56323),ut=s(58871),mt=s(37211);const gt=(0,R.YK)({relevantActivities:{id:"ui.feedObject.activitiesMenu.relevantActivities",defaultMessage:"ui.feedObject.activitiesMenu.relevantActivities"},recentComments:{id:"ui.feedObject.activitiesMenu.recentComments",defaultMessage:"ui.feedObject.activitiesMenu.recentComments"},firstComments:{id:"ui.feedObject.activitiesMenu.firstComments",defaultMessage:"ui.feedObject.activitiesMenu.firstComments"},followedComments:{id:"ui.feedObject.activitiesMenu.followedComments",defaultMessage:"ui.feedObject.activitiesMenu.followedComments"},connectionsComments:{id:"ui.feedObject.activitiesMenu.connectionsComments",defaultMessage:"ui.feedObject.activitiesMenu.connectionsComments"}}),pt={root:`${S.H}-activities-menu-root`,selector:`${S.H}-activities-menu-selector`},jt=(0,i.Ay)(d.A,{name:S.H,slot:"ActivitiesMenuRoot"})((()=>({})));const ht=function(e){const{className:t=null,selectedActivities:s=null,hideRelevantActivitiesItem:i=!1,onChange:l=null}=e,c=(0,n.__rest)(e,["className","selectedActivities","hideRelevantActivitiesItem","onChange"]),u=(0,a.useContext)(be.ql),g=(0,fe.X1)(),p=(0,ae.A)(),h=(0,ie.A)(p.breakpoints.down("md")),b=u.preferences[Ae.mw].value,[A,f]=a.useState(null),v=Boolean(A),O=(0,P.A)(),x=e=>{f(e.currentTarget)},y=()=>{f(null)},C=e=>()=>{l&&l(e)};function E(){return(0,o.jsxs)(d.A,{children:[!i&&(0,o.jsx)(mt.A,Object.assign({selected:s===D.x.RELEVANCE_ACTIVITIES,onClick:C(D.x.RELEVANCE_ACTIVITIES)},{children:(0,o.jsx)(ce.A,{primary:(0,o.jsx)("b",{children:O.formatMessage(gt.relevantActivities)}),secondary:(0,o.jsx)(W.A,{id:"ui.feedObject.activitiesMenu.relevantActivitiesDesc",defaultMessage:"ui.feedObject.activitiesMenu.relevantActivitiesDesc"})})})),(0,o.jsx)(mt.A,Object.assign({selected:s===D.x.RECENT_COMMENTS,onClick:C(D.x.RECENT_COMMENTS)},{children:(0,o.jsx)(ce.A,{primary:(0,o.jsx)("b",{children:O.formatMessage(gt.recentComments)}),secondary:(0,o.jsx)(W.A,{id:"ui.feedObject.activitiesMenu.recentCommentsDesc",defaultMessage:"ui.feedObject.activitiesMenu.recentCommentsDesc"})})})),(0,o.jsx)(mt.A,Object.assign({selected:s===D.x.FIRST_COMMENTS,onClick:C(D.x.FIRST_COMMENTS)},{children:(0,o.jsx)(ce.A,{primary:(0,o.jsx)("b",{children:O.formatMessage(gt.firstComments)}),secondary:(0,o.jsx)(W.A,{id:"ui.feedObject.activitiesMenu.firstCommentsDesc",defaultMessage:"ui.feedObject.activitiesMenu.firstCommentsDesc"})})})),g.user&&(0,o.jsx)(mt.A,Object.assign({selected:s===D.x.CONNECTIONS_COMMENTS,onClick:C(D.x.CONNECTIONS_COMMENTS)},{children:(0,o.jsx)(ce.A,{primary:(0,o.jsx)("b",{children:b?O.formatMessage(gt.followedComments):O.formatMessage(gt.connectionsComments)}),secondary:b?(0,o.jsx)(W.A,{id:"ui.feedObject.activitiesMenu.followedCommentsDesc",defaultMessage:"ui.feedObject.activitiesMenu.followedCommentsDesc"}):(0,o.jsx)(W.A,{id:"ui.feedObject.activitiesMenu.connectionsCommentsDesc",defaultMessage:"ui.feedObject.activitiesMenu.connectionsCommentsDesc"})})}))]})}return(0,o.jsxs)(jt,Object.assign({className:_()(pt.root,t)},c,{children:[(0,o.jsx)(d.A,Object.assign({className:pt.selector},{children:(0,o.jsx)(j.A,Object.assign({title:(0,o.jsx)(W.A,{id:"ui.feedObject.activitiesMenu.tooltipTitle",defaultMessage:"ui.feedObject.activitiesMenu.tooltipTitle"})},{children:(0,o.jsxs)(r.A,Object.assign({variant:"text",size:"small",onClick:x},{children:[s===D.x.CONNECTIONS_COMMENTS&&b?O.formatMessage(gt.followedComments):O.formatMessage(gt[`${(0,je.xQ)(s)}`]),"\xa0 ",(0,o.jsx)(m.A,{children:"expand_more"})]}))}))})),v&&(0,o.jsx)(o.Fragment,{children:h?(0,o.jsx)(ue.A,Object.assign({open:!0,onClose:y,onOpen:x,anchor:"bottom",disableSwipeToOpen:!0},{children:E()})):(0,o.jsx)(de.A,Object.assign({anchorEl:A,open:!0,onClose:y,onClick:y,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"}},{children:E()}))})]}))};var bt=s(97100),At=s(88352),ft=s(91765);const vt=(0,R.YK)({comment:{id:"ui.feedObject.relevantActivities.comment",defaultMessage:"ui.feedObject.relevantActivities.comment"}}),Ot={root:`${S.H}-activity-comment-root`,avatar:`${S.H}-activity-comment-avatar`,username:`${S.H}-activity-comment-username`,showMoreContent:`${S.H}-activity-comment-show-more-content`},xt=(0,i.Ay)(ct.A,{name:S.H,slot:"ActivityCommentRoot"})((()=>({})));const yt=function(e){const{className:t=null,activityObject:s=null}=e,i=(0,n.__rest)(e,["className","activityObject"]),l=(0,H.I$)(),[r,c]=(0,a.useState)(!1),d=(0,P.A)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(xt,Object.assign({},i,{className:_()(Ot.root,t),image:(0,o.jsx)(F.A,Object.assign({},!s.author.deleted&&{to:l.url(At.USER_PROFILE_ROUTE_NAME,s.author)},{onClick:s.author.deleted?()=>c(!0):null},{children:(0,o.jsx)(p.A,{alt:s.author.username,variant:"circular",src:s.author.avatar,className:Ot.avatar})})),primary:(0,o.jsx)(o.Fragment,{children:d.formatMessage(vt.comment,{username:(0,o.jsx)(F.A,Object.assign({},!s.author.deleted&&{to:l.url(At.USER_PROFILE_ROUTE_NAME,s.author)},{onClick:s.author.deleted?()=>c(!0):null,className:Ot.username},{children:s.author.username})),link:(...e)=>(0,o.jsx)(F.A,Object.assign({to:l.url(At.COMMENT_ROUTE_NAME,(0,U.kB)(s.comment))},{children:e}))})}),secondary:(0,o.jsx)(v.A,{date:s.active_at})})),r&&(0,o.jsx)(ft.A,{open:r,handleClose:()=>c(!1)})]})},Ct=(0,R.YK)({vote:{id:"ui.feedObject.relevantActivities.vote",defaultMessage:"ui.feedObject.relevantActivities.vote"}}),Et={root:`${S.H}-activity-vote-up-root`,avatar:`${S.H}-activity-vote-up-avatar`,username:`${S.H}-activity-vote-up-username`},_t=(0,i.Ay)(ct.A,{name:S.H,slot:"ActivityVoteUpRoot"})((()=>({})));const Nt=function(e){const{className:t=null,activityObject:s=null}=e,i=(0,n.__rest)(e,["className","activityObject"]),l=(0,H.I$)(),[r,c]=(0,a.useState)(!1),d=(0,P.A)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(_t,Object.assign({},i,{className:_()(Et.root,t),image:(0,o.jsx)(F.A,Object.assign({},!s.author.deleted&&{to:l.url(At.USER_PROFILE_ROUTE_NAME,s.author)},{onClick:s.author.deleted?()=>c(!0):null},{children:(0,o.jsx)(p.A,{alt:s.author.username,variant:"circular",src:s.author.avatar,className:Et.avatar})})),primary:(0,o.jsx)(o.Fragment,{children:d.formatMessage(Ct.vote,{username:(0,o.jsx)(F.A,Object.assign({},!s.author.deleted&&{to:l.url(At.USER_PROFILE_ROUTE_NAME,s.author)},{className:Et.username,onClick:s.author.deleted?()=>c(!0):null},{children:s.author.username}))})}),secondary:(0,o.jsx)(v.A,{date:s.active_at})})),r&&(0,o.jsx)(ft.A,{open:r,handleClose:()=>c(!1)})]})},wt=(0,R.YK)({follow:{id:"ui.feedObject.relevantActivities.follow",defaultMessage:"ui.feedObject.relevantActivities.follow"}}),St={root:`${S.H}-activity-follow-root`,avatar:`${S.H}-activity-follow-avatar`,username:`${S.H}-activity-follow-username`},kt=(0,i.Ay)(ct.A,{name:S.H,slot:"ActivityFollowRoot"})((()=>({})));const Tt=function(e){const t=(0,rt.A)({props:e,name:S.H}),{className:s=null,activityObject:i=null}=t,l=(0,n.__rest)(t,["className","activityObject"]),r=(0,H.I$)(),[c,d]=(0,a.useState)(!1),u=(0,P.A)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(kt,Object.assign({},l,{className:_()(St.root,s),image:(0,o.jsx)(F.A,Object.assign({},!i.author.deleted&&{to:r.url(At.USER_PROFILE_ROUTE_NAME,i.author)},{onClick:i.author.deleted?()=>d(!0):null},{children:(0,o.jsx)(p.A,{alt:i.author.username,variant:"circular",src:i.author.avatar,className:St.avatar})})),primary:(0,o.jsx)(o.Fragment,{children:u.formatMessage(wt.follow,{username:(0,o.jsx)(F.A,Object.assign({},!i.author.deleted&&{to:r.url(At.USER_PROFILE_ROUTE_NAME,i.author)},{onClick:i.author.deleted?()=>d(!0):null,className:St.username},{children:i.author.username}))})}),secondary:(0,o.jsx)(v.A,{date:i.active_at})})),c&&(0,o.jsx)(ft.A,{open:c,handleClose:()=>d(!1)})]})},Mt=(0,R.YK)({pollVote:{id:"ui.feedObject.relevantActivities.pollVote",defaultMessage:"ui.feedObject.relevantActivities.pollVote"}}),Rt={root:`${S.H}-activity-poll-vote-root`,avatar:`${S.H}-activity-poll-vote-avatar`,username:`${S.H}-activity-poll-vote-username`},Pt=(0,i.Ay)(ct.A,{name:S.H,slot:"ActivityPollVoteRoot"})((()=>({})));const It=function(e){const{className:t=null,activityObject:s=null}=e,i=(0,n.__rest)(e,["className","activityObject"]),l=(0,H.I$)(),[r,c]=(0,a.useState)(!1),d=(0,P.A)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Pt,Object.assign({},i,{className:_()(Rt.root,t),image:(0,o.jsx)(F.A,Object.assign({},!s.author.deleted&&{to:l.url(At.USER_PROFILE_ROUTE_NAME,s.author)},{onClick:s.author.deleted?()=>c(!0):null},{children:(0,o.jsx)(p.A,{alt:s.author.username,variant:"circular",src:s.author.avatar,className:Rt.avatar})})),primary:(0,o.jsx)(o.Fragment,{children:d.formatMessage(Mt.pollVote,{username:(0,o.jsx)(F.A,Object.assign({},!s.author.deleted&&{to:l.url(At.USER_PROFILE_ROUTE_NAME,s.author)},{onClick:s.author.deleted?()=>c(!0):null,className:Rt.username},{children:s.author.username}))})}),secondary:(0,o.jsx)(v.A,{date:s.active_at})})),r&&(0,o.jsx)(ft.A,{open:r,handleClose:()=>c(!1)})]})},$t={root:`${S.H}-relevant-activities-root`,activity:`${S.H}-relevant-activities-activity`},Ht=(0,i.Ay)(d.A,{name:S.H,slot:"RelevantActivitiesRoot"})((()=>({})));const Ft=function(e){const{className:t=null,activities:s=[],showMaxRelevantActivities:i=5}=e,r=(0,n.__rest)(e,["className","activities","showMaxRelevantActivities"]),[c,d]=(0,a.useState)(!1);function u(e,t){return e.type===bt.j.COMMENT?(0,o.jsx)(yt,{activityObject:e,elevation:0},t):e.type===bt.j.FOLLOW?(0,o.jsx)(Tt,{activityObject:e,elevation:0},t):e.type===bt.j.VOTE?(0,o.jsx)(Nt,{activityObject:e,elevation:0},t):e.type===bt.j.POLLVOTE?(0,o.jsx)(It,{activityObject:e,elevation:0},t):null}return(0,o.jsx)(Ht,Object.assign({className:_()($t.root,t)},r,{children:s.length<=0?(0,o.jsx)(l.A,Object.assign({variant:"body2"},{children:(0,o.jsx)(W.A,{id:"ui.feedObject.relevantActivities.noResults",defaultMessage:"ui.feedObject.relevantActivities.noResults"})})):(0,o.jsxs)(Y.A,{children:[s.slice(0,i).map(((e,t)=>(0,o.jsx)(K.Ay,Object.assign({className:$t.activity},{children:u(e,t)}),t))),!c&&s.length>i&&(0,o.jsxs)(mt.A,Object.assign({onClick:()=>d((e=>!e))},{children:[(0,o.jsx)(ce.A,{primary:(0,o.jsx)(W.A,{id:"ui.feedObject.relevantActivities.showOthers",defaultMessage:"ui.feedObject.relevantActivities.showOthers"})}),c?(0,o.jsx)(m.A,{children:"expand_less"}):(0,o.jsx)(m.A,{children:"expand_more"})]})),(0,o.jsx)(A.A,Object.assign({in:c,timeout:"auto",unmountOnExit:!0},{children:s.slice(i).map(((e,t)=>(0,o.jsx)(K.Ay,Object.assign({className:$t.activity},{children:u(e,t)}),t)))}))]})}))};var Lt=s(54262),Dt=s(40094);const Ut={root:`${S.H}-activities-root`,activities:`${S.H}-activities`},Vt=(0,i.Ay)(d.A,{name:S.H,slot:"ActivitiesRoot"})((()=>({})));const Bt=function(e){const{id:t=`feed_object_activities_${e.feedObjectId?e.feedObjectId:e.feedObject?e.feedObject.id:""}`,className:s,feedObjectId:i,feedObject:l,feedObjectType:r=L.Z.POST,cacheStrategy:c=De.So.CACHE_FIRST,CommentsObjectProps:u={},CommentComponentProps:m={variant:"outlined"},feedObjectActivities:g=[],comments:p=[],onSetSelectedActivities:j,activitiesType:h=D.x.RECENT_COMMENTS}=e,b=(0,n.__rest)(e,["id","className","feedObjectId","feedObject","feedObjectType","cacheStrategy","CommentsObjectProps","CommentComponentProps","feedObjectActivities","comments","onSetSelectedActivities","activitiesType"]),{ref:A,inView:f}=(0,Dt.Wx)({triggerOnce:!0}),[v,O]=(0,a.useState)(h),x=(0,Lt.A)({id:i,feedObject:l,feedObjectType:r,cacheStrategy:c,pageSize:1,orderBy:v===D.x.CONNECTIONS_COMMENTS?dt.e.CONNECTION_DESC:v===D.x.FIRST_COMMENTS?dt.e.ADDED_AT_ASC:dt.e.ADDED_AT_DESC}),y=x.feedObject?x.feedObject.id:null,C=Math.min(2,x.feedObject?x.feedObject.comment_count:2),E=g&&g.length>0;function N(){x.getNextPage()}return(0,a.useEffect)((()=>{O(h)}),[h]),(0,a.useEffect)((()=>{y&&!x.comments.length&&f&&x.getNextPage()}),[y,f]),(0,o.jsx)(Vt,Object.assign({id:t,className:_()(Ut.root,s)},b,{ref:A},{children:x.feedObject&&(Boolean(x.feedObject.comment_count)||g&&g.length>0||p.length>0||l&&l.comment_count>0)?(0,o.jsxs)(d.A,Object.assign({className:Ut.activities},E?{}:{style:{minHeight:80*Math.min(C,l.comment_count)+"px"}},{children:[(0,o.jsx)(ht,{selectedActivities:v,hideRelevantActivitiesItem:!E,onChange:function(e){j(e),O(e)}}),v===D.x.RELEVANCE_ACTIVITIES?(0,o.jsx)(Ft,{activities:g}):(0,o.jsx)(o.Fragment,{children:(x.feedObject.comment_count>0||p.length>0)&&(0,o.jsx)(ut.A,Object.assign({feedObject:x.feedObject,comments:x.comments,startComments:p,next:x.next,isLoadingNext:x.isLoadingNext,handleNext:N,totalLoadedComments:x.comments.length+p.length,totalComments:x.feedObject.comment_count,hideAdvertising:!0},u,{cacheStrategy:c,CommentsObjectSkeletonProps:{count:C},CommentComponentProps:Object.assign(Object.assign(Object.assign(Object.assign({},u.CommentComponentProps?u.CommentComponentProps:{}),{truncateContent:!0}),m),{cacheStrategy:c}),inPlaceLoadMoreContents:!1}))})]})):null}))};var Gt=s(86955),zt=s(89333),Wt=s(99769);var qt=s(35488),Yt=s(13470),Kt=s(4527);const Xt="SCFeedObjectMediaPreview",Zt={root:`${Xt}-root`},Qt=(0,i.Ay)(d.A,{name:Xt,slot:"Root"})((()=>({}))),Jt=e=>{const t=(0,rt.A)({props:e,name:Xt}),{className:s,medias:a,mediaObjectTypes:i=[qt.A,Yt.A,Kt.A]}=t,l=(0,n.__rest)(t,["className","medias","mediaObjectTypes"]),{handleMediaClick:r}={handleMediaClick:e=>{Q.A.request({url:Z.A.MediaClickTracker.url({id:e.id}),method:Z.A.MediaClickTracker.method}).catch((e=>{J.V.error(Ue.K,e)}))}};return a.length?(0,o.jsx)(Qt,Object.assign({className:_()(s,Zt.root)},l,{children:i.map((e=>{const{displayProps:t={}}=e;return(0,o.jsx)("div",{children:(0,o.jsx)(e.displayComponent,Object.assign({medias:a},t,{onMediaClick:r}))},e.name)}))})):null},es=(0,R.YK)({visibleToAll:{id:"ui.feedObject.visibleToAll",defaultMessage:"ui.feedObject.visibleToAll"},visibleToGroup:{id:"ui.feedObject.visibleToGroup",defaultMessage:"ui.feedObject.visibleToGroup"}}),ts={root:`${S.H}-root`,deleted:`${S.H}-deleted`,header:`${S.H}-header`,category:`${S.H}-category`,event:`${S.H}-event`,group:`${S.H}-group`,avatar:`${S.H}-avatar`,username:`${S.H}-username`,activityAt:`${S.H}-activity-at`,tag:`${S.H}-tag`,location:`${S.H}-location`,content:`${S.H}-content`,showMore:`${S.H}-show-more`,error:`${S.H}-error`,titleSection:`${S.H}-title-section`,title:`${S.H}-title`,textSection:`${S.H}-text-section`,text:`${S.H}-text`,snippet:`${S.H}-snippet`,snippetContent:`${S.H}-snippet-content`,mediasSection:`${S.H}-medias-section`,pollsSection:`${S.H}-polls-section`,infoSection:`${S.H}-info-section`,actionsSection:`${S.H}-actions-section`,replyContent:`${S.H}-reply-content`,activitiesSection:`${S.H}-activities-section`,activitiesContent:`${S.H}-activities-content`,followButton:`${S.H}-follow-button`},ss=(0,i.Ay)(lt.A,{name:S.H,slot:"Root"})((()=>({})));const ns=function(e){var t,s,i,y,C,E,N;const w=(0,rt.A)({props:e,name:S.H}),{id:k=`feed_object_${w.feedObjectId?w.feedObjectId:w.feedObject?w.feedObject.id:""}`,className:T=null,feedObjectId:M=null,feedObject:R=null,feedObjectType:I=null,feedObjectActivities:V=null,cacheStrategy:B=De.So.CACHE_FIRST,markRead:G=!1,template:z=D.a.PREVIEW,hideFollowAction:q=!1,summaryExpanded:Y=!1,activitiesExpanded:K=!0,activitiesExpandedType:X,hideParticipantsPreview:te=!1,pollVisible:se=!0,FollowButtonProps:ne={},FeedObjectSkeletonProps:oe={elevation:0},ActionsProps:ae={},CommentObjectReplyComponent:ie=Gt.A,CommentObjectReplyComponentProps:le={WidgetProps:{variant:"outlined"}},CommentComponentProps:re={variant:"outlined"},CommentObjectSkeletonProps:ce={elevation:0,WidgetProps:{variant:"outlined"}},ContributionActionsMenuProps:de={},FeedObjectMediaPreviewProps:ue={},ActivitiesProps:pe={cacheStrategy:B},PollObjectProps:je={elevation:0},ContributorsFeedObjectProps:be={},onReply:Ae,onHeightChange:Oe,onStateChange:ye}=w,Ce=(0,n.__rest)(w,["id","className","feedObjectId","feedObject","feedObjectType","feedObjectActivities","cacheStrategy","markRead","template","hideFollowAction","summaryExpanded","activitiesExpanded","activitiesExpandedType","hideParticipantsPreview","pollVisible","FollowButtonProps","FeedObjectSkeletonProps","ActionsProps","CommentObjectReplyComponent","CommentObjectReplyComponentProps","CommentComponentProps","CommentObjectSkeletonProps","ContributionActionsMenuProps","FeedObjectMediaPreviewProps","ActivitiesProps","PollObjectProps","ContributorsFeedObjectProps","onReply","onHeightChange","onStateChange"]),Ee=(0,he.J_)(),_e=(0,H.I$)(),Ne=(0,fe.X1)(),{enqueueSnackbar:we}=(0,ge.dh)(),{obj:ke,setObj:Te,error:Me}=(0,$.A)({id:M,feedObject:R,feedObjectType:I,cacheStrategy:B}),Re=ke?ke.id:null,[Pe,Ie]=(0,a.useState)(!1),$e=()=>ke&&K&&(ke.comment_count>0||V&&V.length>0),[He,Fe]=(0,a.useState)(!1),[Ue,Be]=(0,a.useState)($e()),[Ge,ze]=(0,a.useState)([]),[We,qe]=(0,a.useState)(!1),[Ye,Ke]=(0,a.useState)(function(){if(X)return X;if(V&&V.length>0)return D.x.RELEVANCE_ACTIVITIES;return D.x.RECENT_COMMENTS}()),[Xe,Ze]=(0,a.useState)(Y),Qe=(0,a.useMemo)((()=>{var e;return(null==ke?void 0:ke.medias.length)>0&&(null===(e=ke.medias[0].embed)||void 0===e?void 0:e.embed_type)===me.TY}),[null==ke?void 0:ke.medias]),Je=(0,a.useMemo)((()=>{var e,t,s,n;return q||Qe&&!1===(null===(n=null===(s=null===(t=null===(e=null==ke?void 0:ke.medias)||void 0===e?void 0:e[0])||void 0===t?void 0:t.embed)||void 0===s?void 0:s.metadata)||void 0===n?void 0:n.active)}),[q,Qe,ke]),ot=(0,P.A)(),at=(0,a.useMemo)((()=>e=>{ye&&e&&ye(e),Oe&&Oe()}),[ye,Oe]),lt=e=>{Te(e),at()};(0,a.useEffect)((()=>{const e=$e();Be(e),at({activitiesExpanded:e,activitiesExpandedType:Ye,cacheStrategy:De.So.CACHE_FIRST})}),[Re,Ye]);const dt=(0,a.useCallback)((e=>{"poll"in ke&&lt(Object.assign({},ke,{poll:Object.assign(Object.assign({},ke.poll),{choices:e})}))}),[ke]),ut=(0,a.useCallback)((e=>{at({pollVisible:e})}),[se,at]),mt=(0,a.useCallback)((()=>{Ze(!Xe),at({summaryExpanded:!Xe})}),[Xe,at]),gt=(0,a.useCallback)(((e,t,s)=>{we(s?(0,o.jsx)(W.A,{id:"ui.feedObject.flagSent",defaultMessage:"ui.feedObject.flagSent"}):(0,o.jsx)(W.A,{id:"ui.feedObject.flagRemoved",defaultMessage:"ui.feedObject.flagRemoved"}),{autoHideDuration:3e3})}),[]),pt=(0,a.useCallback)((()=>{lt(Object.assign({},ke,{deleted:!1}))}),[ke]),jt=(0,a.useCallback)((()=>{lt(Object.assign({},ke,{collapsed:!ke.collapsed}))}),[ke]),ht=(0,a.useCallback)((()=>{lt(Object.assign({},ke,{deleted:!ke.deleted}))}),[ke]),bt=(0,a.useCallback)((()=>{lt(Object.assign({},ke,{suspended:!ke.suspended})),we(ke.suspended?(0,o.jsx)(W.A,{id:"ui.feedObject.notificationsEnabled",defaultMessage:"ui.feedObject.notificationsEnabled"}):(0,o.jsx)(W.A,{id:"ui.feedObject.notificationsDisabled",defaultMessage:"ui.feedObject.notificationsDisabled"}),{autoHideDuration:3e3})}),[ke]),vt=(0,a.useCallback)((()=>{Fe((e=>!e))}),[He]),Ot=(0,a.useCallback)((e=>{lt(e),Fe(!1)}),[ke,He]),xt=(0,a.useCallback)((e=>{lt(Object.assign({},ke,{voted:e.voted,vote_count:e.vote_count,reactions_count:e.reactions_count,reaction:e.reaction}))}),[ke]),yt=(0,a.useCallback)((()=>{if(Ne.user){const e=!Ue;Be(e),at({activitiesExpanded:e})}else Ee.settings.handleAnonymousAction()}),[Ue,Ne.user,at,Ye]),Ct=(0,a.useCallback)((e=>{lt(Object.assign(Object.assign({},ke),{followed:e}))}),[ke]),Et=(0,a.useCallback)((()=>{lt(Object.assign(Object.assign({},ke),{comment_count:Math.max(ke.comment_count-1,0)}))}),[ke]),_t=(0,a.useCallback)((e=>{Ke(e),ze([]),at({activitiesExpandedType:e})}),[ke,Ue]),Nt=(0,a.useMemo)((()=>e=>Q.A.request({url:Z.A.NewComment.url({}),method:Z.A.NewComment.method,data:{[`${ke.type}`]:ke.id,text:e}}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[Re]),wt=e=>{Ne.user?ve.lT(Ne.user)?we((0,o.jsx)(W.A,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3}):(qe(!0),Nt(e).then((e=>{const t=e;t.summary_truncated=!1,Ye!==D.x.RECENT_COMMENTS?(ze([]),Ke(D.x.RECENT_COMMENTS)):ze([t,...Ge]),qe(!1);const s=Object.assign({},ke,{comment_count:ke.comment_count+1});lt(s),De.Ay.deleteKeysWithPrefix(Ve.MI(ke.id,ke.type)),Ae&&Ae(e),at({activitiesExpanded:Ue,activitiesExpandedType:D.x.RECENT_COMMENTS})})).catch((e=>{J.V.error(ee.d,e),(0,nt.c)(e,Ne.managers.blockedUsers.isBlocked(ke.author),we)||we((0,o.jsx)(W.A,{id:"ui.common.error.action",defaultMessage:"ui.common.error.action"}),{variant:"error",autoHideDuration:3e3})}))):Ee.settings.handleAnonymousAction()},St=(0,a.useCallback)(((e,t)=>{const s="summary_html"in e?e.summary_html:e.summary,n="summary_truncated"in e?e.summary_truncated:e.html.length>=Wt.b4,a=Xe||t===D.a.DETAIL?(0,U.MZ)(e.html,_e.url):(0,U.MZ)(s,_e.url);return t===D.a.SHARE?(0,o.jsxs)(F.A,Object.assign({to:_e.url((0,U.lg)(e),(0,U.kB)(e)),className:ts.text},{children:[(0,o.jsx)(l.A,{component:"span",className:ts.text,variant:"body2",gutterBottom:!0,dangerouslySetInnerHTML:{__html:a}}),!Xe&&n&&(0,o.jsx)(r.A,Object.assign({size:"small",variant:"text",color:"inherit",className:ts.showMore,onClick:mt},{children:(0,o.jsx)(W.A,{id:"ui.feedObject.content.showMore",defaultMessage:"ui.feedObject.content.showMore"})}))]})):t===D.a.DETAIL?(0,o.jsx)(l.A,{component:"div",gutterBottom:!0,className:ts.text,dangerouslySetInnerHTML:{__html:a}}):(0,o.jsxs)(l.A,Object.assign({component:"div",gutterBottom:!0,className:ts.text},{children:[(0,o.jsx)(l.A,{component:"span",dangerouslySetInnerHTML:{__html:a}}),!Xe&&n&&(0,o.jsx)(r.A,Object.assign({size:"small",variant:"text",color:"inherit",className:ts.showMore,onClick:mt},{children:(0,o.jsx)(W.A,{id:"ui.feedObject.content.showMore",defaultMessage:"ui.feedObject.content.showMore"})}))]}))}),[ke,z,Xe]);let kt;return kt=!ke&&Me||(null==ke?void 0:ke.deleted)&&!Ne.user&&!ve.qc(Ne.user)&&!ve.Cy(Ne.user)?(0,o.jsx)(c.A,Object.assign({className:_()(ts.error,ts.content)},{children:(0,o.jsx)(W.A,{id:"ui.feedObject.error",defaultMessage:"ui.feedObject.error"})})):z===D.a.PREVIEW||z===D.a.DETAIL||z===D.a.SEARCH?(0,o.jsx)(a.Fragment,{children:ke?(0,o.jsxs)(d.A,Object.assign({className:_()({[ts.deleted]:ke&&ke.deleted})},{children:[ke.categories.length>0&&(0,o.jsxs)("div",Object.assign({className:ts.category},{children:[(0,o.jsxs)(o.Fragment,{children:[ke.group&&(0,o.jsx)(u.A,{className:ts.group,color:"secondary",size:"small",icon:(0,o.jsx)(m.A,{children:"groups"}),component:F.A,to:_e.url(At.GROUP_ROUTE_NAME,ke.group),clickable:!0},ke.group.id),ke.event&&(0,o.jsx)(u.A,{className:ts.event,color:"secondary",size:"small",label:ke.event.name,icon:(0,o.jsx)(m.A,{children:"CalendarIcon"}),component:F.A,to:_e.url(At.EVENT_ROUTE_NAME,ke.event),clickable:!0},ke.event.id)]}),ke.categories.map((e=>(0,o.jsx)(F.A,Object.assign({to:_e.url(At.CATEGORY_ROUTE_NAME,e)},{children:(0,o.jsx)(l.A,Object.assign({variant:"overline"},{children:e.name}))}),e.id)))]})),ke.group&&!ke.categories.length&&(0,o.jsx)("div",Object.assign({className:ts.group},{children:(0,o.jsx)(u.A,{color:"secondary",size:"small",icon:(0,o.jsx)(m.A,{children:"groups"}),label:ke.group.name,component:F.A,to:_e.url(At.GROUP_ROUTE_NAME,ke.group),clickable:!0},ke.group.id)})),ke.event&&!ke.categories.length&&(0,o.jsx)(u.A,{className:ts.event,color:"secondary",size:"small",icon:(0,o.jsx)(m.A,{children:"CalendarIcon"}),label:ke.event.name,component:F.A,to:_e.url(At.EVENT_ROUTE_NAME,ke.event),clickable:!0},ke.event.id),(0,o.jsx)(g.A,{className:ts.header,avatar:(0,o.jsx)(F.A,Object.assign({},!ke.author.deleted&&{to:_e.url(At.USER_PROFILE_ROUTE_NAME,ke.author)},{onClick:ke.author.deleted?()=>Ie(!0):null},{children:(0,o.jsx)(zt.A,Object.assign({hide:!ke.author.community_badge},{children:(0,o.jsx)(p.A,Object.assign({"aria-label":"recipe",src:ke.author.avatar,className:ts.avatar},{children:ke.author.username}))}))})),title:(0,o.jsx)(F.A,Object.assign({},!ke.author.deleted&&{to:_e.url(At.USER_PROFILE_ROUTE_NAME,ke.author)},{onClick:ke.author.deleted?()=>Ie(!0):null,className:ts.username},{children:ke.author.username})),subheader:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(F.A,Object.assign({to:_e.url((0,U.lg)(ke),(0,U.kB)(ke)),className:ts.activityAt},{children:(0,o.jsx)(v.A,{component:"span",date:ke.added_at})})),ke.location&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(O.A,{}),(0,o.jsxs)(d.A,Object.assign({className:ts.location},{children:[(0,o.jsx)(m.A,{children:"add_location_alt"}),null===(t=ke.location)||void 0===t?void 0:t.location]}))]}),(0,o.jsx)(O.A,{}),(0,o.jsx)(d.A,Object.assign({className:ts.tag},{children:ke.addressing.length>0?(0,o.jsx)(x.A,{tags:ke.addressing,TagChipProps:{disposable:!1,clickable:!1}}):ke.group?(0,o.jsx)(j.A,Object.assign({title:`${ot.formatMessage(es.visibleToGroup,{group:ke.group.name})}`},{children:(0,o.jsx)(m.A,Object.assign({color:"disabled",fontSize:"small"},{children:"groups"}))})):(0,o.jsx)(j.A,Object.assign({title:`${ot.formatMessage(es.visibleToAll)}`},{children:(0,o.jsx)(m.A,Object.assign({color:"disabled",fontSize:"small"},{children:"public"}))}))}))]}),action:(0,o.jsx)(st.A,Object.assign({feedObject:ke,feedObjectType:I,onEditContribution:vt,onHideContribution:jt,onDeleteContribution:ht,onRestoreContribution:pt,onSuspendNotificationContribution:bt,onFlagContribution:gt},de))}),(0,o.jsxs)(c.A,Object.assign({classes:{root:ts.content}},{children:[(0,o.jsx)(d.A,Object.assign({className:ts.titleSection},{children:"title"in ke&&(0,o.jsx)(o.Fragment,{children:z===D.a.DETAIL?(0,o.jsx)(l.A,Object.assign({variant:"body1",gutterBottom:!0,className:ts.title},{children:ke.title})):(0,o.jsx)(F.A,Object.assign({to:_e.url((0,U.lg)(ke),(0,U.kB)(ke))},{children:(0,o.jsx)(l.A,Object.assign({variant:"body1",gutterBottom:!0,className:ts.title},{children:ke.title}))}))})})),(0,o.jsx)(d.A,Object.assign({className:ts.textSection},{children:St(ke,z)})),(0,o.jsx)(d.A,Object.assign({className:ts.mediasSection},{children:(0,o.jsx)(Jt,Object.assign({medias:ke.medias},ue))})),(0,o.jsx)(d.A,Object.assign({className:ts.pollsSection},{children:ke.poll&&(0,o.jsx)(Le,Object.assign({visible:se||z===D.a.DETAIL||Boolean(ke.type!==L.Z.DISCUSSION&&!ke.html&&!ke.medias.length),feedObject:ke,pollObject:ke.poll,onChange:dt,onToggleVisibility:ut},je))})),(0,o.jsx)(d.A,Object.assign({className:ts.infoSection},{children:(0,o.jsxs)(h.A,Object.assign({direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2},{children:[!te&&(0,o.jsx)(et,Object.assign({feedObject:ke,feedObjectType:ke.type},be,{cacheStrategy:B})),!Je&&(0,o.jsx)(it,Object.assign({feedObject:ke,feedObjectType:ke.type,handleFollow:Ct},ne))]}))}))]})),(0,o.jsxs)(b.A,Object.assign({className:ts.actionsSection},{children:[(0,o.jsx)(Se,Object.assign({feedObjectId:M,feedObjectType:I,feedObject:ke,hideCommentAction:z===D.a.DETAIL||Qe&&!(null===(i=null===(s=null==ke?void 0:ke.medias[0].embed)||void 0===s?void 0:s.metadata)||void 0===i?void 0:i.active),handleExpandActivities:z===D.a.PREVIEW?yt:null,VoteActionProps:{onVoteAction:xt}},ae)),(z===D.a.DETAIL&&(!Qe||(null===(N=null===(E=null===(C=null===(y=null==ke?void 0:ke.medias)||void 0===y?void 0:y[0])||void 0===C?void 0:C.embed)||void 0===E?void 0:E.metadata)||void 0===N?void 0:N.active))||Ue)&&(0,o.jsx)(d.A,Object.assign({className:ts.replyContent},{children:(0,o.jsx)(ie,Object.assign({id:`reply-feedObject-${ke.id}`,onReply:wt,editable:!We||Boolean(ke)},le),Number(We))}))]})),z===D.a.PREVIEW&&(ke.comment_count>0||V&&V.length>0)&&(0,o.jsx)(A.A,Object.assign({in:Ue,timeout:"auto",classes:{root:ts.activitiesSection}},{children:(0,o.jsx)(c.A,Object.assign({className:ts.activitiesContent},{children:(0,o.jsx)(Bt,Object.assign({feedObject:ke,feedObjectActivities:V,activitiesType:Ye,onSetSelectedActivities:_t,comments:Ge,CommentsObjectProps:{CommentComponentProps:Object.assign({onDelete:Et,truncateContent:!0,CommentsObjectComponentProps:{inPlaceLoadMoreContents:!1}},re),CommentObjectSkeletonProps:ce},cacheStrategy:B},pe),Ye)}))})),He&&(0,o.jsx)(xe.A,{open:He,feedObject:ke,onClose:vt,onSuccess:Ot,maxWidth:"sm",fullWidth:!0})]})):(0,o.jsx)(f.A,Object.assign({template:z},oe))}):z===D.a.SHARE?(0,o.jsx)(a.Fragment,{children:ke?(0,o.jsxs)(a.Fragment,{children:[ke.categories.length>0&&(0,o.jsxs)("div",Object.assign({className:ts.category},{children:[(0,o.jsxs)(o.Fragment,{children:[ke.group&&(0,o.jsx)("div",Object.assign({className:ts.group},{children:(0,o.jsx)(u.A,{color:"secondary",size:"small",icon:(0,o.jsx)(m.A,{children:"groups"}),component:F.A,to:_e.url(At.GROUP_ROUTE_NAME,ke.group),clickable:!0},ke.group.id)})),ke.event&&(0,o.jsx)(u.A,{className:ts.event,color:"secondary",size:"small",icon:(0,o.jsx)(m.A,{children:"CalendarIcon"}),component:F.A,to:_e.url(At.EVENT_ROUTE_NAME,ke.event),clickable:!0},ke.event.id)]}),ke.categories.map((e=>(0,o.jsx)(F.A,Object.assign({to:_e.url(At.CATEGORY_ROUTE_NAME,e)},{children:(0,o.jsx)(l.A,Object.assign({variant:"overline"},{children:e.name}))}),e.id)))]})),ke.group&&!ke.categories.length&&(0,o.jsx)("div",Object.assign({className:ts.group},{children:(0,o.jsx)(u.A,{color:"secondary",size:"small",icon:(0,o.jsx)(m.A,{children:"groups"}),label:ke.group.name,component:F.A,to:_e.url(At.GROUP_ROUTE_NAME,ke.group),clickable:!0},ke.group.id)})),ke.event&&!ke.categories.length&&(0,o.jsx)("div",Object.assign({className:ts.event},{children:(0,o.jsx)(u.A,{color:"secondary",size:"small",icon:(0,o.jsx)(m.A,{children:"groups"}),label:ke.event.name,component:F.A,to:_e.url(At.EVENT_ROUTE_NAME,ke.event),clickable:!0},ke.event.id)})),(0,o.jsx)(g.A,{classes:{root:ts.header},avatar:(0,o.jsx)(F.A,Object.assign({},!ke.author.deleted&&{to:_e.url(At.USER_PROFILE_ROUTE_NAME,ke.author)},{onClick:ke.author.deleted?()=>Ie(!0):null,className:ts.username},{children:(0,o.jsx)(zt.A,Object.assign({hide:!ke.author.community_badge},{children:(0,o.jsx)(p.A,Object.assign({"aria-label":"recipe",src:ke.author.avatar,className:ts.avatar},{children:ke.author.username}))}))})),title:(0,o.jsx)(F.A,Object.assign({},!ke.author.deleted&&{to:_e.url(At.USER_PROFILE_ROUTE_NAME,ke.author)},{onClick:ke.author.deleted?()=>Ie(!0):null,className:ts.username},{children:ke.author.username})),subheader:(0,o.jsx)(F.A,Object.assign({to:_e.url((0,U.lg)(ke),(0,U.kB)(ke)),className:ts.activityAt},{children:(0,o.jsx)(v.A,{date:ke.added_at})}))}),(0,o.jsxs)(c.A,Object.assign({classes:{root:ts.content}},{children:[(0,o.jsx)(d.A,Object.assign({className:ts.titleSection},{children:"title"in ke&&(0,o.jsx)(F.A,Object.assign({to:_e.url((0,U.lg)(ke),(0,U.kB)(ke))},{children:(0,o.jsx)(l.A,Object.assign({variant:"body1",gutterBottom:!0,className:ts.title},{children:ke.title}))}))})),(0,o.jsx)(d.A,Object.assign({className:ts.textSection},{children:St(ke,z)})),(0,o.jsx)(d.A,Object.assign({className:ts.mediasSection},{children:(0,o.jsx)(Jt,Object.assign({medias:ke.medias},ue))})),(0,o.jsx)(d.A,Object.assign({className:ts.pollsSection},{children:ke.poll&&(0,o.jsx)(Le,Object.assign({feedObject:ke,pollObject:ke.poll,onChange:dt,visible:Boolean(ke.type!==L.Z.DISCUSSION&&!ke.html&&!ke.medias.length)},je))}))]}))]}):(0,o.jsx)(f.A,Object.assign({template:z},oe))}):(0,o.jsx)(a.Fragment,{children:ke?(0,o.jsx)(ct.A,{elevation:0,className:ts.snippet,image:(0,o.jsx)(F.A,Object.assign({},!ke.author.deleted&&{to:_e.url(At.USER_PROFILE_ROUTE_NAME,ke.author)},{onClick:ke.author.deleted?()=>Ie(!0):null},{children:(0,o.jsx)(zt.A,Object.assign({hide:!ke.author.community_badge},{children:(0,o.jsx)(p.A,{alt:ke.author.username,variant:"circular",src:ke.author.avatar,className:ts.avatar})}))})),primary:(0,o.jsxs)(d.A,{children:[(0,o.jsx)(F.A,Object.assign({},!ke.author.deleted&&{to:_e.url(At.USER_PROFILE_ROUTE_NAME,ke.author)},{onClick:ke.author.deleted?()=>Ie(!0):null,className:ts.username},{children:ke.author.username})),(0,o.jsx)(l.A,Object.assign({variant:"body2",className:ts.snippetContent},{children:(0,o.jsx)(F.A,Object.assign({to:_e.url((0,U.lg)(ke),(0,U.kB)(ke))},{children:(0,U.cO)(ke)}))}))]}),disableTypography:!0,secondary:(0,o.jsxs)(h.A,Object.assign({direction:"row",justifyContent:"space-between",spacing:2,alignItems:"center"},{children:[(0,o.jsx)(F.A,Object.assign({to:_e.url((0,U.lg)(ke),(0,U.kB)(ke)),className:ts.activityAt},{children:(0,o.jsx)(v.A,{component:"span",date:ke.added_at})})),(0,o.jsx)(r.A,Object.assign({component:F.A,to:_e.url((0,U.lg)(ke),(0,U.kB)(ke)),variant:"text",color:"secondary",size:"small"},{children:(0,o.jsx)(W.A,{id:"ui.feedObject.comment",defaultMessage:"ui.feedObject.comment"})}))]}))}):(0,o.jsx)(f.A,Object.assign({},oe))}),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(ss,Object.assign({id:k,className:_()(ts.root,T,`${S.H}-${z}`)},Ce,{children:[ke&&G&&(0,o.jsx)(tt.A,{endpoint:Z.A.FeedObjectMarkRead,data:{object:[ke.id]}}),kt]})),Pe&&(0,o.jsx)(ft.A,{open:Pe,handleClose:()=>Ie(!1)})]})}},84567:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){var n,o;return t||(t=250),function(){var a=s||this,i=+new Date,l=arguments;n&&i<n+t?(clearTimeout(o),o=setTimeout((function(){n=i,e.apply(a,l)}),t)):(n=i,e.apply(a,l))}}},88579:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.on=function(e,t,s,n){n=n||!1,e.addEventListener?e.addEventListener(t,s,n):e.attachEvent&&e.attachEvent("on"+t,(function(t){s.call(e,t||window.event)}))},t.off=function(e,t,s,n){n=n||!1,e.removeEventListener?e.removeEventListener(t,s,n):e.detachEvent&&e.detachEvent("on"+t,s)}},92699:(e,t,s)=>{"use strict";s.d(t,{H:()=>n});const n="SCFeedObject"},93428:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){var n=void 0,o=void 0,a=void 0,i=void 0,l=void 0,r=function r(){var c=+new Date-i;c<t&&c>=0?n=setTimeout(r,t-c):(n=null,s||(l=e.apply(a,o),n||(a=null,o=null)))};return function(){a=this,o=arguments,i=+new Date;var c=s&&!n;return n||(n=setTimeout(r,t)),c&&(l=e.apply(a,o),a=null,o=null),l}}},95754:(e,t,s)=>{"use strict";var n,o;s.d(t,{a:()=>n,x:()=>o}),function(e){e.SNIPPET="snippet",e.PREVIEW="preview",e.DETAIL="detail",e.SEARCH="search",e.SHARE="share"}(n||(n={})),function(e){e.RELEVANCE_ACTIVITIES="relevant_activities",e.RECENT_COMMENTS="recent_comments",e.FIRST_COMMENTS="first_comments",e.CONNECTIONS_COMMENTS="connections_comments"}(o||(o={}))},97100:(e,t,s)=>{"use strict";var n,o;s.d(t,{i:()=>n,j:()=>o}),function(e){e.HOME="home",e.EXPLORE="explore",e.CATEGORY="category",e.GROUP="group",e.EVENT="event"}(n||(n={})),function(e){e.COMMENT="comment",e.VOTE="vote",e.POLLVOTE="pollvote",e.FOLLOW="follow"}(o||(o={}))},98669:(e,t,s)=>{"use strict";var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}(),o=s(96540),a=u(o),i=u(s(5556)),l=s(88579),r=u(s(77334)),c=u(s(93428)),d=u(s(84567));function u(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var j=0,h=0,b=0,A=0,f="data-lazyload-listened",v=[],O=[],x=!1;try{var y=Object.defineProperty({},"passive",{get:function(){x=!0}});window.addEventListener("test",null,y)}catch(T){}var C=!!x&&{capture:!1,passive:!0},E=function(e){var t=e.ref;if(t instanceof HTMLElement){var s=(0,r.default)(t),n=e.props.overflow&&s!==t.ownerDocument&&s!==document&&s!==document.documentElement?function(e,t){var s=e.ref,n=void 0,o=void 0,a=void 0,i=void 0;try{var l=t.getBoundingClientRect();n=l.top,o=l.left,a=l.height,i=l.width}catch(T){n=j,o=h,a=A,i=b}var r=window.innerHeight||document.documentElement.clientHeight,c=window.innerWidth||document.documentElement.clientWidth,d=Math.max(n,0),u=Math.max(o,0),m=Math.min(r,n+a)-d,g=Math.min(c,o+i)-u,p=void 0,f=void 0,v=void 0,O=void 0;try{var x=s.getBoundingClientRect();p=x.top,f=x.left,v=x.height,O=x.width}catch(T){p=j,f=h,v=A,O=b}var y=p-d,C=f-u,E=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return y-E[0]<=m&&y+v+E[1]>=0&&C-E[0]<=g&&C+O+E[1]>=0}(e,s):function(e){var t=e.ref;if(!(t.offsetWidth||t.offsetHeight||t.getClientRects().length))return!1;var s=void 0,n=void 0;try{var o=t.getBoundingClientRect();s=o.top,n=o.height}catch(T){s=j,n=A}var a=window.innerHeight||document.documentElement.clientHeight,i=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return s-i[0]<=a&&s+n+i[1]>=0}(e);n?e.visible||(e.props.once&&O.push(e),e.visible=!0,e.forceUpdate()):e.props.once&&e.visible||(e.visible=!1,e.props.unmountIfInvisible&&e.forceUpdate())}},_=function(){O.forEach((function(e){var t=v.indexOf(e);-1!==t&&v.splice(t,1)})),O=[]},N=function(){for(var e=0;e<v.length;++e){var t=v[e];E(t)}_()},w=void 0,S=null,k=function(e){function t(e){m(this,t);var s=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.visible=!1,s.setRef=s.setRef.bind(s),s}return p(t,e),n(t,[{key:"componentDidMount",value:function(){var e=window,t=this.props.scrollContainer;t&&"string"==typeof t&&(e=e.document.querySelector(t));var s=void 0!==this.props.debounce&&"throttle"===w||"debounce"===w&&void 0===this.props.debounce;if(s&&((0,l.off)(e,"scroll",S,C),(0,l.off)(window,"resize",S,C),S=null),S||(void 0!==this.props.debounce?(S=(0,c.default)(N,"number"==typeof this.props.debounce?this.props.debounce:300),w="debounce"):void 0!==this.props.throttle?(S=(0,d.default)(N,"number"==typeof this.props.throttle?this.props.throttle:300),w="throttle"):S=N),this.props.overflow){var n=(0,r.default)(this.ref);if(n&&"function"==typeof n.getAttribute){var o=+n.getAttribute(f)+1;1===o&&n.addEventListener("scroll",S,C),n.setAttribute(f,o)}}else if(0===v.length||s){var a=this.props,i=a.scroll,u=a.resize;i&&(0,l.on)(e,"scroll",S,C),u&&(0,l.on)(window,"resize",S,C)}v.push(this),E(this)}},{key:"shouldComponentUpdate",value:function(){return this.visible}},{key:"componentWillUnmount",value:function(){if(this.props.overflow){var e=(0,r.default)(this.ref);if(e&&"function"==typeof e.getAttribute){var t=+e.getAttribute(f)-1;0===t?(e.removeEventListener("scroll",S,C),e.removeAttribute(f)):e.setAttribute(f,t)}}var s=v.indexOf(this);-1!==s&&v.splice(s,1),0===v.length&&"undefined"!=typeof window&&((0,l.off)(window,"resize",S,C),(0,l.off)(window,"scroll",S,C))}},{key:"setRef",value:function(e){e&&(this.ref=e)}},{key:"render",value:function(){var e=this.props,t=e.height,s=e.children,n=e.placeholder,o=e.className,i=e.classNamePrefix,l=e.style;return a.default.createElement("div",{className:i+"-wrapper "+o,ref:this.setRef,style:l},this.visible?s:n||a.default.createElement("div",{style:{height:t},className:i+"-placeholder"}))}}]),t}(o.Component);k.propTypes={className:i.default.string,classNamePrefix:i.default.string,once:i.default.bool,height:i.default.oneOfType([i.default.number,i.default.string]),offset:i.default.oneOfType([i.default.number,i.default.arrayOf(i.default.number)]),overflow:i.default.bool,resize:i.default.bool,scroll:i.default.bool,children:i.default.node,throttle:i.default.oneOfType([i.default.number,i.default.bool]),debounce:i.default.oneOfType([i.default.number,i.default.bool]),placeholder:i.default.node,scrollContainer:i.default.oneOfType([i.default.string,i.default.object]),unmountIfInvisible:i.default.bool,style:i.default.object},k.defaultProps={className:"",classNamePrefix:"lazyload",once:!1,offset:0,overflow:!1,resize:!1,scroll:!0,unmountIfInvisible:!1};t.Ay=k},99769:(e,t,s)=>{"use strict";s.d(t,{b4:()=>a,gt:()=>o,wE:()=>n});const n="widget_",o=10,a=150}}]);