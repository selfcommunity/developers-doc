"use strict";(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[16941],{67720:(e,t,n)=>{n.d(t,{Z:()=>E});var o=n(80102),a=n(83117),i=n(67294),r=n(63961),s=n(94780),l=n(41796),c=n(90948),u=n(71657),d=n(35097),m=n(85893);const p=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],g=(0,c.ZP)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,"vertical"===n.orientation&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&"vertical"===n.orientation&&t.withChildrenVertical,"right"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignRight,"left"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignLeft]}})((({theme:e,ownerState:t})=>(0,a.Z)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin"},t.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},t.light&&{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:(0,l.Fq)(e.palette.divider,.08)},"inset"===t.variant&&{marginLeft:72},"middle"===t.variant&&"horizontal"===t.orientation&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},"middle"===t.variant&&"vertical"===t.orientation&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},"vertical"===t.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},t.flexItem&&{alignSelf:"stretch",height:"auto"})),(({ownerState:e})=>(0,a.Z)({},e.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{content:'""',alignSelf:"center"}})),(({theme:e,ownerState:t})=>(0,a.Z)({},t.children&&"vertical"!==t.orientation&&{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`}})),(({theme:e,ownerState:t})=>(0,a.Z)({},t.children&&"vertical"===t.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`}})),(({ownerState:e})=>(0,a.Z)({},"right"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}}))),b=(0,c.ZP)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,"vertical"===n.orientation&&t.wrapperVertical]}})((({theme:e,ownerState:t})=>(0,a.Z)({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`},"vertical"===t.orientation&&{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`}))),h=i.forwardRef((function(e,t){const n=(0,u.Z)({props:e,name:"MuiDivider"}),{absolute:i=!1,children:l,className:c,component:h=(l?"div":"hr"),flexItem:E=!1,light:v=!1,orientation:f="horizontal",role:Z=("hr"!==h?"separator":void 0),textAlign:O="center",variant:y="fullWidth"}=n,C=(0,o.Z)(n,p),j=(0,a.Z)({},n,{absolute:i,component:h,flexItem:E,light:v,orientation:f,role:Z,textAlign:O,variant:y}),_=(e=>{const{absolute:t,children:n,classes:o,flexItem:a,light:i,orientation:r,textAlign:l,variant:c}=e,u={root:["root",t&&"absolute",c,i&&"light","vertical"===r&&"vertical",a&&"flexItem",n&&"withChildren",n&&"vertical"===r&&"withChildrenVertical","right"===l&&"vertical"!==r&&"textAlignRight","left"===l&&"vertical"!==r&&"textAlignLeft"],wrapper:["wrapper","vertical"===r&&"wrapperVertical"]};return(0,s.Z)(u,d.V,o)})(j);return(0,m.jsx)(g,(0,a.Z)({as:h,className:(0,r.Z)(_.root,c),role:Z,ref:t,ownerState:j},C,{children:l?(0,m.jsx)(b,{className:_.wrapper,ownerState:j,children:l}):null}))}));h.muiSkipListHighlight=!0;const E=h},51294:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(67294),a=n(74482),i=n(65001),r=n(24085),s=n(59219),l=n(99960),c=n(69721),u=n(87620);function d({id:e=null,commentObject:t=null,cacheStrategy:n=s.n2.CACHE_FIRST}){const d=t?t.id:e,m=(0,c.ht)(d),[p,g]=(0,o.useState)(n!==s.n2.NETWORK_ONLY?s.ZP.get(m,t):t),[b,h]=(0,o.useState)(null),E=(0,o.useMemo)((()=>()=>i.Z.request({url:r.Z.Comment.url({id:d}),method:r.Z.Comment.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[d]);return(0,o.useEffect)((()=>{!d||p&&n!==s.n2.STALE_WHILE_REVALIDATE||E().then((e=>{g(e),s.ZP.set(m,e)})).catch((t=>{s.ZP.delete(m),h(`CommentObject with id ${e} not found`),l.Y.error(a.h,`CommentObject with id ${e} not found`),l.Y.error(a.h,t.message)}))}),[d]),(0,u.F_)((()=>{t&&(g(t),s.ZP.set(m,p))}),[t]),{obj:p,setObj:g,error:b}}},47189:(e,t,n)=>{n.d(t,{Z:()=>E});var o,a=n(67294),i=n(74482);!function(e){e.ADDED_AT_DESC="-added_at",e.ADDED_AT_ASC="added_at",e.CONNECTION_DESC="-connection",e.CONNECTION_ASC="connection"}(o||(o={}));var r=n(24085),s=n(65001),l=n(59219),c=n(99960),u=n(31498),d=n(69721),m=n(22319);function p(e,t){const n=new URLSearchParams(e),o=Object.fromEntries(n.entries());return(o.offset?parseInt(o.offset):0)/t+1}const g={LOADING_NEXT:"_loading_next",LOADING_PREVIOUS:"_loading_previous",DATA_NEXT_LOADED:"_data_next_loaded",DATA_PREVIOUS_LOADED:"_data_previous_loaded",DATA_RELOAD:"_data_reload",DATA_RELOADED:"_data_reloaded",DATA_REVALIDATE:"_data_revalidate"};function b(e,t){switch(t.type){case g.LOADING_NEXT:return Object.assign(Object.assign({},e),{isLoadingNext:!0,isLoadingPrevious:!1});case g.LOADING_PREVIOUS:return Object.assign(Object.assign({},e),{isLoadingNext:!1,isLoadingPrevious:!0});case g.DATA_NEXT_LOADED:return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),{comments:t.payload.comments,isLoadingNext:!1,componentLoaded:!0,revalidate:!1,revalidateNext:null,revalidatePrevious:null,next:t.payload.next}),t.payload.page?{page:t.payload.page}:{}),t.payload.nextPage?{nextPage:t.payload.nextPage}:{}),t.payload.previous?{previous:t.payload.previous}:{}),t.payload.previousPage?{previousPage:t.payload.previousPage}:{}),t.payload.total?{total:t.payload.total}:{});case g.DATA_PREVIOUS_LOADED:return Object.assign(Object.assign(Object.assign(Object.assign({},e),{comments:t.payload.comments,isLoadingPrevious:!1,revalidate:!1,revalidateNext:null,revalidatePrevious:null,previous:t.payload.previous}),t.payload.page?{page:t.payload.page}:{}),t.payload.previousPage?{previousPage:t.payload.previousPage}:{});case g.DATA_RELOAD:return Object.assign(Object.assign({},e),{next:t.payload.next,previousPage:null,nextPage:null,comments:[],total:0,previous:null,isLoadingNext:!0,reload:!0});case g.DATA_RELOADED:return Object.assign(Object.assign({},e),{componentLoaded:!0,reload:!1});case g.DATA_REVALIDATE:return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),{componentLoaded:!0,revalidate:!0}),t.payload.revalidateNext?{revalidateNext:t.payload.revalidateNext}:{}),t.payload.revalidatePrevious?{revalidatePrevious:t.payload.revalidatePrevious}:{}),{reload:!1});default:throw new Error(`Unhandled type: ${t.type}`)}}function h(e){const t=e.obj?(0,d.AL)(e.obj.id,e.obj.type,e.next):null;let n={componentLoaded:!1,comments:[],total:0,next:e.next,previous:null,isLoadingNext:!1,isLoadingPrevious:!1,page:Math.ceil(e.offset/e.pageSize+1),reload:!1,revalidate:!1,revalidateNext:null,revalidatePrevious:null};if(n.nextPage=n.next?n.page+1:null,n.previousPage=n.previous?n.page-1:null,t&&l.ZP.hasKey(t)&&e.cacheStrategy!==l.n2.NETWORK_ONLY){const o=l.ZP.get(t);let a=Math.max(p(o.next,e.pageSize),1);const i=o.next?p(o.next,e.pageSize):null,r=o.previous?Math.max(p(o.previous,e.pageSize)-1,1):null;return Object.assign(Object.assign({},n),{total:o.count,next:o.next,previous:o.previous,comments:o.results,page:a,nextPage:i,previousPage:r,componentLoaded:!0})}return n}function E(e){const{id:t,feedObject:n,feedObjectType:E,offset:v=0,pageSize:f=5,orderBy:Z=o.ADDED_AT_DESC,parent:O,onChangePage:y,cacheStrategy:C=l.n2.NETWORK_ONLY}=e,{obj:j,setObj:_}=(0,u.Z)({id:t,feedObject:n,feedObjectType:E,cacheStrategy:C}),M=(j&&j.id,()=>{const e=v?`&offset=${v}`:"",n=O?`&parent=${O}`:"",o=j?j.id:t,a=j?j.type:E;return`${r.Z.Comments.url()}?${a}=${o}&limit=${f}&ordering=${Z}${e}${n}`}),[A,P]=(0,a.useReducer)(b,{obj:j,offset:v,pageSize:f,next:M(),cacheStrategy:C},h),N=(0,m.Z)(),S=(e,t=!0)=>{const n=(0,d.AL)(j.id,j.type,e);return t&&l.ZP.hasKey(n)&&C!==l.n2.NETWORK_ONLY?Promise.resolve(l.ZP.get(n)):s.Z.request({url:e,method:r.Z.Comments.method}).then((e=>e.status>=300?Promise.reject(e):(l.ZP.set(n,e.data),e.data.results.forEach((e=>l.ZP.set((0,d.ht)(e.id),e))),Promise.resolve(e.data))))};function x(){if(j&&A.next&&!A.isLoadingNext){const e=A.next;P({type:g.LOADING_NEXT}),S(e).then((t=>{if(N.current){let n=p(e,f),o=t.next?n+1:null;P({type:g.DATA_NEXT_LOADED,payload:Object.assign({page:n,nextPage:o,comments:[...A.comments,...t.results],next:t.next,total:t.count,componentLoaded:!0},v&&0===A.comments.length?{previous:t.previous,previousPage:t.previous?n-1:null}:{})}),y&&y(n)}})).catch((e=>{c.Y.error(i.h,e)})).then((()=>{N.current&&C===l.n2.STALE_WHILE_REVALIDATE&&P({type:g.DATA_REVALIDATE,payload:{revalidateNext:e}})}))}}return(0,a.useEffect)((()=>{N.current&&A.componentLoaded&&A.reload&&!A.isLoadingNext&&!A.isLoadingPrevious&&(P({type:g.DATA_RELOADED}),x())}),[A.reload,N]),(0,a.useEffect)((()=>{var e,t;N.current&&A.componentLoaded&&Boolean(j)&&!A.reload&&A.revalidate&&(e=A.revalidateNext,t=Boolean(A.revalidateNext),S(e,!1).then((e=>{let n,o=p(t?e.next:e.previous,f);if(t)n=A.comments.slice(0,A.comments.length-e.results.length).concat(e.results);else{let t=A.comments.slice(e.results.length,A.comments.length);n=e.results.concat(t)}N.current&&P({type:t?g.DATA_NEXT_LOADED:g.DATA_PREVIOUS_LOADED,payload:Object.assign(Object.assign({page:o,comments:n},t?{next:e.next}:{previous:e.previous}),{total:e.count})})})))}),[A.revalidate,N]),Object.assign(Object.assign({feedObject:j,setFeedObject:_},A),{pageSize:f,getNextPage:x,getPreviousPage:function(){if(j&&A.previous&&!A.isLoadingPrevious){const e=A.previous;P({type:g.LOADING_PREVIOUS}),S(e).then((t=>{if(N.current){let n=p(e,f),o=t.previous?n-1:null;P({type:g.DATA_PREVIOUS_LOADED,payload:{page:n,previousPage:o,comments:[...t.results,...A.comments],previous:t.previous}}),y&&y(n)}})).catch((e=>{c.Y.error(i.h,e)})).then((()=>{N.current&&C===l.n2.STALE_WHILE_REVALIDATE&&P({type:g.DATA_REVALIDATE,payload:{revalidatePrevious:e}})}))}},orderBy:Z,reload:()=>{N.current&&A.componentLoaded&&Boolean(j)&&!A.isLoadingNext&&!A.reload&&P({type:g.DATA_RELOAD,payload:{next:M()}})}})}},31498:(e,t,n)=>{n.d(t,{Z:()=>m});var o=n(67294),a=n(65001),i=n(24085),r=n(59219),s=n(99960),l=n(74482),c=n(49794),u=n(87620),d=n(69721);function m({id:e=null,feedObject:t=null,feedObjectType:n=c.q.POST||c.q.DISCUSSION||c.q.STATUS,cacheStrategy:m=r.n2.CACHE_FIRST}){const p=t?t.id:e,g=t?t.type:n,b=(0,d._j)(p,g),[h,E]=(0,o.useState)(m!==r.n2.NETWORK_ONLY?r.ZP.get(b,t):t),[v,f]=(0,o.useState)(null),Z=(0,o.useMemo)((()=>()=>a.Z.request({url:i.Z.FeedObject.url({type:g,id:p}),method:i.Z.FeedObject.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[p,g]);return(0,o.useEffect)((()=>{p&&g&&!t&&Z().then((e=>{E(e),r.ZP.set(b,e)})).catch((t=>{r.ZP.delete(b),f(`FeedObject with id ${e} not found`),s.Y.error(l.h,`FeedObject with id ${e} not found`),s.Y.error(l.h,t.message)}))}),[p,g]),(0,u.F_)((()=>{t&&(m===r.n2.NETWORK_ONLY?(E(t),r.ZP.set(b,t)):E(r.ZP.get(b,t)))}),[t]),{obj:h,setObj:e=>{r.ZP.set(b,e),E(Object.assign({},e))},error:v}}},90303:(e,t,n)=>{n.d(t,{Z:()=>g});var o=n(97582),a=n(67294),i=n(63902),r=n(90948),s=n(88078),l=n(2734),c=n(44267),u=n(115),d=n(18426);const m={root:`${d.B}-skeleton-root`,avatar:`${d.B}-avatar`,primaryContent:`${d.B}-primary-content`},p=(0,r.ZP)(u.Z,{name:d.B,slot:"SkeletonRoot"})((()=>({})));function g(e){const{WidgetProps:t}=e,n=(0,o._T)(e,["WidgetProps"]),r=(0,l.Z)();return a.createElement(p,Object.assign({className:m.root,disableTypography:!0},n,{image:a.createElement(s.Z,{animation:"wave",variant:"circular",width:r.selfcommunity.user.avatar.sizeMedium,height:r.selfcommunity.user.avatar.sizeMedium,className:m.avatar}),secondary:a.createElement(a.Fragment,null,a.createElement(i.Z,Object.assign({},t),a.createElement(c.Z,null,a.createElement(s.Z,{animation:"wave",height:10,width:"80%",className:m.primaryContent}),a.createElement(s.Z,{animation:"wave",height:10,width:"40%"}))))}))}},18426:(e,t,n)=>{n.d(t,{B:()=>o});const o="SCCommentObject"},87459:(e,t,n)=>{n.d(t,{Z:()=>H});var o=n(97582),a=n(67294),i=n(90948),r=n(63902),s=n(44012),l=n(5616),c=n(69417),u=n(87952),d=n(44267),m=n(15861),p=n(51575),g=n(94184),b=n.n(g),h=n(75459),E=n(90303),v=n(20166),f=n(80317),Z=n(80366),O=n(52180),y=n(91568),C=n(70050),j=n(20377),_=n(29628),M=n(115),A=n(49794),P=n(65001),N=n(24085),S=n(59219),x=n(99960),T=n(53704),k=n(68689),I=n(41538),D=n(51294),L=n(47189),R=n(69721),$=n(97265),w=n(12132),B=n(65580),V=n(85050),F=n(85966),W=n(68585),q=n(68456),z=n(18426);const U={root:`${z.B}-root`,comment:`${z.B}-comment`,nestedComments:`${z.B}-nested-comments`,avatar:`${z.B}-avatar`,content:`${z.B}-content`,showMoreContent:`${z.B}-show-more-content`,author:`${z.B}-author`,textContent:`${z.B}-text-content`,commentActionsMenu:`${z.B}-comment-actions-menu`,deleted:`${z.B}-deleted`,activityAt:`${z.B}-activity-at`,vote:`${z.B}-vote`,voteAudience:`${z.B}-vote-audience`,reply:`${z.B}-reply`,contentSubSection:`${z.B}-comment-sub-section`},Y=(0,i.ZP)(l.Z,{name:z.B,slot:"Root"})((()=>({})));const H=function(e){const t=(0,_.Z)({props:e,name:z.B}),{id:n=`comment_object_${t.commentObjectId?t.commentObjectId:t.commentObject?t.commentObject.id:""}`,className:i,commentObjectId:g,commentObject:H,feedObjectId:K,feedObject:J,feedObjectType:X=A.q.POST,commentReply:G,onOpenReply:Q,onDelete:ee,onCollapsed:te,onRestore:ne,onVote:oe,elevation:ae=0,truncateContent:ie=!1,CommentObjectSkeletonProps:re={elevation:ae,WidgetProps:{variant:"outlined"}},CommentObjectReplyProps:se={elevation:ae,WidgetProps:{variant:"outlined"}},linkableCommentDateTime:le=!0,cacheStrategy:ce=S.n2.NETWORK_ONLY,CommentsObjectComponentProps:ue={}}=t,de=(0,o._T)(t,["id","className","commentObjectId","commentObject","feedObjectId","feedObject","feedObjectType","commentReply","onOpenReply","onDelete","onCollapsed","onRestore","onVote","elevation","truncateContent","CommentObjectSkeletonProps","CommentObjectReplyProps","linkableCommentDateTime","cacheStrategy","CommentsObjectComponentProps"]),me=(0,T.RM)(),pe=(0,a.useContext)(k.K8),ge=(0,I.sy)(),{enqueueSnackbar:be}=(0,j.Ds)(),{obj:he,setObj:Ee}=(0,D.Z)({id:g,commentObject:H,cacheStrategy:ce}),[ve,fe]=(0,a.useState)(G),[Ze,Oe]=(0,a.useState)(!1),[ye,Ce]=(0,a.useState)(!1),[je,_e]=(0,a.useState)(null),Me=(0,L.Z)({id:K,feedObject:J,feedObjectType:X,orderBy:v.p.ADDED_AT_DESC,parent:H?H.id:g,cacheStrategy:ce}),[Ae,Pe]=(0,a.useState)(!1),Ne=e=>{Ee(e),oe&&oe(e)};function Se(e){S.ZP.set(R.ht(he.id),e),Ee(e);const t=(0,C.Wu)(he);S.ZP.deleteKeysWithPrefix(R.NX(e[t].id,t))}function xe(e){return a.createElement(a.Fragment,null,le?a.createElement($.Z,{to:ge.url(w.COMMENT_ROUTE_NAME,(0,C.p3)(e)),className:U.activityAt},a.createElement(y.Z,{date:e.added_at})):a.createElement(y.Z,{date:e.added_at}))}function Te(e){return a.createElement(c.Z,{className:U.reply,variant:"text",onClick:()=>ke(e)},a.createElement(s.Z,{id:"ui.commentObject.reply",defaultMessage:"ui.commentObject.reply"}))}function ke(e){pe.user?(fe(e),Q&&Q(e)):me.settings.handleAnonymousAction()}const Ie=e=>P.Z.request({url:N.Z.NewComment.url({}),method:N.Z.NewComment.method,data:Object.assign(Object.assign({[`${J?J.type:X}`]:J?J.id:K,parent:ve.parent?ve.parent:ve.id},ve.parent?{in_reply_to:ve.id}:{}),{text:e})}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)));function De(e){B.IT(pe.user)?be(a.createElement(s.Z,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3}):(Oe(!0),Ie(e).then((e=>{const t=e;t.summary_truncated=!1,Se(Object.assign(Object.assign({},he),{comment_count:he.comment_count+1,latest_comments:[...he.latest_comments,t]})),fe(null),Oe(!1)})).catch((e=>{x.Y.error(h.J,e),be(a.createElement(s.Z,{id:"ui.common.error.action",defaultMessage:"ui.common.error.action"}),{variant:"error",autoHideDuration:3e3}),Oe(!1)})))}function Le(e){Se(e),ee&&ee(e)}function Re(e){Se(Object.assign({},he,{collapsed:!he.collapsed})),te&&te(e)}function $e(e){Se(Object.assign({},he,{deleted:!1})),ne&&ne(e)}function we(e){_e(e)}function Be(){_e(null)}const Ve=e=>P.Z.request({url:N.Z.UpdateComment.url({id:je.id}),method:N.Z.UpdateComment.method,data:{text:e}}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)));function Fe(e){B.IT(pe.user)?be(a.createElement(s.Z,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3}):(Ce(!0),Ve(e).then((e=>{Se(Object.assign({},he,{text:e.text,html:e.html,summary:e.summary,added_at:e.added_at})),_e(null),Ce(!1)})).catch((e=>{x.Y.error(h.J,e),be(a.createElement(s.Z,{id:"ui.common.error.action",defaultMessage:"ui.common.error.action"}),{variant:"error",autoHideDuration:3e3})})))}let We;return We=he?function(e){if(e.deleted&&(!pe.user||pe.user&&!B.B2(pe.user)&&pe.user.id!==e.author.id))return null;const t="summary_truncated"in e&&e.summary_truncated,n="summary_html"in e&&ie&&t?e.summary_html:e.html,o=(0,C.P3)(n,ge.url);return a.createElement(a.Fragment,{key:e.id},je&&je.id===e.id?a.createElement(l.Z,{className:U.comment},a.createElement(Z.Z,Object.assign({text:e.html,autoFocus:!0,id:`edit-${e.id}`,onSave:Fe,onCancel:Be,editable:!Ze||!ye},se))):a.createElement(M.Z,{elevation:0,className:U.comment,image:a.createElement($.Z,Object.assign({},!e.author.deleted&&{to:ge.url(w.USER_PROFILE_ROUTE_NAME,e.author)},{onClick:e.author.deleted?()=>Pe(!0):null}),a.createElement(q.Z,{hide:!he.author.community_badge},a.createElement(u.Z,{alt:he.author.username,variant:"circular",src:e.author.avatar,className:U.avatar}))),disableTypography:!0,primary:a.createElement(a.Fragment,null,a.createElement(r.Z,Object.assign({className:U.content,elevation:ae},de),a.createElement(d.Z,{className:b()({[U.deleted]:he&&he.deleted})},a.createElement($.Z,Object.assign({className:U.author},!e.author.deleted&&{to:ge.url(w.USER_PROFILE_ROUTE_NAME,e.author)},{onClick:e.author.deleted?()=>Pe(!0):null}),a.createElement(m.Z,{component:"span"},e.author.username)),a.createElement(m.Z,{className:U.textContent,variant:"body2",gutterBottom:!0,dangerouslySetInnerHTML:{__html:o}}),t&&ie&&a.createElement($.Z,{to:ge.url(w.COMMENT_ROUTE_NAME,(0,C.p3)(e)),className:U.showMoreContent},a.createElement(s.Z,{id:"ui.commentObject.showMore",defaultMessage:"ui.commentObject.showMore"}))),pe.user&&a.createElement(l.Z,{className:U.commentActionsMenu},a.createElement(O.Z,{commentObject:e,onRestoreContribution:$e,onHideContribution:Re,onDeleteContribution:Le,onEditContribution:we}))),a.createElement(l.Z,{component:"span",className:U.contentSubSection},xe(e),a.createElement(p.Z,null),a.createElement(V.Z,{size:"small",className:U.vote,contributionId:e.id,contributionType:A.q.COMMENT,contribution:e,onVote:Ne}),a.createElement(p.Z,null),Te(e),a.createElement(F.Z,{size:"small",className:U.voteAudience,contributionId:e.id,contributionType:A.q.COMMENT,contribution:e})))}),e.comment_count>0&&a.createElement(l.Z,{className:U.nestedComments},function(e){return a.createElement(f.Z,Object.assign({feedObject:Me.feedObject,feedObjectType:Me.feedObject?Me.feedObject.type:X,hideAdvertising:!0,comments:[].concat(Me.comments).reverse(),endComments:e.latest_comments,previous:e.comment_count>e.latest_comments.length?Me.next:null,isLoadingPrevious:Me.isLoadingNext,handlePrevious:Me.getNextPage,CommentComponentProps:Object.assign(Object.assign({onOpenReply:ke,CommentObjectSkeletonProps:re,elevation:ae,linkableCommentDateTime:le},de),{cacheStrategy:ce,truncateContent:ie}),CommentsObjectSkeletonProps:{count:1,CommentObjectSkeletonProps:re},inPlaceLoadMoreContents:!0},ue,{cacheStrategy:ce}))}(e)),pe.user&&ve&&(ve.id===e.id||ve.parent===e.id)&&!e.parent&&a.createElement(l.Z,{className:U.nestedComments},a.createElement(Z.Z,Object.assign({text:`@${ve.author.username}, `,autoFocus:!0,key:`reply-${ve.id}`,id:`reply-${ve.id}`,onReply:De,editable:!Ze},se))))}(he):a.createElement(E.Z,Object.assign({},re)),a.createElement(a.Fragment,null,a.createElement(Y,{id:n,className:b()(U.root,i)},We),Ae&&a.createElement(W.Z,{open:Ae,handleClose:()=>Pe(!1)}))}},80366:(e,t,n)=>{n.d(t,{Z:()=>O});var o=n(97582),a=n(67294),i=n(90948),r=n(63902),s=n(44012),l=n(87952),c=n(31536),u=n(68689),d=n(27103),m=n(94184),p=n.n(m),g=n(31812),b=n(115),h=n(68456),E=n(29628);const v="SCCommentObjectReply",f={root:`${v}-root`,comment:`${v}-comment`,hasValue:`${v}-has-value`,avatar:`${v}-avatar`,actions:`${v}-actions`,buttonReply:`${v}-button-reply`,buttonSave:`${v}-button-save`,buttonCancel:`${v}-button-cancel`},Z=(0,i.ZP)(b.Z,{name:v,slot:"Root"})((()=>({})));const O=function(e){const t=(0,E.Z)({props:e,name:v}),{id:n="CommentObjectReply",className:i,elevation:m=0,autoFocus:b=!1,onReply:O,onSave:y,onCancel:C,editable:j=!0,text:_="",WidgetProps:M={variant:"outlined"}}=t,A=(0,o._T)(t,["id","className","elevation","autoFocus","onReply","onSave","onCancel","editable","text","WidgetProps"]),P=(0,u.LD)(),[N,S]=(0,a.useState)(_);let x=(0,a.useRef)();(0,a.useEffect)((()=>{b&&T()}),[b]);const T=()=>{x.current&&x.current.focus()},k=(0,a.useMemo)((()=>{const e=N.trim();return""===e||'<p class="SCEditor-paragraph"></p>'===e||'<p class="SCEditor-paragraph"><br></p>'===e}),[N]);return a.createElement(Z,Object.assign({id:n},A,{disableTypography:!0,onClick:T,elevation:m,className:p()(f.root,i),image:P.user?a.createElement(h.Z,{hide:!P.user.community_badge},a.createElement(l.Z,{alt:P.user.username,variant:"circular",src:P.user.avatar,classes:{root:f.avatar}})):a.createElement(l.Z,{variant:"circular",className:f.avatar}),secondary:a.createElement(r.Z,Object.assign({className:p()(f.comment,{[f.hasValue]:!k})},M),a.createElement(d.Z,{ref:x,onChange:e=>{S(e)},defaultValue:N,editable:j,uploadImage:!0}),!k&&a.createElement(c.Z,{direction:"row",spacing:2,className:f.actions},O&&a.createElement(g.Z,{variant:"outlined",size:"small",onClick:()=>{O&&O(N)},loading:!j,className:f.buttonReply},a.createElement(s.Z,{id:"ui.commentObject.replyComment.reply",defaultMessage:"ui.commentObject.replyComment.reply"})),y&&a.createElement(a.Fragment,null,C&&a.createElement(g.Z,{variant:"text",size:"small",onClick:()=>{C&&C()},disabled:!j,color:"inherit",className:f.buttonCancel},a.createElement(s.Z,{id:"ui.commentObject.replyComment.cancel",defaultMessage:"ui.commentObject.replyComment.cancel"})),a.createElement(g.Z,{variant:"outlined",size:"small",onClick:()=>{y&&y(N)},loading:!j,className:f.buttonSave},a.createElement(s.Z,{id:"ui.commentObject.replyComment.save",defaultMessage:"ui.commentObject.replyComment.save"})))))}))}},52532:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(97582),a=n(67294),i=n(90948),r=n(90303),s=n(5616),l=n(44764);const c={root:`${l.B}-skeleton-root`},u=(0,i.ZP)(s.Z,{name:l.B,slot:"SkeletonRoot"})((()=>({})));function d(e){const{count:t=3,CommentObjectSkeletonProps:n={}}=e,i=(0,o._T)(e,["count","CommentObjectSkeletonProps"]);return a.createElement(u,Object.assign({className:c.root},i),[...Array(t)].map(((e,t)=>a.createElement(r.Z,Object.assign({key:t},n)))))}},44764:(e,t,n)=>{n.d(t,{B:()=>o});const o="SCCommentsObject"},80317:(e,t,n)=>{n.d(t,{Z:()=>D});var o=n(97582),a=n(67294),i=n(90948),r=n(44012),s=n(87459),l=n(90303),c=n(15861),u=n(5616),d=n(69417),m=n(31536),p=n(94184),g=n.n(p),b=n(44854),h=n(29628),E=n(52532),v=n(97650),f=n(70050),Z=n(49794),O=n(83781),y=n(59219),C=n(79991),j=n(72871),_=n(85472),M=n(68689),A=n(66380),P=n(41538),N=n(31498),S=n(97265),x=n(44764);const T={root:`${x.B}-root`,loadNextCommentsButton:`${x.B}-load-more-comments-button`,loadPreviousCommentsButton:`${x.B}-load-previous-comments-button`,paginationLink:`${x.B}-pagination-link`,pagination:`${x.B}-pagination`,commentsCounter:`${x.B}-comments-counter`,commentNotFound:`${x.B}-comment-not-found`,noOtherComments:`${x.B}-no-other-comment`},k=(0,i.ZP)(u.Z,{name:x.B,slot:"Root"})((()=>({}))),I=[_.Rl,_.OM];const D=function(e){const t=(0,h.Z)({props:e,name:x.B}),{id:n=`comments_object_${t.feedObjectId?t.feedObjectId:t.feedObject?t.feedObject.id:""}`,className:i,feedObjectId:p,feedObject:D,feedObjectType:L=Z.q.POST,CommentComponent:R=s.Z,CommentComponentProps:$={variant:"outlined"},CommentObjectSkeletonProps:w={elevation:0,WidgetProps:{variant:"outlined"}},CommentsObjectSkeletonProps:B={},next:V,isLoadingNext:F,handleNext:W,previous:q,isLoadingPrevious:z,handlePrevious:U,totalLoadedComments:Y,totalComments:H,page:K,previousPage:J,nextPage:X,comments:G=[],startComments:Q=[],endComments:ee=[],infiniteScrolling:te=!1,hideAdvertising:ne=!1,disablePaginationLinks:oe=!1,hidePaginationLinks:ae=!0,inPlaceLoadMoreContents:ie=!0,paginationLinksPageQueryParam:re=j.vT,PaginationLinkProps:se={},cacheStrategy:le=y.n2.NETWORK_ONLY}=t,ce=(0,o._T)(t,["id","className","feedObjectId","feedObject","feedObjectType","CommentComponent","CommentComponentProps","CommentObjectSkeletonProps","CommentsObjectSkeletonProps","next","isLoadingNext","handleNext","previous","isLoadingPrevious","handlePrevious","totalLoadedComments","totalComments","page","previousPage","nextPage","comments","startComments","endComments","infiniteScrolling","hideAdvertising","disablePaginationLinks","hidePaginationLinks","inPlaceLoadMoreContents","paginationLinksPageQueryParam","PaginationLinkProps","cacheStrategy"]),ue=(0,M.LD)(),de=(0,A.ko)(),me=(0,P.sy)(),{obj:pe}=(0,N.Z)({id:p,feedObject:D,feedObjectType:L,cacheStrategy:le}),ge=G.map((e=>e.id)),be=Math.floor(Math.random()*(Math.min(G.length,5)-1+1)+1),he=(0,a.useMemo)((()=>{const e={};return I.map((t=>e[t]=t in de.preferences?de.preferences[t].value:null)),e}),[de.preferences]),Ee=(0,a.useMemo)((()=>()=>pe&&!ne&&he[_.Rl]&&(he[_.OM]&&null===ue.user||!he[_.OM])?a.createElement(b.Z,Object.assign({position:O.n.POSITION_IN_COMMENTS},pe.categories.length&&{categoriesId:pe.categories.map((e=>e.id))})):null),[JSON.stringify(pe)]);function ve(e){setTimeout((()=>{const t=document.getElementById(`reply-${e.id}`);t&&t.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}),200)}function fe(e,t){te&&e&&!F&&W&&W()}function Ze(e){return e.filter((e=>!ge.includes(e.id)))}function Oe(e){return a.createElement(a.Fragment,null,e.map(((e,t)=>a.createElement(a.Fragment,{key:t},a.createElement(R,Object.assign({key:e.id,commentObject:e,onOpenReply:ve,feedObject:pe},$,{CommentObjectSkeletonProps:w})),be===t&&Ee()))))}let ye=a.createElement(a.Fragment,null);return ye=!pe||(z||F)&&!G.length?a.createElement(E.Z,Object.assign({CommentObjectSkeletonProps:w},B)):a.createElement(a.Fragment,null,q&&a.createElement(u.Z,{className:T.pagination},z&&a.createElement(l.Z,Object.assign({},w,{count:1})),!z&&a.createElement(a.Fragment,null,a.createElement(d.Z,Object.assign({variant:"text"},ie?{onClick:U}:{component:S.Z,to:`${me.url((0,f.Ig)(D),(0,f.p3)(D))}`},{disabled:z,color:"inherit",classes:{root:T.loadPreviousCommentsButton}}),a.createElement(r.Z,{id:"ui.commentsObject.loadPreviousComments",defaultMessage:"ui.commentsObject.loadPreviousComments"})),!oe&&J&&q&&a.createElement(S.Z,Object.assign({to:`${(0,C.Ee)(me.url((0,f.Ig)(D),(0,f.p3)(D)),[{[re]:J}])}`,className:g()({[T.paginationLink]:ae})},se),a.createElement(r.Z,{id:"ui.commentsObject.previousComments",defaultMessage:"ui.commentsObject.previousComments"})))),Oe(G),V&&a.createElement(u.Z,{className:T.pagination},F?a.createElement(l.Z,Object.assign({},w,{count:1})):a.createElement(a.Fragment,null,a.createElement(v.df,{as:"div",onChange:fe,threshold:.5},a.createElement(m.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2},a.createElement(d.Z,Object.assign({variant:"text"},ie?{onClick:W}:{component:S.Z,to:X&&V?`${(0,C.Ee)(me.url((0,f.Ig)(D),(0,f.p3)(D)),[{[re]:X}])}`:`${me.url((0,f.Ig)(D),(0,f.p3)(D))}`},{disabled:F,color:"inherit",classes:{root:T.loadNextCommentsButton}}),a.createElement(r.Z,{id:"ui.commentsObject.loadMoreComments",defaultMessage:"ui.commentsObject.loadMoreComments"})),Boolean(H&&Y)&&a.createElement(c.Z,{variant:"body1",classes:{root:T.commentsCounter}},a.createElement(r.Z,{id:"ui.commentsObject.numberOfComments",defaultMessage:"ui.commentsObject.numberOfComments",values:{loaded:Y,total:H}})))),!oe&&X&&V&&a.createElement(S.Z,Object.assign({to:`${(0,C.Ee)(me.url((0,f.Ig)(D),(0,f.p3)(D)),[{[re]:X}])}`,className:g()({[T.paginationLink]:ae})},se),a.createElement(r.Z,{id:"ui.commentsObject.nextComments",defaultMessage:"ui.commentsObject.nextComments"}))))),a.createElement(k,Object.assign({id:n,className:g()(T.root,i)},ce),Oe(Ze(Q)),ye,Oe(Ze(ee)))}},85966:(e,t,n)=>{n.d(t,{Z:()=>N});var o=n(97582),a=n(67294),i=n(90948),r=n(31812),s=n(94184),l=n.n(s),c=n(29628),u=n(67564),d=n(5616),m=n(11703),p=n(40044),g=n(15861),b=n(78462),h=n(97212),E=n(87952),v=n(44012),f=n(68689),Z=n(34927),O=n(39154),y=n(52271),C=n(79558),j=n(37089);const _="SCVoteAudienceButton",M={root:`${_}-root`,reactionList:`${_}-reaction-list`,dialogRoot:`${_}-dialog-root`,dialogTabs:`${_}-dialog-tabs`,dialogVoteBadge:`${_}-dialog-vote-badge`},A=(0,i.ZP)(r.Z,{name:_,slot:"Root",overridesResolver:(e,t)=>[t.root,t.voted]})((({theme:e})=>({}))),P=(0,i.ZP)(O.Z,{name:_,slot:"Root",overridesResolver:(e,t)=>t.dialogRoot})((({theme:e})=>({})));const N=function(e){const t=(0,c.Z)({props:e,name:_}),{className:n,contributionId:i,contributionType:r,contribution:s=null}=t,O=(0,o._T)(t,["className","contributionId","contributionType","contribution"]),[N,S]=(0,a.useState)(!1),[x,T]=(0,a.useState)(0),k=(0,f.LD)(),I=(e,t)=>{T(t)},{isLoading:D,contributionVoted:L,contributionVoteCount:R,contributionReactionsCount:$,reactions:w,error:B,handleFetchVoteList:V,voteList:F,isLoadingVoteList:W,voteListHasNext:q}=(0,Z.Z)({id:i,contributionType:r,contribution:s});(0,a.useEffect)((()=>{!W&&N&&V({reset:!0})}),[N]),(0,a.useEffect)((()=>{if(W||!N)return;if(0===x)return void V({reset:!0});const{reaction:e}=$[x-1];V({reaction:e,reset:!0})}),[x]);const z=(0,a.useMemo)((()=>!w.default||D||B?k.user&&L?a.createElement(u.Z,null,"thumb_up"):a.createElement(u.Z,null,"thumb_up_off_alt"):a.createElement(d.Z,{className:M.reactionList},$&&$.slice(0,3).map(((e,t)=>a.createElement(u.Z,{key:e.reaction.id},a.createElement("img",{alt:e.reaction.label,src:e.reaction.image,width:"100%",height:"100%"})))))),[w.default,D,B,$,k.user,L]),U=(0,a.useMemo)((()=>w.default&&!D?a.createElement(m.Z,{className:M.dialogTabs,value:x,onChange:I,"aria-label":"reactions"},a.createElement(p.Z,{label:a.createElement(v.Z,{defaultMessage:"ui.voteAudienceButton.dialog.tab.all",id:"ui.voteAudienceButton.dialog.tab.all"})}),$&&$.map((e=>a.createElement(p.Z,{key:e.reaction.id,label:a.createElement(a.Fragment,null,a.createElement(u.Z,null,a.createElement("img",{alt:e.reaction.label,src:e.reaction.image,width:"100%",height:"100%"})),e.count)})))):a.createElement(v.Z,{defaultMessage:"ui.voteAudienceButton.dialog.title",id:"ui.voteAudienceButton.dialog.title"})),[x,w,$]);return a.createElement(a.Fragment,null,a.createElement(A,Object.assign({onClick:e=>{S(!0)},disabled:D||Boolean(B)||0===R,loading:D,className:l()(M.root,n)},O),z,"\xa0",k.user&&L?1===R?a.createElement(v.Z,{id:"ui.voteAudienceButton.votedOnlyByMe",defaultMessage:"ui.voteAudienceButton.votedOnlyByMe"}):a.createElement(v.Z,{id:"ui.voteAudienceButton.votedByMe",defaultMessage:"ui.voteAudienceButton.votedByMe",values:{total:R-1}}):a.createElement(v.Z,{id:"ui.voteAudienceButton.votes",defaultMessage:"ui.voteAudienceButton.votes",values:{total:R}})),N&&a.createElement(P,{title:U,onClose:e=>{S(!1)},open:N,DialogContentProps:{}},W&&!F?a.createElement(y.Z,{size:50}):a.createElement(C.Z,{dataLength:F.length,next:()=>V({}),hasMoreNext:q,loaderNext:a.createElement(y.Z,{size:30}),height:400,endMessage:a.createElement(g.Z,{variant:"body2",align:"center",fontWeight:"bold"},a.createElement(v.Z,{id:"ui.voteAudienceButton.dialog.end",defaultMessage:"ui.voteAudienceButton.dialog.end"}))},a.createElement(b.Z,null,F.map((e=>a.createElement(h.ZP,{key:e.user.id},a.createElement(j.Z,{elevation:0,user:e.user,badgeContent:a.createElement(E.Z,{className:M.dialogVoteBadge},e.reaction?a.createElement(u.Z,null,a.createElement("img",{alt:e.reaction.label,src:e.reaction.image,width:"100%",height:"100%"})):a.createElement(u.Z,null,"thumb_up"))}))))))))}},52271:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(67294),a=n(98456),i=n(90948),r=n(5616);const s=(0,i.ZP)(r.Z,{name:"SCCentralProgress",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({display:"flex",flexDirection:"column",justifyContent:"center",height:"calc(100% - 100px)",padding:50})));function l(e){return o.createElement(s,null,o.createElement(a.Z,Object.assign({sx:{margin:"0 auto",display:"block"}},e)))}},52180:(e,t,n)=>{n.d(t,{Z:()=>ve});var o=n(97582),a=n(67294),i=n(90948),r=n(54490),s=n(86896),l=n(44012),c=n(48831),u=n(67564),d=n(52271),m=n(75459),p=n(99960),g=n(77488),b=n(20377),h=n(70050),E=n(94184),v=n.n(E),f=n(27560),Z=n(5616),O=n(2734),y=n(98396),C=n(18972),j=n(48885),_=n(59334),M=n(90263),A=n(57922),P=n(15861),N=n(98456),S=n(84118),x=n(67720),T=n(93946),k=n(39005),I=n(96514),D=n(90629),L=n(23926);const R=0,$=1,w=2,B=3,V=4,F=[R,$,w,B,V],W="hidden",q="deleted",z="hide",U="delete";var Y=n(65001),H=n(24085),K=n(53704),J=n(68689),X=n(41538),G=n(31498),Q=n(51294),ee=n(65580),te=n(49794);const ne="_general_section",oe="_flag_contribution_section",ae="_hide_contribution_section",ie="_delete_contribution_section",re="_get_permalink",se="_edit_contribution",le="_delete_contribution",ce="_restore_contribution",ue="_suspend_notification_contribution",de="_moderate_contribution_hidden",me="_moderate_contribution_deleted",pe="SCContributionActionsMenu",ge={root:`${pe}-root`,button:`${pe}-button`,popper:`${pe}-popper`,paper:`${pe}-paper`,item:`${pe}-item`,itemText:`${pe}-item-text`,subItem:`${pe}-sub-item`,subItemText:`${pe}-sub-item-text`,footerSubItems:`${pe}-footer-sub-items`,selectedIcon:`${pe}-selected-icon`,sectionBadge:`${pe}-section-badge`,sectionWithSelectionIcon:`${pe}-section-with-selection-icon`,visibilityIcons:`${pe}-visibility-icons`},be=(0,i.ZP)(c.Z,{name:pe,slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({zIndex:2,[`&.${ge.popper}`]:{overflow:"visible",filter:"drop-shadow(0px -1px 5px rgba(0,0,0,0.10))",mt:1.5},[`& .${ge.paper}`]:{width:280},[`& .${ge.footerSubItems}`]:{margin:"10px 10px 10px 17px",border:"1px solid #dddddd",padding:5,borderRadius:3,fontSize:11},[`& .${ge.selectedIcon}`]:{marginLeft:2,"&.MuiListItemIcon-root":{width:"10px"},"& svg":{fontSize:"1.4rem"}},[`& .${ge.sectionBadge}`]:{padding:0,minWidth:15,height:15,top:3},[`& .${ge.sectionWithSelectionIcon}`]:{fontSize:12,color:"#FFF"}}))),he=(0,i.ZP)(Z.Z,{name:pe,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({}))),Ee=(0,r.vU)({title:{id:"ui.contributionActionMenu.title",defaultMessage:"ui.contributionActionMenu.title"},spam:{id:"ui.contributionActionMenu.spam",defaultMessage:"ui.contributionActionMenu.spam"},aggressive:{id:"ui.contributionActionMenu.aggressive",defaultMessage:"ui.contributionActionMenu.aggressive"},vulgar:{id:"ui.contributionActionMenu.vulgar",defaultMessage:"ui.contributionActionMenu.vulgar"},poorContent:{id:"ui.contributionActionMenu.poorContent",defaultMessage:"ui.contributionActionMenu.poorContent"},offtopic:{id:"ui.contributionActionMenu.offtopic",defaultMessage:"ui.contributionActionMenu.offtopic"},footer:{id:"ui.contributionActionMenu.footer",defaultMessage:"ui.contributionActionMenu.footer"}});function ve(e){const{className:t,feedObjectId:n,feedObject:i,feedObjectType:r=te.q.POST,commentObjectId:c,commentObject:E,onFlagContribution:pe,onEditContribution:ve,onHideContribution:fe,onDeleteContribution:Ze,onRestoreContribution:Oe,onSuspendNotificationContribution:ye,PopperProps:Ce={}}=e,je=(0,o._T)(e,["className","feedObjectId","feedObject","feedObjectType","commentObjectId","commentObject","onFlagContribution","onEditContribution","onHideContribution","onDeleteContribution","onRestoreContribution","onSuspendNotificationContribution","PopperProps"]),_e=(0,s.Z)(),Me=(0,O.Z)(),Ae=(0,y.Z)(Me.breakpoints.down("md")),Pe=(0,a.useContext)(K.zL),Ne=(0,a.useContext)(J.K8),Se=Ne.user?Ne.user.id:null,xe=(0,X.sy)(),{enqueueSnackbar:Te}=(0,b.Ds)(),{obj:ke,setObj:Ie}=(0,G.Z)({id:n,feedObject:i,feedObjectType:r}),{obj:De,setObj:Le}=(0,Q.Z)({id:c,commentObject:E}),[Re,$e]=(0,a.useState)(!1),[we,Be]=(0,a.useState)(null),[Ve,Fe]=(0,a.useState)(!1),[We,qe]=(0,a.useState)(null),[ze,Ue]=(0,a.useState)(!1),[Ye,He]=(0,a.useState)(null),[Ke,Je]=(0,a.useState)(null),[Xe,Ge]=(0,a.useState)(null),[Qe,et]=(0,a.useState)(null),[tt,nt]=(0,a.useState)(!1),[ot,at]=(0,a.useState)(null),[it,rt]=(0,a.useState)(null),st=De||ke;let lt=(0,a.useRef)(null);const ct=(0,a.useMemo)((()=>()=>{let e=[];return Ne.user&&Boolean(st)&&Se!==st.author.id&&!st.deleted&&!st.collapsed&&e.push(oe),ee.B2(Ne.user)&&(e.push(ae),e.push(ie)),e}),[st,Se])(),ut={[oe]:function(){const e=we===oe;return a.createElement(Z.Z,null,!st.deleted&&!st.collapsed&&a.createElement(Z.Z,null,a.createElement(C.Z,{className:ge.subItem,disabled:ze,onClick:()=>Pt(oe)},a.createElement(j.Z,null,null!=We?a.createElement(M.Z,{classes:{badge:ge.sectionBadge},badgeContent:a.createElement(u.Z,{className:ge.sectionWithSelectionIcon},"check"),color:"primary"},a.createElement(u.Z,null,"outlined_flag")):a.createElement(u.Z,null,"outlined_flag")),a.createElement(_.Z,{primary:a.createElement(l.Z,{id:"ui.contributionActionMenu.flagContributionWithMotivation",defaultMessage:"ui.contributionActionMenu.flagContributionWithMotivation"})}),e?a.createElement(u.Z,null,"expand_less"):a.createElement(u.Z,null,"expand_more")),a.createElement(A.Z,{in:e,timeout:"auto",unmountOnExit:!0},Nt(oe),a.createElement(P.Z,{variant:"caption",component:"div",className:ge.footerSubItems},_e.formatMessage(Ee.footer)))))},[ae]:function(){const e=we===ae;return a.createElement(Z.Z,{key:ae},!st.deleted&&a.createElement(Z.Z,null,null!=Ye?a.createElement(a.Fragment,null,a.createElement(C.Z,{className:ge.subItem,disabled:Boolean(ot),onClick:()=>_t(de)},a.createElement(j.Z,null,a.createElement(u.Z,null,"restore")),a.createElement(_.Z,{primary:a.createElement(a.Fragment,null,a.createElement(l.Z,{id:"ui.contributionActionMenu.restoreFromHidden",defaultMessage:"ui.contributionActionMenu.restoreFromHidden"})," ","(",At(Ye),")")}))):a.createElement(a.Fragment,null,a.createElement(C.Z,{className:ge.subItem,disabled:Boolean(ot),onClick:()=>Pt(ae)},a.createElement(j.Z,null,a.createElement(u.Z,null,"hide_image")),a.createElement(_.Z,{primary:a.createElement(l.Z,{id:"ui.contributionActionMenu.hideContributionWithMotivation",defaultMessage:"ui.contributionActionMenu.hideContributionWithMotivation"})}),e?a.createElement(u.Z,null,"expand_less"):a.createElement(u.Z,null,"expand_more")),a.createElement(A.Z,{in:e,timeout:"auto",unmountOnExit:!0},Nt(ae)))))},[ie]:function(){const e=we===ie;return a.createElement(Z.Z,{key:ie},!st.collapsed&&!(st.deleted&&!Xe)&&a.createElement(Z.Z,null,null!=Xe?a.createElement(a.Fragment,null,a.createElement(C.Z,{className:ge.subItem,disabled:Boolean(ot),onClick:()=>_t(me)},a.createElement(j.Z,null,a.createElement(u.Z,null,"restore_from_trash")),a.createElement(_.Z,{primary:a.createElement(a.Fragment,null,a.createElement(l.Z,{id:"ui.contributionActionMenu.restoreFromDeleted",defaultMessage:"ui.contributionActionMenu.restoreFromDeleted"})," ","(",At(Xe),")")}))):a.createElement(a.Fragment,null,a.createElement(C.Z,{className:ge.subItem,disabled:Boolean(ot),onClick:()=>Pt(ie)},a.createElement(j.Z,null,a.createElement(u.Z,null,"delete")),a.createElement(_.Z,{primary:a.createElement(l.Z,{id:"ui.contributionActionMenu.deleteContributionWithMotivation",defaultMessage:"ui.contributionActionMenu.deleteContributionWithMotivation"})}),e?a.createElement(u.Z,null,"expand_less"):a.createElement(u.Z,null,"expand_more")),a.createElement(A.Z,{in:e,timeout:"auto",unmountOnExit:!0},Nt(ie)))))}};function dt(){Ne.user?(Fe(!0),Promise.all([ft(),Zt()]).then((()=>{Fe(!1)})),$e(!0)):Pe.settings.handleAnonymousAction()}function mt(){lt.current&&lt.current.contains(event.target)||($e(!1),je.onClose&&je.onClose())}const pt=(0,a.useMemo)((()=>()=>Y.Z.request({url:H.Z.UserSuspendContributionNotification.url({type:st.type,id:st.id}),method:H.Z.UserSuspendContributionNotification.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[st]);const gt=(0,a.useMemo)((()=>()=>Y.Z.request({url:H.Z.FlagStatus.url({type:st.type,id:st.id}),method:H.Z.FlagStatus.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[st]),bt=(0,a.useMemo)((()=>e=>Y.Z.request({url:H.Z.Flag.url({type:st.type,id:st.id}),method:H.Z.Flag.method,data:{flag_type:e}}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[st]),ht=(0,a.useMemo)((()=>()=>Y.Z.request({url:H.Z.ModerateContributionStatus.url({contribution_type:st.type,id:st.id}),method:H.Z.ModerateContributionStatus.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[st]),Et=(0,a.useMemo)((()=>()=>{const e=st.type;return Y.Z.request({url:e===te.q.COMMENT?H.Z.DeleteComment.url({id:st.id}):H.Z.DeleteFeedObject.url({type:e,id:st.id}),method:e===te.q.COMMENT?H.Z.DeleteComment.method:H.Z.DeleteFeedObject.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))}),[st]),vt=(0,a.useMemo)((()=>()=>{const e=st.type;return Y.Z.request({url:e===te.q.COMMENT?H.Z.RestoreComment.url({id:st.id}):H.Z.RestoreFeedObject.url({type:e,id:st.id}),method:e===te.q.COMMENT?H.Z.RestoreComment.method:H.Z.RestoreFeedObject.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))}),[st]);function ft(){return st&&ct.includes(oe)?gt().then((e=>{void 0!==e.flag_type&&null!==e.flag_type&&qe(e.flag_type)})).catch((e=>{console.dir(e),p.Y.error(m.J,e)})):Promise.resolve()}function Zt(){return st&&(ct.includes(ae)||ct.includes(ie))?ht().then((e=>{void 0!==e.flag_type&&null!==e.flag_type&&(e.status===q?Ge(e.flag_type):e.status===W&&He(e.flag_type))})).catch((e=>{p.Y.error(m.J,e)})):Promise.resolve()}function Ot(e){ee.IT(Ne.user)?Te(a.createElement(l.Z,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3}):!st||Ve||ze||"undefined"===e||(Ue(!0),bt(e).then((t=>{qe(We===e?null:e),Ue(!1),pe&&pe(st,e,We!==e)})).catch((e=>{p.Y.error(m.J,e),Te(a.createElement(l.Z,{id:"ui.contributionActionMenu.actionError",defaultMessage:"ui.contributionActionMenu.actionError"}),{variant:"error",autoHideDuration:3e3})})))}const yt=(0,a.useMemo)((()=>(e,t)=>Y.Z.request({url:H.Z.ModerateContribution.url({id:st.id}),method:H.Z.ModerateContribution.method,data:Object.assign(Object.assign({contribution_type:st.type},null!==t?{moderation_type:t}:{}),{action:e})}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[st]);function Ct(e){Je(e),_t(de)}function jt(e){et(e),_t(me)}function _t(e){ee.IT(Ne.user)&&[se,de,me].includes(e)?Te(a.createElement(l.Z,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3}):e===re?((0,g.TE)(`${location.protocol}//${location.host}${xe.url((0,h.Ig)(st),(0,h.p3)(st))}`).then((()=>{$e(!1),Te(a.createElement(l.Z,{id:"ui.common.permanentLinkCopied",defaultMessage:"ui.common.permanentLinkCopied"}),{variant:"success",autoHideDuration:3e3})})),mt()):e===se?(ve&&ve(st),mt()):e===le?(at(le),nt(!0),mt()):e===ce?(at(ce),nt(!0),mt()):e===ue?(at(ue),rt(ue),pt().then((e=>{const t=Object.assign({},ke,{suspended:!ke.suspended});Ie(t),ye&&ye(t),rt(null)})).catch((e=>{p.Y.error(m.J,e),at(null),rt(null),Te(a.createElement(l.Z,{id:"ui.contributionActionMenu.actionError",defaultMessage:"ui.contributionActionMenu.actionError"}),{variant:"error",autoHideDuration:3e3})}))):e===de?(at(de),nt(!0),mt()):e===me&&(at(me),nt(!0),mt())}function Mt(e){e?([le,ce].includes(ot)?De?Le(Object.assign(Object.assign({},De),{deleted:ot===le})):Ie(Object.assign(Object.assign({},ke),{deleted:ot===le})):ot===de?De?Le(Object.assign(Object.assign({},De),{collapsed:!De.collapsed})):Ie(Object.assign(Object.assign({},ke),{collapsed:!ke.collapsed})):ot===me&&(De?Le(Object.assign(Object.assign({},De),{deleted:!De.deleted})):Ie(Object.assign(Object.assign({},ke),{deleted:!ke.deleted}))),rt(null),at(null),nt(!1),Te(a.createElement(l.Z,{id:"ui.contributionActionMenu.actionSuccess",defaultMessage:"ui.contributionActionMenu.actionSuccess"}),{variant:"success",autoHideDuration:3e3})):(rt(null),Te(a.createElement(l.Z,{id:"ui.contributionActionMenu.actionError",defaultMessage:"ui.contributionActionMenu.actionError"}),{variant:"error",autoHideDuration:3e3}))}function At(e){let t;switch(e){case R:t=_e.formatMessage(Ee.spam);break;case $:t=_e.formatMessage(Ee.aggressive);break;case w:t=_e.formatMessage(Ee.vulgar);break;case B:t=_e.formatMessage(Ee.poorContent);break;case V:t=_e.formatMessage(Ee.offtopic)}return t}function Pt(e){Be(e?e===we?null:e:null)}function Nt(e){const t=e===oe?Ot:e===ae?Ct:jt;let n=e===oe?We:e===ae?Ye:Xe;return F.map(((o,i)=>a.createElement(C.Z,{key:`${e}_${i}`,className:ge.subItem,disabled:ze},a.createElement(j.Z,{classes:{root:ge.selectedIcon}},n===o&&a.createElement(u.Z,{color:"secondary"},"check")),a.createElement(_.Z,{primary:At(o),onClick:()=>t(o),classes:{root:ge.subItemText}}))))}function St(){return a.createElement(Z.Z,{key:ne},a.createElement(C.Z,{className:ge.subItem,disabled:ze},a.createElement(j.Z,null,a.createElement(u.Z,null,"link")),a.createElement(_.Z,{primary:a.createElement(l.Z,{id:"ui.contributionActionMenu.permanentLink",defaultMessage:"ui.contributionActionMenu.permanentLink"}),onClick:()=>_t(re),classes:{root:ge.itemText}})),Ne.user&&Ne.user.id===st.author.id&&!st.deleted&&a.createElement(C.Z,{className:ge.subItem,disabled:ze},a.createElement(j.Z,null,a.createElement(u.Z,null,"edit")),a.createElement(_.Z,{primary:a.createElement(l.Z,{id:"ui.contributionActionMenu.editContribution",defaultMessage:"ui.contributionActionMenu.editContribution"}),onClick:()=>_t(se),classes:{root:ge.itemText}})),Ne.user&&Ne.user.id===st.author.id&&!Xe&&a.createElement(C.Z,{className:ge.subItem,disabled:ze},a.createElement(j.Z,null,it===le||it===ce?a.createElement(N.Z,{size:20}):a.createElement(u.Z,null,"delete")),st.deleted?a.createElement(_.Z,{primary:a.createElement(l.Z,{id:"ui.contributionActionMenu.restoreContribution",defaultMessage:"ui.contributionActionMenu.restoreContribution"}),onClick:()=>_t(ce),classes:{root:ge.itemText}}):a.createElement(_.Z,{primary:a.createElement(l.Z,{id:"ui.contributionActionMenu.deleteContribution",defaultMessage:"ui.contributionActionMenu.deleteContribution"}),onClick:()=>_t(le),classes:{root:ge.itemText}})),Ne.user&&Ne.user.id!==st.author.id&&st&&st.type!==te.q.COMMENT&&a.createElement(C.Z,{className:ge.subItem,disabled:ze},a.createElement(j.Z,null,it===ue?a.createElement(N.Z,{size:20}):st.suspended?a.createElement(u.Z,null,"notifications_active"):a.createElement(u.Z,null,"notifications_off")),a.createElement(_.Z,{primary:st.suspended?a.createElement(l.Z,{id:"ui.contributionActionMenu.enableNotificationContribution",defaultMessage:"ui.contributionActionMenu.enableNotificationContribution"}):a.createElement(l.Z,{id:"ui.contributionActionMenu.suspendNotificationContribution",defaultMessage:"ui.contributionActionMenu.suspendNotificationContribution"}),onClick:()=>_t(ue),classes:{root:ge.itemText}})))}function xt(){return a.createElement(Z.Z,null,Ve||!ke&&!De?a.createElement(d.Z,{size:30}):a.createElement(S.Z,null,St(),Boolean(ct.length)&&a.createElement(x.Z,null),ct.map(((e,t)=>a.createElement(Z.Z,{key:`es_${t}`},ut[e]())))))}return a.createElement(he,{className:v()(ge.root,t)},a.createElement(T.Z,{ref:e=>{lt.current=e},"aria-haspopup":"true",onClick:dt,className:ge.button,size:"small"},st&&(st.collapsed||st.deleted)?a.createElement("span",{className:ge.visibilityIcons},st.collapsed?a.createElement(u.Z,null,"visibility_off"):a.createElement(u.Z,null,"delete"),a.createElement(u.Z,null,"expand_more")):a.createElement(u.Z,null,"more_vert")),Ae?a.createElement(k.Z,{open:Re,onClose:mt,onOpen:dt,anchor:"bottom",disableSwipeToOpen:!0},xt()):a.createElement(be,Object.assign({open:Re,anchorEl:lt.current,role:void 0,transition:!0,className:ge.popper},Ce,{placement:"bottom-end"}),(({TransitionProps:e,placement:t})=>a.createElement(I.Z,Object.assign({},e,{style:{transformOrigin:"bottom"===t?"center top":"center bottom"}}),a.createElement(D.Z,{variant:"outlined",className:ge.paper},a.createElement(L.d,{onClickAway:mt},xt()))))),tt&&a.createElement(f.Z,Object.assign({open:tt},ot===le?{content:a.createElement(l.Z,{id:"ui.contributionActionMenu.deleteContributionInfo",defaultMessage:"ui.contributionActionMenu.deleteContributionInfo"})}:{},{onConfirm:function(){!st||Ve||it||(ot===le?(rt(le),Et().then((e=>{const t=Object.assign({},st,{deleted:!0});Ze&&Ze(t),Mt(!0)})).catch((e=>{p.Y.error(m.J,e),Mt(!1)}))):ot===ce?(rt(ce),vt().then((e=>{const t=Object.assign({},st,{deleted:!1});Oe&&Oe(t),Mt(!0)})).catch((e=>{p.Y.error(m.J,e),Mt(!1)}))):ot===de?(rt(de),yt(z,Ke).then((e=>{const t=Object.assign({},st,{collapsed:!st.collapsed});He(Ye===Ke?null:Ke),Je(null),fe&&fe(t),Mt(!0)})).catch((e=>{p.Y.error(m.J,e),Mt(!1)}))):ot===me&&(rt(me),yt(U,Qe).then((e=>{const t=Object.assign({},st,{deleted:!st.deleted});Ge(Xe===Qe?null:Qe),et(null),Ze&&Ze(t),Mt(!0)})).catch((e=>{p.Y.error(m.J,e),Mt(!1)}))))},isUpdating:Boolean(it),onClose:()=>nt(!1)})))}},20166:(e,t,n)=>{var o;n.d(t,{p:()=>o}),function(e){e.ADDED_AT_DESC="-added_at",e.ADDED_AT_ASC="added_at",e.CONNECTION_DESC="-connection",e.CONNECTION_ASC="connection"}(o||(o={}))},97650:(e,t,n)=>{n.d(t,{YD:()=>g,df:()=>p});var o=n(67294);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a.apply(this,arguments)}const i=new Map,r=new WeakMap;let s,l=0;function c(e){return Object.keys(e).sort().filter((t=>void 0!==e[t])).map((t=>{return`${t}_${"root"===t?(n=e.root,n?(r.has(n)||(l+=1,r.set(n,l.toString())),r.get(n)):"0"):e[t]}`;var n})).toString()}function u(e,t,n={},o=s){if(void 0===window.IntersectionObserver&&void 0!==o){const a=e.getBoundingClientRect();return t(o,{isIntersecting:o,target:e,intersectionRatio:"number"==typeof n.threshold?n.threshold:0,time:0,boundingClientRect:a,intersectionRect:a,rootBounds:a}),()=>{}}const{id:a,observer:r,elements:l}=function(e){let t=c(e),n=i.get(t);if(!n){const o=new Map;let a;const r=new IntersectionObserver((t=>{t.forEach((t=>{var n;const i=t.isIntersecting&&a.some((e=>t.intersectionRatio>=e));e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=i),null==(n=o.get(t.target))||n.forEach((e=>{e(i,t)}))}))}),e);a=r.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:r,elements:o},i.set(t,n)}return n}(n);let u=l.get(e)||[];return l.has(e)||l.set(e,u),u.push(t),r.observe(e),function(){u.splice(u.indexOf(t),1),0===u.length&&(l.delete(e),r.unobserve(e)),0===l.size&&(r.disconnect(),i.delete(a))}}const d=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function m(e){return"function"!=typeof e.children}class p extends o.Component{constructor(e){super(e),this.node=null,this._unobserveCb=null,this.handleNode=e=>{this.node&&(this.unobserve(),e||this.props.triggerOnce||this.props.skip||this.setState({inView:!!this.props.initialInView,entry:void 0})),this.node=e||null,this.observeNode()},this.handleChange=(e,t)=>{e&&this.props.triggerOnce&&this.unobserve(),m(this.props)||this.setState({inView:e,entry:t}),this.props.onChange&&this.props.onChange(e,t)},this.state={inView:!!e.initialInView,entry:void 0}}componentDidUpdate(e){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold&&e.skip===this.props.skip&&e.trackVisibility===this.props.trackVisibility&&e.delay===this.props.delay||(this.unobserve(),this.observeNode())}componentWillUnmount(){this.unobserve(),this.node=null}observeNode(){if(!this.node||this.props.skip)return;const{threshold:e,root:t,rootMargin:n,trackVisibility:o,delay:a,fallbackInView:i}=this.props;this._unobserveCb=u(this.node,this.handleChange,{threshold:e,root:t,rootMargin:n,trackVisibility:o,delay:a},i)}unobserve(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)}render(){if(!m(this.props)){const{inView:e,entry:t}=this.state;return this.props.children({inView:e,entry:t,ref:this.handleNode})}const e=this.props,{children:t,as:n}=e,i=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,d);return o.createElement(n||"div",a({ref:this.handleNode},i),t)}}function g({threshold:e,delay:t,trackVisibility:n,rootMargin:a,root:i,triggerOnce:r,skip:s,initialInView:l,fallbackInView:c,onChange:d}={}){var m;const[p,g]=o.useState(null),b=o.useRef(),[h,E]=o.useState({inView:!!l,entry:void 0});b.current=d,o.useEffect((()=>{if(s||!p)return;let o;return o=u(p,((e,t)=>{E({inView:e,entry:t}),b.current&&b.current(e,t),t.isIntersecting&&r&&o&&(o(),o=void 0)}),{root:i,rootMargin:a,threshold:e,trackVisibility:n,delay:t},c),()=>{o&&o()}}),[Array.isArray(e)?e.toString():e,p,i,a,r,s,n,c,t]);const v=null==(m=h.entry)?void 0:m.target,f=o.useRef();p||!v||r||s||f.current===v||(f.current=v,E({inView:!!l,entry:void 0}));const Z=[g,h.inView,h.entry];return Z.ref=Z[0],Z.inView=Z[1],Z.entry=Z[2],Z}}}]);