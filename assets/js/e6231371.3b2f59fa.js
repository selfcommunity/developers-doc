"use strict";(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[46027],{4023:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>c,default:()=>p,frontMatter:()=>l,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"apireference/v2/insights/get_best_embed_insight","title":"Get Best Embed Insight","description":"This endpoint retrieves the best embed insights list.","source":"@site/docs/apireference/v2/insights/get_best_embed_insight.md","sourceDirName":"apireference/v2/insights","slug":"/apireference/v2/insights/get_best_embed_insight","permalink":"/docs/apireference/v2/insights/get_best_embed_insight","draft":false,"unlisted":false,"editUrl":"https://github.com/selfcommunity/developers-doc/tree/main/docs/apireference/v2/insights/get_best_embed_insight.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_label":"Get Best Embed Insight","sidebar_position":1,"title":"Get Best Embed Insight"},"sidebar":"apireferenceSidebar","previous":{"title":"Get Best Contribution Insight","permalink":"/docs/apireference/v2/insights/get_best_contribution_insight"},"next":{"title":"Get Best Users Insight","permalink":"/docs/apireference/v2/insights/get_best_users_insight"}}');var r=n(74848),i=n(28453),a=n(37244),d=n(56778);const l={sidebar_label:"Get Best Embed Insight",sidebar_position:1,title:"Get Best Embed Insight"},c=void 0,o={},h=[{value:"HTTP Request",id:"http-request",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Example Request",id:"example-request",level:3},{value:"Responses",id:"responses",level:2},{value:"Response Schema with Pagination (group_by and metadata params are NOT passed)",id:"response-schema-with-pagination-group_by-and-metadata-params-are-not-passed",level:3},{value:"Example response",id:"example-response",level:3},{value:"Response Schema without Pagination (group_by=embed_id passed)",id:"response-schema-without-pagination-group_byembed_id-passed",level:3},{value:"Example response",id:"example-response-1",level:3},{value:"Response Schema without Pagination (group_by different from embed_id passed)",id:"response-schema-without-pagination-group_by-different-from-embed_id-passed",level:3},{value:"Example response",id:"example-response-2",level:3}];function u(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"This endpoint retrieves the best embed insights list.\nThe operations of this endpoint is quite complex and returns different result structures based on the parameters passed.\nFor example, pagination (and therefore the use of the offset parameter) is guaranteed only if the metadata and group_by\nparameter are not passed.\nIf you are passing metadata you MUST pass also group_by.\nIf you pass group_by the result will be not paginated and will contain only user defined custom embeds (not among\nthese: 'sc_link', 'sc_shared_object', 'sc_shared_event')."}),"\n",(0,r.jsx)(t.h2,{id:"http-request",children:"HTTP Request"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.code,{children:"GET /api/v2/insight/embed/"})}),"\n",(0,r.jsx)(t.h3,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Name"}),(0,r.jsx)(t.th,{children:"In"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Required"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"limit"}),(0,r.jsx)(t.td,{children:"path"}),(0,r.jsx)(t.td,{children:"integer"}),(0,r.jsx)(t.td,{children:"false"}),(0,r.jsx)(t.td,{children:"Number of results to return per page"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"offset"}),(0,r.jsx)(t.td,{children:"path"}),(0,r.jsx)(t.td,{children:"integer"}),(0,r.jsx)(t.td,{children:"false"}),(0,r.jsx)(t.td,{children:"The initial index from which to return the results (only if pagination is guaranteed)"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"category_id"}),(0,r.jsx)(t.td,{children:"path"}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"false"}),(0,r.jsx)(t.td,{children:"Can be a single category id or list (comma separated) of categories ids. 0 means empty (no category). If you use a list of category ids then any embed associated to a contribution that has at least one category_id will be returned (the filter is in OR and not in AND)"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"created_at__gte"}),(0,r.jsx)(t.td,{children:"path"}),(0,r.jsx)(t.td,{children:"string(date-time)"}),(0,r.jsx)(t.td,{children:"false"}),(0,r.jsx)(t.td,{children:"Datetime of creation(greater than or equal to the given value)"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"created_at__lte"}),(0,r.jsx)(t.td,{children:"path"}),(0,r.jsx)(t.td,{children:"string(date-time)"}),(0,r.jsx)(t.td,{children:"false"}),(0,r.jsx)(t.td,{children:"Datetime of creation(less than or equal to the given value)"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"embed_type"}),(0,r.jsx)(t.td,{children:"path"}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"false"}),(0,r.jsx)(t.td,{children:"The embed type (custom)"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"ranked_by"}),(0,r.jsx)(t.td,{children:"path"}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"false"}),(0,r.jsx)(t.td,{children:"The rank value to use: num_posts, num_comments, num_votes, num_clicks, num_shares  (default: rank function). If a list (eg: num_posts, num_comments) the final rank will be the sum of the list components"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"group_by"}),(0,r.jsx)(t.td,{children:"path"}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"false"}),(0,r.jsx)(t.td,{children:"Embed_id, embed_type or metadata.TERM_KEY"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"metadata"}),(0,r.jsx)(t.td,{children:"path"}),(0,r.jsx)(t.td,{children:"json dict"}),(0,r.jsx)(t.td,{children:"false"}),(0,r.jsx)(t.td,{children:'A json dict containing some TERM_KEYs (eg: {"authors": ["Umberto Eco", "Neil Gaiman"], "type": "book"}). Usable only if group_by is set'})]})]})]}),"\n",(0,r.jsx)(t.h3,{id:"example-request",children:"Example Request"}),"\n","\n",(0,r.jsxs)(a.A,{defaultValue:"js",values:[{label:"JavaScript",value:"js"},{label:"Bash",value:"bash"}],children:[(0,r.jsx)(d.A,{value:"js",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"const headers = {\n  'Accept':'application/json',\n  'Authorization': 'Bearer {access_token}'\n};\n\nfetch('/api/v2/insight/embed/',\n{\n  method: 'GET',\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});\n\n"})})}),(0,r.jsx)(d.A,{value:"bash",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"# You can also use wget\ncurl -X GET /api/v2/insight/embed/ \\\n  -H 'Accept: application/json' \\\n  -H 'Authorization: Bearer {access_token}'\n"})})})]}),"\n",(0,r.jsx)(t.h2,{id:"responses",children:"Responses"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Status"}),(0,r.jsx)(t.th,{children:"Meaning"}),(0,r.jsx)(t.th,{children:"Description"}),(0,r.jsx)(t.th,{children:"Schema"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"200"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://tools.ietf.org/html/rfc7231#section-6.3.1",children:"OK"})}),(0,r.jsx)(t.td,{children:"Response status code"}),(0,r.jsx)(t.td,{children:"Inline"})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"response-schema-with-pagination-group_by-and-metadata-params-are-not-passed",children:"Response Schema with Pagination (group_by and metadata params are NOT passed)"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Name"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Required"}),(0,r.jsx)(t.th,{children:"Restrictions"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"count"}),(0,r.jsx)(t.td,{children:"integer"}),(0,r.jsx)(t.td,{children:"false"}),(0,r.jsx)(t.td,{children:"none"}),(0,r.jsx)(t.td,{children:"Total results count"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"next"}),(0,r.jsx)(t.td,{children:"string(uri)\xa6null"}),(0,r.jsx)(t.td,{children:"false"}),(0,r.jsx)(t.td,{children:"none"}),(0,r.jsx)(t.td,{children:"Next page url"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"previous"}),(0,r.jsx)(t.td,{children:"string(uri)\xa6null"}),(0,r.jsx)(t.td,{children:"false"}),(0,r.jsx)(t.td,{children:"none"}),(0,r.jsx)(t.td,{children:"Previous page url"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"results"}),(0,r.jsx)(t.td,{children:"list"}),(0,r.jsx)(t.td,{children:"false"}),(0,r.jsx)(t.td,{children:"none"}),(0,r.jsx)(t.td,{children:"List of results"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"\xbb embed"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"/docs/apireference/v2/schemas/embed",children:"Embed"})}),(0,r.jsx)(t.td,{children:"false"}),(0,r.jsx)(t.td,{children:"none"}),(0,r.jsx)(t.td,{children:"The embed"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"\xbb score"}),(0,r.jsx)(t.td,{children:"integer"}),(0,r.jsx)(t.td,{children:"false"}),(0,r.jsx)(t.td,{children:"none"}),(0,r.jsx)(t.td,{children:"The computed score"})]})]})]}),"\n",(0,r.jsx)(t.h3,{id:"example-response",children:"Example response"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n  "count": "integer",\n  "next": "string(uri)",\n  "previous": "string(uri)",\n  "results": [\n    {\n      "embed": "{Embed}",\n      "score": "integer"\n    },\n    {\n      "embed": "{Embed}",\n      "score": "integer"\n    },\n    {\n      "embed": "{Embed}",\n      "score": "integer"\n    }\n  ]\n}\n'})}),"\n",(0,r.jsx)(t.h3,{id:"response-schema-without-pagination-group_byembed_id-passed",children:"Response Schema without Pagination (group_by=embed_id passed)"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Name"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Required"}),(0,r.jsx)(t.th,{children:"Restrictions"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"\xbb embed"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"/docs/apireference/v2/schemas/embed",children:"Embed"})}),(0,r.jsx)(t.td,{children:"false"}),(0,r.jsx)(t.td,{children:"none"}),(0,r.jsx)(t.td,{children:"The embed"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"\xbb score"}),(0,r.jsx)(t.td,{children:"integer"}),(0,r.jsx)(t.td,{children:"false"}),(0,r.jsx)(t.td,{children:"none"}),(0,r.jsx)(t.td,{children:"The computed score"})]})]})]}),"\n",(0,r.jsx)(t.h3,{id:"example-response-1",children:"Example response"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'[\n  {\n    "embed": "{Embed}",\n    "score": "integer"\n  },\n  {\n    "embed": "{Embed}",\n    "score": "integer"\n  },\n  {\n    "embed": "{Embed}",\n    "score": "integer"\n  }\n]\n'})}),"\n",(0,r.jsx)(t.h3,{id:"response-schema-without-pagination-group_by-different-from-embed_id-passed",children:"Response Schema without Pagination (group_by different from embed_id passed)"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Name"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Required"}),(0,r.jsx)(t.th,{children:"Restrictions"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"\xbb result"}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:"false"}),(0,r.jsx)(t.td,{children:"none"}),(0,r.jsx)(t.td,{children:"The grouping string result"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"\xbb score"}),(0,r.jsx)(t.td,{children:"integer"}),(0,r.jsx)(t.td,{children:"false"}),(0,r.jsx)(t.td,{children:"none"}),(0,r.jsx)(t.td,{children:"The computed score"})]})]})]}),"\n",(0,r.jsx)(t.h3,{id:"example-response-2",children:"Example response"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'[\n  {\n    "result": "string",\n    "score": "integer"\n  },\n  {\n    "result": "string",\n    "score": "integer"\n  },\n  {\n    "result": "string",\n    "score": "integer"\n  }\n]\n'})})]})}function p(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>d});var s=n(96540);const r={},i=s.createContext(r);function a(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(i.Provider,{value:t},e.children)}},37244:(e,t,n)=>{n.d(t,{A:()=>E});var s=n(96540),r=n(18215),i=n(79872),a=n(44319),d=n(56347),l=n(94280),c=n(73024),o=n(58417),h=n(44031);function u(e){return s.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:t,children:n}=e;return(0,s.useMemo)((()=>{const e=t??function(e){return u(e).map((e=>{let{props:{value:t,label:n,attributes:s,default:r}}=e;return{value:t,label:n,attributes:s,default:r}}))}(n);return function(e){const t=(0,o.XI)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function x(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function j(e){let{queryString:t=!1,groupId:n}=e;const r=(0,d.W6)(),i=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,c.aZ)(i),(0,s.useCallback)((e=>{if(!i)return;const t=new URLSearchParams(r.location.search);t.set(i,e),r.replace({...r.location,search:t.toString()})}),[i,r])]}function m(e){const{defaultValue:t,queryString:n=!1,groupId:r}=e,i=p(e),[a,d]=(0,s.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!x({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const s=n.find((e=>e.default))??n[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:t,tabValues:i}))),[c,o]=j({queryString:n,groupId:r}),[u,m]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[r,i]=(0,h.Dv)(n);return[r,(0,s.useCallback)((e=>{n&&i.set(e)}),[n,i])]}({groupId:r}),b=(()=>{const e=c??u;return x({value:e,tabValues:i})?e:null})();(0,l.A)((()=>{b&&d(b)}),[b]);return{selectedValue:a,selectValue:(0,s.useCallback)((e=>{if(!x({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);d(e),o(e),m(e)}),[o,m,i]),tabValues:i}}var b=n(46916);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var f=n(74848);function v(e){let{className:t,block:n,selectedValue:s,selectValue:i,tabValues:d}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,a.a_)(),o=e=>{const t=e.currentTarget,n=l.indexOf(t),r=d[n].value;r!==s&&(c(t),i(r))},h=e=>{let t=null;switch(e.key){case"Enter":o(e);break;case"ArrowRight":{const n=l.indexOf(e.currentTarget)+1;t=l[n]??l[0];break}case"ArrowLeft":{const n=l.indexOf(e.currentTarget)-1;t=l[n]??l[l.length-1];break}}t?.focus()};return(0,f.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":n},t),children:d.map((e=>{let{value:t,label:n,attributes:i}=e;return(0,f.jsx)("li",{role:"tab",tabIndex:s===t?0:-1,"aria-selected":s===t,ref:e=>{l.push(e)},onKeyDown:h,onClick:o,...i,className:(0,r.A)("tabs__item",g.tabItem,i?.className,{"tabs__item--active":s===t}),children:n??t},t)}))})}function _(e){let{lazy:t,children:n,selectedValue:i}=e;const a=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=a.find((e=>e.props.value===i));return e?(0,s.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,f.jsx)("div",{className:"margin-top--md",children:a.map(((e,t)=>(0,s.cloneElement)(e,{key:t,hidden:e.props.value!==i})))})}function y(e){const t=m(e);return(0,f.jsxs)("div",{className:(0,r.A)(i.G.tabs.container,"tabs-container",g.tabList),children:[(0,f.jsx)(v,{...t,...e}),(0,f.jsx)(_,{...t,...e})]})}function E(e){const t=(0,b.A)();return(0,f.jsx)(y,{...e,children:u(e.children)},String(t))}},56778:(e,t,n)=>{n.d(t,{A:()=>a});n(96540);var s=n(18215);const r={tabItem:"tabItem_Ymn6"};var i=n(74848);function a(e){let{children:t,hidden:n,className:a}=e;return(0,i.jsx)("div",{role:"tabpanel",className:(0,s.A)(r.tabItem,a),hidden:n,children:t})}}}]);