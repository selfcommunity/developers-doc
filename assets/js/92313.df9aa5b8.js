"use strict";(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[92313],{31924:(e,t,o)=>{o.d(t,{Z:()=>r});var a=o(97582),s=o(91705),n=o(24085),i=o(66821);class l{static getCategorySuggestion(e,t){return(0,s.N)(Object.assign(Object.assign({},t),{url:n.Z.CategoriesSuggestion.url({}),method:n.Z.CategoriesSuggestion.method,params:e}))}static getIncubatorSuggestion(e,t){return(0,s.N)(Object.assign(Object.assign({},t),{url:n.Z.GetIncubatorSuggestion.url({}),method:n.Z.GetIncubatorSuggestion.method,params:e}))}static getPollSuggestion(e,t){return(0,s.N)(Object.assign(Object.assign({},t),{url:n.Z.PollSuggestion.url({}),method:n.Z.PollSuggestion.method,params:e}))}static getUserSuggestion(e,t){return(0,s.N)(Object.assign(Object.assign({},t),{url:n.Z.UserSuggestion.url({}),method:n.Z.UserSuggestion.method,params:e}))}static getSearchSuggestion(e,t,o){const a=(0,i.B)({search:e});return(0,s.N)(Object.assign(Object.assign({},o),{url:`${n.Z.SearchSuggestion.url({})}?${a.toString()}`,method:n.Z.UserSuggestion.method,params:t}))}}class r{static getCategorySuggestion(e,t){return(0,a.mG)(this,void 0,void 0,(function*(){return l.getCategorySuggestion(e,t)}))}static getIncubatorSuggestion(e,t){return(0,a.mG)(this,void 0,void 0,(function*(){return l.getIncubatorSuggestion(e,t)}))}static getPollSuggestion(e,t){return(0,a.mG)(this,void 0,void 0,(function*(){return l.getPollSuggestion(e,t)}))}static getUserSuggestion(e,t){return(0,a.mG)(this,void 0,void 0,(function*(){return l.getUserSuggestion(e,t)}))}static getSearchSuggestion(e,t,o){return(0,a.mG)(this,void 0,void 0,(function*(){return l.getSearchSuggestion(e,t,o)}))}}},98365:(e,t,o)=>{o.d(t,{Z:()=>m});var a=o(67294),s=o(74482),n=o(24243),i=o(24085),l=o(59219),r=o(96570),c=o(99960),u=o(69721),d=o(87620),g=o(68787);function m({id:e=null,category:t=null,cacheStrategy:o=l.n2.CACHE_FIRST}){const m=t?t.id:e,E=(0,g.LD)(),p=E.user?E.user.id:null,Z=(0,u.u5)(m),y=p?t:(0,r.Kd)(t,["followed"]),[h,S]=(0,a.useState)(o!==l.n2.NETWORK_ONLY?l.ZP.get(Z,y):null),[f,N]=(0,a.useState)(null),v=(0,a.useMemo)((()=>()=>n.Z.request({url:i.Z.Category.url({id:m}),method:i.Z.Category.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[m]);return(0,a.useEffect)((()=>{m&&(!h||h&&m!==h.id)&&v().then((e=>{const t=p?e:(0,r.Kd)(e,["followed"]);S(t),l.ZP.set(Z,t)})).catch((t=>{l.ZP.delete(Z),N(`Category with id ${e} not found`),c.Y.error(s.h,`Category with id ${e} not found`),c.Y.error(s.h,t.message)}))}),[m]),(0,d.F_)((()=>{if(t){const e=p?t:(0,r.Kd)(t,["followed"]);S(e),l.ZP.set(Z,e)}}),[t]),{scCategory:h,setSCCategory:S,error:f}}},92313:(e,t,o)=>{o.d(t,{Z:()=>_});var a=o(67294),s=o(90948),n=o(58069),i=o(5208),l=o(19326),r=o(51603),c=o(27807),u=o(52693),d=o(12805),g=o(37024),m=o(93132),E=o(24085),p=o(29628),Z=o(94184),y=o.n(Z),h=o(83781),S=o(44012),f=o(20377);const N="SCExploreFeedTemplate",v={root:`${N}-root`},O=(0,s.ZP)(n.Z,{name:N,slot:"Root"})((()=>({}))),b=[{type:"widget",component:i.Z,componentProps:{},column:"right",position:0},{type:"widget",component:l.Z,componentProps:{},column:"right",position:1},{type:"widget",component:r.Z,componentProps:{},column:"right",position:2},{type:"widget",component:c.Z,componentProps:{},column:"right",position:3}];const _=function(e){const t=(0,p.Z)({props:e,name:N}),{id:o="explore_feed",className:s,widgets:n=b,FeedObjectProps:i={},FeedSidebarProps:l=null,FeedProps:r={}}=t,{enqueueSnackbar:c}=(0,f.Ds)(),Z=(0,a.useRef)(),_=(0,a.useMemo)((()=>n.map((e=>Object.assign(Object.assign({},e),{componentProps:Object.assign({},e.componentProps)})))),[n]);return a.createElement(O,Object.assign({id:o,className:y()(v.root,s),ref:Z,endpoint:E.Z.ExploreFeed,widgets:_,ItemComponent:u.Z,itemPropsGenerator:(e,t)=>({feedObject:t[t.type],feedObjectType:t.type,feedObjectActivities:t.activities?t.activities:null,markRead:e?!t.seen_by_id.includes(e.id):null}),itemIdGenerator:e=>e[e.type].id,ItemProps:i,ItemSkeleton:d.Z,ItemSkeletonProps:{template:g.r.PREVIEW},HeaderComponent:a.createElement(m.Z,{onSuccess:e=>{c(a.createElement(S.Z,{id:"ui.inlineComposerWidget.success",defaultMessage:"ui.inlineComposerWidget.success"}),{variant:"success",autoHideDuration:3e3});const t={type:e.type,[e.type]:e,seen_by_id:[],has_boost:!1};Z&&Z.current&&Z.current.addFeedData(t,!0)}}),FeedSidebarProps:l,enabledCustomAdvPositions:[h.n.POSITION_FEED_SIDEBAR,h.n.POSITION_FEED,h.n.POSITION_BELOW_TOPBAR]},r))}},51603:(e,t,o)=>{o.d(t,{Z:()=>D});var a=o(97582),s=o(67294),n=o(90948),i=o(2734),l=o(61730),r=o(44267),c=o(15861),u=o(78462),d=o(97212),g=o(25662),m=o(98704),E=o(24243),p=o(24085),Z=o(59219),y=o(99960),h=o(95475);const S="SCCategoriesPopularWidget",f={root:`${S}-skeleton-root`},N=(0,n.ZP)(h.Z,{name:S,slot:"SkeletonRoot"})((()=>({})));function v(e){return s.createElement(N,Object.assign({className:f.root},e))}var O=o(75459),b=o(44012),_=o(42623),P=o(74808),C=o(94184),L=o.n(C),w=o(39154),R=o(79558),I=o(63902),T=o(29628),A=o(54545),M=o(68787),j=o(66380),x=o(85472),W=o(69721),$=o(15927);const F={root:`${S}-root`,title:`${S}-title`,noResults:`${S}-no-results`,showMore:`${S}-show-more`,dialogRoot:`${S}-dialog-root`,endMessage:`${S}-end-message`},B=(0,n.ZP)(I.Z,{name:S,slot:"Root"})((()=>({}))),k=(0,n.ZP)(w.Z,{name:S,slot:"DialogRoot"})((()=>({})));const D=function(e){const t=(0,T.Z)({props:e,name:S}),{autoHide:o=!0,limit:n=3,className:h,CategoryProps:f={},cacheStrategy:N=Z.n2.CACHE_FIRST,onHeightChange:C,onStateChange:w,DialogProps:I={},categoryId:D}=t,U=(0,a._T)(t,["autoHide","limit","className","CategoryProps","cacheStrategy","onHeightChange","onStateChange","DialogProps","categoryId"]),K=(0,s.useContext)(M.K8),z=(0,s.useContext)(j.Tt),H=(0,s.useMemo)((()=>x.Ao in z.preferences&&z.preferences[x.Ao].value),[z]),[X,G]=(0,s.useReducer)($.Xi,{isLoadingNext:!1,next:null,cacheKey:W.hu(W.ZV),cacheStrategy:N,visibleItems:n},$.Mv),[Y,V]=(0,s.useState)(!1),q=(0,i.Z)(),J=(0,l.Z)(q.breakpoints.down("md")),Q=(0,s.useMemo)((()=>()=>{X.initialized||X.isLoadingNext||(G({type:$.dK.LOADING_NEXT}),m.Z.getPopularCategories({limit:n}).then((e=>{G({type:$.dK.LOAD_NEXT_SUCCESS,payload:Object.assign(Object.assign({},e),{initialized:!0})})})).catch((e=>{G({type:$.dK.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),y.Y.error(O.J,e)})))}),[X.isLoadingNext,X.initialized,n,G]);(0,s.useEffect)((()=>{var e;let t;if(void 0!==K.user&&(H||!H&&(null===(e=K.user)||void 0===e?void 0:e.id)))return t=setTimeout(Q),()=>{t&&clearTimeout(t)}}),[K.user,H]),(0,s.useEffect)((()=>{Y&&X.next&&X.initialized&&X.results.length===n&&m.Z.getPopularCategories({offset:n,limit:10}).then((e=>{G({type:$.dK.LOAD_NEXT_SUCCESS,payload:e})})).catch((e=>{G({type:$.dK.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),y.Y.error(O.J,e)}))}),[Y,n,X.next,X.initialized,X.results.length]),(0,s.useEffect)((()=>{C&&C()}),[X.results]),(0,s.useEffect)((()=>{(H||K.user)&&N===Z.n2.NETWORK_ONLY&&w&&w({cacheStrategy:Z.n2.CACHE_FIRST})}),[H,N,K.user]);const ee=(0,s.useMemo)((()=>()=>{G({type:$.dK.LOADING_NEXT}),E.Z.request({url:X.next,method:p.Z.PopularCategories.method}).then((e=>{G({type:$.dK.LOAD_NEXT_SUCCESS,payload:e.data})}))}),[G,X.next,X.isLoadingNext,X.initialized]),te=e=>{const t=[...X.results],o=t.findIndex((t=>t.id===e.id));-1!==o&&(e.followed?(t[o].followers_counter=e.followers_counter-1,t[o].followed=!e.followed):(t[o].followers_counter=e.followers_counter+1,t[o].followed=!e.followed),G({type:$.dK.SET_RESULTS,payload:{results:t}}))},oe=()=>{V((e=>!e))};if(!H&&!K.user||X.initialized&&o&&!X.count)return s.createElement(A.Z,null);if(!X.initialized)return s.createElement(v,null);const ae=s.createElement(r.Z,null,s.createElement(c.Z,{className:F.title,variant:"h5"},s.createElement(b.Z,{id:"ui.categoriesPopularWidget.title",defaultMessage:"ui.categoriesPopularWidget.title"})),X.count?s.createElement(s.Fragment,null,s.createElement(u.Z,null,X.results.slice(0,X.visibleItems).map((e=>s.createElement(d.ZP,{key:e.id},s.createElement(_.Z,Object.assign({elevation:0,category:e,categoryFollowButtonProps:{onFollow:te}},f)))))),X.count>X.visibleItems&&s.createElement(g.Z,{className:F.showMore,onClick:oe},s.createElement(b.Z,{id:"ui.categoriesPopularWidget.button.showAll",defaultMessage:"ui.categoriesPopularWidget.button.showAll"}))):s.createElement(c.Z,{className:F.noResults,variant:"body2"},s.createElement(b.Z,{id:"ui.categoriesPopularWidget.noResults",defaultMessage:"ui.categoriesPopularWidget.noResults"})),Y&&s.createElement(k,Object.assign({className:F.dialogRoot,title:s.createElement(b.Z,{defaultMessage:"ui.categoriesPopularWidget.title",id:"ui.categoriesPopularWidget.title"}),onClose:oe,open:Y},I),s.createElement(R.Z,{dataLength:X.results.length,next:ee,hasMoreNext:Boolean(X.next),loaderNext:s.createElement(P.Z,Object.assign({elevation:0},f)),height:J?"100%":400,endMessage:s.createElement(c.Z,{className:F.endMessage},s.createElement(b.Z,{id:"ui.categoriesPopularWidget.noMoreResults",defaultMessage:"ui.categoriesPopularWidget.noMoreResults"}))},s.createElement(u.Z,null,X.results.map((e=>s.createElement(d.ZP,{key:e.id},s.createElement(_.Z,Object.assign({elevation:0,category:e},f,{categoryFollowButtonProps:{onFollow:te}})))))))));return s.createElement(B,Object.assign({className:L()(F.root,h)},U),ae)}},95475:(e,t,o)=>{o.d(t,{Z:()=>m});var a=o(67294),s=o(78462),n=o(90948),i=o(74808),l=o(63902),r=o(44267),c=o(97212),u=o(3928);const d={root:`${u.B}-skeleton-root`,list:`${u.B}-list`},g=(0,n.ZP)(l.Z,{name:u.B,slot:"SkeletonRoot"})((()=>({})));function m(e){return a.createElement(g,Object.assign({className:d.root},e),a.createElement(r.Z,null,a.createElement(s.Z,{className:d.list},[...Array(4)].map(((e,t)=>a.createElement(c.ZP,{key:t},a.createElement(i.Z,{elevation:0})))))))}},3928:(e,t,o)=>{o.d(t,{B:()=>a});const a="SCCategoriesSuggestionWidget"},74808:(e,t,o)=>{o.d(t,{Z:()=>g});var a=o(67294),s=o(90948),n=o(88078),i=o(2734),l=o(25662),r=o(115),c=o(40092);const u={root:`${c.B}-skeleton-root`,image:`${c.B}-image`,primary:`${c.B}-primary`,secondary:`${c.B}-secondary`,button:`${c.B}-button`,action:`${c.B}-action`},d=(0,s.ZP)(r.Z,{name:c.B,slot:"SkeletonRoot"})((()=>({})));function g(e){const t=(0,i.Z)();return a.createElement(d,Object.assign({className:u.root},e,{image:a.createElement(n.Z,{animation:"wave",variant:"rectangular",width:t.selfcommunity.category.icon.sizeMedium,height:t.selfcommunity.category.icon.sizeMedium,className:u.image}),primary:a.createElement(n.Z,{animation:"wave",height:10,width:120,className:u.primary}),secondary:a.createElement(n.Z,{animation:"wave",height:10,width:70,className:u.secondary}),actions:a.createElement(l.Z,{size:"small",variant:"outlined",disabled:!0,className:u.button},a.createElement(n.Z,{animation:"wave",height:10,width:50,className:u.action}))}))}},40092:(e,t,o)=>{o.d(t,{B:()=>a});const a="SCCategory"},42623:(e,t,o)=>{o.d(t,{Z:()=>O});var a=o(97582),s=o(67294),n=o(90948),i=o(87952),l=o(41538),r=o(98365),c=o(97265),u=o(12132),d=o(74808),g=o(75802),m=o(54490),E=o(86896),p=o(94184),Z=o.n(p),y=o(29628),h=o(75427),S=o(40092);const f=(0,m.vU)({categoryFollowers:{id:"ui.category.categoryFollowers",defaultMessage:"ui.category.categoryFollowers"}}),N={root:`${S.B}-root`,categoryImage:`${S.B}-category-image`,title:`${S.B}-title`,actions:`${S.B}-actions`},v=(0,n.ZP)(h.Z,{name:S.B,slot:"Root"})((()=>({})));const O=function(e){const t=(0,y.Z)({props:e,name:S.B}),{categoryId:o=null,category:n=null,className:m=null,elevation:p,autoHide:h=!1,categoryFollowButtonProps:O={},showFollowers:b=!0,ButtonBaseProps:_=null}=t,P=(0,a._T)(t,["categoryId","category","className","elevation","autoHide","categoryFollowButtonProps","showFollowers","ButtonBaseProps"]),C=(0,l.sy)(),{scCategory:L,setSCCategory:w}=(0,r.Z)({id:o,category:n}),R=(0,s.useMemo)((()=>_||{component:c.Z,to:C.url(u.CATEGORY_ROUTE_NAME,L)}),[_,C,L]),I=(0,E.Z)();return L?h?null:s.createElement(v,Object.assign({elevation:p,className:Z()(N.root,m),ButtonBaseProps:R,image:s.createElement(i.Z,{alt:L.name,src:L.image_medium,variant:"square",className:N.categoryImage}),primary:L.name,secondary:b?`${I.formatMessage(f.categoryFollowers,{total:L.followers_counter})}`:L.slogan,actions:s.createElement(g.Z,Object.assign({category:L},O))},P)):s.createElement(d.Z,{elevation:p})}},75802:(e,t,o)=>{o.d(t,{Z:()=>N});var a,s=o(97582),n=o(67294),i=o(90948),l=o(59219),r=o(99960),c=o(53704),u=o(68787),d=o(98365),g=o(75459),m=o(31812),E=o(44012),p=o(94184),Z=o.n(p),y=o(29628);!function(e){e.NONE="none",e.DEFAULT="default",e.FORCED="forced"}(a||(a={}));const h="SCCategoryFollowButton",S={root:`${h}-root`},f=(0,i.ZP)(m.Z,{name:h,slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({})));const N=function(e){const t=(0,y.Z)({props:e,name:h}),{className:o,categoryId:i,category:m,onFollow:p}=t,N=(0,s._T)(t,["className","categoryId","category","onFollow"]),v=(0,c.RM)(),O=(0,u.LD)(),b=O.managers.categories,_=O.user?O.user.id:null,{scCategory:P,setSCCategory:C}=(0,d.Z)({id:i,category:m,cacheStrategy:_?l.n2.CACHE_FIRST:l.n2.STALE_WHILE_REVALIDATE}),[L,w]=(0,n.useState)(null);return(0,n.useEffect)((()=>{_&&w(b.isFollowed(P))}),[_,b.isFollowed]),!P||P&&L&&P.auto_follow===a.FORCED?null:n.createElement(f,Object.assign({size:"small",variant:"outlined",onClick:()=>{O.user?b.follow(P).then((()=>{p&&p(P,!L)})).catch((e=>{r.Y.error(g.J,e)})):v.settings.handleAnonymousAction()},loading:O.user?null===L||b.isLoading(P):null,className:Z()(S.root,o)},N),L&&O.user?n.createElement(E.Z,{defaultMessage:"ui.categoryFollowButton.unfollow",id:"ui.categoryFollowButton.unfollow"}):n.createElement(E.Z,{defaultMessage:"ui.categoryFollowButton.follow",id:"ui.categoryFollowButton.follow"}))}},31717:(e,t,o)=>{o.d(t,{B:()=>a});const a="SCInlineComposerWidget"},93132:(e,t,o)=>{o.d(t,{Z:()=>R});var a=o(97582),s=o(67294),n=o(9774),i=o(53704),l=o(68787),r=o(41538),c=o(66380),u=o(85472),d=o(65580),g=o(97265),m=o(12132),E=o(44267),p=o(5616),Z=o(25662),y=o(87952),h=o(90948),S=o(44012),f=o(20377),N=o(63902),v=o(29628),O=o(91290),b=o(22461),_=o(70815),P=o(31717),C=o(54545);const L={root:`${P.B}-root`,content:`${P.B}-content`,input:`${P.B}-input`,avatar:`${P.B}-avatar`},w=(0,h.ZP)(N.Z,{name:P.B,slot:"Root"})((()=>({})));const R=function(e){const t=(0,v.Z)({props:e,name:P.B}),{mediaObjectTypes:o=[b.Z,_.Z],defaultValue:h,onSuccess:N=null,label:R,feedType:I=n.a.HOME}=t,T=(0,a._T)(t,["mediaObjectTypes","defaultValue","onSuccess","label","feedType"]),A=(0,i.RM)(),M=(0,l.LD)(),j=(0,r.sy)(),{enqueueSnackbar:x}=(0,f.Ds)(),W=(0,c.ko)(),$=(0,s.useMemo)((()=>W.preferences[u.Kq].value),[W.preferences]),[F,B]=(0,s.useState)(!1),k=(0,s.useCallback)((()=>{M.user?d.IT(M.user)?x(s.createElement(S.Z,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3}):B(!0):A.settings.handleAnonymousAction()}),[M.user,A.settings]),D=(0,s.useCallback)((()=>{B(!1)}),[]);return!d.B2(M.user)&&$?s.createElement(C.Z,null):s.createElement(s.Fragment,null,s.createElement(w,Object.assign({className:L.root},T),s.createElement(E.Z,{className:L.content},s.createElement(p.Z,{className:L.input},s.createElement(Z.Z,{variant:"text",disableFocusRipple:!0,disableRipple:!0,disableElevation:!0,onClick:k,fullWidth:!0,color:"inherit"},null!=R?R:s.createElement(S.Z,{id:"ui.inlineComposerWidget.label",defaultMessage:"ui.inlineComposerWidget.label"}))),s.createElement(p.Z,{className:L.avatar},M.user?s.createElement(g.Z,{to:j.url(m.USER_PROFILE_ROUTE_NAME,M.user)},s.createElement(y.Z,{alt:M.user.username,variant:"circular",src:M.user.avatar})):s.createElement(y.Z,{variant:"circular"})))),s.createElement(O.Z,{open:F,mediaObjectTypes:o,defaultValue:h,fullWidth:!0,onClose:D,onSuccess:e=>{N?N(e):x(s.createElement(S.Z,{id:"ui.inlineComposerWidget.success",defaultMessage:"ui.inlineComposerWidget.success"}),{variant:"success",autoHideDuration:3e3}),B(!1)},feedType:I}))}},19326:(e,t,o)=>{o.d(t,{Z:()=>M});var a=o(97582),s=o(67294),n=o(90948),i=o(44267),l=o(15861),r=o(62023),c=o(87918),u=o(25662),d=o(24243),g=o(24085),m=o(68787),E=o(66380),p=o(85472),Z=o(44012),y=o(41538),h=o(97265),S=o(12132),f=o(94184),N=o.n(f),v=o(63902),O=o(29628),b=o(54545),_=o(88078);const P="SCLoyaltyProgramWidget",C={root:`${P}-skeleton-root`,title:`${P}-title`,content:`${P}-content`,chip:`${P}-chip`,points:`${P}-points`,actions:`${P}-actions`},L=(0,n.ZP)(v.Z,{name:P,slot:"SkeletonRoot"})((()=>({})));function w(){return s.createElement(L,{className:C.root},s.createElement(i.Z,{className:C.content},s.createElement(l.Z,{className:C.title},s.createElement(_.Z,{animation:"wave",height:25,width:"40%",variant:"rectangular"}))),s.createElement(r.Z,{className:C.actions},s.createElement(l.Z,{className:C.points},s.createElement(_.Z,{animation:"wave",variant:"circular",width:60,height:30,className:C.chip}),s.createElement(_.Z,{animation:"wave",height:20,width:90,variant:"rectangular"})),s.createElement(u.Z,{disabled:!0,variant:"outlined",size:"small"},s.createElement(_.Z,{animation:"wave",height:20,width:70,variant:"text"}))))}var R=o(75459),I=o(99960);const T={root:`${P}-root`,title:`${P}-title`,actions:`${P}-actions`,points:`${P}-points`,discoverMore:`${P}-discover-more`},A=(0,n.ZP)(v.Z,{name:P,slot:"Root"})((()=>({})));const M=function(e){const t=(0,O.Z)({props:e,name:P}),{className:o,userId:n=null}=t,f=(0,a._T)(t,["className","userId"]),v=(0,s.useContext)(m.K8),_=(0,E.ko)(),C=(0,y.sy)(),[L,M]=(0,s.useState)(null),[j,x]=(0,s.useState)(!0),W=v.user?v.user.id:null,$=(0,s.useMemo)((()=>p.v0 in _.preferences&&_.preferences[p.v0].value),[_.preferences]);return(0,s.useEffect)((()=>{$&&W&&d.Z.request({url:g.Z.GetUserLoyaltyPoints.url({id:v.user.id}),method:g.Z.GetUserLoyaltyPoints.method}).then((e=>{M(e.data.points),x(!1)})).catch((e=>{x(!1),I.Y.error(R.J,e),console.log(e)}))}),[W,$]),!$||!v.user||n&&n!==v.user.id?s.createElement(b.Z,null):j?s.createElement(w,null):s.createElement(A,Object.assign({className:N()(T.root,o)},f),s.createElement(i.Z,null,s.createElement(l.Z,{className:T.title},s.createElement(Z.Z,{id:"ui.loyaltyProgramWidget.title",defaultMessage:"ui.loyaltyProgramWidget.title"}))),s.createElement(r.Z,{className:T.actions},s.createElement(l.Z,{className:T.points},s.createElement(c.Z,{size:"medium",component:"span",label:L}),s.createElement(Z.Z,{id:"ui.loyaltyProgramWidget.points",defaultMessage:"ui.loyaltyProgramWidget.points"})),s.createElement(u.Z,{size:"small",variant:"outlined",className:T.discoverMore,component:h.Z,to:C.url(S.LOYALTY_ROUTE_NAME,{})},s.createElement(Z.Z,{id:"ui.loyaltyProgramWidget.discover",defaultMessage:"ui.loyaltyProgramWidget.discover"}))))}},5208:(e,t,o)=>{o.d(t,{Z:()=>b});var a=o(97582),s=o(67294),n=o(90948),i=o(86886),l=o(15861),r=o(25662),c=o(24243),u=o(24085),d=o(68787),g=o(6237),m=o(65580),E=o(67564),p=o(44012),Z=o(94184),y=o.n(Z),h=o(63902),S=o(29628),f=o(54545);const N="SCPlatformWidget",v={root:`${N}-root`,title:`${N}-title`},O=(0,n.ZP)(h.Z,{name:N,slot:"Root"})((()=>({})));const b=function(e){var t;const o=(0,S.Z)({props:e,name:N}),{autoHide:n,className:Z,title:h=null,startActions:b=null,endActions:_=null,onHeightChange:P,onStateChange:C}=o,L=(0,a._T)(o,["autoHide","className","title","startActions","endActions","onHeightChange","onStateChange"]),w=(0,s.useContext)(d.K8),R=((0,g.yL)().locale,(0,s.useMemo)((()=>m.GJ(w.user)),[w.user])),I=(0,s.useMemo)((()=>m.vJ(w.user)),[w.user]);function T(e){c.Z.request({url:u.Z.Platform.url(),method:u.Z.Platform.method,params:{next:e}}).then((e=>{const t=e.data.platform_url;window.open(t,"_blank").focus()})).catch((e=>{console.log(e)}))}const A=s.createElement(i.ZP,{container:!0,spacing:R?1:3,justifyContent:"center"},s.createElement(i.ZP,{item:!0,xs:12},h||s.createElement(l.Z,{className:v.title,component:"h3",align:"center"},s.createElement(p.Z,{id:"ui.platformWidget.title",defaultMessage:"ui.platformWidget.title"}),s.createElement(E.Z,{fontSize:"small"},"lock"))),b,R&&s.createElement(i.ZP,{item:!0,xs:"auto"},s.createElement(r.Z,{variant:"outlined",size:"small",onClick:()=>T("")},s.createElement(p.Z,{id:"ui.platformWidget.adm",defaultMessage:"ui.platformWidget.adm"}))),s.createElement(i.ZP,{item:!0,xs:"auto"},s.createElement(r.Z,{variant:"outlined",size:"small",onClick:()=>T("/moderation/flags/")},R||I?s.createElement(p.Z,{id:"ui.platformWidget.mod",defaultMessage:"ui.platformWidget.mod"}):s.createElement(p.Z,{id:"ui.platformWidget.edt",defaultMessage:"ui.platformWidget.edt"}))),_);return!n&&(null===(t=null==w?void 0:w.user)||void 0===t?void 0:t.role)?s.createElement(O,Object.assign({className:y()(v.root,Z)},L),A):s.createElement(f.Z,null)}},27807:(e,t,o)=>{o.d(t,{Z:()=>k});var a=o(97582),s=o(67294),n=o(90948),i=o(2734),l=o(61730),r=o(44267),c=o(15861),u=o(78462),d=o(97212),g=o(25662),m=o(31924),E=o(24243),p=o(24085),Z=o(69721),y=o(68787),h=o(66380),S=o(85472),f=o(50353),N=o(63902);const v="SCUserSuggestionWidget",O={root:`${v}-skeleton-root`,list:`${v}-list`},b=(0,n.ZP)(N.Z,{name:v,slot:"SkeletonRoot"})((()=>({})));const _=function(e){return s.createElement(b,Object.assign({className:O.root},e),s.createElement(r.Z,null,s.createElement(u.Z,{className:O.list},[...Array(4)].map(((e,t)=>s.createElement(d.ZP,{key:t},s.createElement(f.Z,{elevation:0})))))))};var P=o(37089),C=o(44012),L=o(94184),w=o.n(L),R=o(29628),I=o(54545),T=o(59219),A=o(99960),M=o(15927),j=o(39154),x=o(75459),W=o(79558);const $={root:`${v}-root`,title:`${v}-title`,noResults:`${v}-no-results`,showMore:`${v}-show-more`,dialogRoot:`${v}-dialog-root`,endMessage:`${v}-end-message`},F=(0,n.ZP)(N.Z,{name:v,slot:"Root"})((()=>({}))),B=(0,n.ZP)(j.Z,{name:v,slot:"DialogRoot"})((()=>({})));const k=function(e){const t=(0,R.Z)({props:e,name:v}),{autoHide:o=!0,limit:n=3,className:N,UserProps:O={},cacheStrategy:b=T.n2.NETWORK_ONLY,onHeightChange:L,onStateChange:j,DialogProps:k={}}=t,D=(0,a._T)(t,["autoHide","limit","className","UserProps","cacheStrategy","onHeightChange","onStateChange","DialogProps"]),[U,K]=(0,s.useReducer)(M.Xi,{isLoadingNext:!1,next:null,cacheKey:Z.hu(Z.oE),cacheStrategy:b,visibleItems:n},M.Mv),[z,H]=(0,s.useState)(!1),X=(0,y.LD)(),G=(0,h.ko)(),Y=((0,s.useMemo)((()=>S.$0 in G.preferences&&G.preferences[S.$0].value),[G.preferences]),(0,i.Z)()),V=(0,l.Z)(Y.breakpoints.down("md")),q=(0,s.useMemo)((()=>()=>{U.initialized||U.isLoadingNext||(K({type:M.dK.LOADING_NEXT}),m.Z.getUserSuggestion({limit:n}).then((e=>{K({type:M.dK.LOAD_NEXT_SUCCESS,payload:Object.assign(Object.assign({},e),{initialized:!0})})})).catch((e=>{K({type:M.dK.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),A.Y.error(x.J,e)})))}),[U.isLoadingNext,U.initialized,n,K]);(0,s.useEffect)((()=>{let e;if(X.user)return e=setTimeout(q),()=>{e&&clearTimeout(e)}}),[X.user]),(0,s.useEffect)((()=>{z&&U.next&&U.results.length<=n&&U.initialized&&(K({type:M.dK.LOADING_NEXT}),m.Z.getUserSuggestion({offset:n,limit:10}).then((e=>{K({type:M.dK.LOAD_NEXT_SUCCESS,payload:e})})).catch((e=>{K({type:M.dK.LOAD_NEXT_FAILURE,payload:{errorLoadNext:e}}),A.Y.error(x.J,e)})))}),[z,U.next,U.results.length,U.initialized,n]),(0,s.useEffect)((()=>{L&&L()}),[U.results]),(0,s.useEffect)((()=>{X.user&&b===T.n2.NETWORK_ONLY&&j&&j({cacheStrategy:T.n2.CACHE_FIRST})}),[X.user]);const J=(0,s.useMemo)((()=>()=>{K({type:M.dK.LOADING_NEXT}),E.Z.request({url:U.next,method:p.Z.UserSuggestion.method}).then((e=>{K({type:M.dK.LOAD_NEXT_SUCCESS,payload:e.data})}))}),[K,U.next,U.isLoadingNext,U.initialized]),Q=()=>{H((e=>!e))};if(o&&!U.count&&U.initialized||!X.user)return s.createElement(I.Z,null);if(!U.initialized)return s.createElement(_,null);const ee=s.createElement(r.Z,null,s.createElement(c.Z,{className:$.title,variant:"h5"},s.createElement(C.Z,{id:"ui.userSuggestionWidget.title",defaultMessage:"ui.userSuggestionWidget.title"})),U.count?s.createElement(s.Fragment,null,s.createElement(u.Z,null,U.results.slice(0,U.visibleItems).map((e=>s.createElement(d.ZP,{key:e.id},s.createElement(P.Z,Object.assign({elevation:0,user:e},O)))))),U.count>U.visibleItems&&s.createElement(g.Z,{className:$.showMore,onClick:Q},s.createElement(C.Z,{id:"ui.userSuggestionWidget.button.showAll",defaultMessage:"ui.userSuggestionWidget.button.showAll"}))):s.createElement(c.Z,{className:$.noResults,variant:"body2"},s.createElement(C.Z,{id:"ui.userSuggestionWidget.noResults",defaultMessage:"ui.userSuggestionWidget.noResults"})),z&&s.createElement(B,Object.assign({className:$.dialogRoot,title:s.createElement(C.Z,{defaultMessage:"ui.userSuggestionWidget.title",id:"ui.userSuggestionWidget.title"}),onClose:Q,open:z},k),s.createElement(W.Z,{dataLength:U.results.length,next:J,hasMoreNext:Boolean(U.next),loaderNext:s.createElement(f.Z,Object.assign({elevation:0},O)),height:V?"100%":400,endMessage:s.createElement(c.Z,{className:$.endMessage},s.createElement(C.Z,{id:"ui.userSuggestionWidget.noMoreResults",defaultMessage:"ui.userSuggestionWidget.noMoreResults"}))},s.createElement(u.Z,null,U.results.map((e=>s.createElement(d.ZP,{key:e.id},s.createElement(P.Z,Object.assign({elevation:0,user:e},O)))))))));return s.createElement(F,Object.assign({className:w()($.root,N)},D),ee)}},15927:(e,t,o)=>{o.d(t,{Mv:()=>i,Xi:()=>n,dK:()=>s});var a=o(59219);const s={LOADING_NEXT:"_loading_next",LOADING_PREVIOUS:"_loading_previous",LOAD_NEXT_SUCCESS:"_load_next_success",LOAD_PREVIOUS_SUCCESS:"_load_previous_success",LOAD_NEXT_FAILURE:"_load_next_failure",LOAD_PREVIOUS_FAILURE:"_load_previous_failure",SET_RESULTS:"_set_results",SET_VISIBLE_ITEMS:"_set_visible_items",RESET:"_reset"};function n(e,t){var o;let n=Object.assign({},e);switch(t.type){case s.LOADING_NEXT:n=Object.assign(Object.assign({},e),{isLoadingNext:!0,errorLoadNext:null});break;case s.LOADING_PREVIOUS:n=Object.assign(Object.assign({},e),{isLoadingPrevious:!0,errorLoadPrevious:null});break;case s.LOAD_NEXT_SUCCESS:n=Object.assign(Object.assign({},e),{isLoadingNext:!1,count:t.payload.count,next:t.payload.next?t.payload.next:null,results:[...e.results,...t.payload.results],errorLoadNext:null,initialized:(null===(o=t.payload)||void 0===o?void 0:o.initialized)||!0});break;case s.LOAD_PREVIOUS_SUCCESS:n=Object.assign(Object.assign({},e),{isLoadingPrevious:!1,count:t.payload.count,previous:t.payload.previous?t.payload.previous:null,results:[...t.payload.results,...e.results],errorPreviousNext:null});break;case s.SET_RESULTS:n=Object.assign(Object.assign(Object.assign({},e),{results:[...t.payload.results]}),t.payload.count?{count:t.payload.count}:{});break;case s.SET_VISIBLE_ITEMS:n=Object.assign(Object.assign({},e),{visibleItems:t.payload.visibleItems});break;case s.LOAD_NEXT_FAILURE:n=Object.assign(Object.assign({},e),{isLoadingNext:!1,errorLoadNext:t.payload.error});break;case s.LOAD_PREVIOUS_FAILURE:n=Object.assign(Object.assign({},e),{isLoadingNext:!1,errorLoadPrevious:t.payload.error});break;case s.RESET:n={isLoadingNext:!1,next:null,results:[],count:0,errorLoadNext:null,initialized:!1}}return a.ZP.set(n.cacheKey,n),n}function i(e){let t={cacheKey:e.cacheKey?e.cacheKey:null,count:e.count?e.count:0,results:e.results?e.results:[],next:e.next?e.next:null,previous:e.previous?e.previous:null,isLoadingNext:!!e.isLoadingNext&&e.isLoadingNext,isLoadingPrevious:!!e.isLoadingPrevious&&e.isLoadingPrevious,visibleItems:e.visibleItems?e.visibleItems:null,initialized:!1};if(t.cacheKey&&a.ZP.hasKey(t.cacheKey)&&e.cacheStrategy!==a.n2.NETWORK_ONLY){const e=a.ZP.get(t.cacheKey);return Object.assign(Object.assign({},t),e)}return t}}}]);