/*! For license information please see 26474.33b7768a.js.LICENSE.txt */
(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[26474],{98619:(e,t,s)=>{"use strict";s.d(t,{Z:()=>O});var n=s(80102),o=s(83117),a=s(67294),i=s(63961),r=s(94780),l=s(51025),c=s(90948),d=s(14136),u=s(28628),m=s(49990),g=s(58974),p=s(51705),j=s(59773),h=s(68686),b=s(85893);const f=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],v=(0,c.ZP)(m.Z,{shouldForwardProp:e=>(0,d.Z)(e)||"classes"===e,name:"MuiListItemButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.dense&&t.dense,"flex-start"===s.alignItems&&t.alignItemsFlexStart,s.divider&&t.divider,!s.disableGutters&&t.gutters]}})((({theme:e,ownerState:t})=>(0,o.Z)({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${h.Z.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,l.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${h.Z.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,l.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${h.Z.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,l.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,l.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${h.Z.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${h.Z.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},"flex-start"===t.alignItems&&{alignItems:"flex-start"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.dense&&{paddingTop:4,paddingBottom:4}))),O=a.forwardRef((function(e,t){const s=(0,u.i)({props:e,name:"MuiListItemButton"}),{alignItems:l="center",autoFocus:c=!1,component:d="div",children:m,dense:O=!1,disableGutters:x=!1,divider:y=!1,focusVisibleClassName:Z,selected:C=!1,className:E}=s,N=(0,n.Z)(s,f),_=a.useContext(j.Z),T=a.useMemo((()=>({dense:O||_.dense||!1,alignItems:l,disableGutters:x})),[l,_.dense,O,x]),A=a.useRef(null);(0,g.Z)((()=>{c&&A.current&&A.current.focus()}),[c]);const P=(0,o.Z)({},s,{alignItems:l,dense:T.dense,disableGutters:x,divider:y,selected:C}),w=(e=>{const{alignItems:t,classes:s,dense:n,disabled:a,disableGutters:i,divider:l,selected:c}=e,d={root:["root",n&&"dense",!i&&"gutters",l&&"divider",a&&"disabled","flex-start"===t&&"alignItemsFlexStart",c&&"selected"]},u=(0,r.Z)(d,h.t,s);return(0,o.Z)({},s,u)})(P),k=(0,p.Z)(A,t);return(0,b.jsx)(j.Z.Provider,{value:T,children:(0,b.jsx)(v,(0,o.Z)({ref:k,href:N.href||N.to,component:(N.href||N.to)&&"div"===d?"button":d,focusVisibleClassName:(0,i.Z)(w.focusVisible,Z),ownerState:P,className:(0,i.Z)(w.root,E)},N,{classes:w,children:m}))})}))},98704:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var n=s(97582),o=s(24085),a=s(91705);class i{static getAllCategories(e,t){return(0,a.N)(Object.assign(Object.assign({},t),{params:e,url:o.Z.CategoryList.url({}),method:o.Z.CategoryList.method}))}static searchCategory(e,t){return(0,a.N)(Object.assign(Object.assign({},t),{params:e,url:o.Z.SearchCategory.url({}),method:o.Z.SearchCategory.method}))}static createCategory(e,t){return(0,a.N)(Object.assign({url:o.Z.CreateCategory.url({}),method:o.Z.CreateCategory.method,data:e},t))}static getSpecificCategory(e,t){return(0,a.N)(Object.assign({url:o.Z.Category.url({id:e}),method:o.Z.Category.method},t))}static updateASpecificCategory(e,t,s){return(0,a.N)(Object.assign({url:o.Z.UpdateCategory.url({id:e}),method:o.Z.UpdateCategory.method,data:t},s))}static patchASpecificCategory(e,t,s){return(0,a.N)(Object.assign({url:o.Z.PatchCategory.url({id:e}),method:o.Z.PatchCategory.method,data:t},s))}static deleteASpecificCategory(e,t){return(0,a.N)(Object.assign({url:o.Z.DeleteCategory.url({id:e}),method:o.Z.DeleteCategory.method},t))}static getCategoryAudience(e,t){return(0,a.N)(Object.assign({url:o.Z.CategoryAudience.url({id:e}),method:o.Z.CategoryAudience.method},t))}static getCategoryFollowers(e,t,s){return(0,a.N)(Object.assign({url:o.Z.CategoryFollowers.url({id:e}),method:o.Z.CategoryFollowers.method,params:t},s))}static getCategoryFeed(e,t,s){return(0,a.N)(Object.assign({url:o.Z.CategoryFeed.url({id:e}),method:o.Z.CategoryFeed.method,params:t},s))}static getCategoryTrendingFeed(e,t,s){return(0,a.N)(Object.assign(Object.assign({},s),{params:t,url:o.Z.CategoryTrendingFeed.url({id:e}),method:o.Z.CategoryTrendingFeed.method}))}static getCategoryTrendingFollowers(e,t,s){return(0,a.N)(Object.assign({url:o.Z.CategoryTrendingPeople.url({id:e}),method:o.Z.CategoryTrendingPeople.method,params:t},s))}static followCategory(e,t){return(0,a.N)(Object.assign({url:o.Z.FollowCategory.url({id:e}),method:o.Z.FollowCategory.method},t))}static checkCategoryIsFollowed(e,t){return(0,a.N)(Object.assign({url:o.Z.CheckCategoryIsFollowed.url({id:e}),method:o.Z.CheckCategoryIsFollowed.method},t))}static getFollowedCategories(e,t){return(0,a.N)(Object.assign(Object.assign({},t),{params:e,url:o.Z.CategoriesFollowed.url({}),method:o.Z.CategoriesFollowed.method}))}static getPopularCategories(e,t){return(0,a.N)(Object.assign(Object.assign({},t),{params:e,url:o.Z.PopularCategories.url({}),method:o.Z.PopularCategories.method}))}}class r{static getAllCategories(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){return i.getAllCategories(e,t)}))}static searchCategory(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){return i.searchCategory(e,t)}))}static createCategory(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){return i.createCategory(e,t)}))}static getSpecificCategory(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){return i.getSpecificCategory(e,t)}))}static updateASpecificCategory(e,t,s){return(0,n.mG)(this,void 0,void 0,(function*(){return i.updateASpecificCategory(e,t,s)}))}static patchASpecificCategory(e,t,s){return(0,n.mG)(this,void 0,void 0,(function*(){return i.patchASpecificCategory(e,t,s)}))}static deleteASpecificCategory(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){return i.deleteASpecificCategory(e,t)}))}static getCategoryAudience(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){return i.getCategoryAudience(e,t)}))}static getCategoryFollowers(e,t,s){return(0,n.mG)(this,void 0,void 0,(function*(){return i.getCategoryFollowers(e,t,s)}))}static getCategoryFeed(e,t,s){return(0,n.mG)(this,void 0,void 0,(function*(){return i.getCategoryFeed(e,t,s)}))}static getCategoryTrendingFeed(e,t,s){return(0,n.mG)(this,void 0,void 0,(function*(){return i.getCategoryTrendingFeed(e,t,s)}))}static getCategoryTrendingFollowers(e,t,s){return(0,n.mG)(this,void 0,void 0,(function*(){return i.getCategoryTrendingFollowers(e,t,s)}))}static followCategory(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){return i.followCategory(e,t)}))}static checkCategoryIsFollowed(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){return i.checkCategoryIsFollowed(e,t)}))}static getFollowedCategories(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){return i.getFollowedCategories(e,t)}))}static getPopularCategories(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){return i.getPopularCategories(e,t)}))}}},58952:(e,t,s)=>{"use strict";s.d(t,{Z:()=>m});var n=s(97582),o=s(67294),a=s(74482),i=s(24085),r=s(98704),l=s(59219),c=s(99960),d=s(69721);const u={categories:[],isLoading:!0},m=e=>{const{cacheStrategy:t=l.n2.CACHE_FIRST,endpointQueryParams:s={}}=e||{},m=(0,d.Ny)(),g=t!==l.n2.NETWORK_ONLY?((e,t)=>{if(!e)return null;const s=e.map((e=>{const t=(0,d.u5)(e);return l.ZP.get(t)}));return s.filter((e=>!e)).length>0?null:(null==t?void 0:t.can_create_content)?s.filter((e=>!e.content_only_staff)):s})(l.ZP.get(m,null),s):null,[p,j]=(0,o.useState)(null!==g?{categories:g,isLoading:!1}:u),h=(e=i.Z.CategoryList.url())=>(0,n.mG)(void 0,void 0,void 0,(function*(){const t=yield r.Z.getAllCategories(Object.assign({active:!0},s),{url:e});return t.next?t.results.concat(yield h(t.next)):t.results}));return(0,o.useEffect)((()=>{t===l.n2.CACHE_FIRST&&g||h().then((e=>{j({categories:e,isLoading:!1}),l.ZP.set(m,e.map((e=>{const t=(0,d.u5)(e.id);return l.ZP.set(t,e),e.id})))})).catch((e=>{console.log(e),c.Y.error(a.h,"Unable to retrieve categories")}))}),[]),p}},94158:(e,t,s)=>{"use strict";s.d(t,{Z:()=>y});var n=s(97582),o=s(85893),a=s(67294),i=s(44012),r=s(23370),l=s.n(r),c=s(11447),d=s.n(c),u=s(90948),m=s(6208),g=s(87918),p=s(69368),j=s(61903),h=s(98456),b=s(58952),f=s(29360);const v="SCCategoryAutocomplete",O={root:`${v}-root`},x=(0,u.ZP)(m.Z,{name:v,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({}))),y=e=>{const t=(0,f.Z)({props:e,name:v}),{onChange:s,multiple:r=!1,defaultValue:c=(r?[]:null),limitCountCategories:u=0,checkboxSelect:m=!1,disabled:y=!1,endpointQueryParams:Z={},TextFieldProps:C={variant:"outlined",label:(0,o.jsx)(i.Z,{id:"ui.categoryAutocomplete.label",defaultMessage:"ui.categoryAutocomplete.label"})}}=t,E=(0,n._T)(t,["onChange","multiple","defaultValue","limitCountCategories","checkboxSelect","disabled","endpointQueryParams","TextFieldProps"]),[N,_]=(0,a.useState)(!1),[T,A]=(0,a.useState)("string"==typeof c?null:c),{categories:P,isLoading:w}=(0,b.Z)({endpointQueryParams:Z});(0,a.useEffect)((()=>{null!==T&&(null==s||s(T))}),[T]),(0,a.useEffect)((()=>{w||"string"!=typeof c||A(r?P.filter((e=>e.id===Number(c))):P.find((e=>e.id===Number(c))))}),[w]);return(0,o.jsx)(x,Object.assign({className:O.root,multiple:r,open:N,onOpen:()=>{_(!0)},onClose:()=>{_(!1)},filterSelectedOptions:!m,disableCloseOnSelect:m,options:P||[],getOptionLabel:e=>e.name||"",value:T,selectOnFocus:!0,clearOnBlur:!0,blurOnSelect:!0,handleHomeEndKeys:!0,clearIcon:null,disabled:y||w,noOptionsText:(0,o.jsx)(i.Z,{id:"ui.categoryAutocomplete.empty",defaultMessage:"ui.categoryAutocomplete.empty"}),onChange:(e,t)=>{let s=null;if(r&&u>0){const[...e]=t;s=e.slice(-1*u)}else s=t;A(s)},isOptionEqualToValue:(e,t)=>t.id===e.id,renderTags:(e,t)=>e.map(((e,s)=>(0,o.jsx)(g.Z,Object.assign({id:e.id,label:e.name,color:e.color},t({index:s})),e.id))),renderOption:(e,t,{selected:s,inputValue:n})=>{const i=d()(t.name,n),r=l()(t.name,i);return(0,o.jsxs)("li",Object.assign({},e,{children:[m&&(0,o.jsx)(p.Z,{style:{marginRight:8},checked:s}),(0,o.jsx)(g.Z,{label:(0,o.jsx)(a.Fragment,{children:r.map(((e,t)=>(0,o.jsx)("span",Object.assign({style:{fontWeight:e.highlight?700:400}},{children:e.text}),t)))})})]}))},renderInput:e=>(0,o.jsx)(j.Z,Object.assign({},e,C,{margin:"dense",InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"categories",endAdornment:(0,o.jsxs)(a.Fragment,{children:[w?(0,o.jsx)(h.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},E))}},4943:(e,t,s)=>{"use strict";s.d(t,{Z:()=>ns});var n=s(97582),o=s(85893),a=s(67294),i=s(49794),r=s(72951),l=s(9774),c=s(24243),d=s(24085),u=s(59488),m=s(8860),g=s(22607),p=s(65580),j=s(12918),h=s(44012),b=s(16628),f=s(90948),v=s(64666),O=s(54776),x=s(2734),y=s(37292),Z=s(46901),C=s(92401),E=s(37645),N=s(93946),_=s(67564),T=s(6514),A=s(94253),P=s(31425);const w="discussion",k="post",S="poll",M=160;var R=s(57250),$=s(96828),I=s(23370),B=s.n(I),F=s(11447),L=s.n(F),D=s(15861),U=s(25662),V=s(10760),G=s(40044),z=s(6208),H=s(61903),W=s(8455),q=s(20819),Y=s.n(q);const X="SCComposer",K=370,J=210;var Q=s(87952),ee=s(98456),te=s(74482),se=s(59219),ne=s(99960),oe=s(69721);const ae={groups:[],isLoading:!0},ie=e=>{const{cacheStrategy:t=se.n2.CACHE_FIRST}=e||{},s=(0,oe.Em)(),o=t!==se.n2.NETWORK_ONLY?(e=>{if(!e)return null;const t=e.map((e=>{const t=(0,oe.b0)(e);return se.ZP.get(t)}));return t.filter((e=>!e)).length>0?null:t})(se.ZP.get(s,null)):null,[i,r]=(0,a.useState)(null!==o?{groups:o,isLoading:!1}:ae),l=(e=d.Z.GetUserGroups.url())=>(0,n.mG)(void 0,void 0,void 0,(function*(){const t=(yield c.Z.request({url:e,method:d.Z.GetUserGroups.method})).data;return t.next?t.results.concat(yield l(t.next)):t.results}));return(0,a.useEffect)((()=>{t===se.n2.CACHE_FIRST&&o||l().then((e=>{r({groups:e,isLoading:!1}),se.ZP.set(s,e.map((e=>{const t=(0,oe.b0)(e.id);return se.ZP.set(t,e),e.id})))})).catch((e=>{console.log(e),ne.Y.error(te.h,"Unable to retrieve groups")}))}),[]),i};var re=s(29360);const le="SCGroupAutocomplete",ce={root:`${le}-root`},de=(0,f.ZP)(z.Z,{name:le,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({}))),ue=e=>{const t=(0,re.Z)({props:e,name:le}),{onChange:s,defaultValue:i=null,disabled:r=!1,TextFieldProps:l={variant:"outlined",label:(0,o.jsx)(h.Z,{id:"ui.groupAutocomplete.label",defaultMessage:"ui.groupAutocomplete.label"})}}=t,c=(0,n._T)(t,["onChange","defaultValue","disabled","TextFieldProps"]),[d,u]=(0,a.useState)(!1),[m,g]=(0,a.useState)("string"==typeof i?null:i),{groups:p,isLoading:j}=ie();(0,a.useEffect)((()=>{null!==m&&s&&s(m)}),[m]),(0,a.useEffect)((()=>{j||"string"!=typeof i||g(p.find((e=>e.id===Number(i))))}),[j]);return(0,o.jsx)(de,Object.assign({className:ce.root,open:d,onOpen:()=>{u(!0)},onClose:()=>{u(!1)},options:p||[],getOptionLabel:e=>e.name||"",value:m,selectOnFocus:!0,clearOnBlur:!0,blurOnSelect:!0,handleHomeEndKeys:!0,clearIcon:null,disabled:r||j,noOptionsText:(0,o.jsx)(h.Z,{id:"ui.groupAutocomplete.empty",defaultMessage:"ui.groupAutocomplete.empty"}),onChange:(e,t)=>{g(t)},isOptionEqualToValue:(e,t)=>t.id===e.id,renderOption:(e,t,{inputValue:s})=>{const n=L()(t.name,s),i=B()(t.name,n);return(0,o.jsxs)(A.Z,Object.assign({component:"li"},e,{children:[(0,o.jsx)(Q.Z,{alt:t.name,src:t.image_small,sx:{marginRight:1}}),(0,o.jsx)(a.Fragment,{children:i.map(((e,t)=>(0,o.jsx)(D.Z,Object.assign({sx:{fontWeight:e.highlight?700:400,marginRight:.2}},{children:e.text}),t)))})]}))},renderInput:e=>(0,o.jsx)(H.Z,Object.assign({},e,l,{margin:"dense",InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"groups",endAdornment:(0,o.jsxs)(a.Fragment,{children:[j?(0,o.jsx)(ee.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},c))},me={events:[],isLoading:!0},ge=e=>{const{cacheStrategy:t=se.n2.CACHE_FIRST}=e||{},s=(0,oe.Oi)(),o=t!==se.n2.NETWORK_ONLY?(e=>{if(!e)return null;const t=e.map((e=>{const t=(0,oe.$Y)(e);return se.ZP.get(t)}));return t.filter((e=>!e)).length>0?null:t})(se.ZP.get(s,null)):null,[i,r]=(0,a.useState)(null!==o?{events:o,isLoading:!1}:me),l=(e=d.Z.GetUserEvents.url())=>(0,n.mG)(void 0,void 0,void 0,(function*(){const t=(yield c.Z.request({url:e,method:d.Z.GetUserEvents.method})).data;return t.next?t.results.concat(yield l(t.next)):t.results}));return(0,a.useEffect)((()=>{t===se.n2.CACHE_FIRST&&o||l().then((e=>{r({events:e,isLoading:!1}),se.ZP.set(s,e.map((e=>{const t=(0,oe.$Y)(e.id);return se.ZP.set(t,e),e.id})))})).catch((e=>{console.log(e),ne.Y.error(te.h,"Unable to retrieve events")}))}),[]),i},pe="SCEventAutocomplete",je={root:`${pe}-root`},he=(0,f.ZP)(z.Z,{name:pe,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({}))),be=e=>{const t=(0,re.Z)({props:e,name:pe}),{onChange:s,defaultValue:i=null,disabled:r=!1,TextFieldProps:l={variant:"outlined",label:(0,o.jsx)(h.Z,{id:"ui.eventAutocomplete.label",defaultMessage:"ui.eventAutocomplete.label"})}}=t,c=(0,n._T)(t,["onChange","defaultValue","disabled","TextFieldProps"]),[d,u]=(0,a.useState)(!1),[m,g]=(0,a.useState)("string"==typeof i?null:i),{events:p,isLoading:j}=ge();(0,a.useEffect)((()=>{null!==m&&s&&s(m)}),[m]),(0,a.useEffect)((()=>{j||"string"!=typeof i||g(p.find((e=>e.id===Number(i))))}),[j]);return(0,o.jsx)(he,Object.assign({className:je.root,open:d,onOpen:()=>{u(!0)},onClose:()=>{u(!1)},options:p||[],getOptionLabel:e=>e.name||"",value:m,selectOnFocus:!0,clearOnBlur:!0,blurOnSelect:!0,handleHomeEndKeys:!0,clearIcon:null,disabled:r||j,noOptionsText:(0,o.jsx)(h.Z,{id:"ui.eventAutocomplete.empty",defaultMessage:"ui.eventAutocomplete.empty"}),onChange:(e,t)=>{g(t)},isOptionEqualToValue:(e,t)=>t.id===e.id,renderOption:(e,t,{inputValue:s})=>{const n=L()(t.name,s),i=B()(t.name,n);return(0,o.jsxs)(A.Z,Object.assign({component:"li"},e,{children:[(0,o.jsx)(Q.Z,{alt:t.name,src:t.image_small,sx:{marginRight:1}}),(0,o.jsx)(a.Fragment,{children:i.map(((e,t)=>(0,o.jsx)(D.Z,Object.assign({sx:{fontWeight:e.highlight?700:400,marginRight:.2}},{children:e.text}),t)))})]}))},renderInput:e=>(0,o.jsx)(H.Z,Object.assign({},e,l,{margin:"dense",InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"events",endAdornment:(0,o.jsxs)(a.Fragment,{children:[j?(0,o.jsx)(ee.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},c))};var fe;!function(e){e.AUDIENCE_ALL="all",e.AUDIENCE_TAG="tag",e.AUDIENCE_GROUP="group",e.AUDIENCE_EVENT="event"}(fe||(fe={}));const ve={root:`${X}-layer-audience-root`,title:`${X}-layer-title`,content:`${X}-layer-content`,message:`${X}-layer-audience-message`,autocomplete:`${X}-layer-audience-autocomplete`},Oe=(0,f.ZP)(A.Z,{name:X,slot:"LayerAudienceRoot"})((()=>({}))),xe=a.forwardRef(((e,t)=>{const{className:s,onClose:i,onSave:l,defaultValue:u=(fe.AUDIENCE_TAG?[]:null),TextFieldProps:p={variant:"outlined",label:(0,o.jsx)(h.Z,{id:"ui.composer.layer.audience.tags.label",defaultMessage:"ui.composer.layer.audience.tags.label"})}}=e,b=(0,n._T)(e,["className","onClose","onSave","defaultValue","TextFieldProps"]),[f,v]=(0,a.useState)(!1),[O,x]=(0,a.useState)(null===u||0===u.length?fe.AUDIENCE_ALL:u&&Object.prototype.hasOwnProperty.call(u,"recurring")?fe.AUDIENCE_EVENT:u&&Object.prototype.hasOwnProperty.call(u,"managed_by")?fe.AUDIENCE_GROUP:fe.AUDIENCE_TAG),[y,Z]=(0,a.useState)(u||void 0),{scAddressingTags:C}=function({fetch:e=!1}){const[t,s]=(0,a.useState)([]),[n,o]=(0,a.useState)(!1),i=(0,g.LD)(),l=(0,m.ko)(),u=(0,a.useMemo)((()=>()=>c.Z.request({url:d.Z.ComposerAddressingTagList.url(),method:d.Z.ComposerAddressingTagList.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[]);return(0,a.useEffect)((()=>{!n&&e&&i.user&&l.features.includes(r.$.TAGGING)&&u().then((e=>{o(!0),s(e)}))}),[n,e,i.user,l.features]),{scAddressingTags:t}}({fetch:f}),{preferences:A,features:P}=(0,m.ko)(),w=(0,a.useMemo)((()=>A&&P&&P.includes(r.$.TAGGING)&&P.includes(r.$.GROUPING)&&j.$T in A&&A[j.$T].value),[A,P]),k=(0,a.useMemo)((()=>A&&P&&P.includes(r.$.TAGGING)&&j.my in A&&A[j.my].value),[A,P]),S=(0,a.useCallback)((()=>{O===fe.AUDIENCE_GROUP||O===fe.AUDIENCE_EVENT?l(y):l((null==y?void 0:y.length)&&(null==y?void 0:y.length)>0?y:null)}),[y,l,O]),M=(0,a.useCallback)(((e,t)=>Z(t)),[]),R=(0,a.useCallback)((e=>Z(e)),[]),$=(0,a.useCallback)((e=>Z(e)),[]),I=(0,a.useCallback)(((e,t)=>x(t)),[]),F=(0,a.useCallback)((()=>v(!0)),[]),q=(0,a.useCallback)((()=>v(!1)),[]);return(0,o.jsxs)(Oe,Object.assign({ref:t,className:Y()(s,ve.root)},b,{children:[(0,o.jsxs)(E.Z,Object.assign({className:ve.title},{children:[(0,o.jsx)(N.Z,Object.assign({onClick:i},{children:(0,o.jsx)(_.Z,{children:"arrow_back"})})),(0,o.jsx)(D.Z,{children:(0,o.jsx)(h.Z,{id:"ui.composer.layer.audience.title",defaultMessage:"ui.composer.layer.audience.title"})}),(0,o.jsx)(U.Z,Object.assign({size:"small",color:"secondary",variant:"contained",onClick:S},{children:(0,o.jsx)(h.Z,{id:"ui.composer.layer.save",defaultMessage:"ui.composer.layer.save"})}))]})),(0,o.jsxs)(T.Z,Object.assign({className:ve.content},{children:[(0,o.jsxs)(V.Z,Object.assign({value:O,onChange:I,"aria-label":"audience type"},{children:[(0,o.jsx)(G.Z,{value:fe.AUDIENCE_ALL,icon:(0,o.jsx)(_.Z,{children:"public"}),label:(0,o.jsx)(h.Z,{id:"ui.composer.layer.audience.all",defaultMessage:"ui.composer.layer.audience.all"})}),k&&(0,o.jsx)(G.Z,{disabled:Boolean(null==y?void 0:y.length)&&!Object.prototype.hasOwnProperty.call(y,"recurring")||void 0!==y&&Boolean(!(null==y?void 0:y.length))&&O!==fe.AUDIENCE_ALL||Boolean(0===(null==y?void 0:y.length))&&O===fe.AUDIENCE_ALL&&Boolean(0!==(null==u?void 0:u.length)),value:fe.AUDIENCE_EVENT,icon:(0,o.jsx)(_.Z,{children:"CalendarIcon"}),label:(0,o.jsx)(h.Z,{id:"ui.composer.layer.audience.event",defaultMessage:"ui.composer.layer.audience.event"})}),w&&(0,o.jsx)(G.Z,{disabled:Boolean(null==y?void 0:y.length)&&!Object.prototype.hasOwnProperty.call(y,"managed_by")||void 0!==y&&Boolean(!(null==y?void 0:y.length))&&O!==fe.AUDIENCE_ALL||Boolean(0===(null==y?void 0:y.length))&&O===fe.AUDIENCE_ALL&&Boolean(0!==(null==u?void 0:u.length)),value:fe.AUDIENCE_GROUP,icon:(0,o.jsx)(_.Z,{children:"groups"}),label:(0,o.jsx)(h.Z,{id:"ui.composer.layer.audience.group",defaultMessage:"ui.composer.layer.audience.group"})}),(0,o.jsx)(G.Z,{disabled:y&&Object.prototype.hasOwnProperty.call(y,"managed_by"),value:fe.AUDIENCE_TAG,icon:(0,o.jsx)(_.Z,{children:"label"}),label:(0,o.jsx)(h.Z,{id:"ui.composer.layer.audience.tag",defaultMessage:"ui.composer.layer.audience.tag"})})]})),(0,o.jsxs)(D.Z,Object.assign({className:ve.message},{children:[O===fe.AUDIENCE_ALL&&(0,o.jsx)(h.Z,{id:"ui.composer.layer.audience.all.message",defaultMessage:"ui.composer.audience.layer.all.message"}),O===fe.AUDIENCE_EVENT&&(0,o.jsx)(h.Z,{id:"ui.composer.layer.audience.event.message",defaultMessage:"ui.composer.audience.layer.event.message"}),O===fe.AUDIENCE_GROUP&&(0,o.jsx)(h.Z,{id:"ui.composer.layer.audience.group.message",defaultMessage:"ui.composer.audience.layer.group.message"}),O===fe.AUDIENCE_TAG&&(0,o.jsx)(h.Z,{id:"ui.composer.layer.audience.tag.message",defaultMessage:"ui.composer.audience.layer.tag.message"})]})),O===fe.AUDIENCE_TAG&&(0,o.jsx)(z.Z,{className:ve.autocomplete,open:f,onOpen:F,onClose:q,multiple:!0,options:C||[],getOptionLabel:e=>e.name||"",value:y,selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,clearIcon:null,noOptionsText:(0,o.jsx)(h.Z,{id:"ui.composer.layer.audience.tags.empty",defaultMessage:"ui.composer.layer.audience.tags.empty"}),onChange:M,isOptionEqualToValue:(e,t)=>t.id===e.id,renderTags:(e,t)=>e.map(((e,s)=>(0,o.jsx)(W.Z,Object.assign({tag:e},t({index:s})),e.id))),renderOption:(e,t,{selected:s,inputValue:n})=>{const i=L()(t.name,n),r=B()(t.name,i);return(0,o.jsx)("li",Object.assign({},e,{children:(0,o.jsx)(W.Z,{tag:t,label:(0,o.jsx)(a.Fragment,{children:r.map(((e,t)=>(0,o.jsx)("span",Object.assign({style:{fontWeight:e.highlight?700:400}},{children:e.text}),t)))})},t.id)}))},renderInput:e=>(0,o.jsx)(H.Z,Object.assign({},e,p,{InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"addressing",endAdornment:(0,o.jsx)(a.Fragment,{children:e.InputProps.endAdornment})})}))}),O===fe.AUDIENCE_GROUP&&(0,o.jsx)(ue,{onChange:$,defaultValue:u}),O===fe.AUDIENCE_EVENT&&(0,o.jsx)(be,{onChange:R,defaultValue:u})]}))]}))}));var ye=s(77488),Ze=s(86879),Ce=s(64635),Ee=s(53457),Ne=s(87109),_e=s(34386),Te=s(67720),Ae=s(50480),Pe=s(69368),we=s(54490),ke=s(86896),Se=s(16941),Me=s(50720),Re=s(64464),$e=s(16392),Ie=s(58160),Be=s(95826),Fe=s(23855);const Le={en:Be.Z,it:Ie.Z},De={root:`${X}-content-poll-root`,generalError:`${X}-general-error`,title:`${X}-content-poll-title`,choices:`${X}-content-poll-choices`,choiceNew:`${X}-content-poll-choice-new`,metadata:`${X}-content-poll-metadata`},Ue=(0,f.ZP)(A.Z,{name:X,slot:"ContentPollRoot"})((({theme:e})=>({}))),Ve=(0,we.vU)({choicePlaceholder:{id:"ui.composer.content.poll.choice.placeholder",defaultMessage:"ui.composer.content.poll.choice.placeholder"}}),Ge=(0,a.forwardRef)(((e,t)=>{var{children:s}=e,a=(0,n._T)(e,["children"]);return(0,o.jsx)(Ee.Z,Object.assign({direction:"column",ref:t},a,{children:s}))})),ze={choice:""},He={title:"",multiple_choices:!1,expiration_at:null,choices:[Object.assign({},ze),Object.assign({},ze)]},We=e=>{const t=(0,re.Z)({props:e,name:X}),{className:s=null,value:n={poll:Object.assign({},He)},error:i={},disabled:r,onChange:l}=t,{titleError:c=null,error:d=null}=Object.assign({},i),u=(0,a.useMemo)((()=>n.poll?n.poll:Object.assign({},He)),[n,He]),m=(0,ke.Z)(),g=(0,a.useCallback)((e=>{l(Object.assign(Object.assign({},n),{poll:Object.assign(Object.assign({},u),{title:e.target.value})}))}),[n,u]),p=(0,a.useCallback)((e=>{l(Object.assign(Object.assign({},n),{poll:Object.assign(Object.assign({},u),{choices:e})}))}),[n,u]),j=(0,a.useCallback)((e=>t=>{const s=[...u.choices];s[e].choice=t.target.value,l(Object.assign(Object.assign({},n),{poll:Object.assign(Object.assign({},u),{choices:s})}))}),[n,u]),b=(0,a.useCallback)((()=>{l(Object.assign(Object.assign({},n),{poll:Object.assign(Object.assign({},u),{choices:[...u.choices,Object.assign({},ze)]})}))}),[n,u]),f=(0,a.useCallback)((e=>t=>{const s=[...u.choices];s.splice(e,1),l(Object.assign(Object.assign({},n),{poll:Object.assign(Object.assign({},u),{choices:s})}))}),[n,u]),v=(0,a.useCallback)((e=>{l(Object.assign(Object.assign({},n),{poll:Object.assign(Object.assign({},u),{multiple_choices:e.target.checked})}))}),[n,u]),O=(0,a.useCallback)((e=>{l(Object.assign(Object.assign({},n),{poll:Object.assign(Object.assign({},u),{expiration_at:e})}))}),[n,u]),x=(0,a.useMemo)((()=>{const e=new Date;return e.setDate(e.getDate()+2),e}),[]);return(0,o.jsxs)(Ue,Object.assign({className:Y()(De.root,s)},{children:[d&&(0,o.jsx)(D.Z,Object.assign({className:De.generalError},{children:(0,o.jsx)(h.Z,{id:`ui.composer.content.poll.error.${d}`,defaultMessage:`ui.composer.content.poll.error.${d}`})})),(0,o.jsx)(A.Z,Object.assign({className:De.title},{children:(0,o.jsx)(H.Z,{autoFocus:!0,disabled:r,label:(0,o.jsx)(h.Z,{id:"ui.composer.content.poll.title",defaultMessage:"ui.composer.content.poll.title"}),variant:"outlined",value:u.title,onChange:g,fullWidth:!0,error:Boolean(c),helperText:c&&c,InputProps:{endAdornment:(0,o.jsx)(D.Z,Object.assign({variant:"body2"},{children:160-u.title.length}))}})})),(0,o.jsx)(A.Z,Object.assign({className:De.choices},{children:(0,o.jsx)(Se.ReactSortable,Object.assign({list:[...u.choices],setList:p,tag:Ge},{children:u.choices.map(((e,t)=>(0,o.jsx)(H.Z,{placeholder:m.formatMessage(Ve.choicePlaceholder),value:e.choice,onChange:j(t),variant:"outlined",disabled:r,InputProps:{startAdornment:(0,o.jsx)(Ne.Z,Object.assign({position:"start"},{children:(0,o.jsx)(_.Z,{children:"drag"})})),endAdornment:(0,o.jsx)(Ne.Z,Object.assign({position:"end"},{children:(0,o.jsx)(_e.Z,Object.assign({title:u.choices.length<=2?(0,o.jsx)(h.Z,{id:"ui.composer.content.poll.choice.delete.disabled",defaultMessage:"ui.composer.content.poll.choice.delete.disabled"}):(0,o.jsx)(h.Z,{id:"ui.composer.content.poll.choice.delete",defaultMessage:"ui.composer.content.poll.choice.delete"})},{children:(0,o.jsx)("span",{children:(0,o.jsx)(N.Z,Object.assign({onClick:f(t),disabled:u.choices.length<=2,edge:"end"},{children:(0,o.jsx)(_.Z,{children:"delete"})}))})}))}))}},t)))}))})),(0,o.jsx)(A.Z,Object.assign({className:De.choiceNew},{children:(0,o.jsxs)(U.Z,Object.assign({color:"inherit",variant:"text",onClick:b},{children:[(0,o.jsx)(_.Z,{children:"add"}),(0,o.jsx)(h.Z,{id:"ui.composer.content.poll.choice.add",defaultMessage:"ui.composer.choice.add"})]}))})),(0,o.jsx)(Te.Z,{}),(0,o.jsxs)(Ee.Z,Object.assign({className:De.metadata},{children:[(0,o.jsx)(Ae.Z,{control:(0,o.jsx)(Pe.Z,{checked:u.multiple_choices,onChange:v}),label:(0,o.jsx)(h.Z,{id:"ui.composer.content.poll.multiple",defaultMessage:"ui.composer.content.poll.multiple"})}),(0,o.jsx)(Me._,Object.assign({dateAdapter:$e.H,adapterLocale:Le[m.locale]},{children:(0,o.jsx)(Re.M,{disabled:r,label:(0,o.jsx)(h.Z,{id:"ui.composer.content.poll.expiration",defaultMessage:"ui.composer.content.poll.expiration"}),value:"string"==typeof u.expiration_at?(0,Fe.Z)(u.expiration_at):u.expiration_at,onChange:O,slotProps:{textField:{variant:"outlined"}},minDate:x})}))]}))]}))};var qe=s(20377),Ye=s(94631),Xe=s(591),Ke=s(47120);const Je={root:`${X}-typeswitch-root`},Qe=(0,f.ZP)(Xe.Z,{name:X,slot:"TypeSwitchButtonGroupRoot"})((()=>({})));const et=function(e){const{preferences:t}=(0,m.ko)(),s=(0,g.LD)(),i=(0,a.useMemo)((()=>t[j.ej].value||p.B2(s.user)),[t,s.user]),r=(0,a.useMemo)((()=>t[j.y1].value),[t]),l=(0,a.useMemo)((()=>t[j.Ow].value),[t]),{className:c,onChange:d,value:u}=e,b=(0,n._T)(e,["className","onChange","value"]);(0,a.useEffect)((()=>{null===u&&d&&d(r?k:w)}),[u]);const f=(0,a.useCallback)(((e,t)=>{d&&d(t)}),[d]);return(0,o.jsxs)(Qe,Object.assign({className:Y()(Je.root,c),onChange:f,exclusive:!0,value:u},b,{children:[r&&(0,o.jsx)(Ke.Z,Object.assign({value:k},{children:(0,o.jsx)(h.Z,{id:"ui.composer.typeSwitch.post",defaultMessage:"ui.composer.typeSwitch.post"})})),l&&(0,o.jsx)(Ke.Z,Object.assign({value:w},{children:(0,o.jsx)(h.Z,{id:"ui.composer.typeSwitch.discussion",defaultMessage:"ui.composer.typeSwitch.discussion"})})),r&&i&&(0,o.jsx)(Ke.Z,Object.assign({value:S},{children:(0,o.jsx)(h.Z,{id:"ui.composer.typeSwitch.poll",defaultMessage:"ui.composer.typeSwitch.poll"})}))]}))};var tt=s(53794);const st={root:`${X}-content-post-root`,generalError:`${X}-general-error`,medias:`${X}-content-post-medias`,editor:`${X}-content-post-editor`},nt=(0,f.ZP)(A.Z,{name:X,slot:"ContentPostRoot"})((({theme:e})=>({}))),ot={categories:[],medias:[],html:"",addressing:[],event:null,group:null},at=e=>{const{className:t=null,value:s=Object.assign({},ot),error:n={},disabled:i=!1,onChange:r,EditorProps:l={}}=e,{error:c=null}=Object.assign({},n),d=(0,a.useRef)();(0,a.useEffect)((()=>{d&&d.current&&d.current.focus()}),[d]);const u=(0,a.useCallback)((e=>{r(Object.assign(Object.assign({},s),{html:e}))}),[s]);return(0,o.jsxs)(nt,Object.assign({className:Y()(st.root,t)},{children:[c&&(0,o.jsx)(D.Z,Object.assign({className:st.generalError},{children:(0,o.jsx)(h.Z,{id:`ui.composer.error.${c}`,defaultMessage:`ui.composer.error.${c}`})})),(0,o.jsx)(tt.Z,Object.assign({ref:d},l,{editable:!i,className:st.editor,onChange:u,defaultValue:s.html}))]}))};var it=s(94158);const rt={root:`${X}-layer-category-root`,title:`${X}-layer-title`,content:`${X}-layer-content`},lt=(0,f.ZP)(A.Z,{name:X,slot:"LayerCategoryRoot"})((()=>({}))),ct=a.forwardRef(((e,t)=>{const{className:s,onClose:i,onSave:r,defaultValue:l=[]}=e,c=(0,n._T)(e,["className","onClose","onSave","defaultValue"]),[d,u]=(0,a.useState)(l),m=(0,g.LD)(),j=(0,a.useCallback)((()=>r(d)),[d,r]),b=(0,a.useCallback)((e=>u(e)),[]);return(0,o.jsxs)(lt,Object.assign({ref:t,className:Y()(s,rt.root)},c,{children:[(0,o.jsxs)(E.Z,Object.assign({className:rt.title},{children:[(0,o.jsx)(N.Z,Object.assign({onClick:i},{children:(0,o.jsx)(_.Z,{children:"arrow_back"})})),(0,o.jsx)(D.Z,{children:(0,o.jsx)(h.Z,{id:"ui.composer.layer.category.title",defaultMessage:"ui.composer.layer.category.title"})}),(0,o.jsx)(U.Z,Object.assign({size:"small",color:"secondary",variant:"contained",onClick:j},{children:(0,o.jsx)(h.Z,{id:"ui.composer.layer.save",defaultMessage:"ui.composer.layer.save"})}))]})),(0,o.jsx)(T.Z,Object.assign({className:rt.content},{children:(0,o.jsx)(it.Z,Object.assign({multiple:!0,onChange:b,defaultValue:l},!p.B2(m.user)&&{endpointQueryParams:{can_create_content:!0}}))}))]}))}));var dt=s(88304);const ut={root:`${X}-layer-location-root`,title:`${X}-layer-title`,content:`${X}-layer-content`},mt=(0,f.ZP)(A.Z,{name:X,slot:"LayerLocationRoot"})((()=>({}))),gt=a.forwardRef(((e,t)=>{const{className:s,onClose:i,onSave:r,defaultValue:l=null}=e,c=(0,n._T)(e,["className","onClose","onSave","defaultValue"]),[d,u]=(0,a.useState)(l),m=(0,a.useCallback)((()=>r(d)),[d,r]),g=(0,a.useCallback)((e=>u(e)),[]);return(0,o.jsxs)(mt,Object.assign({ref:t,className:Y()(s,ut.root)},c,{children:[(0,o.jsxs)(E.Z,Object.assign({className:ut.title},{children:[(0,o.jsx)(N.Z,Object.assign({onClick:i},{children:(0,o.jsx)(_.Z,{children:"arrow_back"})})),(0,o.jsx)(D.Z,{children:(0,o.jsx)(h.Z,{id:"ui.composer.layer.location.title",defaultMessage:"ui.composer.layer.location.title"})}),(0,o.jsx)(U.Z,Object.assign({size:"small",color:"secondary",variant:"contained",onClick:m},{children:(0,o.jsx)(h.Z,{id:"ui.composer.layer.save",defaultMessage:"ui.composer.layer.save"})}))]})),(0,o.jsx)(T.Z,Object.assign({className:ut.content},{children:(0,o.jsx)(dt.Z,{onChange:g,defaultValue:d||""})}))]}))}));var pt=s(72428);const jt={root:`${X}-content-discussion-root`,generalError:`${X}-general-error`,title:`${X}-content-discussion-title`,medias:`${X}-content-discussion-medias`,editor:`${X}-content-discussion-editor`},ht=(0,f.ZP)(A.Z,{name:X,slot:"ContentDiscussionRoot"})((({theme:e})=>({}))),bt={title:"",categories:[],group:null,event:null,medias:[],html:"",addressing:[]},ft=e=>{const{className:t=null,value:s=Object.assign({},bt),defaultInitialMaxHeightContentEditor:n=K,defaultExtraSpaceContentEditor:i=J,isContentSwitchButtonVisible:r=!0,error:l={},disabled:c=!1,onChange:d,EditorProps:u={}}=e,{titleError:m=null,error:g=null}=Object.assign({},l),p=(0,a.useRef)(null),[j,b]=(0,a.useState)(n+(r?0:45)),f=(0,ke.Z)(),v=(0,x.Z)(),O=(0,y.Z)(v.breakpoints.down("md")),Z=(0,a.useMemo)((()=>(0,Ce.g)()),[]),C=(0,a.useCallback)((e=>{d(Object.assign(Object.assign({},s),{title:e.target.value}))}),[s]),E=(0,a.useCallback)((e=>{("Enter"===e.key||s.title.length>M&&["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Delete","Backspace","Shift","Home","End"].indexOf(e.key)<0)&&e.preventDefault()}),[s]),N=(0,a.useCallback)((e=>{d(Object.assign(Object.assign({},s),{html:e}))}),[s]),_=(0,a.useCallback)((()=>{if(p.current)if(O){const e=p.current.getBoundingClientRect(),t=i+e.height+(Z?30:0)-(r?0:45);b(`calc(100vh - ${t}px)`)}else b(K+(r?0:45)+"px")}),[O,p.current,b,Z,r]);return(0,a.useEffect)((()=>{_()}),[s,r,_,O]),(0,o.jsxs)(ht,Object.assign({className:Y()(jt.root,t)},{children:[g&&(0,o.jsx)(D.Z,Object.assign({className:jt.generalError},{children:(0,o.jsx)(h.Z,{id:`ui.composer.error.${g}`,defaultMessage:`ui.composer.error.${g}`})})),(0,o.jsx)(H.Z,{className:jt.title,ref:p,placeholder:f.formatMessage({id:"ui.composer.content.discussion.title.label",defaultMessage:"ui.composer.content.discussion.title.label"}),autoFocus:!0,fullWidth:!0,variant:"outlined",value:s.title,onChange:C,onKeyDown:E,multiline:!0,InputProps:{endAdornment:(0,o.jsx)(D.Z,Object.assign({variant:"body2"},{children:M-s.title.length}))},error:Boolean(m),helperText:m,disabled:c}),(0,o.jsx)(A.Z,Object.assign({sx:{[`& .${pt.B}-content`]:{maxHeight:`${j} !important`}}},{children:(0,o.jsx)(tt.Z,Object.assign({},u,{editable:!c,className:jt.editor,onChange:N,defaultValue:s.html}))}))]}))};var vt=s(62887),Ot=s(70815),xt=s(26474),yt=s(87918);const Zt={root:`${X}-attributes-root`},Ct=(0,f.ZP)(A.Z,{name:X,slot:"AttributesRoot"})((()=>({}))),Et=e=>{var t,s,n,i;const{className:r=null,value:l=null,onChange:c=null,onClick:d=null}=e,u=(0,a.useCallback)((e=>()=>{c&&c(Object.assign(Object.assign({},l),{categories:l.categories.filter((t=>t.id!==e))}))}),[l,c]),m=(0,a.useCallback)((()=>{d&&d("categories")}),[d]),g=(0,a.useCallback)((()=>{c&&c(Object.assign(Object.assign({},l),{event:null}))}),[l,c]),p=(0,a.useCallback)((()=>{d&&d("event")}),[d]),j=(0,a.useCallback)((()=>{c&&c(Object.assign(Object.assign({},l),{group:null}))}),[l,c]),h=(0,a.useCallback)((()=>{d&&d("group")}),[d]),b=(0,a.useCallback)((e=>()=>{c&&c(Object.assign(Object.assign({},l),{addressing:l.addressing.filter((t=>t.id!==e))}))}),[l,c]),f=(0,a.useCallback)((()=>{d&&d("addressing")}),[d]),v=(0,a.useCallback)((()=>{c&&c(Object.assign(Object.assign({},l),{location:null}))}),[l,c]),O=(0,a.useCallback)((()=>{d&&d("location")}),[d]);return(0,o.jsxs)(Ct,Object.assign({className:Y()(Zt.root,r)},{children:[(null===(t=null==l?void 0:l.categories)||void 0===t?void 0:t.length)>0&&(null==l?void 0:l.categories.map((e=>(0,o.jsx)(yt.Z,{label:e.name,onDelete:u(e.id),icon:(0,o.jsx)(_.Z,{children:"category"}),onClick:m},e.id)))),(null==l?void 0:l.group)&&(0,o.jsx)(yt.Z,{label:null==l?void 0:l.group.name,onDelete:j,icon:(0,o.jsx)(_.Z,{children:"groups"}),onClick:h,disabled:!(null===(s=null==l?void 0:l.group)||void 0===s?void 0:s.subscription_status)},null==l?void 0:l.group.id),(null==l?void 0:l.event)&&(0,o.jsx)(yt.Z,{label:null==l?void 0:l.event.name,onDelete:g,icon:(0,o.jsx)(_.Z,{children:"CalendarIcon"}),onClick:p,disabled:!(null===(n=null==l?void 0:l.event)||void 0===n?void 0:n.subscription_status)},null==l?void 0:l.event.id),(null===(i=null==l?void 0:l.addressing)||void 0===i?void 0:i.length)>0&&(null==l?void 0:l.addressing.map((e=>(0,o.jsx)(W.Z,{tag:e,onDelete:b(e.id),icon:(0,o.jsx)(_.Z,{children:"label"}),onClick:f},e.id)))),(null==l?void 0:l.location)&&(0,o.jsx)(yt.Z,{icon:(0,o.jsx)(_.Z,{children:"add_location_alt"}),label:null==l?void 0:l.location.location,onDelete:v,onClick:O})]}))};var Nt=s(88078);const _t={root:`${X}-skeleton-root`,title:`${X}-title`,avatar:`${X}-avatar`,content:`${X}-content`,actions:`${X}-actions`},Tt=(0,f.ZP)(A.Z,{name:X,slot:"SkeletonRoot"})((()=>({})));function At(){return(0,o.jsx)(Tt,Object.assign({className:_t.root},{children:(0,o.jsx)(Nt.Z,{sx:{height:190},animation:"wave",variant:"rectangular"})}))}var Pt=s(78462),wt=s(97212),kt=s(98619),St=s(59334);const Mt={root:`${X}-layer-close-root`,title:`${X}-layer-title`,content:`${X}-layer-content`},Rt=(0,f.ZP)(A.Z,{name:X,slot:"LayerCloseRoot"})((()=>({}))),$t=a.forwardRef(((e,t)=>{const{className:s,onClose:a,onSave:i,defaultValue:r=[]}=e,l=(0,n._T)(e,["className","onClose","onSave","defaultValue"]);return(0,o.jsxs)(Rt,Object.assign({ref:t,className:Y()(s,Mt.root)},l,{children:[(0,o.jsxs)(E.Z,Object.assign({className:Mt.title},{children:[(0,o.jsx)(N.Z,Object.assign({onClick:a},{children:(0,o.jsx)(_.Z,{children:"arrow_back"})})),(0,o.jsx)(D.Z,{children:(0,o.jsx)(h.Z,{id:"ui.composer.layer.close.title",defaultMessage:"ui.composer.layer.close.title"})})]})),(0,o.jsxs)(T.Z,Object.assign({className:Mt.content},{children:[(0,o.jsx)(D.Z,{children:(0,o.jsx)(h.Z,{id:"ui.composer.layer.close.text",defaultMessage:"ui.composer.layer.close.text"})}),(0,o.jsxs)(Pt.Z,{children:[(0,o.jsx)(wt.ZP,{children:(0,o.jsx)(kt.Z,Object.assign({onClick:a},{children:(0,o.jsx)(St.Z,{primary:(0,o.jsx)(h.Z,{id:"ui.composer.layer.close.no",defaultMessage:"ui.composer.layer.close.no"})})}))}),(0,o.jsx)(wt.ZP,{children:(0,o.jsx)(kt.Z,Object.assign({onClick:i},{children:(0,o.jsx)(St.Z,{primary:(0,o.jsx)(h.Z,{id:"ui.composer.layer.close.yes",defaultMessage:"ui.composer.layer.close.yes"})})}))})]})]}))]}))}));var It=s(84808);const Bt=function(e){return(0,o.jsx)(It.Z,Object.assign({},e,{onTouchMove:e=>{e.preventDefault()},style:{touchAction:"none"}}))};var Ft=!1;if("undefined"!=typeof window){var Lt={get passive(){Ft=!0}};window.addEventListener("testPassive",null,Lt),window.removeEventListener("testPassive",null,Lt)}var Dt="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),Ut=[],Vt=!1,Gt=void 0,zt=void 0,Ht=void 0,Wt=function(e){return Ut.some((function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))}))},qt=function(e){var t=e||window.event;return!!Wt(t.target)||(t.touches.length>1||(t.preventDefault&&t.preventDefault(),!1))},Yt=function(){void 0!==Ht&&(document.body.style.paddingRight=Ht,Ht=void 0),void 0!==Gt&&(document.body.style.overflow=Gt,Gt=void 0)},Xt=function(){if(void 0!==zt){var e=-parseInt(document.body.style.top,10),t=-parseInt(document.body.style.left,10);document.body.style.position=zt.position,document.body.style.top=zt.top,document.body.style.left=zt.left,window.scrollTo(t,e),zt=void 0}};const Kt=(0,a.forwardRef)((function(e,t){return(0,o.jsx)(b.Z,Object.assign({ref:t},e))})),Jt={root:`${X}-root`,ios:`${X}-ios`,title:`${X}-title`,types:`${X}-types`,content:`${X}-content`,attributes:`${X}-attributes`,medias:`${X}-medias`,actions:`${X}-actions`,layerTransitionRoot:`${X}-layer-transition-root`},Qt=(0,f.ZP)(v.Z,{name:X,slot:"Root"})((()=>({}))),es=(0,f.ZP)(O.Z,{name:X,slot:"LayerTransitionRoot"})((({theme:e})=>({}))),ts={id:null,type:null,title:"",titleError:null,html:"",htmlError:null,categories:[],group:null,event:null,categoriesError:null,groupsError:null,addressing:null,addressingError:null,medias:[],poll:null,location:null,error:null},ss=(e,t)=>{switch(t.type){case"reset":return Object.assign(Object.assign({},ts),{key:(0,ye.MX)()});case"resetEventFeed":return Object.assign(Object.assign({},ts),{event:e.event,key:(0,ye.MX)()});case"resetGroupFeed":return Object.assign(Object.assign({},ts),{group:e.group,key:(0,ye.MX)()});case"resetCategoryFeed":return Object.assign(Object.assign({},ts),{categories:e.categories,key:(0,ye.MX)()});case"multiple":return Object.assign(Object.assign({},e),t.value);default:return Object.assign(Object.assign({},e),{[t.type]:t.value})}};const ns=function(e){const t=(0,re.Z)({props:e,name:X}),{feedObjectId:s=null,feedObjectType:b=null,feedObject:f=null,defaultValue:v={},mediaObjectTypes:O=[vt.Z,Ot.Z,xt.Z],EditorProps:w={},onClose:k=null,onSuccess:I=null,feedType:B}=t,F=(0,n._T)(t,["feedObjectId","feedObjectType","feedObject","defaultValue","mediaObjectTypes","EditorProps","onClose","onSuccess","feedType"]),{preferences:L,features:D}=(0,m.ko)(),U=(0,g.LD)(),{enqueueSnackbar:V}=(0,qe.Ds)(),G=(0,x.Z)(),z=(0,y.Z)(G.breakpoints.down("md"),{noSsr:(0,Ze.rx)()}),[H,W]=(0,a.useState)(!1),[q,K]=(0,a.useState)(),[J,Q]=(0,a.useReducer)(ss,Object.assign(Object.assign(Object.assign({},ts),v),{key:(0,ye.MX)()})),{key:ee,id:te,type:se,title:ne,titleError:oe,html:ae,categories:ie,event:le,group:ce,addressing:de,audience:ue,medias:me,poll:ge,pollError:pe,location:je,error:he}=J,be=e=>{e.type===i.q.POST||(e.type,i.q.DISCUSSION),f.author.id===U.user.id?(Q({type:"multiple",value:{id:e.id,type:e.poll?S:f.type,title:e.title,html:e.html,categories:e.categories,event:e.event,group:e.group,addressing:e.addressing,medias:e.medias,poll:e.poll,location:e.location}}),Oe(!1)):Ne(!0)},fe=(0,a.useMemo)((()=>Boolean(s&&b||f)),[s,b,f]),[ve,Oe]=(0,a.useState)(fe),[Ee,Ne]=(0,a.useState)(!1),_e=(0,a.useRef)(),Te=(0,a.useRef)(!1),Ae=(0,a.useRef)(null),Pe=(0,a.useRef)({medias:me});Pe.current={medias:me};const we=(0,a.useMemo)((()=>ge&&ge.title.length>0&&ge.title.length<M&&ge.choices.length>=2),[ge]),ke=(0,a.useMemo)((()=>!ve&&(se===i.q.DISCUSSION&&ne.length>0&&ne.length<M||se===i.q.POST&&((0,ye.Vt)(ae).length>0||me.length>0||we)||se===S&&we)),[ve,se,ne,ae,me,we]),Se=(0,a.useMemo)((()=>(0,Ce.g)()),[]);(0,a.useEffect)((()=>{fe&&(null===f?(Oe(!0),c.Z.request({url:d.Z.FeedObject.url({type:b,id:s}),method:d.Z.FeedObject.method}).then((e=>{be(e.data)})).catch((()=>{Ne(!0)})).then((()=>Oe(!1)))):be(f))}),[fe]),(0,a.useEffect)((()=>{if(!Te.current&&ke){Te.current=!0;const e=e=>(e.preventDefault(),"");window.onbeforeunload=e}else Te.current&&!ke&&(Te.current=!1,window.onbeforeunload=null)}),[J,ke]),(0,a.useEffect)((()=>{if(!_e.current||!Se)return;const e=e=>{Ae.current=e.touches[0].clientY},t=e=>{const t=e.touches[0].clientY,s=t-Ae.current;Ae.current=t,s>0&&_e.current.focus()};return _e.current.addEventListener("touchstart",e),_e.current.addEventListener("touchmove",t),()=>{var s,n;null===(s=_e.current)||void 0===s||s.removeEventListener("touchstart",e),null===(n=_e.current)||void 0===n||n.removeEventListener("touchmove",t)}}),[_e.current,Se]);const Me=(0,a.useCallback)((e=>K(e)),[]),Re=(0,a.useCallback)((()=>K(null)),[]),$e=(0,a.useCallback)((e=>{Q({type:"type",value:e})}),[]),Ie=(0,a.useCallback)((e=>{Q({type:"multiple",value:Object.assign(Object.assign({},e),{pollError:e.poll.title.length>M?{titleError:(0,o.jsx)(h.Z,{id:"ui.composer.title.error.maxlength",defaultMessage:"ui.composer.title.error.maxlength"})}:null})})}),[]),Be=(0,a.useCallback)((e=>{Q({type:"multiple",value:Object.assign(Object.assign({},e),{titleError:e.title.length>M?(0,o.jsx)(h.Z,{id:"ui.composer.title.error.maxlength",defaultMessage:"ui.composer.title.error.maxlength"}):null})})}),[]),Fe=(0,a.useCallback)((e=>{Q({type:"multiple",value:Object.assign({},e)})}),[]),Le=(0,a.useCallback)((e=>{Q({type:"categories",value:e}),K(null)}),[]),De=(0,a.useCallback)((()=>Me({name:"category",Component:ct,ComponentProps:{onClose:Re,onSave:Le,defaultValue:ie}})),[Me,Re,Le,ie]),Ue=(0,a.useCallback)((e=>{ce||e&&Object.prototype.hasOwnProperty.call(e,"emotional_image_position")?Q({type:"group",value:e}):le||e&&Object.prototype.hasOwnProperty.call(e,"recurring")?Q({type:"event",value:e}):Q({type:"addressing",value:e}),K(null)}),[ce]),Ve=(0,a.useCallback)((()=>Me({name:"audience",Component:xe,ComponentProps:{onClose:Re,onSave:Ue,defaultValue:ce||de&&Object.prototype.hasOwnProperty.call(de,"emotional_image_position")?ce:le||de&&Object.prototype.hasOwnProperty.call(de,"recurring")?le:de}})),[Me,Re,Ue,de,le,ce]),Ge=(0,a.useCallback)((e=>{Q({type:"location",value:e}),K(null)}),[]),ze=(0,a.useCallback)((()=>Me({name:"location",Component:gt,ComponentProps:{onClose:Re,onSave:Ge,defaultValue:je}})),[Me,Re,Ge,je]),He=(0,a.useCallback)((e=>{const t=[...e];Q({type:"medias",value:[...e]}),Pe.current.medias=t,K(null)}),[]),Xe=(0,a.useCallback)((e=>{const t=[...Pe.current.medias,e];Q({type:"medias",value:t}),Pe.current.medias=t}),[]),Ke=(0,a.useCallback)((e=>t=>{e.layerComponent&&Me({name:e.name,Component:e.layerComponent,ComponentProps:{onClose:Re,onSave:He,defaultValue:me}})}),[Me,Re,He,me]),Je=(0,a.useCallback)((e=>{Q({type:"multiple",value:Object.assign({},e)})}),[]),Qe=(0,a.useCallback)((e=>{switch(e){case"categories":De();break;case"addressing":Ve();break;case"location":ze()}}),[De,Ve,ze]),tt=(0,a.useCallback)((e=>{if(e.preventDefault(),e.stopPropagation(),p.IT(U.user))return void V((0,o.jsx)(h.Z,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3});const t=[...ie.map((e=>e.id)),...(0,Ye.E)(ae)],s={title:ne,text:ae,medias:me.map((e=>e.id)),categories:t.filter(((e,s)=>t.indexOf(e)===s))};(L[j.ej].value||p.B2(U.user))&&we&&(s.poll=ge),L[j.ey].value&&je&&(s.location=je),D.includes(r.$.TAGGING)&&null!==de&&(s.addressing=de.map((e=>e.id))),D.includes(r.$.TAGGING)&&D.includes(r.$.GROUPING)&&L[j.$T].value&&null!==ce&&(s.group=ce.id),D.includes(r.$.TAGGING)&&D.includes(r.$.EVENT)&&L[j.my].value&&null!==le&&(s.event=le.id),W(!0);const n=se===S?i.q.POST:se;let a=d.Z.Composer.url({type:n}),m=d.Z.Composer.method;fe&&(a=d.Z.ComposerEdit.url({type:b||n,id:te}),m=d.Z.ComposerEdit.method),c.Z.request({url:a,method:m,data:s}).then((e=>{I(e.data),Te.current&&(window.onbeforeunload=null),B&&B===l.a.CATEGORY?Q({type:"resetCategoryFeed"}):B===l.a.EVENT?Q({type:"resetEventFeed"}):B===l.a.GROUP?Q({type:"resetGroupFeed"}):Q({type:"reset"})})).catch((e=>{Q({type:"multiple",value:(0,u.yt)(e)})})).then((()=>W(!1)))}),[U.user,b,te,se,ne,ae,ie,le,ce,de,ue,me,ge,je,we]),st=(0,a.useCallback)(((e,t)=>{Te.current&&(window.onbeforeunload=null),t&&ke?Me({name:"close",Component:$t,ComponentProps:{onClose:Re,onSave:()=>{k&&k(e),K(null),B&&B===l.a.CATEGORY?Q({type:"resetCategoryFeed"}):B===l.a.EVENT?Q({type:"resetEventFeed"}):B===l.a.GROUP?Q({type:"resetGroupFeed"}):Q({type:"reset"})}}}):(Dt&&(Ut.forEach((function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null})),Vt&&(document.removeEventListener("touchmove",qt,Ft?{passive:!1}:void 0),Vt=!1),-1),Dt?Xt():Yt(),Ut=[],k&&k(e),K(null),Q({type:"reset"}))}),[k,ke,Re]),nt=(0,a.useCallback)((e=>{ke?Me({name:"close",Component:$t,ComponentProps:{onClose:Re,onSave:st}}):st(e)}),[ke,Me,Re,st]),ot=(0,a.useMemo)((()=>-1!==me.findIndex((e=>e.type===R.TC))),[me]),it=(0,a.useMemo)((()=>{if(fe&&ve)return(0,o.jsx)(At,{});if(fe&&Ee)return(0,o.jsxs)(Z.Z,Object.assign({severity:"error",onClose:st},{children:[(0,o.jsx)(C.Z,{children:(0,o.jsx)(h.Z,{id:"ui.composer.edit.error.title",defaultMessage:"ui.composer.edit.error.title"})}),(0,o.jsx)(h.Z,{id:"ui.composer.edit.error.content",defaultMessage:"ui.composer.edit.error.content"})]}));switch(se){case S:return(0,o.jsx)(We,{onChange:Ie,value:{html:ae,event:le,group:ce,addressing:de,medias:me,poll:ge,location:je},error:pe,disabled:H},ee);case i.q.DISCUSSION:return(0,o.jsx)(ft,{value:{title:ne,html:ae,categories:ie,event:le,group:ce,addressing:de,medias:me,poll:ge,location:je},error:{titleError:oe,error:he},onChange:Be,disabled:H,isContentSwitchButtonVisible:!ke&&!fe,EditorProps:Object.assign({toolbar:!0,uploadImage:!0},w)},ee);default:return(0,o.jsx)(at,{value:{html:ae,categories:ie,event:le,group:ce,addressing:de,medias:me,poll:ge,location:je},error:{error:he},onChange:Fe,disabled:H,EditorProps:Object.assign({toolbar:!1,uploadImage:!1},w)},ee)}}),[ee,se,ne,ae,ie,le,ce,de,me,ge,pe,je,he,Ie,Fe,H,ke,fe]);return U.user||U.loading&&open?(0,o.jsxs)(Qt,Object.assign({ref:_e,TransitionComponent:Kt,slots:{backdrop:Bt},onClose:st},F,{disableEscapeKeyDown:!0,className:Y()(Jt.root,{[Jt.ios]:Se}),scroll:"body",fullScreen:z,tabIndex:-1},{children:[(0,o.jsxs)("form",Object.assign({onSubmit:tt,method:"post"},{children:[(0,o.jsxs)(E.Z,Object.assign({className:Jt.title},{children:[(0,o.jsx)(N.Z,Object.assign({onClick:nt},{children:(0,o.jsx)(_.Z,{children:"close"})})),(0,o.jsx)($.Z,Object.assign({size:"small",type:"submit",color:"secondary",variant:"contained",disabled:!ke,loading:H},{children:(0,o.jsx)(h.Z,{id:"ui.composer.submit",defaultMessage:"ui.composer.submit"})}))]})),(0,o.jsxs)(T.Z,Object.assign({className:Jt.content},{children:[(0,o.jsx)(Et,{value:{categories:ie,event:le,group:ce,addressing:de,location:je},className:Jt.attributes,onChange:Je,onClick:Qe}),it,me&&me.length>0&&(0,o.jsx)(A.Z,Object.assign({className:Jt.medias},{children:O.map((e=>e.previewComponent?(0,o.jsx)(e.previewComponent,{value:me,onChange:He},e.name):e.displayComponent?(0,o.jsx)(e.displayComponent,{medias:me},e.name):void 0))}))]})),!ke&&!fe&&(0,o.jsx)(et,{className:Jt.types,onChange:$e,size:"small",value:se}),(0,o.jsxs)(P.Z,Object.assign({className:Jt.actions},{children:[O.filter((e=>null!==e.triggerButton)).map((e=>{const t=e.layerComponent?{onClick:Ke(e)}:{onAdd:Xe};return(0,o.jsx)(e.triggerButton,Object.assign({disabled:H||ot,color:me.filter(e.filter).length>0?"primary":"default"},t),e.name)})),(0,o.jsx)(N.Z,Object.assign({disabled:H,onClick:De},{children:(0,o.jsx)(_.Z,{children:"category"})})),(0,o.jsx)(N.Z,Object.assign({disabled:H||!D.includes(r.$.TAGGING)||Boolean(null==f?void 0:f.group)||Boolean(null==f?void 0:f.event),onClick:Ve},{children:!ce&&null===de||!le&&null===de||0===(null==de?void 0:de.length)?(0,o.jsx)(_.Z,{children:"public"}):ce?(0,o.jsx)(_.Z,{children:"groups"}):le?(0,o.jsx)(_.Z,{children:"CalendarIcon"}):(0,o.jsx)(_.Z,{children:"label"})})),L[j.ey].value&&(0,o.jsx)(N.Z,Object.assign({disabled:H,onClick:ze,color:null!==je?"primary":"default"},{children:(0,o.jsx)(_.Z,{children:"add_location_alt"})}))]}))]})),q&&(0,o.jsx)(es,Object.assign({className:Jt.layerTransitionRoot,in:!0,container:_e.current,direction:"left"},{children:(0,o.jsx)(q.Component,Object.assign({},q.ComponentProps))}))]})):null}},12805:(e,t,s)=>{"use strict";s.d(t,{Z:()=>f});var n=s(97582),o=s(85893),a=s(67294),i=s(63902),r=s(37024),l=s(90948),c=s(2734),d=s(78445),u=s(88078),m=s(44267),g=s(20819),p=s.n(g),j=s(37540);const h={root:`${j.B}-skeleton-root`,media:`${j.B}-media`},b=(0,l.ZP)(i.Z,{name:j.B,slot:"SkeletonRoot"})((()=>({})));function f(e){const{template:t=r.r.SNIPPET}=e,s=(0,n._T)(e,["template"]),i=(0,c.Z)();let l;return l=t===r.r.PREVIEW||t===r.r.DETAIL||t===r.r.SEARCH?(0,o.jsxs)(a.Fragment,{children:[(0,o.jsx)(d.Z,{avatar:(0,o.jsx)(u.Z,{animation:"wave",variant:"circular",width:i.selfcommunity.user.avatar.sizeMedium,height:i.selfcommunity.user.avatar.sizeMedium}),title:(0,o.jsx)(u.Z,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),subheader:(0,o.jsx)(u.Z,{animation:"wave",height:10,width:"40%"})}),(0,o.jsx)(u.Z,{animation:"wave",variant:"rectangular",className:h.media}),(0,o.jsx)(m.Z,{children:(0,o.jsxs)(a.Fragment,{children:[(0,o.jsx)(u.Z,{animation:"wave",height:10,style:{marginBottom:6}}),(0,o.jsx)(u.Z,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),(0,o.jsx)(u.Z,{animation:"wave",height:10,width:"60%"})]})})]}):(0,o.jsxs)(a.Fragment,{children:[(0,o.jsx)(d.Z,{avatar:(0,o.jsx)(u.Z,{animation:"wave",variant:"circular",width:i.selfcommunity.user.avatar.sizeMedium,height:i.selfcommunity.user.avatar.sizeMedium}),title:(0,o.jsx)(u.Z,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),subheader:(0,o.jsx)(u.Z,{animation:"wave",height:10,width:"40%"})}),(0,o.jsx)(m.Z,{children:(0,o.jsxs)(a.Fragment,{children:[(0,o.jsx)(u.Z,{animation:"wave",height:10,style:{marginBottom:6}}),(0,o.jsx)(u.Z,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),(0,o.jsx)(u.Z,{animation:"wave",height:10,width:"60%",style:{marginBottom:6}})]})})]}),(0,o.jsx)(b,Object.assign({className:p()(h.root,`${j.B}-${t}`)},s,{children:l}))}},37540:(e,t,s)=>{"use strict";s.d(t,{B:()=>n});const n="SCFeedObject"},52693:(e,t,s)=>{"use strict";s.d(t,{Z:()=>ns});var n=s(97582),o=s(85893),a=s(67294),i=s(90948),r=s(15861),l=s(25662),c=s(44267),d=s(94253),u=s(87918),m=s(67564),g=s(78445),p=s(87952),j=s(34386),h=s(16216),b=s(62023),f=s(57922),v=s(12805),O=s(91568),x=s(51575),y=s(86558),Z=s(86886),C=s(67720),E=s(20819),N=s.n(E),_=s(85050),T=s(85966),A=s(37540);const P={root:`${A.B}-action-vote-root`,divider:`${A.B}-action-vote-divider`,button:`${A.B}-action-vote-button`,inline:`${A.B}-action-vote-inline`,viewAudienceButton:`${A.B}-action-vote-view-audience-button`},w=(0,i.ZP)(d.Z,{name:A.B,slot:"ActionVoteRoot"})((()=>({})));const k=function(e){const{className:t=null,feedObjectId:s=null,feedObject:i=null,feedObjectType:r=null,withAudience:l=!0,withAction:c=!0,inlineAction:d=!1,onVoteAction:u=(()=>null)}=e,m=(0,n._T)(e,["className","feedObjectId","feedObject","feedObjectType","withAudience","withAction","inlineAction","onVoteAction"]);return(0,o.jsxs)(w,Object.assign({className:N()(P.root,t,{[P.inline]:d})},m,{children:[l&&(0,o.jsx)(T.Z,{className:P.viewAudienceButton,contributionId:s,contributionType:r,contribution:i,variant:"text",size:"small"}),c&&(0,o.jsxs)(a.Fragment,{children:[!d&&l&&(0,o.jsx)(C.Z,{className:P.divider}),(0,o.jsx)(_.Z,{className:P.button,contributionId:s,contributionType:r,contribution:i,onVote:u})]})]}))};var S=s(54490),M=s(86896),R=s(88078),$=s(31498),I=s(41538),B=s(97265),F=s(49794),L=s(37024),D=s(70050);const U=(0,S.vU)({comments:{id:"ui.feedObject.comment.comments",defaultMessage:"ui.feedObject.comment.comments"},comment:{id:"ui.feedObject.comment.comment",defaultMessage:"ui.feedObject.comment.comment"}}),V={root:`${A.B}-action-comment-root`,divider:`${A.B}-action-comment-divider`,inline:`${A.B}-action-comment-inline`,button:`${A.B}-action-comment-button`,viewAudienceButton:`${A.B}-action-comment-view-audience-button`},G=(0,i.ZP)(d.Z,{name:A.B,slot:"ActionCommentRoot"})((()=>({})));const z=function(e){const{className:t,feedObjectId:s,feedObject:i,feedObjectType:c=F.q.POST,feedObjectTemplate:d=L.r,withAction:u=!0,withAudience:g=!0,inlineAction:p=!1,onViewCommentsAction:h,onCommentAction:b}=e,f=(0,n._T)(e,["className","feedObjectId","feedObject","feedObjectType","feedObjectTemplate","withAction","withAudience","inlineAction","onViewCommentsAction","onCommentAction"]),{obj:v,setObj:O}=(0,$.Z)({id:s,feedObject:i,feedObjectType:c}),x=(0,I.sy)(),y=(0,M.Z)();return(0,o.jsxs)(G,Object.assign({className:N()(V.root,t,{[V.inline]:p})},f,{children:[function(){let e;return g&&(e=v?(0,o.jsx)(o.Fragment,{children:h?(0,o.jsx)(l.Z,Object.assign({variant:"text",size:"small",onClick:h,color:"inherit"},{children:`${y.formatMessage(U.comments,{total:v.comment_count})}`})):(0,o.jsx)(o.Fragment,{children:d===L.r.DETAIL?(0,o.jsx)(r.Z,Object.assign({variant:"body2"},{children:`${y.formatMessage(U.comments,{total:v.comment_count})}`})):(0,o.jsx)(l.Z,Object.assign({variant:"text",size:"small",component:B.Z,to:x.url((0,D.Ig)(v),(0,D.p3)(v)),classes:{root:V.viewAudienceButton}},{children:`${y.formatMessage(U.comments,{total:v.comment_count})}`}))})}):(0,o.jsx)(l.Z,Object.assign({variant:"text",size:"small",disabled:!0,color:"inherit"},{children:(0,o.jsx)(R.Z,{animation:"wave",height:18,width:50})}))),e}(),function(){let e={};return b||(e={component:B.Z,to:x.url((0,D.Ig)(v),(0,D.p3)(v))}),(0,o.jsx)(o.Fragment,{children:u&&(0,o.jsxs)(a.Fragment,{children:[!p&&g&&(0,o.jsx)(C.Z,{className:V.divider}),(0,o.jsx)(j.Z,Object.assign({title:`${y.formatMessage(U.comment)}`},{children:(0,o.jsx)(l.Z,Object.assign({onClick:b,className:V.button},e,{children:(0,o.jsx)(m.Z,{children:"chat_bubble_outline"})}))}))]})})}()]}))};var H=s(44012),W=s(96828),q=s(78462),Y=s(97212),X=s(79558),K=s(24085),J=s(24243),Q=s(99960),ee=s(75459),te=s(39154),se=s(52271),ne=s(37089);const oe=function(e){const{id:t=null,feedObject:s=null,feedObjectType:i=(s?s.type:F.q.POST),open:l=!1,onClose:c=null}=e,d=(0,n._T)(e,["id","feedObject","feedObjectType","open","onClose"]),{obj:u,setObj:m}=(0,$.Z)({id:t,feedObject:s,feedObjectType:i}),[g,p]=(0,a.useState)(Boolean(t&&i||s)),[j,h]=(0,a.useState)([]),[b,f]=(0,a.useState)(t&&i?`${K.Z.ShareUsersList.url({type:i,id:t})}`:s&&i?`${K.Z.ShareUsersList.url({type:i,id:s.id})}`:null);function v(){p(!0),J.Z.request({url:b,method:K.Z.ShareUsersList.method}).then((e=>{const t=e.data;h([...j,...t.results]),p(!1),f(null!==t.next?t.next:null)})).catch((e=>{Q.Y.error(ee.J,e)}))}return(0,a.useEffect)((()=>{u&&b&&v()}),[`${u}`]),(0,o.jsx)(te.Z,Object.assign({title:(0,o.jsx)(H.Z,{defaultMessage:"ui.feedObject.sharesDialog.title",id:"ui.feedObject.sharesDialog.title"}),onClose:c,open:l},d,{children:g?(0,o.jsx)(se.Z,{size:50}):(0,o.jsx)(X.Z,Object.assign({dataLength:j.length,next:v,hasMoreNext:null!==b,loaderNext:(0,o.jsx)(se.Z,{size:30}),height:400,endMessage:(0,o.jsx)(r.Z,Object.assign({variant:"body2",align:"center",fontWeight:"bold"},{children:(0,o.jsx)(H.Z,{id:"ui.feedObject.sharesDialog.noOtherLikes",defaultMessage:"ui.feedObject.sharesDialog.noOtherLikes"})}))},{children:(0,o.jsx)(q.Z,{children:j.slice(0,4).map(((e,t)=>(0,o.jsx)(Y.ZP,{children:(0,o.jsx)(ne.Z,{elevation:0,user:e},t)},e.id)))})}))}))};var ae=s(2734),ie=s(37292),re=s(18972),le=s(48885),ce=s(59334),de=s(25464),ue=s(44652),me=s(57250),ge=s(20377),pe=s(26462),je=s(77488),he=s(62254),be=s(8860),fe=s(12918),ve=s(22607),Oe=s(65580),xe=s(71539),ye=s(4943);const Ze=(0,S.vU)({shares:{id:"ui.feedObject.share.shares",defaultMessage:"ui.feedObject.share.shares"},share:{id:"ui.feedObject.share.share",defaultMessage:"ui.feedObject.share.share"}}),Ce={root:`${A.B}-action-share-root`,divider:`${A.B}-action-share-divider`,inline:`${A.B}-action-share-inline`,button:`${A.B}-action-share-button`,viewAudienceButton:`${A.B}-action-share-view-audience-button`},Ee=(0,i.ZP)(d.Z,{name:A.B,slot:"ActionShareRoot"})((()=>({})));const Ne=function(e){const{className:t=null,feedObjectId:s=null,feedObject:i=null,feedObjectType:r=F.q.POST,withAction:c=!0,withAudience:u=!0,inlineAction:g=!1}=e,p=(0,n._T)(e,["className","feedObjectId","feedObject","feedObjectType","withAction","withAudience","inlineAction"]),h=(0,ae.Z)(),b=(0,ie.Z)(h.breakpoints.down("md")),{obj:f,setObj:v}=(0,$.Z)({id:s,feedObject:i,feedObjectType:r}),[O,x]=(0,a.useState)(!1),[y,Z]=(0,a.useState)(!1),[E,_]=(0,a.useState)(null),[T,A]=(0,a.useState)(!1),[P,w]=a.useState(null),k=(0,he.RM)(),S=(0,I.sy)(),B=(0,a.useContext)(be.Tt),L=fe.MX in B.preferences&&B.preferences[fe.MX].value,U=fe.Yy in B.preferences&&B.preferences[fe.Yy].value,V=fe.KD in B.preferences&&B.preferences[fe.KD].value,G=(0,ve.LD)(),{enqueueSnackbar:z}=(0,ge.Ds)(),q=("undefined"!=typeof location&&location.origin?location.origin:"")+S.url((0,D.Ig)(f),(0,D.p3)(f)),Y=(0,a.useMemo)((()=>i.group&&i.group.privacy===pe.f.PUBLIC),[i.group]),X=(0,a.useMemo)((()=>!B.preferences[fe.Kq].value||Oe.B2(G.user)),[B,G.user]),te=(0,a.useMemo)((()=>B.preferences[fe.Ao].value),[B]),se=(0,M.Z)(),ne=e=>{w(e.currentTarget)},Ne=()=>{w(null)};function _e(){A(!T)}function Te(){x(!1),Z(!1)}function Ae(){v(Object.assign({},f,{share_count:f.share_count+1})),Te()}const Pe=(0,a.useMemo)((()=>()=>{let e=f.id;const t=f.medias.filter((e=>e.type===me.TC));t.length&&(e=t[0].embed.metadata.id);const s=f.medias.some((e=>{var t;return(null===(t=e.embed)||void 0===t?void 0:t.embed_type)===me.ej}));return J.Z.request({url:K.Z.ComposerMediaCreate.url(),method:K.Z.ComposerMediaCreate.method,data:{type:me.TC,[s?"event_object":"shared_object"]:e}}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))}),[f]);function we(){return(0,o.jsxs)(d.Z,{children:[(!i.group||Y)&&(0,o.jsxs)(o.Fragment,{children:[X&&(0,o.jsxs)(re.Z,Object.assign({onClick:()=>{return e=!1,void(G.user?Oe.IT(G.user)?z((0,o.jsx)(H.Z,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3}):(x(!0),Pe().then((t=>{_(Object.assign({medias:[t]},e?{categories:f.categories}:{})),Z(!0)})).catch((e=>{Q.Y.error(ee.J,e),x(!1)}))):k.settings.handleAnonymousAction());var e}},{children:[(0,o.jsx)(le.Z,{children:(0,o.jsx)(m.Z,{children:"redo"})}),(0,o.jsx)(ce.Z,{primary:(0,o.jsx)(H.Z,{id:"ui.feedObject.share.shareNow",defaultMessage:"ui.feedObject.share.shareNow"})})]})),(0,o.jsx)(o.Fragment,{children:te&&(0,o.jsxs)(o.Fragment,{children:[L&&(0,o.jsxs)(re.Z,Object.assign({onClick:()=>window.open(xe.jm+q,"facebook-share-dialog","width=626,height=436")},{children:[(0,o.jsx)(le.Z,{children:(0,o.jsx)(m.Z,{children:"facebook"})}),(0,o.jsx)(ce.Z,{primary:(0,o.jsx)(H.Z,{id:"ui.feedObject.share.facebook",defaultMessage:"ui.feedObject.share.facebook"})})]})),U&&(0,o.jsxs)(re.Z,Object.assign({onClick:()=>window.open(xe.Eg+q,"x-share-dialog","width=626,height=436")},{children:[(0,o.jsx)(le.Z,{children:(0,o.jsx)(m.Z,{children:"twitter"})}),(0,o.jsx)(ce.Z,{primary:(0,o.jsx)(H.Z,{id:"ui.feedObject.share.x",defaultMessage:"ui.feedObject.share.x"})})]})),V&&(0,o.jsxs)(re.Z,Object.assign({onClick:()=>window.open(xe.nm+q,"linkedin-share-dialog","width=626,height=436")},{children:[(0,o.jsx)(le.Z,{children:(0,o.jsx)(m.Z,{children:"linkedin"})}),(0,o.jsx)(ce.Z,{primary:(0,o.jsx)(H.Z,{id:"ui.feedObject.share.linkedin",defaultMessage:"ui.feedObject.share.linkedin"})})]}))]})})]}),(0,o.jsxs)(re.Z,{children:[(0,o.jsx)(le.Z,{children:(0,o.jsx)(m.Z,{children:"link"})}),(0,o.jsx)(ce.Z,{primary:(0,o.jsx)(H.Z,{id:"ui.feedObject.share.permanentLink",defaultMessage:"ui.feedObject.share.permanentLink"}),onClick:()=>{(0,je.TE)(q).then((()=>{z((0,o.jsx)(H.Z,{id:"ui.common.permanentLinkCopied",defaultMessage:"ui.common.permanentLinkCopied"}),{variant:"success",autoHideDuration:3e3})}))}})]})]})}return(0,o.jsxs)(Ee,Object.assign({className:N()(Ce.root,t,{[Ce.inline]:g})},p,{children:[function(){const e=f.share_count;let t;return u&&(t=f?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l.Z,Object.assign({variant:"text",size:"small",onClick:_e,disabled:e<1,classes:{root:Ce.viewAudienceButton}},{children:`${se.formatMessage(Ze.shares,{total:e})}`})),T&&e>0&&(0,o.jsx)(oe,{feedObject:f,feedObjectType:f.type,open:T,onClose:_e})]}):(0,o.jsx)(l.Z,Object.assign({variant:"text",size:"small",disabled:!0,color:"inherit"},{children:(0,o.jsx)(R.Z,{animation:"wave",height:18,width:50})}))),t}(),(0,o.jsx)(a.Fragment,{children:c&&(0,o.jsxs)(a.Fragment,{children:[!g&&u&&(0,o.jsx)(C.Z,{className:Ce.divider}),(0,o.jsx)(j.Z,Object.assign({title:`${se.formatMessage(Ze.share)}`},{children:(0,o.jsx)(W.Z,Object.assign({loading:O,onClick:ne,className:Ce.button},{children:(0,o.jsx)(m.Z,{children:"share"})}))})),Boolean(P)&&(0,o.jsx)(o.Fragment,{children:b?(0,o.jsx)(ue.Z,Object.assign({open:!0,onClick:Ne,onClose:Ne,onOpen:ne,anchor:"bottom",disableSwipeToOpen:!0},{children:we()})):(0,o.jsx)(de.Z,Object.assign({anchorEl:P,open:!0,onClose:Ne,onClick:Ne,slotProps:{paper:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"}},{children:we()}))}),y&&(0,o.jsx)(ye.Z,{open:!0,defaultValue:E,onClose:Te,onSuccess:Ae,maxWidth:"sm",fullWidth:!0})]})})]}))},_e={root:`${A.B}-actions-root`,action:`${A.B}-actions-action`},Te=(0,i.ZP)(Z.ZP,{name:A.B,slot:"ActionsRoot"})((()=>({})));const Ae=function(e){const{className:t,feedObject:s,feedObjectId:n=(null==s?void 0:s.id),feedObjectType:a=(null==s?void 0:s.type),feedObjectTemplate:i=L.r.PREVIEW,hideVoteAction:r=!1,hideShareAction:l=!1,hideCommentAction:c=!1,handleExpandActivities:d,VoteActionProps:u={},CommentActionProps:m={},ShareActionProps:g={}}=e,{obj:p}=(0,$.Z)({id:n,feedObject:s,feedObjectType:a});if(!p)return null;const j=function(){let e=4;return l&&c?e=12:(c||c)&&(e=6),e}();return(0,o.jsxs)(Te,Object.assign({container:!0,className:N()(_e.root,t)},{children:[!r&&(0,o.jsx)(Z.ZP,Object.assign({item:!0,xs:j,className:_e.action},{children:(0,o.jsx)(k,Object.assign({feedObjectId:n||p.id,feedObject:p,feedObjectType:a||p.type},u))})),!c&&(0,o.jsx)(Z.ZP,Object.assign({item:!0,xs:j,className:_e.action},{children:(0,o.jsx)(z,Object.assign({feedObject:p,feedObjectType:a,feedObjectTemplate:i,onCommentAction:d},m))})),!l&&(0,o.jsx)(Z.ZP,Object.assign({item:!0,xs:j,className:_e.action},{children:(0,o.jsx)(Ne,Object.assign({feedObject:p,feedObjectType:a,id:n},g))}))]}))};var Pe=s(66242),we=s(81458);const ke={root:`${A.B}-poll-object-choices-root`,label:`${A.B}-poll-object-choices-label`,vote:`${A.B}-poll-object-choices-vote`,progress:`${A.B}-poll-object-choices-progress`},Se=(0,i.ZP)(Pe.Z,{name:A.B,slot:"PollObjectChoicesRoot"})((()=>({})));function Me(e){var{className:t}=e,s=(0,n._T)(e,["className"]);return(0,o.jsxs)(d.Z,Object.assign({className:t},{children:[(0,o.jsx)(we.Z,Object.assign({variant:"determinate"},s)),(0,o.jsx)(r.Z,Object.assign({variant:"body2",color:"text.secondary"},{children:`${Math.round(s.value)}%`}))]}))}const Re=function(e){const{className:t=null,choiceObj:s=null,feedObject:a=null,vote:i=null,votes:l=null,isVoting:c=null,votable:d=null}=e,u=(0,n._T)(e,["className","choiceObj","feedObject","vote","votes","isVoting","votable"]),g=!a,p=(0,he.RM)(),j=(0,ve.LD)();return(0,o.jsxs)(Se,Object.assign({className:N()(ke.root,t)},u,{children:[(0,o.jsx)(r.Z,Object.assign({className:ke.label},{children:s.choice})),(0,o.jsx)(Me,{className:ke.progress,value:(h=s.vote_count,b=l,0===b?0:100*h/b)}),(0,o.jsx)(W.Z,Object.assign({loading:c===s.id,variant:s.voted?"contained":"outlined",size:"small",disabled:g||null!==c||d,className:ke.vote,onClick:()=>{j.user?i(s):p.settings.handleAnonymousAction()}},{children:s.voted?(0,o.jsx)(m.Z,{children:"check"}):(0,o.jsx)(H.Z,{id:"ui.feedObject.poll.choice.vote",defaultMessage:"ui.feedObject.poll.choice.vote"})}))]}));var h,b},$e=(0,S.vU)({showPoll:{id:"ui.feedObject.poll.showPoll",defaultMessage:"ui.feedObject.poll.showPoll"},hidePoll:{id:"ui.feedObject.poll.hidePoll",defaultMessage:"ui.feedObject.poll.hidePoll"},expDate:{id:"ui.feedObject.poll.expDate",defaultMessage:"ui.feedObject.poll.expDate"},voters:{id:"ui.feedObject.poll.voters",defaultMessage:"ui.feedObject.poll.voters"},votes:{id:"ui.feedObject.poll.votes",defaultMessage:"ui.feedObject.poll.votes"}}),Ie={root:`${A.B}-poll-object-root`,voters:`${A.B}-poll-object-voters`,votes:`${A.B}-poll-object-votes`,toggleButton:`${A.B}-poll-object-toggle-button`,title:`${A.B}-poll-object-title`,expiration:`${A.B}-poll-object-expiration`,closed:`${A.B}-poll-object-closed`,expandIcon:`${A.B}-poll-object-expand-icon`,collapsedIcon:`${A.B}-poll-object-collapsed-icon`},Be=(0,i.ZP)(Pe.Z,{name:A.B,slot:"PollObjectRoot"})((()=>({})));const Fe=function(e){const{className:t,feedObject:s,pollObject:i,disabled:d,visible:u=!0,onChange:p,onToggleVisibility:j}=e,h=(0,n._T)(e,["className","feedObject","pollObject","disabled","visible","onChange","onToggleVisibility"]),b=(0,M.Z)(),[v,O]=(0,a.useState)(i),[x,y]=(0,a.useState)(function(){const e=i.choices;let t=0;for(let s=0;s<e.length;s++)t+=e[s].vote_count;return t||0}()),[Z,C]=(0,a.useState)(i.choices),[E,_]=(0,a.useState)(null),[T,A]=(0,a.useState)(!u),P=i.multiple_choices,w=i.closed;function k(e){_(e.id),J.Z.request({url:K.Z.PollVote.url({id:s.id,type:s.type}),method:K.Z.PollVote.method,data:{choice:e.id}}).then((t=>{e.voted?(e=>{const t=[...Z].map((t=>Object.assign({},t,{voted:t.id!==e&&t.voted,vote_count:t.id===e&&t.vote_count>0?t.vote_count-1:t.vote_count})));C(t),p(t),y((e=>e-1))})(e.id):(e=>{const t=[...Z];let s;P?(s=t.map((t=>Object.assign({},t,{voted:t.id===e||t.voted,vote_count:t.id===e?t.vote_count+1:t.vote_count}))),y((e=>e+1))):(s=t.map((t=>Object.assign({},t,{voted:t.id===e,vote_count:t.id===e?t.vote_count+1:t.vote_count>0&&t.voted?t.vote_count-1:t.vote_count}))),y(s.reduce(((e,t)=>e+t.vote_count),0))),C(s),p(s)})(e.id),_(null)})).catch((e=>{Q.Y.error(ee.J,e)}))}const S=(0,a.useMemo)((()=>()=>{j&&j(T),A((e=>!e))}),[A,j]);let R=(0,o.jsx)(o.Fragment,{});return i&&(R=(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(g.Z,{title:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(l.Z,Object.assign({className:Ie.toggleButton,onClick:S,"aria-expanded":T,endIcon:(0,o.jsx)(m.Z,Object.assign({className:N()(Ie.expandIcon,{[Ie.collapsedIcon]:T})},{children:"arrow_upward"}))},{children:T?b.formatMessage($e.showPoll):b.formatMessage($e.hidePoll)}))})}),(0,o.jsx)(f.Z,Object.assign({in:!T,timeout:"auto",unmountOnExit:!0},{children:(0,o.jsxs)(c.Z,{children:[(0,o.jsx)(r.Z,Object.assign({variant:"body1",className:Ie.title},{children:v.title})),v.expiration_at&&Date.parse(v.expiration_at)>=(new Date).getTime()&&(0,o.jsxs)(r.Z,Object.assign({variant:"body2",className:Ie.expiration},{children:[`${b.formatMessage($e.expDate)}`,`${b.formatDate(Date.parse(v.expiration_at),{year:"numeric",month:"numeric",day:"numeric"})}`]})),v.closed&&(0,o.jsx)(r.Z,Object.assign({variant:"body2",className:Ie.closed},{children:(0,o.jsx)(H.Z,{id:"ui.feedObject.poll.closed",defaultMessage:"ui.feedObject.poll.closed"})})),(0,o.jsx)(q.Z,{children:Z.map(((e,t)=>(0,o.jsx)(Y.ZP,{children:(0,o.jsx)(Re,{elevation:0,choiceObj:e,feedObject:d?null:s,votes:x,vote:k,isVoting:E,votable:w})},t)))}),P?(0,o.jsxs)("div",Object.assign({className:Ie.votes},{children:[(0,o.jsx)(m.Z,{children:"list"}),(0,o.jsx)(r.Z,{children:`${b.formatMessage($e.votes,{total:x})}`})]})):(0,o.jsxs)("div",Object.assign({className:Ie.voters},{children:[(0,o.jsx)(m.Z,{children:"people_alt"}),(0,o.jsx)(r.Z,{children:`${b.formatMessage($e.voters,{total:x})}`})]}))]})}))]})),(0,a.useEffect)((()=>{C(i.choices)}),[i.choices]),(0,o.jsx)(Be,Object.assign({className:N()(Ie.root,t)},h,{children:R}))};var Le=s(59219),De=s(74482),Ue=s(69721),Ve=s(22319);const Ge={LOADING_NEXT:"_loading_next",LOADING_PREVIOUS:"_loading_previous",DATA_NEXT_LOADED:"_data_next_loaded",DATA_PREVIOUS_LOADED:"_data_previous_loaded",DATA_RELOAD:"_data_reload",DATA_RELOADED:"_data_reloaded"};function ze(e,t){switch(t.type){case Ge.LOADING_NEXT:return Object.assign(Object.assign({},e),{isLoadingNext:!0,isLoadingPrevious:!1});case Ge.LOADING_PREVIOUS:return Object.assign(Object.assign({},e),{isLoadingNext:!1,isLoadingPrevious:!0});case Ge.DATA_NEXT_LOADED:return Object.assign(Object.assign(Object.assign(Object.assign({},e),{page:t.payload.currentPage,contributors:t.payload.contributors,isLoadingNext:!1,componentLoaded:!0,next:t.payload.next}),t.payload.previous?{previous:t.payload.previous}:{}),t.payload.total?{total:t.payload.total}:{});case Ge.DATA_PREVIOUS_LOADED:return Object.assign(Object.assign({},e),{page:t.payload.currentPage,contributors:t.payload.contributors,isLoadingPrevious:!1,previous:t.payload.previous});case Ge.DATA_RELOAD:return Object.assign(Object.assign({},e),{next:t.payload.next,contributors:[],total:0,previous:null,reload:!0});case Ge.DATA_RELOADED:return Object.assign(Object.assign({},e),{componentLoaded:!1,reload:!1});default:throw new Error(`Unhandled type: ${t.type}`)}}function He(e){const{id:t,feedObject:s,feedObjectType:n,offset:o=0,pageSize:i=5,onChangePage:r,cacheStrategy:l=Le.n2.CACHE_FIRST}=e,c=(0,Ve.Z)(),{obj:d,setObj:u}=(0,$.Z)({id:t,feedObject:s,feedObjectType:n}),m=d?d.id:null,g=()=>{const e=o?`&offset=${o}`:"",s=d?d.id:t,a=d?d.type:n;return`${K.Z.FeedObjectContributorsList.url({type:a,id:s})}?limit=${i}${e}`},[p,j]=(0,a.useReducer)(ze,{},(()=>function(e){const t=e.obj?(0,Ue.t9)(e.obj.id,e.obj.type,e.next):null;let s={componentLoaded:!1,contributors:[],total:0,next:e.next,previous:null,isLoadingNext:!1,isLoadingPrevious:!1,page:e.offset/e.pageSize+1,reload:!1};if(t&&Le.ZP.hasKey(t)&&e.cacheStrategy!==Le.n2.NETWORK_ONLY){const e=Le.ZP.get(t);return Object.assign(Object.assign({},s),{total:e.count,next:e.next,previous:e.previous,contributors:e.results})}return s}({obj:d,offset:o,pageSize:i,next:g(),cacheStrategy:l}))),h=e=>{const t=new URLSearchParams(e),s=Object.fromEntries(t.entries());return(s.offset?parseInt(s.offset):0)/i+1},b=(e,t)=>f(e,!1).then((e=>{let s,n=h(p.next);if(t){s=p.contributors.slice(0,p.contributors.length-e.results.length).concat(e.results)}else{let t=p.contributors.slice(e.results.length,p.contributors.length);s=e.results.concat(t)}c.current&&j({type:t?Ge.DATA_NEXT_LOADED:Ge.DATA_PREVIOUS_LOADED,payload:Object.assign(Object.assign({page:n,contributors:s},t?{next:e.next}:{previous:e.previous}),{total:e.count})})})),f=(e,t=!0)=>{const s=(0,Ue.t9)(d.id,d.type,e);return t&&Le.ZP.hasKey(s)&&l!==Le.n2.NETWORK_ONLY?Promise.resolve(Le.ZP.get(s)):J.Z.request({url:e,method:K.Z.Comments.method}).then((e=>e.status>=300?Promise.reject(e):(Le.ZP.set(s,e.data),Promise.resolve(e.data))))};function v(){d&&p.next&&!p.isLoadingNext&&(j({type:Ge.LOADING_NEXT}),f(p.next).then((e=>{if(c.current){let t=h(p.next);j({type:Ge.DATA_NEXT_LOADED,payload:Object.assign({page:t,contributors:[...p.contributors,...e.results],next:e.next,total:e.count,componentLoaded:!0},o&&0===p.contributors.length?{previous:e.previous}:{})}),r&&r(t)}})).catch((e=>{Q.Y.error(De.h,e)})).then((()=>{c.current&&l===Le.n2.STALE_WHILE_REVALIDATE&&b(p.next,!0)})))}return(0,a.useEffect)((()=>{c.current&&p.componentLoaded&&Boolean(d)&&!p.reload&&j({type:Ge.DATA_RELOAD,payload:{next:g()}})}),[m,i,o,c]),(0,a.useEffect)((()=>{c.current&&p.componentLoaded&&p.reload&&!p.isLoadingNext&&!p.isLoadingPrevious&&(j({type:Ge.DATA_RELOADED}),v())}),[p.reload,c]),Object.assign(Object.assign({feedObject:d,setFeedObject:u},p),{pageSize:i,getNextPage:v,getPreviousPage:function(){d&&p.previous&&!p.isLoadingPrevious&&(j({type:Ge.LOADING_PREVIOUS}),f(p.previous).then((e=>{if(c.current){let t=h(p.previous);j({type:Ge.DATA_PREVIOUS_LOADED,payload:{page:t,contributors:[...e.results,...p.contributors],previous:e.previous}}),r&&r(t)}})).catch((e=>{Q.Y.error(De.h,e)})).then((()=>{l===Le.n2.STALE_WHILE_REVALIDATE&&b(p.next,!1)})))}})}var We=s(51107),qe=s(59107);const Ye={root:`${A.B}-contributors-skeleton-root`,btnParticipants:`${A.B}-btn-participants`},Xe=(0,i.ZP)(d.Z,{name:A.B,slot:"ContributorsSkeletonRoot"})((()=>({})));function Ke(e){const{className:t=null,AvatarGroupSkeletonProps:s={}}=e,a=(0,n._T)(e,["className","AvatarGroupSkeletonProps"]);return(0,o.jsx)(Xe,Object.assign({className:N()(Ye.root,t)},a,{children:(0,o.jsxs)(l.Z,Object.assign({variant:"text",disabled:!0,classes:{root:Ye.btnParticipants}},{children:[(0,o.jsx)(H.Z,{id:"ui.feedObject.contributors.participants",defaultMessage:"ui.feedObject.contributors.participants"}),":",(0,o.jsx)(qe.Z,Object.assign({},e.AvatarGroupSkeletonProps))]}))}))}const Je={root:`${A.B}-contributors-root`,avatarGroup:`${A.B}-contributors-avatarGroup`,btnParticipants:`${A.B}-contributors-btn-participants`},Qe=(0,i.ZP)(d.Z,{name:A.B,slot:"ContributorsRoot"})((()=>({})));const et=function(e){const{className:t=null,feedObjectId:s=null,feedObject:i=null,feedObjectType:c=null,ContributorsSkeletonProps:u={},cacheStrategy:m=Le.n2.CACHE_FIRST}=e,g=(0,n._T)(e,["className","feedObjectId","feedObject","feedObjectType","ContributorsSkeletonProps","cacheStrategy"]),j=He({id:s,feedObject:i,feedObjectType:c,pageSize:10,cacheStrategy:m}),[h,b]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{j.feedObject&&j.getNextPage()}),[j.feedObject]),j.feedObject?(0,o.jsx)(Qe,Object.assign({className:N()(Je.root,t)},g,{children:(0,o.jsx)(d.Z,{children:j.isLoadingNext&&!h?(0,o.jsx)(Ke,Object.assign({},u)):(0,o.jsx)(o.Fragment,{children:j.contributors.length>0?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(l.Z,Object.assign({variant:"text",onClick:()=>b(!0),classes:{root:Je.btnParticipants},color:"inherit"},{children:[(0,o.jsx)(H.Z,{id:"ui.feedObject.contributors.participants",defaultMessage:"ui.feedObject.contributors.participants"}),":",(0,o.jsxs)(We.Z,Object.assign({},g,{children:[j.contributors.map(((e,t)=>(0,o.jsx)(p.Z,{alt:e.username,src:e.avatar},t))),[...Array(Math.max(j.total-j.contributors.length,0))].map(((e,t)=>(0,o.jsx)(p.Z,{},t)))]}))]})),h&&(0,o.jsx)(te.Z,Object.assign({title:(0,o.jsx)(H.Z,{defaultMessage:"ui.feedObject.contributors.title",id:"ui.feedObject.contributors.title",values:{total:j.total}}),onClose:()=>b(!1),open:h},{children:j.isLoadingNext?(0,o.jsx)(se.Z,{size:50}):(0,o.jsx)(X.Z,Object.assign({dataLength:j.contributors.length,next:j.getNextPage(),hasMoreNext:Boolean(j.next),loaderNext:(0,o.jsx)(se.Z,{size:30}),height:400,endMessage:(0,o.jsx)(r.Z,Object.assign({variant:"body2",align:"center",fontWeight:"bold"},{children:(0,o.jsx)(H.Z,{id:"ui.feedObject.contributors.noOtherContributors",defaultMessage:"ui.feedObject.contributors.noOtherContributors"})}))},{children:(0,o.jsx)(q.Z,{children:j.contributors.map(((e,t)=>(0,o.jsx)(Y.ZP,{children:(0,o.jsx)(ne.Z,{elevation:0,user:e,sx:{m:0},onClick:()=>b(!1)},e.id)},t)))})}))}))]}):null})})})):null};var tt=s(38308),st=s(52180),nt=s(56581);const ot={root:`${A.B}-action-follow-root`,button:`${A.B}-action-follow-button`,iconized:`${A.B}-action-follow-iconized`,followed:`${A.B}-action-follow-followed`},at=(0,i.ZP)(d.Z,{name:A.B,slot:"ActionFollowRoot"})((()=>({})));const it=function(e){const{className:t=null,feedObjectId:s=null,feedObject:i=null,feedObjectType:r=F.q.POST,handleFollow:l,iconized:c=!0}=e,d=(0,n._T)(e,["className","feedObjectId","feedObject","feedObjectType","handleFollow","iconized"]),{obj:u,setObj:g}=(0,$.Z)({id:s,feedObject:i,feedObjectType:r}),[p,h]=(0,a.useState)(!1),b=(0,he.RM)(),f=(0,ve.LD)(),{enqueueSnackbar:v}=(0,ge.Ds)(),O=(0,a.useMemo)((()=>()=>J.Z.request({url:K.Z.FollowContribution.url({type:u.type,id:u.id}),method:K.Z.FollowContribution.method}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[u]);function x(){f.user?(h(!0),O().then((e=>{const t=!u.followed;g(Object.assign({},u,{followed:t})),h(!1),l&&l(t)})).catch((e=>{Q.Y.error(ee.J,e),(0,nt.w)(e,f.managers.blockedUsers.isBlocked(u.author),v)||v((0,o.jsx)(H.Z,{id:"ui.common.error.action",defaultMessage:"ui.common.error.action"}),{variant:"error",autoHideDuration:3e3}),h(!1)}))):b.settings.handleAnonymousAction()}return(0,o.jsx)(at,Object.assign({className:N()(ot.root,t)},d,{children:function(){let e=(0,o.jsx)(H.Z,{id:"ui.feedObject.follow",defaultMessage:"ui.feedObject.follow"});return u.followed&&(e=(0,o.jsx)(H.Z,{id:"ui.feedObject.unfollow",defaultMessage:"ui.feedObject.unfollow"})),(0,o.jsx)(a.Fragment,{children:f.user&&u.author.id!==f.user.id&&!u.deleted&&(0,o.jsx)(j.Z,Object.assign({title:e},{children:(0,o.jsx)(W.Z,Object.assign({className:N()(ot.button,{[ot.iconized]:c,[ot.followed]:u.followed}),loading:p,variant:c?"text":"contained",disabled:p,onClick:x},{children:c?(0,o.jsx)(m.Z,{children:u.followed?"bookmark_added":"bookmark_border"}):e}))}))})}()}))};var rt=s(63902),lt=s(29360),ct=s(115),dt=s(20166),ut=s(80317),mt=s(98619);const gt=(0,S.vU)({relevantActivities:{id:"ui.feedObject.activitiesMenu.relevantActivities",defaultMessage:"ui.feedObject.activitiesMenu.relevantActivities"},recentComments:{id:"ui.feedObject.activitiesMenu.recentComments",defaultMessage:"ui.feedObject.activitiesMenu.recentComments"},firstComments:{id:"ui.feedObject.activitiesMenu.firstComments",defaultMessage:"ui.feedObject.activitiesMenu.firstComments"},followedComments:{id:"ui.feedObject.activitiesMenu.followedComments",defaultMessage:"ui.feedObject.activitiesMenu.followedComments"},connectionsComments:{id:"ui.feedObject.activitiesMenu.connectionsComments",defaultMessage:"ui.feedObject.activitiesMenu.connectionsComments"}}),pt={root:`${A.B}-activities-menu-root`,selector:`${A.B}-activities-menu-selector`},jt=(0,i.ZP)(d.Z,{name:A.B,slot:"ActivitiesMenuRoot"})((()=>({})));const ht=function(e){const{className:t=null,selectedActivities:s=null,hideRelevantActivitiesItem:i=!1,onChange:r=null}=e,c=(0,n._T)(e,["className","selectedActivities","hideRelevantActivitiesItem","onChange"]),u=(0,a.useContext)(be.Tt),g=(0,ve.LD)(),p=(0,ae.Z)(),h=(0,ie.Z)(p.breakpoints.down("md")),b=u.preferences[fe.$0].value,[f,v]=a.useState(null),O=Boolean(f),x=(0,M.Z)(),y=e=>{v(e.currentTarget)},Z=()=>{v(null)},C=e=>()=>{r&&r(e)};function E(){return(0,o.jsxs)(d.Z,{children:[!i&&(0,o.jsx)(mt.Z,Object.assign({selected:s===L.F.RELEVANCE_ACTIVITIES,onClick:C(L.F.RELEVANCE_ACTIVITIES)},{children:(0,o.jsx)(ce.Z,{primary:(0,o.jsx)("b",{children:x.formatMessage(gt.relevantActivities)}),secondary:(0,o.jsx)(H.Z,{id:"ui.feedObject.activitiesMenu.relevantActivitiesDesc",defaultMessage:"ui.feedObject.activitiesMenu.relevantActivitiesDesc"})})})),(0,o.jsx)(mt.Z,Object.assign({selected:s===L.F.RECENT_COMMENTS,onClick:C(L.F.RECENT_COMMENTS)},{children:(0,o.jsx)(ce.Z,{primary:(0,o.jsx)("b",{children:x.formatMessage(gt.recentComments)}),secondary:(0,o.jsx)(H.Z,{id:"ui.feedObject.activitiesMenu.recentCommentsDesc",defaultMessage:"ui.feedObject.activitiesMenu.recentCommentsDesc"})})})),(0,o.jsx)(mt.Z,Object.assign({selected:s===L.F.FIRST_COMMENTS,onClick:C(L.F.FIRST_COMMENTS)},{children:(0,o.jsx)(ce.Z,{primary:(0,o.jsx)("b",{children:x.formatMessage(gt.firstComments)}),secondary:(0,o.jsx)(H.Z,{id:"ui.feedObject.activitiesMenu.firstCommentsDesc",defaultMessage:"ui.feedObject.activitiesMenu.firstCommentsDesc"})})})),g.user&&(0,o.jsx)(mt.Z,Object.assign({selected:s===L.F.CONNECTIONS_COMMENTS,onClick:C(L.F.CONNECTIONS_COMMENTS)},{children:(0,o.jsx)(ce.Z,{primary:(0,o.jsx)("b",{children:b?x.formatMessage(gt.followedComments):x.formatMessage(gt.connectionsComments)}),secondary:b?(0,o.jsx)(H.Z,{id:"ui.feedObject.activitiesMenu.followedCommentsDesc",defaultMessage:"ui.feedObject.activitiesMenu.followedCommentsDesc"}):(0,o.jsx)(H.Z,{id:"ui.feedObject.activitiesMenu.connectionsCommentsDesc",defaultMessage:"ui.feedObject.activitiesMenu.connectionsCommentsDesc"})})}))]})}return(0,o.jsxs)(jt,Object.assign({className:N()(pt.root,t)},c,{children:[(0,o.jsx)(d.Z,Object.assign({className:pt.selector},{children:(0,o.jsx)(j.Z,Object.assign({title:(0,o.jsx)(H.Z,{id:"ui.feedObject.activitiesMenu.tooltipTitle",defaultMessage:"ui.feedObject.activitiesMenu.tooltipTitle"})},{children:(0,o.jsxs)(l.Z,Object.assign({variant:"text",size:"small",onClick:y},{children:[s===L.F.CONNECTIONS_COMMENTS&&b?x.formatMessage(gt.followedComments):x.formatMessage(gt[`${(0,je.eV)(s)}`]),"\xa0 ",(0,o.jsx)(m.Z,{children:"expand_more"})]}))}))})),O&&(0,o.jsx)(o.Fragment,{children:h?(0,o.jsx)(ue.Z,Object.assign({open:!0,onClose:Z,onOpen:y,anchor:"bottom",disableSwipeToOpen:!0},{children:E()})):(0,o.jsx)(de.Z,Object.assign({anchorEl:f,open:!0,onClose:Z,onClick:Z,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"}},{children:E()}))})]}))};var bt=s(9774),ft=s(12132),vt=s(42879);const Ot=(0,S.vU)({comment:{id:"ui.feedObject.relevantActivities.comment",defaultMessage:"ui.feedObject.relevantActivities.comment"}}),xt={root:`${A.B}-activity-comment-root`,avatar:`${A.B}-activity-comment-avatar`,username:`${A.B}-activity-comment-username`,showMoreContent:`${A.B}-activity-comment-show-more-content`},yt=(0,i.ZP)(ct.Z,{name:A.B,slot:"ActivityCommentRoot"})((()=>({})));const Zt=function(e){const{className:t=null,activityObject:s=null}=e,i=(0,n._T)(e,["className","activityObject"]),r=(0,I.sy)(),[l,c]=(0,a.useState)(!1),d=(0,M.Z)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(yt,Object.assign({},i,{className:N()(xt.root,t),image:(0,o.jsx)(B.Z,Object.assign({},!s.author.deleted&&{to:r.url(ft.USER_PROFILE_ROUTE_NAME,s.author)},{onClick:s.author.deleted?()=>c(!0):null},{children:(0,o.jsx)(p.Z,{alt:s.author.username,variant:"circular",src:s.author.avatar,className:xt.avatar})})),primary:(0,o.jsx)(o.Fragment,{children:d.formatMessage(Ot.comment,{username:(0,o.jsx)(B.Z,Object.assign({},!s.author.deleted&&{to:r.url(ft.USER_PROFILE_ROUTE_NAME,s.author)},{onClick:s.author.deleted?()=>c(!0):null,className:xt.username},{children:s.author.username})),link:(...e)=>(0,o.jsx)(B.Z,Object.assign({to:r.url(ft.COMMENT_ROUTE_NAME,(0,D.p3)(s.comment))},{children:e}))})}),secondary:(0,o.jsx)(O.Z,{date:s.active_at})})),l&&(0,o.jsx)(vt.Z,{open:l,handleClose:()=>c(!1)})]})},Ct=(0,S.vU)({vote:{id:"ui.feedObject.relevantActivities.vote",defaultMessage:"ui.feedObject.relevantActivities.vote"}}),Et={root:`${A.B}-activity-vote-up-root`,avatar:`${A.B}-activity-vote-up-avatar`,username:`${A.B}-activity-vote-up-username`},Nt=(0,i.ZP)(ct.Z,{name:A.B,slot:"ActivityVoteUpRoot"})((()=>({})));const _t=function(e){const{className:t=null,activityObject:s=null}=e,i=(0,n._T)(e,["className","activityObject"]),r=(0,I.sy)(),[l,c]=(0,a.useState)(!1),d=(0,M.Z)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Nt,Object.assign({},i,{className:N()(Et.root,t),image:(0,o.jsx)(B.Z,Object.assign({},!s.author.deleted&&{to:r.url(ft.USER_PROFILE_ROUTE_NAME,s.author)},{onClick:s.author.deleted?()=>c(!0):null},{children:(0,o.jsx)(p.Z,{alt:s.author.username,variant:"circular",src:s.author.avatar,className:Et.avatar})})),primary:(0,o.jsx)(o.Fragment,{children:d.formatMessage(Ct.vote,{username:(0,o.jsx)(B.Z,Object.assign({},!s.author.deleted&&{to:r.url(ft.USER_PROFILE_ROUTE_NAME,s.author)},{className:Et.username,onClick:s.author.deleted?()=>c(!0):null},{children:s.author.username}))})}),secondary:(0,o.jsx)(O.Z,{date:s.active_at})})),l&&(0,o.jsx)(vt.Z,{open:l,handleClose:()=>c(!1)})]})},Tt=(0,S.vU)({follow:{id:"ui.feedObject.relevantActivities.follow",defaultMessage:"ui.feedObject.relevantActivities.follow"}}),At={root:`${A.B}-activity-follow-root`,avatar:`${A.B}-activity-follow-avatar`,username:`${A.B}-activity-follow-username`},Pt=(0,i.ZP)(ct.Z,{name:A.B,slot:"ActivityFollowRoot"})((()=>({})));const wt=function(e){const t=(0,lt.Z)({props:e,name:A.B}),{className:s=null,activityObject:i=null}=t,r=(0,n._T)(t,["className","activityObject"]),l=(0,I.sy)(),[c,d]=(0,a.useState)(!1),u=(0,M.Z)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Pt,Object.assign({},r,{className:N()(At.root,s),image:(0,o.jsx)(B.Z,Object.assign({},!i.author.deleted&&{to:l.url(ft.USER_PROFILE_ROUTE_NAME,i.author)},{onClick:i.author.deleted?()=>d(!0):null},{children:(0,o.jsx)(p.Z,{alt:i.author.username,variant:"circular",src:i.author.avatar,className:At.avatar})})),primary:(0,o.jsx)(o.Fragment,{children:u.formatMessage(Tt.follow,{username:(0,o.jsx)(B.Z,Object.assign({},!i.author.deleted&&{to:l.url(ft.USER_PROFILE_ROUTE_NAME,i.author)},{onClick:i.author.deleted?()=>d(!0):null,className:At.username},{children:i.author.username}))})}),secondary:(0,o.jsx)(O.Z,{date:i.active_at})})),c&&(0,o.jsx)(vt.Z,{open:c,handleClose:()=>d(!1)})]})},kt=(0,S.vU)({pollVote:{id:"ui.feedObject.relevantActivities.pollVote",defaultMessage:"ui.feedObject.relevantActivities.pollVote"}}),St={root:`${A.B}-activity-poll-vote-root`,avatar:`${A.B}-activity-poll-vote-avatar`,username:`${A.B}-activity-poll-vote-username`},Mt=(0,i.ZP)(ct.Z,{name:A.B,slot:"ActivityPollVoteRoot"})((()=>({})));const Rt=function(e){const{className:t=null,activityObject:s=null}=e,i=(0,n._T)(e,["className","activityObject"]),r=(0,I.sy)(),[l,c]=(0,a.useState)(!1),d=(0,M.Z)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Mt,Object.assign({},i,{className:N()(St.root,t),image:(0,o.jsx)(B.Z,Object.assign({},!s.author.deleted&&{to:r.url(ft.USER_PROFILE_ROUTE_NAME,s.author)},{onClick:s.author.deleted?()=>c(!0):null},{children:(0,o.jsx)(p.Z,{alt:s.author.username,variant:"circular",src:s.author.avatar,className:St.avatar})})),primary:(0,o.jsx)(o.Fragment,{children:d.formatMessage(kt.pollVote,{username:(0,o.jsx)(B.Z,Object.assign({},!s.author.deleted&&{to:r.url(ft.USER_PROFILE_ROUTE_NAME,s.author)},{onClick:s.author.deleted?()=>c(!0):null,className:St.username},{children:s.author.username}))})}),secondary:(0,o.jsx)(O.Z,{date:s.active_at})})),l&&(0,o.jsx)(vt.Z,{open:l,handleClose:()=>c(!1)})]})},$t={root:`${A.B}-relevant-activities-root`,activity:`${A.B}-relevant-activities-activity`},It=(0,i.ZP)(d.Z,{name:A.B,slot:"RelevantActivitiesRoot"})((()=>({})));const Bt=function(e){const{className:t=null,activities:s=[],showMaxRelevantActivities:i=5}=e,l=(0,n._T)(e,["className","activities","showMaxRelevantActivities"]),[c,d]=(0,a.useState)(!1);function u(e,t){return e.type===bt.f.COMMENT?(0,o.jsx)(Zt,{activityObject:e,elevation:0},t):e.type===bt.f.FOLLOW?(0,o.jsx)(wt,{activityObject:e,elevation:0},t):e.type===bt.f.VOTE?(0,o.jsx)(_t,{activityObject:e,elevation:0},t):e.type===bt.f.POLLVOTE?(0,o.jsx)(Rt,{activityObject:e,elevation:0},t):null}return(0,o.jsx)(It,Object.assign({className:N()($t.root,t)},l,{children:s.length<=0?(0,o.jsx)(r.Z,Object.assign({variant:"body2"},{children:(0,o.jsx)(H.Z,{id:"ui.feedObject.relevantActivities.noResults",defaultMessage:"ui.feedObject.relevantActivities.noResults"})})):(0,o.jsxs)(q.Z,{children:[s.slice(0,i).map(((e,t)=>(0,o.jsx)(Y.ZP,Object.assign({className:$t.activity},{children:u(e,t)}),t))),!c&&s.length>i&&(0,o.jsxs)(mt.Z,Object.assign({onClick:()=>d((e=>!e))},{children:[(0,o.jsx)(ce.Z,{primary:(0,o.jsx)(H.Z,{id:"ui.feedObject.relevantActivities.showOthers",defaultMessage:"ui.feedObject.relevantActivities.showOthers"})}),c?(0,o.jsx)(m.Z,{children:"expand_less"}):(0,o.jsx)(m.Z,{children:"expand_more"})]})),(0,o.jsx)(f.Z,Object.assign({in:c,timeout:"auto",unmountOnExit:!0},{children:s.slice(i).map(((e,t)=>(0,o.jsx)(Y.ZP,Object.assign({className:$t.activity},{children:u(e,t)}),t)))}))]})}))};var Ft=s(47189),Lt=s(97650);const Dt={root:`${A.B}-activities-root`,activities:`${A.B}-activities`},Ut=(0,i.ZP)(d.Z,{name:A.B,slot:"ActivitiesRoot"})((()=>({})));const Vt=function(e){const{id:t=`feed_object_activities_${e.feedObjectId?e.feedObjectId:e.feedObject?e.feedObject.id:""}`,className:s,feedObjectId:i,feedObject:r,feedObjectType:l=F.q.POST,cacheStrategy:c=Le.n2.CACHE_FIRST,CommentsObjectProps:u={},CommentComponentProps:m={variant:"outlined"},feedObjectActivities:g=[],comments:p=[],onSetSelectedActivities:j,activitiesType:h=L.F.RECENT_COMMENTS}=e,b=(0,n._T)(e,["id","className","feedObjectId","feedObject","feedObjectType","cacheStrategy","CommentsObjectProps","CommentComponentProps","feedObjectActivities","comments","onSetSelectedActivities","activitiesType"]),{ref:f,inView:v}=(0,Lt.YD)({triggerOnce:!0}),[O,x]=(0,a.useState)(h),y=(0,Ft.Z)({id:i,feedObject:r,feedObjectType:l,cacheStrategy:c,pageSize:1,orderBy:O===L.F.CONNECTIONS_COMMENTS?dt.p.CONNECTION_DESC:O===L.F.FIRST_COMMENTS?dt.p.ADDED_AT_ASC:dt.p.ADDED_AT_DESC}),Z=y.feedObject?y.feedObject.id:null,C=Math.min(2,y.feedObject?y.feedObject.comment_count:2),E=g&&g.length>0;function _(){y.getNextPage()}return(0,a.useEffect)((()=>{x(h)}),[h]),(0,a.useEffect)((()=>{Z&&!y.comments.length&&v&&y.getNextPage()}),[Z,v]),(0,o.jsx)(Ut,Object.assign({id:t,className:N()(Dt.root,s)},b,{ref:f},{children:y.feedObject&&(Boolean(y.feedObject.comment_count)||g&&g.length>0||p.length>0||r&&r.comment_count>0)?(0,o.jsxs)(d.Z,Object.assign({className:Dt.activities},E?{}:{style:{minHeight:80*Math.min(C,r.comment_count)+"px"}},{children:[(0,o.jsx)(ht,{selectedActivities:O,hideRelevantActivitiesItem:!E,onChange:function(e){j(e),x(e)}}),O===L.F.RELEVANCE_ACTIVITIES?(0,o.jsx)(Bt,{activities:g}):(0,o.jsx)(o.Fragment,{children:(y.feedObject.comment_count>0||p.length>0)&&(0,o.jsx)(ut.Z,Object.assign({feedObject:y.feedObject,comments:y.comments,startComments:p,next:y.next,isLoadingNext:y.isLoadingNext,handleNext:_,totalLoadedComments:y.comments.length+p.length,totalComments:y.feedObject.comment_count,hideAdvertising:!0},u,{cacheStrategy:c,CommentsObjectSkeletonProps:{count:C},CommentComponentProps:Object.assign(Object.assign(Object.assign(Object.assign({},u.CommentComponentProps?u.CommentComponentProps:{}),{truncateContent:!0}),m),{cacheStrategy:c}),inPlaceLoadMoreContents:!1}))})]})):null}))};var Gt=s(80366),zt=s(68456),Ht=s(55218);var Wt=s(62887),qt=s(70815),Yt=s(26474);const Xt="SCFeedObjectMediaPreview",Kt={root:`${Xt}-root`},Jt=(0,i.ZP)(d.Z,{name:Xt,slot:"Root"})((()=>({}))),Qt=e=>{const t=(0,lt.Z)({props:e,name:Xt}),{className:s,medias:a,mediaObjectTypes:i=[Wt.Z,qt.Z,Yt.Z]}=t,r=(0,n._T)(t,["className","medias","mediaObjectTypes"]),{handleMediaClick:l}={handleMediaClick:e=>{J.Z.request({url:K.Z.MediaClickTracker.url({id:e.id}),method:K.Z.MediaClickTracker.method}).catch((e=>{Q.Y.error(De.h,e)}))}};return a.length?(0,o.jsx)(Jt,Object.assign({className:N()(s,Kt.root)},r,{children:i.map((e=>{const{displayProps:t={}}=e;return(0,o.jsx)("div",{children:(0,o.jsx)(e.displayComponent,Object.assign({medias:a},t,{onMediaClick:l}))},e.name)}))})):null},es=(0,S.vU)({visibleToAll:{id:"ui.feedObject.visibleToAll",defaultMessage:"ui.feedObject.visibleToAll"},visibleToGroup:{id:"ui.feedObject.visibleToGroup",defaultMessage:"ui.feedObject.visibleToGroup"}}),ts={root:`${A.B}-root`,deleted:`${A.B}-deleted`,header:`${A.B}-header`,category:`${A.B}-category`,event:`${A.B}-event`,group:`${A.B}-group`,avatar:`${A.B}-avatar`,username:`${A.B}-username`,activityAt:`${A.B}-activity-at`,tag:`${A.B}-tag`,location:`${A.B}-location`,content:`${A.B}-content`,showMore:`${A.B}-show-more`,error:`${A.B}-error`,titleSection:`${A.B}-title-section`,title:`${A.B}-title`,textSection:`${A.B}-text-section`,text:`${A.B}-text`,snippet:`${A.B}-snippet`,snippetContent:`${A.B}-snippet-content`,mediasSection:`${A.B}-medias-section`,pollsSection:`${A.B}-polls-section`,infoSection:`${A.B}-info-section`,actionsSection:`${A.B}-actions-section`,replyContent:`${A.B}-reply-content`,activitiesSection:`${A.B}-activities-section`,activitiesContent:`${A.B}-activities-content`,followButton:`${A.B}-follow-button`},ss=(0,i.ZP)(rt.Z,{name:A.B,slot:"Root"})((()=>({})));const ns=function(e){var t,s,i,Z,C,E,_;const T=(0,lt.Z)({props:e,name:A.B}),{id:P=`feed_object_${T.feedObjectId?T.feedObjectId:T.feedObject?T.feedObject.id:""}`,className:w=null,feedObjectId:k=null,feedObject:S=null,feedObjectType:R=null,feedObjectActivities:U=null,cacheStrategy:V=Le.n2.CACHE_FIRST,markRead:G=!1,template:z=L.r.PREVIEW,hideFollowAction:W=!1,summaryExpanded:q=!1,activitiesExpanded:Y=!0,activitiesExpandedType:X,hideParticipantsPreview:te=!1,pollVisible:se=!0,FollowButtonProps:ne={},FeedObjectSkeletonProps:oe={elevation:0},ActionsProps:ae={},CommentObjectReplyComponent:ie=Gt.Z,CommentObjectReplyComponentProps:re={WidgetProps:{variant:"outlined"}},CommentComponentProps:le={variant:"outlined"},CommentObjectSkeletonProps:ce={elevation:0,WidgetProps:{variant:"outlined"}},ContributionActionsMenuProps:de={},FeedObjectMediaPreviewProps:ue={},ActivitiesProps:pe={cacheStrategy:V},PollObjectProps:je={elevation:0},ContributorsFeedObjectProps:be={},onReply:fe,onHeightChange:xe,onStateChange:Ze}=T,Ce=(0,n._T)(T,["id","className","feedObjectId","feedObject","feedObjectType","feedObjectActivities","cacheStrategy","markRead","template","hideFollowAction","summaryExpanded","activitiesExpanded","activitiesExpandedType","hideParticipantsPreview","pollVisible","FollowButtonProps","FeedObjectSkeletonProps","ActionsProps","CommentObjectReplyComponent","CommentObjectReplyComponentProps","CommentComponentProps","CommentObjectSkeletonProps","ContributionActionsMenuProps","FeedObjectMediaPreviewProps","ActivitiesProps","PollObjectProps","ContributorsFeedObjectProps","onReply","onHeightChange","onStateChange"]),Ee=(0,he.RM)(),Ne=(0,I.sy)(),_e=(0,ve.LD)(),{enqueueSnackbar:Te}=(0,ge.Ds)(),{obj:Pe,setObj:we,error:ke}=(0,$.Z)({id:k,feedObject:S,feedObjectType:R,cacheStrategy:V}),Se=Pe?Pe.id:null,[Me,Re]=(0,a.useState)(!1),$e=()=>Pe&&Y&&(Pe.comment_count>0||U&&U.length>0),[Ie,Be]=(0,a.useState)(!1),[De,Ve]=(0,a.useState)($e()),[Ge,ze]=(0,a.useState)([]),[He,We]=(0,a.useState)(!1),[qe,Ye]=(0,a.useState)(function(){if(X)return X;if(U&&U.length>0)return L.F.RELEVANCE_ACTIVITIES;return L.F.RECENT_COMMENTS}()),[Xe,Ke]=(0,a.useState)(q),Je=(0,a.useMemo)((()=>{var e;return(null==Pe?void 0:Pe.medias.length)>0&&(null===(e=Pe.medias[0].embed)||void 0===e?void 0:e.embed_type)===me.ej}),[null==Pe?void 0:Pe.medias]),Qe=(0,a.useMemo)((()=>{var e,t,s,n;return W||Je&&!1===(null===(n=null===(s=null===(t=null===(e=null==Pe?void 0:Pe.medias)||void 0===e?void 0:e[0])||void 0===t?void 0:t.embed)||void 0===s?void 0:s.metadata)||void 0===n?void 0:n.active)}),[W,Je,Pe]),ot=(0,M.Z)(),at=(0,a.useMemo)((()=>e=>{Ze&&e&&Ze(e),xe&&xe()}),[Ze,xe]),rt=e=>{we(e),at()};(0,a.useEffect)((()=>{const e=$e();Ve(e),at({activitiesExpanded:e,activitiesExpandedType:qe,cacheStrategy:Le.n2.CACHE_FIRST})}),[Se,qe]);const dt=(0,a.useCallback)((e=>{"poll"in Pe&&rt(Object.assign({},Pe,{poll:Object.assign(Object.assign({},Pe.poll),{choices:e})}))}),[Pe]),ut=(0,a.useCallback)((e=>{at({pollVisible:e})}),[se,at]),mt=(0,a.useCallback)((()=>{Ke(!Xe),at({summaryExpanded:!Xe})}),[Xe,at]),gt=(0,a.useCallback)(((e,t,s)=>{Te(s?(0,o.jsx)(H.Z,{id:"ui.feedObject.flagSent",defaultMessage:"ui.feedObject.flagSent"}):(0,o.jsx)(H.Z,{id:"ui.feedObject.flagRemoved",defaultMessage:"ui.feedObject.flagRemoved"}),{autoHideDuration:3e3})}),[]),pt=(0,a.useCallback)((()=>{rt(Object.assign({},Pe,{deleted:!1}))}),[Pe]),jt=(0,a.useCallback)((()=>{rt(Object.assign({},Pe,{collapsed:!Pe.collapsed}))}),[Pe]),ht=(0,a.useCallback)((()=>{rt(Object.assign({},Pe,{deleted:!Pe.deleted}))}),[Pe]),bt=(0,a.useCallback)((()=>{rt(Object.assign({},Pe,{suspended:!Pe.suspended})),Te(Pe.suspended?(0,o.jsx)(H.Z,{id:"ui.feedObject.notificationsEnabled",defaultMessage:"ui.feedObject.notificationsEnabled"}):(0,o.jsx)(H.Z,{id:"ui.feedObject.notificationsDisabled",defaultMessage:"ui.feedObject.notificationsDisabled"}),{autoHideDuration:3e3})}),[Pe]),Ot=(0,a.useCallback)((()=>{Be((e=>!e))}),[Ie]),xt=(0,a.useCallback)((e=>{rt(e),Be(!1)}),[Pe,Ie]),yt=(0,a.useCallback)((e=>{rt(Object.assign({},Pe,{voted:e.voted,vote_count:e.vote_count,reactions_count:e.reactions_count,reaction:e.reaction}))}),[Pe]),Zt=(0,a.useCallback)((()=>{if(_e.user){const e=!De;Ve(e),at({activitiesExpanded:e})}else Ee.settings.handleAnonymousAction()}),[De,_e.user,at,qe]),Ct=(0,a.useCallback)((e=>{rt(Object.assign(Object.assign({},Pe),{followed:e}))}),[Pe]),Et=(0,a.useCallback)((()=>{rt(Object.assign(Object.assign({},Pe),{comment_count:Math.max(Pe.comment_count-1,0)}))}),[Pe]),Nt=(0,a.useCallback)((e=>{Ye(e),ze([]),at({activitiesExpandedType:e})}),[Pe,De]),_t=(0,a.useMemo)((()=>e=>J.Z.request({url:K.Z.NewComment.url({}),method:K.Z.NewComment.method,data:{[`${Pe.type}`]:Pe.id,text:e}}).then((e=>e.status>=300?Promise.reject(e):Promise.resolve(e.data)))),[Se]),Tt=e=>{_e.user?Oe.IT(_e.user)?Te((0,o.jsx)(H.Z,{id:"ui.common.userBlocked",defaultMessage:"ui.common.userBlocked"}),{variant:"warning",autoHideDuration:3e3}):(We(!0),_t(e).then((e=>{const t=e;t.summary_truncated=!1,qe!==L.F.RECENT_COMMENTS?(ze([]),Ye(L.F.RECENT_COMMENTS)):ze([t,...Ge]),We(!1);const s=Object.assign({},Pe,{comment_count:Pe.comment_count+1});rt(s),Le.ZP.deleteKeysWithPrefix(Ue.NX(Pe.id,Pe.type)),fe&&fe(e),at({activitiesExpanded:De,activitiesExpandedType:L.F.RECENT_COMMENTS})})).catch((e=>{Q.Y.error(ee.J,e),(0,nt.w)(e,_e.managers.blockedUsers.isBlocked(Pe.author),Te)||Te((0,o.jsx)(H.Z,{id:"ui.common.error.action",defaultMessage:"ui.common.error.action"}),{variant:"error",autoHideDuration:3e3})}))):Ee.settings.handleAnonymousAction()},At=(0,a.useCallback)(((e,t)=>{const s="summary_html"in e?e.summary_html:e.summary,n="summary_truncated"in e?e.summary_truncated:e.html.length>=Ht.zo,a=Xe||t===L.r.DETAIL?(0,D.P3)(e.html,Ne.url):(0,D.P3)(s,Ne.url);return t===L.r.SHARE?(0,o.jsxs)(B.Z,Object.assign({to:Ne.url((0,D.Ig)(e),(0,D.p3)(e)),className:ts.text},{children:[(0,o.jsx)(r.Z,{component:"span",className:ts.text,variant:"body2",gutterBottom:!0,dangerouslySetInnerHTML:{__html:a}}),!Xe&&n&&(0,o.jsx)(l.Z,Object.assign({size:"small",variant:"text",color:"inherit",className:ts.showMore,onClick:mt},{children:(0,o.jsx)(H.Z,{id:"ui.feedObject.content.showMore",defaultMessage:"ui.feedObject.content.showMore"})}))]})):t===L.r.DETAIL?(0,o.jsx)(r.Z,{component:"div",gutterBottom:!0,className:ts.text,dangerouslySetInnerHTML:{__html:a}}):(0,o.jsxs)(r.Z,Object.assign({component:"div",gutterBottom:!0,className:ts.text},{children:[(0,o.jsx)(r.Z,{component:"span",dangerouslySetInnerHTML:{__html:a}}),!Xe&&n&&(0,o.jsx)(l.Z,Object.assign({size:"small",variant:"text",color:"inherit",className:ts.showMore,onClick:mt},{children:(0,o.jsx)(H.Z,{id:"ui.feedObject.content.showMore",defaultMessage:"ui.feedObject.content.showMore"})}))]}))}),[Pe,z,Xe]);let Pt;return Pt=!Pe&&ke||(null==Pe?void 0:Pe.deleted)&&!_e.user&&!Oe.GJ(_e.user)&&!Oe.vJ(_e.user)?(0,o.jsx)(c.Z,Object.assign({className:N()(ts.error,ts.content)},{children:(0,o.jsx)(H.Z,{id:"ui.feedObject.error",defaultMessage:"ui.feedObject.error"})})):z===L.r.PREVIEW||z===L.r.DETAIL||z===L.r.SEARCH?(0,o.jsx)(a.Fragment,{children:Pe?(0,o.jsxs)(d.Z,Object.assign({className:N()({[ts.deleted]:Pe&&Pe.deleted})},{children:[Pe.categories.length>0&&(0,o.jsxs)("div",Object.assign({className:ts.category},{children:[(0,o.jsxs)(o.Fragment,{children:[Pe.group&&(0,o.jsx)(u.Z,{className:ts.group,color:"secondary",size:"small",icon:(0,o.jsx)(m.Z,{children:"groups"}),component:B.Z,to:Ne.url(ft.GROUP_ROUTE_NAME,Pe.group),clickable:!0},Pe.group.id),Pe.event&&(0,o.jsx)(u.Z,{className:ts.event,color:"secondary",size:"small",label:Pe.event.name,icon:(0,o.jsx)(m.Z,{children:"CalendarIcon"}),component:B.Z,to:Ne.url(ft.EVENT_ROUTE_NAME,Pe.event),clickable:!0},Pe.event.id)]}),Pe.categories.map((e=>(0,o.jsx)(B.Z,Object.assign({to:Ne.url(ft.CATEGORY_ROUTE_NAME,e)},{children:(0,o.jsx)(r.Z,Object.assign({variant:"overline"},{children:e.name}))}),e.id)))]})),Pe.group&&!Pe.categories.length&&(0,o.jsx)("div",Object.assign({className:ts.group},{children:(0,o.jsx)(u.Z,{color:"secondary",size:"small",icon:(0,o.jsx)(m.Z,{children:"groups"}),label:Pe.group.name,component:B.Z,to:Ne.url(ft.GROUP_ROUTE_NAME,Pe.group),clickable:!0},Pe.group.id)})),Pe.event&&!Pe.categories.length&&(0,o.jsx)(u.Z,{className:ts.event,color:"secondary",size:"small",icon:(0,o.jsx)(m.Z,{children:"CalendarIcon"}),label:Pe.event.name,component:B.Z,to:Ne.url(ft.EVENT_ROUTE_NAME,Pe.event),clickable:!0},Pe.event.id),(0,o.jsx)(g.Z,{className:ts.header,avatar:(0,o.jsx)(B.Z,Object.assign({},!Pe.author.deleted&&{to:Ne.url(ft.USER_PROFILE_ROUTE_NAME,Pe.author)},{onClick:Pe.author.deleted?()=>Re(!0):null},{children:(0,o.jsx)(zt.Z,Object.assign({hide:!Pe.author.community_badge},{children:(0,o.jsx)(p.Z,Object.assign({"aria-label":"recipe",src:Pe.author.avatar,className:ts.avatar},{children:Pe.author.username}))}))})),title:(0,o.jsx)(B.Z,Object.assign({},!Pe.author.deleted&&{to:Ne.url(ft.USER_PROFILE_ROUTE_NAME,Pe.author)},{onClick:Pe.author.deleted?()=>Re(!0):null,className:ts.username},{children:Pe.author.username})),subheader:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(B.Z,Object.assign({to:Ne.url((0,D.Ig)(Pe),(0,D.p3)(Pe)),className:ts.activityAt},{children:(0,o.jsx)(O.Z,{component:"span",date:Pe.added_at})})),Pe.location&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(x.Z,{}),(0,o.jsxs)(d.Z,Object.assign({className:ts.location},{children:[(0,o.jsx)(m.Z,{children:"add_location_alt"}),null===(t=Pe.location)||void 0===t?void 0:t.location]}))]}),(0,o.jsx)(x.Z,{}),(0,o.jsx)(d.Z,Object.assign({className:ts.tag},{children:Pe.addressing.length>0?(0,o.jsx)(y.Z,{tags:Pe.addressing,TagChipProps:{disposable:!1,clickable:!1}}):Pe.group?(0,o.jsx)(j.Z,Object.assign({title:`${ot.formatMessage(es.visibleToGroup,{group:Pe.group.name})}`},{children:(0,o.jsx)(m.Z,Object.assign({color:"disabled",fontSize:"small"},{children:"groups"}))})):(0,o.jsx)(j.Z,Object.assign({title:`${ot.formatMessage(es.visibleToAll)}`},{children:(0,o.jsx)(m.Z,Object.assign({color:"disabled",fontSize:"small"},{children:"public"}))}))}))]}),action:(0,o.jsx)(st.Z,Object.assign({feedObject:Pe,feedObjectType:R,onEditContribution:Ot,onHideContribution:jt,onDeleteContribution:ht,onRestoreContribution:pt,onSuspendNotificationContribution:bt,onFlagContribution:gt},de))}),(0,o.jsxs)(c.Z,Object.assign({classes:{root:ts.content}},{children:[(0,o.jsx)(d.Z,Object.assign({className:ts.titleSection},{children:"title"in Pe&&(0,o.jsx)(o.Fragment,{children:z===L.r.DETAIL?(0,o.jsx)(r.Z,Object.assign({variant:"body1",gutterBottom:!0,className:ts.title},{children:Pe.title})):(0,o.jsx)(B.Z,Object.assign({to:Ne.url((0,D.Ig)(Pe),(0,D.p3)(Pe))},{children:(0,o.jsx)(r.Z,Object.assign({variant:"body1",gutterBottom:!0,className:ts.title},{children:Pe.title}))}))})})),(0,o.jsx)(d.Z,Object.assign({className:ts.textSection},{children:At(Pe,z)})),(0,o.jsx)(d.Z,Object.assign({className:ts.mediasSection},{children:(0,o.jsx)(Qt,Object.assign({medias:Pe.medias},ue))})),(0,o.jsx)(d.Z,Object.assign({className:ts.pollsSection},{children:Pe.poll&&(0,o.jsx)(Fe,Object.assign({visible:se||z===L.r.DETAIL||Boolean(Pe.type!==F.q.DISCUSSION&&!Pe.html&&!Pe.medias.length),feedObject:Pe,pollObject:Pe.poll,onChange:dt,onToggleVisibility:ut},je))})),(0,o.jsx)(d.Z,Object.assign({className:ts.infoSection},{children:(0,o.jsxs)(h.Z,Object.assign({direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2},{children:[!te&&(0,o.jsx)(et,Object.assign({feedObject:Pe,feedObjectType:Pe.type},be,{cacheStrategy:V})),!Qe&&(0,o.jsx)(it,Object.assign({feedObject:Pe,feedObjectType:Pe.type,handleFollow:Ct},ne))]}))}))]})),(0,o.jsxs)(b.Z,Object.assign({className:ts.actionsSection},{children:[(0,o.jsx)(Ae,Object.assign({feedObjectId:k,feedObjectType:R,feedObject:Pe,hideCommentAction:z===L.r.DETAIL||Je&&!(null===(i=null===(s=null==Pe?void 0:Pe.medias[0].embed)||void 0===s?void 0:s.metadata)||void 0===i?void 0:i.active),handleExpandActivities:z===L.r.PREVIEW?Zt:null,VoteActionProps:{onVoteAction:yt}},ae)),(z===L.r.DETAIL&&(!Je||(null===(_=null===(E=null===(C=null===(Z=null==Pe?void 0:Pe.medias)||void 0===Z?void 0:Z[0])||void 0===C?void 0:C.embed)||void 0===E?void 0:E.metadata)||void 0===_?void 0:_.active))||De)&&(0,o.jsx)(d.Z,Object.assign({className:ts.replyContent},{children:(0,o.jsx)(ie,Object.assign({id:`reply-feedObject-${Pe.id}`,onReply:Tt,editable:!He||Boolean(Pe)},re),Number(He))}))]})),z===L.r.PREVIEW&&(Pe.comment_count>0||U&&U.length>0)&&(0,o.jsx)(f.Z,Object.assign({in:De,timeout:"auto",classes:{root:ts.activitiesSection}},{children:(0,o.jsx)(c.Z,Object.assign({className:ts.activitiesContent},{children:(0,o.jsx)(Vt,Object.assign({feedObject:Pe,feedObjectActivities:U,activitiesType:qe,onSetSelectedActivities:Nt,comments:Ge,CommentsObjectProps:{CommentComponentProps:Object.assign({onDelete:Et,truncateContent:!0,CommentsObjectComponentProps:{inPlaceLoadMoreContents:!1}},le),CommentObjectSkeletonProps:ce},cacheStrategy:V},pe),qe)}))})),Ie&&(0,o.jsx)(ye.Z,{open:Ie,feedObject:Pe,onClose:Ot,onSuccess:xt,maxWidth:"sm",fullWidth:!0})]})):(0,o.jsx)(v.Z,Object.assign({template:z},oe))}):z===L.r.SHARE?(0,o.jsx)(a.Fragment,{children:Pe?(0,o.jsxs)(a.Fragment,{children:[Pe.categories.length>0&&(0,o.jsxs)("div",Object.assign({className:ts.category},{children:[(0,o.jsxs)(o.Fragment,{children:[Pe.group&&(0,o.jsx)("div",Object.assign({className:ts.group},{children:(0,o.jsx)(u.Z,{color:"secondary",size:"small",icon:(0,o.jsx)(m.Z,{children:"groups"}),component:B.Z,to:Ne.url(ft.GROUP_ROUTE_NAME,Pe.group),clickable:!0},Pe.group.id)})),Pe.event&&(0,o.jsx)(u.Z,{className:ts.event,color:"secondary",size:"small",icon:(0,o.jsx)(m.Z,{children:"CalendarIcon"}),component:B.Z,to:Ne.url(ft.EVENT_ROUTE_NAME,Pe.event),clickable:!0},Pe.event.id)]}),Pe.categories.map((e=>(0,o.jsx)(B.Z,Object.assign({to:Ne.url(ft.CATEGORY_ROUTE_NAME,e)},{children:(0,o.jsx)(r.Z,Object.assign({variant:"overline"},{children:e.name}))}),e.id)))]})),Pe.group&&!Pe.categories.length&&(0,o.jsx)("div",Object.assign({className:ts.group},{children:(0,o.jsx)(u.Z,{color:"secondary",size:"small",icon:(0,o.jsx)(m.Z,{children:"groups"}),label:Pe.group.name,component:B.Z,to:Ne.url(ft.GROUP_ROUTE_NAME,Pe.group),clickable:!0},Pe.group.id)})),Pe.event&&!Pe.categories.length&&(0,o.jsx)("div",Object.assign({className:ts.event},{children:(0,o.jsx)(u.Z,{color:"secondary",size:"small",icon:(0,o.jsx)(m.Z,{children:"groups"}),label:Pe.event.name,component:B.Z,to:Ne.url(ft.EVENT_ROUTE_NAME,Pe.event),clickable:!0},Pe.event.id)})),(0,o.jsx)(g.Z,{classes:{root:ts.header},avatar:(0,o.jsx)(B.Z,Object.assign({},!Pe.author.deleted&&{to:Ne.url(ft.USER_PROFILE_ROUTE_NAME,Pe.author)},{onClick:Pe.author.deleted?()=>Re(!0):null,className:ts.username},{children:(0,o.jsx)(zt.Z,Object.assign({hide:!Pe.author.community_badge},{children:(0,o.jsx)(p.Z,Object.assign({"aria-label":"recipe",src:Pe.author.avatar,className:ts.avatar},{children:Pe.author.username}))}))})),title:(0,o.jsx)(B.Z,Object.assign({},!Pe.author.deleted&&{to:Ne.url(ft.USER_PROFILE_ROUTE_NAME,Pe.author)},{onClick:Pe.author.deleted?()=>Re(!0):null,className:ts.username},{children:Pe.author.username})),subheader:(0,o.jsx)(B.Z,Object.assign({to:Ne.url((0,D.Ig)(Pe),(0,D.p3)(Pe)),className:ts.activityAt},{children:(0,o.jsx)(O.Z,{date:Pe.added_at})}))}),(0,o.jsxs)(c.Z,Object.assign({classes:{root:ts.content}},{children:[(0,o.jsx)(d.Z,Object.assign({className:ts.titleSection},{children:"title"in Pe&&(0,o.jsx)(B.Z,Object.assign({to:Ne.url((0,D.Ig)(Pe),(0,D.p3)(Pe))},{children:(0,o.jsx)(r.Z,Object.assign({variant:"body1",gutterBottom:!0,className:ts.title},{children:Pe.title}))}))})),(0,o.jsx)(d.Z,Object.assign({className:ts.textSection},{children:At(Pe,z)})),(0,o.jsx)(d.Z,Object.assign({className:ts.mediasSection},{children:(0,o.jsx)(Qt,Object.assign({medias:Pe.medias},ue))})),(0,o.jsx)(d.Z,Object.assign({className:ts.pollsSection},{children:Pe.poll&&(0,o.jsx)(Fe,Object.assign({feedObject:Pe,pollObject:Pe.poll,onChange:dt,visible:Boolean(Pe.type!==F.q.DISCUSSION&&!Pe.html&&!Pe.medias.length)},je))}))]}))]}):(0,o.jsx)(v.Z,Object.assign({template:z},oe))}):(0,o.jsx)(a.Fragment,{children:Pe?(0,o.jsx)(ct.Z,{elevation:0,className:ts.snippet,image:(0,o.jsx)(B.Z,Object.assign({},!Pe.author.deleted&&{to:Ne.url(ft.USER_PROFILE_ROUTE_NAME,Pe.author)},{onClick:Pe.author.deleted?()=>Re(!0):null},{children:(0,o.jsx)(zt.Z,Object.assign({hide:!Pe.author.community_badge},{children:(0,o.jsx)(p.Z,{alt:Pe.author.username,variant:"circular",src:Pe.author.avatar,className:ts.avatar})}))})),primary:(0,o.jsxs)(d.Z,{children:[(0,o.jsx)(B.Z,Object.assign({},!Pe.author.deleted&&{to:Ne.url(ft.USER_PROFILE_ROUTE_NAME,Pe.author)},{onClick:Pe.author.deleted?()=>Re(!0):null,className:ts.username},{children:Pe.author.username})),(0,o.jsx)(r.Z,Object.assign({variant:"body2",className:ts.snippetContent},{children:(0,o.jsx)(B.Z,Object.assign({to:Ne.url((0,D.Ig)(Pe),(0,D.p3)(Pe))},{children:(0,D.cO)(Pe)}))}))]}),disableTypography:!0,secondary:(0,o.jsxs)(h.Z,Object.assign({direction:"row",justifyContent:"space-between",spacing:2,alignItems:"center"},{children:[(0,o.jsx)(B.Z,Object.assign({to:Ne.url((0,D.Ig)(Pe),(0,D.p3)(Pe)),className:ts.activityAt},{children:(0,o.jsx)(O.Z,{component:"span",date:Pe.added_at})})),(0,o.jsx)(l.Z,Object.assign({component:B.Z,to:Ne.url((0,D.Ig)(Pe),(0,D.p3)(Pe)),variant:"text",color:"secondary",size:"small"},{children:(0,o.jsx)(H.Z,{id:"ui.feedObject.comment",defaultMessage:"ui.feedObject.comment"})}))]}))}):(0,o.jsx)(v.Z,Object.assign({},oe))}),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(ss,Object.assign({id:P,className:N()(ts.root,w,`${A.B}-${z}`)},Ce,{children:[Pe&&G&&(0,o.jsx)(tt.Z,{endpoint:K.Z.FeedObjectMarkRead,data:{object:[Pe.id]}}),Pt]})),Me&&(0,o.jsx)(vt.Z,{open:Me,handleClose:()=>Re(!1)})]})}},88304:(e,t,s)=>{"use strict";s.d(t,{Z:()=>x});var n=s(97582),o=s(85893),a=s(67294),i=s(44012),r=s(90948),l=s(6208),c=s(61903),d=s(98456),u=s(24243),m=s(24085),g=s(23370),p=s.n(g),j=s(11447),h=s.n(j),b=s(29360);const f="SCLocationAutocomplete",v={root:`${f}-root`},O=(0,r.ZP)(l.Z,{name:f,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({minWidth:120})));const x=function(e){const t=(0,b.Z)({props:e,name:f}),{defaultValue:s=null,disabled:r=!1,onChange:l,TextFieldProps:g={variant:"outlined",label:(0,o.jsx)(i.Z,{id:"ui.locationAutocomplete.label",defaultMessage:"ui.composer.locations.label"})}}=t,j=(0,n._T)(t,["defaultValue","disabled","onChange","TextFieldProps"]),[x,y]=(0,a.useState)(!1),[Z,C]=(0,a.useState)([]),[E,N]=(0,a.useState)(s),[_,T]=(0,a.useState)("");(0,a.useEffect)((()=>{!x&&_.trim().length>0&&((e=0,t=20)=>{u.Z.request({url:m.Z.ComposerLocalitySearch.url(),method:m.Z.ComposerLocalitySearch.method,params:{offset:e,limit:t,search:_.trim()}}).then((e=>{C(e.data.results)})).then((()=>y(!1)))})()}),[_]),(0,a.useEffect)((()=>{E&&l&&l(E)}),[E]);const A=(0,a.useMemo)((()=>!E||"string"==typeof E||Z.find((e=>E.lat===e.lat&&E.lng===e.lng))?Z:[...Z,{lat:E.lat,lng:E.lng,full_address:E.location}]),[E,Z]);return(0,o.jsx)(O,Object.assign({className:v.root,options:A||[],getOptionLabel:e=>(null==e?void 0:e.full_address)||(null==e?void 0:e.location)||"",filterOptions:e=>e,autoComplete:!0,includeInputInList:!0,value:E||null,selectOnFocus:!0,handleHomeEndKeys:!0,disabled:r,noOptionsText:(0,o.jsx)(i.Z,{id:"ui.locationAutocomplete.empty",defaultMessage:"ui.locationAutocomplete.empty"}),onChange:(e,t)=>{N(t?{location:t.full_address,lat:t.lat,lng:t.lng}:null),l&&l(t)},onInputChange:(e,t)=>{T(t)},isOptionEqualToValue:(e,t)=>t.lat===e.lat&&t.lng===e.lng,renderInput:e=>(0,o.jsx)(c.Z,Object.assign({},e,g,{margin:"dense",InputProps:Object.assign(Object.assign({},e.InputProps),{autoComplete:"location",endAdornment:(0,o.jsxs)(a.Fragment,{children:[x?(0,o.jsx)(d.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})})),renderOption:(e,t,{inputValue:s})=>{const n=h()(t.full_address,s),a=p()(t.full_address,n);return(0,o.jsx)("li",Object.assign({},e,{style:{whiteSpace:"break-spaces"}},{children:a.map(((e,t)=>e.highlight?(0,o.jsx)("span",Object.assign({style:{fontWeight:700}},{children:e.text}),t):e.text))}),`${t.lat}_${t.lng}`)}},j))}},55218:(e,t,s)=>{"use strict";s.d(t,{EH:()=>n,qZ:()=>o,zo:()=>a});const n="widget_",o=10,a=150},38308:(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var n=s(85893),o=s(67294),a=s(24243),i=s(1216);const r=[200,200],l=e=>{const{endpoint:t,params:s={},callback:n,data:i=null}=e,r=()=>{a.Z.request({url:t.url(s),method:t.method,data:i}).then((e=>{n&&n(e)})).catch((()=>null))};return(0,o.useEffect)((()=>{let e;if(t)return e=setTimeout(r),()=>{e&&clearTimeout(e)}}),[]),null},c=e=>(0,n.jsx)(i.ZP,Object.assign({once:!0,offset:r},{children:(0,n.jsx)(l,Object.assign({},e))}))},62887:(e,t,s)=>{"use strict";s.d(t,{Z:()=>J});var n=s(85893),o=s(90948),a=s(94253),i=s(67564),r=s(15861),l=s(86886),c=s(93946),d=s(97265),u=s(20819),m=s.n(u),g=s(57250),p=s(67294),j=s(97650),h=s(97582),b=s(20366),f=s(87307);const v={root:`${f.B}-lightbox-root`},O=(0,o.ZP)(b.Z,{name:f.B,slot:"LightboxRoot"})((()=>({})));function x(e){const{medias:t=[],index:s=0,toolbarButtons:o,onClose:a,onIndexChange:i}=e,r=(0,h._T)(e,["medias","index","toolbarButtons","onClose","onIndexChange"]),l=(0,p.useCallback)(((e,t)=>({src:e.image,width:e.image_width,height:e.image_height,key:t})),[]);return(0,n.jsx)(O,Object.assign({},r,{className:v.root,images:t.map(l),visible:-1!==s,onClose:a,index:s,onIndexChange:i,toolbarButtons:o}))}var y=s(82947),Z=s(61025);const C={displayRoot:`${y.B}-display-root`,background:`${y.B}-background`,backgroundPortrait:`${y.B}-background-portrait`,heightOne:`${y.B}-height-one`,heightHalfOne:`${y.B}-height-half-one`,heightTwo:`${y.B}-height-two`,heightThree:`${y.B}-height-three`,cover:`${y.B}-cover`,coverText:`${y.B}-cover-text`,slide:`${y.B}-slide`,border:`${y.B}-border`,gallery:`${y.B}-gallery`,title:`${y.B}-title`,iconFile:`${y.B}-icon-file`},E=(0,o.ZP)(a.Z,{name:y.B,slot:"DisplayRoot"})((({})=>({})));var N=s(44652),_=s(25464),T=s(98619),A=s(18972),P=s(2734),w=s(37292),k=s(97212),S=s(98456),M=s(78462),R=s(62254),$=s(44012),I=s(63862),B=s(41567),F=s(24085),L=s(99626);const D=(e,t)=>{const s=(s,o)=>{const{showFileUpload:a,getInternalFileInput:i}=(0,L.uO)(),{id:r,className:l,text:c,children:d,extraProps:u,onClick:m}=s,g=(0,h._T)(s,["id","className","text","children","extraProps","onClick"]),j=(0,p.useRef)();j.current=g;const b=(0,p.useCallback)((e=>{const s=i();s.current.accept=t.accept,t.capture?s.current.capture=t.capture:s.current.removeAttribute("capture"),a(j.current),null==m||m(e)}),[i,a,j,m]);return(0,n.jsx)(e,Object.assign({ref:o,onClick:b,id:r,className:l,children:d||c||"Upload"},u))};return(0,L.zD)(s),(0,p.forwardRef)(s)};var U=s(20377);const V={triggerRoot:`${y.B}-trigger-root`,triggerDrawerRoot:`${y.B}-trigger-drawer-root`,triggerMenuRoot:`${y.B}-trigger-menu-root`,paper:`${y.B}-paper`,item:`${y.B}-item`},G=(0,o.ZP)(c.Z,{name:y.B,slot:"TriggerRoot"})((()=>({}))),z=(0,o.ZP)(N.Z,{name:y.B,slot:"TriggerDrawerRoot"})((()=>({}))),H=(0,o.ZP)(_.Z,{name:y.B,slot:"TriggerMenuRoot"})((()=>({}))),W=D((0,p.forwardRef)(((e,t)=>(0,n.jsx)(T.Z,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:"image/*",capture:"camera"}),q=D((0,p.forwardRef)(((e,t)=>(0,n.jsx)(T.Z,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:"image/*"}),Y=D((0,p.forwardRef)(((e,t)=>(0,n.jsx)(T.Z,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:"application/pdf"}),X=D((0,p.forwardRef)(((e,t)=>(0,n.jsx)(A.Z,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:"image/*"}),K=D((0,p.forwardRef)(((e,t)=>(0,n.jsx)(A.Z,Object.assign({},e,{"aria-label":"upload",ref:t})))),{accept:"application/pdf"});const J={name:"file",displayComponent:e=>{const{className:t="",medias:s=[],maxVisible:o=5,gallery:a=!0,onMediaClick:u=null}=e,[h,b]=(0,p.useState)(-1),[f,v]=(0,p.useState)(void 0),{ref:O,inView:y}=(0,j.YD)({triggerOnce:!1}),N=(0,p.useMemo)((()=>s.filter(Z.Z)),[s]),_=(e,t=!1)=>{if("object"==typeof e){const s=e.image_thumbnail?e.image_thumbnail.url:e.image?e.image:"/static/frontend_v2/images/image.svg";return t&&e.image?e.image:s}return e},T=(0,p.useCallback)((e=>{!1!==a&&(b(e),u(N[e]))}),[N]),A=e=>{if(!e)return null;let t=null;if(e.type)if("doc"===e.type)t=(0,n.jsx)(i.Z,Object.assign({className:C.iconFile},{children:"picture_as_pdf"}));else t=(0,n.jsx)(i.Z,Object.assign({className:C.iconFile},{children:"insert_drive_file"}));return(0,n.jsx)(p.Fragment,{children:e.title&&(0,n.jsx)("div",Object.assign({className:C.title},{children:(0,n.jsxs)(r.Z,Object.assign({variant:"subtitle2"},{children:[t," ",e.title]}))}))})},P=e=>a?[(0,n.jsx)("div",{className:m()(C.cover,C.slide)},`cover-${e}`),(0,n.jsx)("div",Object.assign({className:m()(C.coverText,C.slide,"animate-text"),style:{fontSize:"100%"}},{children:(0,n.jsx)(i.Z,{children:"zoom_out_map"})}),`cover-text-${e}`)]:null,w=e=>{const t=N.length-(o&&o>5?5:o);return[e&&(0,n.jsx)("div",{className:C.cover},"count"),e&&(0,n.jsx)("div",Object.assign({className:C.coverText,style:{fontSize:"200%"}},{children:(0,n.jsxs)("p",{children:["+",t]})}),"count-sub")]},k=(0,p.useCallback)((e=>{N[e].type===g.oP?v((0,n.jsx)(c.Z,Object.assign({component:d.Z,to:s[e].url,target:"_blank",color:"inherit"},{children:(0,n.jsx)(i.Z,{children:"download"})}))):v(void 0)}),[N,v]);(0,p.useEffect)((()=>{-1!==h&&k(h)}),[h]);const S=[...N];return o&&N.length>o&&(S.length=o),0===N.length?null:(0,n.jsxs)(E,Object.assign({className:m()(C.displayRoot,t)},{children:[[1,3,4].includes(S.length)&&(()=>{const e=N.length>o&&1==o?w(!0):P(0),t=!!N[0].image_mimetype&&N[0].image_mimetype.includes("image/gif"),s=N[0].image_height<N[0].image_width;return(0,n.jsx)(l.ZP,Object.assign({container:!0,style:Object.assign({},N[0].image_thumbnail&&N[0].image_thumbnail.color?{backgroundColor:N[0].image_thumbnail.color}:{})},{children:(0,n.jsxs)(l.ZP,Object.assign({item:!0,ref:O,xs:12,classes:{root:m()(C.border,C.heightOne,Object.assign(Object.assign({},t||s?{[C.background]:!0}:{[C.backgroundPortrait]:!0}),{[C.gallery]:a,[C.heightHalfOne]:N.length>1}))},onClick:()=>T(0),style:Object.assign({background:`url(${_(N[0],y&&t)})`},s?{paddingTop:100*N[0].image_height/N[0].image_width+"%"}:{})},{children:[e,A(N[0])]}))}))})(),S.length>=2&&4!=S.length&&(()=>{const e=N.length>o&&[2,3].includes(+o)?w(!0):P(1),t=[3,4].includes(N.length)||N.length>+o&&[3,4].includes(+o);return(0,n.jsxs)(l.ZP,Object.assign({container:!0},{children:[(0,n.jsxs)(l.ZP,Object.assign({item:!0,xs:6,classes:{root:m()(C.border,C.heightTwo,C.background,{[C.gallery]:a})},onClick:()=>T(t?1:0),style:{background:`url(${_(t?N[1]:N[0])})`}},{children:[P(t?1:0),A(N[0])]})),(0,n.jsxs)(l.ZP,Object.assign({item:!0,xs:6,classes:{root:m()(C.border,C.heightTwo,C.background,{[C.gallery]:a})},onClick:()=>T(t?2:1),style:{background:`url(${_(t?N[2]:N[1])})`}},{children:[e,A(N[1])]}))]}))})(),S.length>=4&&(()=>{const e=4==N.length||N.length>+o&&4==+o,t=!o||o>5||N.length>o&&[4,5].includes(+o)?w(!0):P(e?3:4);return(0,n.jsxs)(l.ZP,Object.assign({container:!0},{children:[(0,n.jsxs)(l.ZP,Object.assign({item:!0,xs:4,md:4,classes:{root:m()(C.border,C.heightThree,C.background,{[C.gallery]:a})},onClick:()=>T(e?1:2),style:{background:`url(${_(e?N[1]:N[2])})`}},{children:[P(e?1:2),A(N[1])]})),(0,n.jsxs)(l.ZP,Object.assign({item:!0,xs:4,md:4,classes:{root:m()(C.border,C.heightThree,C.background,{[C.gallery]:a})},onClick:()=>T(e?2:3),style:{background:`url(${_(e?N[2]:N[3])})`}},{children:[P(e?2:3),A(N[2])]})),(0,n.jsxs)(l.ZP,Object.assign({item:!0,xs:4,md:4,classes:{root:m()(C.border,C.heightThree,C.background,{[C.gallery]:a})},onClick:()=>T(e?3:4),style:{background:`url(${_(e?N[3]:N[4])})`}},{children:[t,A(N[3])]}))]}))})(),-1!==h&&(0,n.jsx)(x,{onClose:()=>{b(-1),v(void 0)},index:h,medias:N,toolbarButtons:f,onIndexChange:k})]}))},triggerButton:e=>{var{className:t,onAdd:s=null}=e,o=(0,h._T)(e,["className","onAdd"]);const[a,r]=(0,p.useState)(null),[l,c]=(0,p.useState)(!1),d=(0,R.RM)(),u=(0,P.Z)(),g=(0,w.Z)(u.breakpoints.down("md")),{enqueueSnackbar:j,closeSnackbar:b}=(0,U.Ds)(),f=(0,p.useCallback)((e=>{r(e.currentTarget)}),[]),v=(0,p.useCallback)((()=>{r(null)}),[]),O=(0,p.useCallback)((e=>e.type.startsWith("image/")||"application/pdf"===e.type),[]),x=(0,p.useCallback)((e=>{s&&s(e)}),[s]),y=(0,p.useCallback)((e=>{c(Object.keys(e).length>0)}),[]),Z=(0,p.useCallback)(((e,t)=>{const s=j(`${e.name}: ${t}`,{variant:"error",anchorOrigin:{horizontal:"center",vertical:"top"},autoHideDuration:2e3,SnackbarProps:{onClick:()=>{b(s)}}})}),[j]),C=(0,p.useMemo)((()=>g?[(0,n.jsx)(k.ZP,Object.assign({className:V.item},{children:(0,n.jsx)(W,Object.assign({inputFieldName:"image"},{children:(0,n.jsx)($.Z,{id:"ui.composer.media.file.photo",defaultMessage:"ui.composer.media.file.photo"})}))}),"photo"),(0,n.jsx)(k.ZP,Object.assign({className:V.item},{children:(0,n.jsx)(q,Object.assign({inputFieldName:"image"},{children:(0,n.jsx)($.Z,{id:"ui.composer.media.file.gallery",defaultMessage:"ui.composer.media.file.gallery"})}))}),"gallery"),(0,n.jsx)(k.ZP,Object.assign({className:V.item},{children:(0,n.jsx)(Y,Object.assign({inputFieldName:"document"},{children:(0,n.jsx)($.Z,{id:"ui.composer.media.file.document",defaultMessage:"ui.composer.media.file.document"})}))}),"document")]:[(0,n.jsx)(X,Object.assign({extraProps:{className:V.item},inputFieldName:"image"},{children:(0,n.jsx)($.Z,{id:"ui.composer.media.file.gallery",defaultMessage:"ui.composer.media.file.gallery"})}),"gallery"),(0,n.jsx)(K,Object.assign({extraProps:{className:V.item},inputFieldName:"document"},{children:(0,n.jsx)($.Z,{id:"ui.composer.media.file.document",defaultMessage:"ui.composer.media.file.document"})}),"document")]),[g,O,x,y,Z]);return(0,n.jsxs)(B.ZP,Object.assign({destination:{url:`${d.settings.portal}${F.Z.ComposerChunkUploadMedia.url()}`,method:F.Z.ComposerChunkUploadMedia.method},fileFilter:O,chunkSize:204800,multiple:!0},{children:[(0,n.jsx)(I.Z,{onSuccess:x,onProgress:y,onError:Z}),(0,n.jsx)(G,Object.assign({className:m()(t,V.triggerRoot)},o,{"aria-label":"add media",disabled:l,onClick:f},{children:l?(0,n.jsx)(S.Z,{size:20}):(0,n.jsx)(i.Z,{children:"photo_file"})})),g?(0,n.jsx)(z,Object.assign({onClick:()=>r(null),className:V.triggerDrawerRoot,anchor:"bottom",open:Boolean(a),onClose:v,onOpen:f,PaperProps:{className:V.paper},disableSwipeToOpen:!0},{children:(0,n.jsx)(M.Z,{children:C})})):(0,n.jsx)(H,Object.assign({onClick:()=>r(null),className:V.triggerMenuRoot,anchorEl:a,open:Boolean(a),onClose:v,PaperProps:{className:V.paper}},{children:C}))]}))},layerComponent:null,previewComponent:s(97099).Z,filter:Z.Z}},70815:(e,t,s)=>{"use strict";s.d(t,{Z:()=>V});var n=s(97582),o=s(85893),a=s(67294),i=s(57250),r=s(67742),l=s(20819),c=s.n(l);const d="SCMediaLink";var u=s(90948),m=s(94253),g=s(98456);const p=e=>e.type===i.Rj&&e.embed&&e.embed.embed_type===i.LP,j={displayRoot:`${d}-display-root`,displayLink:`${d}-link`,displayHtmlWrap:`${d}-html-wrap`,displayHtml:`${d}-html`,displayHtmlPlaceholder:`${d}-html-placeholder`,displayHtmlLoading:`${d}-html-loading`,displayVideo:`${d}-video`,thumbnail:`${d}-thumbnail`,thumbnailFullWidth:`${d}-thumbnail`,image:`${d}-image`,snippet:`${d}-snippet`,snippetTitle:`${d}-snippet-title`,snippetDescription:`${d}-snippet-description`},h=(0,u.ZP)(m.Z,{name:d,slot:"DisplayRoot"})((({theme:e})=>({}))),b=e=>{const{className:t="",medias:s,fullWidth:l=!1,onMediaClick:d=null}=e,u=(0,n._T)(e,["className","medias","fullWidth","onMediaClick"]),g=e=>{d&&d(e)},b=(0,a.useMemo)((()=>s.filter(p)),[s]),f=(e,t)=>{const s=new URL(e.embed.metadata.url).hostname.replace("www.","");return(0,o.jsxs)(m.Z,Object.assign({className:j.displayLink},{children:[e.embed.metadata.images&&e.embed.metadata.images.length>0&&(0,o.jsx)(o.Fragment,{children:l?(0,o.jsx)(m.Z,{className:c()(j.thumbnailFullWidth,j.image),style:{background:`url(${e.image})`,paddingBottom:100/e.image_width/e.image_height+"%"}}):(0,o.jsx)(m.Z,{className:c()(j.thumbnail,j.image),style:{background:`url(${e.image})`}})}),(0,o.jsxs)(m.Z,Object.assign({className:j.snippet},{children:[(0,o.jsx)("b",Object.assign({className:j.snippetTitle},{children:e.embed.metadata.title})),(0,o.jsx)("br",{}),(0,o.jsx)("p",Object.assign({className:j.snippetDescription},{children:e.embed.metadata.description})),(0,o.jsx)("a",Object.assign({href:e.embed.metadata.url,target:"_blank",onClick:()=>g(e)},{children:s}))]})),(0,o.jsx)("div",{style:{clear:"both"}})]}),t)};return 0===b.length?null:(0,o.jsx)(h,Object.assign({className:c()(t,j.displayRoot)},u,{children:b.map(((e,t)=>e.embed.metadata&&e.embed.metadata.type===i.iC?(0,o.jsx)(r.Z,{url:e.url,width:"100%",height:360,onVideoWatch:()=>g(e)},t):(0,o.jsx)(a.Fragment,{children:f(e,t)},t)))}))};var f=s(93946),v=s(67564);const O={triggerRoot:`${d}-trigger-root`},x=(0,u.ZP)(f.Z,{name:d,slot:"TriggerRoot"})((()=>({})));var y=s(44012),Z=s(37645),C=s(15861),E=s(25662),N=s(6514),_=s(16941);const T={previewRoot:`${d}-preview-root`,media:`${d}-media`,video:`${d}-media-video`,delete:`${d}-delete`},A=(0,u.ZP)(m.Z,{name:d,slot:"PreviewRoot"})((()=>({}))),P=a.forwardRef(((e,t)=>{const{className:s,onChange:r,value:l=[]}=e,d=(0,n._T)(e,["className","onChange","value"]),u=(0,a.useMemo)((()=>l.filter(p)),[l]),g=(0,a.useCallback)((e=>{r&&r([...l.filter((t=>-1===e.findIndex((e=>e.id===t.id)))),...e])}),[r,l]),j=(0,a.useCallback)((e=>()=>r&&r(l.filter((t=>t.id!==e)))),[r,l]);return(0,o.jsx)(A,Object.assign({ref:t,className:c()(s,T.previewRoot)},d,{children:u.length>0&&(0,o.jsx)(_.ReactSortable,Object.assign({list:u,setList:g},{children:u.map((e=>(0,o.jsxs)(m.Z,Object.assign({className:c()(T.media,{[T.video]:e.embed.metadata&&e.embed.metadata.type===i.iC})},{children:[(0,o.jsx)(b,{medias:[e]}),(0,o.jsx)(f.Z,Object.assign({className:T.delete,onClick:j(e.id),size:"small"},{children:(0,o.jsx)(v.Z,{children:"delete"})}))]}),e.id)))}))}))}));var w=s(61903),k=s(87109),S=s(16628),M=s(24243),R=s(24085),$=s(59488),I=s(79991);const B={url:"",urlError:null},F=e=>{var t,s;const[r,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(Object.assign({},B)),{url:u,urlError:m}=c,p=a.useRef(u);p.current=u;const j=a.useRef(null),{helperText:h,error:b,onSuccess:v}=e,O=(0,n._T)(e,["helperText","error","onSuccess"]);(0,a.useEffect)((()=>()=>clearTimeout(j.current)),[]);const x=e=>{e&&(e.preventDefault(),e.stopPropagation()),j.current&&clearTimeout(j.current),l(!0),M.Z.request({url:R.Z.ComposerMediaCreate.url(),method:R.Z.ComposerMediaCreate.method,data:{type:i.Rj,url:p.current}}).then((e=>{d(Object.assign({},B)),v&&v(e.data)})).catch((e=>{const t=(0,$.yt)(e);d({urlError:t.urlError?`urlError.${t.urlError.error}`:t.error,url:p.current})})).then((()=>l(!1)))};return(0,o.jsx)("form",Object.assign({method:"post",onSubmit:x},{children:(0,o.jsx)(w.Z,Object.assign({value:u,type:"url",onChange:e=>{const t=e.target,s=t.value.startsWith("h")?t.value:`https://${t.value}`;d({url:s,urlError:(0,I.jv)(s)?null:"validationError"})},onPaste:e=>{j.current&&clearTimeout(j.current),j.current=setTimeout((()=>{(0,I.jv)(p.current)&&x(e)}),500)},error:b||Boolean(m),helperText:h||m&&(0,o.jsx)(y.Z,{id:`ui.composer.media.link.add.error.${m}`,defaultMessage:`ui.composer.media.link.add.error.${m}`})||(0,o.jsx)(y.Z,{id:"ui.composer.media.link.add.help",defaultMessage:"ui.composer.media.link.add.help"}),disabled:r},O,{InputProps:Object.assign(Object.assign({},O.InputProps),{endAdornment:(0,o.jsx)(o.Fragment,{children:""===u&&(null===(t=O.InputProps)||void 0===t?void 0:t.endAdornment)?null===(s=O.InputProps)||void 0===s?void 0:s.endAdornment:(0,o.jsx)(k.Z,Object.assign({position:"end"},{children:(0,o.jsx)(S.Z,Object.assign({in:null===m&&""!==u},{children:(0,o.jsx)(f.Z,Object.assign({size:"small",disabled:r,type:"submit"},{children:r?(0,o.jsx)(g.Z,{color:"primary",size:20}):(0,o.jsx)(y.Z,{id:"ui.composer.media.link.add.submit",defaultMessage:"ui.composer.media.link.add.submit"})}))}))}))})})}))}))},L={layerRoot:`${d}-layer-root`,title:`${d}-layer-title`,content:`${d}-layer-content`,media:`${d}-media`,delete:`${d}-delete`},D=(0,u.ZP)(m.Z,{name:d,slot:"LayerRoot"})((()=>({}))),U=a.forwardRef(((e,t)=>{const{className:s,onClose:i,onSave:r,defaultValue:l=[]}=e,d=(0,n._T)(e,["className","onClose","onSave","defaultValue"]),[u,m]=(0,a.useState)(l),g=(0,a.useCallback)((()=>r(u)),[u]),p=(0,a.useCallback)((e=>m([...u,e])),[u]),j=(0,a.useCallback)((e=>m(e)),[]);return(0,o.jsxs)(D,Object.assign({ref:t,className:c()(s,L.layerRoot)},d,{children:[(0,o.jsxs)(Z.Z,Object.assign({className:L.title},{children:[(0,o.jsx)(f.Z,Object.assign({onClick:i},{children:(0,o.jsx)(v.Z,{children:"arrow_back"})})),(0,o.jsx)(C.Z,{children:(0,o.jsx)(y.Z,{id:"ui.composer.media.link.layer.title",defaultMessage:"ui.composer.media.link.layer.title"})}),(0,o.jsx)(E.Z,Object.assign({size:"small",color:"secondary",variant:"contained",onClick:g},{children:(0,o.jsx)(y.Z,{id:"ui.composer.layer.save",defaultMessage:"ui.composer.layer.save"})}))]})),(0,o.jsxs)(N.Z,Object.assign({className:L.content},{children:[(0,o.jsx)(F,{id:"page",name:"page",label:(0,o.jsx)(y.Z,{id:"ui.composer.media.link.add.label",defaultMessage:"ui.composer.media.link.add.label"}),fullWidth:!0,variant:"outlined",placeholder:"https://",onSuccess:p}),(0,o.jsx)(P,{onChange:j,value:u})]}))]}))})),V={name:"link",displayComponent:b,triggerButton:e=>{var{className:t}=e,s=(0,n._T)(e,["className"]);return(0,o.jsx)(x,Object.assign({className:c()(t,O.triggerRoot)},s,{"aria-label":"add link"},{children:(0,o.jsx)(v.Z,{children:"link"})}))},layerComponent:U,previewComponent:P,filter:p}},26474:(e,t,s)=>{"use strict";s.d(t,{Z:()=>O});var n=s(97582),o=s(85893),a=s(67294),i=s(52693),r=s(37024),l=s(59219),c=s(20819),d=s.n(c),u=s(90948),m=s(94253),g=s(57250);const p=e=>e.type===g.TC||e.type===g.OH,j="SCMediaShare";var h=s(38210),b=s(78245);const f={displayRoot:`${j}-display-root`,sharePreview:`${j}-share-preview`,sharePlaceholder:`${j}-share-placeholder`},v=(0,u.ZP)(m.Z,{name:j,slot:"DisplayRoot"})((({theme:e})=>({}))),O={name:"share",displayComponent:e=>{var{className:t,medias:s=[],onMediaClick:c=null}=e,u=(0,n._T)(e,["className","medias","onMediaClick"]);const j=(0,a.useMemo)((()=>s.filter(p)),[s]);return 0===j.length?null:(0,o.jsx)(v,Object.assign({className:d()(t,f.displayRoot)},u,{children:j.map(((e,t)=>(0,o.jsx)(m.Z,Object.assign({className:f.sharePreview,onClick:c},{children:e.type===g.OH||e.embed&&e.embed.embed_type===g.ej?(0,o.jsx)(b.Z,{event:e.embed.metadata,template:h.Y.DETAIL,variant:"outlined",square:!0,hideEventParticipants:!0,hideEventPlanner:!0,actions:(0,o.jsx)(o.Fragment,{})}):(0,o.jsx)(i.Z,{feedObjectId:e.embed.metadata.id,feedObjectType:e.embed.metadata.type,variant:"outlined",template:r.r.SHARE,cacheStrategy:l.n2.CACHE_FIRST})}),t)))}))},triggerButton:null,layerComponent:null,previewComponent:null,filter:p}},8455:(e,t,s)=>{"use strict";s.d(t,{Z:()=>m});var n=s(97582),o=s(85893),a=s(90948),i=s(87918),r=s(20819),l=s.n(r);const c="SCTagChip",d={ellipsis:`${c}-ellipsis`},u=(0,a.ZP)(i.Z,{name:c,slot:"Root",overridesResolver:(e,t)=>[t.root]})((({theme:e})=>({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",height:25,[`&.${d.ellipsis}`]:{maxWidth:120}})));function m(e){const{tag:t,clickable:s=!0,disposable:a=!0,label:i=null,ellipsis:r=!1,onClick:c=null,onDelete:m=null,className:g=null}=e,p=(0,n._T)(e,["tag","clickable","disposable","label","ellipsis","onClick","onDelete","className"]);return(0,o.jsx)(u,Object.assign({className:l()(g,{[d.ellipsis]:r}),sx:{backgroundColor:`${t.color}`,color:e=>e.palette.getContrastText(t.color)}},s&&{onClick:()=>{c&&c(t.id)}},a&&{onDelete:()=>{m&&m(t.id)}},{label:i||t.name},p))}},86558:(e,t,s)=>{"use strict";s.d(t,{Z:()=>E,x:()=>C});var n=s(97582),o=s(85893),a=s(67294),i=s(90948),r=s(94253),l=s(11535),c=s(16216),d=s(15861),u=s(67720),m=s(67564),g=s(96514),p=s(90629),j=s(7982),h=s(8455);const b="SCTags",f=(0,i.ZP)(r.Z,{name:`${b}`,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({cursor:"pointer"}))),v={paper:`${b}-paper`},O=(0,i.ZP)(l.Z,{name:`${b}Popper`,slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({zIndex:2,[`& .${v.paper}`]:{padding:"10px 5px"}}))),x=(0,i.ZP)(c.Z,{name:`${b}List`,slot:"Root",overridesResolver:(e,t)=>t.root})({}),y=(0,i.ZP)(c.Z,{name:`${b}Stack`,slot:"Root",overridesResolver:(e,t)=>t.root})({flexWrap:"wrap",justifyContent:"flex-start",alignItems:"flex-start","& > div:not(style)+:not(style)":{margin:0}}),Z=(0,i.ZP)(r.Z,{name:`${b}ItemList`,slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({padding:e.spacing(.2),textAlign:"center",color:e.palette.text.secondary})));var C;function E(e){const{tags:t=[],title:s=null,type:i=C.POPPER,onOpen:r=null,onClose:l=null,onClickTag:c=null,TagChipProps:b={}}=e,E=(0,n._T)(e,["tags","title","type","onOpen","onClose","onClickTag","TagChipProps"]),[N,_]=(0,a.useState)(!1);let T=(0,a.useRef)(null);function A(){T.current&&T.current.contains(event.target)||(_(!1),E.onClose&&E.onClose())}function P(){return(0,o.jsx)(o.Fragment,{children:s&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.Z,Object.assign({sx:{padding:1,fontWeight:600}},{children:s})),(0,o.jsx)(u.Z,{})]})})}const w=(0,a.useRef)(N);return a.useEffect((()=>{!0===w.current&&!1===N&&T.current.focus(),w.current=N}),[N]),(0,o.jsx)(o.Fragment,{children:t.length&&(0,o.jsx)(a.Fragment,{children:i===C.POPPER?(0,o.jsxs)(f,Object.assign({},E,{children:[(0,o.jsx)(m.Z,Object.assign({ref:T,fontSize:"small",onClick:function(){_((e=>!e)),E.onOpen&&E.onOpen(!N)},"aria-haspopup":"true"},{children:"label"})),(0,o.jsx)(O,Object.assign({open:N,anchorEl:T.current,transition:!0,placement:"bottom-start",modifiers:[{name:"preventOverflow",enabled:!0}]},{children:e=>{var{TransitionProps:s,placement:a}=e,i=(0,n._T)(e,["TransitionProps","placement"]);return(0,o.jsx)(g.Z,Object.assign({},s,{style:{transformOrigin:"bottom"===a?"center top":"center bottom"}},{children:(0,o.jsx)(p.Z,Object.assign({variant:"outlined",className:v.paper},{children:(0,o.jsx)(j.d,Object.assign({onClickAway:A},{children:(0,o.jsxs)(o.Fragment,{children:[P(),(0,o.jsx)(y,Object.assign({spacing:2},i,{children:t.map((e=>(0,o.jsx)(Z,{children:(0,o.jsx)(h.Z,Object.assign({tag:e,onClick:c},b))},e.id)))}))]})}))}))}))}}))]})):(0,o.jsxs)(x,{children:[P(),(0,o.jsx)(y,Object.assign({spacing:1,direction:E.direction?E.direction:"column"},{children:t.map((e=>(0,o.jsx)(Z,{children:(0,o.jsx)(h.Z,Object.assign({tag:e,onClick:c},b))},e.id)))}))]})})})}!function(e){e.LIST="list",e.POPPER="popper"}(C||(C={}))},37024:(e,t,s)=>{"use strict";var n,o;s.d(t,{F:()=>o,r:()=>n}),function(e){e.SNIPPET="snippet",e.PREVIEW="preview",e.DETAIL="detail",e.SEARCH="search",e.SHARE="share"}(n||(n={})),function(e){e.RELEVANCE_ACTIVITIES="relevant_activities",e.RECENT_COMMENTS="recent_comments",e.FIRST_COMMENTS="first_comments",e.CONNECTIONS_COMMENTS="connections_comments"}(o||(o={}))},9774:(e,t,s)=>{"use strict";var n,o;s.d(t,{a:()=>n,f:()=>o}),function(e){e.HOME="home",e.EXPLORE="explore",e.CATEGORY="category",e.GROUP="group",e.EVENT="event"}(n||(n={})),function(e){e.COMMENT="comment",e.VOTE="vote",e.POLLVOTE="pollvote",e.FOLLOW="follow"}(o||(o={}))},11447:function(e){var t,s;e.exports=(t={772:(e,t,s)=>{const n=s(826).remove,o=/[.*+?^${}()|[\]\\]/g,a=/[a-z0-9_]/i,i=/\s+/;e.exports=function(e,t,s){var r,l;l={insideWords:!1,findAllOccurrences:!1,requireMatchAll:!1},r=(r=s)||{},Object.keys(r).forEach((e=>{l[e]=!!r[e]})),s=l;const c=Array.from(e).map((e=>n(e)));let d=c.join("");return(t=n(t)).trim().split(i).filter((e=>e.length>0)).reduce(((e,t)=>{const n=t.length,i=!s.insideWords&&a.test(t[0])?"\\b":"",r=new RegExp(i+t.replace(o,"\\$&"),"i");let l,u;if(l=r.exec(d),s.requireMatchAll&&null===l)return d="",[];for(;l;){u=l.index;const t=n-c.slice(u,u+n).join("").length,o=u-c.slice(0,u).join("").length,a=[u+o,u+n+o+t];if(a[0]!==a[1]&&e.push(a),d=d.slice(0,u)+new Array(n+1).join(" ")+d.slice(u+n),!s.findAllOccurrences)break;l=r.exec(d)}return e}),[]).sort(((e,t)=>e[0]-t[0]))}},826:e=>{var t={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\u1ea4":"A","\u1eae":"A","\u1eb2":"A","\u1eb4":"A","\u1eb6":"A","\xc6":"AE","\u1ea6":"A","\u1eb0":"A","\u0202":"A","\xc7":"C","\u1e08":"C","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\u1ebe":"E","\u1e16":"E","\u1ec0":"E","\u1e14":"E","\u1e1c":"E","\u0206":"E","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\u1e2e":"I","\u020a":"I","\xd0":"D","\xd1":"N","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\u1ed0":"O","\u1e4c":"O","\u1e52":"O","\u020e":"O","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xdd":"Y","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\u1ea5":"a","\u1eaf":"a","\u1eb3":"a","\u1eb5":"a","\u1eb7":"a","\xe6":"ae","\u1ea7":"a","\u1eb1":"a","\u0203":"a","\xe7":"c","\u1e09":"c","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\u1ebf":"e","\u1e17":"e","\u1ec1":"e","\u1e15":"e","\u1e1d":"e","\u0207":"e","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\u1e2f":"i","\u020b":"i","\xf0":"d","\xf1":"n","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\u1ed1":"o","\u1e4d":"o","\u1e53":"o","\u020f":"o","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xfd":"y","\xff":"y","\u0100":"A","\u0101":"a","\u0102":"A","\u0103":"a","\u0104":"A","\u0105":"a","\u0106":"C","\u0107":"c","\u0108":"C","\u0109":"c","\u010a":"C","\u010b":"c","\u010c":"C","\u010d":"c","C\u0306":"C","c\u0306":"c","\u010e":"D","\u010f":"d","\u0110":"D","\u0111":"d","\u0112":"E","\u0113":"e","\u0114":"E","\u0115":"e","\u0116":"E","\u0117":"e","\u0118":"E","\u0119":"e","\u011a":"E","\u011b":"e","\u011c":"G","\u01f4":"G","\u011d":"g","\u01f5":"g","\u011e":"G","\u011f":"g","\u0120":"G","\u0121":"g","\u0122":"G","\u0123":"g","\u0124":"H","\u0125":"h","\u0126":"H","\u0127":"h","\u1e2a":"H","\u1e2b":"h","\u0128":"I","\u0129":"i","\u012a":"I","\u012b":"i","\u012c":"I","\u012d":"i","\u012e":"I","\u012f":"i","\u0130":"I","\u0131":"i","\u0132":"IJ","\u0133":"ij","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u1e30":"K","\u1e31":"k","K\u0306":"K","k\u0306":"k","\u0139":"L","\u013a":"l","\u013b":"L","\u013c":"l","\u013d":"L","\u013e":"l","\u013f":"L","\u0140":"l","\u0141":"l","\u0142":"l","\u1e3e":"M","\u1e3f":"m","M\u0306":"M","m\u0306":"m","\u0143":"N","\u0144":"n","\u0145":"N","\u0146":"n","\u0147":"N","\u0148":"n","\u0149":"n","N\u0306":"N","n\u0306":"n","\u014c":"O","\u014d":"o","\u014e":"O","\u014f":"o","\u0150":"O","\u0151":"o","\u0152":"OE","\u0153":"oe","P\u0306":"P","p\u0306":"p","\u0154":"R","\u0155":"r","\u0156":"R","\u0157":"r","\u0158":"R","\u0159":"r","R\u0306":"R","r\u0306":"r","\u0212":"R","\u0213":"r","\u015a":"S","\u015b":"s","\u015c":"S","\u015d":"s","\u015e":"S","\u0218":"S","\u0219":"s","\u015f":"s","\u0160":"S","\u0161":"s","\u0162":"T","\u0163":"t","\u021b":"t","\u021a":"T","\u0164":"T","\u0165":"t","\u0166":"T","\u0167":"t","T\u0306":"T","t\u0306":"t","\u0168":"U","\u0169":"u","\u016a":"U","\u016b":"u","\u016c":"U","\u016d":"u","\u016e":"U","\u016f":"u","\u0170":"U","\u0171":"u","\u0172":"U","\u0173":"u","\u0216":"U","\u0217":"u","V\u0306":"V","v\u0306":"v","\u0174":"W","\u0175":"w","\u1e82":"W","\u1e83":"w","X\u0306":"X","x\u0306":"x","\u0176":"Y","\u0177":"y","\u0178":"Y","Y\u0306":"Y","y\u0306":"y","\u0179":"Z","\u017a":"z","\u017b":"Z","\u017c":"z","\u017d":"Z","\u017e":"z","\u017f":"s","\u0192":"f","\u01a0":"O","\u01a1":"o","\u01af":"U","\u01b0":"u","\u01cd":"A","\u01ce":"a","\u01cf":"I","\u01d0":"i","\u01d1":"O","\u01d2":"o","\u01d3":"U","\u01d4":"u","\u01d5":"U","\u01d6":"u","\u01d7":"U","\u01d8":"u","\u01d9":"U","\u01da":"u","\u01db":"U","\u01dc":"u","\u1ee8":"U","\u1ee9":"u","\u1e78":"U","\u1e79":"u","\u01fa":"A","\u01fb":"a","\u01fc":"AE","\u01fd":"ae","\u01fe":"O","\u01ff":"o","\xde":"TH","\xfe":"th","\u1e54":"P","\u1e55":"p","\u1e64":"S","\u1e65":"s","X\u0301":"X","x\u0301":"x","\u0403":"\u0413","\u0453":"\u0433","\u040c":"\u041a","\u045c":"\u043a","A\u030b":"A","a\u030b":"a","E\u030b":"E","e\u030b":"e","I\u030b":"I","i\u030b":"i","\u01f8":"N","\u01f9":"n","\u1ed2":"O","\u1ed3":"o","\u1e50":"O","\u1e51":"o","\u1eea":"U","\u1eeb":"u","\u1e80":"W","\u1e81":"w","\u1ef2":"Y","\u1ef3":"y","\u0200":"A","\u0201":"a","\u0204":"E","\u0205":"e","\u0208":"I","\u0209":"i","\u020c":"O","\u020d":"o","\u0210":"R","\u0211":"r","\u0214":"U","\u0215":"u","B\u030c":"B","b\u030c":"b","\u010c\u0323":"C","\u010d\u0323":"c","\xca\u030c":"E","\xea\u030c":"e","F\u030c":"F","f\u030c":"f","\u01e6":"G","\u01e7":"g","\u021e":"H","\u021f":"h","J\u030c":"J","\u01f0":"j","\u01e8":"K","\u01e9":"k","M\u030c":"M","m\u030c":"m","P\u030c":"P","p\u030c":"p","Q\u030c":"Q","q\u030c":"q","\u0158\u0329":"R","\u0159\u0329":"r","\u1e66":"S","\u1e67":"s","V\u030c":"V","v\u030c":"v","W\u030c":"W","w\u030c":"w","X\u030c":"X","x\u030c":"x","Y\u030c":"Y","y\u030c":"y","A\u0327":"A","a\u0327":"a","B\u0327":"B","b\u0327":"b","\u1e10":"D","\u1e11":"d","\u0228":"E","\u0229":"e","\u0190\u0327":"E","\u025b\u0327":"e","\u1e28":"H","\u1e29":"h","I\u0327":"I","i\u0327":"i","\u0197\u0327":"I","\u0268\u0327":"i","M\u0327":"M","m\u0327":"m","O\u0327":"O","o\u0327":"o","Q\u0327":"Q","q\u0327":"q","U\u0327":"U","u\u0327":"u","X\u0327":"X","x\u0327":"x","Z\u0327":"Z","z\u0327":"z"},s=Object.keys(t).join("|"),n=new RegExp(s,"g"),o=new RegExp(s,""),a=function(e){return e.replace(n,(function(e){return t[e]}))};e.exports=a,e.exports.has=function(e){return!!e.match(o)},e.exports.remove=a}},s={},function e(n){var o=s[n];if(void 0!==o)return o.exports;var a=s[n]={exports:{}};return t[n](a,a.exports,e),a.exports}(772))},23370:function(e){var t,s;e.exports=(t={705:e=>{e.exports=function(e,t){const s=[];return 0===t.length?s.push({text:e,highlight:!1}):t[0][0]>0&&s.push({text:e.slice(0,t[0][0]),highlight:!1}),t.forEach(((n,o)=>{const a=n[0],i=n[1];s.push({text:e.slice(a,i),highlight:!0}),o===t.length-1?i<e.length&&s.push({text:e.slice(i,e.length),highlight:!1}):i<t[o+1][0]&&s.push({text:e.slice(i,t[o+1][0]),highlight:!1})})),s}}},s={},function e(n){var o=s[n];if(void 0!==o)return o.exports;var a=s[n]={exports:{}};return t[n](a,a.exports,e),a.exports}(705))},1216:(e,t,s)=>{"use strict";var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}(),o=s(44778),a=u(o),i=u(s(45697)),r=s(54081),l=u(s(38315)),c=u(s(38282)),d=u(s(40821));function u(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var j=0,h=0,b=0,f=0,v="data-lazyload-listened",O=[],x=[],y=!1;try{var Z=Object.defineProperty({},"passive",{get:function(){y=!0}});window.addEventListener("test",null,Z)}catch(w){}var C=!!y&&{capture:!1,passive:!0},E=function(e){var t=e.ref;if(t instanceof HTMLElement){var s=(0,l.default)(t),n=e.props.overflow&&s!==t.ownerDocument&&s!==document&&s!==document.documentElement?function(e,t){var s=e.ref,n=void 0,o=void 0,a=void 0,i=void 0;try{var r=t.getBoundingClientRect();n=r.top,o=r.left,a=r.height,i=r.width}catch(w){n=j,o=h,a=f,i=b}var l=window.innerHeight||document.documentElement.clientHeight,c=window.innerWidth||document.documentElement.clientWidth,d=Math.max(n,0),u=Math.max(o,0),m=Math.min(l,n+a)-d,g=Math.min(c,o+i)-u,p=void 0,v=void 0,O=void 0,x=void 0;try{var y=s.getBoundingClientRect();p=y.top,v=y.left,O=y.height,x=y.width}catch(w){p=j,v=h,O=f,x=b}var Z=p-d,C=v-u,E=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return Z-E[0]<=m&&Z+O+E[1]>=0&&C-E[0]<=g&&C+x+E[1]>=0}(e,s):function(e){var t=e.ref;if(!(t.offsetWidth||t.offsetHeight||t.getClientRects().length))return!1;var s=void 0,n=void 0;try{var o=t.getBoundingClientRect();s=o.top,n=o.height}catch(w){s=j,n=f}var a=window.innerHeight||document.documentElement.clientHeight,i=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return s-i[0]<=a&&s+n+i[1]>=0}(e);n?e.visible||(e.props.once&&x.push(e),e.visible=!0,e.forceUpdate()):e.props.once&&e.visible||(e.visible=!1,e.props.unmountIfInvisible&&e.forceUpdate())}},N=function(){x.forEach((function(e){var t=O.indexOf(e);-1!==t&&O.splice(t,1)})),x=[]},_=function(){for(var e=0;e<O.length;++e){var t=O[e];E(t)}N()},T=void 0,A=null,P=function(e){function t(e){m(this,t);var s=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.visible=!1,s.setRef=s.setRef.bind(s),s}return p(t,e),n(t,[{key:"componentDidMount",value:function(){var e=window,t=this.props.scrollContainer;t&&"string"==typeof t&&(e=e.document.querySelector(t));var s=void 0!==this.props.debounce&&"throttle"===T||"debounce"===T&&void 0===this.props.debounce;if(s&&((0,r.off)(e,"scroll",A,C),(0,r.off)(window,"resize",A,C),A=null),A||(void 0!==this.props.debounce?(A=(0,c.default)(_,"number"==typeof this.props.debounce?this.props.debounce:300),T="debounce"):void 0!==this.props.throttle?(A=(0,d.default)(_,"number"==typeof this.props.throttle?this.props.throttle:300),T="throttle"):A=_),this.props.overflow){var n=(0,l.default)(this.ref);if(n&&"function"==typeof n.getAttribute){var o=+n.getAttribute(v)+1;1===o&&n.addEventListener("scroll",A,C),n.setAttribute(v,o)}}else if(0===O.length||s){var a=this.props,i=a.scroll,u=a.resize;i&&(0,r.on)(e,"scroll",A,C),u&&(0,r.on)(window,"resize",A,C)}O.push(this),E(this)}},{key:"shouldComponentUpdate",value:function(){return this.visible}},{key:"componentWillUnmount",value:function(){if(this.props.overflow){var e=(0,l.default)(this.ref);if(e&&"function"==typeof e.getAttribute){var t=+e.getAttribute(v)-1;0===t?(e.removeEventListener("scroll",A,C),e.removeAttribute(v)):e.setAttribute(v,t)}}var s=O.indexOf(this);-1!==s&&O.splice(s,1),0===O.length&&"undefined"!=typeof window&&((0,r.off)(window,"resize",A,C),(0,r.off)(window,"scroll",A,C))}},{key:"setRef",value:function(e){e&&(this.ref=e)}},{key:"render",value:function(){var e=this.props,t=e.height,s=e.children,n=e.placeholder,o=e.className,i=e.classNamePrefix,r=e.style;return a.default.createElement("div",{className:i+"-wrapper "+o,ref:this.setRef,style:r},this.visible?s:n||a.default.createElement("div",{style:{height:t},className:i+"-placeholder"}))}}]),t}(o.Component);P.propTypes={className:i.default.string,classNamePrefix:i.default.string,once:i.default.bool,height:i.default.oneOfType([i.default.number,i.default.string]),offset:i.default.oneOfType([i.default.number,i.default.arrayOf(i.default.number)]),overflow:i.default.bool,resize:i.default.bool,scroll:i.default.bool,children:i.default.node,throttle:i.default.oneOfType([i.default.number,i.default.bool]),debounce:i.default.oneOfType([i.default.number,i.default.bool]),placeholder:i.default.node,scrollContainer:i.default.oneOfType([i.default.string,i.default.object]),unmountIfInvisible:i.default.bool,style:i.default.object},P.defaultProps={className:"",classNamePrefix:"lazyload",once:!1,offset:0,overflow:!1,resize:!1,scroll:!0,unmountIfInvisible:!1};t.ZP=P},38282:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){var n=void 0,o=void 0,a=void 0,i=void 0,r=void 0,l=function l(){var c=+new Date-i;c<t&&c>=0?n=setTimeout(l,t-c):(n=null,s||(r=e.apply(a,o),n||(a=null,o=null)))};return function(){a=this,o=arguments,i=+new Date;var c=s&&!n;return n||(n=setTimeout(l,t)),c&&(r=e.apply(a,o),a=null,o=null),r}}},54081:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.on=function(e,t,s,n){n=n||!1,e.addEventListener?e.addEventListener(t,s,n):e.attachEvent&&e.attachEvent("on"+t,(function(t){s.call(e,t||window.event)}))},t.off=function(e,t,s,n){n=n||!1,e.removeEventListener?e.removeEventListener(t,s,n):e.detachEvent&&e.detachEvent("on"+t,s)}},38315:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!(e instanceof HTMLElement))return document.documentElement;for(var t="absolute"===e.style.position,s=/(scroll|auto)/,n=e;n;){if(!n.parentNode)return e.ownerDocument||document.documentElement;var o=window.getComputedStyle(n),a=o.position,i=o.overflow,r=o["overflow-x"],l=o["overflow-y"];if("static"===a&&t)n=n.parentNode;else{if(s.test(i)&&s.test(r)&&s.test(l))return n;n=n.parentNode}}return e.ownerDocument||e.documentElement||document.documentElement}},40821:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s){var n,o;return t||(t=250),function(){var a=s||this,i=+new Date,r=arguments;n&&i<n+t?(clearTimeout(o),o=setTimeout((function(){n=i,e.apply(a,r)}),t)):(n=i,e.apply(a,r))}}},55515:(e,t)=>{"use strict";var s=Symbol.for("react.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),r=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,h={};function b(e,t,s){this.props=e,this.context=t,this.refs=h,this.updater=s||p}function f(){}function v(e,t,s){this.props=e,this.context=t,this.refs=h,this.updater=s||p}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},f.prototype=b.prototype;var O=v.prototype=new f;O.constructor=v,j(O,b.prototype),O.isPureReactComponent=!0;var x=Array.isArray,y=Object.prototype.hasOwnProperty,Z={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,n){var o,a={},i=null,r=null;if(null!=t)for(o in void 0!==t.ref&&(r=t.ref),void 0!==t.key&&(i=""+t.key),t)y.call(t,o)&&!C.hasOwnProperty(o)&&(a[o]=t[o]);var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===a[o]&&(a[o]=l[o]);return{$$typeof:s,type:e,key:i,ref:r,props:a,_owner:Z.current}}function N(e){return"object"==typeof e&&null!==e&&e.$$typeof===s}var _=/\/+/g;function T(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,o,a,i){var r=typeof e;"undefined"!==r&&"boolean"!==r||(e=null);var l=!1;if(null===e)l=!0;else switch(r){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case s:case n:l=!0}}if(l)return i=i(l=e),e=""===a?"."+T(l,0):a,x(i)?(o="",null!=e&&(o=e.replace(_,"$&/")+"/"),A(i,t,o,"",(function(e){return e}))):null!=i&&(N(i)&&(i=function(e,t){return{$$typeof:s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,o+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(_,"$&/")+"/")+e)),t.push(i)),1;if(l=0,a=""===a?".":a+":",x(e))for(var c=0;c<e.length;c++){var d=a+T(r=e[c],c);l+=A(r,t,o,d,i)}else if(d=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=g&&e[g]||e["@@iterator"])?e:null}(e),"function"==typeof d)for(e=d.call(e),c=0;!(r=e.next()).done;)l+=A(r=r.value,t,o,d=a+T(r,c++),i);else if("object"===r)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,s){if(null==e)return e;var n=[],o=0;return A(e,n,"","",(function(e){return t.call(s,e,o++)})),n}function w(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var k={current:null},S={transition:null},M={ReactCurrentDispatcher:k,ReactCurrentBatchConfig:S,ReactCurrentOwner:Z};function R(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,s){P(e,(function(){t.apply(this,arguments)}),s)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=b,t.Fragment=o,t.Profiler=i,t.PureComponent=v,t.StrictMode=a,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.act=R,t.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=j({},e.props),a=e.key,i=e.ref,r=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,r=Z.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)y.call(t,c)&&!C.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];o.children=l}return{$$typeof:s,type:e.type,key:a,ref:i,props:o,_owner:r}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:r,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:w}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=S.transition;S.transition={};try{e()}finally{S.transition=t}},t.unstable_act=R,t.useCallback=function(e,t){return k.current.useCallback(e,t)},t.useContext=function(e){return k.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return k.current.useDeferredValue(e)},t.useEffect=function(e,t){return k.current.useEffect(e,t)},t.useId=function(){return k.current.useId()},t.useImperativeHandle=function(e,t,s){return k.current.useImperativeHandle(e,t,s)},t.useInsertionEffect=function(e,t){return k.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return k.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return k.current.useMemo(e,t)},t.useReducer=function(e,t,s){return k.current.useReducer(e,t,s)},t.useRef=function(e){return k.current.useRef(e)},t.useState=function(e){return k.current.useState(e)},t.useSyncExternalStore=function(e,t,s){return k.current.useSyncExternalStore(e,t,s)},t.useTransition=function(){return k.current.useTransition()},t.version="18.3.1"},44778:(e,t,s)=>{"use strict";e.exports=s(55515)}}]);