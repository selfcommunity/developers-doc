(self.webpackChunkdevelopers_doc=self.webpackChunkdevelopers_doc||[]).push([[26770],{23237:()=>{},31815:()=>{},34381:(e,t,o)=>{"use strict";o.d(t,{H:()=>s});const s="SCCategoryHeader"},36175:(e,t,o)=>{"use strict";o.d(t,{F:()=>s});const s={user:{username:"beatrice",password:"Password!!Beatrice2021",client_id:"XJjPE54IBBjhibs0Rf0wZ969cZNPq6WjC02FrkaM",grant_type:"password"},portal:"https://internal.selfcommunity.io/mkg2zxd0"}},37180:(e,t,o)=>{"use strict";o.d(t,{A:()=>m});var s=o(96540),n=o(36175),r=o(75251);function a(e,t){void 0===e&&(e=""),void 0===t&&(t={});const o=Object.keys(t).map((e=>encodeURIComponent(e)+"="+encodeURIComponent(t[e]))).join("&");return fetch(e,{method:"POST",headers:{accept:"application/json","content-type":"application/x-www-form-urlencoded"},body:o})}function l(){if((0,r.A)()){const e={refresh_token:JSON.parse(window.localStorage.getItem("token")).refresh_token,client_id:n.F.user.client_id,grant_type:"refresh_token"};return a(`${n.F.portal}/oauth/token/`,e).then((e=>e.json())).then((e=>({accessToken:e.access_token,refreshToken:e.refresh_token,tokenType:e.token_type,expiresIn:e.expires_in}))).catch((e=>Promise.reject(e)))}}function c(){const e=(0,r.A)(),[t,o]=(0,s.useState)(e?JSON.parse(window.localStorage.getItem("token")):"");return(0,s.useEffect)((()=>{e&&(!t||1e3*t.expiresIn<Date.now()?a(`${n.F.portal}/oauth/token/`,n.F.user).then((e=>e.json())).then((e=>({accessToken:e.access_token,refreshToken:e.refresh_token,tokenType:e.token_type,expiresIn:e.expires_in}))).catch((e=>e)).then((e=>{o(e)})):e&&o(JSON.parse(window.localStorage.getItem("token"))))}),[e]),(0,s.useEffect)((()=>{e&&window.localStorage.setItem("token",JSON.stringify(t))}),[e,t]),t}var i=o(45284),d=o(51151),g=o(73906),u=o(74848);function m(e){let{children:t}=e;const o=c(),s={portal:n.F.portal,locale:{default:"en"},session:{type:"OAuth",clientId:n.F.user.client_id,authToken:o,handleRefreshToken:l},theme:d.Ay,handleAnonymousAction:()=>{alert("Anonymous action")}};return(0,u.jsx)(g.A,{children:()=>(0,u.jsx)(i.Ay,{conf:s,children:t})})}},66671:()=>{},71271:(e,t,o)=>{"use strict";o.d(t,{A:()=>L});var s=o(31635),n=o(74848),r=o(96540),a=o(11848),l=o(71194),c=o(57416),i=o(47859),d=o(67115),g=o(58065),u=o(65846),m=o(22373),p=o(3338),h=o(99042),y=o(94844),j=o(19546),f=o.n(j),x=o(79197),A=o(42942),w=o(44675),k=o(90508),C=o(25441),b=o(27365),v=o(28820),_=o(36870),O=o(27202),F=o(13550),N=o(29368),S=o(94520),P=o(62645),T=o(15906),$=o(29251),I=o(43749),R=o(46900),H=o(43029),B=o(41219),M=o(16799);const E="SCCategoryFollowersButton",D={root:`${E}-root`,dialogRoot:`${E}-dialog-root`,endMessage:`${E}-end-message`},J=(0,a.Ay)(A.A,{name:E,slot:"Root",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>"followers"!==e})((()=>({}))),q=(0,a.Ay)($.A,{name:E,slot:"DialogRoot",overridesResolver:(e,t)=>t.dialogRoot})((()=>({})));const U=function(e){const t=(0,x.A)({props:e,name:E}),{className:o,categoryId:a,category:l,DialogProps:c={}}=t,d=(0,s.__rest)(t,["className","categoryId","category","DialogProps"]),[m,p]=(0,r.useState)(!0),[h,y]=(0,r.useState)(null),[j,A]=(0,r.useState)(null),[$,U]=(0,r.useState)([]),[W,V]=(0,r.useState)(!1),{scCategory:Z}=(0,u.A)({id:a,category:l});(0,P.ho)((()=>{Z&&(0===$.length?O.A.getCategoryFollowers(Z.id,{limit:3}).then((e=>{U([...e.results]),A(3),p(!1)})):A(0))}),[Z]),(0,r.useEffect)((()=>{W&&null!==j&&(p(!0),O.A.getCategoryFollowers(Z.id,{offset:j,limit:20}).then((e=>{U([...0===j?[]:$,...e.results]),y(e.next),p(!1),A(null)})))}),[W,$,j]);const z=(0,r.useMemo)((()=>()=>{h&&F.A.request({url:h,method:N.A.CategoryFollowers.method}).then((e=>{U([...$,...e.data.results]),y(e.data.next)})).catch((e=>S.V.error(T.d,e))).then((()=>p(!1)))}),[$,Z,h]),G=(0,r.useMemo)((()=>()=>{V((e=>!e))}),[V]),L=(0,r.useCallback)((()=>(0,R.E)(Z.followers_counter)),[Z]),X=(0,w.A)(),Y=(0,k.A)(X.breakpoints.down("md"));return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(J,Object.assign({className:f()(D.root,o),onClick:G,disabled:m||!Z||0===Z.followers_counter,followers:null==Z?void 0:Z.followers_counter},d,{children:m||!Z?(0,n.jsx)(H.A,Object.assign({},d)):(0,n.jsx)(C.A,Object.assign({total:Z.followers_counter,renderSurplus:L},{children:$.map((e=>(0,n.jsx)(b.A,{alt:e.username,src:e.avatar},e.id)))}))})),W&&(0,n.jsx)(q,Object.assign({className:D.dialogRoot,title:(0,n.jsx)(g.A,{defaultMessage:"ui.categoryFollowersButton.dialogTitle",id:"ui.categoryFollowersButton.dialogTitle",values:{total:Z.followers_counter}}),onClose:G,open:W},c,{children:(0,n.jsx)(I.A,Object.assign({dataLength:$.length,next:z,hasMoreNext:null!==h||m,loaderNext:(0,n.jsx)(B.A,{elevation:0}),height:Y?"100%":400,endMessage:(0,n.jsx)(i.A,Object.assign({className:D.endMessage},{children:(0,n.jsx)(g.A,{id:"ui.categoryFollowersButton.noOtherFollowers",defaultMessage:"ui.categoryFollowersButton.noOtherFollowers"})}))},{children:(0,n.jsx)(v.A,{children:$.map((e=>(0,n.jsx)(_.Ay,{children:(0,n.jsx)(M.A,{elevation:0,user:e})},e.id)))})}))}))]})};var W=o(34381),V=o(38441),Z=o(21676);const z={root:`${W.H}-root`,cover:`${W.H}-cover`,name:`${W.H}-name`,slogan:`${W.H}-slogan`,info:`${W.H}-info`,tags:`${W.H}-tags`,followedCounter:`${W.H}-followed-counter`,followed:`${W.H}-followed`,action:`${W.H}-action`},G=(0,a.Ay)(l.A,{name:W.H,slot:"Root"})((()=>({})));const L=function(e){var t,o;const a=(0,x.A)({props:e,name:W.H}),{className:j,categoryId:A,category:w,CategoryFollowButtonProps:k={},CategoryFollowersButtonProps:C={},showTags:b=!1}=a,v=(0,s.__rest)(a,["className","categoryId","category","CategoryFollowButtonProps","CategoryFollowersButtonProps","showTags"]),{scCategory:_,setSCCategory:O}=(0,u.A)({id:A,category:w}),F=(0,m.__)(p.DE),{isPaymentsEnabled:N}=(0,h.A)(),S=(0,r.useMemo)((()=>Object.assign({},_?{background:`url('${_.emotional_image_original}') center / cover`}:{})),[_]);return _?(0,n.jsxs)(G,Object.assign({className:f()(z.root,j)},v,{children:[(0,n.jsx)(c.A,{style:S,classes:{root:z.cover}}),(0,n.jsxs)(l.A,Object.assign({className:z.info},{children:[(0,n.jsx)(i.A,Object.assign({variant:"h3",className:z.name,gutterBottom:!0},{children:_.name})),_.slogan&&(0,n.jsx)(i.A,Object.assign({variant:"h5",className:z.slogan},{children:_.slogan})),b&&(null===(t=_.tags)||void 0===t?void 0:t.length)>0&&(0,n.jsx)(l.A,Object.assign({className:z.tags},{children:_.tags.map((e=>(0,n.jsx)(Z.A,{tag:e,disposable:!1,clickable:!1},e.id)))})),F&&(0,n.jsxs)(l.A,Object.assign({className:z.followed},{children:[(0,n.jsx)(i.A,Object.assign({className:z.followedCounter,component:"div"},{children:(0,n.jsx)(g.A,{id:"ui.categoryHeader.followedBy",defaultMessage:"ui.categoryHeader.followedBy",values:{total:_.followers_counter}})})),(0,n.jsx)(U,Object.assign({category:_,categoryId:null==_?void 0:_.id},C))]})),(0,n.jsxs)(l.A,Object.assign({className:z.action},{children:[N&&(null===(o=_.paywalls)||void 0===o?void 0:o.length)>0&&_.payment_order&&(0,n.jsx)(V.A,{contentType:y.AV.CATEGORY,content:_}),(0,n.jsx)(d.A,Object.assign({category:_,onFollow:(e,t)=>{O(Object.assign(Object.assign({},e),{followers_counter:e.followers_counter+(t?1:-1)}))}},k))]}))]}))]})):null}},82787:()=>{},97492:()=>{},98272:(e,t,o)=>{"use strict";o.r(t),o.d(t,{assets:()=>S,contentTitle:()=>N,default:()=>$,frontMatter:()=>F,metadata:()=>s,toc:()=>P});const s=JSON.parse('{"id":"sdk/community-js/react-templates/Components/Category","title":"Category","description":"The Category template renders the category page.","source":"@site/docs/sdk/community-js/react-templates/Components/Category.mdx","sourceDirName":"sdk/community-js/react-templates/Components","slug":"/sdk/community-js/react-templates/Components/Category","permalink":"/docs/sdk/community-js/react-templates/Components/Category","draft":false,"unlisted":false,"editUrl":"https://github.com/selfcommunity/developers-doc/tree/main/docs/sdk/community-js/react-templates/Components/Category.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_label":"Category","sidebar_position":1,"title":"Category"},"sidebar":"sdkSidebar","previous":{"title":"Widget","permalink":"/docs/sdk/community-js/react-ui/component_API/Widget"},"next":{"title":"Category Feed","permalink":"/docs/sdk/community-js/react-templates/Components/CategoryFeed"}}');var n=o(74848),r=o(28453),a=o(37180),l=o(11848),c=o(71194),i=o(71271),d=o(64857),g=o(65846),u=o(46703),m=o(73785),p=o(34381);const h={root:`${p.H}-skeleton-root`,cover:`${p.H}-skeleton-cover`},y=(0,l.Ay)(c.A,{name:p.H,slot:"SkeletonRoot"})((()=>({})));function j(){return(0,n.jsxs)(y,Object.assign({className:h.root},{children:[(0,n.jsx)(m.A,{sx:{height:230},animation:"wave",variant:"rectangular",className:h.cover}),(0,n.jsx)(c.A,{children:(0,n.jsx)(m.A,{animation:"wave",sx:{height:20,maxWidth:300,width:"100%",margin:"0 auto"}})}),(0,n.jsx)(c.A,{children:(0,n.jsx)(m.A,{animation:"wave",sx:{height:20,maxWidth:300,width:"100%",margin:"0 auto"}})})]}))}const f="SCCategoryTemplate",x={root:`${f}-skeleton-root`},A=(0,l.Ay)(c.A,{name:f,slot:"SkeletonRoot"})((()=>({})));function w(){return(0,n.jsxs)(A,Object.assign({className:x.root},{children:[(0,n.jsx)(j,{}),(0,n.jsx)(u.A,{})]}))}var k=o(79197),C=o(13327),b=o.n(C);const v={root:`${f}-root`,feed:`${f}-feed`},_=(0,l.Ay)(c.A,{name:f,slot:"Root"})((()=>({})));const O=function(e){const t=(0,k.A)({props:e,name:f}),{id:o="category",className:s,category:r,categoryId:a,widgets:l,FeedObjectProps:c,FeedSidebarProps:u,CategoryFeedProps:m={}}=t,{scCategory:p}=(0,g.A)({id:a,category:r});return p?(0,n.jsxs)(_,Object.assign({id:o,className:b()(v.root,s)},{children:[(0,n.jsx)(i.A,{category:p}),(0,n.jsx)(d.A,Object.assign({className:v.feed,category:p,widgets:l,FeedObjectProps:c,FeedSidebarProps:u},m))]})):(0,n.jsx)(w,{})},F={sidebar_label:"Category",sidebar_position:1,title:"Category"},N=void 0,S={},P=[{value:"Usage",id:"usage",level:4}];function T(e){const t={blockquote:"blockquote",code:"code",h4:"h4",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsx)(t.p,{children:"The Category template renders the category page."}),"\n"]}),"\n","\n",(0,n.jsx)(a.A,{children:(0,n.jsx)(O,{categoryId:3})}),"\n",(0,n.jsx)(t.h4,{id:"usage",children:"Usage"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-jsx",children:" import React from 'react';\n import {SCContextProvider} from '@selfcommunity/react-core';\n import {Category} from '@selfcommunity/react-templates';\n\n function App() {\n   const conf = {\n     portal: '<community-path>',\n     session: {\n       type: 'OAuth',\n       token: '<community-token>',\n       refreshToken: '<community-refresh-token>',\n       refreshTokenEndpoint: '<community-refresh-endpoint>',\n     },\n   };\n   return (\n     <SCContextProvider conf={conf}><Category/></SCContextProvider>\n   );\n }\n"})})]})}function $(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(T,{...e})}):T(e)}}}]);